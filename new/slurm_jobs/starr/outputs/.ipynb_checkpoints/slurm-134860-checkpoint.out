TRAINING THE CHANNEL-WISE LSTM with augmented data
/share/pi/boussard/eroosli_work/benchmarking/models/ihm/main.py:10: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses
  import imp
Using TensorFlow backend.
2020-06-03 15:25:07.770048: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libnvinfer.so.6'; dlerror: libnvinfer.so.6: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /share/sw/open/oracle/18.5.0.0/lib/:
2020-06-03 15:25:07.776172: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libnvinfer_plugin.so.6'; dlerror: libnvinfer_plugin.so.6: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /share/sw/open/oracle/18.5.0.0/lib/:
2020-06-03 15:25:07.776190: W tensorflow/compiler/tf2tensorrt/utils/py_utils.cc:30] Cannot dlopen some TensorRT libraries. If you would like to use Nvidia GPU with TensorRT, please make sure the missing libraries mentioned above are installed properly.
normalizer state: /share/pi/boussard/eroosli_work/benchmarking/models/ihm/ihm_ts1.0.input_str_previous.start_time_zero.normalizer
==> using model models/keras_models/channel_wise_lstms.py
==> not used params in network class: dict_keys(['batch_size', 'beta_1', 'data', 'data_name', 'epochs', 'imputation', 'l1', 'l2', 'load_state', 'lr', 'mode', 'network', 'normalizer_state', 'optimizer', 'output_dir', 'prefix', 'save_every', 'small_part', 'target_repl_coef', 'timestep', 'verbose'])
==> excluded demographics: 
==> found 20 channels: ['Capillary refill rate', 'Diastolic blood pressure', 'Ethnicity', 'Fraction inspired oxygen', 'Gender', 'Glascow coma scale eye opening', 'Glascow coma scale motor response', 'Glascow coma scale total', 'Glascow coma scale verbal response', 'Glucose', 'Heart rate', 'Height', 'Insurance', 'Mean blood pressure', 'Oxygen saturation', 'Respiratory rate', 'Systolic blood pressure', 'Temperature', 'Weight', 'pH']
2020-06-03 15:25:17.975877: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /share/sw/open/oracle/18.5.0.0/lib/:
2020-06-03 15:25:17.975910: E tensorflow/stream_executor/cuda/cuda_driver.cc:351] failed call to cuInit: UNKNOWN ERROR (303)
2020-06-03 15:25:17.975930: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (slurm-compute-c64xj): /proc/driver/nvidia/version does not exist
2020-06-03 15:25:17.976114: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA
2020-06-03 15:25:18.000173: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100000000 Hz
2020-06-03 15:25:18.000400: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x5631ded206c0 initialized for platform Host (this does not guarantee that XLA will be used). Devices:
2020-06-03 15:25:18.000424: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version
==> model.final_name: 2020-06-03_8-25.k_clstms.GEN_ETH_INS
==> compiling the model
Model: "network_1"
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
X (InputLayer)                  (None, None, 94)     0                                            
__________________________________________________________________________________________________
masking_1 (Masking)             (None, None, 94)     0           X[0][0]                          
__________________________________________________________________________________________________
slice_1 (Slice)                 (None, None, 3)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_2 (Slice)                 (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_3 (Slice)                 (None, None, 6)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_4 (Slice)                 (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_5 (Slice)                 (None, None, 5)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_6 (Slice)                 (None, None, 9)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_7 (Slice)                 (None, None, 13)     0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_8 (Slice)                 (None, None, 14)     0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_9 (Slice)                 (None, None, 13)     0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_10 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_11 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_12 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_13 (Slice)                (None, None, 7)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_14 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_15 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_16 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_17 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_18 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_19 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_20 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
bidirectional_1 (Bidirectional) (None, None, 8)      256         slice_1[0][0]                    
__________________________________________________________________________________________________
bidirectional_2 (Bidirectional) (None, None, 8)      224         slice_2[0][0]                    
__________________________________________________________________________________________________
bidirectional_3 (Bidirectional) (None, None, 8)      352         slice_3[0][0]                    
__________________________________________________________________________________________________
bidirectional_4 (Bidirectional) (None, None, 8)      224         slice_4[0][0]                    
__________________________________________________________________________________________________
bidirectional_5 (Bidirectional) (None, None, 8)      320         slice_5[0][0]                    
__________________________________________________________________________________________________
bidirectional_6 (Bidirectional) (None, None, 8)      448         slice_6[0][0]                    
__________________________________________________________________________________________________
bidirectional_7 (Bidirectional) (None, None, 8)      576         slice_7[0][0]                    
__________________________________________________________________________________________________
bidirectional_8 (Bidirectional) (None, None, 8)      608         slice_8[0][0]                    
__________________________________________________________________________________________________
bidirectional_9 (Bidirectional) (None, None, 8)      576         slice_9[0][0]                    
__________________________________________________________________________________________________
bidirectional_10 (Bidirectional (None, None, 8)      224         slice_10[0][0]                   
__________________________________________________________________________________________________
bidirectional_11 (Bidirectional (None, None, 8)      224         slice_11[0][0]                   
__________________________________________________________________________________________________
bidirectional_12 (Bidirectional (None, None, 8)      224         slice_12[0][0]                   
__________________________________________________________________________________________________
bidirectional_13 (Bidirectional (None, None, 8)      384         slice_13[0][0]                   
__________________________________________________________________________________________________
bidirectional_14 (Bidirectional (None, None, 8)      224         slice_14[0][0]                   
__________________________________________________________________________________________________
bidirectional_15 (Bidirectional (None, None, 8)      224         slice_15[0][0]                   
__________________________________________________________________________________________________
bidirectional_16 (Bidirectional (None, None, 8)      224         slice_16[0][0]                   
__________________________________________________________________________________________________
bidirectional_17 (Bidirectional (None, None, 8)      224         slice_17[0][0]                   
__________________________________________________________________________________________________
bidirectional_18 (Bidirectional (None, None, 8)      224         slice_18[0][0]                   
__________________________________________________________________________________________________
bidirectional_19 (Bidirectional (None, None, 8)      224         slice_19[0][0]                   
__________________________________________________________________________________________________
bidirectional_20 (Bidirectional (None, None, 8)      224         slice_20[0][0]                   
__________________________________________________________________________________________________
concatenate_1 (Concatenate)     (None, None, 160)    0           bidirectional_1[0][0]            
                                                                 bidirectional_2[0][0]            
                                                                 bidirectional_3[0][0]            
                                                                 bidirectional_4[0][0]            
                                                                 bidirectional_5[0][0]            
                                                                 bidirectional_6[0][0]            
                                                                 bidirectional_7[0][0]            
                                                                 bidirectional_8[0][0]            
                                                                 bidirectional_9[0][0]            
                                                                 bidirectional_10[0][0]           
                                                                 bidirectional_11[0][0]           
                                                                 bidirectional_12[0][0]           
                                                                 bidirectional_13[0][0]           
                                                                 bidirectional_14[0][0]           
                                                                 bidirectional_15[0][0]           
                                                                 bidirectional_16[0][0]           
                                                                 bidirectional_17[0][0]           
                                                                 bidirectional_18[0][0]           
                                                                 bidirectional_19[0][0]           
                                                                 bidirectional_20[0][0]           
__________________________________________________________________________________________________
lstm_21 (LSTM)                  (None, 32)           24704       concatenate_1[0][0]              
__________________________________________________________________________________________________
dropout_1 (Dropout)             (None, 32)           0           lstm_21[0][0]                    
__________________________________________________________________________________________________
dense_1 (Dense)                 (None, 1)            33          dropout_1[0][0]                  
==================================================================================================
Total params: 30,945
Trainable params: 30,945
Non-trainable params: 0
__________________________________________________________________________________________________
==> training
Train on 4628 samples, validate on 817 samples
Epoch 1/100
 - 321s - loss: 0.3213 - val_loss: 0.2722

==>predicting on train



confusion matrix:
[[2153    2]
 [ 247    8]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.09113699942827225
difference in average predicted and observed risk = -0.014672000571727753
number samples = 2410
accuracy = 0.89668
precision class 0 = 0.897083
precision class 1 = 0.8
recall class 0 = 0.999072
recall class 1 = 0.031373
false negative rate = 0.968627
false positive rate = 0.000928
positive prediction rate = 0.004149
AUC of ROC = 0.709106
AUC of PRC = 0.340121
min(+P, Se) = 0.364706

-------------------------------

confusion matrix:
[[1175    4]
 [ 114    4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.09179800003767014
difference in average predicted and observed risk = 0.0008190000376701312
number samples = 1297
accuracy = 0.909021
precision class 0 = 0.911559
precision class 1 = 0.5
recall class 0 = 0.996607
recall class 1 = 0.033898
false negative rate = 0.966102
false positive rate = 0.003393
positive prediction rate = 0.006168
AUC of ROC = 0.73718
AUC of PRC = 0.260655
min(+P, Se) = 0.322034

-------------------------------

confusion matrix:
[[655   1]
 [ 71   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.1069210022687912
difference in average predicted and observed risk = 0.005551002268791197
number samples = 730
accuracy = 0.90137
precision class 0 = 0.902204
precision class 1 = 0.75
recall class 0 = 0.998476
recall class 1 = 0.040541
false negative rate = 0.959459
false positive rate = 0.001524
positive prediction rate = 0.005479
AUC of ROC = 0.706081
AUC of PRC = 0.286342
min(+P, Se) = 0.324324

-------------------------------

confusion matrix:
[[167   0]
 [ 22   2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.10144899785518646
difference in average predicted and observed risk = -0.024205002144813526
number samples = 191
accuracy = 0.884817
precision class 0 = 0.883598
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.010471
AUC of ROC = 0.832585
AUC of PRC = 0.604577
min(+P, Se) = 0.52

-------------------------------

confusion matrix:
[[2471    3]
 [ 252    3]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08907800167798996
difference in average predicted and observed risk = -0.004362998322010037
number samples = 2729
accuracy = 0.906559
precision class 0 = 0.907455
precision class 1 = 0.5
recall class 0 = 0.998787
recall class 1 = 0.011765
false negative rate = 0.988235
false positive rate = 0.001213
positive prediction rate = 0.002199
AUC of ROC = 0.701573
AUC of PRC = 0.264543
min(+P, Se) = 0.324324

-------------------------------

confusion matrix:
[[1679    4]
 [ 202   14]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.10165199637413025
difference in average predicted and observed risk = -0.012092003625869749
number samples = 1899
accuracy = 0.891522
precision class 0 = 0.89261
precision class 1 = 0.777778
recall class 0 = 0.997623
recall class 1 = 0.064815
false negative rate = 0.935185
false positive rate = 0.002377
positive prediction rate = 0.009479
AUC of ROC = 0.74655
AUC of PRC = 0.35971
min(+P, Se) = 0.400901

-------------------------------

confusion matrix:
[[548   1]
 [ 77   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.0958779975771904
difference in average predicted and observed risk = -0.027125002422809602
number samples = 626
accuracy = 0.875399
precision class 0 = 0.8768
precision class 1 = 0.0
recall class 0 = 0.998178
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.001821
positive prediction rate = 0.001597
AUC of ROC = 0.703215
AUC of PRC = 0.281035
min(+P, Se) = 0.350649

-------------------------------

confusion matrix:
[[2248    1]
 [ 206    2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08468200266361237
difference in average predicted and observed risk = 2.600266361237058e-05
number samples = 2457
accuracy = 0.915751
precision class 0 = 0.916055
precision class 1 = 0.666667
recall class 0 = 0.999555
recall class 1 = 0.009615
false negative rate = 0.990385
false positive rate = 0.000445
positive prediction rate = 0.001221
AUC of ROC = 0.705768
AUC of PRC = 0.255712
min(+P, Se) = 0.288462

-------------------------------

confusion matrix:
[[221   2]
 [ 24   1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.09378600120544434
difference in average predicted and observed risk = -0.007019998794555671
number samples = 248
accuracy = 0.895161
precision class 0 = 0.902041
precision class 1 = 0.333333
recall class 0 = 0.991031
recall class 1 = 0.04
false negative rate = 0.96
false positive rate = 0.008969
positive prediction rate = 0.012097
AUC of ROC = 0.616682
AUC of PRC = 0.181425
min(+P, Se) = 0.28125

-------------------------------

confusion matrix:
[[479   2]
 [ 72  10]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12014400213956833
difference in average predicted and observed risk = -0.02550399786043167
number samples = 563
accuracy = 0.868561
precision class 0 = 0.869328
precision class 1 = 0.833333
recall class 0 = 0.995842
recall class 1 = 0.121951
false negative rate = 0.878049
false positive rate = 0.004158
positive prediction rate = 0.021314
AUC of ROC = 0.781578
AUC of PRC = 0.503658
min(+P, Se) = 0.512195

-------------------------------

confusion matrix:
[[654   1]
 [ 75   4]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.10510600358247757
difference in average predicted and observed risk = -0.002522996417522433
number samples = 734
accuracy = 0.896458
precision class 0 = 0.897119
precision class 1 = 0.8
recall class 0 = 0.998473
recall class 1 = 0.050633
false negative rate = 0.949367
false positive rate = 0.001527
positive prediction rate = 0.006812
AUC of ROC = 0.752826
AUC of PRC = 0.358949
min(+P, Se) = 0.417722

-------------------------------

confusion matrix:
[[4150    7]
 [ 454   17]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09423799812793732
difference in average predicted and observed risk = -0.0075340018720626845
number samples = 4628
accuracy = 0.900389
precision class 0 = 0.90139
precision class 1 = 0.708333
recall class 0 = 0.998316
recall class 1 = 0.036093
false negative rate = 0.963907
false positive rate = 0.001684
positive prediction rate = 0.005186
AUC of ROC = 0.723252
AUC of PRC = 0.310932
min(+P, Se) = 0.358921

-------------------------------

==>predicting on validation



confusion matrix:
[[218   0]
 [ 18   1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.09259399771690369
difference in average predicted and observed risk = 0.012424997716903682
number samples = 237
accuracy = 0.924051
precision class 0 = 0.923729
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004219
AUC of ROC = 0.819894
AUC of PRC = 0.422763
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.09178400039672852
difference in average predicted and observed risk = -0.017011999603271488
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.715336
AUC of PRC = 0.364006
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[105   0]
 [ 11   2]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.11751300096511841
difference in average predicted and observed risk = 0.007344000965118405
number samples = 118
accuracy = 0.90678
precision class 0 = 0.905172
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.153846
false negative rate = 0.846154
false positive rate = 0.0
positive prediction rate = 0.016949
AUC of ROC = 0.845421
AUC of PRC = 0.531387
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[26  0]
 [ 4  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.10425300151109695
difference in average predicted and observed risk = -0.029079998488903053
number samples = 30
accuracy = 0.866667
precision class 0 = 0.866667
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.980769
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[300   0]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.10643099993467331
difference in average predicted and observed risk = -0.008613000065326684
number samples = 339
accuracy = 0.887906
precision class 0 = 0.887574
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.0
positive prediction rate = 0.00295
AUC of ROC = 0.75453
AUC of PRC = 0.326531
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[434   0]
 [ 42   2]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08893299847841263
difference in average predicted and observed risk = -0.0031170015215873786
number samples = 478
accuracy = 0.912134
precision class 0 = 0.911765
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.045455
false negative rate = 0.954545
false positive rate = 0.0
positive prediction rate = 0.004184
AUC of ROC = 0.785034
AUC of PRC = 0.49284
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[388   0]
 [ 38   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08682099729776382
difference in average predicted and observed risk = -0.002381002702236179
number samples = 426
accuracy = 0.910798
precision class 0 = 0.910798
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.757935
AUC of PRC = 0.403604
min(+P, Se) = 0.439024

-------------------------------

confusion matrix:
[[90  0]
 [10  2]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.11599499732255936
difference in average predicted and observed risk = -0.0016520026774406449
number samples = 102
accuracy = 0.901961
precision class 0 = 0.9
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.019608
AUC of ROC = 0.927778
AUC of PRC = 0.63493
min(+P, Se) = 0.611111

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.09058500081300735
difference in average predicted and observed risk = 0.0018750008130073575
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.71601
AUC of PRC = 0.187188
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[108   0]
 [ 18   1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10479799658060074
difference in average predicted and observed risk = -0.04480800341939925
number samples = 127
accuracy = 0.858268
precision class 0 = 0.857143
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.007874
AUC of ROC = 0.715887
AUC of PRC = 0.452592
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.13764500617980957
difference in average predicted and observed risk = 0.05869800617980957
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.933333
AUC of PRC = 0.753704
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[734   0]
 [ 80   3]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09619300067424774
difference in average predicted and observed risk = -0.005397999325752259
number samples = 817
accuracy = 0.902081
precision class 0 = 0.90172
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.036145
false negative rate = 0.963855
false positive rate = 0.0
positive prediction rate = 0.003672
AUC of ROC = 0.774564
AUC of PRC = 0.414719
min(+P, Se) = 0.452381

-------------------------------

Epoch 00001: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch1.state
Epoch 2/100
 - 295s - loss: 0.3029 - val_loss: 0.2740

==>predicting on train



confusion matrix:
[[2155    0]
 [ 253    2]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.10544200241565704
difference in average predicted and observed risk = -0.0003669975843429568
number samples = 2410
accuracy = 0.895021
precision class 0 = 0.894934
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.007843
false negative rate = 0.992157
false positive rate = 0.0
positive prediction rate = 0.00083
AUC of ROC = 0.722793
AUC of PRC = 0.344223
min(+P, Se) = 0.360784

-------------------------------

confusion matrix:
[[1178    1]
 [ 118    0]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.10634099692106247
difference in average predicted and observed risk = 0.015361996921062465
number samples = 1297
accuracy = 0.90825
precision class 0 = 0.908951
precision class 1 = 0.0
recall class 0 = 0.999152
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.000848
positive prediction rate = 0.000771
AUC of ROC = 0.75763
AUC of PRC = 0.27068
min(+P, Se) = 0.338983

-------------------------------

confusion matrix:
[[656   0]
 [ 74   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.11997400224208832
difference in average predicted and observed risk = 0.018604002242088316
number samples = 730
accuracy = 0.89863
precision class 0 = 0.89863
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.717555
AUC of PRC = 0.315704
min(+P, Se) = 0.341772

-------------------------------

confusion matrix:
[[167   0]
 [ 24   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.11346299946308136
difference in average predicted and observed risk = -0.012191000536918628
number samples = 191
accuracy = 0.874346
precision class 0 = 0.874346
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.839072
AUC of PRC = 0.625882
min(+P, Se) = 0.541667

-------------------------------

confusion matrix:
[[2474    0]
 [ 255    0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.10385700315237045
difference in average predicted and observed risk = 0.010416003152370457
number samples = 2729
accuracy = 0.906559
precision class 0 = 0.906559
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.713992
AUC of PRC = 0.274034
min(+P, Se) = 0.329457

-------------------------------

confusion matrix:
[[1682    1]
 [ 214    2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.1147259995341301
difference in average predicted and observed risk = 0.0009819995341300986
number samples = 1899
accuracy = 0.886783
precision class 0 = 0.887131
precision class 1 = 0.666667
recall class 0 = 0.999406
recall class 1 = 0.009259
false negative rate = 0.990741
false positive rate = 0.000594
positive prediction rate = 0.00158
AUC of ROC = 0.767113
AUC of PRC = 0.38112
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[548   1]
 [ 77   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.11013700067996979
difference in average predicted and observed risk = -0.012865999320030214
number samples = 626
accuracy = 0.875399
precision class 0 = 0.8768
precision class 1 = 0.0
recall class 0 = 0.998178
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.001821
positive prediction rate = 0.001597
AUC of ROC = 0.726776
AUC of PRC = 0.296172
min(+P, Se) = 0.337349

-------------------------------

confusion matrix:
[[2249    0]
 [ 208    0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.09993399679660797
difference in average predicted and observed risk = 0.015277996796607976
number samples = 2457
accuracy = 0.915344
precision class 0 = 0.915344
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.719619
AUC of PRC = 0.26639
min(+P, Se) = 0.298077

-------------------------------

confusion matrix:
[[223   0]
 [ 25   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.10282500088214874
difference in average predicted and observed risk = 0.002019000882148736
number samples = 248
accuracy = 0.899194
precision class 0 = 0.899194
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.644664
AUC of PRC = 0.179466
min(+P, Se) = 0.28

-------------------------------

confusion matrix:
[[481   0]
 [ 80   2]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.13311800360679626
difference in average predicted and observed risk = -0.012529996393203735
number samples = 563
accuracy = 0.857904
precision class 0 = 0.857397
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.02439
false negative rate = 0.97561
false positive rate = 0.0
positive prediction rate = 0.003552
AUC of ROC = 0.790604
AUC of PRC = 0.515641
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[655   0]
 [ 79   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.11765599995851517
difference in average predicted and observed risk = 0.010026999958515165
number samples = 734
accuracy = 0.892371
precision class 0 = 0.892371
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.770258
AUC of PRC = 0.3704
min(+P, Se) = 0.405063

-------------------------------

confusion matrix:
[[4156    1]
 [ 469    2]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.10831700265407562
difference in average predicted and observed risk = 0.006545002654075621
number samples = 4628
accuracy = 0.898444
precision class 0 = 0.898595
precision class 1 = 0.666667
recall class 0 = 0.999759
recall class 1 = 0.004246
false negative rate = 0.995754
false positive rate = 0.000241
positive prediction rate = 0.000648
AUC of ROC = 0.737635
AUC of PRC = 0.326045
min(+P, Se) = 0.36518

-------------------------------

==>predicting on validation



confusion matrix:
[[218   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.10527700185775757
difference in average predicted and observed risk = 0.025108001857757564
number samples = 237
accuracy = 0.919831
precision class 0 = 0.919831
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.84283
AUC of PRC = 0.404845
min(+P, Se) = 0.47619

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.10782100260257721
difference in average predicted and observed risk = -0.0009749973974227943
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.725228
AUC of PRC = 0.368662
min(+P, Se) = 0.396226

-------------------------------

confusion matrix:
[[105   0]
 [ 12   1]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.13090600073337555
difference in average predicted and observed risk = 0.020737000733375546
number samples = 118
accuracy = 0.898305
precision class 0 = 0.897436
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.0
positive prediction rate = 0.008475
AUC of ROC = 0.868132
AUC of PRC = 0.58248
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 4  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.12220600247383118
difference in average predicted and observed risk = -0.01112699752616883
number samples = 30
accuracy = 0.866667
precision class 0 = 0.866667
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.980769
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[300   0]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.11952199786901474
difference in average predicted and observed risk = 0.0044779978690147465
number samples = 339
accuracy = 0.887906
precision class 0 = 0.887574
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.0
positive prediction rate = 0.00295
AUC of ROC = 0.759658
AUC of PRC = 0.31689
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[434   0]
 [ 44   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.10486400127410889
difference in average predicted and observed risk = 0.01281400127410888
number samples = 478
accuracy = 0.90795
precision class 0 = 0.90795
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.80818
AUC of PRC = 0.528695
min(+P, Se) = 0.511111

-------------------------------

confusion matrix:
[[388   0]
 [ 38   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.10251399874687195
difference in average predicted and observed risk = 0.013311998746871945
number samples = 426
accuracy = 0.910798
precision class 0 = 0.910798
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.781538
AUC of PRC = 0.427024
min(+P, Se) = 0.439024

-------------------------------

confusion matrix:
[[90  0]
 [11  1]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.13184499740600586
difference in average predicted and observed risk = 0.014197997406005858
number samples = 102
accuracy = 0.892157
precision class 0 = 0.891089
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.009804
AUC of ROC = 0.926852
AUC of PRC = 0.660144
min(+P, Se) = 0.611111

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.1068980023264885
difference in average predicted and observed risk = 0.018188002326488498
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.731295
AUC of PRC = 0.185739
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[108   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.1176149994134903
difference in average predicted and observed risk = -0.031991000586509694
number samples = 127
accuracy = 0.850394
precision class 0 = 0.850394
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.74269
AUC of PRC = 0.478442
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.14029499888420105
difference in average predicted and observed risk = 0.061347998884201047
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.933333
AUC of PRC = 0.625
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[734   0]
 [ 82   1]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.11094599962234497
difference in average predicted and observed risk = 0.00935499962234497
number samples = 817
accuracy = 0.899633
precision class 0 = 0.89951
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.012048
false negative rate = 0.987952
false positive rate = 0.0
positive prediction rate = 0.001224
AUC of ROC = 0.789403
AUC of PRC = 0.423605
min(+P, Se) = 0.457831

-------------------------------

Epoch 00002: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch2.state
Epoch 3/100
 - 298s - loss: 0.2998 - val_loss: 0.2651

==>predicting on train



confusion matrix:
[[2148    7]
 [ 227   28]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.09249900281429291
difference in average predicted and observed risk = -0.013309997185707093
number samples = 2410
accuracy = 0.902905
precision class 0 = 0.904421
precision class 1 = 0.8
recall class 0 = 0.996752
recall class 1 = 0.109804
false negative rate = 0.890196
false positive rate = 0.003248
positive prediction rate = 0.014523
AUC of ROC = 0.739335
AUC of PRC = 0.356751
min(+P, Se) = 0.36965

-------------------------------

confusion matrix:
[[1163   16]
 [ 105   13]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.09651099890470505
difference in average predicted and observed risk = 0.005531998904705043
number samples = 1297
accuracy = 0.906708
precision class 0 = 0.917192
precision class 1 = 0.448276
recall class 0 = 0.986429
recall class 1 = 0.110169
false negative rate = 0.889831
false positive rate = 0.013571
positive prediction rate = 0.022359
AUC of ROC = 0.769382
AUC of PRC = 0.282038
min(+P, Se) = 0.347458

-------------------------------

confusion matrix:
[[650   6]
 [ 63  11]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.10987000167369843
difference in average predicted and observed risk = 0.008500001673698424
number samples = 730
accuracy = 0.905479
precision class 0 = 0.911641
precision class 1 = 0.647059
recall class 0 = 0.990854
recall class 1 = 0.148649
false negative rate = 0.851351
false positive rate = 0.009146
positive prediction rate = 0.023288
AUC of ROC = 0.722293
AUC of PRC = 0.324258
min(+P, Se) = 0.364865

-------------------------------

confusion matrix:
[[166   1]
 [ 18   6]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.10384400188922882
difference in average predicted and observed risk = -0.021809998110771167
number samples = 191
accuracy = 0.900524
precision class 0 = 0.902174
precision class 1 = 0.857143
recall class 0 = 0.994012
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.005988
positive prediction rate = 0.036649
AUC of ROC = 0.837076
AUC of PRC = 0.631959
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[2454   20]
 [ 231   24]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.0918940007686615
difference in average predicted and observed risk = -0.0015469992313384973
number samples = 2729
accuracy = 0.908025
precision class 0 = 0.913966
precision class 1 = 0.545455
recall class 0 = 0.991916
recall class 1 = 0.094118
false negative rate = 0.905882
false positive rate = 0.008084
positive prediction rate = 0.016123
AUC of ROC = 0.726402
AUC of PRC = 0.287569
min(+P, Se) = 0.341176

-------------------------------

confusion matrix:
[[1673   10]
 [ 182   34]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.10392799973487854
difference in average predicted and observed risk = -0.009816000265121458
number samples = 1899
accuracy = 0.898894
precision class 0 = 0.901887
precision class 1 = 0.772727
recall class 0 = 0.994058
recall class 1 = 0.157407
false negative rate = 0.842593
false positive rate = 0.005942
positive prediction rate = 0.02317
AUC of ROC = 0.778413
AUC of PRC = 0.39247
min(+P, Se) = 0.402715

-------------------------------

confusion matrix:
[[542   7]
 [ 72   5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.10318399965763092
difference in average predicted and observed risk = -0.01981900034236908
number samples = 626
accuracy = 0.873802
precision class 0 = 0.882736
precision class 1 = 0.416667
recall class 0 = 0.98725
recall class 1 = 0.064935
false negative rate = 0.935065
false positive rate = 0.01275
positive prediction rate = 0.019169
AUC of ROC = 0.73955
AUC of PRC = 0.306067
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[2245    4]
 [ 195   13]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08377999812364578
difference in average predicted and observed risk = -0.0008760018763542127
number samples = 2457
accuracy = 0.919007
precision class 0 = 0.920082
precision class 1 = 0.764706
recall class 0 = 0.998221
recall class 1 = 0.0625
false negative rate = 0.9375
false positive rate = 0.001779
positive prediction rate = 0.006919
AUC of ROC = 0.726368
AUC of PRC = 0.276847
min(+P, Se) = 0.293269

-------------------------------

confusion matrix:
[[218   5]
 [ 24   1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.09145200252532959
difference in average predicted and observed risk = -0.009353997474670417
number samples = 248
accuracy = 0.883065
precision class 0 = 0.900826
precision class 1 = 0.166667
recall class 0 = 0.977578
recall class 1 = 0.04
false negative rate = 0.96
false positive rate = 0.022422
positive prediction rate = 0.024194
AUC of ROC = 0.667623
AUC of PRC = 0.190436
min(+P, Se) = 0.310345

-------------------------------

confusion matrix:
[[473   8]
 [ 55  27]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.13299700617790222
difference in average predicted and observed risk = -0.012650993822097778
number samples = 563
accuracy = 0.888099
precision class 0 = 0.895833
precision class 1 = 0.771429
recall class 0 = 0.983368
recall class 1 = 0.329268
false negative rate = 0.670732
false positive rate = 0.016632
positive prediction rate = 0.062167
AUC of ROC = 0.799173
AUC of PRC = 0.529876
min(+P, Se) = 0.517241

-------------------------------

confusion matrix:
[[649   6]
 [ 67  12]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.1091810017824173
difference in average predicted and observed risk = 0.001552001782417295
number samples = 734
accuracy = 0.900545
precision class 0 = 0.906425
precision class 1 = 0.666667
recall class 0 = 0.99084
recall class 1 = 0.151899
false negative rate = 0.848101
false positive rate = 0.00916
positive prediction rate = 0.024523
AUC of ROC = 0.777698
AUC of PRC = 0.372897
min(+P, Se) = 0.417722

-------------------------------

confusion matrix:
[[4127   30]
 [ 413   58]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09683199971914291
difference in average predicted and observed risk = -0.0049400002808570875
number samples = 4628
accuracy = 0.904278
precision class 0 = 0.909031
precision class 1 = 0.659091
recall class 0 = 0.992783
recall class 1 = 0.123142
false negative rate = 0.876858
false positive rate = 0.007217
positive prediction rate = 0.019015
AUC of ROC = 0.749185
AUC of PRC = 0.338933
min(+P, Se) = 0.368644

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.09557300060987473
difference in average predicted and observed risk = 0.015404000609874721
number samples = 237
accuracy = 0.92827
precision class 0 = 0.935065
precision class 1 = 0.666667
recall class 0 = 0.990826
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.009174
positive prediction rate = 0.025316
AUC of ROC = 0.855384
AUC of PRC = 0.389022
min(+P, Se) = 0.478261

-------------------------------

confusion matrix:
[[385   0]
 [ 45   2]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.09494700282812119
difference in average predicted and observed risk = -0.013848997171878819
number samples = 432
accuracy = 0.895833
precision class 0 = 0.895349
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.042553
false negative rate = 0.957447
false positive rate = 0.0
positive prediction rate = 0.00463
AUC of ROC = 0.734623
AUC of PRC = 0.369508
min(+P, Se) = 0.425532

-------------------------------

confusion matrix:
[[105   0]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.12645700573921204
difference in average predicted and observed risk = 0.016288005739212033
number samples = 118
accuracy = 0.915254
precision class 0 = 0.913043
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.0
positive prediction rate = 0.025424
AUC of ROC = 0.881319
AUC of PRC = 0.651862
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11476399749517441
difference in average predicted and observed risk = -0.0185690025048256
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.980769
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[299   1]
 [ 37   2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.11094900220632553
difference in average predicted and observed risk = -0.0040949977936744625
number samples = 339
accuracy = 0.887906
precision class 0 = 0.889881
precision class 1 = 0.666667
recall class 0 = 0.996667
recall class 1 = 0.051282
false negative rate = 0.948718
false positive rate = 0.003333
positive prediction rate = 0.00885
AUC of ROC = 0.773248
AUC of PRC = 0.331577
min(+P, Se) = 0.413043

-------------------------------

confusion matrix:
[[433   1]
 [ 35   9]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.09293100237846375
difference in average predicted and observed risk = 0.0008810023784637383
number samples = 478
accuracy = 0.924686
precision class 0 = 0.925214
precision class 1 = 0.9
recall class 0 = 0.997696
recall class 1 = 0.204545
false negative rate = 0.795455
false positive rate = 0.002304
positive prediction rate = 0.020921
AUC of ROC = 0.816244
AUC of PRC = 0.521073
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[388   0]
 [ 35   3]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08685500174760818
difference in average predicted and observed risk = -0.0023469982523918187
number samples = 426
accuracy = 0.91784
precision class 0 = 0.917258
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.078947
false negative rate = 0.921053
false positive rate = 0.0
positive prediction rate = 0.007042
AUC of ROC = 0.79178
AUC of PRC = 0.424394
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.1317799985408783
difference in average predicted and observed risk = 0.014132998540878294
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.92963
AUC of PRC = 0.678114
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.09756900370121002
difference in average predicted and observed risk = 0.008859003701210025
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.740145
AUC of PRC = 0.196464
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[107   1]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.11060900241136551
difference in average predicted and observed risk = -0.03899699758863448
number samples = 127
accuracy = 0.866142
precision class 0 = 0.869919
precision class 1 = 0.75
recall class 0 = 0.990741
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009259
positive prediction rate = 0.031496
AUC of ROC = 0.748051
AUC of PRC = 0.496302
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.1432889997959137
difference in average predicted and observed risk = 0.06434199979591369
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.92381
AUC of PRC = 0.569444
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[732   2]
 [ 72  11]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.10040699690580368
difference in average predicted and observed risk = -0.0011840030941963203
number samples = 817
accuracy = 0.909425
precision class 0 = 0.910448
precision class 1 = 0.846154
recall class 0 = 0.997275
recall class 1 = 0.13253
false negative rate = 0.86747
false positive rate = 0.002725
positive prediction rate = 0.015912
AUC of ROC = 0.797955
AUC of PRC = 0.431219
min(+P, Se) = 0.482353

-------------------------------

Epoch 00003: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch3.state
Epoch 4/100
 - 294s - loss: 0.2931 - val_loss: 0.2663

==>predicting on train



confusion matrix:
[[2153    2]
 [ 245   10]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.08755800127983093
difference in average predicted and observed risk = -0.018250998720169068
number samples = 2410
accuracy = 0.89751
precision class 0 = 0.897831
precision class 1 = 0.833333
recall class 0 = 0.999072
recall class 1 = 0.039216
false negative rate = 0.960784
false positive rate = 0.000928
positive prediction rate = 0.004979
AUC of ROC = 0.748095
AUC of PRC = 0.361647
min(+P, Se) = 0.368627

-------------------------------

confusion matrix:
[[1173    6]
 [ 115    3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.09020400047302246
difference in average predicted and observed risk = -0.0007749995269775434
number samples = 1297
accuracy = 0.906708
precision class 0 = 0.910714
precision class 1 = 0.333333
recall class 0 = 0.994911
recall class 1 = 0.025424
false negative rate = 0.974576
false positive rate = 0.005089
positive prediction rate = 0.006939
AUC of ROC = 0.788423
AUC of PRC = 0.287895
min(+P, Se) = 0.352941

-------------------------------

confusion matrix:
[[654   2]
 [ 70   4]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.10091300308704376
difference in average predicted and observed risk = -0.00045699691295623956
number samples = 730
accuracy = 0.90137
precision class 0 = 0.903315
precision class 1 = 0.666667
recall class 0 = 0.996951
recall class 1 = 0.054054
false negative rate = 0.945946
false positive rate = 0.003049
positive prediction rate = 0.008219
AUC of ROC = 0.737743
AUC of PRC = 0.331416
min(+P, Se) = 0.391892

-------------------------------

confusion matrix:
[[167   0]
 [ 21   3]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.09800399839878082
difference in average predicted and observed risk = -0.027650001601219165
number samples = 191
accuracy = 0.890052
precision class 0 = 0.888298
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.125
false negative rate = 0.875
false positive rate = 0.0
positive prediction rate = 0.015707
AUC of ROC = 0.846307
AUC of PRC = 0.643391
min(+P, Se) = 0.56

-------------------------------

confusion matrix:
[[2468    6]
 [ 250    5]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08745100349187851
difference in average predicted and observed risk = -0.005989996508121487
number samples = 2729
accuracy = 0.906193
precision class 0 = 0.908021
precision class 1 = 0.454545
recall class 0 = 0.997575
recall class 1 = 0.019608
false negative rate = 0.980392
false positive rate = 0.002425
positive prediction rate = 0.004031
AUC of ROC = 0.740924
AUC of PRC = 0.293843
min(+P, Se) = 0.347656

-------------------------------

confusion matrix:
[[1679    4]
 [ 201   15]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.09570399671792984
difference in average predicted and observed risk = -0.018040003282070158
number samples = 1899
accuracy = 0.892048
precision class 0 = 0.893085
precision class 1 = 0.789474
recall class 0 = 0.997623
recall class 1 = 0.069444
false negative rate = 0.930556
false positive rate = 0.002377
positive prediction rate = 0.010005
AUC of ROC = 0.78573
AUC of PRC = 0.399001
min(+P, Se) = 0.412037

-------------------------------

confusion matrix:
[[547   2]
 [ 76   1]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.09749999642372131
difference in average predicted and observed risk = -0.025503003576278688
number samples = 626
accuracy = 0.875399
precision class 0 = 0.87801
precision class 1 = 0.333333
recall class 0 = 0.996357
recall class 1 = 0.012987
false negative rate = 0.987013
false positive rate = 0.003643
positive prediction rate = 0.004792
AUC of ROC = 0.756204
AUC of PRC = 0.318625
min(+P, Se) = 0.367816

-------------------------------

confusion matrix:
[[2248    1]
 [ 206    2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07919900119304657
difference in average predicted and observed risk = -0.005456998806953425
number samples = 2457
accuracy = 0.915751
precision class 0 = 0.916055
precision class 1 = 0.666667
recall class 0 = 0.999555
recall class 1 = 0.009615
false negative rate = 0.990385
false positive rate = 0.000445
positive prediction rate = 0.001221
AUC of ROC = 0.737456
AUC of PRC = 0.282168
min(+P, Se) = 0.302885

-------------------------------

confusion matrix:
[[222   1]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.08580400049686432
difference in average predicted and observed risk = -0.015001999503135688
number samples = 248
accuracy = 0.895161
precision class 0 = 0.898785
precision class 1 = 0.0
recall class 0 = 0.995516
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.004484
positive prediction rate = 0.004032
AUC of ROC = 0.693991
AUC of PRC = 0.193671
min(+P, Se) = 0.32

-------------------------------

confusion matrix:
[[476   5]
 [ 67  15]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12557999789714813
difference in average predicted and observed risk = -0.020068002102851867
number samples = 563
accuracy = 0.872114
precision class 0 = 0.876611
precision class 1 = 0.75
recall class 0 = 0.989605
recall class 1 = 0.182927
false negative rate = 0.817073
false positive rate = 0.010395
positive prediction rate = 0.035524
AUC of ROC = 0.810253
AUC of PRC = 0.532541
min(+P, Se) = 0.512195

-------------------------------

confusion matrix:
[[654   1]
 [ 77   2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09916699677705765
difference in average predicted and observed risk = -0.008462003222942355
number samples = 734
accuracy = 0.893733
precision class 0 = 0.894665
precision class 1 = 0.666667
recall class 0 = 0.998473
recall class 1 = 0.025316
false negative rate = 0.974684
false positive rate = 0.001527
positive prediction rate = 0.004087
AUC of ROC = 0.787033
AUC of PRC = 0.375811
min(+P, Se) = 0.43038

-------------------------------

confusion matrix:
[[4147   10]
 [ 451   20]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09083700180053711
difference in average predicted and observed risk = -0.010934998199462892
number samples = 4628
accuracy = 0.900389
precision class 0 = 0.901914
precision class 1 = 0.666667
recall class 0 = 0.997594
recall class 1 = 0.042463
false negative rate = 0.957537
false positive rate = 0.002406
positive prediction rate = 0.006482
AUC of ROC = 0.761799
AUC of PRC = 0.344684
min(+P, Se) = 0.376321

-------------------------------

==>predicting on validation



confusion matrix:
[[218   0]
 [ 18   1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08893900364637375
difference in average predicted and observed risk = 0.008770003646373745
number samples = 237
accuracy = 0.924051
precision class 0 = 0.923729
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004219
AUC of ROC = 0.852487
AUC of PRC = 0.396294
min(+P, Se) = 0.52381

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.08860400319099426
difference in average predicted and observed risk = -0.02019199680900574
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.743023
AUC of PRC = 0.381262
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[105   0]
 [ 12   1]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.11486200243234634
difference in average predicted and observed risk = 0.004693002432346341
number samples = 118
accuracy = 0.898305
precision class 0 = 0.897436
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.0
positive prediction rate = 0.008475
AUC of ROC = 0.891575
AUC of PRC = 0.664914
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[26  0]
 [ 4  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.10851100087165833
difference in average predicted and observed risk = -0.024821999128341682
number samples = 30
accuracy = 0.866667
precision class 0 = 0.866667
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.980769
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[300   0]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.09988699853420258
difference in average predicted and observed risk = -0.015157001465797418
number samples = 339
accuracy = 0.887906
precision class 0 = 0.887574
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.0
positive prediction rate = 0.00295
AUC of ROC = 0.774103
AUC of PRC = 0.340149
min(+P, Se) = 0.404762

-------------------------------

confusion matrix:
[[434   0]
 [ 43   1]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.0885000005364418
difference in average predicted and observed risk = -0.003549999463558204
number samples = 478
accuracy = 0.910042
precision class 0 = 0.909853
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.022727
false negative rate = 0.977273
false positive rate = 0.0
positive prediction rate = 0.002092
AUC of ROC = 0.822895
AUC of PRC = 0.524616
min(+P, Se) = 0.553191

-------------------------------

confusion matrix:
[[388   0]
 [ 38   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.0812700018286705
difference in average predicted and observed risk = -0.007931998171329502
number samples = 426
accuracy = 0.910798
precision class 0 = 0.910798
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.802496
AUC of PRC = 0.439781
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[90  0]
 [10  2]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.12335299700498581
difference in average predicted and observed risk = 0.005705997004985808
number samples = 102
accuracy = 0.901961
precision class 0 = 0.9
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.019608
AUC of ROC = 0.92963
AUC of PRC = 0.687722
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.09194499999284744
difference in average predicted and observed risk = 0.0032349999928474454
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.754626
AUC of PRC = 0.207589
min(+P, Se) = 0.384615

-------------------------------

confusion matrix:
[[108   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10100600123405457
difference in average predicted and observed risk = -0.048599998765945424
number samples = 127
accuracy = 0.850394
precision class 0 = 0.850394
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.763158
AUC of PRC = 0.502625
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.12453900277614594
difference in average predicted and observed risk = 0.04559200277614593
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.92381
AUC of PRC = 0.551786
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[734   0]
 [ 81   2]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09322500228881836
difference in average predicted and observed risk = -0.008365997711181641
number samples = 817
accuracy = 0.900857
precision class 0 = 0.900613
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.024096
false negative rate = 0.975904
false positive rate = 0.0
positive prediction rate = 0.002448
AUC of ROC = 0.803733
AUC of PRC = 0.438736
min(+P, Se) = 0.493976

-------------------------------

Epoch 00004: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch4.state
Epoch 5/100
 - 295s - loss: 0.2957 - val_loss: 0.2675

==>predicting on train



confusion matrix:
[[2153    2]
 [ 247    8]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.0879950001835823
difference in average predicted and observed risk = -0.017813999816417694
number samples = 2410
accuracy = 0.89668
precision class 0 = 0.897083
precision class 1 = 0.8
recall class 0 = 0.999072
recall class 1 = 0.031373
false negative rate = 0.968627
false positive rate = 0.000928
positive prediction rate = 0.004149
AUC of ROC = 0.754412
AUC of PRC = 0.370479
min(+P, Se) = 0.368627

-------------------------------

confusion matrix:
[[1175    4]
 [ 115    3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.0881349965929985
difference in average predicted and observed risk = -0.0028440034070014997
number samples = 1297
accuracy = 0.90825
precision class 0 = 0.910853
precision class 1 = 0.428571
recall class 0 = 0.996607
recall class 1 = 0.025424
false negative rate = 0.974576
false positive rate = 0.003393
positive prediction rate = 0.005397
AUC of ROC = 0.790508
AUC of PRC = 0.287183
min(+P, Se) = 0.355932

-------------------------------

confusion matrix:
[[655   1]
 [ 73   1]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.0979050025343895
difference in average predicted and observed risk = -0.003464997465610506
number samples = 730
accuracy = 0.89863
precision class 0 = 0.899725
precision class 1 = 0.5
recall class 0 = 0.998476
recall class 1 = 0.013514
false negative rate = 0.986486
false positive rate = 0.001524
positive prediction rate = 0.00274
AUC of ROC = 0.742955
AUC of PRC = 0.322725
min(+P, Se) = 0.391892

-------------------------------

confusion matrix:
[[167   0]
 [ 21   3]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.0975470021367073
difference in average predicted and observed risk = -0.028106997863292682
number samples = 191
accuracy = 0.890052
precision class 0 = 0.888298
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.125
false negative rate = 0.875
false positive rate = 0.0
positive prediction rate = 0.015707
AUC of ROC = 0.847555
AUC of PRC = 0.642054
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[2470    4]
 [ 251    4]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08693499863147736
difference in average predicted and observed risk = -0.00650600136852264
number samples = 2729
accuracy = 0.906559
precision class 0 = 0.907754
precision class 1 = 0.5
recall class 0 = 0.998383
recall class 1 = 0.015686
false negative rate = 0.984314
false positive rate = 0.001617
positive prediction rate = 0.002931
AUC of ROC = 0.74811
AUC of PRC = 0.298775
min(+P, Se) = 0.351562

-------------------------------

confusion matrix:
[[1680    3]
 [ 205   11]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.09438300132751465
difference in average predicted and observed risk = -0.01936099867248535
number samples = 1899
accuracy = 0.890469
precision class 0 = 0.891247
precision class 1 = 0.785714
recall class 0 = 0.998217
recall class 1 = 0.050926
false negative rate = 0.949074
false positive rate = 0.001783
positive prediction rate = 0.007372
AUC of ROC = 0.791238
AUC of PRC = 0.403562
min(+P, Se) = 0.421296

-------------------------------

confusion matrix:
[[548   1]
 [ 76   1]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.0977960005402565
difference in average predicted and observed risk = -0.0252069994597435
number samples = 626
accuracy = 0.876997
precision class 0 = 0.878205
precision class 1 = 0.5
recall class 0 = 0.998178
recall class 1 = 0.012987
false negative rate = 0.987013
false positive rate = 0.001821
positive prediction rate = 0.003195
AUC of ROC = 0.756346
AUC of PRC = 0.323924
min(+P, Se) = 0.376623

-------------------------------

confusion matrix:
[[2248    1]
 [ 206    2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08021199703216553
difference in average predicted and observed risk = -0.004444002967834468
number samples = 2457
accuracy = 0.915751
precision class 0 = 0.916055
precision class 1 = 0.666667
recall class 0 = 0.999555
recall class 1 = 0.009615
false negative rate = 0.990385
false positive rate = 0.000445
positive prediction rate = 0.001221
AUC of ROC = 0.748162
AUC of PRC = 0.285553
min(+P, Se) = 0.298077

-------------------------------

confusion matrix:
[[222   1]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.08363699913024902
difference in average predicted and observed risk = -0.017169000869750983
number samples = 248
accuracy = 0.895161
precision class 0 = 0.898785
precision class 1 = 0.0
recall class 0 = 0.995516
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.004484
positive prediction rate = 0.004032
AUC of ROC = 0.700987
AUC of PRC = 0.194213
min(+P, Se) = 0.32

-------------------------------

confusion matrix:
[[478   3]
 [ 72  10]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.11968400329351425
difference in average predicted and observed risk = -0.025963996706485748
number samples = 563
accuracy = 0.866785
precision class 0 = 0.869091
precision class 1 = 0.769231
recall class 0 = 0.993763
recall class 1 = 0.121951
false negative rate = 0.878049
false positive rate = 0.006237
positive prediction rate = 0.023091
AUC of ROC = 0.812129
AUC of PRC = 0.53174
min(+P, Se) = 0.505747

-------------------------------

confusion matrix:
[[654   1]
 [ 77   2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.0954430028796196
difference in average predicted and observed risk = -0.012185997120380404
number samples = 734
accuracy = 0.893733
precision class 0 = 0.894665
precision class 1 = 0.666667
recall class 0 = 0.998473
recall class 1 = 0.025316
false negative rate = 0.974684
false positive rate = 0.001527
positive prediction rate = 0.004087
AUC of ROC = 0.789815
AUC of PRC = 0.377652
min(+P, Se) = 0.443038

-------------------------------

confusion matrix:
[[4150    7]
 [ 456   15]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.0899910032749176
difference in average predicted and observed risk = -0.011780996725082399
number samples = 4628
accuracy = 0.899957
precision class 0 = 0.900999
precision class 1 = 0.681818
recall class 0 = 0.998316
recall class 1 = 0.031847
false negative rate = 0.968153
false positive rate = 0.001684
positive prediction rate = 0.004754
AUC of ROC = 0.766786
AUC of PRC = 0.348253
min(+P, Se) = 0.382166

-------------------------------

==>predicting on validation



confusion matrix:
[[218   0]
 [ 18   1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08738700300455093
difference in average predicted and observed risk = 0.00721800300455093
number samples = 237
accuracy = 0.924051
precision class 0 = 0.923729
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004219
AUC of ROC = 0.853935
AUC of PRC = 0.397222
min(+P, Se) = 0.47619

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.08770599961280823
difference in average predicted and observed risk = -0.021090000387191776
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.751423
AUC of PRC = 0.39143
min(+P, Se) = 0.425532

-------------------------------

confusion matrix:
[[105   0]
 [ 12   1]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10928399860858917
difference in average predicted and observed risk = -0.0008850013914108307
number samples = 118
accuracy = 0.898305
precision class 0 = 0.897436
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.0
positive prediction rate = 0.008475
AUC of ROC = 0.895238
AUC of PRC = 0.667665
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[26  0]
 [ 4  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.10763400048017502
difference in average predicted and observed risk = -0.02569899951982499
number samples = 30
accuracy = 0.866667
precision class 0 = 0.866667
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[300   0]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.09715700149536133
difference in average predicted and observed risk = -0.017886998504638665
number samples = 339
accuracy = 0.887906
precision class 0 = 0.887574
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.0
positive prediction rate = 0.00295
AUC of ROC = 0.778974
AUC of PRC = 0.334256
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[434   0]
 [ 43   1]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08742299675941467
difference in average predicted and observed risk = -0.004627003240585334
number samples = 478
accuracy = 0.910042
precision class 0 = 0.909853
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.022727
false negative rate = 0.977273
false positive rate = 0.0
positive prediction rate = 0.002092
AUC of ROC = 0.829074
AUC of PRC = 0.531249
min(+P, Se) = 0.568182

-------------------------------

confusion matrix:
[[388   0]
 [ 38   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08155699819326401
difference in average predicted and observed risk = -0.007645001806735996
number samples = 426
accuracy = 0.910798
precision class 0 = 0.910798
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.816264
AUC of PRC = 0.454574
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[90  0]
 [10  2]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.11705800145864487
difference in average predicted and observed risk = -0.0005889985413551346
number samples = 102
accuracy = 0.901961
precision class 0 = 0.9
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.019608
AUC of ROC = 0.936111
AUC of PRC = 0.693212
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.09081000089645386
difference in average predicted and observed risk = 0.0021000008964538602
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.757039
AUC of PRC = 0.208434
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[108   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09749600291252136
difference in average predicted and observed risk = -0.05210999708747863
number samples = 127
accuracy = 0.850394
precision class 0 = 0.850394
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.763158
AUC of PRC = 0.522498
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.11576399952173233
difference in average predicted and observed risk = 0.03681699952173233
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.904762
AUC of PRC = 0.518849
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[734   0]
 [ 81   2]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09146200120449066
difference in average predicted and observed risk = -0.010128998795509339
number samples = 817
accuracy = 0.900857
precision class 0 = 0.900613
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.024096
false negative rate = 0.975904
false positive rate = 0.0
positive prediction rate = 0.002448
AUC of ROC = 0.809707
AUC of PRC = 0.445326
min(+P, Se) = 0.494253

-------------------------------

Epoch 00005: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch5.state
Epoch 6/100
 - 294s - loss: 0.2943 - val_loss: 0.2622

==>predicting on train



confusion matrix:
[[2124   31]
 [ 209   46]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.1009259968996048
difference in average predicted and observed risk = -0.004883003100395203
number samples = 2410
accuracy = 0.900415
precision class 0 = 0.910416
precision class 1 = 0.597403
recall class 0 = 0.985615
recall class 1 = 0.180392
false negative rate = 0.819608
false positive rate = 0.014385
positive prediction rate = 0.03195
AUC of ROC = 0.756782
AUC of PRC = 0.373013
min(+P, Se) = 0.367424

-------------------------------

confusion matrix:
[[1154   25]
 [  96   22]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.09914100170135498
difference in average predicted and observed risk = 0.008162001701354976
number samples = 1297
accuracy = 0.906708
precision class 0 = 0.9232
precision class 1 = 0.468085
recall class 0 = 0.978796
recall class 1 = 0.186441
false negative rate = 0.813559
false positive rate = 0.021204
positive prediction rate = 0.036237
AUC of ROC = 0.792039
AUC of PRC = 0.309117
min(+P, Se) = 0.344538

-------------------------------

confusion matrix:
[[642  14]
 [ 61  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.11298199743032455
difference in average predicted and observed risk = 0.011611997430324553
number samples = 730
accuracy = 0.89726
precision class 0 = 0.913229
precision class 1 = 0.481481
recall class 0 = 0.978659
recall class 1 = 0.175676
false negative rate = 0.824324
false positive rate = 0.021341
positive prediction rate = 0.036986
AUC of ROC = 0.74382
AUC of PRC = 0.335442
min(+P, Se) = 0.386667

-------------------------------

confusion matrix:
[[166   1]
 [ 16   8]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.1108819991350174
difference in average predicted and observed risk = -0.014772000864982593
number samples = 191
accuracy = 0.910995
precision class 0 = 0.912088
precision class 1 = 0.888889
recall class 0 = 0.994012
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.005988
positive prediction rate = 0.04712
AUC of ROC = 0.850299
AUC of PRC = 0.663839
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[2434   40]
 [ 211   44]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.09651599824428558
difference in average predicted and observed risk = 0.003074998244285587
number samples = 2729
accuracy = 0.908025
precision class 0 = 0.920227
precision class 1 = 0.52381
recall class 0 = 0.983832
recall class 1 = 0.172549
false negative rate = 0.827451
false positive rate = 0.016168
positive prediction rate = 0.030781
AUC of ROC = 0.752034
AUC of PRC = 0.303827
min(+P, Se) = 0.342308

-------------------------------

confusion matrix:
[[1652   31]
 [ 171   45]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.11168000102043152
difference in average predicted and observed risk = -0.0020639989795684793
number samples = 1899
accuracy = 0.893628
precision class 0 = 0.906199
precision class 1 = 0.592105
recall class 0 = 0.98158
recall class 1 = 0.208333
false negative rate = 0.791667
false positive rate = 0.018419
positive prediction rate = 0.040021
AUC of ROC = 0.791968
AUC of PRC = 0.414824
min(+P, Se) = 0.412037

-------------------------------

confusion matrix:
[[537  12]
 [ 62  15]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.11137200146913528
difference in average predicted and observed risk = -0.011630998530864717
number samples = 626
accuracy = 0.881789
precision class 0 = 0.896494
precision class 1 = 0.555556
recall class 0 = 0.978142
recall class 1 = 0.194805
false negative rate = 0.805195
false positive rate = 0.021858
positive prediction rate = 0.043131
AUC of ROC = 0.758806
AUC of PRC = 0.324541
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[2229   20]
 [ 183   25]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.0891909971833229
difference in average predicted and observed risk = 0.004534997183322911
number samples = 2457
accuracy = 0.917379
precision class 0 = 0.924129
precision class 1 = 0.555556
recall class 0 = 0.991107
recall class 1 = 0.120192
false negative rate = 0.879808
false positive rate = 0.008893
positive prediction rate = 0.018315
AUC of ROC = 0.751109
AUC of PRC = 0.296473
min(+P, Se) = 0.301887

-------------------------------

confusion matrix:
[[216   7]
 [ 23   2]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.09551700204610825
difference in average predicted and observed risk = -0.005288997953891761
number samples = 248
accuracy = 0.879032
precision class 0 = 0.903766
precision class 1 = 0.222222
recall class 0 = 0.96861
recall class 1 = 0.08
false negative rate = 0.92
false positive rate = 0.03139
positive prediction rate = 0.03629
AUC of ROC = 0.70009
AUC of PRC = 0.198926
min(+P, Se) = 0.32

-------------------------------

confusion matrix:
[[464  17]
 [ 52  30]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.14153799414634705
difference in average predicted and observed risk = -0.004110005853652954
number samples = 563
accuracy = 0.877442
precision class 0 = 0.899225
precision class 1 = 0.638298
recall class 0 = 0.964657
recall class 1 = 0.365854
false negative rate = 0.634146
false positive rate = 0.035343
positive prediction rate = 0.083481
AUC of ROC = 0.810126
AUC of PRC = 0.566235
min(+P, Se) = 0.523256

-------------------------------

confusion matrix:
[[640  15]
 [ 62  17]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.11340399831533432
difference in average predicted and observed risk = 0.005774998315334318
number samples = 734
accuracy = 0.895095
precision class 0 = 0.911681
precision class 1 = 0.53125
recall class 0 = 0.977099
recall class 1 = 0.21519
false negative rate = 0.78481
false positive rate = 0.022901
positive prediction rate = 0.043597
AUC of ROC = 0.789603
AUC of PRC = 0.381861
min(+P, Se) = 0.43038

-------------------------------

confusion matrix:
[[4086   71]
 [ 382   89]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.10273800045251846
difference in average predicted and observed risk = 0.0009660004525184618
number samples = 4628
accuracy = 0.902118
precision class 0 = 0.914503
precision class 1 = 0.55625
recall class 0 = 0.98292
recall class 1 = 0.18896
false negative rate = 0.81104
false positive rate = 0.01708
positive prediction rate = 0.034572
AUC of ROC = 0.769029
AUC of PRC = 0.359838
min(+P, Se) = 0.375796

-------------------------------

==>predicting on validation



confusion matrix:
[[213   5]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.09822499752044678
difference in average predicted and observed risk = 0.018055997520446773
number samples = 237
accuracy = 0.915612
precision class 0 = 0.934211
precision class 1 = 0.444444
recall class 0 = 0.977064
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.022936
positive prediction rate = 0.037975
AUC of ROC = 0.858764
AUC of PRC = 0.388159
min(+P, Se) = 0.458333

-------------------------------

confusion matrix:
[[383   2]
 [ 42   5]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.10239800065755844
difference in average predicted and observed risk = -0.006397999342441563
number samples = 432
accuracy = 0.898148
precision class 0 = 0.901176
precision class 1 = 0.714286
recall class 0 = 0.994805
recall class 1 = 0.106383
false negative rate = 0.893617
false positive rate = 0.005195
positive prediction rate = 0.016204
AUC of ROC = 0.753689
AUC of PRC = 0.366402
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[102   3]
 [  9   4]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.12925800681114197
difference in average predicted and observed risk = 0.019089006811141965
number samples = 118
accuracy = 0.898305
precision class 0 = 0.918919
precision class 1 = 0.571429
recall class 0 = 0.971429
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.028571
positive prediction rate = 0.059322
AUC of ROC = 0.889377
AUC of PRC = 0.616318
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.12428300082683563
difference in average predicted and observed risk = -0.009049999173164375
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[294   6]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.11810299754142761
difference in average predicted and observed risk = 0.003058997541427619
number samples = 339
accuracy = 0.876106
precision class 0 = 0.890909
precision class 1 = 0.333333
recall class 0 = 0.98
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.02
positive prediction rate = 0.026549
AUC of ROC = 0.785128
AUC of PRC = 0.331641
min(+P, Se) = 0.408163

-------------------------------

confusion matrix:
[[430   4]
 [ 32  12]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.09719599783420563
difference in average predicted and observed risk = 0.005145997834205621
number samples = 478
accuracy = 0.924686
precision class 0 = 0.930736
precision class 1 = 0.75
recall class 0 = 0.990783
recall class 1 = 0.272727
false negative rate = 0.727273
false positive rate = 0.009217
positive prediction rate = 0.033473
AUC of ROC = 0.833106
AUC of PRC = 0.51626
min(+P, Se) = 0.531915

-------------------------------

confusion matrix:
[[387   1]
 [ 32   6]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.09161099791526794
difference in average predicted and observed risk = 0.002408997915267941
number samples = 426
accuracy = 0.922535
precision class 0 = 0.923628
precision class 1 = 0.857143
recall class 0 = 0.997423
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.002577
positive prediction rate = 0.016432
AUC of ROC = 0.818095
AUC of PRC = 0.439492
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[86  4]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.14117400348186493
difference in average predicted and observed risk = 0.023527003481864928
number samples = 102
accuracy = 0.882353
precision class 0 = 0.914894
precision class 1 = 0.5
recall class 0 = 0.955556
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.044444
positive prediction rate = 0.078431
AUC of ROC = 0.931481
AUC of PRC = 0.658878
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.10331399738788605
difference in average predicted and observed risk = 0.01460399738788605
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.777152
AUC of PRC = 0.214457
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[106   2]
 [ 15   4]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.11539600044488907
difference in average predicted and observed risk = -0.03420999955511092
number samples = 127
accuracy = 0.866142
precision class 0 = 0.876033
precision class 1 = 0.666667
recall class 0 = 0.981481
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.018519
positive prediction rate = 0.047244
AUC of ROC = 0.764133
AUC of PRC = 0.45594
min(+P, Se) = 0.47619

-------------------------------

confusion matrix:
[[33  2]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.14747700095176697
difference in average predicted and observed risk = 0.06853000095176696
number samples = 38
accuracy = 0.894737
precision class 0 = 0.942857
precision class 1 = 0.333333
recall class 0 = 0.942857
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.057143
positive prediction rate = 0.078947
AUC of ROC = 0.914286
AUC of PRC = 0.538889
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[724  10]
 [ 68  15]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.10587099939584732
difference in average predicted and observed risk = 0.00427999939584732
number samples = 817
accuracy = 0.904529
precision class 0 = 0.914141
precision class 1 = 0.6
recall class 0 = 0.986376
recall class 1 = 0.180723
false negative rate = 0.819277
false positive rate = 0.013624
positive prediction rate = 0.0306
AUC of ROC = 0.813237
AUC of PRC = 0.425101
min(+P, Se) = 0.467391

-------------------------------

Epoch 00006: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch6.state
Epoch 7/100
 - 299s - loss: 0.2915 - val_loss: 0.2755

==>predicting on train



confusion matrix:
[[2155    0]
 [ 250    5]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.11445999890565872
difference in average predicted and observed risk = 0.008650998905658722
number samples = 2410
accuracy = 0.896266
precision class 0 = 0.89605
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.019608
false negative rate = 0.980392
false positive rate = 0.0
positive prediction rate = 0.002075
AUC of ROC = 0.756859
AUC of PRC = 0.378248
min(+P, Se) = 0.381323

-------------------------------

confusion matrix:
[[1177    2]
 [ 118    0]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.11300099641084671
difference in average predicted and observed risk = 0.022021996410846706
number samples = 1297
accuracy = 0.907479
precision class 0 = 0.90888
precision class 1 = 0.0
recall class 0 = 0.998304
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.001696
positive prediction rate = 0.001542
AUC of ROC = 0.785771
AUC of PRC = 0.294833
min(+P, Se) = 0.338983

-------------------------------

confusion matrix:
[[656   0]
 [ 73   1]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.11961200088262558
difference in average predicted and observed risk = 0.018242000882625578
number samples = 730
accuracy = 0.9
precision class 0 = 0.899863
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.013514
false negative rate = 0.986486
false positive rate = 0.0
positive prediction rate = 0.00137
AUC of ROC = 0.748167
AUC of PRC = 0.343961
min(+P, Se) = 0.445946

-------------------------------

confusion matrix:
[[167   0]
 [ 23   1]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.12154000252485275
difference in average predicted and observed risk = -0.004113997475147235
number samples = 191
accuracy = 0.879581
precision class 0 = 0.878947
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.041667
false negative rate = 0.958333
false positive rate = 0.0
positive prediction rate = 0.005236
AUC of ROC = 0.849052
AUC of PRC = 0.662009
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[2474    0]
 [ 255    0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.11115799844264984
difference in average predicted and observed risk = 0.017716998442649845
number samples = 2729
accuracy = 0.906559
precision class 0 = 0.906559
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.747417
AUC of PRC = 0.30712
min(+P, Se) = 0.354086

-------------------------------

confusion matrix:
[[1681    2]
 [ 209    7]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.12090100347995758
difference in average predicted and observed risk = 0.007157003479957583
number samples = 1899
accuracy = 0.888889
precision class 0 = 0.889418
precision class 1 = 0.777778
recall class 0 = 0.998812
recall class 1 = 0.032407
false negative rate = 0.967593
false positive rate = 0.001188
positive prediction rate = 0.004739
AUC of ROC = 0.793237
AUC of PRC = 0.411471
min(+P, Se) = 0.421296

-------------------------------

confusion matrix:
[[548   1]
 [ 77   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.12093999981880188
difference in average predicted and observed risk = -0.0020630001811981213
number samples = 626
accuracy = 0.875399
precision class 0 = 0.8768
precision class 1 = 0.0
recall class 0 = 0.998178
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.001821
positive prediction rate = 0.001597
AUC of ROC = 0.756582
AUC of PRC = 0.339506
min(+P, Se) = 0.376623

-------------------------------

confusion matrix:
[[2249    0]
 [ 208    0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.10712999850511551
difference in average predicted and observed risk = 0.022473998505115514
number samples = 2457
accuracy = 0.915344
precision class 0 = 0.915344
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.751182
AUC of PRC = 0.300325
min(+P, Se) = 0.30622

-------------------------------

confusion matrix:
[[223   0]
 [ 25   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.11096200346946716
difference in average predicted and observed risk = 0.010156003469467156
number samples = 248
accuracy = 0.899194
precision class 0 = 0.899194
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.692018
AUC of PRC = 0.198745
min(+P, Se) = 0.32

-------------------------------

confusion matrix:
[[481   0]
 [ 77   5]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.1387699991464615
difference in average predicted and observed risk = -0.006878000853538513
number samples = 563
accuracy = 0.863233
precision class 0 = 0.862007
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.060976
false negative rate = 0.939024
false positive rate = 0.0
positive prediction rate = 0.008881
AUC of ROC = 0.814512
AUC of PRC = 0.5603
min(+P, Se) = 0.536585

-------------------------------

confusion matrix:
[[654   1]
 [ 77   2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.12039300054311752
difference in average predicted and observed risk = 0.01276400054311752
number samples = 734
accuracy = 0.893733
precision class 0 = 0.894665
precision class 1 = 0.666667
recall class 0 = 0.998473
recall class 1 = 0.025316
false negative rate = 0.974684
false positive rate = 0.001527
positive prediction rate = 0.004087
AUC of ROC = 0.787168
AUC of PRC = 0.391264
min(+P, Se) = 0.432099

-------------------------------

confusion matrix:
[[4155    2]
 [ 464    7]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.11515600234270096
difference in average predicted and observed risk = 0.013384002342700957
number samples = 4628
accuracy = 0.899309
precision class 0 = 0.899545
precision class 1 = 0.777778
recall class 0 = 0.999519
recall class 1 = 0.014862
false negative rate = 0.985138
false positive rate = 0.000481
positive prediction rate = 0.001945
AUC of ROC = 0.768248
AUC of PRC = 0.360374
min(+P, Se) = 0.380042

-------------------------------

==>predicting on validation



confusion matrix:
[[218   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.11224900186061859
difference in average predicted and observed risk = 0.03208000186061859
number samples = 237
accuracy = 0.919831
precision class 0 = 0.919831
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.859005
AUC of PRC = 0.402073
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.11440200358629227
difference in average predicted and observed risk = 0.005606003586292263
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.757281
AUC of PRC = 0.397479
min(+P, Se) = 0.396552

-------------------------------

confusion matrix:
[[105   0]
 [ 12   1]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.12947799265384674
difference in average predicted and observed risk = 0.019308992653846738
number samples = 118
accuracy = 0.898305
precision class 0 = 0.897436
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.0
positive prediction rate = 0.008475
AUC of ROC = 0.895238
AUC of PRC = 0.681386
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 4  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.1334960013628006
difference in average predicted and observed risk = 0.00016300136280059108
number samples = 30
accuracy = 0.866667
precision class 0 = 0.866667
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[300   0]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.1232210025191307
difference in average predicted and observed risk = 0.008177002519130713
number samples = 339
accuracy = 0.887906
precision class 0 = 0.887574
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.0
positive prediction rate = 0.00295
AUC of ROC = 0.793675
AUC of PRC = 0.34929
min(+P, Se) = 0.414634

-------------------------------

confusion matrix:
[[434   0]
 [ 44   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.11200100183486938
difference in average predicted and observed risk = 0.019951001834869378
number samples = 478
accuracy = 0.90795
precision class 0 = 0.90795
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.82855
AUC of PRC = 0.539233
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 38   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.10818900167942047
difference in average predicted and observed risk = 0.018987001679420468
number samples = 426
accuracy = 0.910798
precision class 0 = 0.910798
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.815111
AUC of PRC = 0.450837
min(+P, Se) = 0.394737

-------------------------------

confusion matrix:
[[90  0]
 [11  1]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.1339319944381714
difference in average predicted and observed risk = 0.016284994438171385
number samples = 102
accuracy = 0.892157
precision class 0 = 0.891089
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.009804
AUC of ROC = 0.933333
AUC of PRC = 0.695431
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.11716199666261673
difference in average predicted and observed risk = 0.028451996662616733
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.773934
AUC of PRC = 0.209982
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[108   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.12381900101900101
difference in average predicted and observed risk = -0.025786998980998982
number samples = 127
accuracy = 0.850394
precision class 0 = 0.850394
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.760234
AUC of PRC = 0.466977
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.13962100446224213
difference in average predicted and observed risk = 0.06067400446224212
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.914286
AUC of PRC = 0.532341
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[734   0]
 [ 82   1]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.11665599793195724
difference in average predicted and observed risk = 0.015064997931957244
number samples = 817
accuracy = 0.899633
precision class 0 = 0.89951
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.012048
false negative rate = 0.987952
false positive rate = 0.0
positive prediction rate = 0.001224
AUC of ROC = 0.814221
AUC of PRC = 0.447308
min(+P, Se) = 0.470588

-------------------------------

Epoch 00007: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch7.state
Epoch 8/100
 - 301s - loss: 0.2929 - val_loss: 0.2679

==>predicting on train



confusion matrix:
[[2153    2]
 [ 244   11]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.10242000222206116
difference in average predicted and observed risk = -0.003388997777938843
number samples = 2410
accuracy = 0.897925
precision class 0 = 0.898206
precision class 1 = 0.846154
recall class 0 = 0.999072
recall class 1 = 0.043137
false negative rate = 0.956863
false positive rate = 0.000928
positive prediction rate = 0.005394
AUC of ROC = 0.765328
AUC of PRC = 0.383317
min(+P, Se) = 0.375969

-------------------------------

confusion matrix:
[[1177    2]
 [ 116    2]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.10016199946403503
difference in average predicted and observed risk = 0.00918299946403503
number samples = 1297
accuracy = 0.909021
precision class 0 = 0.910286
precision class 1 = 0.5
recall class 0 = 0.998304
recall class 1 = 0.016949
false negative rate = 0.983051
false positive rate = 0.001696
positive prediction rate = 0.003084
AUC of ROC = 0.790925
AUC of PRC = 0.298912
min(+P, Se) = 0.341463

-------------------------------

confusion matrix:
[[655   1]
 [ 73   1]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.1074720025062561
difference in average predicted and observed risk = 0.006102002506256102
number samples = 730
accuracy = 0.89863
precision class 0 = 0.899725
precision class 1 = 0.5
recall class 0 = 0.998476
recall class 1 = 0.013514
false negative rate = 0.986486
false positive rate = 0.001524
positive prediction rate = 0.00274
AUC of ROC = 0.758013
AUC of PRC = 0.344699
min(+P, Se) = 0.413333

-------------------------------

confusion matrix:
[[167   0]
 [ 22   2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.110214002430439
difference in average predicted and observed risk = -0.015439997569560993
number samples = 191
accuracy = 0.884817
precision class 0 = 0.883598
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.010471
AUC of ROC = 0.855539
AUC of PRC = 0.658692
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2473    1]
 [ 253    2]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.09911900013685226
difference in average predicted and observed risk = 0.005678000136852268
number samples = 2729
accuracy = 0.906926
precision class 0 = 0.90719
precision class 1 = 0.666667
recall class 0 = 0.999596
recall class 1 = 0.007843
false negative rate = 0.992157
false positive rate = 0.000404
positive prediction rate = 0.001099
AUC of ROC = 0.758697
AUC of PRC = 0.315236
min(+P, Se) = 0.345098

-------------------------------

confusion matrix:
[[1679    4]
 [ 202   14]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.10834799706935883
difference in average predicted and observed risk = -0.005396002930641172
number samples = 1899
accuracy = 0.891522
precision class 0 = 0.89261
precision class 1 = 0.777778
recall class 0 = 0.997623
recall class 1 = 0.064815
false negative rate = 0.935185
false positive rate = 0.002377
positive prediction rate = 0.009479
AUC of ROC = 0.796769
AUC of PRC = 0.41991
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[548   1]
 [ 77   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.11161100119352341
difference in average predicted and observed risk = -0.011391998806476594
number samples = 626
accuracy = 0.875399
precision class 0 = 0.8768
precision class 1 = 0.0
recall class 0 = 0.998178
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.001821
positive prediction rate = 0.001597
AUC of ROC = 0.767819
AUC of PRC = 0.350186
min(+P, Se) = 0.376623

-------------------------------

confusion matrix:
[[2249    0]
 [ 206    2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.09386800229549408
difference in average predicted and observed risk = 0.009212002295494084
number samples = 2457
accuracy = 0.916158
precision class 0 = 0.91609
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.009615
false negative rate = 0.990385
false positive rate = 0.0
positive prediction rate = 0.000814
AUC of ROC = 0.758859
AUC of PRC = 0.309045
min(+P, Se) = 0.313084

-------------------------------

confusion matrix:
[[222   1]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.0977730005979538
difference in average predicted and observed risk = -0.0030329994020462103
number samples = 248
accuracy = 0.895161
precision class 0 = 0.898785
precision class 1 = 0.0
recall class 0 = 0.995516
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.004484
positive prediction rate = 0.004032
AUC of ROC = 0.689686
AUC of PRC = 0.193933
min(+P, Se) = 0.307692

-------------------------------

confusion matrix:
[[480   1]
 [ 71  11]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12826399505138397
difference in average predicted and observed risk = -0.017384004948616028
number samples = 563
accuracy = 0.872114
precision class 0 = 0.871143
precision class 1 = 0.916667
recall class 0 = 0.997921
recall class 1 = 0.134146
false negative rate = 0.865854
false positive rate = 0.002079
positive prediction rate = 0.021314
AUC of ROC = 0.820318
AUC of PRC = 0.564661
min(+P, Se) = 0.52439

-------------------------------

confusion matrix:
[[653   2]
 [ 76   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.10802000015974045
difference in average predicted and observed risk = 0.00039100015974044555
number samples = 734
accuracy = 0.893733
precision class 0 = 0.895748
precision class 1 = 0.6
recall class 0 = 0.996947
recall class 1 = 0.037975
false negative rate = 0.962025
false positive rate = 0.003053
positive prediction rate = 0.006812
AUC of ROC = 0.790588
AUC of PRC = 0.390591
min(+P, Se) = 0.420455

-------------------------------

confusion matrix:
[[4152    5]
 [ 455   16]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.1029060035943985
difference in average predicted and observed risk = 0.0011340035943984972
number samples = 4628
accuracy = 0.900605
precision class 0 = 0.901237
precision class 1 = 0.761905
recall class 0 = 0.998797
recall class 1 = 0.03397
false negative rate = 0.96603
false positive rate = 0.001203
positive prediction rate = 0.004538
AUC of ROC = 0.775613
AUC of PRC = 0.367449
min(+P, Se) = 0.382664

-------------------------------

==>predicting on validation



confusion matrix:
[[218   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.09867600351572037
difference in average predicted and observed risk = 0.018507003515720363
number samples = 237
accuracy = 0.919831
precision class 0 = 0.919831
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.864075
AUC of PRC = 0.395363
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.10206899791955948
difference in average predicted and observed risk = -0.006727002080440525
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.7727
AUC of PRC = 0.398672
min(+P, Se) = 0.396226

-------------------------------

confusion matrix:
[[105   0]
 [ 12   1]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.11875399947166443
difference in average predicted and observed risk = 0.008584999471664426
number samples = 118
accuracy = 0.898305
precision class 0 = 0.897436
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.0
positive prediction rate = 0.008475
AUC of ROC = 0.901832
AUC of PRC = 0.652658
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 4  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.12563100457191467
difference in average predicted and observed risk = -0.007701995428085334
number samples = 30
accuracy = 0.866667
precision class 0 = 0.866667
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[300   0]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.11031199991703033
difference in average predicted and observed risk = -0.004732000082969659
number samples = 339
accuracy = 0.887906
precision class 0 = 0.887574
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.0
positive prediction rate = 0.00295
AUC of ROC = 0.795128
AUC of PRC = 0.341022
min(+P, Se) = 0.404762

-------------------------------

confusion matrix:
[[434   0]
 [ 44   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.10013800114393234
difference in average predicted and observed risk = 0.008088001143932336
number samples = 478
accuracy = 0.90795
precision class 0 = 0.90795
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.846984
AUC of PRC = 0.549689
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[388   0]
 [ 38   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.09463799744844437
difference in average predicted and observed risk = 0.005435997448444363
number samples = 426
accuracy = 0.910798
precision class 0 = 0.910798
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.832881
AUC of PRC = 0.468829
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[90  0]
 [11  1]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.12331599742174149
difference in average predicted and observed risk = 0.005668997421741484
number samples = 102
accuracy = 0.892157
precision class 0 = 0.891089
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.009804
AUC of ROC = 0.931481
AUC of PRC = 0.688655
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.10695300251245499
difference in average predicted and observed risk = 0.01824300251245499
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.786002
AUC of PRC = 0.216021
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[108   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.11218699812889099
difference in average predicted and observed risk = -0.037419001871109
number samples = 127
accuracy = 0.850394
precision class 0 = 0.850394
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.772417
AUC of PRC = 0.494615
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.12784600257873535
difference in average predicted and observed risk = 0.04889900257873535
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.904762
AUC of PRC = 0.519444
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[734   0]
 [ 82   1]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.10435999929904938
difference in average predicted and observed risk = 0.0027689992990493767
number samples = 817
accuracy = 0.899633
precision class 0 = 0.89951
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.012048
false negative rate = 0.987952
false positive rate = 0.0
positive prediction rate = 0.001224
AUC of ROC = 0.825974
AUC of PRC = 0.451722
min(+P, Se) = 0.476744

-------------------------------

Epoch 00008: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch8.state
Epoch 9/100
 - 310s - loss: 0.2886 - val_loss: 0.2671

==>predicting on train



confusion matrix:
[[2153    2]
 [ 245   10]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.07390499860048294
difference in average predicted and observed risk = -0.03190400139951706
number samples = 2410
accuracy = 0.89751
precision class 0 = 0.897831
precision class 1 = 0.833333
recall class 0 = 0.999072
recall class 1 = 0.039216
false negative rate = 0.960784
false positive rate = 0.000928
positive prediction rate = 0.004979
AUC of ROC = 0.768951
AUC of PRC = 0.387126
min(+P, Se) = 0.388235

-------------------------------

confusion matrix:
[[1178    1]
 [ 115    3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.07361900061368942
difference in average predicted and observed risk = -0.01735999938631058
number samples = 1297
accuracy = 0.910563
precision class 0 = 0.91106
precision class 1 = 0.75
recall class 0 = 0.999152
recall class 1 = 0.025424
false negative rate = 0.974576
false positive rate = 0.000848
positive prediction rate = 0.003084
AUC of ROC = 0.791111
AUC of PRC = 0.308562
min(+P, Se) = 0.341667

-------------------------------

confusion matrix:
[[656   0]
 [ 73   1]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.07999099791049957
difference in average predicted and observed risk = -0.02137900208950043
number samples = 730
accuracy = 0.9
precision class 0 = 0.899863
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.013514
false negative rate = 0.986486
false positive rate = 0.0
positive prediction rate = 0.00137
AUC of ROC = 0.74862
AUC of PRC = 0.341033
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[167   0]
 [ 23   1]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.08240699768066406
difference in average predicted and observed risk = -0.043247002319335925
number samples = 191
accuracy = 0.879581
precision class 0 = 0.878947
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.041667
false negative rate = 0.958333
false positive rate = 0.0
positive prediction rate = 0.005236
AUC of ROC = 0.849301
AUC of PRC = 0.682616
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[2473    1]
 [ 255    0]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07109300047159195
difference in average predicted and observed risk = -0.022347999528408047
number samples = 2729
accuracy = 0.906193
precision class 0 = 0.906525
precision class 1 = 0.0
recall class 0 = 0.999596
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.000404
positive prediction rate = 0.000366
AUC of ROC = 0.758806
AUC of PRC = 0.320956
min(+P, Se) = 0.35

-------------------------------

confusion matrix:
[[1681    2]
 [ 201   15]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.08094599843025208
difference in average predicted and observed risk = -0.03279800156974792
number samples = 1899
accuracy = 0.893102
precision class 0 = 0.893199
precision class 1 = 0.882353
recall class 0 = 0.998812
recall class 1 = 0.069444
false negative rate = 0.930556
false positive rate = 0.001188
positive prediction rate = 0.008952
AUC of ROC = 0.797369
AUC of PRC = 0.424881
min(+P, Se) = 0.425926

-------------------------------

confusion matrix:
[[548   1]
 [ 77   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.08378200232982635
difference in average predicted and observed risk = -0.039220997670173646
number samples = 626
accuracy = 0.875399
precision class 0 = 0.8768
precision class 1 = 0.0
recall class 0 = 0.998178
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.001821
positive prediction rate = 0.001597
AUC of ROC = 0.761645
AUC of PRC = 0.351148
min(+P, Se) = 0.376623

-------------------------------

confusion matrix:
[[2249    0]
 [ 207    1]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.06535299867391586
difference in average predicted and observed risk = -0.019303001326084132
number samples = 2457
accuracy = 0.915751
precision class 0 = 0.915717
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.004808
false negative rate = 0.995192
false positive rate = 0.0
positive prediction rate = 0.000407
AUC of ROC = 0.759476
AUC of PRC = 0.303489
min(+P, Se) = 0.331754

-------------------------------

confusion matrix:
[[223   0]
 [ 25   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.07118800282478333
difference in average predicted and observed risk = -0.02961799717521668
number samples = 248
accuracy = 0.899194
precision class 0 = 0.899194
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.716413
AUC of PRC = 0.210445
min(+P, Se) = 0.314286

-------------------------------

confusion matrix:
[[479   2]
 [ 70  12]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.10418900102376938
difference in average predicted and observed risk = -0.04145899897623062
number samples = 563
accuracy = 0.872114
precision class 0 = 0.872495
precision class 1 = 0.857143
recall class 0 = 0.995842
recall class 1 = 0.146341
false negative rate = 0.853659
false positive rate = 0.004158
positive prediction rate = 0.024867
AUC of ROC = 0.822575
AUC of PRC = 0.567288
min(+P, Se) = 0.535714

-------------------------------

confusion matrix:
[[655   0]
 [ 77   2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.07955999672412872
difference in average predicted and observed risk = -0.02806900327587128
number samples = 734
accuracy = 0.895095
precision class 0 = 0.894809
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.025316
false negative rate = 0.974684
false positive rate = 0.0
positive prediction rate = 0.002725
AUC of ROC = 0.786627
AUC of PRC = 0.39783
min(+P, Se) = 0.455696

-------------------------------

confusion matrix:
[[4154    3]
 [ 456   15]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.07513599842786789
difference in average predicted and observed risk = -0.026636001572132112
number samples = 4628
accuracy = 0.900821
precision class 0 = 0.901085
precision class 1 = 0.833333
recall class 0 = 0.999278
recall class 1 = 0.031847
false negative rate = 0.968153
false positive rate = 0.000722
positive prediction rate = 0.003889
AUC of ROC = 0.776219
AUC of PRC = 0.371919
min(+P, Se) = 0.384298

-------------------------------

==>predicting on validation



confusion matrix:
[[218   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.07276999950408936
difference in average predicted and observed risk = -0.007399000495910649
number samples = 237
accuracy = 0.919831
precision class 0 = 0.919831
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.855384
AUC of PRC = 0.383455
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.07300200313329697
difference in average predicted and observed risk = -0.03579399686670304
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.756784
AUC of PRC = 0.393165
min(+P, Se) = 0.403846

-------------------------------

confusion matrix:
[[105   0]
 [ 12   1]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.091450996696949
difference in average predicted and observed risk = -0.018718003303050998
number samples = 118
accuracy = 0.898305
precision class 0 = 0.897436
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.0
positive prediction rate = 0.008475
AUC of ROC = 0.911355
AUC of PRC = 0.673604
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 4  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.09431999921798706
difference in average predicted and observed risk = -0.039013000782012947
number samples = 30
accuracy = 0.866667
precision class 0 = 0.866667
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[300   0]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.08278200030326843
difference in average predicted and observed risk = -0.03226199969673156
number samples = 339
accuracy = 0.887906
precision class 0 = 0.887574
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.0
positive prediction rate = 0.00295
AUC of ROC = 0.802735
AUC of PRC = 0.345036
min(+P, Se) = 0.410256

-------------------------------

confusion matrix:
[[434   0]
 [ 44   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.07184299826622009
difference in average predicted and observed risk = -0.020207001733779914
number samples = 478
accuracy = 0.90795
precision class 0 = 0.90795
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.825723
AUC of PRC = 0.523589
min(+P, Se) = 0.511111

-------------------------------

confusion matrix:
[[388   0]
 [ 38   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.06650400161743164
difference in average predicted and observed risk = -0.022697998382568363
number samples = 426
accuracy = 0.910798
precision class 0 = 0.910798
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.819791
AUC of PRC = 0.458846
min(+P, Se) = 0.425

-------------------------------

confusion matrix:
[[90  0]
 [11  1]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.09815999865531921
difference in average predicted and observed risk = -0.019487001344680788
number samples = 102
accuracy = 0.892157
precision class 0 = 0.891089
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.009804
AUC of ROC = 0.939815
AUC of PRC = 0.667628
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.07855000346899033
difference in average predicted and observed risk = -0.010159996531009671
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.757844
AUC of PRC = 0.20093
min(+P, Se) = 0.352941

-------------------------------

confusion matrix:
[[108   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.08247099816799164
difference in average predicted and observed risk = -0.06713500183200835
number samples = 127
accuracy = 0.850394
precision class 0 = 0.850394
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.774366
AUC of PRC = 0.514625
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.1012440025806427
difference in average predicted and observed risk = 0.022297002580642697
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.904762
AUC of PRC = 0.519444
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[734   0]
 [ 82   1]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.07638200372457504
difference in average predicted and observed risk = -0.025208996275424958
number samples = 817
accuracy = 0.899633
precision class 0 = 0.89951
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.012048
false negative rate = 0.987952
false positive rate = 0.0
positive prediction rate = 0.001224
AUC of ROC = 0.817176
AUC of PRC = 0.436498
min(+P, Se) = 0.46988

-------------------------------

Epoch 00009: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch9.state
Epoch 10/100
 - 318s - loss: 0.2892 - val_loss: 0.2597

==>predicting on train



confusion matrix:
[[2132   23]
 [ 214   41]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.09880000352859497
difference in average predicted and observed risk = -0.00700899647140503
number samples = 2410
accuracy = 0.90166
precision class 0 = 0.908781
precision class 1 = 0.640625
recall class 0 = 0.989327
recall class 1 = 0.160784
false negative rate = 0.839216
false positive rate = 0.010673
positive prediction rate = 0.026556
AUC of ROC = 0.768234
AUC of PRC = 0.3857
min(+P, Se) = 0.384314

-------------------------------

confusion matrix:
[[1162   17]
 [ 100   18]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.0972289964556694
difference in average predicted and observed risk = 0.006249996455669399
number samples = 1297
accuracy = 0.909792
precision class 0 = 0.920761
precision class 1 = 0.514286
recall class 0 = 0.985581
recall class 1 = 0.152542
false negative rate = 0.847458
false positive rate = 0.014419
positive prediction rate = 0.026985
AUC of ROC = 0.790263
AUC of PRC = 0.30875
min(+P, Se) = 0.347458

-------------------------------

confusion matrix:
[[647   9]
 [ 64  10]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.10565699636936188
difference in average predicted and observed risk = 0.004286996369361876
number samples = 730
accuracy = 0.9
precision class 0 = 0.909986
precision class 1 = 0.526316
recall class 0 = 0.986281
recall class 1 = 0.135135
false negative rate = 0.864865
false positive rate = 0.01372
positive prediction rate = 0.026027
AUC of ROC = 0.762422
AUC of PRC = 0.35476
min(+P, Se) = 0.418919

-------------------------------

confusion matrix:
[[166   1]
 [ 16   8]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.108364999294281
difference in average predicted and observed risk = -0.017289000705718982
number samples = 191
accuracy = 0.910995
precision class 0 = 0.912088
precision class 1 = 0.888889
recall class 0 = 0.994012
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.005988
positive prediction rate = 0.04712
AUC of ROC = 0.842565
AUC of PRC = 0.679771
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2449   25]
 [ 218   37]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.09452299773693085
difference in average predicted and observed risk = 0.0010819977369308509
number samples = 2729
accuracy = 0.910956
precision class 0 = 0.91826
precision class 1 = 0.596774
recall class 0 = 0.989895
recall class 1 = 0.145098
false negative rate = 0.854902
false positive rate = 0.010105
positive prediction rate = 0.022719
AUC of ROC = 0.762403
AUC of PRC = 0.319506
min(+P, Se) = 0.360784

-------------------------------

confusion matrix:
[[1658   25]
 [ 176   40]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.10747099667787552
difference in average predicted and observed risk = -0.006273003322124479
number samples = 1899
accuracy = 0.894155
precision class 0 = 0.904035
precision class 1 = 0.615385
recall class 0 = 0.985146
recall class 1 = 0.185185
false negative rate = 0.814815
false positive rate = 0.014854
positive prediction rate = 0.034229
AUC of ROC = 0.796211
AUC of PRC = 0.428636
min(+P, Se) = 0.431818

-------------------------------

confusion matrix:
[[538  11]
 [ 67  10]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.11417800188064575
difference in average predicted and observed risk = -0.00882499811935425
number samples = 626
accuracy = 0.875399
precision class 0 = 0.889256
precision class 1 = 0.47619
recall class 0 = 0.979964
recall class 1 = 0.12987
false negative rate = 0.87013
false positive rate = 0.020036
positive prediction rate = 0.033546
AUC of ROC = 0.769285
AUC of PRC = 0.351122
min(+P, Se) = 0.38961

-------------------------------

confusion matrix:
[[2238   11]
 [ 187   21]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08496800065040588
difference in average predicted and observed risk = 0.00031200065040588865
number samples = 2457
accuracy = 0.919414
precision class 0 = 0.922887
precision class 1 = 0.65625
recall class 0 = 0.995109
recall class 1 = 0.100962
false negative rate = 0.899038
false positive rate = 0.004891
positive prediction rate = 0.013024
AUC of ROC = 0.761293
AUC of PRC = 0.308985
min(+P, Se) = 0.326923

-------------------------------

confusion matrix:
[[218   5]
 [ 23   2]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.09269899874925613
difference in average predicted and observed risk = -0.008107001250743873
number samples = 248
accuracy = 0.887097
precision class 0 = 0.904564
precision class 1 = 0.285714
recall class 0 = 0.977578
recall class 1 = 0.08
false negative rate = 0.92
false positive rate = 0.022422
positive prediction rate = 0.028226
AUC of ROC = 0.696323
AUC of PRC = 0.201747
min(+P, Se) = 0.321429

-------------------------------

confusion matrix:
[[467  14]
 [ 53  29]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.14066599309444427
difference in average predicted and observed risk = -0.004982006905555725
number samples = 563
accuracy = 0.880995
precision class 0 = 0.898077
precision class 1 = 0.674419
recall class 0 = 0.970894
recall class 1 = 0.353659
false negative rate = 0.646341
false positive rate = 0.029106
positive prediction rate = 0.076377
AUC of ROC = 0.822955
AUC of PRC = 0.571163
min(+P, Se) = 0.505882

-------------------------------

confusion matrix:
[[646   9]
 [ 64  15]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.10846900194883347
difference in average predicted and observed risk = 0.0008400019488334631
number samples = 734
accuracy = 0.900545
precision class 0 = 0.909859
precision class 1 = 0.625
recall class 0 = 0.98626
recall class 1 = 0.189873
false negative rate = 0.810127
false positive rate = 0.01374
positive prediction rate = 0.032698
AUC of ROC = 0.791458
AUC of PRC = 0.395924
min(+P, Se) = 0.443038

-------------------------------

confusion matrix:
[[4107   50]
 [ 394   77]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09983599931001663
difference in average predicted and observed risk = -0.0019360006899833693
number samples = 4628
accuracy = 0.904062
precision class 0 = 0.912464
precision class 1 = 0.606299
recall class 0 = 0.987972
recall class 1 = 0.163482
false negative rate = 0.836518
false positive rate = 0.012028
positive prediction rate = 0.027442
AUC of ROC = 0.777601
AUC of PRC = 0.373514
min(+P, Se) = 0.392781

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.0946979969739914
difference in average predicted and observed risk = 0.01452899697399139
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.850555
AUC of PRC = 0.378101
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[385   0]
 [ 44   3]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.09844999760389328
difference in average predicted and observed risk = -0.010346002396106724
number samples = 432
accuracy = 0.898148
precision class 0 = 0.897436
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.06383
false negative rate = 0.93617
false positive rate = 0.0
positive prediction rate = 0.006944
AUC of ROC = 0.776071
AUC of PRC = 0.390164
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[104   1]
 [  9   4]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.12201499938964844
difference in average predicted and observed risk = 0.011845999389648434
number samples = 118
accuracy = 0.915254
precision class 0 = 0.920354
precision class 1 = 0.8
recall class 0 = 0.990476
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.009524
positive prediction rate = 0.042373
AUC of ROC = 0.910623
AUC of PRC = 0.652343
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.12586399912834167
difference in average predicted and observed risk = -0.007469000871658332
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[297   3]
 [ 37   2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.11057999730110168
difference in average predicted and observed risk = -0.004464002698898309
number samples = 339
accuracy = 0.882006
precision class 0 = 0.889222
precision class 1 = 0.4
recall class 0 = 0.99
recall class 1 = 0.051282
false negative rate = 0.948718
false positive rate = 0.01
positive prediction rate = 0.014749
AUC of ROC = 0.801197
AUC of PRC = 0.338811
min(+P, Se) = 0.435897

-------------------------------

confusion matrix:
[[433   1]
 [ 33  11]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.09552399814128876
difference in average predicted and observed risk = 0.0034739981412887505
number samples = 478
accuracy = 0.92887
precision class 0 = 0.929185
precision class 1 = 0.916667
recall class 0 = 0.997696
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.002304
positive prediction rate = 0.025105
AUC of ROC = 0.839548
AUC of PRC = 0.539698
min(+P, Se) = 0.520833

-------------------------------

confusion matrix:
[[388   0]
 [ 34   4]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08584599941968918
difference in average predicted and observed risk = -0.003356000580310825
number samples = 426
accuracy = 0.920188
precision class 0 = 0.919431
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.0
positive prediction rate = 0.00939
AUC of ROC = 0.839257
AUC of PRC = 0.471373
min(+P, Se) = 0.435897

-------------------------------

confusion matrix:
[[89  1]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.13591599464416504
difference in average predicted and observed risk = 0.018268994644165037
number samples = 102
accuracy = 0.911765
precision class 0 = 0.917526
precision class 1 = 0.8
recall class 0 = 0.988889
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.011111
positive prediction rate = 0.04902
AUC of ROC = 0.930556
AUC of PRC = 0.625936
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.10744000226259232
difference in average predicted and observed risk = 0.01873000226259232
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.777152
AUC of PRC = 0.214442
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[106   2]
 [ 15   4]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.11204499751329422
difference in average predicted and observed risk = -0.03756100248670577
number samples = 127
accuracy = 0.866142
precision class 0 = 0.876033
precision class 1 = 0.666667
recall class 0 = 0.981481
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.018519
positive prediction rate = 0.047244
AUC of ROC = 0.769981
AUC of PRC = 0.503535
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.1358170062303543
difference in average predicted and observed risk = 0.056870006230354306
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.904762
AUC of PRC = 0.519444
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[730   4]
 [ 70  13]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.10177099704742432
difference in average predicted and observed risk = 0.00017999704742431566
number samples = 817
accuracy = 0.909425
precision class 0 = 0.9125
precision class 1 = 0.764706
recall class 0 = 0.99455
recall class 1 = 0.156627
false negative rate = 0.843373
false positive rate = 0.00545
positive prediction rate = 0.020808
AUC of ROC = 0.824825
AUC of PRC = 0.442089
min(+P, Se) = 0.47619

-------------------------------

Epoch 00010: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch10.state
Epoch 11/100
 - 318s - loss: 0.2941 - val_loss: 0.2649

==>predicting on train



confusion matrix:
[[2148    7]
 [ 234   21]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.1043189987540245
difference in average predicted and observed risk = -0.0014900012459754947
number samples = 2410
accuracy = 0.9
precision class 0 = 0.901763
precision class 1 = 0.75
recall class 0 = 0.996752
recall class 1 = 0.082353
false negative rate = 0.917647
false positive rate = 0.003248
positive prediction rate = 0.011618
AUC of ROC = 0.775486
AUC of PRC = 0.389806
min(+P, Se) = 0.376471

-------------------------------

confusion matrix:
[[1173    6]
 [ 112    6]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.10045699775218964
difference in average predicted and observed risk = 0.009477997752189632
number samples = 1297
accuracy = 0.909021
precision class 0 = 0.91284
precision class 1 = 0.5
recall class 0 = 0.994911
recall class 1 = 0.050847
false negative rate = 0.949153
false positive rate = 0.005089
positive prediction rate = 0.009252
AUC of ROC = 0.793253
AUC of PRC = 0.309583
min(+P, Se) = 0.355932

-------------------------------

confusion matrix:
[[655   1]
 [ 69   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.10746800154447556
difference in average predicted and observed risk = 0.006098001544475554
number samples = 730
accuracy = 0.90411
precision class 0 = 0.904696
precision class 1 = 0.833333
recall class 0 = 0.998476
recall class 1 = 0.067568
false negative rate = 0.932432
false positive rate = 0.001524
positive prediction rate = 0.008219
AUC of ROC = 0.760609
AUC of PRC = 0.36033
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[167   0]
 [ 20   4]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.11224900186061859
difference in average predicted and observed risk = -0.013404998139381397
number samples = 191
accuracy = 0.895288
precision class 0 = 0.893048
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.020942
AUC of ROC = 0.848553
AUC of PRC = 0.689049
min(+P, Se) = 0.68

-------------------------------

confusion matrix:
[[2468    6]
 [ 245   10]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.09906800091266632
difference in average predicted and observed risk = 0.0056270009126663245
number samples = 2729
accuracy = 0.908025
precision class 0 = 0.909694
precision class 1 = 0.625
recall class 0 = 0.997575
recall class 1 = 0.039216
false negative rate = 0.960784
false positive rate = 0.002425
positive prediction rate = 0.005863
AUC of ROC = 0.765215
AUC of PRC = 0.322517
min(+P, Se) = 0.360784

-------------------------------

confusion matrix:
[[1675    8]
 [ 190   26]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.11123599857091904
difference in average predicted and observed risk = -0.002508001429080961
number samples = 1899
accuracy = 0.895735
precision class 0 = 0.898123
precision class 1 = 0.764706
recall class 0 = 0.995247
recall class 1 = 0.12037
false negative rate = 0.87963
false positive rate = 0.004753
positive prediction rate = 0.017904
AUC of ROC = 0.802117
AUC of PRC = 0.435743
min(+P, Se) = 0.430556

-------------------------------

confusion matrix:
[[548   1]
 [ 73   4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.1125430017709732
difference in average predicted and observed risk = -0.010459998229026796
number samples = 626
accuracy = 0.881789
precision class 0 = 0.882448
precision class 1 = 0.8
recall class 0 = 0.998178
recall class 1 = 0.051948
false negative rate = 0.948052
false positive rate = 0.001821
positive prediction rate = 0.007987
AUC of ROC = 0.769948
AUC of PRC = 0.360199
min(+P, Se) = 0.397436

-------------------------------

confusion matrix:
[[2248    1]
 [ 203    5]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.09438499808311462
difference in average predicted and observed risk = 0.009728998083114629
number samples = 2457
accuracy = 0.916972
precision class 0 = 0.917177
precision class 1 = 0.833333
recall class 0 = 0.999555
recall class 1 = 0.024038
false negative rate = 0.975962
false positive rate = 0.000445
positive prediction rate = 0.002442
AUC of ROC = 0.766659
AUC of PRC = 0.316456
min(+P, Se) = 0.326923

-------------------------------

confusion matrix:
[[221   2]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.1008400022983551
difference in average predicted and observed risk = 3.400229835509583e-05
number samples = 248
accuracy = 0.891129
precision class 0 = 0.898374
precision class 1 = 0.0
recall class 0 = 0.991031
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.008969
positive prediction rate = 0.008065
AUC of ROC = 0.710852
AUC of PRC = 0.201258
min(+P, Se) = 0.310345

-------------------------------

confusion matrix:
[[477   4]
 [ 63  19]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12957799434661865
difference in average predicted and observed risk = -0.016070005653381347
number samples = 563
accuracy = 0.880995
precision class 0 = 0.883333
precision class 1 = 0.826087
recall class 0 = 0.991684
recall class 1 = 0.231707
false negative rate = 0.768293
false positive rate = 0.008316
positive prediction rate = 0.040853
AUC of ROC = 0.826758
AUC of PRC = 0.570775
min(+P, Se) = 0.506024

-------------------------------

confusion matrix:
[[649   6]
 [ 71   8]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.11073199659585953
difference in average predicted and observed risk = 0.003102996595859525
number samples = 734
accuracy = 0.895095
precision class 0 = 0.901389
precision class 1 = 0.571429
recall class 0 = 0.99084
recall class 1 = 0.101266
false negative rate = 0.898734
false positive rate = 0.00916
positive prediction rate = 0.019074
AUC of ROC = 0.793197
AUC of PRC = 0.406649
min(+P, Se) = 0.468354

-------------------------------

confusion matrix:
[[4143   14]
 [ 435   36]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.10406100004911423
difference in average predicted and observed risk = 0.002289000049114226
number samples = 4628
accuracy = 0.902982
precision class 0 = 0.90498
precision class 1 = 0.72
recall class 0 = 0.996632
recall class 1 = 0.076433
false negative rate = 0.923567
false positive rate = 0.003368
positive prediction rate = 0.010804
AUC of ROC = 0.781669
AUC of PRC = 0.378296
min(+P, Se) = 0.393305

-------------------------------

==>predicting on validation



confusion matrix:
[[217   1]
 [ 18   1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.09835900366306305
difference in average predicted and observed risk = 0.018190003663063045
number samples = 237
accuracy = 0.919831
precision class 0 = 0.923404
precision class 1 = 0.5
recall class 0 = 0.995413
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.004587
positive prediction rate = 0.008439
AUC of ROC = 0.851038
AUC of PRC = 0.383105
min(+P, Se) = 0.47619

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.10283999890089035
difference in average predicted and observed risk = -0.0059560010991096535
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.780934
AUC of PRC = 0.407743
min(+P, Se) = 0.4375

-------------------------------

confusion matrix:
[[104   1]
 [ 11   2]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.11920099705457687
difference in average predicted and observed risk = 0.00903199705457687
number samples = 118
accuracy = 0.898305
precision class 0 = 0.904348
precision class 1 = 0.666667
recall class 0 = 0.990476
recall class 1 = 0.153846
false negative rate = 0.846154
false positive rate = 0.009524
positive prediction rate = 0.025424
AUC of ROC = 0.90696
AUC of PRC = 0.624267
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 3  1]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.12680700421333313
difference in average predicted and observed risk = -0.006525995786666877
number samples = 30
accuracy = 0.9
precision class 0 = 0.896552
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.033333
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[299   1]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.11209599673748016
difference in average predicted and observed risk = -0.00294800326251983
number samples = 339
accuracy = 0.884956
precision class 0 = 0.88724
precision class 1 = 0.5
recall class 0 = 0.996667
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.003333
positive prediction rate = 0.0059
AUC of ROC = 0.803932
AUC of PRC = 0.340047
min(+P, Se) = 0.425

-------------------------------

confusion matrix:
[[433   1]
 [ 41   3]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.09959699958562851
difference in average predicted and observed risk = 0.007546999585628503
number samples = 478
accuracy = 0.912134
precision class 0 = 0.913502
precision class 1 = 0.75
recall class 0 = 0.997696
recall class 1 = 0.068182
false negative rate = 0.931818
false positive rate = 0.002304
positive prediction rate = 0.008368
AUC of ROC = 0.842637
AUC of PRC = 0.552166
min(+P, Se) = 0.577778

-------------------------------

confusion matrix:
[[388   0]
 [ 38   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.0948060005903244
difference in average predicted and observed risk = 0.005604000590324398
number samples = 426
accuracy = 0.910798
precision class 0 = 0.910798
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.836137
AUC of PRC = 0.467762
min(+P, Se) = 0.447368

-------------------------------

confusion matrix:
[[90  0]
 [10  2]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.12288399785757065
difference in average predicted and observed risk = 0.005236997857570647
number samples = 102
accuracy = 0.901961
precision class 0 = 0.9
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.019608
AUC of ROC = 0.935185
AUC of PRC = 0.66984
min(+P, Se) = 0.611111

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.10607600212097168
difference in average predicted and observed risk = 0.017366002120971682
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.771521
AUC of PRC = 0.225677
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[107   1]
 [ 17   2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.11367899924516678
difference in average predicted and observed risk = -0.03592700075483321
number samples = 127
accuracy = 0.858268
precision class 0 = 0.862903
precision class 1 = 0.666667
recall class 0 = 0.990741
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.009259
positive prediction rate = 0.023622
AUC of ROC = 0.77729
AUC of PRC = 0.529001
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.13410399854183197
difference in average predicted and observed risk = 0.05515699854183197
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.904762
AUC of PRC = 0.519444
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[732   2]
 [ 79   4]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.10478299856185913
difference in average predicted and observed risk = 0.00319199856185913
number samples = 817
accuracy = 0.900857
precision class 0 = 0.902589
precision class 1 = 0.666667
recall class 0 = 0.997275
recall class 1 = 0.048193
false negative rate = 0.951807
false positive rate = 0.002725
positive prediction rate = 0.007344
AUC of ROC = 0.827993
AUC of PRC = 0.44904
min(+P, Se) = 0.483871

-------------------------------

Epoch 00011: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch11.state
Epoch 12/100
 - 314s - loss: 0.2879 - val_loss: 0.2638

==>predicting on train



confusion matrix:
[[2152    3]
 [ 240   15]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.09041900187730789
difference in average predicted and observed risk = -0.015389998122692108
number samples = 2410
accuracy = 0.89917
precision class 0 = 0.899666
precision class 1 = 0.833333
recall class 0 = 0.998608
recall class 1 = 0.058824
false negative rate = 0.941176
false positive rate = 0.001392
positive prediction rate = 0.007469
AUC of ROC = 0.780419
AUC of PRC = 0.391422
min(+P, Se) = 0.384314

-------------------------------

confusion matrix:
[[1176    3]
 [ 114    4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08780699968338013
difference in average predicted and observed risk = -0.0031720003166198774
number samples = 1297
accuracy = 0.909792
precision class 0 = 0.911628
precision class 1 = 0.571429
recall class 0 = 0.997455
recall class 1 = 0.033898
false negative rate = 0.966102
false positive rate = 0.002545
positive prediction rate = 0.005397
AUC of ROC = 0.798134
AUC of PRC = 0.318197
min(+P, Se) = 0.347458

-------------------------------

confusion matrix:
[[656   0]
 [ 71   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09373100101947784
difference in average predicted and observed risk = -0.0076389989805221575
number samples = 730
accuracy = 0.90274
precision class 0 = 0.902338
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.040541
false negative rate = 0.959459
false positive rate = 0.0
positive prediction rate = 0.00411
AUC of ROC = 0.765223
AUC of PRC = 0.358942
min(+P, Se) = 0.418919

-------------------------------

confusion matrix:
[[167   0]
 [ 21   3]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.09930799901485443
difference in average predicted and observed risk = -0.026346000985145557
number samples = 191
accuracy = 0.890052
precision class 0 = 0.888298
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.125
false negative rate = 0.875
false positive rate = 0.0
positive prediction rate = 0.015707
AUC of ROC = 0.851048
AUC of PRC = 0.676116
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[2472    2]
 [ 249    6]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08641800284385681
difference in average predicted and observed risk = -0.007022997156143185
number samples = 2729
accuracy = 0.908025
precision class 0 = 0.90849
precision class 1 = 0.75
recall class 0 = 0.999192
recall class 1 = 0.023529
false negative rate = 0.976471
false positive rate = 0.000808
positive prediction rate = 0.002931
AUC of ROC = 0.770901
AUC of PRC = 0.326235
min(+P, Se) = 0.360784

-------------------------------

confusion matrix:
[[1679    4]
 [ 197   19]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.09655199944972992
difference in average predicted and observed risk = -0.01719200055027008
number samples = 1899
accuracy = 0.894155
precision class 0 = 0.894989
precision class 1 = 0.826087
recall class 0 = 0.997623
recall class 1 = 0.087963
false negative rate = 0.912037
false positive rate = 0.002377
positive prediction rate = 0.012112
AUC of ROC = 0.804172
AUC of PRC = 0.435495
min(+P, Se) = 0.440909

-------------------------------

confusion matrix:
[[548   1]
 [ 76   1]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.09896600246429443
difference in average predicted and observed risk = -0.024036997535705568
number samples = 626
accuracy = 0.876997
precision class 0 = 0.878205
precision class 1 = 0.5
recall class 0 = 0.998178
recall class 1 = 0.012987
false negative rate = 0.987013
false positive rate = 0.001821
positive prediction rate = 0.003195
AUC of ROC = 0.778227
AUC of PRC = 0.364942
min(+P, Se) = 0.423077

-------------------------------

confusion matrix:
[[2249    0]
 [ 206    2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08098399639129639
difference in average predicted and observed risk = -0.0036720036087036084
number samples = 2457
accuracy = 0.916158
precision class 0 = 0.91609
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.009615
false negative rate = 0.990385
false positive rate = 0.0
positive prediction rate = 0.000814
AUC of ROC = 0.769673
AUC of PRC = 0.313801
min(+P, Se) = 0.322115

-------------------------------

confusion matrix:
[[223   0]
 [ 25   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.08622899651527405
difference in average predicted and observed risk = -0.014577003484725959
number samples = 248
accuracy = 0.899194
precision class 0 = 0.899194
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.719821
AUC of PRC = 0.208435
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[478   3]
 [ 65  17]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.11719799786806107
difference in average predicted and observed risk = -0.028450002131938934
number samples = 563
accuracy = 0.879218
precision class 0 = 0.880295
precision class 1 = 0.85
recall class 0 = 0.993763
recall class 1 = 0.207317
false negative rate = 0.792683
false positive rate = 0.006237
positive prediction rate = 0.035524
AUC of ROC = 0.830054
AUC of PRC = 0.568406
min(+P, Se) = 0.536585

-------------------------------

confusion matrix:
[[653   2]
 [ 74   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09658200293779373
difference in average predicted and observed risk = -0.01104699706220627
number samples = 734
accuracy = 0.896458
precision class 0 = 0.898212
precision class 1 = 0.714286
recall class 0 = 0.996947
recall class 1 = 0.063291
false negative rate = 0.936709
false positive rate = 0.003053
positive prediction rate = 0.009537
AUC of ROC = 0.796579
AUC of PRC = 0.409124
min(+P, Se) = 0.469136

-------------------------------

confusion matrix:
[[4151    6]
 [ 446   25]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09057600051164627
difference in average predicted and observed risk = -0.01119599948835373
number samples = 4628
accuracy = 0.902334
precision class 0 = 0.90298
precision class 1 = 0.806452
recall class 0 = 0.998557
recall class 1 = 0.053079
false negative rate = 0.946921
false positive rate = 0.001443
positive prediction rate = 0.006698
AUC of ROC = 0.785821
AUC of PRC = 0.379011
min(+P, Se) = 0.399577

-------------------------------

==>predicting on validation



confusion matrix:
[[218   0]
 [ 18   1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08632099628448486
difference in average predicted and observed risk = 0.006151996284484859
number samples = 237
accuracy = 0.924051
precision class 0 = 0.923729
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004219
AUC of ROC = 0.850555
AUC of PRC = 0.389323
min(+P, Se) = 0.47619

-------------------------------

confusion matrix:
[[385   0]
 [ 46   1]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.08836399763822556
difference in average predicted and observed risk = -0.02043200236177445
number samples = 432
accuracy = 0.893519
precision class 0 = 0.893271
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.021277
false negative rate = 0.978723
false positive rate = 0.0
positive prediction rate = 0.002315
AUC of ROC = 0.779442
AUC of PRC = 0.416856
min(+P, Se) = 0.425532

-------------------------------

confusion matrix:
[[105   0]
 [ 12   1]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10599300265312195
difference in average predicted and observed risk = -0.004175997346878055
number samples = 118
accuracy = 0.898305
precision class 0 = 0.897436
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.0
positive prediction rate = 0.008475
AUC of ROC = 0.904762
AUC of PRC = 0.622394
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 3  1]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.1152620017528534
difference in average predicted and observed risk = -0.018070998247146614
number samples = 30
accuracy = 0.9
precision class 0 = 0.896552
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.033333
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[300   0]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.0970579981803894
difference in average predicted and observed risk = -0.01798600181961059
number samples = 339
accuracy = 0.887906
precision class 0 = 0.887574
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.0
positive prediction rate = 0.00295
AUC of ROC = 0.793846
AUC of PRC = 0.351835
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[434   0]
 [ 41   3]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.087226003408432
difference in average predicted and observed risk = -0.004823996591568
number samples = 478
accuracy = 0.914226
precision class 0 = 0.913684
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.068182
false negative rate = 0.931818
false positive rate = 0.0
positive prediction rate = 0.006276
AUC of ROC = 0.85023
AUC of PRC = 0.565526
min(+P, Se) = 0.568182

-------------------------------

confusion matrix:
[[388   0]
 [ 38   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08146800100803375
difference in average predicted and observed risk = -0.007733998991966251
number samples = 426
accuracy = 0.910798
precision class 0 = 0.910798
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.833152
AUC of PRC = 0.468904
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[90  0]
 [ 9  3]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.10936799645423889
difference in average predicted and observed risk = -0.00827900354576111
number samples = 102
accuracy = 0.911765
precision class 0 = 0.909091
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.029412
AUC of ROC = 0.932407
AUC of PRC = 0.698268
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.09222699701786041
difference in average predicted and observed risk = 0.0035169970178604154
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.776348
AUC of PRC = 0.231402
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[108   0]
 [ 18   1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10119199752807617
difference in average predicted and observed risk = -0.04841400247192382
number samples = 127
accuracy = 0.858268
precision class 0 = 0.857143
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.007874
AUC of ROC = 0.775341
AUC of PRC = 0.524977
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.11705300211906433
difference in average predicted and observed risk = 0.03810600211906433
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.92381
AUC of PRC = 0.551786
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[734   0]
 [ 79   4]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09130600094795227
difference in average predicted and observed risk = -0.01028499905204773
number samples = 817
accuracy = 0.903305
precision class 0 = 0.902829
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.048193
false negative rate = 0.951807
false positive rate = 0.0
positive prediction rate = 0.004896
AUC of ROC = 0.827271
AUC of PRC = 0.465727
min(+P, Se) = 0.48913

-------------------------------

Epoch 00012: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch12.state
Epoch 13/100
 - 318s - loss: 0.2887 - val_loss: 0.2624

==>predicting on train



confusion matrix:
[[2146    9]
 [ 227   28]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.06840000301599503
difference in average predicted and observed risk = -0.037408996984004975
number samples = 2410
accuracy = 0.902075
precision class 0 = 0.904341
precision class 1 = 0.756757
recall class 0 = 0.995824
recall class 1 = 0.109804
false negative rate = 0.890196
false positive rate = 0.004176
positive prediction rate = 0.015353
AUC of ROC = 0.788945
AUC of PRC = 0.400683
min(+P, Se) = 0.384314

-------------------------------

confusion matrix:
[[1169   10]
 [ 108   10]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.06886599957942963
difference in average predicted and observed risk = -0.022113000420570378
number samples = 1297
accuracy = 0.909021
precision class 0 = 0.915427
precision class 1 = 0.5
recall class 0 = 0.991518
recall class 1 = 0.084746
false negative rate = 0.915254
false positive rate = 0.008482
positive prediction rate = 0.01542
AUC of ROC = 0.803137
AUC of PRC = 0.328594
min(+P, Se) = 0.347458

-------------------------------

confusion matrix:
[[654   2]
 [ 68   6]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.07366099953651428
difference in average predicted and observed risk = -0.02770900046348572
number samples = 730
accuracy = 0.90411
precision class 0 = 0.905817
precision class 1 = 0.75
recall class 0 = 0.996951
recall class 1 = 0.081081
false negative rate = 0.918919
false positive rate = 0.003049
positive prediction rate = 0.010959
AUC of ROC = 0.769343
AUC of PRC = 0.368399
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[166   1]
 [ 16   8]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.07924199849367142
difference in average predicted and observed risk = -0.04641200150632857
number samples = 191
accuracy = 0.910995
precision class 0 = 0.912088
precision class 1 = 0.888889
recall class 0 = 0.994012
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.005988
positive prediction rate = 0.04712
AUC of ROC = 0.858283
AUC of PRC = 0.685766
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2462   12]
 [ 237   18]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.06651200354099274
difference in average predicted and observed risk = -0.02692899645900726
number samples = 2729
accuracy = 0.908758
precision class 0 = 0.91219
precision class 1 = 0.6
recall class 0 = 0.99515
recall class 1 = 0.070588
false negative rate = 0.929412
false positive rate = 0.00485
positive prediction rate = 0.010993
AUC of ROC = 0.779073
AUC of PRC = 0.336326
min(+P, Se) = 0.365759

-------------------------------

confusion matrix:
[[1673   10]
 [ 182   34]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.07454399764537811
difference in average predicted and observed risk = -0.039200002354621885
number samples = 1899
accuracy = 0.898894
precision class 0 = 0.901887
precision class 1 = 0.772727
recall class 0 = 0.994058
recall class 1 = 0.157407
false negative rate = 0.842593
false positive rate = 0.005942
positive prediction rate = 0.02317
AUC of ROC = 0.80969
AUC of PRC = 0.441567
min(+P, Se) = 0.430556

-------------------------------

confusion matrix:
[[545   4]
 [ 72   5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.07793299853801727
difference in average predicted and observed risk = -0.04507000146198273
number samples = 626
accuracy = 0.878594
precision class 0 = 0.883306
precision class 1 = 0.555556
recall class 0 = 0.992714
recall class 1 = 0.064935
false negative rate = 0.935065
false positive rate = 0.007286
positive prediction rate = 0.014377
AUC of ROC = 0.784283
AUC of PRC = 0.37006
min(+P, Se) = 0.402439

-------------------------------

confusion matrix:
[[2246    3]
 [ 193   15]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.059459999203681946
difference in average predicted and observed risk = -0.02519600079631805
number samples = 2457
accuracy = 0.920228
precision class 0 = 0.920869
precision class 1 = 0.833333
recall class 0 = 0.998666
recall class 1 = 0.072115
false negative rate = 0.927885
false positive rate = 0.001334
positive prediction rate = 0.007326
AUC of ROC = 0.77602
AUC of PRC = 0.326401
min(+P, Se) = 0.325359

-------------------------------

confusion matrix:
[[220   3]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.06616699695587158
difference in average predicted and observed risk = -0.034639003044128425
number samples = 248
accuracy = 0.887097
precision class 0 = 0.897959
precision class 1 = 0.0
recall class 0 = 0.986547
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.013453
positive prediction rate = 0.012097
AUC of ROC = 0.74583
AUC of PRC = 0.21906
min(+P, Se) = 0.322581

-------------------------------

confusion matrix:
[[475   6]
 [ 58  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.09912499785423279
difference in average predicted and observed risk = -0.04652300214576721
number samples = 563
accuracy = 0.886323
precision class 0 = 0.891182
precision class 1 = 0.8
recall class 0 = 0.987526
recall class 1 = 0.292683
false negative rate = 0.707317
false positive rate = 0.012474
positive prediction rate = 0.053286
AUC of ROC = 0.838117
AUC of PRC = 0.58346
min(+P, Se) = 0.53012

-------------------------------

confusion matrix:
[[649   6]
 [ 71   8]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.07625900208950043
difference in average predicted and observed risk = -0.031369997910499575
number samples = 734
accuracy = 0.895095
precision class 0 = 0.901389
precision class 1 = 0.571429
recall class 0 = 0.99084
recall class 1 = 0.101266
false negative rate = 0.898734
false positive rate = 0.00916
positive prediction rate = 0.019074
AUC of ROC = 0.799324
AUC of PRC = 0.405585
min(+P, Se) = 0.445783

-------------------------------

confusion matrix:
[[4135   22]
 [ 419   52]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.0698079988360405
difference in average predicted and observed risk = -0.031964001163959505
number samples = 4628
accuracy = 0.90471
precision class 0 = 0.907993
precision class 1 = 0.702703
recall class 0 = 0.994708
recall class 1 = 0.110403
false negative rate = 0.889597
false positive rate = 0.005292
positive prediction rate = 0.01599
AUC of ROC = 0.792897
AUC of PRC = 0.388537
min(+P, Se) = 0.395349

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 17   2]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.06711599975824356
difference in average predicted and observed risk = -0.013053000241756443
number samples = 237
accuracy = 0.919831
precision class 0 = 0.927039
precision class 1 = 0.5
recall class 0 = 0.990826
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.009174
positive prediction rate = 0.016878
AUC of ROC = 0.853452
AUC of PRC = 0.387422
min(+P, Se) = 0.47619

-------------------------------

confusion matrix:
[[385   0]
 [ 45   2]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.06580500304698944
difference in average predicted and observed risk = -0.04299099695301056
number samples = 432
accuracy = 0.895833
precision class 0 = 0.895349
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.042553
false negative rate = 0.957447
false positive rate = 0.0
positive prediction rate = 0.00463
AUC of ROC = 0.785189
AUC of PRC = 0.431436
min(+P, Se) = 0.408163

-------------------------------

confusion matrix:
[[104   1]
 [ 11   2]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.08617199957370758
difference in average predicted and observed risk = -0.023997000426292422
number samples = 118
accuracy = 0.898305
precision class 0 = 0.904348
precision class 1 = 0.666667
recall class 0 = 0.990476
recall class 1 = 0.153846
false negative rate = 0.846154
false positive rate = 0.009524
positive prediction rate = 0.025424
AUC of ROC = 0.913553
AUC of PRC = 0.603176
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.09500499814748764
difference in average predicted and observed risk = -0.03832800185251237
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[298   2]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.0749180018901825
difference in average predicted and observed risk = -0.0401259981098175
number samples = 339
accuracy = 0.882006
precision class 0 = 0.886905
precision class 1 = 0.333333
recall class 0 = 0.993333
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.006667
positive prediction rate = 0.00885
AUC of ROC = 0.807607
AUC of PRC = 0.358465
min(+P, Se) = 0.410256

-------------------------------

confusion matrix:
[[433   1]
 [ 37   7]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.06685300171375275
difference in average predicted and observed risk = -0.02519699828624726
number samples = 478
accuracy = 0.920502
precision class 0 = 0.921277
precision class 1 = 0.875
recall class 0 = 0.997696
recall class 1 = 0.159091
false negative rate = 0.840909
false positive rate = 0.002304
positive prediction rate = 0.016736
AUC of ROC = 0.847664
AUC of PRC = 0.562042
min(+P, Se) = 0.568182

-------------------------------

confusion matrix:
[[388   0]
 [ 36   2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.060426998883485794
difference in average predicted and observed risk = -0.02877500111651421
number samples = 426
accuracy = 0.915493
precision class 0 = 0.915094
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004695
AUC of ROC = 0.837086
AUC of PRC = 0.472479
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[90  0]
 [ 9  3]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.09104300290346146
difference in average predicted and observed risk = -0.026603997096538545
number samples = 102
accuracy = 0.911765
precision class 0 = 0.909091
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.029412
AUC of ROC = 0.937037
AUC of PRC = 0.696756
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.06869599968194962
difference in average predicted and observed risk = -0.02001400031805038
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.801287
AUC of PRC = 0.252892
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[106   2]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.08050499856472015
difference in average predicted and observed risk = -0.06910100143527984
number samples = 127
accuracy = 0.858268
precision class 0 = 0.868852
precision class 1 = 0.6
recall class 0 = 0.981481
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.018519
positive prediction rate = 0.03937
AUC of ROC = 0.781189
AUC of PRC = 0.504763
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.09426700323820114
difference in average predicted and observed risk = 0.015320003238201138
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.904762
AUC of PRC = 0.518849
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[731   3]
 [ 75   8]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.07019899785518646
difference in average predicted and observed risk = -0.03139200214481354
number samples = 817
accuracy = 0.904529
precision class 0 = 0.906948
precision class 1 = 0.727273
recall class 0 = 0.995913
recall class 1 = 0.096386
false negative rate = 0.903614
false positive rate = 0.004087
positive prediction rate = 0.013464
AUC of ROC = 0.8319
AUC of PRC = 0.466953
min(+P, Se) = 0.5

-------------------------------

Epoch 00013: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch13.state
Epoch 14/100
 - 321s - loss: 0.2876 - val_loss: 0.2643

==>predicting on train



confusion matrix:
[[2152    3]
 [ 240   15]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.07615099847316742
difference in average predicted and observed risk = -0.02965800152683258
number samples = 2410
accuracy = 0.89917
precision class 0 = 0.899666
precision class 1 = 0.833333
recall class 0 = 0.998608
recall class 1 = 0.058824
false negative rate = 0.941176
false positive rate = 0.001392
positive prediction rate = 0.007469
AUC of ROC = 0.779056
AUC of PRC = 0.388982
min(+P, Se) = 0.380392

-------------------------------

confusion matrix:
[[1178    1]
 [ 115    3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.07264500111341476
difference in average predicted and observed risk = -0.01833399888658524
number samples = 1297
accuracy = 0.910563
precision class 0 = 0.91106
precision class 1 = 0.75
recall class 0 = 0.999152
recall class 1 = 0.025424
false negative rate = 0.974576
false positive rate = 0.000848
positive prediction rate = 0.003084
AUC of ROC = 0.797839
AUC of PRC = 0.308717
min(+P, Se) = 0.347458

-------------------------------

confusion matrix:
[[656   0]
 [ 73   1]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.0808819979429245
difference in average predicted and observed risk = -0.020488002057075502
number samples = 730
accuracy = 0.9
precision class 0 = 0.899863
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.013514
false negative rate = 0.986486
false positive rate = 0.0
positive prediction rate = 0.00137
AUC of ROC = 0.768128
AUC of PRC = 0.353591
min(+P, Se) = 0.418919

-------------------------------

confusion matrix:
[[167   0]
 [ 21   3]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.0867300033569336
difference in average predicted and observed risk = -0.038923996643066394
number samples = 191
accuracy = 0.890052
precision class 0 = 0.888298
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.125
false negative rate = 0.875
false positive rate = 0.0
positive prediction rate = 0.015707
AUC of ROC = 0.855788
AUC of PRC = 0.667041
min(+P, Se) = 0.708333

-------------------------------

confusion matrix:
[[2472    2]
 [ 248    7]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07290700078010559
difference in average predicted and observed risk = -0.020533999219894405
number samples = 2729
accuracy = 0.908391
precision class 0 = 0.908824
precision class 1 = 0.777778
recall class 0 = 0.999192
recall class 1 = 0.027451
false negative rate = 0.972549
false positive rate = 0.000808
positive prediction rate = 0.003298
AUC of ROC = 0.773657
AUC of PRC = 0.327572
min(+P, Se) = 0.368627

-------------------------------

confusion matrix:
[[1681    2]
 [ 201   15]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.0813010036945343
difference in average predicted and observed risk = -0.032442996305465696
number samples = 1899
accuracy = 0.893102
precision class 0 = 0.893199
precision class 1 = 0.882353
recall class 0 = 0.998812
recall class 1 = 0.069444
false negative rate = 0.930556
false positive rate = 0.001188
positive prediction rate = 0.008952
AUC of ROC = 0.800728
AUC of PRC = 0.432005
min(+P, Se) = 0.430556

-------------------------------

confusion matrix:
[[548   1]
 [ 75   2]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.08414100110530853
difference in average predicted and observed risk = -0.03886199889469147
number samples = 626
accuracy = 0.878594
precision class 0 = 0.879615
precision class 1 = 0.666667
recall class 0 = 0.998178
recall class 1 = 0.025974
false negative rate = 0.974026
false positive rate = 0.001821
positive prediction rate = 0.004792
AUC of ROC = 0.775743
AUC of PRC = 0.36183
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[2249    0]
 [ 206    2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.06689900159835815
difference in average predicted and observed risk = -0.01775699840164184
number samples = 2457
accuracy = 0.916158
precision class 0 = 0.91609
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.009615
false negative rate = 0.990385
false positive rate = 0.0
positive prediction rate = 0.000814
AUC of ROC = 0.771133
AUC of PRC = 0.314093
min(+P, Se) = 0.3125

-------------------------------

confusion matrix:
[[223   0]
 [ 25   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.07330399751663208
difference in average predicted and observed risk = -0.027502002483367927
number samples = 248
accuracy = 0.899194
precision class 0 = 0.899194
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.718565
AUC of PRC = 0.206739
min(+P, Se) = 0.322581

-------------------------------

confusion matrix:
[[480   1]
 [ 68  14]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.1011900007724762
difference in average predicted and observed risk = -0.0444579992275238
number samples = 563
accuracy = 0.877442
precision class 0 = 0.875912
precision class 1 = 0.933333
recall class 0 = 0.997921
recall class 1 = 0.170732
false negative rate = 0.829268
false positive rate = 0.002079
positive prediction rate = 0.026643
AUC of ROC = 0.828837
AUC of PRC = 0.564067
min(+P, Se) = 0.536585

-------------------------------

confusion matrix:
[[653   2]
 [ 75   4]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.08332599699497223
difference in average predicted and observed risk = -0.024303003005027773
number samples = 734
accuracy = 0.895095
precision class 0 = 0.896978
precision class 1 = 0.666667
recall class 0 = 0.996947
recall class 1 = 0.050633
false negative rate = 0.949367
false positive rate = 0.003053
positive prediction rate = 0.008174
AUC of ROC = 0.795014
AUC of PRC = 0.419299
min(+P, Se) = 0.463415

-------------------------------

confusion matrix:
[[4153    4]
 [ 449   22]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.07635100185871124
difference in average predicted and observed risk = -0.02542099814128876
number samples = 4628
accuracy = 0.902118
precision class 0 = 0.902434
precision class 1 = 0.846154
recall class 0 = 0.999038
recall class 1 = 0.046709
false negative rate = 0.953291
false positive rate = 0.000962
positive prediction rate = 0.005618
AUC of ROC = 0.78599
AUC of PRC = 0.378332
min(+P, Se) = 0.39916

-------------------------------

==>predicting on validation



confusion matrix:
[[218   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.07077399641275406
difference in average predicted and observed risk = -0.009395003587245945
number samples = 237
accuracy = 0.919831
precision class 0 = 0.919831
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.839932
AUC of PRC = 0.387013
min(+P, Se) = 0.47619

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.07351099699735641
difference in average predicted and observed risk = -0.03528500300264359
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.784968
AUC of PRC = 0.433182
min(+P, Se) = 0.446809

-------------------------------

confusion matrix:
[[105   0]
 [ 12   1]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.09306599944829941
difference in average predicted and observed risk = -0.017103000551700595
number samples = 118
accuracy = 0.898305
precision class 0 = 0.897436
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.0
positive prediction rate = 0.008475
AUC of ROC = 0.909158
AUC of PRC = 0.635371
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 3  1]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.10416000336408615
difference in average predicted and observed risk = -0.029172996635913856
number samples = 30
accuracy = 0.9
precision class 0 = 0.896552
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.033333
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[300   0]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.0809129998087883
difference in average predicted and observed risk = -0.034131000191211694
number samples = 339
accuracy = 0.887906
precision class 0 = 0.887574
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.0
positive prediction rate = 0.00295
AUC of ROC = 0.789744
AUC of PRC = 0.355192
min(+P, Se) = 0.413043

-------------------------------

confusion matrix:
[[434   0]
 [ 43   1]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.07365600019693375
difference in average predicted and observed risk = -0.01839399980306626
number samples = 478
accuracy = 0.910042
precision class 0 = 0.909853
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.022727
false negative rate = 0.977273
false positive rate = 0.0
positive prediction rate = 0.002092
AUC of ROC = 0.854472
AUC of PRC = 0.579288
min(+P, Se) = 0.590909

-------------------------------

confusion matrix:
[[388   0]
 [ 38   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.0670119971036911
difference in average predicted and observed risk = -0.022190002896308902
number samples = 426
accuracy = 0.910798
precision class 0 = 0.910798
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.831593
AUC of PRC = 0.460931
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[90  0]
 [11  1]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.09374599903821945
difference in average predicted and observed risk = -0.02390100096178055
number samples = 102
accuracy = 0.892157
precision class 0 = 0.891089
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.009804
AUC of ROC = 0.941667
AUC of PRC = 0.727582
min(+P, Se) = 0.647059

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.0772780030965805
difference in average predicted and observed risk = -0.011431996903419492
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.775543
AUC of PRC = 0.238987
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[108   0]
 [ 18   1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.08853600174188614
difference in average predicted and observed risk = -0.06106999825811385
number samples = 127
accuracy = 0.858268
precision class 0 = 0.857143
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.007874
AUC of ROC = 0.780214
AUC of PRC = 0.540804
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.09740500152111053
difference in average predicted and observed risk = 0.01845800152111053
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.92381
AUC of PRC = 0.551786
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[734   0]
 [ 81   2]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.07666700333356857
difference in average predicted and observed risk = -0.024923996666431428
number samples = 817
accuracy = 0.900857
precision class 0 = 0.900613
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.024096
false negative rate = 0.975904
false positive rate = 0.0
positive prediction rate = 0.002448
AUC of ROC = 0.827599
AUC of PRC = 0.47566
min(+P, Se) = 0.511364

-------------------------------

Epoch 00014: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch14.state
Epoch 15/100
 - 319s - loss: 0.2868 - val_loss: 0.2579

==>predicting on train



confusion matrix:
[[2132   23]
 [ 208   47]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.10264100134372711
difference in average predicted and observed risk = -0.0031679986562728885
number samples = 2410
accuracy = 0.904149
precision class 0 = 0.911111
precision class 1 = 0.671429
recall class 0 = 0.989327
recall class 1 = 0.184314
false negative rate = 0.815686
false positive rate = 0.010673
positive prediction rate = 0.029046
AUC of ROC = 0.774383
AUC of PRC = 0.390775
min(+P, Se) = 0.396887

-------------------------------

confusion matrix:
[[1161   18]
 [  94   24]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.09959100186824799
difference in average predicted and observed risk = 0.008612001868247982
number samples = 1297
accuracy = 0.913647
precision class 0 = 0.9251
precision class 1 = 0.571429
recall class 0 = 0.984733
recall class 1 = 0.20339
false negative rate = 0.79661
false positive rate = 0.015267
positive prediction rate = 0.032382
AUC of ROC = 0.796466
AUC of PRC = 0.332296
min(+P, Se) = 0.352941

-------------------------------

confusion matrix:
[[642  14]
 [ 60  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.10870400071144104
difference in average predicted and observed risk = 0.007334000711441038
number samples = 730
accuracy = 0.89863
precision class 0 = 0.91453
precision class 1 = 0.5
recall class 0 = 0.978659
recall class 1 = 0.189189
false negative rate = 0.810811
false positive rate = 0.021341
positive prediction rate = 0.038356
AUC of ROC = 0.763617
AUC of PRC = 0.372506
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[166   1]
 [ 15   9]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.11532700061798096
difference in average predicted and observed risk = -0.010326999382019031
number samples = 191
accuracy = 0.91623
precision class 0 = 0.917127
precision class 1 = 0.9
recall class 0 = 0.994012
recall class 1 = 0.375
false negative rate = 0.625
false positive rate = 0.005988
positive prediction rate = 0.052356
AUC of ROC = 0.86502
AUC of PRC = 0.678283
min(+P, Se) = 0.64

-------------------------------

confusion matrix:
[[2446   28]
 [ 210   45]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.09772399812936783
difference in average predicted and observed risk = 0.004282998129367832
number samples = 2729
accuracy = 0.912789
precision class 0 = 0.920934
precision class 1 = 0.616438
recall class 0 = 0.988682
recall class 1 = 0.176471
false negative rate = 0.823529
false positive rate = 0.011318
positive prediction rate = 0.02675
AUC of ROC = 0.767464
AUC of PRC = 0.339822
min(+P, Se) = 0.369231

-------------------------------

confusion matrix:
[[1655   28]
 [ 167   49]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.1112309992313385
difference in average predicted and observed risk = -0.002513000768661497
number samples = 1899
accuracy = 0.897314
precision class 0 = 0.908342
precision class 1 = 0.636364
recall class 0 = 0.983363
recall class 1 = 0.226852
false negative rate = 0.773148
false positive rate = 0.016637
positive prediction rate = 0.040548
AUC of ROC = 0.803212
AUC of PRC = 0.439261
min(+P, Se) = 0.430556

-------------------------------

confusion matrix:
[[537  12]
 [ 60  17]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.1187950000166893
difference in average predicted and observed risk = -0.004207999983310701
number samples = 626
accuracy = 0.884984
precision class 0 = 0.899498
precision class 1 = 0.586207
recall class 0 = 0.978142
recall class 1 = 0.220779
false negative rate = 0.779221
false positive rate = 0.021858
positive prediction rate = 0.046326
AUC of ROC = 0.771769
AUC of PRC = 0.380857
min(+P, Se) = 0.384615

-------------------------------

confusion matrix:
[[2235   14]
 [ 180   28]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.0891140028834343
difference in average predicted and observed risk = 0.0044580028834343005
number samples = 2457
accuracy = 0.921042
precision class 0 = 0.925466
precision class 1 = 0.666667
recall class 0 = 0.993775
recall class 1 = 0.134615
false negative rate = 0.865385
false positive rate = 0.006225
positive prediction rate = 0.017094
AUC of ROC = 0.772091
AUC of PRC = 0.31539
min(+P, Se) = 0.330189

-------------------------------

confusion matrix:
[[217   6]
 [ 23   2]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.09547299891710281
difference in average predicted and observed risk = -0.005333001082897193
number samples = 248
accuracy = 0.883065
precision class 0 = 0.904167
precision class 1 = 0.25
recall class 0 = 0.973094
recall class 1 = 0.08
false negative rate = 0.92
false positive rate = 0.026906
positive prediction rate = 0.032258
AUC of ROC = 0.713722
AUC of PRC = 0.209487
min(+P, Se) = 0.307692

-------------------------------

confusion matrix:
[[469  12]
 [ 53  29]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.13877299427986145
difference in average predicted and observed risk = -0.0068750057201385495
number samples = 563
accuracy = 0.884547
precision class 0 = 0.898467
precision class 1 = 0.707317
recall class 0 = 0.975052
recall class 1 = 0.353659
false negative rate = 0.646341
false positive rate = 0.024948
positive prediction rate = 0.072824
AUC of ROC = 0.820395
AUC of PRC = 0.58599
min(+P, Se) = 0.52439

-------------------------------

confusion matrix:
[[643  12]
 [ 61  18]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.1127920001745224
difference in average predicted and observed risk = 0.0051630001745223975
number samples = 734
accuracy = 0.900545
precision class 0 = 0.913352
precision class 1 = 0.6
recall class 0 = 0.981679
recall class 1 = 0.227848
false negative rate = 0.772152
false positive rate = 0.018321
positive prediction rate = 0.040872
AUC of ROC = 0.800928
AUC of PRC = 0.395388
min(+P, Se) = 0.445783

-------------------------------

confusion matrix:
[[4101   56]
 [ 377   94]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.10326600074768066
difference in average predicted and observed risk = 0.0014940007476806627
number samples = 4628
accuracy = 0.906439
precision class 0 = 0.915811
precision class 1 = 0.626667
recall class 0 = 0.986529
recall class 1 = 0.199575
false negative rate = 0.800425
false positive rate = 0.013471
positive prediction rate = 0.032411
AUC of ROC = 0.783916
AUC of PRC = 0.387178
min(+P, Se) = 0.391949

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.09648299962282181
difference in average predicted and observed risk = 0.016313999622821804
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.853452
AUC of PRC = 0.38341
min(+P, Se) = 0.47619

-------------------------------

confusion matrix:
[[384   1]
 [ 42   5]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.10246200114488602
difference in average predicted and observed risk = -0.006333998855113987
number samples = 432
accuracy = 0.900463
precision class 0 = 0.901408
precision class 1 = 0.833333
recall class 0 = 0.997403
recall class 1 = 0.106383
false negative rate = 0.893617
false positive rate = 0.002597
positive prediction rate = 0.013889
AUC of ROC = 0.768334
AUC of PRC = 0.423319
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[104   1]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.12400499731302261
difference in average predicted and observed risk = 0.01383599731302261
number samples = 118
accuracy = 0.923729
precision class 0 = 0.928571
precision class 1 = 0.833333
recall class 0 = 0.990476
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.009524
positive prediction rate = 0.050847
AUC of ROC = 0.889377
AUC of PRC = 0.590733
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.1323930025100708
difference in average predicted and observed risk = -0.0009399974899292063
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[296   4]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.11413200199604034
difference in average predicted and observed risk = -0.0009119980039596493
number samples = 339
accuracy = 0.882006
precision class 0 = 0.891566
precision class 1 = 0.428571
recall class 0 = 0.986667
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.013333
positive prediction rate = 0.020649
AUC of ROC = 0.790513
AUC of PRC = 0.350225
min(+P, Se) = 0.425

-------------------------------

confusion matrix:
[[433   1]
 [ 31  13]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.09841799736022949
difference in average predicted and observed risk = 0.006367997360229485
number samples = 478
accuracy = 0.933054
precision class 0 = 0.93319
precision class 1 = 0.928571
recall class 0 = 0.997696
recall class 1 = 0.295455
false negative rate = 0.704545
false positive rate = 0.002304
positive prediction rate = 0.029289
AUC of ROC = 0.838343
AUC of PRC = 0.567458
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 32   6]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.09092999994754791
difference in average predicted and observed risk = 0.001727999947547909
number samples = 426
accuracy = 0.924883
precision class 0 = 0.92381
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.0
positive prediction rate = 0.014085
AUC of ROC = 0.819249
AUC of PRC = 0.453168
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[89  1]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.1297920048236847
difference in average predicted and observed risk = 0.01214500482368469
number samples = 102
accuracy = 0.911765
precision class 0 = 0.917526
precision class 1 = 0.8
recall class 0 = 0.988889
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.011111
positive prediction rate = 0.04902
AUC of ROC = 0.931481
AUC of PRC = 0.676198
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.11092299968004227
difference in average predicted and observed risk = 0.02221299968004227
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.761866
AUC of PRC = 0.227876
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[106   2]
 [ 14   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.11686799675226212
difference in average predicted and observed risk = -0.032738003247737874
number samples = 127
accuracy = 0.874016
precision class 0 = 0.883333
precision class 1 = 0.714286
recall class 0 = 0.981481
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.018519
positive prediction rate = 0.055118
AUC of ROC = 0.77193
AUC of PRC = 0.462082
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[34  1]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.13586300611495972
difference in average predicted and observed risk = 0.056916006114959714
number samples = 38
accuracy = 0.921053
precision class 0 = 0.944444
precision class 1 = 0.5
recall class 0 = 0.971429
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.028571
positive prediction rate = 0.052632
AUC of ROC = 0.92381
AUC of PRC = 0.551786
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[729   5]
 [ 67  16]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.10493800044059753
difference in average predicted and observed risk = 0.0033470004405975334
number samples = 817
accuracy = 0.911873
precision class 0 = 0.915829
precision class 1 = 0.761905
recall class 0 = 0.993188
recall class 1 = 0.192771
false negative rate = 0.807229
false positive rate = 0.006812
positive prediction rate = 0.025704
AUC of ROC = 0.819294
AUC of PRC = 0.451819
min(+P, Se) = 0.46988

-------------------------------

Epoch 00015: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch15.state
Epoch 16/100
 - 319s - loss: 0.2886 - val_loss: 0.2578

==>predicting on train



confusion matrix:
[[2133   22]
 [ 211   44]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.08031000196933746
difference in average predicted and observed risk = -0.025498998030662537
number samples = 2410
accuracy = 0.903319
precision class 0 = 0.909983
precision class 1 = 0.666667
recall class 0 = 0.989791
recall class 1 = 0.172549
false negative rate = 0.827451
false positive rate = 0.010209
positive prediction rate = 0.027386
AUC of ROC = 0.778516
AUC of PRC = 0.394394
min(+P, Se) = 0.396078

-------------------------------

confusion matrix:
[[1161   18]
 [  96   22]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08049000054597855
difference in average predicted and observed risk = -0.010488999454021458
number samples = 1297
accuracy = 0.912105
precision class 0 = 0.923628
precision class 1 = 0.55
recall class 0 = 0.984733
recall class 1 = 0.186441
false negative rate = 0.813559
false positive rate = 0.015267
positive prediction rate = 0.03084
AUC of ROC = 0.801951
AUC of PRC = 0.321797
min(+P, Se) = 0.355932

-------------------------------

confusion matrix:
[[643  13]
 [ 60  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.08889900147914886
difference in average predicted and observed risk = -0.012470998520851137
number samples = 730
accuracy = 0.9
precision class 0 = 0.914652
precision class 1 = 0.518519
recall class 0 = 0.980183
recall class 1 = 0.189189
false negative rate = 0.810811
false positive rate = 0.019817
positive prediction rate = 0.036986
AUC of ROC = 0.766377
AUC of PRC = 0.370331
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[166   1]
 [ 16   8]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.09381300210952759
difference in average predicted and observed risk = -0.0318409978904724
number samples = 191
accuracy = 0.910995
precision class 0 = 0.912088
precision class 1 = 0.888889
recall class 0 = 0.994012
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.005988
positive prediction rate = 0.04712
AUC of ROC = 0.86477
AUC of PRC = 0.672713
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2448   26]
 [ 212   43]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07748600095510483
difference in average predicted and observed risk = -0.01595499904489517
number samples = 2729
accuracy = 0.912789
precision class 0 = 0.920301
precision class 1 = 0.623188
recall class 0 = 0.989491
recall class 1 = 0.168627
false negative rate = 0.831373
false positive rate = 0.010509
positive prediction rate = 0.025284
AUC of ROC = 0.77385
AUC of PRC = 0.341649
min(+P, Se) = 0.368627

-------------------------------

confusion matrix:
[[1655   28]
 [ 171   45]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.08915200084447861
difference in average predicted and observed risk = -0.02459199915552139
number samples = 1899
accuracy = 0.895208
precision class 0 = 0.906353
precision class 1 = 0.616438
recall class 0 = 0.983363
recall class 1 = 0.208333
false negative rate = 0.791667
false positive rate = 0.016637
positive prediction rate = 0.038441
AUC of ROC = 0.802395
AUC of PRC = 0.442554
min(+P, Se) = 0.4329

-------------------------------

confusion matrix:
[[537  12]
 [ 60  17]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.09654700011014938
difference in average predicted and observed risk = -0.026455999889850618
number samples = 626
accuracy = 0.884984
precision class 0 = 0.899498
precision class 1 = 0.586207
recall class 0 = 0.978142
recall class 1 = 0.220779
false negative rate = 0.779221
false positive rate = 0.021858
positive prediction rate = 0.046326
AUC of ROC = 0.774773
AUC of PRC = 0.376365
min(+P, Se) = 0.411765

-------------------------------

confusion matrix:
[[2236   13]
 [ 184   24]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.06793799996376038
difference in average predicted and observed risk = -0.01671800003623962
number samples = 2457
accuracy = 0.919821
precision class 0 = 0.923967
precision class 1 = 0.648649
recall class 0 = 0.99422
recall class 1 = 0.115385
false negative rate = 0.884615
false positive rate = 0.00578
positive prediction rate = 0.015059
AUC of ROC = 0.77472
AUC of PRC = 0.318977
min(+P, Se) = 0.326923

-------------------------------

confusion matrix:
[[217   6]
 [ 23   2]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.07593999803066254
difference in average predicted and observed risk = -0.02486600196933747
number samples = 248
accuracy = 0.883065
precision class 0 = 0.904167
precision class 1 = 0.25
recall class 0 = 0.973094
recall class 1 = 0.08
false negative rate = 0.92
false positive rate = 0.026906
positive prediction rate = 0.032258
AUC of ROC = 0.722152
AUC of PRC = 0.207646
min(+P, Se) = 0.307692

-------------------------------

confusion matrix:
[[469  12]
 [ 53  29]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12106800079345703
difference in average predicted and observed risk = -0.02457999920654297
number samples = 563
accuracy = 0.884547
precision class 0 = 0.898467
precision class 1 = 0.707317
recall class 0 = 0.975052
recall class 1 = 0.353659
false negative rate = 0.646341
false positive rate = 0.024948
positive prediction rate = 0.072824
AUC of ROC = 0.824299
AUC of PRC = 0.591194
min(+P, Se) = 0.52439

-------------------------------

confusion matrix:
[[644  11]
 [ 63  16]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09046600013971329
difference in average predicted and observed risk = -0.017162999860286715
number samples = 734
accuracy = 0.899183
precision class 0 = 0.910891
precision class 1 = 0.592593
recall class 0 = 0.983206
recall class 1 = 0.202532
false negative rate = 0.797468
false positive rate = 0.016794
positive prediction rate = 0.036785
AUC of ROC = 0.801623
AUC of PRC = 0.395095
min(+P, Se) = 0.45122

-------------------------------

confusion matrix:
[[4103   54]
 [ 383   88]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08227299898862839
difference in average predicted and observed risk = -0.019499001011371614
number samples = 4628
accuracy = 0.905575
precision class 0 = 0.914623
precision class 1 = 0.619718
recall class 0 = 0.98701
recall class 1 = 0.186837
false negative rate = 0.813163
false positive rate = 0.01299
positive prediction rate = 0.030683
AUC of ROC = 0.786728
AUC of PRC = 0.386758
min(+P, Se) = 0.402516

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.0774340033531189
difference in average predicted and observed risk = -0.0027349966468811077
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.837035
AUC of PRC = 0.374464
min(+P, Se) = 0.47619

-------------------------------

confusion matrix:
[[385   0]
 [ 43   4]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.07760600000619888
difference in average predicted and observed risk = -0.03118999999380112
number samples = 432
accuracy = 0.900463
precision class 0 = 0.899533
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.085106
false negative rate = 0.914894
false positive rate = 0.0
positive prediction rate = 0.009259
AUC of ROC = 0.775131
AUC of PRC = 0.429239
min(+P, Se) = 0.415094

-------------------------------

confusion matrix:
[[104   1]
 [  9   4]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10466799885034561
difference in average predicted and observed risk = -0.0055010011496543915
number samples = 118
accuracy = 0.915254
precision class 0 = 0.920354
precision class 1 = 0.8
recall class 0 = 0.990476
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.009524
positive prediction rate = 0.042373
AUC of ROC = 0.89304
AUC of PRC = 0.578737
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11078999936580658
difference in average predicted and observed risk = -0.022543000634193427
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[297   3]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.08993600308895111
difference in average predicted and observed risk = -0.025107996911048883
number samples = 339
accuracy = 0.884956
precision class 0 = 0.891892
precision class 1 = 0.5
recall class 0 = 0.99
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.01
positive prediction rate = 0.017699
AUC of ROC = 0.779915
AUC of PRC = 0.353283
min(+P, Se) = 0.425

-------------------------------

confusion matrix:
[[433   1]
 [ 33  11]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.07753899693489075
difference in average predicted and observed risk = -0.01451100306510926
number samples = 478
accuracy = 0.92887
precision class 0 = 0.929185
precision class 1 = 0.916667
recall class 0 = 0.997696
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.002304
positive prediction rate = 0.025105
AUC of ROC = 0.846355
AUC of PRC = 0.563661
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[388   0]
 [ 33   5]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.06867799907922745
difference in average predicted and observed risk = -0.020524000920772556
number samples = 426
accuracy = 0.922535
precision class 0 = 0.921615
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.131579
false negative rate = 0.868421
false positive rate = 0.0
positive prediction rate = 0.011737
AUC of ROC = 0.824607
AUC of PRC = 0.459972
min(+P, Se) = 0.447368

-------------------------------

confusion matrix:
[[89  1]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.11007999628782272
difference in average predicted and observed risk = -0.007567003712177278
number samples = 102
accuracy = 0.911765
precision class 0 = 0.917526
precision class 1 = 0.8
recall class 0 = 0.988889
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.011111
positive prediction rate = 0.04902
AUC of ROC = 0.92963
AUC of PRC = 0.693891
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.08663800358772278
difference in average predicted and observed risk = -0.002071996412277219
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.766693
AUC of PRC = 0.244192
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[106   2]
 [ 15   4]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09508900344371796
difference in average predicted and observed risk = -0.05451699655628203
number samples = 127
accuracy = 0.866142
precision class 0 = 0.876033
precision class 1 = 0.666667
recall class 0 = 0.981481
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.018519
positive prediction rate = 0.047244
AUC of ROC = 0.773392
AUC of PRC = 0.461518
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.11177899688482285
difference in average predicted and observed risk = 0.03283199688482284
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.92381
AUC of PRC = 0.551786
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[730   4]
 [ 69  14]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.08268299698829651
difference in average predicted and observed risk = -0.018908003011703492
number samples = 817
accuracy = 0.910649
precision class 0 = 0.913642
precision class 1 = 0.777778
recall class 0 = 0.99455
recall class 1 = 0.168675
false negative rate = 0.831325
false positive rate = 0.00545
positive prediction rate = 0.022032
AUC of ROC = 0.81954
AUC of PRC = 0.456956
min(+P, Se) = 0.488889

-------------------------------

Epoch 00016: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch16.state
Epoch 17/100
 - 316s - loss: 0.2866 - val_loss: 0.2637

==>predicting on train



confusion matrix:
[[2132   23]
 [ 209   46]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.07075899839401245
difference in average predicted and observed risk = -0.03505000160598755
number samples = 2410
accuracy = 0.903734
precision class 0 = 0.910722
precision class 1 = 0.666667
recall class 0 = 0.989327
recall class 1 = 0.180392
false negative rate = 0.819608
false positive rate = 0.010673
positive prediction rate = 0.028631
AUC of ROC = 0.789047
AUC of PRC = 0.399563
min(+P, Se) = 0.398438

-------------------------------

confusion matrix:
[[1159   20]
 [  94   24]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.07215400040149689
difference in average predicted and observed risk = -0.018824999598503117
number samples = 1297
accuracy = 0.912105
precision class 0 = 0.92498
precision class 1 = 0.545455
recall class 0 = 0.983036
recall class 1 = 0.20339
false negative rate = 0.79661
false positive rate = 0.016964
positive prediction rate = 0.033924
AUC of ROC = 0.805092
AUC of PRC = 0.324446
min(+P, Se) = 0.358333

-------------------------------

confusion matrix:
[[643  13]
 [ 60  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.08058299869298935
difference in average predicted and observed risk = -0.020787001307010652
number samples = 730
accuracy = 0.9
precision class 0 = 0.914652
precision class 1 = 0.518519
recall class 0 = 0.980183
recall class 1 = 0.189189
false negative rate = 0.810811
false positive rate = 0.019817
positive prediction rate = 0.036986
AUC of ROC = 0.76716
AUC of PRC = 0.361227
min(+P, Se) = 0.426667

-------------------------------

confusion matrix:
[[166   1]
 [ 15   9]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.08552400022745132
difference in average predicted and observed risk = -0.04012999977254866
number samples = 191
accuracy = 0.91623
precision class 0 = 0.917127
precision class 1 = 0.9
recall class 0 = 0.994012
recall class 1 = 0.375
false negative rate = 0.625
false positive rate = 0.005988
positive prediction rate = 0.052356
AUC of ROC = 0.878743
AUC of PRC = 0.691585
min(+P, Se) = 0.68

-------------------------------

confusion matrix:
[[2444   30]
 [ 208   47]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.06949199736118317
difference in average predicted and observed risk = -0.02394900263881683
number samples = 2729
accuracy = 0.912789
precision class 0 = 0.921569
precision class 1 = 0.61039
recall class 0 = 0.987874
recall class 1 = 0.184314
false negative rate = 0.815686
false positive rate = 0.012126
positive prediction rate = 0.028215
AUC of ROC = 0.781037
AUC of PRC = 0.346894
min(+P, Se) = 0.368627

-------------------------------

confusion matrix:
[[1656   27]
 [ 170   46]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.07879500091075897
difference in average predicted and observed risk = -0.034948999089241026
number samples = 1899
accuracy = 0.896261
precision class 0 = 0.9069
precision class 1 = 0.630137
recall class 0 = 0.983957
recall class 1 = 0.212963
false negative rate = 0.787037
false positive rate = 0.016043
positive prediction rate = 0.038441
AUC of ROC = 0.809308
AUC of PRC = 0.442507
min(+P, Se) = 0.430493

-------------------------------

confusion matrix:
[[539  10]
 [ 61  16]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.08409799635410309
difference in average predicted and observed risk = -0.03890500364589691
number samples = 626
accuracy = 0.886581
precision class 0 = 0.898333
precision class 1 = 0.615385
recall class 0 = 0.981785
recall class 1 = 0.207792
false negative rate = 0.792208
false positive rate = 0.018215
positive prediction rate = 0.041534
AUC of ROC = 0.788115
AUC of PRC = 0.383687
min(+P, Se) = 0.415584

-------------------------------

confusion matrix:
[[2233   16]
 [ 182   26]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.059553999453783035
difference in average predicted and observed risk = -0.02510200054621696
number samples = 2457
accuracy = 0.919414
precision class 0 = 0.924638
precision class 1 = 0.619048
recall class 0 = 0.992886
recall class 1 = 0.125
false negative rate = 0.875
false positive rate = 0.007114
positive prediction rate = 0.017094
AUC of ROC = 0.779881
AUC of PRC = 0.326359
min(+P, Se) = 0.328767

-------------------------------

confusion matrix:
[[216   7]
 [ 22   3]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.07100199908018112
difference in average predicted and observed risk = -0.029804000919818885
number samples = 248
accuracy = 0.883065
precision class 0 = 0.907563
precision class 1 = 0.3
recall class 0 = 0.96861
recall class 1 = 0.12
false negative rate = 0.88
false positive rate = 0.03139
positive prediction rate = 0.040323
AUC of ROC = 0.744395
AUC of PRC = 0.216985
min(+P, Se) = 0.307692

-------------------------------

confusion matrix:
[[469  12]
 [ 52  30]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.10990600287914276
difference in average predicted and observed risk = -0.03574199712085724
number samples = 563
accuracy = 0.886323
precision class 0 = 0.900192
precision class 1 = 0.714286
recall class 0 = 0.975052
recall class 1 = 0.365854
false negative rate = 0.634146
false positive rate = 0.024948
positive prediction rate = 0.0746
AUC of ROC = 0.830942
AUC of PRC = 0.596149
min(+P, Se) = 0.536585

-------------------------------

confusion matrix:
[[643  12]
 [ 61  18]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.08286000043153763
difference in average predicted and observed risk = -0.024768999568462374
number samples = 734
accuracy = 0.900545
precision class 0 = 0.913352
precision class 1 = 0.6
recall class 0 = 0.981679
recall class 1 = 0.227848
false negative rate = 0.772152
false positive rate = 0.018321
positive prediction rate = 0.040872
AUC of ROC = 0.806977
AUC of PRC = 0.40528
min(+P, Se) = 0.443038

-------------------------------

confusion matrix:
[[4100   57]
 [ 378   93]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.07330899685621262
difference in average predicted and observed risk = -0.028463003143787385
number samples = 4628
accuracy = 0.906007
precision class 0 = 0.915587
precision class 1 = 0.62
recall class 0 = 0.986288
recall class 1 = 0.197452
false negative rate = 0.802548
false positive rate = 0.013712
positive prediction rate = 0.032411
AUC of ROC = 0.793992
AUC of PRC = 0.390458
min(+P, Se) = 0.39749

-------------------------------

==>predicting on validation



confusion matrix:
[[214   4]
 [ 14   5]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.07101000100374222
difference in average predicted and observed risk = -0.009158998996257786
number samples = 237
accuracy = 0.924051
precision class 0 = 0.938596
precision class 1 = 0.555556
recall class 0 = 0.981651
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.018349
positive prediction rate = 0.037975
AUC of ROC = 0.858522
AUC of PRC = 0.396303
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[385   0]
 [ 41   6]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.06673800200223923
difference in average predicted and observed risk = -0.042057997997760777
number samples = 432
accuracy = 0.905093
precision class 0 = 0.903756
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.12766
false negative rate = 0.87234
false positive rate = 0.0
positive prediction rate = 0.013889
AUC of ROC = 0.77701
AUC of PRC = 0.418812
min(+P, Se) = 0.382979

-------------------------------

confusion matrix:
[[103   2]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.096219003200531
difference in average predicted and observed risk = -0.013949996799468997
number samples = 118
accuracy = 0.915254
precision class 0 = 0.927928
precision class 1 = 0.714286
recall class 0 = 0.980952
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.019048
positive prediction rate = 0.059322
AUC of ROC = 0.897436
AUC of PRC = 0.588595
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.09896399825811386
difference in average predicted and observed risk = -0.034369001741886146
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[297   3]
 [ 34   5]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.07943800091743469
difference in average predicted and observed risk = -0.0356059990825653
number samples = 339
accuracy = 0.890855
precision class 0 = 0.897281
precision class 1 = 0.625
recall class 0 = 0.99
recall class 1 = 0.128205
false negative rate = 0.871795
false positive rate = 0.01
positive prediction rate = 0.023599
AUC of ROC = 0.788376
AUC of PRC = 0.349001
min(+P, Se) = 0.414634

-------------------------------

confusion matrix:
[[431   3]
 [ 31  13]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.06915000081062317
difference in average predicted and observed risk = -0.022899999189376838
number samples = 478
accuracy = 0.92887
precision class 0 = 0.9329
precision class 1 = 0.8125
recall class 0 = 0.993088
recall class 1 = 0.295455
false negative rate = 0.704545
false positive rate = 0.006912
positive prediction rate = 0.033473
AUC of ROC = 0.854158
AUC of PRC = 0.563864
min(+P, Se) = 0.568182

-------------------------------

confusion matrix:
[[387   1]
 [ 32   6]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.061030998826026917
difference in average predicted and observed risk = -0.028171001173973087
number samples = 426
accuracy = 0.922535
precision class 0 = 0.923628
precision class 1 = 0.857143
recall class 0 = 0.997423
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.002577
positive prediction rate = 0.016432
AUC of ROC = 0.833152
AUC of PRC = 0.450434
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[88  2]
 [ 7  5]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.09865400195121765
difference in average predicted and observed risk = -0.01899299804878235
number samples = 102
accuracy = 0.911765
precision class 0 = 0.926316
precision class 1 = 0.714286
recall class 0 = 0.977778
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.022222
positive prediction rate = 0.068627
AUC of ROC = 0.933333
AUC of PRC = 0.709902
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.07250600308179855
difference in average predicted and observed risk = -0.016203996918201444
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.774739
AUC of PRC = 0.231258
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[106   2]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.088127002120018
difference in average predicted and observed risk = -0.061478997879981984
number samples = 127
accuracy = 0.88189
precision class 0 = 0.890756
precision class 1 = 0.75
recall class 0 = 0.981481
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.018519
positive prediction rate = 0.062992
AUC of ROC = 0.782651
AUC of PRC = 0.492173
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.09837999939918518
difference in average predicted and observed risk = 0.019432999399185177
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.92381
AUC of PRC = 0.549206
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[728   6]
 [ 65  18]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.0734189972281456
difference in average predicted and observed risk = -0.0281720027718544
number samples = 817
accuracy = 0.913097
precision class 0 = 0.918033
precision class 1 = 0.75
recall class 0 = 0.991826
recall class 1 = 0.216867
false negative rate = 0.783133
false positive rate = 0.008174
positive prediction rate = 0.029376
AUC of ROC = 0.82714
AUC of PRC = 0.459999
min(+P, Se) = 0.493976

-------------------------------

Epoch 00017: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch17.state
Epoch 18/100
 - 319s - loss: 0.2901 - val_loss: 0.2559

==>predicting on train



confusion matrix:
[[2135   20]
 [ 212   43]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.10652200132608414
difference in average predicted and observed risk = 0.0007130013260841367
number samples = 2410
accuracy = 0.903734
precision class 0 = 0.909672
precision class 1 = 0.68254
recall class 0 = 0.990719
recall class 1 = 0.168627
false negative rate = 0.831373
false positive rate = 0.009281
positive prediction rate = 0.026141
AUC of ROC = 0.79356
AUC of PRC = 0.402393
min(+P, Se) = 0.398438

-------------------------------

confusion matrix:
[[1164   15]
 [ 101   17]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.09747699648141861
difference in average predicted and observed risk = 0.006497996481418605
number samples = 1297
accuracy = 0.910563
precision class 0 = 0.920158
precision class 1 = 0.53125
recall class 0 = 0.987277
recall class 1 = 0.144068
false negative rate = 0.855932
false positive rate = 0.012723
positive prediction rate = 0.024672
AUC of ROC = 0.806781
AUC of PRC = 0.335188
min(+P, Se) = 0.364407

-------------------------------

confusion matrix:
[[650   6]
 [ 65   9]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.11132299900054932
difference in average predicted and observed risk = 0.009952999000549315
number samples = 730
accuracy = 0.90274
precision class 0 = 0.909091
precision class 1 = 0.6
recall class 0 = 0.990854
recall class 1 = 0.121622
false negative rate = 0.878378
false positive rate = 0.009146
positive prediction rate = 0.020548
AUC of ROC = 0.768334
AUC of PRC = 0.367542
min(+P, Se) = 0.426667

-------------------------------

confusion matrix:
[[166   1]
 [ 16   8]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.11676900088787079
difference in average predicted and observed risk = -0.0088849991121292
number samples = 191
accuracy = 0.910995
precision class 0 = 0.912088
precision class 1 = 0.888889
recall class 0 = 0.994012
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.005988
positive prediction rate = 0.04712
AUC of ROC = 0.876497
AUC of PRC = 0.702064
min(+P, Se) = 0.68

-------------------------------

confusion matrix:
[[2452   22]
 [ 221   34]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.09664800018072128
difference in average predicted and observed risk = 0.0032070001807212867
number samples = 2729
accuracy = 0.910956
precision class 0 = 0.917321
precision class 1 = 0.607143
recall class 0 = 0.991108
recall class 1 = 0.133333
false negative rate = 0.866667
false positive rate = 0.008892
positive prediction rate = 0.02052
AUC of ROC = 0.784377
AUC of PRC = 0.353096
min(+P, Se) = 0.382812

-------------------------------

confusion matrix:
[[1663   20]
 [ 173   43]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.11740899831056595
difference in average predicted and observed risk = 0.0036649983105659506
number samples = 1899
accuracy = 0.898368
precision class 0 = 0.905773
precision class 1 = 0.68254
recall class 0 = 0.988116
recall class 1 = 0.199074
false negative rate = 0.800926
false positive rate = 0.011884
positive prediction rate = 0.033175
AUC of ROC = 0.815274
AUC of PRC = 0.447623
min(+P, Se) = 0.430556

-------------------------------

confusion matrix:
[[540   9]
 [ 63  14]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.11933600157499313
difference in average predicted and observed risk = -0.0036669984250068677
number samples = 626
accuracy = 0.884984
precision class 0 = 0.895522
precision class 1 = 0.608696
recall class 0 = 0.983607
recall class 1 = 0.181818
false negative rate = 0.818182
false positive rate = 0.016393
positive prediction rate = 0.036741
AUC of ROC = 0.789558
AUC of PRC = 0.396406
min(+P, Se) = 0.415584

-------------------------------

confusion matrix:
[[2240    9]
 [ 190   18]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.09129499644041061
difference in average predicted and observed risk = 0.006638996440410619
number samples = 2457
accuracy = 0.919007
precision class 0 = 0.921811
precision class 1 = 0.666667
recall class 0 = 0.995998
recall class 1 = 0.086538
false negative rate = 0.913462
false positive rate = 0.004002
positive prediction rate = 0.010989
AUC of ROC = 0.780907
AUC of PRC = 0.335592
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[218   5]
 [ 23   2]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.10195600241422653
difference in average predicted and observed risk = 0.0011500024142265253
number samples = 248
accuracy = 0.887097
precision class 0 = 0.904564
precision class 1 = 0.285714
recall class 0 = 0.977578
recall class 1 = 0.08
false negative rate = 0.92
false positive rate = 0.022422
positive prediction rate = 0.028226
AUC of ROC = 0.740448
AUC of PRC = 0.214759
min(+P, Se) = 0.32

-------------------------------

confusion matrix:
[[470  11]
 [ 53  29]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.1402450054883957
difference in average predicted and observed risk = -0.005402994511604309
number samples = 563
accuracy = 0.886323
precision class 0 = 0.898662
precision class 1 = 0.725
recall class 0 = 0.977131
recall class 1 = 0.353659
false negative rate = 0.646341
false positive rate = 0.022869
positive prediction rate = 0.071048
AUC of ROC = 0.830004
AUC of PRC = 0.591618
min(+P, Se) = 0.536585

-------------------------------

confusion matrix:
[[647   8]
 [ 65  14]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.11369899660348892
difference in average predicted and observed risk = 0.00606999660348892
number samples = 734
accuracy = 0.900545
precision class 0 = 0.908708
precision class 1 = 0.636364
recall class 0 = 0.987786
recall class 1 = 0.177215
false negative rate = 0.822785
false positive rate = 0.012214
positive prediction rate = 0.029973
AUC of ROC = 0.809779
AUC of PRC = 0.415517
min(+P, Se) = 0.45679

-------------------------------

confusion matrix:
[[4115   42]
 [ 394   77]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.10516700148582458
difference in average predicted and observed risk = 0.0033950014858245836
number samples = 4628
accuracy = 0.905791
precision class 0 = 0.912619
precision class 1 = 0.647059
recall class 0 = 0.989897
recall class 1 = 0.163482
false negative rate = 0.836518
false positive rate = 0.010103
positive prediction rate = 0.025713
AUC of ROC = 0.796627
AUC of PRC = 0.397076
min(+P, Se) = 0.40552

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.09450499713420868
difference in average predicted and observed risk = 0.014335997134208675
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.866248
AUC of PRC = 0.389071
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[385   0]
 [ 43   4]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.10602699965238571
difference in average predicted and observed risk = -0.002769000347614292
number samples = 432
accuracy = 0.900463
precision class 0 = 0.899533
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.085106
false negative rate = 0.914894
false positive rate = 0.0
positive prediction rate = 0.009259
AUC of ROC = 0.788339
AUC of PRC = 0.416251
min(+P, Se) = 0.425532

-------------------------------

confusion matrix:
[[104   1]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.12842999398708344
difference in average predicted and observed risk = 0.018260993987083432
number samples = 118
accuracy = 0.923729
precision class 0 = 0.928571
precision class 1 = 0.833333
recall class 0 = 0.990476
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.009524
positive prediction rate = 0.050847
AUC of ROC = 0.910623
AUC of PRC = 0.639923
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.13411399722099304
difference in average predicted and observed risk = 0.0007809972209930349
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[297   3]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.12035199999809265
difference in average predicted and observed risk = 0.005307999998092658
number samples = 339
accuracy = 0.884956
precision class 0 = 0.891892
precision class 1 = 0.5
recall class 0 = 0.99
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.01
positive prediction rate = 0.017699
AUC of ROC = 0.795299
AUC of PRC = 0.354429
min(+P, Se) = 0.408163

-------------------------------

confusion matrix:
[[433   1]
 [ 32  12]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.09744799882173538
difference in average predicted and observed risk = 0.005397998821735375
number samples = 478
accuracy = 0.930962
precision class 0 = 0.931183
precision class 1 = 0.923077
recall class 0 = 0.997696
recall class 1 = 0.272727
false negative rate = 0.727273
false positive rate = 0.002304
positive prediction rate = 0.027197
AUC of ROC = 0.864317
AUC of PRC = 0.571947
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[388   0]
 [ 33   5]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.09311799705028534
difference in average predicted and observed risk = 0.003915997050285336
number samples = 426
accuracy = 0.922535
precision class 0 = 0.921615
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.131579
false negative rate = 0.868421
false positive rate = 0.0
positive prediction rate = 0.011737
AUC of ROC = 0.841291
AUC of PRC = 0.44841
min(+P, Se) = 0.435897

-------------------------------

confusion matrix:
[[89  1]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.13322299718856812
difference in average predicted and observed risk = 0.015575997188568114
number samples = 102
accuracy = 0.911765
precision class 0 = 0.917526
precision class 1 = 0.8
recall class 0 = 0.988889
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.011111
positive prediction rate = 0.04902
AUC of ROC = 0.938889
AUC of PRC = 0.722756
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.11153099685907364
difference in average predicted and observed risk = 0.02282099685907364
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.786002
AUC of PRC = 0.239686
min(+P, Se) = 0.384615

-------------------------------

confusion matrix:
[[106   2]
 [ 14   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.11858899891376495
difference in average predicted and observed risk = -0.031017001086235035
number samples = 127
accuracy = 0.874016
precision class 0 = 0.883333
precision class 1 = 0.714286
recall class 0 = 0.981481
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.018519
positive prediction rate = 0.055118
AUC of ROC = 0.790448
AUC of PRC = 0.534822
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.13768300414085388
difference in average predicted and observed risk = 0.05873600414085388
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.92381
AUC of PRC = 0.549206
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[730   4]
 [ 68  15]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.1069519966840744
difference in average predicted and observed risk = 0.005360996684074401
number samples = 817
accuracy = 0.911873
precision class 0 = 0.914787
precision class 1 = 0.789474
recall class 0 = 0.99455
recall class 1 = 0.180723
false negative rate = 0.819277
false positive rate = 0.00545
positive prediction rate = 0.023256
AUC of ROC = 0.836758
AUC of PRC = 0.472989
min(+P, Se) = 0.488889

-------------------------------

Epoch 00018: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch18.state
Epoch 19/100
 - 318s - loss: 0.2804 - val_loss: 0.2537

==>predicting on train



confusion matrix:
[[2143   12]
 [ 220   35]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.09097100049257278
difference in average predicted and observed risk = -0.014837999507427216
number samples = 2410
accuracy = 0.903734
precision class 0 = 0.906898
precision class 1 = 0.744681
recall class 0 = 0.994432
recall class 1 = 0.137255
false negative rate = 0.862745
false positive rate = 0.005568
positive prediction rate = 0.019502
AUC of ROC = 0.790204
AUC of PRC = 0.408455
min(+P, Se) = 0.399225

-------------------------------

confusion matrix:
[[1167   12]
 [ 105   13]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08560899645090103
difference in average predicted and observed risk = -0.005370003549098973
number samples = 1297
accuracy = 0.909792
precision class 0 = 0.917453
precision class 1 = 0.52
recall class 0 = 0.989822
recall class 1 = 0.110169
false negative rate = 0.889831
false positive rate = 0.010178
positive prediction rate = 0.019275
AUC of ROC = 0.800571
AUC of PRC = 0.331226
min(+P, Se) = 0.364407

-------------------------------

confusion matrix:
[[651   5]
 [ 67   7]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09736700356006622
difference in average predicted and observed risk = -0.004002996439933779
number samples = 730
accuracy = 0.90137
precision class 0 = 0.906685
precision class 1 = 0.583333
recall class 0 = 0.992378
recall class 1 = 0.094595
false negative rate = 0.905405
false positive rate = 0.007622
positive prediction rate = 0.016438
AUC of ROC = 0.775235
AUC of PRC = 0.375735
min(+P, Se) = 0.459459

-------------------------------

confusion matrix:
[[166   1]
 [ 16   8]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.10110100358724594
difference in average predicted and observed risk = -0.024552996412754047
number samples = 191
accuracy = 0.910995
precision class 0 = 0.912088
precision class 1 = 0.888889
recall class 0 = 0.994012
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.005988
positive prediction rate = 0.04712
AUC of ROC = 0.877994
AUC of PRC = 0.692409
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2457   17]
 [ 231   24]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08590000122785568
difference in average predicted and observed risk = -0.007540998772144314
number samples = 2729
accuracy = 0.909124
precision class 0 = 0.914062
precision class 1 = 0.585366
recall class 0 = 0.993129
recall class 1 = 0.094118
false negative rate = 0.905882
false positive rate = 0.006871
positive prediction rate = 0.015024
AUC of ROC = 0.786094
AUC of PRC = 0.357533
min(+P, Se) = 0.384314

-------------------------------

confusion matrix:
[[1670   13]
 [ 177   39]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.09807399660348892
difference in average predicted and observed risk = -0.015670003396511076
number samples = 1899
accuracy = 0.899947
precision class 0 = 0.904169
precision class 1 = 0.75
recall class 0 = 0.992276
recall class 1 = 0.180556
false negative rate = 0.819444
false positive rate = 0.007724
positive prediction rate = 0.027383
AUC of ROC = 0.804788
AUC of PRC = 0.451083
min(+P, Se) = 0.442922

-------------------------------

confusion matrix:
[[541   8]
 [ 68   9]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.10553199797868729
difference in average predicted and observed risk = -0.017471002021312715
number samples = 626
accuracy = 0.878594
precision class 0 = 0.888342
precision class 1 = 0.529412
recall class 0 = 0.985428
recall class 1 = 0.116883
false negative rate = 0.883117
false positive rate = 0.014572
positive prediction rate = 0.027157
AUC of ROC = 0.78161
AUC of PRC = 0.383419
min(+P, Se) = 0.415584

-------------------------------

confusion matrix:
[[2246    3]
 [ 193   15]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07699699699878693
difference in average predicted and observed risk = -0.007659003001213069
number samples = 2457
accuracy = 0.920228
precision class 0 = 0.920869
precision class 1 = 0.833333
recall class 0 = 0.998666
recall class 1 = 0.072115
false negative rate = 0.927885
false positive rate = 0.001334
positive prediction rate = 0.007326
AUC of ROC = 0.783079
AUC of PRC = 0.339465
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[218   5]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.08770299702882767
difference in average predicted and observed risk = -0.01310300297117234
number samples = 248
accuracy = 0.879032
precision class 0 = 0.897119
precision class 1 = 0.0
recall class 0 = 0.977578
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.022422
positive prediction rate = 0.020161
AUC of ROC = 0.75157
AUC of PRC = 0.22936
min(+P, Se) = 0.32

-------------------------------

confusion matrix:
[[470  11]
 [ 53  29]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12634800374507904
difference in average predicted and observed risk = -0.01929999625492096
number samples = 563
accuracy = 0.886323
precision class 0 = 0.898662
precision class 1 = 0.725
recall class 0 = 0.977131
recall class 1 = 0.353659
false negative rate = 0.646341
false positive rate = 0.022869
positive prediction rate = 0.071048
AUC of ROC = 0.830282
AUC of PRC = 0.602944
min(+P, Se) = 0.560976

-------------------------------

confusion matrix:
[[652   3]
 [ 69  10]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09882000088691711
difference in average predicted and observed risk = -0.008808999113082888
number samples = 734
accuracy = 0.901907
precision class 0 = 0.9043
precision class 1 = 0.769231
recall class 0 = 0.99542
recall class 1 = 0.126582
false negative rate = 0.873418
false positive rate = 0.00458
positive prediction rate = 0.017711
AUC of ROC = 0.802551
AUC of PRC = 0.428763
min(+P, Se) = 0.47561

-------------------------------

confusion matrix:
[[4127   30]
 [ 408   63]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09089499711990356
difference in average predicted and observed risk = -0.010877002880096437
number samples = 4628
accuracy = 0.905359
precision class 0 = 0.910033
precision class 1 = 0.677419
recall class 0 = 0.992783
recall class 1 = 0.133758
false negative rate = 0.866242
false positive rate = 0.007217
positive prediction rate = 0.020095
AUC of ROC = 0.794985
AUC of PRC = 0.399094
min(+P, Se) = 0.405063

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 16   3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08378200232982635
difference in average predicted and observed risk = 0.003613002329826351
number samples = 237
accuracy = 0.924051
precision class 0 = 0.931035
precision class 1 = 0.6
recall class 0 = 0.990826
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009174
positive prediction rate = 0.021097
AUC of ROC = 0.85466
AUC of PRC = 0.386469
min(+P, Se) = 0.434783

-------------------------------

confusion matrix:
[[385   0]
 [ 45   2]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.09012400358915329
difference in average predicted and observed risk = -0.018671996410846714
number samples = 432
accuracy = 0.895833
precision class 0 = 0.895349
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.042553
false negative rate = 0.957447
false positive rate = 0.0
positive prediction rate = 0.00463
AUC of ROC = 0.7958
AUC of PRC = 0.43055
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[104   1]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.1149659976363182
difference in average predicted and observed risk = 0.004796997636318204
number samples = 118
accuracy = 0.90678
precision class 0 = 0.912281
precision class 1 = 0.75
recall class 0 = 0.990476
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.009524
positive prediction rate = 0.033898
AUC of ROC = 0.897436
AUC of PRC = 0.628875
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11619000136852264
difference in average predicted and observed risk = -0.017142998631477363
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[298   2]
 [ 37   2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.10045800358057022
difference in average predicted and observed risk = -0.014585996419429773
number samples = 339
accuracy = 0.884956
precision class 0 = 0.889552
precision class 1 = 0.5
recall class 0 = 0.993333
recall class 1 = 0.051282
false negative rate = 0.948718
false positive rate = 0.006667
positive prediction rate = 0.011799
AUC of ROC = 0.804701
AUC of PRC = 0.36076
min(+P, Se) = 0.395349

-------------------------------

confusion matrix:
[[433   1]
 [ 36   8]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08741900324821472
difference in average predicted and observed risk = -0.004630996751785285
number samples = 478
accuracy = 0.922594
precision class 0 = 0.923241
precision class 1 = 0.888889
recall class 0 = 0.997696
recall class 1 = 0.181818
false negative rate = 0.818182
false positive rate = 0.002304
positive prediction rate = 0.018828
AUC of ROC = 0.85709
AUC of PRC = 0.562153
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 36   2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.07867199927568436
difference in average predicted and observed risk = -0.010530000724315647
number samples = 426
accuracy = 0.915493
precision class 0 = 0.915094
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004695
AUC of ROC = 0.842987
AUC of PRC = 0.465129
min(+P, Se) = 0.435897

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.11734800040721893
difference in average predicted and observed risk = -0.00029899959278106847
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.943519
AUC of PRC = 0.711229
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.09973400086164474
difference in average predicted and observed risk = 0.011024000861644748
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.794047
AUC of PRC = 0.239006
min(+P, Se) = 0.384615

-------------------------------

confusion matrix:
[[106   2]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10461299866437912
difference in average predicted and observed risk = -0.04499300133562087
number samples = 127
accuracy = 0.858268
precision class 0 = 0.868852
precision class 1 = 0.6
recall class 0 = 0.981481
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.018519
positive prediction rate = 0.03937
AUC of ROC = 0.776803
AUC of PRC = 0.527237
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.12382400035858154
difference in average predicted and observed risk = 0.04487700035858154
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.914286
AUC of PRC = 0.532341
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[731   3]
 [ 73  10]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09283000230789185
difference in average predicted and observed risk = -0.008760997692108155
number samples = 817
accuracy = 0.906977
precision class 0 = 0.909204
precision class 1 = 0.769231
recall class 0 = 0.995913
recall class 1 = 0.120482
false negative rate = 0.879518
false positive rate = 0.004087
positive prediction rate = 0.015912
AUC of ROC = 0.836135
AUC of PRC = 0.470539
min(+P, Se) = 0.47619

-------------------------------

Epoch 00019: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch19.state
Epoch 20/100
 - 320s - loss: 0.2808 - val_loss: 0.2556

==>predicting on train



confusion matrix:
[[2141   14]
 [ 222   33]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.07696299999952316
difference in average predicted and observed risk = -0.028846000000476837
number samples = 2410
accuracy = 0.902075
precision class 0 = 0.906052
precision class 1 = 0.702128
recall class 0 = 0.993503
recall class 1 = 0.129412
false negative rate = 0.870588
false positive rate = 0.006497
positive prediction rate = 0.019502
AUC of ROC = 0.801982
AUC of PRC = 0.410939
min(+P, Se) = 0.402344

-------------------------------

confusion matrix:
[[1167   12]
 [ 104   14]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.07400000095367432
difference in average predicted and observed risk = -0.016978999046325688
number samples = 1297
accuracy = 0.910563
precision class 0 = 0.918175
precision class 1 = 0.538462
recall class 0 = 0.989822
recall class 1 = 0.118644
false negative rate = 0.881356
false positive rate = 0.010178
positive prediction rate = 0.020046
AUC of ROC = 0.805229
AUC of PRC = 0.336097
min(+P, Se) = 0.352941

-------------------------------

confusion matrix:
[[651   5]
 [ 69   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.083187997341156
difference in average predicted and observed risk = -0.018182002658843996
number samples = 730
accuracy = 0.89863
precision class 0 = 0.904167
precision class 1 = 0.5
recall class 0 = 0.992378
recall class 1 = 0.067568
false negative rate = 0.932432
false positive rate = 0.007622
positive prediction rate = 0.013699
AUC of ROC = 0.774596
AUC of PRC = 0.356513
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[166   1]
 [ 16   8]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.08863600343465805
difference in average predicted and observed risk = -0.03701799656534194
number samples = 191
accuracy = 0.910995
precision class 0 = 0.912088
precision class 1 = 0.888889
recall class 0 = 0.994012
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.005988
positive prediction rate = 0.04712
AUC of ROC = 0.871008
AUC of PRC = 0.688013
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2455   19]
 [ 232   23]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07339300215244293
difference in average predicted and observed risk = -0.020047997847557064
number samples = 2729
accuracy = 0.908025
precision class 0 = 0.913658
precision class 1 = 0.547619
recall class 0 = 0.99232
recall class 1 = 0.090196
false negative rate = 0.909804
false positive rate = 0.00768
positive prediction rate = 0.01539
AUC of ROC = 0.792518
AUC of PRC = 0.356216
min(+P, Se) = 0.360784

-------------------------------

confusion matrix:
[[1670   13]
 [ 179   37]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.08363699913024902
difference in average predicted and observed risk = -0.030107000869750974
number samples = 1899
accuracy = 0.898894
precision class 0 = 0.903191
precision class 1 = 0.74
recall class 0 = 0.992276
recall class 1 = 0.171296
false negative rate = 0.828704
false positive rate = 0.007724
positive prediction rate = 0.02633
AUC of ROC = 0.811481
AUC of PRC = 0.448234
min(+P, Se) = 0.421296

-------------------------------

confusion matrix:
[[541   8]
 [ 68   9]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.08961600065231323
difference in average predicted and observed risk = -0.03338699934768677
number samples = 626
accuracy = 0.878594
precision class 0 = 0.888342
precision class 1 = 0.529412
recall class 0 = 0.985428
recall class 1 = 0.116883
false negative rate = 0.883117
false positive rate = 0.014572
positive prediction rate = 0.027157
AUC of ROC = 0.795756
AUC of PRC = 0.387284
min(+P, Se) = 0.450549

-------------------------------

confusion matrix:
[[2245    4]
 [ 193   15]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.06477399915456772
difference in average predicted and observed risk = -0.019882000845432277
number samples = 2457
accuracy = 0.919821
precision class 0 = 0.920837
precision class 1 = 0.789474
recall class 0 = 0.998221
recall class 1 = 0.072115
false negative rate = 0.927885
false positive rate = 0.001779
positive prediction rate = 0.007733
AUC of ROC = 0.788083
AUC of PRC = 0.337397
min(+P, Se) = 0.325472

-------------------------------

confusion matrix:
[[218   5]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.07560200244188309
difference in average predicted and observed risk = -0.02520399755811692
number samples = 248
accuracy = 0.879032
precision class 0 = 0.897119
precision class 1 = 0.0
recall class 0 = 0.977578
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.022422
positive prediction rate = 0.020161
AUC of ROC = 0.745112
AUC of PRC = 0.216894
min(+P, Se) = 0.296296

-------------------------------

confusion matrix:
[[471  10]
 [ 53  29]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.11199700087308884
difference in average predicted and observed risk = -0.03365099912691116
number samples = 563
accuracy = 0.888099
precision class 0 = 0.898855
precision class 1 = 0.74359
recall class 0 = 0.97921
recall class 1 = 0.353659
false negative rate = 0.646341
false positive rate = 0.02079
positive prediction rate = 0.069272
AUC of ROC = 0.839765
AUC of PRC = 0.588514
min(+P, Se) = 0.536585

-------------------------------

confusion matrix:
[[650   5]
 [ 72   7]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.0845550000667572
difference in average predicted and observed risk = -0.0230739999332428
number samples = 734
accuracy = 0.895095
precision class 0 = 0.900277
precision class 1 = 0.583333
recall class 0 = 0.992366
recall class 1 = 0.088608
false negative rate = 0.911392
false positive rate = 0.007634
positive prediction rate = 0.016349
AUC of ROC = 0.804348
AUC of PRC = 0.429982
min(+P, Se) = 0.46988

-------------------------------

confusion matrix:
[[4125   32]
 [ 411   60]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.07759600132703781
difference in average predicted and observed risk = -0.02417599867296219
number samples = 4628
accuracy = 0.904278
precision class 0 = 0.909392
precision class 1 = 0.652174
recall class 0 = 0.992302
recall class 1 = 0.127389
false negative rate = 0.872611
false positive rate = 0.007698
positive prediction rate = 0.019879
AUC of ROC = 0.801042
AUC of PRC = 0.397554
min(+P, Se) = 0.392781

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 17   2]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.07094299793243408
difference in average predicted and observed risk = -0.009226002067565922
number samples = 237
accuracy = 0.919831
precision class 0 = 0.927039
precision class 1 = 0.5
recall class 0 = 0.990826
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.009174
positive prediction rate = 0.016878
AUC of ROC = 0.853211
AUC of PRC = 0.385345
min(+P, Se) = 0.47619

-------------------------------

confusion matrix:
[[385   0]
 [ 45   2]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.07456199824810028
difference in average predicted and observed risk = -0.03423400175189972
number samples = 432
accuracy = 0.895833
precision class 0 = 0.895349
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.042553
false negative rate = 0.957447
false positive rate = 0.0
positive prediction rate = 0.00463
AUC of ROC = 0.800442
AUC of PRC = 0.426547
min(+P, Se) = 0.425532

-------------------------------

confusion matrix:
[[104   1]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.09966199845075607
difference in average predicted and observed risk = -0.01050700154924393
number samples = 118
accuracy = 0.90678
precision class 0 = 0.912281
precision class 1 = 0.75
recall class 0 = 0.990476
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.009524
positive prediction rate = 0.033898
AUC of ROC = 0.912821
AUC of PRC = 0.6365
min(+P, Se) = 0.647059

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.10431499779224396
difference in average predicted and observed risk = -0.02901800220775605
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[298   2]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.08487699925899506
difference in average predicted and observed risk = -0.030167000741004937
number samples = 339
accuracy = 0.882006
precision class 0 = 0.886905
precision class 1 = 0.333333
recall class 0 = 0.993333
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.006667
positive prediction rate = 0.00885
AUC of ROC = 0.800769
AUC of PRC = 0.356705
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[433   1]
 [ 36   8]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.07351599633693695
difference in average predicted and observed risk = -0.018534003663063056
number samples = 478
accuracy = 0.922594
precision class 0 = 0.923241
precision class 1 = 0.888889
recall class 0 = 0.997696
recall class 1 = 0.181818
false negative rate = 0.818182
false positive rate = 0.002304
positive prediction rate = 0.018828
AUC of ROC = 0.865312
AUC of PRC = 0.571748
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 37   1]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.06571900099515915
difference in average predicted and observed risk = -0.023482999004840854
number samples = 426
accuracy = 0.913146
precision class 0 = 0.912941
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.026316
false negative rate = 0.973684
false positive rate = 0.0
positive prediction rate = 0.002347
AUC of ROC = 0.843326
AUC of PRC = 0.455408
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.10296499729156494
difference in average predicted and observed risk = -0.01468200270843506
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.943519
AUC of PRC = 0.704888
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.0786449983716011
difference in average predicted and observed risk = -0.010065001628398892
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.820595
AUC of PRC = 0.25855
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[106   2]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.08974999934434891
difference in average predicted and observed risk = -0.05985600065565108
number samples = 127
accuracy = 0.858268
precision class 0 = 0.868852
precision class 1 = 0.6
recall class 0 = 0.981481
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.018519
positive prediction rate = 0.03937
AUC of ROC = 0.790448
AUC of PRC = 0.527939
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.11223799735307693
difference in average predicted and observed risk = 0.03329099735307693
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.92381
AUC of PRC = 0.551786
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[731   3]
 [ 74   9]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.07823000103235245
difference in average predicted and observed risk = -0.023360998967647553
number samples = 817
accuracy = 0.905753
precision class 0 = 0.908075
precision class 1 = 0.75
recall class 0 = 0.995913
recall class 1 = 0.108434
false negative rate = 0.891566
false positive rate = 0.004087
positive prediction rate = 0.014688
AUC of ROC = 0.838991
AUC of PRC = 0.476625
min(+P, Se) = 0.493976

-------------------------------

Epoch 00020: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch20.state
Epoch 21/100
 - 319s - loss: 0.2819 - val_loss: 0.2534

==>predicting on train



confusion matrix:
[[2136   19]
 [ 216   39]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.09655699878931046
difference in average predicted and observed risk = -0.009252001210689545
number samples = 2410
accuracy = 0.90249
precision class 0 = 0.908163
precision class 1 = 0.672414
recall class 0 = 0.991183
recall class 1 = 0.152941
false negative rate = 0.847059
false positive rate = 0.008817
positive prediction rate = 0.024066
AUC of ROC = 0.807113
AUC of PRC = 0.413815
min(+P, Se) = 0.392308

-------------------------------

confusion matrix:
[[1164   15]
 [ 100   18]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08854199945926666
difference in average predicted and observed risk = -0.0024370005407333417
number samples = 1297
accuracy = 0.911334
precision class 0 = 0.920886
precision class 1 = 0.545455
recall class 0 = 0.987277
recall class 1 = 0.152542
false negative rate = 0.847458
false positive rate = 0.012723
positive prediction rate = 0.025443
AUC of ROC = 0.813444
AUC of PRC = 0.338497
min(+P, Se) = 0.354839

-------------------------------

confusion matrix:
[[650   6]
 [ 65   9]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09919700026512146
difference in average predicted and observed risk = -0.002172999734878542
number samples = 730
accuracy = 0.90274
precision class 0 = 0.909091
precision class 1 = 0.6
recall class 0 = 0.990854
recall class 1 = 0.121622
false negative rate = 0.878378
false positive rate = 0.009146
positive prediction rate = 0.020548
AUC of ROC = 0.801108
AUC of PRC = 0.378053
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[166   1]
 [ 16   8]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.10424099862575531
difference in average predicted and observed risk = -0.021413001374244678
number samples = 191
accuracy = 0.910995
precision class 0 = 0.912088
precision class 1 = 0.888889
recall class 0 = 0.994012
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.005988
positive prediction rate = 0.04712
AUC of ROC = 0.895459
AUC of PRC = 0.701713
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2453   21]
 [ 224   31]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.09077499806880951
difference in average predicted and observed risk = -0.002666001931190487
number samples = 2729
accuracy = 0.910224
precision class 0 = 0.916324
precision class 1 = 0.596154
recall class 0 = 0.991512
recall class 1 = 0.121569
false negative rate = 0.878431
false positive rate = 0.008488
positive prediction rate = 0.019055
AUC of ROC = 0.8038
AUC of PRC = 0.360775
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[1663   20]
 [ 173   43]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.10118000209331512
difference in average predicted and observed risk = -0.012563997906684873
number samples = 1899
accuracy = 0.898368
precision class 0 = 0.905773
precision class 1 = 0.68254
recall class 0 = 0.988116
recall class 1 = 0.199074
false negative rate = 0.800926
false positive rate = 0.011884
positive prediction rate = 0.033175
AUC of ROC = 0.818903
AUC of PRC = 0.457118
min(+P, Se) = 0.426009

-------------------------------

confusion matrix:
[[540   9]
 [ 67  10]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.10939499735832214
difference in average predicted and observed risk = -0.013608002641677858
number samples = 626
accuracy = 0.878594
precision class 0 = 0.889621
precision class 1 = 0.526316
recall class 0 = 0.983607
recall class 1 = 0.12987
false negative rate = 0.87013
false positive rate = 0.016393
positive prediction rate = 0.030351
AUC of ROC = 0.807584
AUC of PRC = 0.398
min(+P, Se) = 0.423077

-------------------------------

confusion matrix:
[[2241    8]
 [ 188   20]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08229599893093109
difference in average predicted and observed risk = -0.002360001069068904
number samples = 2457
accuracy = 0.920228
precision class 0 = 0.922602
precision class 1 = 0.714286
recall class 0 = 0.996443
recall class 1 = 0.096154
false negative rate = 0.903846
false positive rate = 0.003557
positive prediction rate = 0.011396
AUC of ROC = 0.798881
AUC of PRC = 0.342352
min(+P, Se) = 0.326923

-------------------------------

confusion matrix:
[[218   5]
 [ 23   2]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.09317400306463242
difference in average predicted and observed risk = -0.007631996935367591
number samples = 248
accuracy = 0.887097
precision class 0 = 0.904564
precision class 1 = 0.285714
recall class 0 = 0.977578
recall class 1 = 0.08
false negative rate = 0.92
false positive rate = 0.022422
positive prediction rate = 0.028226
AUC of ROC = 0.75713
AUC of PRC = 0.225976
min(+P, Se) = 0.275862

-------------------------------

confusion matrix:
[[470  11]
 [ 53  29]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12813299894332886
difference in average predicted and observed risk = -0.017515001056671142
number samples = 563
accuracy = 0.886323
precision class 0 = 0.898662
precision class 1 = 0.725
recall class 0 = 0.977131
recall class 1 = 0.353659
false negative rate = 0.646341
false positive rate = 0.022869
positive prediction rate = 0.071048
AUC of ROC = 0.844455
AUC of PRC = 0.596896
min(+P, Se) = 0.536585

-------------------------------

confusion matrix:
[[647   8]
 [ 66  13]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.10073299705982208
difference in average predicted and observed risk = -0.00689600294017792
number samples = 734
accuracy = 0.899183
precision class 0 = 0.907433
precision class 1 = 0.619048
recall class 0 = 0.987786
recall class 1 = 0.164557
false negative rate = 0.835443
false positive rate = 0.012214
positive prediction rate = 0.02861
AUC of ROC = 0.817354
AUC of PRC = 0.42836
min(+P, Se) = 0.455696

-------------------------------

confusion matrix:
[[4116   41]
 [ 397   74]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09504500031471252
difference in average predicted and observed risk = -0.006726999685287477
number samples = 4628
accuracy = 0.905359
precision class 0 = 0.912032
precision class 1 = 0.643478
recall class 0 = 0.990137
recall class 1 = 0.157113
false negative rate = 0.842887
false positive rate = 0.009863
positive prediction rate = 0.024849
AUC of ROC = 0.811093
AUC of PRC = 0.405786
min(+P, Se) = 0.403397

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08548899739980698
difference in average predicted and observed risk = 0.005319997399806972
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.84959
AUC of PRC = 0.388764
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[385   0]
 [ 43   4]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.09492599964141846
difference in average predicted and observed risk = -0.013870000358581547
number samples = 432
accuracy = 0.900463
precision class 0 = 0.899533
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.085106
false negative rate = 0.914894
false positive rate = 0.0
positive prediction rate = 0.009259
AUC of ROC = 0.824261
AUC of PRC = 0.428988
min(+P, Se) = 0.42

-------------------------------

confusion matrix:
[[104   1]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.11515499651432037
difference in average predicted and observed risk = 0.0049859965143203705
number samples = 118
accuracy = 0.90678
precision class 0 = 0.912281
precision class 1 = 0.75
recall class 0 = 0.990476
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.009524
positive prediction rate = 0.033898
AUC of ROC = 0.905495
AUC of PRC = 0.613326
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.12372799962759018
difference in average predicted and observed risk = -0.009605000372409828
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[297   3]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.10311000049114227
difference in average predicted and observed risk = -0.01193399950885772
number samples = 339
accuracy = 0.884956
precision class 0 = 0.891892
precision class 1 = 0.5
recall class 0 = 0.99
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.01
positive prediction rate = 0.017699
AUC of ROC = 0.805897
AUC of PRC = 0.351961
min(+P, Se) = 0.408163

-------------------------------

confusion matrix:
[[433   1]
 [ 34  10]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.09124399721622467
difference in average predicted and observed risk = -0.0008060027837753364
number samples = 478
accuracy = 0.926778
precision class 0 = 0.927195
precision class 1 = 0.909091
recall class 0 = 0.997696
recall class 1 = 0.227273
false negative rate = 0.772727
false positive rate = 0.002304
positive prediction rate = 0.023013
AUC of ROC = 0.881075
AUC of PRC = 0.586707
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 33   5]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08336599916219711
difference in average predicted and observed risk = -0.0058360008378028905
number samples = 426
accuracy = 0.922535
precision class 0 = 0.921615
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.131579
false negative rate = 0.868421
false positive rate = 0.0
positive prediction rate = 0.011737
AUC of ROC = 0.851601
AUC of PRC = 0.471523
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[89  1]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.12104599922895432
difference in average predicted and observed risk = 0.0033989992289543136
number samples = 102
accuracy = 0.911765
precision class 0 = 0.917526
precision class 1 = 0.8
recall class 0 = 0.988889
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.011111
positive prediction rate = 0.04902
AUC of ROC = 0.938889
AUC of PRC = 0.703843
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.10007300227880478
difference in average predicted and observed risk = 0.011363002278804782
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.829445
AUC of PRC = 0.256202
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[106   2]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10605599731206894
difference in average predicted and observed risk = -0.04355000268793105
number samples = 127
accuracy = 0.858268
precision class 0 = 0.868852
precision class 1 = 0.6
recall class 0 = 0.981481
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.018519
positive prediction rate = 0.03937
AUC of ROC = 0.80848
AUC of PRC = 0.515941
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.12711100280284882
difference in average predicted and observed risk = 0.04816400280284881
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.92381
AUC of PRC = 0.549206
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[730   4]
 [ 70  13]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09616699814796448
difference in average predicted and observed risk = -0.005424001852035523
number samples = 817
accuracy = 0.909425
precision class 0 = 0.9125
precision class 1 = 0.764706
recall class 0 = 0.99455
recall class 1 = 0.156627
false negative rate = 0.843373
false positive rate = 0.00545
positive prediction rate = 0.020808
AUC of ROC = 0.849266
AUC of PRC = 0.475296
min(+P, Se) = 0.481928

-------------------------------

Epoch 00021: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch21.state
Epoch 22/100
 - 318s - loss: 0.2836 - val_loss: 0.2553

==>predicting on train



confusion matrix:
[[2137   18]
 [ 218   37]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.08649799972772598
difference in average predicted and observed risk = -0.019311000272274018
number samples = 2410
accuracy = 0.902075
precision class 0 = 0.907431
precision class 1 = 0.672727
recall class 0 = 0.991647
recall class 1 = 0.145098
false negative rate = 0.854902
false positive rate = 0.008353
positive prediction rate = 0.022822
AUC of ROC = 0.80765
AUC of PRC = 0.413442
min(+P, Se) = 0.392157

-------------------------------

confusion matrix:
[[1166   13]
 [ 105   13]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08092600107192993
difference in average predicted and observed risk = -0.010052998928070073
number samples = 1297
accuracy = 0.909021
precision class 0 = 0.917388
precision class 1 = 0.5
recall class 0 = 0.988974
recall class 1 = 0.110169
false negative rate = 0.889831
false positive rate = 0.011026
positive prediction rate = 0.020046
AUC of ROC = 0.813236
AUC of PRC = 0.337786
min(+P, Se) = 0.358333

-------------------------------

confusion matrix:
[[650   6]
 [ 66   8]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09336300194263458
difference in average predicted and observed risk = -0.00800699805736542
number samples = 730
accuracy = 0.90137
precision class 0 = 0.907821
precision class 1 = 0.571429
recall class 0 = 0.990854
recall class 1 = 0.108108
false negative rate = 0.891892
false positive rate = 0.009146
positive prediction rate = 0.019178
AUC of ROC = 0.800016
AUC of PRC = 0.384282
min(+P, Se) = 0.448718

-------------------------------

confusion matrix:
[[166   1]
 [ 16   8]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.09386800229549408
difference in average predicted and observed risk = -0.03178599770450591
number samples = 191
accuracy = 0.910995
precision class 0 = 0.912088
precision class 1 = 0.888889
recall class 0 = 0.994012
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.005988
positive prediction rate = 0.04712
AUC of ROC = 0.897954
AUC of PRC = 0.708186
min(+P, Se) = 0.708333

-------------------------------

confusion matrix:
[[2455   19]
 [ 232   23]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08251599967479706
difference in average predicted and observed risk = -0.010925000325202938
number samples = 2729
accuracy = 0.908025
precision class 0 = 0.913658
precision class 1 = 0.547619
recall class 0 = 0.99232
recall class 1 = 0.090196
false negative rate = 0.909804
false positive rate = 0.00768
positive prediction rate = 0.01539
AUC of ROC = 0.804166
AUC of PRC = 0.361167
min(+P, Se) = 0.384314

-------------------------------

confusion matrix:
[[1664   19]
 [ 173   43]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.09179499745368958
difference in average predicted and observed risk = -0.021949002546310423
number samples = 1899
accuracy = 0.898894
precision class 0 = 0.905825
precision class 1 = 0.693548
recall class 0 = 0.988711
recall class 1 = 0.199074
false negative rate = 0.800926
false positive rate = 0.011289
positive prediction rate = 0.032649
AUC of ROC = 0.81994
AUC of PRC = 0.459787
min(+P, Se) = 0.435185

-------------------------------

confusion matrix:
[[540   9]
 [ 66  11]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.10326699912548065
difference in average predicted and observed risk = -0.01973600087451935
number samples = 626
accuracy = 0.880192
precision class 0 = 0.891089
precision class 1 = 0.55
recall class 0 = 0.983607
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.016393
positive prediction rate = 0.031949
AUC of ROC = 0.809902
AUC of PRC = 0.408198
min(+P, Se) = 0.4375

-------------------------------

confusion matrix:
[[2243    6]
 [ 192   16]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07245499640703201
difference in average predicted and observed risk = -0.012201003592967982
number samples = 2457
accuracy = 0.919414
precision class 0 = 0.92115
precision class 1 = 0.727273
recall class 0 = 0.997332
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.002668
positive prediction rate = 0.008954
AUC of ROC = 0.799507
AUC of PRC = 0.339205
min(+P, Se) = 0.325472

-------------------------------

confusion matrix:
[[218   5]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.08315800130367279
difference in average predicted and observed risk = -0.017647998696327216
number samples = 248
accuracy = 0.879032
precision class 0 = 0.897119
precision class 1 = 0.0
recall class 0 = 0.977578
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.022422
positive prediction rate = 0.020161
AUC of ROC = 0.743498
AUC of PRC = 0.222431
min(+P, Se) = 0.307692

-------------------------------

confusion matrix:
[[470  11]
 [ 54  28]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12234500050544739
difference in average predicted and observed risk = -0.023302999494552612
number samples = 563
accuracy = 0.884547
precision class 0 = 0.896947
precision class 1 = 0.717949
recall class 0 = 0.977131
recall class 1 = 0.341463
false negative rate = 0.658537
false positive rate = 0.022869
positive prediction rate = 0.069272
AUC of ROC = 0.847624
AUC of PRC = 0.603532
min(+P, Se) = 0.536585

-------------------------------

confusion matrix:
[[648   7]
 [ 68  11]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09173700213432312
difference in average predicted and observed risk = -0.015891997865676882
number samples = 734
accuracy = 0.89782
precision class 0 = 0.905028
precision class 1 = 0.611111
recall class 0 = 0.989313
recall class 1 = 0.139241
false negative rate = 0.860759
false positive rate = 0.010687
positive prediction rate = 0.024523
AUC of ROC = 0.818243
AUC of PRC = 0.430762
min(+P, Se) = 0.455696

-------------------------------

confusion matrix:
[[4119   38]
 [ 405   66]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08632300049066544
difference in average predicted and observed risk = -0.015448999509334566
number samples = 4628
accuracy = 0.904278
precision class 0 = 0.910477
precision class 1 = 0.634615
recall class 0 = 0.990859
recall class 1 = 0.140127
false negative rate = 0.859873
false positive rate = 0.009141
positive prediction rate = 0.022472
AUC of ROC = 0.81163
AUC of PRC = 0.406772
min(+P, Se) = 0.405858

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 17   2]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.07788299769163132
difference in average predicted and observed risk = -0.002286002308368687
number samples = 237
accuracy = 0.915612
precision class 0 = 0.926724
precision class 1 = 0.4
recall class 0 = 0.986239
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.013761
positive prediction rate = 0.021097
AUC of ROC = 0.845244
AUC of PRC = 0.364509
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[385   0]
 [ 44   3]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.08414000272750854
difference in average predicted and observed risk = -0.02465599727249146
number samples = 432
accuracy = 0.898148
precision class 0 = 0.897436
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.06383
false negative rate = 0.93617
false positive rate = 0.0
positive prediction rate = 0.006944
AUC of ROC = 0.8168
AUC of PRC = 0.416308
min(+P, Se) = 0.425532

-------------------------------

confusion matrix:
[[104   1]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10924000293016434
difference in average predicted and observed risk = -0.0009289970698356659
number samples = 118
accuracy = 0.90678
precision class 0 = 0.912281
precision class 1 = 0.75
recall class 0 = 0.990476
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.009524
positive prediction rate = 0.033898
AUC of ROC = 0.902564
AUC of PRC = 0.616469
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11339899897575378
difference in average predicted and observed risk = -0.019934001024246223
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[297   3]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.09295199811458588
difference in average predicted and observed risk = -0.022092001885414117
number samples = 339
accuracy = 0.879056
precision class 0 = 0.886567
precision class 1 = 0.25
recall class 0 = 0.99
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.01
positive prediction rate = 0.011799
AUC of ROC = 0.797949
AUC of PRC = 0.337973
min(+P, Se) = 0.395833

-------------------------------

confusion matrix:
[[433   1]
 [ 35   9]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08282099664211273
difference in average predicted and observed risk = -0.009229003357887275
number samples = 478
accuracy = 0.924686
precision class 0 = 0.925214
precision class 1 = 0.9
recall class 0 = 0.997696
recall class 1 = 0.204545
false negative rate = 0.795455
false positive rate = 0.002304
positive prediction rate = 0.020921
AUC of ROC = 0.875105
AUC of PRC = 0.567218
min(+P, Se) = 0.543478

-------------------------------

confusion matrix:
[[388   0]
 [ 36   2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.07234200090169907
difference in average predicted and observed risk = -0.016859999098300937
number samples = 426
accuracy = 0.915493
precision class 0 = 0.915094
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004695
AUC of ROC = 0.847328
AUC of PRC = 0.455112
min(+P, Se) = 0.447368

-------------------------------

confusion matrix:
[[89  1]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.1156340017914772
difference in average predicted and observed risk = -0.002012998208522798
number samples = 102
accuracy = 0.911765
precision class 0 = 0.917526
precision class 1 = 0.8
recall class 0 = 0.988889
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.011111
positive prediction rate = 0.04902
AUC of ROC = 0.933333
AUC of PRC = 0.674434
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.09436800330877304
difference in average predicted and observed risk = 0.005658003308773044
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.824618
AUC of PRC = 0.246317
min(+P, Se) = 0.388889

-------------------------------

confusion matrix:
[[106   2]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09869799762964249
difference in average predicted and observed risk = -0.0509080023703575
number samples = 127
accuracy = 0.858268
precision class 0 = 0.868852
precision class 1 = 0.6
recall class 0 = 0.981481
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.018519
positive prediction rate = 0.03937
AUC of ROC = 0.797758
AUC of PRC = 0.53047
min(+P, Se) = 0.55

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.1118599995970726
difference in average predicted and observed risk = 0.0329129995970726
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.92381
AUC of PRC = 0.549206
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[730   4]
 [ 73  10]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.0870250016450882
difference in average predicted and observed risk = -0.014565998354911805
number samples = 817
accuracy = 0.905753
precision class 0 = 0.909091
precision class 1 = 0.714286
recall class 0 = 0.99455
recall class 1 = 0.120482
false negative rate = 0.879518
false positive rate = 0.00545
positive prediction rate = 0.017136
AUC of ROC = 0.842372
AUC of PRC = 0.461423
min(+P, Se) = 0.46988

-------------------------------

Epoch 00022: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch22.state
Epoch 23/100
 - 319s - loss: 0.2842 - val_loss: 0.2567

==>predicting on train



confusion matrix:
[[2150    5]
 [ 232   23]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.08902999758720398
difference in average predicted and observed risk = -0.01677900241279602
number samples = 2410
accuracy = 0.90166
precision class 0 = 0.902603
precision class 1 = 0.821429
recall class 0 = 0.99768
recall class 1 = 0.090196
false negative rate = 0.909804
false positive rate = 0.00232
positive prediction rate = 0.011618
AUC of ROC = 0.81417
AUC of PRC = 0.418471
min(+P, Se) = 0.388235

-------------------------------

confusion matrix:
[[1173    6]
 [ 112    6]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08376099914312363
difference in average predicted and observed risk = -0.007218000856876378
number samples = 1297
accuracy = 0.909021
precision class 0 = 0.91284
precision class 1 = 0.5
recall class 0 = 0.994911
recall class 1 = 0.050847
false negative rate = 0.949153
false positive rate = 0.005089
positive prediction rate = 0.009252
AUC of ROC = 0.815241
AUC of PRC = 0.337407
min(+P, Se) = 0.372881

-------------------------------

confusion matrix:
[[653   3]
 [ 70   4]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09368100017309189
difference in average predicted and observed risk = -0.007688999826908113
number samples = 730
accuracy = 0.9
precision class 0 = 0.903181
precision class 1 = 0.571429
recall class 0 = 0.995427
recall class 1 = 0.054054
false negative rate = 0.945946
false positive rate = 0.004573
positive prediction rate = 0.009589
AUC of ROC = 0.800779
AUC of PRC = 0.387766
min(+P, Se) = 0.445946

-------------------------------

confusion matrix:
[[166   1]
 [ 19   5]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.09636600315570831
difference in average predicted and observed risk = -0.029287996844291675
number samples = 191
accuracy = 0.895288
precision class 0 = 0.897297
precision class 1 = 0.833333
recall class 0 = 0.994012
recall class 1 = 0.208333
false negative rate = 0.791667
false positive rate = 0.005988
positive prediction rate = 0.031414
AUC of ROC = 0.899202
AUC of PRC = 0.713758
min(+P, Se) = 0.708333

-------------------------------

confusion matrix:
[[2465    9]
 [ 242   13]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08431100100278854
difference in average predicted and observed risk = -0.009129998997211453
number samples = 2729
accuracy = 0.908025
precision class 0 = 0.910602
precision class 1 = 0.590909
recall class 0 = 0.996362
recall class 1 = 0.05098
false negative rate = 0.94902
false positive rate = 0.003638
positive prediction rate = 0.008062
AUC of ROC = 0.809333
AUC of PRC = 0.364387
min(+P, Se) = 0.380392

-------------------------------

confusion matrix:
[[1677    6]
 [ 191   25]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.09473799914121628
difference in average predicted and observed risk = -0.01900600085878372
number samples = 1899
accuracy = 0.896261
precision class 0 = 0.897752
precision class 1 = 0.806452
recall class 0 = 0.996435
recall class 1 = 0.115741
false negative rate = 0.884259
false positive rate = 0.003565
positive prediction rate = 0.016324
AUC of ROC = 0.821648
AUC of PRC = 0.456187
min(+P, Se) = 0.433036

-------------------------------

confusion matrix:
[[546   3]
 [ 73   4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.10176099836826324
difference in average predicted and observed risk = -0.021242001631736757
number samples = 626
accuracy = 0.878594
precision class 0 = 0.882068
precision class 1 = 0.571429
recall class 0 = 0.994536
recall class 1 = 0.051948
false negative rate = 0.948052
false positive rate = 0.005464
positive prediction rate = 0.011182
AUC of ROC = 0.815296
AUC of PRC = 0.402654
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[2249    0]
 [ 202    6]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07696399837732315
difference in average predicted and observed risk = -0.0076920016226768445
number samples = 2457
accuracy = 0.917786
precision class 0 = 0.917585
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.028846
false negative rate = 0.971154
false positive rate = 0.0
positive prediction rate = 0.002442
AUC of ROC = 0.80284
AUC of PRC = 0.339397
min(+P, Se) = 0.322275

-------------------------------

confusion matrix:
[[220   3]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.08740399777889252
difference in average predicted and observed risk = -0.01340200222110749
number samples = 248
accuracy = 0.887097
precision class 0 = 0.897959
precision class 1 = 0.0
recall class 0 = 0.986547
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.013453
positive prediction rate = 0.012097
AUC of ROC = 0.747085
AUC of PRC = 0.218508
min(+P, Se) = 0.28

-------------------------------

confusion matrix:
[[474   7]
 [ 59  23]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.11886200308799744
difference in average predicted and observed risk = -0.026785996912002563
number samples = 563
accuracy = 0.882771
precision class 0 = 0.889306
precision class 1 = 0.766667
recall class 0 = 0.985447
recall class 1 = 0.280488
false negative rate = 0.719512
false positive rate = 0.014553
positive prediction rate = 0.053286
AUC of ROC = 0.851174
AUC of PRC = 0.599519
min(+P, Se) = 0.52439

-------------------------------

confusion matrix:
[[653   2]
 [ 74   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09345299750566483
difference in average predicted and observed risk = -0.014176002494335177
number samples = 734
accuracy = 0.896458
precision class 0 = 0.898212
precision class 1 = 0.714286
recall class 0 = 0.996947
recall class 1 = 0.063291
false negative rate = 0.936709
false positive rate = 0.003053
positive prediction rate = 0.009537
AUC of ROC = 0.824022
AUC of PRC = 0.445259
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[4142   15]
 [ 433   38]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08858899772167206
difference in average predicted and observed risk = -0.013183002278327943
number samples = 4628
accuracy = 0.903198
precision class 0 = 0.905355
precision class 1 = 0.716981
recall class 0 = 0.996392
recall class 1 = 0.080679
false negative rate = 0.919321
false positive rate = 0.003608
positive prediction rate = 0.011452
AUC of ROC = 0.815499
AUC of PRC = 0.40827
min(+P, Se) = 0.41189

-------------------------------

==>predicting on validation



confusion matrix:
[[218   0]
 [ 18   1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08076799660921097
difference in average predicted and observed risk = 0.0005989966092109639
number samples = 237
accuracy = 0.924051
precision class 0 = 0.923729
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004219
AUC of ROC = 0.852487
AUC of PRC = 0.377126
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[385   0]
 [ 45   2]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.086837999522686
difference in average predicted and observed risk = -0.021958000477314
number samples = 432
accuracy = 0.895833
precision class 0 = 0.895349
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.042553
false negative rate = 0.957447
false positive rate = 0.0
positive prediction rate = 0.00463
AUC of ROC = 0.825035
AUC of PRC = 0.441134
min(+P, Se) = 0.446809

-------------------------------

confusion matrix:
[[104   1]
 [ 11   2]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.1078369989991188
difference in average predicted and observed risk = -0.002332001000881198
number samples = 118
accuracy = 0.898305
precision class 0 = 0.904348
precision class 1 = 0.666667
recall class 0 = 0.990476
recall class 1 = 0.153846
false negative rate = 0.846154
false positive rate = 0.009524
positive prediction rate = 0.025424
AUC of ROC = 0.904762
AUC of PRC = 0.630822
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11712200194597244
difference in average predicted and observed risk = -0.016210998054027564
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[299   1]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.09455700218677521
difference in average predicted and observed risk = -0.020486997813224786
number samples = 339
accuracy = 0.884956
precision class 0 = 0.88724
precision class 1 = 0.5
recall class 0 = 0.996667
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.003333
positive prediction rate = 0.0059
AUC of ROC = 0.807607
AUC of PRC = 0.347897
min(+P, Se) = 0.414634

-------------------------------

confusion matrix:
[[434   0]
 [ 38   6]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08543899655342102
difference in average predicted and observed risk = -0.006611003446578986
number samples = 478
accuracy = 0.920502
precision class 0 = 0.919492
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.136364
false negative rate = 0.863636
false positive rate = 0.0
positive prediction rate = 0.012552
AUC of ROC = 0.881022
AUC of PRC = 0.587417
min(+P, Se) = 0.565217

-------------------------------

confusion matrix:
[[388   0]
 [ 37   1]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.07684999704360962
difference in average predicted and observed risk = -0.012352002956390384
number samples = 426
accuracy = 0.913146
precision class 0 = 0.912941
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.026316
false negative rate = 0.973684
false positive rate = 0.0
positive prediction rate = 0.002347
AUC of ROC = 0.855263
AUC of PRC = 0.478694
min(+P, Se) = 0.487179

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.11083699762821198
difference in average predicted and observed risk = -0.0068100023717880265
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.940741
AUC of PRC = 0.703035
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.09480699896812439
difference in average predicted and observed risk = 0.0060969989681243925
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.829445
AUC of PRC = 0.253924
min(+P, Se) = 0.411765

-------------------------------

confusion matrix:
[[107   1]
 [ 17   2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10065100342035294
difference in average predicted and observed risk = -0.04895499657964705
number samples = 127
accuracy = 0.858268
precision class 0 = 0.862903
precision class 1 = 0.666667
recall class 0 = 0.990741
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.009259
positive prediction rate = 0.023622
AUC of ROC = 0.804094
AUC of PRC = 0.546814
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.11347799748182297
difference in average predicted and observed risk = 0.034530997481822964
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.92381
AUC of PRC = 0.549206
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[733   1]
 [ 76   7]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.0892219990491867
difference in average predicted and observed risk = -0.012369000950813294
number samples = 817
accuracy = 0.905753
precision class 0 = 0.906057
precision class 1 = 0.875
recall class 0 = 0.998638
recall class 1 = 0.084337
false negative rate = 0.915663
false positive rate = 0.001362
positive prediction rate = 0.009792
AUC of ROC = 0.850218
AUC of PRC = 0.484205
min(+P, Se) = 0.5

-------------------------------

Epoch 00023: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch23.state
Epoch 24/100
 - 317s - loss: 0.2784 - val_loss: 0.2504

==>predicting on train



confusion matrix:
[[2140   15]
 [ 217   38]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.08109799772500992
difference in average predicted and observed risk = -0.024711002274990082
number samples = 2410
accuracy = 0.903734
precision class 0 = 0.907934
precision class 1 = 0.716981
recall class 0 = 0.993039
recall class 1 = 0.14902
false negative rate = 0.85098
false positive rate = 0.006961
positive prediction rate = 0.021992
AUC of ROC = 0.81837
AUC of PRC = 0.426806
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[1166   13]
 [ 105   13]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.07674500346183777
difference in average predicted and observed risk = -0.014233996538162236
number samples = 1297
accuracy = 0.909021
precision class 0 = 0.917388
precision class 1 = 0.5
recall class 0 = 0.988974
recall class 1 = 0.110169
false negative rate = 0.889831
false positive rate = 0.011026
positive prediction rate = 0.020046
AUC of ROC = 0.818469
AUC of PRC = 0.351706
min(+P, Se) = 0.389831

-------------------------------

confusion matrix:
[[652   4]
 [ 66   8]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.08747299760580063
difference in average predicted and observed risk = -0.013897002394199373
number samples = 730
accuracy = 0.90411
precision class 0 = 0.908078
precision class 1 = 0.666667
recall class 0 = 0.993902
recall class 1 = 0.108108
false negative rate = 0.891892
false positive rate = 0.006098
positive prediction rate = 0.016438
AUC of ROC = 0.793507
AUC of PRC = 0.390595
min(+P, Se) = 0.43038

-------------------------------

confusion matrix:
[[166   1]
 [ 15   9]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.0930040031671524
difference in average predicted and observed risk = -0.03264999683284758
number samples = 191
accuracy = 0.91623
precision class 0 = 0.917127
precision class 1 = 0.9
recall class 0 = 0.994012
recall class 1 = 0.375
false negative rate = 0.625
false positive rate = 0.005988
positive prediction rate = 0.052356
AUC of ROC = 0.902445
AUC of PRC = 0.700905
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2457   17]
 [ 230   25]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07681100070476532
difference in average predicted and observed risk = -0.016629999295234676
number samples = 2729
accuracy = 0.909491
precision class 0 = 0.914403
precision class 1 = 0.595238
recall class 0 = 0.993129
recall class 1 = 0.098039
false negative rate = 0.901961
false positive rate = 0.006871
positive prediction rate = 0.01539
AUC of ROC = 0.811908
AUC of PRC = 0.366724
min(+P, Se) = 0.388235

-------------------------------

confusion matrix:
[[1667   16]
 [ 173   43]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.08793500065803528
difference in average predicted and observed risk = -0.02580899934196472
number samples = 1899
accuracy = 0.900474
precision class 0 = 0.905978
precision class 1 = 0.728814
recall class 0 = 0.990493
recall class 1 = 0.199074
false negative rate = 0.800926
false positive rate = 0.009507
positive prediction rate = 0.031069
AUC of ROC = 0.825549
AUC of PRC = 0.475757
min(+P, Se) = 0.440909

-------------------------------

confusion matrix:
[[543   6]
 [ 68   9]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.0956680029630661
difference in average predicted and observed risk = -0.0273349970369339
number samples = 626
accuracy = 0.881789
precision class 0 = 0.888707
precision class 1 = 0.6
recall class 0 = 0.989071
recall class 1 = 0.116883
false negative rate = 0.883117
false positive rate = 0.010929
positive prediction rate = 0.023962
AUC of ROC = 0.815935
AUC of PRC = 0.426988
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[2243    6]
 [ 189   19]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.06847599893808365
difference in average predicted and observed risk = -0.016180001061916346
number samples = 2457
accuracy = 0.920635
precision class 0 = 0.922286
precision class 1 = 0.76
recall class 0 = 0.997332
recall class 1 = 0.091346
false negative rate = 0.908654
false positive rate = 0.002668
positive prediction rate = 0.010175
AUC of ROC = 0.808682
AUC of PRC = 0.352066
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[218   5]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.08067700266838074
difference in average predicted and observed risk = -0.02012899733161927
number samples = 248
accuracy = 0.879032
precision class 0 = 0.897119
precision class 1 = 0.0
recall class 0 = 0.977578
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.022422
positive prediction rate = 0.020161
AUC of ROC = 0.764484
AUC of PRC = 0.235159
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[471  10]
 [ 54  28]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.1146790012717247
difference in average predicted and observed risk = -0.0309689987282753
number samples = 563
accuracy = 0.886323
precision class 0 = 0.897143
precision class 1 = 0.736842
recall class 0 = 0.97921
recall class 1 = 0.341463
false negative rate = 0.658537
false positive rate = 0.02079
positive prediction rate = 0.067496
AUC of ROC = 0.852492
AUC of PRC = 0.615127
min(+P, Se) = 0.52439

-------------------------------

confusion matrix:
[[649   6]
 [ 67  12]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.08705399930477142
difference in average predicted and observed risk = -0.02057500069522858
number samples = 734
accuracy = 0.900545
precision class 0 = 0.906425
precision class 1 = 0.666667
recall class 0 = 0.99084
recall class 1 = 0.151899
false negative rate = 0.848101
false positive rate = 0.00916
positive prediction rate = 0.024523
AUC of ROC = 0.817219
AUC of PRC = 0.441806
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[4124   33]
 [ 403   68]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08137500286102295
difference in average predicted and observed risk = -0.020396997138977052
number samples = 4628
accuracy = 0.905791
precision class 0 = 0.910979
precision class 1 = 0.673267
recall class 0 = 0.992062
recall class 1 = 0.144374
false negative rate = 0.855626
false positive rate = 0.007938
positive prediction rate = 0.021824
AUC of ROC = 0.818287
AUC of PRC = 0.418873
min(+P, Se) = 0.416136

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 16   3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.07315400242805481
difference in average predicted and observed risk = -0.007014997571945195
number samples = 237
accuracy = 0.924051
precision class 0 = 0.931035
precision class 1 = 0.6
recall class 0 = 0.990826
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009174
positive prediction rate = 0.021097
AUC of ROC = 0.86142
AUC of PRC = 0.379035
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[385   0]
 [ 44   3]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.07819099724292755
difference in average predicted and observed risk = -0.030605002757072453
number samples = 432
accuracy = 0.898148
precision class 0 = 0.897436
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.06383
false negative rate = 0.93617
false positive rate = 0.0
positive prediction rate = 0.006944
AUC of ROC = 0.832882
AUC of PRC = 0.438159
min(+P, Se) = 0.425532

-------------------------------

confusion matrix:
[[104   1]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10319899767637253
difference in average predicted and observed risk = -0.006970002323627475
number samples = 118
accuracy = 0.90678
precision class 0 = 0.912281
precision class 1 = 0.75
recall class 0 = 0.990476
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.009524
positive prediction rate = 0.033898
AUC of ROC = 0.90989
AUC of PRC = 0.60509
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11555899679660797
difference in average predicted and observed risk = -0.017774003203392036
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[298   2]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.0867919996380806
difference in average predicted and observed risk = -0.028252000361919397
number samples = 339
accuracy = 0.882006
precision class 0 = 0.886905
precision class 1 = 0.333333
recall class 0 = 0.993333
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.006667
positive prediction rate = 0.00885
AUC of ROC = 0.817949
AUC of PRC = 0.348157
min(+P, Se) = 0.418605

-------------------------------

confusion matrix:
[[433   1]
 [ 34  10]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.07811299711465836
difference in average predicted and observed risk = -0.013937002885341651
number samples = 478
accuracy = 0.926778
precision class 0 = 0.927195
precision class 1 = 0.909091
recall class 0 = 0.997696
recall class 1 = 0.227273
false negative rate = 0.772727
false positive rate = 0.002304
positive prediction rate = 0.023013
AUC of ROC = 0.884636
AUC of PRC = 0.599946
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[388   0]
 [ 35   3]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.06877399981021881
difference in average predicted and observed risk = -0.020428000189781192
number samples = 426
accuracy = 0.91784
precision class 0 = 0.917258
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.078947
false negative rate = 0.921053
false positive rate = 0.0
positive prediction rate = 0.007042
AUC of ROC = 0.857637
AUC of PRC = 0.488093
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.10509300231933594
difference in average predicted and observed risk = -0.012553997680664064
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.942593
AUC of PRC = 0.70106
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.08503299951553345
difference in average predicted and observed risk = -0.00367700048446655
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.855189
AUC of PRC = 0.275105
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[106   2]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09356299787759781
difference in average predicted and observed risk = -0.05604300212240218
number samples = 127
accuracy = 0.858268
precision class 0 = 0.868852
precision class 1 = 0.6
recall class 0 = 0.981481
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.018519
positive prediction rate = 0.03937
AUC of ROC = 0.809942
AUC of PRC = 0.534966
min(+P, Se) = 0.47619

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.11359500139951706
difference in average predicted and observed risk = 0.034648001399517056
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.904762
AUC of PRC = 0.518849
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[731   3]
 [ 72  11]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.08171399682760239
difference in average predicted and observed risk = -0.019877003172397614
number samples = 817
accuracy = 0.908201
precision class 0 = 0.910336
precision class 1 = 0.785714
recall class 0 = 0.995913
recall class 1 = 0.13253
false negative rate = 0.86747
false positive rate = 0.004087
positive prediction rate = 0.017136
AUC of ROC = 0.857342
AUC of PRC = 0.486632
min(+P, Se) = 0.488636

-------------------------------

Epoch 00024: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch24.state
Epoch 25/100
 - 321s - loss: 0.2807 - val_loss: 0.2529

==>predicting on train



confusion matrix:
[[2139   16]
 [ 216   39]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.1075889989733696
difference in average predicted and observed risk = 0.0017799989733695981
number samples = 2410
accuracy = 0.903734
precision class 0 = 0.90828
precision class 1 = 0.709091
recall class 0 = 0.992575
recall class 1 = 0.152941
false negative rate = 0.847059
false positive rate = 0.007425
positive prediction rate = 0.022822
AUC of ROC = 0.817257
AUC of PRC = 0.425043
min(+P, Se) = 0.403922

-------------------------------

confusion matrix:
[[1166   13]
 [ 103   15]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.10006099939346313
difference in average predicted and observed risk = 0.00908199939346313
number samples = 1297
accuracy = 0.910563
precision class 0 = 0.918834
precision class 1 = 0.535714
recall class 0 = 0.988974
recall class 1 = 0.127119
false negative rate = 0.872881
false positive rate = 0.011026
positive prediction rate = 0.021588
AUC of ROC = 0.817815
AUC of PRC = 0.352801
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[650   6]
 [ 65   9]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.11475399881601334
difference in average predicted and observed risk = 0.013383998816013334
number samples = 730
accuracy = 0.90274
precision class 0 = 0.909091
precision class 1 = 0.6
recall class 0 = 0.990854
recall class 1 = 0.121622
false negative rate = 0.878378
false positive rate = 0.009146
positive prediction rate = 0.020548
AUC of ROC = 0.795835
AUC of PRC = 0.391201
min(+P, Se) = 0.441558

-------------------------------

confusion matrix:
[[166   1]
 [ 15   9]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.11583299934864044
difference in average predicted and observed risk = -0.009821000651359546
number samples = 191
accuracy = 0.91623
precision class 0 = 0.917127
precision class 1 = 0.9
recall class 0 = 0.994012
recall class 1 = 0.375
false negative rate = 0.625
false positive rate = 0.005988
positive prediction rate = 0.052356
AUC of ROC = 0.903443
AUC of PRC = 0.707609
min(+P, Se) = 0.708333

-------------------------------

confusion matrix:
[[2455   19]
 [ 226   29]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.1023619994521141
difference in average predicted and observed risk = 0.008920999452114109
number samples = 2729
accuracy = 0.910224
precision class 0 = 0.915703
precision class 1 = 0.604167
recall class 0 = 0.99232
recall class 1 = 0.113725
false negative rate = 0.886275
false positive rate = 0.00768
positive prediction rate = 0.017589
AUC of ROC = 0.809671
AUC of PRC = 0.365199
min(+P, Se) = 0.388235

-------------------------------

confusion matrix:
[[1666   17]
 [ 173   43]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.11354199796915054
difference in average predicted and observed risk = -0.00020200203084945467
number samples = 1899
accuracy = 0.899947
precision class 0 = 0.905927
precision class 1 = 0.716667
recall class 0 = 0.989899
recall class 1 = 0.199074
false negative rate = 0.800926
false positive rate = 0.010101
positive prediction rate = 0.031596
AUC of ROC = 0.826454
AUC of PRC = 0.47354
min(+P, Se) = 0.439815

-------------------------------

confusion matrix:
[[541   8]
 [ 67  10]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.12338700145483017
difference in average predicted and observed risk = 0.00038400145483016845
number samples = 626
accuracy = 0.880192
precision class 0 = 0.889803
precision class 1 = 0.555556
recall class 0 = 0.985428
recall class 1 = 0.12987
false negative rate = 0.87013
false positive rate = 0.014572
positive prediction rate = 0.028754
AUC of ROC = 0.81558
AUC of PRC = 0.411299
min(+P, Se) = 0.435897

-------------------------------

confusion matrix:
[[2241    8]
 [ 187   21]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.09347599744796753
difference in average predicted and observed risk = 0.008819997447967534
number samples = 2457
accuracy = 0.920635
precision class 0 = 0.922982
precision class 1 = 0.724138
recall class 0 = 0.996443
recall class 1 = 0.100962
false negative rate = 0.899038
false positive rate = 0.003557
positive prediction rate = 0.011803
AUC of ROC = 0.807746
AUC of PRC = 0.347969
min(+P, Se) = 0.331731

-------------------------------

confusion matrix:
[[218   5]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.1088619977235794
difference in average predicted and observed risk = 0.0080559977235794
number samples = 248
accuracy = 0.879032
precision class 0 = 0.897119
precision class 1 = 0.0
recall class 0 = 0.977578
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.022422
positive prediction rate = 0.020161
AUC of ROC = 0.7487
AUC of PRC = 0.227615
min(+P, Se) = 0.296296

-------------------------------

confusion matrix:
[[473   8]
 [ 54  28]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.13952499628067017
difference in average predicted and observed risk = -0.006123003719329834
number samples = 563
accuracy = 0.889876
precision class 0 = 0.897533
precision class 1 = 0.777778
recall class 0 = 0.983368
recall class 1 = 0.341463
false negative rate = 0.658537
false positive rate = 0.016632
positive prediction rate = 0.063943
AUC of ROC = 0.855509
AUC of PRC = 0.614623
min(+P, Se) = 0.536585

-------------------------------

confusion matrix:
[[648   7]
 [ 66  13]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.11240100115537643
difference in average predicted and observed risk = 0.004772001155376432
number samples = 734
accuracy = 0.900545
precision class 0 = 0.907563
precision class 1 = 0.65
recall class 0 = 0.989313
recall class 1 = 0.164557
false negative rate = 0.835443
false positive rate = 0.010687
positive prediction rate = 0.027248
AUC of ROC = 0.815673
AUC of PRC = 0.437787
min(+P, Se) = 0.45977

-------------------------------

confusion matrix:
[[4121   36]
 [ 399   72]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.10694999992847443
difference in average predicted and observed risk = 0.005177999928474425
number samples = 4628
accuracy = 0.906007
precision class 0 = 0.911726
precision class 1 = 0.666667
recall class 0 = 0.99134
recall class 1 = 0.152866
false negative rate = 0.847134
false positive rate = 0.00866
positive prediction rate = 0.023336
AUC of ROC = 0.817565
AUC of PRC = 0.416571
min(+P, Se) = 0.415612

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 16   3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.09733899682760239
difference in average predicted and observed risk = 0.017169996827602382
number samples = 237
accuracy = 0.924051
precision class 0 = 0.931035
precision class 1 = 0.6
recall class 0 = 0.990826
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009174
positive prediction rate = 0.021097
AUC of ROC = 0.847417
AUC of PRC = 0.376426
min(+P, Se) = 0.434783

-------------------------------

confusion matrix:
[[385   0]
 [ 43   4]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.10462699830532074
difference in average predicted and observed risk = -0.004169001694679264
number samples = 432
accuracy = 0.900463
precision class 0 = 0.899533
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.085106
false negative rate = 0.914894
false positive rate = 0.0
positive prediction rate = 0.009259
AUC of ROC = 0.831611
AUC of PRC = 0.446765
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[104   1]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.13131999969482422
difference in average predicted and observed risk = 0.021150999694824216
number samples = 118
accuracy = 0.90678
precision class 0 = 0.912281
precision class 1 = 0.75
recall class 0 = 0.990476
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.009524
positive prediction rate = 0.033898
AUC of ROC = 0.916484
AUC of PRC = 0.555473
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.1412149965763092
difference in average predicted and observed risk = 0.007881996576309197
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[298   2]
 [ 37   2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.11314599961042404
difference in average predicted and observed risk = -0.0018980003895759517
number samples = 339
accuracy = 0.884956
precision class 0 = 0.889552
precision class 1 = 0.5
recall class 0 = 0.993333
recall class 1 = 0.051282
false negative rate = 0.948718
false positive rate = 0.006667
positive prediction rate = 0.011799
AUC of ROC = 0.820769
AUC of PRC = 0.341901
min(+P, Se) = 0.396226

-------------------------------

confusion matrix:
[[433   1]
 [ 34  10]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.10385800153017044
difference in average predicted and observed risk = 0.011808001530170434
number samples = 478
accuracy = 0.926778
precision class 0 = 0.927195
precision class 1 = 0.909091
recall class 0 = 0.997696
recall class 1 = 0.227273
false negative rate = 0.772727
false positive rate = 0.002304
positive prediction rate = 0.023013
AUC of ROC = 0.876623
AUC of PRC = 0.590093
min(+P, Se) = 0.568182

-------------------------------

confusion matrix:
[[388   0]
 [ 34   4]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.09392099827528
difference in average predicted and observed risk = 0.004718998275279995
number samples = 426
accuracy = 0.920188
precision class 0 = 0.919431
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.0
positive prediction rate = 0.00939
AUC of ROC = 0.852279
AUC of PRC = 0.47907
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.13162100315093994
difference in average predicted and observed risk = 0.01397400315093994
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.946296
AUC of PRC = 0.716225
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.11339300125837326
difference in average predicted and observed risk = 0.024683001258373263
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.840708
AUC of PRC = 0.258363
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[106   2]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.11961100250482559
difference in average predicted and observed risk = -0.029994997495174397
number samples = 127
accuracy = 0.858268
precision class 0 = 0.868852
precision class 1 = 0.6
recall class 0 = 0.981481
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.018519
positive prediction rate = 0.03937
AUC of ROC = 0.818226
AUC of PRC = 0.53909
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.13982899487018585
difference in average predicted and observed risk = 0.06088199487018585
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.92381
AUC of PRC = 0.549206
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[731   3]
 [ 71  12]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.10771200060844421
difference in average predicted and observed risk = 0.006121000608444213
number samples = 817
accuracy = 0.909425
precision class 0 = 0.911471
precision class 1 = 0.8
recall class 0 = 0.995913
recall class 1 = 0.144578
false negative rate = 0.855422
false positive rate = 0.004087
positive prediction rate = 0.01836
AUC of ROC = 0.853649
AUC of PRC = 0.481701
min(+P, Se) = 0.477273

-------------------------------

Epoch 00025: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch25.state
Epoch 26/100
 - 318s - loss: 0.2760 - val_loss: 0.2493

==>predicting on train



confusion matrix:
[[2140   15]
 [ 217   38]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.09645699709653854
difference in average predicted and observed risk = -0.009352002903461457
number samples = 2410
accuracy = 0.903734
precision class 0 = 0.907934
precision class 1 = 0.716981
recall class 0 = 0.993039
recall class 1 = 0.14902
false negative rate = 0.85098
false positive rate = 0.006961
positive prediction rate = 0.021992
AUC of ROC = 0.824037
AUC of PRC = 0.431598
min(+P, Se) = 0.402344

-------------------------------

confusion matrix:
[[1166   13]
 [ 106   12]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.09111099690198898
difference in average predicted and observed risk = 0.00013199690198897884
number samples = 1297
accuracy = 0.90825
precision class 0 = 0.916667
precision class 1 = 0.48
recall class 0 = 0.988974
recall class 1 = 0.101695
false negative rate = 0.898305
false positive rate = 0.011026
positive prediction rate = 0.019275
AUC of ROC = 0.818052
AUC of PRC = 0.347481
min(+P, Se) = 0.378151

-------------------------------

confusion matrix:
[[651   5]
 [ 66   8]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.10361900180578232
difference in average predicted and observed risk = 0.0022490018057823163
number samples = 730
accuracy = 0.90274
precision class 0 = 0.90795
precision class 1 = 0.615385
recall class 0 = 0.992378
recall class 1 = 0.108108
false negative rate = 0.891892
false positive rate = 0.007622
positive prediction rate = 0.017808
AUC of ROC = 0.813345
AUC of PRC = 0.385539
min(+P, Se) = 0.445946

-------------------------------

confusion matrix:
[[165   2]
 [ 15   9]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.10739000141620636
difference in average predicted and observed risk = -0.018263998583793628
number samples = 191
accuracy = 0.910995
precision class 0 = 0.916667
precision class 1 = 0.818182
recall class 0 = 0.988024
recall class 1 = 0.375
false negative rate = 0.625
false positive rate = 0.011976
positive prediction rate = 0.057592
AUC of ROC = 0.900449
AUC of PRC = 0.694382
min(+P, Se) = 0.708333

-------------------------------

confusion matrix:
[[2452   22]
 [ 231   24]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.09186399728059769
difference in average predicted and observed risk = -0.0015770027194023095
number samples = 2729
accuracy = 0.907292
precision class 0 = 0.913902
precision class 1 = 0.521739
recall class 0 = 0.991108
recall class 1 = 0.094118
false negative rate = 0.905882
false positive rate = 0.008892
positive prediction rate = 0.016856
AUC of ROC = 0.820542
AUC of PRC = 0.370703
min(+P, Se) = 0.388235

-------------------------------

confusion matrix:
[[1670   13]
 [ 173   43]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.10325899720191956
difference in average predicted and observed risk = -0.010485002798080442
number samples = 1899
accuracy = 0.902054
precision class 0 = 0.906131
precision class 1 = 0.767857
recall class 0 = 0.992276
recall class 1 = 0.199074
false negative rate = 0.800926
false positive rate = 0.007724
positive prediction rate = 0.029489
AUC of ROC = 0.827375
AUC of PRC = 0.474937
min(+P, Se) = 0.435185

-------------------------------

confusion matrix:
[[542   7]
 [ 69   8]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.11076200008392334
difference in average predicted and observed risk = -0.012240999916076661
number samples = 626
accuracy = 0.878594
precision class 0 = 0.88707
precision class 1 = 0.533333
recall class 0 = 0.98725
recall class 1 = 0.103896
false negative rate = 0.896104
false positive rate = 0.01275
positive prediction rate = 0.023962
AUC of ROC = 0.824214
AUC of PRC = 0.437346
min(+P, Se) = 0.443038

-------------------------------

confusion matrix:
[[2240    9]
 [ 189   19]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08362399786710739
difference in average predicted and observed risk = -0.0010320021328926038
number samples = 2457
accuracy = 0.919414
precision class 0 = 0.92219
precision class 1 = 0.678571
recall class 0 = 0.995998
recall class 1 = 0.091346
false negative rate = 0.908654
false positive rate = 0.004002
positive prediction rate = 0.011396
AUC of ROC = 0.814093
AUC of PRC = 0.352129
min(+P, Se) = 0.336538

-------------------------------

confusion matrix:
[[218   5]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.10063199698925018
difference in average predicted and observed risk = -0.0001740030107498236
number samples = 248
accuracy = 0.879032
precision class 0 = 0.897119
precision class 1 = 0.0
recall class 0 = 0.977578
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.022422
positive prediction rate = 0.020161
AUC of ROC = 0.764126
AUC of PRC = 0.235775
min(+P, Se) = 0.321429

-------------------------------

confusion matrix:
[[472   9]
 [ 54  28]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12951700389385223
difference in average predicted and observed risk = -0.016130996106147766
number samples = 563
accuracy = 0.888099
precision class 0 = 0.897338
precision class 1 = 0.756757
recall class 0 = 0.981289
recall class 1 = 0.341463
false negative rate = 0.658537
false positive rate = 0.018711
positive prediction rate = 0.065719
AUC of ROC = 0.852644
AUC of PRC = 0.6072
min(+P, Se) = 0.54878

-------------------------------

confusion matrix:
[[650   5]
 [ 67  12]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.10096800327301025
difference in average predicted and observed risk = -0.0066609967269897485
number samples = 734
accuracy = 0.901907
precision class 0 = 0.906555
precision class 1 = 0.705882
recall class 0 = 0.992366
recall class 1 = 0.151899
false negative rate = 0.848101
false positive rate = 0.007634
positive prediction rate = 0.023161
AUC of ROC = 0.827094
AUC of PRC = 0.448566
min(+P, Se) = 0.455696

-------------------------------

confusion matrix:
[[4122   35]
 [ 404   67]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09653999656438828
difference in average predicted and observed risk = -0.005232003435611726
number samples = 4628
accuracy = 0.905143
precision class 0 = 0.910738
precision class 1 = 0.656863
recall class 0 = 0.99158
recall class 1 = 0.142251
false negative rate = 0.857749
false positive rate = 0.00842
positive prediction rate = 0.02204
AUC of ROC = 0.82397
AUC of PRC = 0.42097
min(+P, Se) = 0.41189

-------------------------------

==>predicting on validation



confusion matrix:
[[218   0]
 [ 17   2]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08835099637508392
difference in average predicted and observed risk = 0.00818199637508392
number samples = 237
accuracy = 0.92827
precision class 0 = 0.92766
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.0
positive prediction rate = 0.008439
AUC of ROC = 0.858764
AUC of PRC = 0.418954
min(+P, Se) = 0.434783

-------------------------------

confusion matrix:
[[385   0]
 [ 44   3]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.09370400011539459
difference in average predicted and observed risk = -0.015091999884605412
number samples = 432
accuracy = 0.898148
precision class 0 = 0.897436
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.06383
false negative rate = 0.93617
false positive rate = 0.0
positive prediction rate = 0.006944
AUC of ROC = 0.839293
AUC of PRC = 0.45496
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[104   1]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.12009499967098236
difference in average predicted and observed risk = 0.009925999670982358
number samples = 118
accuracy = 0.90678
precision class 0 = 0.912281
precision class 1 = 0.75
recall class 0 = 0.990476
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.009524
positive prediction rate = 0.033898
AUC of ROC = 0.911355
AUC of PRC = 0.602534
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.1309559941291809
difference in average predicted and observed risk = -0.002377005870819099
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[299   1]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.10348299890756607
difference in average predicted and observed risk = -0.011561001092433923
number samples = 339
accuracy = 0.884956
precision class 0 = 0.88724
precision class 1 = 0.5
recall class 0 = 0.996667
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.003333
positive prediction rate = 0.0059
AUC of ROC = 0.828547
AUC of PRC = 0.363755
min(+P, Se) = 0.425

-------------------------------

confusion matrix:
[[434   0]
 [ 35   9]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.09296700358390808
difference in average predicted and observed risk = 0.0009170035839080742
number samples = 478
accuracy = 0.926778
precision class 0 = 0.925373
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.204545
false negative rate = 0.795455
false positive rate = 0.0
positive prediction rate = 0.018828
AUC of ROC = 0.882122
AUC of PRC = 0.60031
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 36   2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08337400108575821
difference in average predicted and observed risk = -0.005827998914241794
number samples = 426
accuracy = 0.915493
precision class 0 = 0.915094
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004695
AUC of ROC = 0.865979
AUC of PRC = 0.488718
min(+P, Se) = 0.487179

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.12357199937105179
difference in average predicted and observed risk = 0.005924999371051787
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.946296
AUC of PRC = 0.713946
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.1012599989771843
difference in average predicted and observed risk = 0.012549998977184298
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.84473
AUC of PRC = 0.266345
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[107   1]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10994099825620651
difference in average predicted and observed risk = -0.03966500174379348
number samples = 127
accuracy = 0.866142
precision class 0 = 0.869919
precision class 1 = 0.75
recall class 0 = 0.990741
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009259
positive prediction rate = 0.031496
AUC of ROC = 0.813353
AUC of PRC = 0.545452
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.12838099896907806
difference in average predicted and observed risk = 0.04943399896907806
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.914286
AUC of PRC = 0.538889
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[733   1]
 [ 73  10]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.0973299965262413
difference in average predicted and observed risk = -0.004261003473758698
number samples = 817
accuracy = 0.909425
precision class 0 = 0.909429
precision class 1 = 0.909091
recall class 0 = 0.998638
recall class 1 = 0.120482
false negative rate = 0.879518
false positive rate = 0.001362
positive prediction rate = 0.013464
AUC of ROC = 0.860724
AUC of PRC = 0.498783
min(+P, Se) = 0.482353

-------------------------------

Epoch 00026: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch26.state
Epoch 27/100
 - 319s - loss: 0.2783 - val_loss: 0.2477

==>predicting on train



confusion matrix:
[[2131   24]
 [ 210   45]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.09456299990415573
difference in average predicted and observed risk = -0.011246000095844269
number samples = 2410
accuracy = 0.902905
precision class 0 = 0.910295
precision class 1 = 0.652174
recall class 0 = 0.988863
recall class 1 = 0.176471
false negative rate = 0.823529
false positive rate = 0.011137
positive prediction rate = 0.028631
AUC of ROC = 0.81728
AUC of PRC = 0.423149
min(+P, Se) = 0.389961

-------------------------------

confusion matrix:
[[1164   15]
 [  99   19]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08911900222301483
difference in average predicted and observed risk = -0.0018599977769851728
number samples = 1297
accuracy = 0.912105
precision class 0 = 0.921615
precision class 1 = 0.558824
recall class 0 = 0.987277
recall class 1 = 0.161017
false negative rate = 0.838983
false positive rate = 0.012723
positive prediction rate = 0.026214
AUC of ROC = 0.818893
AUC of PRC = 0.354969
min(+P, Se) = 0.371901

-------------------------------

confusion matrix:
[[647   9]
 [ 60  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.1054769977927208
difference in average predicted and observed risk = 0.004106997792720793
number samples = 730
accuracy = 0.905479
precision class 0 = 0.915134
precision class 1 = 0.608696
recall class 0 = 0.986281
recall class 1 = 0.189189
false negative rate = 0.810811
false positive rate = 0.01372
positive prediction rate = 0.031507
AUC of ROC = 0.801129
AUC of PRC = 0.392473
min(+P, Se) = 0.43038

-------------------------------

confusion matrix:
[[165   2]
 [ 14  10]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.10828399658203125
difference in average predicted and observed risk = -0.017370003417968738
number samples = 191
accuracy = 0.91623
precision class 0 = 0.921788
precision class 1 = 0.833333
recall class 0 = 0.988024
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.011976
positive prediction rate = 0.062827
AUC of ROC = 0.896707
AUC of PRC = 0.683739
min(+P, Se) = 0.62963

-------------------------------

confusion matrix:
[[2445   29]
 [ 213   42]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.09075000137090683
difference in average predicted and observed risk = -0.0026909986290931664
number samples = 2729
accuracy = 0.911323
precision class 0 = 0.919865
precision class 1 = 0.591549
recall class 0 = 0.988278
recall class 1 = 0.164706
false negative rate = 0.835294
false positive rate = 0.011722
positive prediction rate = 0.026017
AUC of ROC = 0.811568
AUC of PRC = 0.363534
min(+P, Se) = 0.388235

-------------------------------

confusion matrix:
[[1662   21]
 [ 170   46]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.10189899802207947
difference in average predicted and observed risk = -0.01184500197792053
number samples = 1899
accuracy = 0.899421
precision class 0 = 0.907205
precision class 1 = 0.686567
recall class 0 = 0.987522
recall class 1 = 0.212963
false negative rate = 0.787037
false positive rate = 0.012478
positive prediction rate = 0.035282
AUC of ROC = 0.825956
AUC of PRC = 0.473136
min(+P, Se) = 0.43318

-------------------------------

confusion matrix:
[[541   8]
 [ 65  12]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.1090250015258789
difference in average predicted and observed risk = -0.013977998474121095
number samples = 626
accuracy = 0.883387
precision class 0 = 0.892739
precision class 1 = 0.6
recall class 0 = 0.985428
recall class 1 = 0.155844
false negative rate = 0.844156
false positive rate = 0.014572
positive prediction rate = 0.031949
AUC of ROC = 0.821446
AUC of PRC = 0.418123
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[2232   17]
 [ 181   27]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08237200230360031
difference in average predicted and observed risk = -0.002283997696399684
number samples = 2457
accuracy = 0.919414
precision class 0 = 0.92499
precision class 1 = 0.613636
recall class 0 = 0.992441
recall class 1 = 0.129808
false negative rate = 0.870192
false positive rate = 0.007559
positive prediction rate = 0.017908
AUC of ROC = 0.808263
AUC of PRC = 0.345017
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[218   5]
 [ 22   3]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.09670700132846832
difference in average predicted and observed risk = -0.004098998671531684
number samples = 248
accuracy = 0.891129
precision class 0 = 0.908333
precision class 1 = 0.375
recall class 0 = 0.977578
recall class 1 = 0.12
false negative rate = 0.88
false positive rate = 0.022422
positive prediction rate = 0.032258
AUC of ROC = 0.753004
AUC of PRC = 0.22747
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[469  12]
 [ 53  29]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.1259250044822693
difference in average predicted and observed risk = -0.019722995517730713
number samples = 563
accuracy = 0.884547
precision class 0 = 0.898467
precision class 1 = 0.707317
recall class 0 = 0.975052
recall class 1 = 0.353659
false negative rate = 0.646341
false positive rate = 0.024948
positive prediction rate = 0.072824
AUC of ROC = 0.847168
AUC of PRC = 0.612536
min(+P, Se) = 0.54878

-------------------------------

confusion matrix:
[[647   8]
 [ 62  17]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.10306199640035629
difference in average predicted and observed risk = -0.00456700359964371
number samples = 734
accuracy = 0.904632
precision class 0 = 0.912553
precision class 1 = 0.68
recall class 0 = 0.987786
recall class 1 = 0.21519
false negative rate = 0.78481
false positive rate = 0.012214
positive prediction rate = 0.03406
AUC of ROC = 0.823017
AUC of PRC = 0.440322
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[4107   50]
 [ 383   88]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09532500058412552
difference in average predicted and observed risk = -0.0064469994158744826
number samples = 4628
accuracy = 0.906439
precision class 0 = 0.914699
precision class 1 = 0.637681
recall class 0 = 0.987972
recall class 1 = 0.186837
false negative rate = 0.813163
false positive rate = 0.012028
positive prediction rate = 0.029818
AUC of ROC = 0.818187
AUC of PRC = 0.414933
min(+P, Se) = 0.408034

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08622299879789352
difference in average predicted and observed risk = 0.00605399879789352
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.864317
AUC of PRC = 0.374482
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[385   0]
 [ 42   5]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.09104199707508087
difference in average predicted and observed risk = -0.017754002924919132
number samples = 432
accuracy = 0.902778
precision class 0 = 0.901639
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.106383
false negative rate = 0.893617
false positive rate = 0.0
positive prediction rate = 0.011574
AUC of ROC = 0.833766
AUC of PRC = 0.444242
min(+P, Se) = 0.425926

-------------------------------

confusion matrix:
[[103   2]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.12193799763917923
difference in average predicted and observed risk = 0.011768997639179227
number samples = 118
accuracy = 0.915254
precision class 0 = 0.927928
precision class 1 = 0.714286
recall class 0 = 0.980952
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.019048
positive prediction rate = 0.059322
AUC of ROC = 0.904762
AUC of PRC = 0.539748
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[26  0]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.1357160061597824
difference in average predicted and observed risk = 0.0023830061597824026
number samples = 30
accuracy = 0.966667
precision class 0 = 0.962963
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.0
positive prediction rate = 0.1
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[297   3]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.10180000215768814
difference in average predicted and observed risk = -0.013243997842311853
number samples = 339
accuracy = 0.884956
precision class 0 = 0.891892
precision class 1 = 0.5
recall class 0 = 0.99
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.01
positive prediction rate = 0.017699
AUC of ROC = 0.813162
AUC of PRC = 0.328125
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[432   2]
 [ 30  14]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.09145399928092957
difference in average predicted and observed risk = -0.0005960007190704414
number samples = 478
accuracy = 0.933054
precision class 0 = 0.935065
precision class 1 = 0.875
recall class 0 = 0.995392
recall class 1 = 0.318182
false negative rate = 0.681818
false positive rate = 0.004608
positive prediction rate = 0.033473
AUC of ROC = 0.88673
AUC of PRC = 0.59649
min(+P, Se) = 0.568182

-------------------------------

confusion matrix:
[[388   0]
 [ 31   7]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08167099952697754
difference in average predicted and observed risk = -0.0075310004730224644
number samples = 426
accuracy = 0.92723
precision class 0 = 0.926014
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.184211
false negative rate = 0.815789
false positive rate = 0.0
positive prediction rate = 0.016432
AUC of ROC = 0.862859
AUC of PRC = 0.484452
min(+P, Se) = 0.475

-------------------------------

confusion matrix:
[[88  2]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.11804699897766113
difference in average predicted and observed risk = 0.00039999897766113124
number samples = 102
accuracy = 0.901961
precision class 0 = 0.916667
precision class 1 = 0.666667
recall class 0 = 0.977778
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.022222
positive prediction rate = 0.058824
AUC of ROC = 0.943519
AUC of PRC = 0.708861
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.09983400255441666
difference in average predicted and observed risk = 0.01112400255441666
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.8214
AUC of PRC = 0.239846
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[106   2]
 [ 14   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.11099199950695038
difference in average predicted and observed risk = -0.03861400049304961
number samples = 127
accuracy = 0.874016
precision class 0 = 0.883333
precision class 1 = 0.714286
recall class 0 = 0.981481
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.018519
positive prediction rate = 0.055118
AUC of ROC = 0.803606
AUC of PRC = 0.523097
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.12939000129699707
difference in average predicted and observed risk = 0.05044300129699707
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.92381
AUC of PRC = 0.549206
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[729   5]
 [ 66  17]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09574700146913528
difference in average predicted and observed risk = -0.005843998530864716
number samples = 817
accuracy = 0.913097
precision class 0 = 0.916981
precision class 1 = 0.772727
recall class 0 = 0.993188
recall class 1 = 0.204819
false negative rate = 0.795181
false positive rate = 0.006812
positive prediction rate = 0.026928
AUC of ROC = 0.856932
AUC of PRC = 0.478728
min(+P, Se) = 0.481928

-------------------------------

Epoch 00027: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch27.state
Epoch 28/100
 - 318s - loss: 0.2772 - val_loss: 0.2532

==>predicting on train



confusion matrix:
[[2137   18]
 [ 215   40]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.07406199723482132
difference in average predicted and observed risk = -0.03174700276517868
number samples = 2410
accuracy = 0.903319
precision class 0 = 0.908588
precision class 1 = 0.689655
recall class 0 = 0.991647
recall class 1 = 0.156863
false negative rate = 0.843137
false positive rate = 0.008353
positive prediction rate = 0.024066
AUC of ROC = 0.815042
AUC of PRC = 0.425474
min(+P, Se) = 0.403922

-------------------------------

confusion matrix:
[[1165   14]
 [ 103   15]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.07158099859952927
difference in average predicted and observed risk = -0.019398001400470738
number samples = 1297
accuracy = 0.909792
precision class 0 = 0.91877
precision class 1 = 0.517241
recall class 0 = 0.988126
recall class 1 = 0.127119
false negative rate = 0.872881
false positive rate = 0.011874
positive prediction rate = 0.022359
AUC of ROC = 0.82143
AUC of PRC = 0.354703
min(+P, Se) = 0.380165

-------------------------------

confusion matrix:
[[651   5]
 [ 63  11]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.0835530012845993
difference in average predicted and observed risk = -0.017816998715400698
number samples = 730
accuracy = 0.906849
precision class 0 = 0.911765
precision class 1 = 0.6875
recall class 0 = 0.992378
recall class 1 = 0.148649
false negative rate = 0.851351
false positive rate = 0.007622
positive prediction rate = 0.021918
AUC of ROC = 0.795794
AUC of PRC = 0.394771
min(+P, Se) = 0.472973

-------------------------------

confusion matrix:
[[165   2]
 [ 14  10]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.09041699767112732
difference in average predicted and observed risk = -0.03523700232887267
number samples = 191
accuracy = 0.91623
precision class 0 = 0.921788
precision class 1 = 0.833333
recall class 0 = 0.988024
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.011976
positive prediction rate = 0.062827
AUC of ROC = 0.897705
AUC of PRC = 0.692154
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2452   22]
 [ 221   34]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.0716949999332428
difference in average predicted and observed risk = -0.0217460000667572
number samples = 2729
accuracy = 0.910956
precision class 0 = 0.917321
precision class 1 = 0.607143
recall class 0 = 0.991108
recall class 1 = 0.133333
false negative rate = 0.866667
false positive rate = 0.008892
positive prediction rate = 0.02052
AUC of ROC = 0.809384
AUC of PRC = 0.36603
min(+P, Se) = 0.396078

-------------------------------

confusion matrix:
[[1666   17]
 [ 174   42]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.08106300234794617
difference in average predicted and observed risk = -0.03268099765205383
number samples = 1899
accuracy = 0.899421
precision class 0 = 0.905435
precision class 1 = 0.711864
recall class 0 = 0.989899
recall class 1 = 0.194444
false negative rate = 0.805556
false positive rate = 0.010101
positive prediction rate = 0.031069
AUC of ROC = 0.825692
AUC of PRC = 0.474171
min(+P, Se) = 0.447005

-------------------------------

confusion matrix:
[[542   7]
 [ 68   9]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.08581200242042542
difference in average predicted and observed risk = -0.037190997579574586
number samples = 626
accuracy = 0.880192
precision class 0 = 0.888525
precision class 1 = 0.5625
recall class 0 = 0.98725
recall class 1 = 0.116883
false negative rate = 0.883117
false positive rate = 0.01275
positive prediction rate = 0.025559
AUC of ROC = 0.822913
AUC of PRC = 0.427808
min(+P, Se) = 0.440476

-------------------------------

confusion matrix:
[[2239   10]
 [ 185   23]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.0631290003657341
difference in average predicted and observed risk = -0.021526999634265895
number samples = 2457
accuracy = 0.920635
precision class 0 = 0.92368
precision class 1 = 0.69697
recall class 0 = 0.995554
recall class 1 = 0.110577
false negative rate = 0.889423
false positive rate = 0.004446
positive prediction rate = 0.013431
AUC of ROC = 0.808272
AUC of PRC = 0.348187
min(+P, Se) = 0.330144

-------------------------------

confusion matrix:
[[218   5]
 [ 24   1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.0760279968380928
difference in average predicted and observed risk = -0.024778003161907203
number samples = 248
accuracy = 0.883065
precision class 0 = 0.900826
precision class 1 = 0.166667
recall class 0 = 0.977578
recall class 1 = 0.04
false negative rate = 0.96
false positive rate = 0.022422
positive prediction rate = 0.024194
AUC of ROC = 0.741166
AUC of PRC = 0.21998
min(+P, Se) = 0.3

-------------------------------

confusion matrix:
[[470  11]
 [ 54  28]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.11073300242424011
difference in average predicted and observed risk = -0.03491499757575989
number samples = 563
accuracy = 0.884547
precision class 0 = 0.896947
precision class 1 = 0.717949
recall class 0 = 0.977131
recall class 1 = 0.341463
false negative rate = 0.658537
false positive rate = 0.022869
positive prediction rate = 0.069272
AUC of ROC = 0.848892
AUC of PRC = 0.614918
min(+P, Se) = 0.569767

-------------------------------

confusion matrix:
[[649   6]
 [ 64  15]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.08115799725055695
difference in average predicted and observed risk = -0.026471002749443057
number samples = 734
accuracy = 0.904632
precision class 0 = 0.910238
precision class 1 = 0.714286
recall class 0 = 0.99084
recall class 1 = 0.189873
false negative rate = 0.810127
false positive rate = 0.00916
positive prediction rate = 0.02861
AUC of ROC = 0.81519
AUC of PRC = 0.445782
min(+P, Se) = 0.4625

-------------------------------

confusion matrix:
[[4118   39]
 [ 395   76]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.0755390003323555
difference in average predicted and observed risk = -0.026232999667644502
number samples = 4628
accuracy = 0.906223
precision class 0 = 0.912475
precision class 1 = 0.66087
recall class 0 = 0.990618
recall class 1 = 0.161359
false negative rate = 0.838641
false positive rate = 0.009382
positive prediction rate = 0.024849
AUC of ROC = 0.817006
AUC of PRC = 0.418475
min(+P, Se) = 0.416136

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 16   3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.06952200084924698
difference in average predicted and observed risk = -0.010646999150753025
number samples = 237
accuracy = 0.924051
precision class 0 = 0.931035
precision class 1 = 0.6
recall class 0 = 0.990826
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009174
positive prediction rate = 0.021097
AUC of ROC = 0.85128
AUC of PRC = 0.379716
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[385   0]
 [ 43   4]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.0680759996175766
difference in average predicted and observed risk = -0.040720000382423405
number samples = 432
accuracy = 0.900463
precision class 0 = 0.899533
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.085106
false negative rate = 0.914894
false positive rate = 0.0
positive prediction rate = 0.009259
AUC of ROC = 0.833821
AUC of PRC = 0.446505
min(+P, Se) = 0.418182

-------------------------------

confusion matrix:
[[104   1]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.09845799952745438
difference in average predicted and observed risk = -0.011711000472545627
number samples = 118
accuracy = 0.923729
precision class 0 = 0.928571
precision class 1 = 0.833333
recall class 0 = 0.990476
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.009524
positive prediction rate = 0.050847
AUC of ROC = 0.90696
AUC of PRC = 0.606981
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.1151449978351593
difference in average predicted and observed risk = -0.018188002164840705
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[298   2]
 [ 37   2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.07719899713993073
difference in average predicted and observed risk = -0.03784500286006927
number samples = 339
accuracy = 0.884956
precision class 0 = 0.889552
precision class 1 = 0.5
recall class 0 = 0.993333
recall class 1 = 0.051282
false negative rate = 0.948718
false positive rate = 0.006667
positive prediction rate = 0.011799
AUC of ROC = 0.816325
AUC of PRC = 0.362989
min(+P, Se) = 0.395833

-------------------------------

confusion matrix:
[[433   1]
 [ 32  12]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.07277700304985046
difference in average predicted and observed risk = -0.019272996950149543
number samples = 478
accuracy = 0.930962
precision class 0 = 0.931183
precision class 1 = 0.923077
recall class 0 = 0.997696
recall class 1 = 0.272727
false negative rate = 0.727273
false positive rate = 0.002304
positive prediction rate = 0.027197
AUC of ROC = 0.881127
AUC of PRC = 0.592018
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[388   0]
 [ 34   4]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.0617390014231205
difference in average predicted and observed risk = -0.027462998576879505
number samples = 426
accuracy = 0.920188
precision class 0 = 0.919431
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.0
positive prediction rate = 0.00939
AUC of ROC = 0.863877
AUC of PRC = 0.491906
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.09744500368833542
difference in average predicted and observed risk = -0.020201996311664583
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.941667
AUC of PRC = 0.704244
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.07532700151205063
difference in average predicted and observed risk = -0.013382998487949369
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.823009
AUC of PRC = 0.245609
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[106   2]
 [ 14   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09093700349330902
difference in average predicted and observed risk = -0.05866899650669097
number samples = 127
accuracy = 0.874016
precision class 0 = 0.883333
precision class 1 = 0.714286
recall class 0 = 0.981481
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.018519
positive prediction rate = 0.055118
AUC of ROC = 0.80117
AUC of PRC = 0.536651
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.10073799639940262
difference in average predicted and observed risk = 0.021790996399402615
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.933333
AUC of PRC = 0.568651
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[731   3]
 [ 69  14]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.07461199909448624
difference in average predicted and observed risk = -0.026979000905513764
number samples = 817
accuracy = 0.911873
precision class 0 = 0.91375
precision class 1 = 0.823529
recall class 0 = 0.995913
recall class 1 = 0.168675
false negative rate = 0.831325
false positive rate = 0.004087
positive prediction rate = 0.020808
AUC of ROC = 0.854831
AUC of PRC = 0.487454
min(+P, Se) = 0.46988

-------------------------------

Epoch 00028: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch28.state
Epoch 29/100
 - 317s - loss: 0.2768 - val_loss: 0.2541

==>predicting on train



confusion matrix:
[[2131   24]
 [ 207   48]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.07388699799776077
difference in average predicted and observed risk = -0.03192200200223923
number samples = 2410
accuracy = 0.904149
precision class 0 = 0.911463
precision class 1 = 0.666667
recall class 0 = 0.988863
recall class 1 = 0.188235
false negative rate = 0.811765
false positive rate = 0.011137
positive prediction rate = 0.029876
AUC of ROC = 0.801059
AUC of PRC = 0.424029
min(+P, Se) = 0.407843

-------------------------------

confusion matrix:
[[1164   15]
 [  98   20]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.07024600356817245
difference in average predicted and observed risk = -0.02073299643182755
number samples = 1297
accuracy = 0.912876
precision class 0 = 0.922345
precision class 1 = 0.571429
recall class 0 = 0.987277
recall class 1 = 0.169492
false negative rate = 0.830508
false positive rate = 0.012723
positive prediction rate = 0.026985
AUC of ROC = 0.808787
AUC of PRC = 0.353342
min(+P, Se) = 0.371901

-------------------------------

confusion matrix:
[[648   8]
 [ 63  11]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.08141999691724777
difference in average predicted and observed risk = -0.01995000308275223
number samples = 730
accuracy = 0.90274
precision class 0 = 0.911392
precision class 1 = 0.578947
recall class 0 = 0.987805
recall class 1 = 0.148649
false negative rate = 0.851351
false positive rate = 0.012195
positive prediction rate = 0.026027
AUC of ROC = 0.797483
AUC of PRC = 0.391249
min(+P, Se) = 0.445946

-------------------------------

confusion matrix:
[[165   2]
 [ 14  10]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.09266600012779236
difference in average predicted and observed risk = -0.03298799987220763
number samples = 191
accuracy = 0.91623
precision class 0 = 0.921788
precision class 1 = 0.833333
recall class 0 = 0.988024
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.011976
positive prediction rate = 0.062827
AUC of ROC = 0.890469
AUC of PRC = 0.677185
min(+P, Se) = 0.64

-------------------------------

confusion matrix:
[[2448   26]
 [ 212   43]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07118599861860275
difference in average predicted and observed risk = -0.022255001381397244
number samples = 2729
accuracy = 0.912789
precision class 0 = 0.920301
precision class 1 = 0.623188
recall class 0 = 0.989491
recall class 1 = 0.168627
false negative rate = 0.831373
false positive rate = 0.010509
positive prediction rate = 0.025284
AUC of ROC = 0.796145
AUC of PRC = 0.363672
min(+P, Se) = 0.376471

-------------------------------

confusion matrix:
[[1660   23]
 [ 170   46]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.0800660029053688
difference in average predicted and observed risk = -0.03367799709463119
number samples = 1899
accuracy = 0.898368
precision class 0 = 0.907104
precision class 1 = 0.666667
recall class 0 = 0.986334
recall class 1 = 0.212963
false negative rate = 0.787037
false positive rate = 0.013666
positive prediction rate = 0.036335
AUC of ROC = 0.818424
AUC of PRC = 0.480904
min(+P, Se) = 0.449074

-------------------------------

confusion matrix:
[[540   9]
 [ 63  14]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.0835999995470047
difference in average predicted and observed risk = -0.0394030004529953
number samples = 626
accuracy = 0.884984
precision class 0 = 0.895522
precision class 1 = 0.608696
recall class 0 = 0.983607
recall class 1 = 0.181818
false negative rate = 0.818182
false positive rate = 0.016393
positive prediction rate = 0.036741
AUC of ROC = 0.804485
AUC of PRC = 0.425303
min(+P, Se) = 0.415584

-------------------------------

confusion matrix:
[[2234   15]
 [ 182   26]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.06246199831366539
difference in average predicted and observed risk = -0.022194001686334605
number samples = 2457
accuracy = 0.919821
precision class 0 = 0.924669
precision class 1 = 0.634146
recall class 0 = 0.99333
recall class 1 = 0.125
false negative rate = 0.875
false positive rate = 0.00667
positive prediction rate = 0.016687
AUC of ROC = 0.796762
AUC of PRC = 0.340408
min(+P, Se) = 0.339713

-------------------------------

confusion matrix:
[[218   5]
 [ 22   3]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.07483399659395218
difference in average predicted and observed risk = -0.025972003406047828
number samples = 248
accuracy = 0.891129
precision class 0 = 0.908333
precision class 1 = 0.375
recall class 0 = 0.977578
recall class 1 = 0.12
false negative rate = 0.88
false positive rate = 0.022422
positive prediction rate = 0.032258
AUC of ROC = 0.703857
AUC of PRC = 0.214199
min(+P, Se) = 0.32

-------------------------------

confusion matrix:
[[469  12]
 [ 52  30]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.11196299642324448
difference in average predicted and observed risk = -0.03368500357675552
number samples = 563
accuracy = 0.886323
precision class 0 = 0.900192
precision class 1 = 0.714286
recall class 0 = 0.975052
recall class 1 = 0.365854
false negative rate = 0.634146
false positive rate = 0.024948
positive prediction rate = 0.0746
AUC of ROC = 0.850261
AUC of PRC = 0.62526
min(+P, Se) = 0.585366

-------------------------------

confusion matrix:
[[647   8]
 [ 63  16]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.08026500046253204
difference in average predicted and observed risk = -0.02736399953746796
number samples = 734
accuracy = 0.90327
precision class 0 = 0.911268
precision class 1 = 0.666667
recall class 0 = 0.987786
recall class 1 = 0.202532
false negative rate = 0.797468
false positive rate = 0.012214
positive prediction rate = 0.032698
AUC of ROC = 0.808213
AUC of PRC = 0.440607
min(+P, Se) = 0.468354

-------------------------------

confusion matrix:
[[4108   49]
 [ 382   89]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.07483000308275223
difference in average predicted and observed risk = -0.026941996917247774
number samples = 4628
accuracy = 0.906871
precision class 0 = 0.914922
precision class 1 = 0.644928
recall class 0 = 0.988213
recall class 1 = 0.18896
false negative rate = 0.81104
false positive rate = 0.011787
positive prediction rate = 0.029818
AUC of ROC = 0.80668
AUC of PRC = 0.41797
min(+P, Se) = 0.411017

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.07068599760532379
difference in average predicted and observed risk = -0.009483002394676213
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.845485
AUC of PRC = 0.374444
min(+P, Se) = 0.434783

-------------------------------

confusion matrix:
[[385   0]
 [ 42   5]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.06563399732112885
difference in average predicted and observed risk = -0.04316200267887116
number samples = 432
accuracy = 0.902778
precision class 0 = 0.901639
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.106383
false negative rate = 0.893617
false positive rate = 0.0
positive prediction rate = 0.011574
AUC of ROC = 0.828682
AUC of PRC = 0.43946
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[103   2]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.09603100270032883
difference in average predicted and observed risk = -0.014137997299671176
number samples = 118
accuracy = 0.915254
precision class 0 = 0.927928
precision class 1 = 0.714286
recall class 0 = 0.980952
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.019048
positive prediction rate = 0.059322
AUC of ROC = 0.912821
AUC of PRC = 0.588601
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[26  0]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11509700119495392
difference in average predicted and observed risk = -0.01823599880504609
number samples = 30
accuracy = 0.966667
precision class 0 = 0.962963
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.0
positive prediction rate = 0.1
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[297   3]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.07575199753046036
difference in average predicted and observed risk = -0.039292002469539636
number samples = 339
accuracy = 0.884956
precision class 0 = 0.891892
precision class 1 = 0.5
recall class 0 = 0.99
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.01
positive prediction rate = 0.017699
AUC of ROC = 0.835983
AUC of PRC = 0.383767
min(+P, Se) = 0.435897

-------------------------------

confusion matrix:
[[432   2]
 [ 30  14]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.0715709999203682
difference in average predicted and observed risk = -0.020479000079631812
number samples = 478
accuracy = 0.933054
precision class 0 = 0.935065
precision class 1 = 0.875
recall class 0 = 0.995392
recall class 1 = 0.318182
false negative rate = 0.681818
false positive rate = 0.004608
positive prediction rate = 0.033473
AUC of ROC = 0.859709
AUC of PRC = 0.547238
min(+P, Se) = 0.522727

-------------------------------

confusion matrix:
[[388   0]
 [ 31   7]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.060864001512527466
difference in average predicted and observed risk = -0.028337998487472538
number samples = 426
accuracy = 0.92723
precision class 0 = 0.926014
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.184211
false negative rate = 0.815789
false positive rate = 0.0
positive prediction rate = 0.016432
AUC of ROC = 0.855806
AUC of PRC = 0.476115
min(+P, Se) = 0.425

-------------------------------

confusion matrix:
[[88  2]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.09590499848127365
difference in average predicted and observed risk = -0.02174200151872635
number samples = 102
accuracy = 0.901961
precision class 0 = 0.916667
precision class 1 = 0.666667
recall class 0 = 0.977778
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.022222
positive prediction rate = 0.058824
AUC of ROC = 0.936111
AUC of PRC = 0.685448
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.07080700248479843
difference in average predicted and observed risk = -0.017902997515201566
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.838294
AUC of PRC = 0.268376
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[106   2]
 [ 14   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09133899956941605
difference in average predicted and observed risk = -0.05826700043058394
number samples = 127
accuracy = 0.874016
precision class 0 = 0.883333
precision class 1 = 0.714286
recall class 0 = 0.981481
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.018519
positive prediction rate = 0.055118
AUC of ROC = 0.804094
AUC of PRC = 0.535681
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.10001400113105774
difference in average predicted and observed risk = 0.021067001131057736
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.904762
AUC of PRC = 0.518849
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[729   5]
 [ 66  17]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.07330600172281265
difference in average predicted and observed risk = -0.028284998277187348
number samples = 817
accuracy = 0.913097
precision class 0 = 0.916981
precision class 1 = 0.772727
recall class 0 = 0.993188
recall class 1 = 0.204819
false negative rate = 0.795181
false positive rate = 0.006812
positive prediction rate = 0.026928
AUC of ROC = 0.851581
AUC of PRC = 0.47347
min(+P, Se) = 0.481928

-------------------------------

Epoch 00029: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch29.state
Epoch 30/100
 - 321s - loss: 0.2756 - val_loss: 0.2609

==>predicting on train



confusion matrix:
[[2141   14]
 [ 217   38]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.06114700064063072
difference in average predicted and observed risk = -0.04466199935936928
number samples = 2410
accuracy = 0.904149
precision class 0 = 0.907973
precision class 1 = 0.730769
recall class 0 = 0.993503
recall class 1 = 0.14902
false negative rate = 0.85098
false positive rate = 0.006497
positive prediction rate = 0.021577
AUC of ROC = 0.800726
AUC of PRC = 0.419937
min(+P, Se) = 0.403922

-------------------------------

confusion matrix:
[[1166   13]
 [ 104   14]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.05717200040817261
difference in average predicted and observed risk = -0.0338069995918274
number samples = 1297
accuracy = 0.909792
precision class 0 = 0.91811
precision class 1 = 0.518519
recall class 0 = 0.988974
recall class 1 = 0.118644
false negative rate = 0.881356
false positive rate = 0.011026
positive prediction rate = 0.020817
AUC of ROC = 0.813495
AUC of PRC = 0.33641
min(+P, Se) = 0.358333

-------------------------------

confusion matrix:
[[650   6]
 [ 66   8]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.06949800252914429
difference in average predicted and observed risk = -0.031871997470855715
number samples = 730
accuracy = 0.90137
precision class 0 = 0.907821
precision class 1 = 0.571429
recall class 0 = 0.990854
recall class 1 = 0.108108
false negative rate = 0.891892
false positive rate = 0.009146
positive prediction rate = 0.019178
AUC of ROC = 0.791117
AUC of PRC = 0.390792
min(+P, Se) = 0.445946

-------------------------------

confusion matrix:
[[166   1]
 [ 15   9]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.0816510021686554
difference in average predicted and observed risk = -0.04400299783134459
number samples = 191
accuracy = 0.91623
precision class 0 = 0.917127
precision class 1 = 0.9
recall class 0 = 0.994012
recall class 1 = 0.375
false negative rate = 0.625
false positive rate = 0.005988
positive prediction rate = 0.052356
AUC of ROC = 0.89022
AUC of PRC = 0.673906
min(+P, Se) = 0.62963

-------------------------------

confusion matrix:
[[2456   18]
 [ 229   26]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.057475000619888306
difference in average predicted and observed risk = -0.03596599938011169
number samples = 2729
accuracy = 0.909491
precision class 0 = 0.914711
precision class 1 = 0.590909
recall class 0 = 0.992724
recall class 1 = 0.101961
false negative rate = 0.898039
false positive rate = 0.007276
positive prediction rate = 0.016123
AUC of ROC = 0.795696
AUC of PRC = 0.359891
min(+P, Se) = 0.384314

-------------------------------

confusion matrix:
[[1667   16]
 [ 173   43]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.06898099929094315
difference in average predicted and observed risk = -0.04476300070905685
number samples = 1899
accuracy = 0.900474
precision class 0 = 0.905978
precision class 1 = 0.728814
recall class 0 = 0.990493
recall class 1 = 0.199074
false negative rate = 0.800926
false positive rate = 0.009507
positive prediction rate = 0.031069
AUC of ROC = 0.818936
AUC of PRC = 0.471566
min(+P, Se) = 0.43318

-------------------------------

confusion matrix:
[[541   8]
 [ 65  12]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.07558199763298035
difference in average predicted and observed risk = -0.047421002367019655
number samples = 626
accuracy = 0.883387
precision class 0 = 0.892739
precision class 1 = 0.6
recall class 0 = 0.985428
recall class 1 = 0.155844
false negative rate = 0.844156
false positive rate = 0.014572
positive prediction rate = 0.031949
AUC of ROC = 0.806993
AUC of PRC = 0.408931
min(+P, Se) = 0.402597

-------------------------------

confusion matrix:
[[2243    6]
 [ 190   18]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.048597998917102814
difference in average predicted and observed risk = -0.03605800108289718
number samples = 2457
accuracy = 0.920228
precision class 0 = 0.921907
precision class 1 = 0.75
recall class 0 = 0.997332
recall class 1 = 0.086538
false negative rate = 0.913462
false positive rate = 0.002668
positive prediction rate = 0.009768
AUC of ROC = 0.79887
AUC of PRC = 0.345698
min(+P, Se) = 0.346154

-------------------------------

confusion matrix:
[[218   5]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.06069000065326691
difference in average predicted and observed risk = -0.0401159993467331
number samples = 248
accuracy = 0.879032
precision class 0 = 0.897119
precision class 1 = 0.0
recall class 0 = 0.977578
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.022422
positive prediction rate = 0.020161
AUC of ROC = 0.714439
AUC of PRC = 0.21562
min(+P, Se) = 0.290323

-------------------------------

confusion matrix:
[[470  11]
 [ 54  28]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.10186299681663513
difference in average predicted and observed risk = -0.04378500318336487
number samples = 563
accuracy = 0.884547
precision class 0 = 0.896947
precision class 1 = 0.717949
recall class 0 = 0.977131
recall class 1 = 0.341463
false negative rate = 0.658537
false positive rate = 0.022869
positive prediction rate = 0.069272
AUC of ROC = 0.847168
AUC of PRC = 0.606738
min(+P, Se) = 0.560976

-------------------------------

confusion matrix:
[[651   4]
 [ 68  11]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.06638199836015701
difference in average predicted and observed risk = -0.04124700163984299
number samples = 734
accuracy = 0.901907
precision class 0 = 0.905424
precision class 1 = 0.733333
recall class 0 = 0.993893
recall class 1 = 0.139241
false negative rate = 0.860759
false positive rate = 0.006107
positive prediction rate = 0.020436
AUC of ROC = 0.801933
AUC of PRC = 0.431647
min(+P, Se) = 0.443038

-------------------------------

confusion matrix:
[[4123   34]
 [ 402   69]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.062196001410484314
difference in average predicted and observed risk = -0.03957599858951569
number samples = 4628
accuracy = 0.905791
precision class 0 = 0.91116
precision class 1 = 0.669903
recall class 0 = 0.991821
recall class 1 = 0.146497
false negative rate = 0.853503
false positive rate = 0.008179
positive prediction rate = 0.022256
AUC of ROC = 0.806646
AUC of PRC = 0.410826
min(+P, Se) = 0.414737

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 18   1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.0562639981508255
difference in average predicted and observed risk = -0.023905001849174504
number samples = 237
accuracy = 0.911392
precision class 0 = 0.922747
precision class 1 = 0.25
recall class 0 = 0.986239
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.013761
positive prediction rate = 0.016878
AUC of ROC = 0.846692
AUC of PRC = 0.375383
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[385   0]
 [ 45   2]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.05371199920773506
difference in average predicted and observed risk = -0.05508400079226494
number samples = 432
accuracy = 0.895833
precision class 0 = 0.895349
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.042553
false negative rate = 0.957447
false positive rate = 0.0
positive prediction rate = 0.00463
AUC of ROC = 0.820337
AUC of PRC = 0.432449
min(+P, Se) = 0.384615

-------------------------------

confusion matrix:
[[103   2]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.08472199738025665
difference in average predicted and observed risk = -0.02544700261974335
number samples = 118
accuracy = 0.898305
precision class 0 = 0.911504
precision class 1 = 0.6
recall class 0 = 0.980952
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.019048
positive prediction rate = 0.042373
AUC of ROC = 0.922344
AUC of PRC = 0.611294
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.09948500245809555
difference in average predicted and observed risk = -0.03384799754190446
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[297   3]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.06491199880838394
difference in average predicted and observed risk = -0.05013200119161605
number samples = 339
accuracy = 0.879056
precision class 0 = 0.886567
precision class 1 = 0.25
recall class 0 = 0.99
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.01
positive prediction rate = 0.011799
AUC of ROC = 0.830342
AUC of PRC = 0.377801
min(+P, Se) = 0.384615

-------------------------------

confusion matrix:
[[432   2]
 [ 37   7]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.05756299942731857
difference in average predicted and observed risk = -0.034487000572681434
number samples = 478
accuracy = 0.91841
precision class 0 = 0.921109
precision class 1 = 0.777778
recall class 0 = 0.995392
recall class 1 = 0.159091
false negative rate = 0.840909
false positive rate = 0.004608
positive prediction rate = 0.018828
AUC of ROC = 0.856933
AUC of PRC = 0.552003
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 37   1]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.04699699953198433
difference in average predicted and observed risk = -0.042205000468015674
number samples = 426
accuracy = 0.913146
precision class 0 = 0.912941
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.026316
false negative rate = 0.973684
false positive rate = 0.0
positive prediction rate = 0.002347
AUC of ROC = 0.856213
AUC of PRC = 0.467978
min(+P, Se) = 0.435897

-------------------------------

confusion matrix:
[[88  2]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.0876540020108223
difference in average predicted and observed risk = -0.029992997989177705
number samples = 102
accuracy = 0.901961
precision class 0 = 0.916667
precision class 1 = 0.666667
recall class 0 = 0.977778
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.022222
positive prediction rate = 0.058824
AUC of ROC = 0.934259
AUC of PRC = 0.694507
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.06310199946165085
difference in average predicted and observed risk = -0.02560800053834915
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.827836
AUC of PRC = 0.278956
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[106   2]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.07623200118541718
difference in average predicted and observed risk = -0.07337399881458281
number samples = 127
accuracy = 0.858268
precision class 0 = 0.868852
precision class 1 = 0.6
recall class 0 = 0.981481
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.018519
positive prediction rate = 0.03937
AUC of ROC = 0.811891
AUC of PRC = 0.538374
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.08032800257205963
difference in average predicted and observed risk = 0.001381002572059628
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.895238
AUC of PRC = 0.505952
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[729   5]
 [ 75   8]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.06061200052499771
difference in average predicted and observed risk = -0.04097899947500229
number samples = 817
accuracy = 0.902081
precision class 0 = 0.906716
precision class 1 = 0.615385
recall class 0 = 0.993188
recall class 1 = 0.096386
false negative rate = 0.903614
false positive rate = 0.006812
positive prediction rate = 0.015912
AUC of ROC = 0.84769
AUC of PRC = 0.472852
min(+P, Se) = 0.457831

-------------------------------

Epoch 00030: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch30.state
Epoch 31/100
 - 320s - loss: 0.2804 - val_loss: 0.2449

==>predicting on train



confusion matrix:
[[2131   24]
 [ 203   52]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.08686699718236923
difference in average predicted and observed risk = -0.018942002817630768
number samples = 2410
accuracy = 0.905809
precision class 0 = 0.913025
precision class 1 = 0.684211
recall class 0 = 0.988863
recall class 1 = 0.203922
false negative rate = 0.796078
false positive rate = 0.011137
positive prediction rate = 0.031535
AUC of ROC = 0.809328
AUC of PRC = 0.425412
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[1160   19]
 [  94   24]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08314599841833115
difference in average predicted and observed risk = -0.007833001581668858
number samples = 1297
accuracy = 0.912876
precision class 0 = 0.92504
precision class 1 = 0.55814
recall class 0 = 0.983885
recall class 1 = 0.20339
false negative rate = 0.79661
false positive rate = 0.016115
positive prediction rate = 0.033153
AUC of ROC = 0.814458
AUC of PRC = 0.355954
min(+P, Se) = 0.378151

-------------------------------

confusion matrix:
[[644  12]
 [ 59  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09801600128412247
difference in average predicted and observed risk = -0.0033539987158775347
number samples = 730
accuracy = 0.90274
precision class 0 = 0.916074
precision class 1 = 0.555556
recall class 0 = 0.981707
recall class 1 = 0.202703
false negative rate = 0.797297
false positive rate = 0.018293
positive prediction rate = 0.036986
AUC of ROC = 0.791674
AUC of PRC = 0.389653
min(+P, Se) = 0.445946

-------------------------------

confusion matrix:
[[165   2]
 [ 14  10]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.10417599976062775
difference in average predicted and observed risk = -0.02147800023937224
number samples = 191
accuracy = 0.91623
precision class 0 = 0.921788
precision class 1 = 0.833333
recall class 0 = 0.988024
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.011976
positive prediction rate = 0.062827
AUC of ROC = 0.891218
AUC of PRC = 0.680468
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2445   29]
 [ 204   51]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08446899801492691
difference in average predicted and observed risk = -0.008972001985073086
number samples = 2729
accuracy = 0.914621
precision class 0 = 0.92299
precision class 1 = 0.6375
recall class 0 = 0.988278
recall class 1 = 0.2
false negative rate = 0.8
false positive rate = 0.011722
positive prediction rate = 0.029315
AUC of ROC = 0.800579
AUC of PRC = 0.366381
min(+P, Se) = 0.392308

-------------------------------

confusion matrix:
[[1655   28]
 [ 166   50]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.09379900246858597
difference in average predicted and observed risk = -0.01994499753141403
number samples = 1899
accuracy = 0.897841
precision class 0 = 0.908841
precision class 1 = 0.641026
recall class 0 = 0.983363
recall class 1 = 0.231481
false negative rate = 0.768519
false positive rate = 0.016637
positive prediction rate = 0.041074
AUC of ROC = 0.822743
AUC of PRC = 0.480584
min(+P, Se) = 0.449074

-------------------------------

confusion matrix:
[[538  11]
 [ 60  17]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.10239800065755844
difference in average predicted and observed risk = -0.02060499934244156
number samples = 626
accuracy = 0.886581
precision class 0 = 0.899666
precision class 1 = 0.607143
recall class 0 = 0.979964
recall class 1 = 0.220779
false negative rate = 0.779221
false positive rate = 0.020036
positive prediction rate = 0.044728
AUC of ROC = 0.814066
AUC of PRC = 0.424895
min(+P, Se) = 0.402597

-------------------------------

confusion matrix:
[[2232   17]
 [ 178   30]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07354100048542023
difference in average predicted and observed risk = -0.011114999514579768
number samples = 2457
accuracy = 0.920635
precision class 0 = 0.926141
precision class 1 = 0.638298
recall class 0 = 0.992441
recall class 1 = 0.144231
false negative rate = 0.855769
false positive rate = 0.007559
positive prediction rate = 0.019129
AUC of ROC = 0.801245
AUC of PRC = 0.34775
min(+P, Se) = 0.336538

-------------------------------

confusion matrix:
[[217   6]
 [ 21   4]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.08755999803543091
difference in average predicted and observed risk = -0.013246001964569099
number samples = 248
accuracy = 0.891129
precision class 0 = 0.911765
precision class 1 = 0.4
recall class 0 = 0.973094
recall class 1 = 0.16
false negative rate = 0.84
false positive rate = 0.026906
positive prediction rate = 0.040323
AUC of ROC = 0.735067
AUC of PRC = 0.224404
min(+P, Se) = 0.290323

-------------------------------

confusion matrix:
[[468  13]
 [ 51  31]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12932300567626953
difference in average predicted and observed risk = -0.01632499432373047
number samples = 563
accuracy = 0.886323
precision class 0 = 0.901734
precision class 1 = 0.704545
recall class 0 = 0.972973
recall class 1 = 0.378049
false negative rate = 0.621951
false positive rate = 0.027027
positive prediction rate = 0.078153
AUC of ROC = 0.849348
AUC of PRC = 0.622606
min(+P, Se) = 0.578313

-------------------------------

confusion matrix:
[[645  10]
 [ 60  19]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09444600343704224
difference in average predicted and observed risk = -0.013182996562957766
number samples = 734
accuracy = 0.904632
precision class 0 = 0.914894
precision class 1 = 0.655172
recall class 0 = 0.984733
recall class 1 = 0.240506
false negative rate = 0.759494
false positive rate = 0.015267
positive prediction rate = 0.03951
AUC of ROC = 0.808851
AUC of PRC = 0.428227
min(+P, Se) = 0.475

-------------------------------

confusion matrix:
[[4100   57]
 [ 370  101]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08829700201749802
difference in average predicted and observed risk = -0.013474997982501985
number samples = 4628
accuracy = 0.907736
precision class 0 = 0.917226
precision class 1 = 0.639241
recall class 0 = 0.986288
recall class 1 = 0.214437
false negative rate = 0.785563
false positive rate = 0.013712
positive prediction rate = 0.03414
AUC of ROC = 0.811022
AUC of PRC = 0.4186
min(+P, Se) = 0.418259

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 14   5]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08168400079011917
difference in average predicted and observed risk = 0.001515000790119167
number samples = 237
accuracy = 0.92827
precision class 0 = 0.938865
precision class 1 = 0.625
recall class 0 = 0.986239
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.013761
positive prediction rate = 0.033755
AUC of ROC = 0.858764
AUC of PRC = 0.379019
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[385   0]
 [ 41   6]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.08091399818658829
difference in average predicted and observed risk = -0.027882001813411716
number samples = 432
accuracy = 0.905093
precision class 0 = 0.903756
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.12766
false negative rate = 0.87234
false positive rate = 0.0
positive prediction rate = 0.013889
AUC of ROC = 0.827521
AUC of PRC = 0.458021
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[102   3]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.11436700075864792
difference in average predicted and observed risk = 0.004198000758647916
number samples = 118
accuracy = 0.90678
precision class 0 = 0.927273
precision class 1 = 0.625
recall class 0 = 0.971429
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.028571
positive prediction rate = 0.067797
AUC of ROC = 0.917216
AUC of PRC = 0.582236
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[26  0]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.1287049949169159
difference in average predicted and observed risk = -0.0046280050830841135
number samples = 30
accuracy = 0.966667
precision class 0 = 0.962963
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.0
positive prediction rate = 0.1
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[296   4]
 [ 34   5]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.09268700331449509
difference in average predicted and observed risk = -0.022356996685504907
number samples = 339
accuracy = 0.887906
precision class 0 = 0.89697
precision class 1 = 0.555556
recall class 0 = 0.986667
recall class 1 = 0.128205
false negative rate = 0.871795
false positive rate = 0.013333
positive prediction rate = 0.026549
AUC of ROC = 0.835983
AUC of PRC = 0.386658
min(+P, Se) = 0.410256

-------------------------------

confusion matrix:
[[432   2]
 [ 30  14]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08420400321483612
difference in average predicted and observed risk = -0.007845996785163886
number samples = 478
accuracy = 0.933054
precision class 0 = 0.935065
precision class 1 = 0.875
recall class 0 = 0.995392
recall class 1 = 0.318182
false negative rate = 0.681818
false positive rate = 0.004608
positive prediction rate = 0.033473
AUC of ROC = 0.868821
AUC of PRC = 0.570423
min(+P, Se) = 0.565217

-------------------------------

confusion matrix:
[[388   0]
 [ 31   7]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.07280799746513367
difference in average predicted and observed risk = -0.016394002534866337
number samples = 426
accuracy = 0.92723
precision class 0 = 0.926014
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.184211
false negative rate = 0.815789
false positive rate = 0.0
positive prediction rate = 0.016432
AUC of ROC = 0.86408
AUC of PRC = 0.489224
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[88  2]
 [ 7  5]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.11615099757909775
difference in average predicted and observed risk = -0.0014960024209022538
number samples = 102
accuracy = 0.911765
precision class 0 = 0.926316
precision class 1 = 0.714286
recall class 0 = 0.977778
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.022222
positive prediction rate = 0.068627
AUC of ROC = 0.941667
AUC of PRC = 0.711653
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[111   2]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.08961299806833267
difference in average predicted and observed risk = 0.0009029980683326749
number samples = 124
accuracy = 0.895161
precision class 0 = 0.909836
precision class 1 = 0.0
recall class 0 = 0.982301
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.017699
positive prediction rate = 0.016129
AUC of ROC = 0.832663
AUC of PRC = 0.274102
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[106   2]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10246899724006653
difference in average predicted and observed risk = -0.04713700275993346
number samples = 127
accuracy = 0.88189
precision class 0 = 0.890756
precision class 1 = 0.75
recall class 0 = 0.981481
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.018519
positive prediction rate = 0.062992
AUC of ROC = 0.82115
AUC of PRC = 0.542209
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.12318500131368637
difference in average predicted and observed risk = 0.04423800131368637
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.933333
AUC of PRC = 0.568651
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[728   6]
 [ 64  19]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.0877240002155304
difference in average predicted and observed risk = -0.013866999784469605
number samples = 817
accuracy = 0.914321
precision class 0 = 0.919192
precision class 1 = 0.76
recall class 0 = 0.991826
recall class 1 = 0.228916
false negative rate = 0.771084
false positive rate = 0.008174
positive prediction rate = 0.0306
AUC of ROC = 0.856521
AUC of PRC = 0.484183
min(+P, Se) = 0.483146

-------------------------------

Epoch 00031: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch31.state
Epoch 32/100
 - 320s - loss: 0.2754 - val_loss: 0.2486

==>predicting on train



confusion matrix:
[[2130   25]
 [ 203   52]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.09534099698066711
difference in average predicted and observed risk = -0.010468003019332886
number samples = 2410
accuracy = 0.905394
precision class 0 = 0.912988
precision class 1 = 0.675325
recall class 0 = 0.988399
recall class 1 = 0.203922
false negative rate = 0.796078
false positive rate = 0.011601
positive prediction rate = 0.03195
AUC of ROC = 0.810764
AUC of PRC = 0.429577
min(+P, Se) = 0.405204

-------------------------------

confusion matrix:
[[1163   16]
 [  97   21]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08782400190830231
difference in average predicted and observed risk = -0.003154998091697697
number samples = 1297
accuracy = 0.912876
precision class 0 = 0.923016
precision class 1 = 0.567568
recall class 0 = 0.986429
recall class 1 = 0.177966
false negative rate = 0.822034
false positive rate = 0.013571
positive prediction rate = 0.028527
AUC of ROC = 0.807018
AUC of PRC = 0.350246
min(+P, Se) = 0.381356

-------------------------------

confusion matrix:
[[643  13]
 [ 59  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.10079099982976913
difference in average predicted and observed risk = -0.0005790001702308673
number samples = 730
accuracy = 0.90137
precision class 0 = 0.915954
precision class 1 = 0.535714
recall class 0 = 0.980183
recall class 1 = 0.202703
false negative rate = 0.797297
false positive rate = 0.019817
positive prediction rate = 0.038356
AUC of ROC = 0.794413
AUC of PRC = 0.398347
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[165   2]
 [ 14  10]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.11125200241804123
difference in average predicted and observed risk = -0.014401997581958759
number samples = 191
accuracy = 0.91623
precision class 0 = 0.921788
precision class 1 = 0.833333
recall class 0 = 0.988024
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.011976
positive prediction rate = 0.062827
AUC of ROC = 0.873503
AUC of PRC = 0.665495
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2446   28]
 [ 207   48]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.09050200134515762
difference in average predicted and observed risk = -0.002938998654842373
number samples = 2729
accuracy = 0.913888
precision class 0 = 0.921975
precision class 1 = 0.631579
recall class 0 = 0.988682
recall class 1 = 0.188235
false negative rate = 0.811765
false positive rate = 0.011318
positive prediction rate = 0.027849
AUC of ROC = 0.801677
AUC of PRC = 0.367981
min(+P, Se) = 0.386719

-------------------------------

confusion matrix:
[[1655   28]
 [ 166   50]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.1008559986948967
difference in average predicted and observed risk = -0.0128880013051033
number samples = 1899
accuracy = 0.897841
precision class 0 = 0.908841
precision class 1 = 0.641026
recall class 0 = 0.983363
recall class 1 = 0.231481
false negative rate = 0.768519
false positive rate = 0.016637
positive prediction rate = 0.041074
AUC of ROC = 0.819634
AUC of PRC = 0.482478
min(+P, Se) = 0.458333

-------------------------------

confusion matrix:
[[539  10]
 [ 61  16]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.10866399854421616
difference in average predicted and observed risk = -0.014339001455783845
number samples = 626
accuracy = 0.886581
precision class 0 = 0.898333
precision class 1 = 0.615385
recall class 0 = 0.981785
recall class 1 = 0.207792
false negative rate = 0.792208
false positive rate = 0.018215
positive prediction rate = 0.041534
AUC of ROC = 0.818513
AUC of PRC = 0.433812
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[2232   17]
 [ 179   29]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08089800179004669
difference in average predicted and observed risk = -0.0037579982099533032
number samples = 2457
accuracy = 0.920228
precision class 0 = 0.925757
precision class 1 = 0.630435
recall class 0 = 0.992441
recall class 1 = 0.139423
false negative rate = 0.860577
false positive rate = 0.007559
positive prediction rate = 0.018722
AUC of ROC = 0.796251
AUC of PRC = 0.345747
min(+P, Se) = 0.349282

-------------------------------

confusion matrix:
[[217   6]
 [ 21   4]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.09908200055360794
difference in average predicted and observed risk = -0.001723999446392066
number samples = 248
accuracy = 0.891129
precision class 0 = 0.911765
precision class 1 = 0.4
recall class 0 = 0.973094
recall class 1 = 0.16
false negative rate = 0.84
false positive rate = 0.026906
positive prediction rate = 0.040323
AUC of ROC = 0.712646
AUC of PRC = 0.207873
min(+P, Se) = 0.27027

-------------------------------

confusion matrix:
[[467  14]
 [ 52  30]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.13277900218963623
difference in average predicted and observed risk = -0.01286899781036377
number samples = 563
accuracy = 0.882771
precision class 0 = 0.899807
precision class 1 = 0.681818
recall class 0 = 0.970894
recall class 1 = 0.365854
false negative rate = 0.634146
false positive rate = 0.029106
positive prediction rate = 0.078153
AUC of ROC = 0.858526
AUC of PRC = 0.626728
min(+P, Se) = 0.560976

-------------------------------

confusion matrix:
[[646   9]
 [ 60  19]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09862399846315384
difference in average predicted and observed risk = -0.009005001536846163
number samples = 734
accuracy = 0.905995
precision class 0 = 0.915014
precision class 1 = 0.678571
recall class 0 = 0.98626
recall class 1 = 0.240506
false negative rate = 0.759494
false positive rate = 0.01374
positive prediction rate = 0.038147
AUC of ROC = 0.804851
AUC of PRC = 0.433501
min(+P, Se) = 0.469136

-------------------------------

confusion matrix:
[[4101   56]
 [ 373   98]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09475100040435791
difference in average predicted and observed risk = -0.007020999595642091
number samples = 4628
accuracy = 0.907303
precision class 0 = 0.916629
precision class 1 = 0.636364
recall class 0 = 0.986529
recall class 1 = 0.208068
false negative rate = 0.791932
false positive rate = 0.013471
positive prediction rate = 0.033276
AUC of ROC = 0.809771
AUC of PRC = 0.420887
min(+P, Se) = 0.416136

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08645900338888168
difference in average predicted and observed risk = 0.006290003388881679
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.831724
AUC of PRC = 0.366543
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[385   0]
 [ 41   6]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.08752699941396713
difference in average predicted and observed risk = -0.02126900058603287
number samples = 432
accuracy = 0.905093
precision class 0 = 0.903756
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.12766
false negative rate = 0.87234
false positive rate = 0.0
positive prediction rate = 0.013889
AUC of ROC = 0.826527
AUC of PRC = 0.452748
min(+P, Se) = 0.433962

-------------------------------

confusion matrix:
[[103   2]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.11588399857282639
difference in average predicted and observed risk = 0.0057149985728263825
number samples = 118
accuracy = 0.915254
precision class 0 = 0.927928
precision class 1 = 0.714286
recall class 0 = 0.980952
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.019048
positive prediction rate = 0.059322
AUC of ROC = 0.930403
AUC of PRC = 0.585496
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[26  0]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.13459600508213043
difference in average predicted and observed risk = 0.001263005082130425
number samples = 30
accuracy = 0.966667
precision class 0 = 0.962963
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.0
positive prediction rate = 0.1
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[297   3]
 [ 35   4]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.09784200042486191
difference in average predicted and observed risk = -0.017201999575138086
number samples = 339
accuracy = 0.887906
precision class 0 = 0.894578
precision class 1 = 0.571429
recall class 0 = 0.99
recall class 1 = 0.102564
false negative rate = 0.897436
false positive rate = 0.01
positive prediction rate = 0.020649
AUC of ROC = 0.825128
AUC of PRC = 0.372057
min(+P, Se) = 0.410256

-------------------------------

confusion matrix:
[[432   2]
 [ 30  14]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08963599801063538
difference in average predicted and observed risk = -0.002414001989364631
number samples = 478
accuracy = 0.933054
precision class 0 = 0.935065
precision class 1 = 0.875
recall class 0 = 0.995392
recall class 1 = 0.318182
false negative rate = 0.681818
false positive rate = 0.004608
positive prediction rate = 0.033473
AUC of ROC = 0.869083
AUC of PRC = 0.577268
min(+P, Se) = 0.568182

-------------------------------

confusion matrix:
[[388   0]
 [ 31   7]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.07932700216770172
difference in average predicted and observed risk = -0.009874997832298282
number samples = 426
accuracy = 0.92723
precision class 0 = 0.926014
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.184211
false negative rate = 0.815789
false positive rate = 0.0
positive prediction rate = 0.016432
AUC of ROC = 0.846853
AUC of PRC = 0.482358
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[88  2]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.12155000120401382
difference in average predicted and observed risk = 0.003903001204013823
number samples = 102
accuracy = 0.901961
precision class 0 = 0.916667
precision class 1 = 0.666667
recall class 0 = 0.977778
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.022222
positive prediction rate = 0.058824
AUC of ROC = 0.936111
AUC of PRC = 0.698963
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.09153100103139877
difference in average predicted and observed risk = 0.002821001031398776
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.860821
AUC of PRC = 0.300708
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[106   2]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10721399635076523
difference in average predicted and observed risk = -0.04239200364923476
number samples = 127
accuracy = 0.88189
precision class 0 = 0.890756
precision class 1 = 0.75
recall class 0 = 0.981481
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.018519
positive prediction rate = 0.062992
AUC of ROC = 0.830409
AUC of PRC = 0.55444
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.12782199680805206
difference in average predicted and observed risk = 0.04887499680805206
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.866667
AUC of PRC = 0.4807
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[729   5]
 [ 65  18]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09304100275039673
difference in average predicted and observed risk = -0.008549997249603272
number samples = 817
accuracy = 0.914321
precision class 0 = 0.918136
precision class 1 = 0.782609
recall class 0 = 0.993188
recall class 1 = 0.216867
false negative rate = 0.783133
false positive rate = 0.006812
positive prediction rate = 0.028152
AUC of ROC = 0.851843
AUC of PRC = 0.482359
min(+P, Se) = 0.5

-------------------------------

Epoch 00032: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch32.state
Epoch 33/100
 - 319s - loss: 0.2762 - val_loss: 0.2562

==>predicting on train



confusion matrix:
[[2137   18]
 [ 215   40]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.07007800042629242
difference in average predicted and observed risk = -0.03573099957370758
number samples = 2410
accuracy = 0.903319
precision class 0 = 0.908588
precision class 1 = 0.689655
recall class 0 = 0.991647
recall class 1 = 0.156863
false negative rate = 0.843137
false positive rate = 0.008353
positive prediction rate = 0.024066
AUC of ROC = 0.801645
AUC of PRC = 0.421054
min(+P, Se) = 0.40625

-------------------------------

confusion matrix:
[[1171    8]
 [ 105   13]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.06278599798679352
difference in average predicted and observed risk = -0.028193002013206486
number samples = 1297
accuracy = 0.912876
precision class 0 = 0.917712
precision class 1 = 0.619048
recall class 0 = 0.993215
recall class 1 = 0.110169
false negative rate = 0.889831
false positive rate = 0.006785
positive prediction rate = 0.016191
AUC of ROC = 0.810116
AUC of PRC = 0.36032
min(+P, Se) = 0.381356

-------------------------------

confusion matrix:
[[651   5]
 [ 67   7]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.0746230036020279
difference in average predicted and observed risk = -0.02674699639797211
number samples = 730
accuracy = 0.90137
precision class 0 = 0.906685
precision class 1 = 0.583333
recall class 0 = 0.992378
recall class 1 = 0.094595
false negative rate = 0.905405
false positive rate = 0.007622
positive prediction rate = 0.016438
AUC of ROC = 0.776347
AUC of PRC = 0.383122
min(+P, Se) = 0.445946

-------------------------------

confusion matrix:
[[166   1]
 [ 15   9]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.08782199770212173
difference in average predicted and observed risk = -0.03783200229787825
number samples = 191
accuracy = 0.91623
precision class 0 = 0.917127
precision class 1 = 0.9
recall class 0 = 0.994012
recall class 1 = 0.375
false negative rate = 0.625
false positive rate = 0.005988
positive prediction rate = 0.052356
AUC of ROC = 0.872754
AUC of PRC = 0.690137
min(+P, Se) = 0.708333

-------------------------------

confusion matrix:
[[2458   16]
 [ 228   27]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.06502500176429749
difference in average predicted and observed risk = -0.02841599823570251
number samples = 2729
accuracy = 0.91059
precision class 0 = 0.915115
precision class 1 = 0.627907
recall class 0 = 0.993533
recall class 1 = 0.105882
false negative rate = 0.894118
false positive rate = 0.006467
positive prediction rate = 0.015757
AUC of ROC = 0.790332
AUC of PRC = 0.367846
min(+P, Se) = 0.396887

-------------------------------

confusion matrix:
[[1667   16]
 [ 174   42]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.07589100301265717
difference in average predicted and observed risk = -0.03785299698734283
number samples = 1899
accuracy = 0.899947
precision class 0 = 0.905486
precision class 1 = 0.724138
recall class 0 = 0.990493
recall class 1 = 0.194444
false negative rate = 0.805556
false positive rate = 0.009507
positive prediction rate = 0.030542
AUC of ROC = 0.815747
AUC of PRC = 0.471194
min(+P, Se) = 0.437788

-------------------------------

confusion matrix:
[[544   5]
 [ 69   8]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.07946400344371796
difference in average predicted and observed risk = -0.043538996556282045
number samples = 626
accuracy = 0.881789
precision class 0 = 0.887439
precision class 1 = 0.615385
recall class 0 = 0.990893
recall class 1 = 0.103896
false negative rate = 0.896104
false positive rate = 0.009107
positive prediction rate = 0.020767
AUC of ROC = 0.794857
AUC of PRC = 0.425312
min(+P, Se) = 0.407407

-------------------------------

confusion matrix:
[[2240    9]
 [ 187   21]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.05764999985694885
difference in average predicted and observed risk = -0.027006000143051143
number samples = 2457
accuracy = 0.920228
precision class 0 = 0.92295
precision class 1 = 0.7
recall class 0 = 0.995998
recall class 1 = 0.100962
false negative rate = 0.899038
false positive rate = 0.004002
positive prediction rate = 0.01221
AUC of ROC = 0.787063
AUC of PRC = 0.342296
min(+P, Se) = 0.350962

-------------------------------

confusion matrix:
[[218   5]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.06910300254821777
difference in average predicted and observed risk = -0.03170299745178223
number samples = 248
accuracy = 0.879032
precision class 0 = 0.897119
precision class 1 = 0.0
recall class 0 = 0.977578
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.022422
positive prediction rate = 0.020161
AUC of ROC = 0.770404
AUC of PRC = 0.237802
min(+P, Se) = 0.292683

-------------------------------

confusion matrix:
[[474   7]
 [ 54  28]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.10309799760580063
difference in average predicted and observed risk = -0.04255000239419937
number samples = 563
accuracy = 0.891652
precision class 0 = 0.897727
precision class 1 = 0.8
recall class 0 = 0.985447
recall class 1 = 0.341463
false negative rate = 0.658537
false positive rate = 0.014553
positive prediction rate = 0.062167
AUC of ROC = 0.84263
AUC of PRC = 0.614304
min(+P, Se) = 0.585366

-------------------------------

confusion matrix:
[[649   6]
 [ 67  12]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.07492800056934357
difference in average predicted and observed risk = -0.032700999430656436
number samples = 734
accuracy = 0.900545
precision class 0 = 0.906425
precision class 1 = 0.666667
recall class 0 = 0.99084
recall class 1 = 0.151899
false negative rate = 0.848101
false positive rate = 0.00916
positive prediction rate = 0.024523
AUC of ROC = 0.807653
AUC of PRC = 0.430979
min(+P, Se) = 0.468354

-------------------------------

confusion matrix:
[[4125   32]
 [ 402   69]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.06948400288820267
difference in average predicted and observed risk = -0.032287997111797334
number samples = 4628
accuracy = 0.906223
precision class 0 = 0.911199
precision class 1 = 0.683168
recall class 0 = 0.992302
recall class 1 = 0.146497
false negative rate = 0.853503
false positive rate = 0.007698
positive prediction rate = 0.021824
AUC of ROC = 0.802253
AUC of PRC = 0.415295
min(+P, Se) = 0.41189

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 18   1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.06005999818444252
difference in average predicted and observed risk = -0.020109001815557484
number samples = 237
accuracy = 0.915612
precision class 0 = 0.923077
precision class 1 = 0.333333
recall class 0 = 0.990826
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.009174
positive prediction rate = 0.012658
AUC of ROC = 0.840174
AUC of PRC = 0.36827
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[385   0]
 [ 43   4]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.06367599964141846
difference in average predicted and observed risk = -0.04512000035858155
number samples = 432
accuracy = 0.900463
precision class 0 = 0.899533
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.085106
false negative rate = 0.914894
false positive rate = 0.0
positive prediction rate = 0.009259
AUC of ROC = 0.79591
AUC of PRC = 0.456336
min(+P, Se) = 0.446809

-------------------------------

confusion matrix:
[[104   1]
 [  9   4]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.08853700011968613
difference in average predicted and observed risk = -0.021631999880313876
number samples = 118
accuracy = 0.915254
precision class 0 = 0.920354
precision class 1 = 0.8
recall class 0 = 0.990476
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.009524
positive prediction rate = 0.042373
AUC of ROC = 0.914286
AUC of PRC = 0.610609
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.10960499942302704
difference in average predicted and observed risk = -0.02372800057697297
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[298   2]
 [ 37   2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.07200299948453903
difference in average predicted and observed risk = -0.04304100051546096
number samples = 339
accuracy = 0.884956
precision class 0 = 0.889552
precision class 1 = 0.5
recall class 0 = 0.993333
recall class 1 = 0.051282
false negative rate = 0.948718
false positive rate = 0.006667
positive prediction rate = 0.011799
AUC of ROC = 0.801538
AUC of PRC = 0.370437
min(+P, Se) = 0.422222

-------------------------------

confusion matrix:
[[433   1]
 [ 35   9]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.06499800086021423
difference in average predicted and observed risk = -0.027051999139785773
number samples = 478
accuracy = 0.924686
precision class 0 = 0.925214
precision class 1 = 0.9
recall class 0 = 0.997696
recall class 1 = 0.204545
false negative rate = 0.795455
false positive rate = 0.002304
positive prediction rate = 0.020921
AUC of ROC = 0.860285
AUC of PRC = 0.586216
min(+P, Se) = 0.590909

-------------------------------

confusion matrix:
[[388   0]
 [ 35   3]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.0569860003888607
difference in average predicted and observed risk = -0.0322159996111393
number samples = 426
accuracy = 0.91784
precision class 0 = 0.917258
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.078947
false negative rate = 0.921053
false positive rate = 0.0
positive prediction rate = 0.007042
AUC of ROC = 0.838443
AUC of PRC = 0.475986
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[89  1]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.08891499787569046
difference in average predicted and observed risk = -0.02873200212430954
number samples = 102
accuracy = 0.911765
precision class 0 = 0.917526
precision class 1 = 0.8
recall class 0 = 0.988889
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.011111
positive prediction rate = 0.04902
AUC of ROC = 0.950926
AUC of PRC = 0.753488
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.06656999886035919
difference in average predicted and observed risk = -0.022140001139640805
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.803701
AUC of PRC = 0.271536
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[107   1]
 [ 15   4]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.08195800334215164
difference in average predicted and observed risk = -0.06764799665784835
number samples = 127
accuracy = 0.874016
precision class 0 = 0.877049
precision class 1 = 0.8
recall class 0 = 0.990741
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.009259
positive prediction rate = 0.03937
AUC of ROC = 0.799708
AUC of PRC = 0.558425
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.09129700064659119
difference in average predicted and observed risk = 0.012350000646591183
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.885714
AUC of PRC = 0.50101
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[731   3]
 [ 72  11]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.06790400296449661
difference in average predicted and observed risk = -0.03368699703550339
number samples = 817
accuracy = 0.908201
precision class 0 = 0.910336
precision class 1 = 0.785714
recall class 0 = 0.995913
recall class 1 = 0.13253
false negative rate = 0.86747
false positive rate = 0.004087
positive prediction rate = 0.017136
AUC of ROC = 0.836069
AUC of PRC = 0.486328
min(+P, Se) = 0.511905

-------------------------------

Epoch 00033: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch33.state
Epoch 34/100
 - 319s - loss: 0.2794 - val_loss: 0.2600

==>predicting on train



confusion matrix:
[[2135   20]
 [ 208   47]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.0724330022931099
difference in average predicted and observed risk = -0.033375997706890106
number samples = 2410
accuracy = 0.905394
precision class 0 = 0.911225
precision class 1 = 0.701493
recall class 0 = 0.990719
recall class 1 = 0.184314
false negative rate = 0.815686
false positive rate = 0.009281
positive prediction rate = 0.027801
AUC of ROC = 0.797538
AUC of PRC = 0.413959
min(+P, Se) = 0.385768

-------------------------------

confusion matrix:
[[1167   12]
 [ 105   13]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.06523700058460236
difference in average predicted and observed risk = -0.02574199941539765
number samples = 1297
accuracy = 0.909792
precision class 0 = 0.917453
precision class 1 = 0.52
recall class 0 = 0.989822
recall class 1 = 0.110169
false negative rate = 0.889831
false positive rate = 0.010178
positive prediction rate = 0.019275
AUC of ROC = 0.812014
AUC of PRC = 0.356448
min(+P, Se) = 0.398305

-------------------------------

confusion matrix:
[[650   6]
 [ 63  11]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.07697200030088425
difference in average predicted and observed risk = -0.024397999699115755
number samples = 730
accuracy = 0.905479
precision class 0 = 0.911641
precision class 1 = 0.647059
recall class 0 = 0.990854
recall class 1 = 0.148649
false negative rate = 0.851351
false positive rate = 0.009146
positive prediction rate = 0.023288
AUC of ROC = 0.781868
AUC of PRC = 0.385893
min(+P, Se) = 0.445946

-------------------------------

confusion matrix:
[[166   1]
 [ 15   9]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.09457899630069733
difference in average predicted and observed risk = -0.03107500369930266
number samples = 191
accuracy = 0.91623
precision class 0 = 0.917127
precision class 1 = 0.9
recall class 0 = 0.994012
recall class 1 = 0.375
false negative rate = 0.625
false positive rate = 0.005988
positive prediction rate = 0.052356
AUC of ROC = 0.888972
AUC of PRC = 0.698912
min(+P, Se) = 0.64

-------------------------------

confusion matrix:
[[2454   20]
 [ 219   36]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.06733100116252899
difference in average predicted and observed risk = -0.026109998837471005
number samples = 2729
accuracy = 0.912422
precision class 0 = 0.91807
precision class 1 = 0.642857
recall class 0 = 0.991916
recall class 1 = 0.141176
false negative rate = 0.858824
false positive rate = 0.008084
positive prediction rate = 0.02052
AUC of ROC = 0.79471
AUC of PRC = 0.3671
min(+P, Se) = 0.388235

-------------------------------

confusion matrix:
[[1664   19]
 [ 172   44]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.07882200181484222
difference in average predicted and observed risk = -0.034921998185157774
number samples = 1899
accuracy = 0.899421
precision class 0 = 0.906318
precision class 1 = 0.698413
recall class 0 = 0.988711
recall class 1 = 0.203704
false negative rate = 0.796296
false positive rate = 0.011289
positive prediction rate = 0.033175
AUC of ROC = 0.812345
AUC of PRC = 0.466419
min(+P, Se) = 0.435185

-------------------------------

confusion matrix:
[[542   7]
 [ 66  11]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.08265499770641327
difference in average predicted and observed risk = -0.04034800229358673
number samples = 626
accuracy = 0.883387
precision class 0 = 0.891447
precision class 1 = 0.611111
recall class 0 = 0.98725
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.01275
positive prediction rate = 0.028754
AUC of ROC = 0.803373
AUC of PRC = 0.433278
min(+P, Se) = 0.426829

-------------------------------

confusion matrix:
[[2238   11]
 [ 183   25]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.059560999274253845
difference in average predicted and observed risk = -0.02509500072574615
number samples = 2457
accuracy = 0.921042
precision class 0 = 0.924411
precision class 1 = 0.694444
recall class 0 = 0.995109
recall class 1 = 0.120192
false negative rate = 0.879808
false positive rate = 0.004891
positive prediction rate = 0.014652
AUC of ROC = 0.787865
AUC of PRC = 0.333683
min(+P, Se) = 0.336538

-------------------------------

confusion matrix:
[[218   5]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.068401999771595
difference in average predicted and observed risk = -0.032404000228405005
number samples = 248
accuracy = 0.879032
precision class 0 = 0.897119
precision class 1 = 0.0
recall class 0 = 0.977578
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.022422
positive prediction rate = 0.020161
AUC of ROC = 0.761435
AUC of PRC = 0.232582
min(+P, Se) = 0.307692

-------------------------------

confusion matrix:
[[472   9]
 [ 54  28]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.10631000250577927
difference in average predicted and observed risk = -0.03933799749422073
number samples = 563
accuracy = 0.888099
precision class 0 = 0.897338
precision class 1 = 0.756757
recall class 0 = 0.981289
recall class 1 = 0.341463
false negative rate = 0.658537
false positive rate = 0.018711
positive prediction rate = 0.065719
AUC of ROC = 0.839131
AUC of PRC = 0.60861
min(+P, Se) = 0.576471

-------------------------------

confusion matrix:
[[648   7]
 [ 63  16]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.07974100112915039
difference in average predicted and observed risk = -0.027887998870849612
number samples = 734
accuracy = 0.904632
precision class 0 = 0.911392
precision class 1 = 0.695652
recall class 0 = 0.989313
recall class 1 = 0.202532
false negative rate = 0.797468
false positive rate = 0.010687
positive prediction rate = 0.031335
AUC of ROC = 0.815287
AUC of PRC = 0.430782
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[4118   39]
 [ 391   80]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.07204599678516388
difference in average predicted and observed risk = -0.029726003214836122
number samples = 4628
accuracy = 0.907087
precision class 0 = 0.913285
precision class 1 = 0.672269
recall class 0 = 0.990618
recall class 1 = 0.169851
false negative rate = 0.830149
false positive rate = 0.009382
positive prediction rate = 0.025713
AUC of ROC = 0.80279
AUC of PRC = 0.412492
min(+P, Se) = 0.408034

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 16   3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.062182001769542694
difference in average predicted and observed risk = -0.01798699823045731
number samples = 237
accuracy = 0.919831
precision class 0 = 0.930736
precision class 1 = 0.5
recall class 0 = 0.986239
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.013761
positive prediction rate = 0.025316
AUC of ROC = 0.838967
AUC of PRC = 0.356979
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[385   0]
 [ 43   4]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.06599599868059158
difference in average predicted and observed risk = -0.04280000131940842
number samples = 432
accuracy = 0.900463
precision class 0 = 0.899533
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.085106
false negative rate = 0.914894
false positive rate = 0.0
positive prediction rate = 0.009259
AUC of ROC = 0.780823
AUC of PRC = 0.445806
min(+P, Se) = 0.408163

-------------------------------

confusion matrix:
[[104   1]
 [  9   4]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.09073799848556519
difference in average predicted and observed risk = -0.019431001514434817
number samples = 118
accuracy = 0.915254
precision class 0 = 0.920354
precision class 1 = 0.8
recall class 0 = 0.990476
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.009524
positive prediction rate = 0.042373
AUC of ROC = 0.898901
AUC of PRC = 0.61864
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11882200092077255
difference in average predicted and observed risk = -0.014510999079227455
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[297   3]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.07457300275564194
difference in average predicted and observed risk = -0.040470997244358056
number samples = 339
accuracy = 0.884956
precision class 0 = 0.891892
precision class 1 = 0.5
recall class 0 = 0.99
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.01
positive prediction rate = 0.017699
AUC of ROC = 0.780684
AUC of PRC = 0.355542
min(+P, Se) = 0.435897

-------------------------------

confusion matrix:
[[433   1]
 [ 34  10]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.06744500249624252
difference in average predicted and observed risk = -0.024604997503757484
number samples = 478
accuracy = 0.926778
precision class 0 = 0.927195
precision class 1 = 0.909091
recall class 0 = 0.997696
recall class 1 = 0.227273
false negative rate = 0.772727
false positive rate = 0.002304
positive prediction rate = 0.023013
AUC of ROC = 0.852587
AUC of PRC = 0.574296
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 33   5]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.05899599939584732
difference in average predicted and observed risk = -0.030206000604152683
number samples = 426
accuracy = 0.922535
precision class 0 = 0.921615
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.131579
false negative rate = 0.868421
false positive rate = 0.0
positive prediction rate = 0.011737
AUC of ROC = 0.822775
AUC of PRC = 0.45645
min(+P, Se) = 0.394737

-------------------------------

confusion matrix:
[[89  1]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.09022200107574463
difference in average predicted and observed risk = -0.027424998924255373
number samples = 102
accuracy = 0.911765
precision class 0 = 0.917526
precision class 1 = 0.8
recall class 0 = 0.988889
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.011111
positive prediction rate = 0.04902
AUC of ROC = 0.940741
AUC of PRC = 0.742397
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.06936900317668915
difference in average predicted and observed risk = -0.01934099682331085
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.795656
AUC of PRC = 0.272591
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[106   2]
 [ 15   4]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.08735600113868713
difference in average predicted and observed risk = -0.062249998861312855
number samples = 127
accuracy = 0.866142
precision class 0 = 0.876033
precision class 1 = 0.666667
recall class 0 = 0.981481
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.018519
positive prediction rate = 0.047244
AUC of ROC = 0.798246
AUC of PRC = 0.542027
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.09179099649190903
difference in average predicted and observed risk = 0.012843996491909024
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.895238
AUC of PRC = 0.509259
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[730   4]
 [ 70  13]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.07040300220251083
difference in average predicted and observed risk = -0.031187997797489167
number samples = 817
accuracy = 0.909425
precision class 0 = 0.9125
precision class 1 = 0.764706
recall class 0 = 0.99455
recall class 1 = 0.156627
false negative rate = 0.843373
false positive rate = 0.00545
positive prediction rate = 0.020808
AUC of ROC = 0.823233
AUC of PRC = 0.478663
min(+P, Se) = 0.493976

-------------------------------

Epoch 00034: saving model to models/outputs/starr/keras_states/2020-06-03_8-25/k_clstms.GEN_ETH_INS.epoch34.state

TRAINING THE CHANNEL-WISE LSTM without additional data
/share/pi/boussard/eroosli_work/benchmarking/mimic3models/in_hospital_mortality/main.py:7: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses
  import imp
Using TensorFlow backend.
2020-05-06 16:00:01.959112: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libnvinfer.so.6'; dlerror: libnvinfer.so.6: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /share/sw/open/oracle/18.5.0.0/lib/:
2020-05-06 16:00:01.966012: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libnvinfer_plugin.so.6'; dlerror: libnvinfer_plugin.so.6: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /share/sw/open/oracle/18.5.0.0/lib/:
2020-05-06 16:00:01.966034: W tensorflow/compiler/tf2tensorrt/utils/py_utils.cc:30] Cannot dlopen some TensorRT libraries. If you would like to use Nvidia GPU with TensorRT, please make sure the missing libraries mentioned above are installed properly.
==> using model mimic3models/keras_models/channel_wise_lstms.py
==> not used params in network class: dict_keys(['batch_size', 'beta_1', 'data', 'epochs', 'imputation', 'l1', 'l2', 'load_state', 'lr', 'mode', 'network', 'normalizer_state', 'optimizer', 'output_dir', 'prefix', 'save_every', 'small_part', 'target_repl_coef', 'timestep', 'verbose'])
==> excluded demographics: ['Ethnicity', 'Gender', 'Insurance']
==> found 17 channels: ['Capillary refill rate', 'Diastolic blood pressure', 'Fraction inspired oxygen', 'Glascow coma scale eye opening', 'Glascow coma scale motor response', 'Glascow coma scale total', 'Glascow coma scale verbal response', 'Glucose', 'Heart Rate', 'Height', 'Mean blood pressure', 'Oxygen saturation', 'Respiratory rate', 'Systolic blood pressure', 'Temperature', 'Weight', 'pH']
2020-05-06 16:00:11.911232: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /share/sw/open/oracle/18.5.0.0/lib/:
2020-05-06 16:00:11.911272: E tensorflow/stream_executor/cuda/cuda_driver.cc:351] failed call to cuInit: UNKNOWN ERROR (303)
2020-05-06 16:00:11.911293: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (slurm-compute-m2mj9): /proc/driver/nvidia/version does not exist
2020-05-06 16:00:11.911512: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA
2020-05-06 16:00:11.918136: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100000000 Hz
2020-05-06 16:00:11.918390: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x557e1035f280 initialized for platform Host (this does not guarantee that XLA will be used). Devices:
2020-05-06 16:00:11.918419: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version
==> model.final_name: 2020-05-06_9-0.k_clstms.none
==> compiling the model
Model: "network_1"
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
X (InputLayer)                  (None, None, 76)     0                                            
__________________________________________________________________________________________________
masking_1 (Masking)             (None, None, 76)     0           X[0][0]                          
__________________________________________________________________________________________________
slice_1 (Slice)                 (None, None, 3)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_2 (Slice)                 (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_3 (Slice)                 (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_4 (Slice)                 (None, None, 9)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_5 (Slice)                 (None, None, 13)     0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_6 (Slice)                 (None, None, 14)     0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_7 (Slice)                 (None, None, 13)     0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_8 (Slice)                 (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_9 (Slice)                 (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_10 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_11 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_12 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_13 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_14 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_15 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_16 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_17 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
bidirectional_1 (Bidirectional) (None, None, 8)      256         slice_1[0][0]                    
__________________________________________________________________________________________________
bidirectional_2 (Bidirectional) (None, None, 8)      224         slice_2[0][0]                    
__________________________________________________________________________________________________
bidirectional_3 (Bidirectional) (None, None, 8)      224         slice_3[0][0]                    
__________________________________________________________________________________________________
bidirectional_4 (Bidirectional) (None, None, 8)      448         slice_4[0][0]                    
__________________________________________________________________________________________________
bidirectional_5 (Bidirectional) (None, None, 8)      576         slice_5[0][0]                    
__________________________________________________________________________________________________
bidirectional_6 (Bidirectional) (None, None, 8)      608         slice_6[0][0]                    
__________________________________________________________________________________________________
bidirectional_7 (Bidirectional) (None, None, 8)      576         slice_7[0][0]                    
__________________________________________________________________________________________________
bidirectional_8 (Bidirectional) (None, None, 8)      224         slice_8[0][0]                    
__________________________________________________________________________________________________
bidirectional_9 (Bidirectional) (None, None, 8)      224         slice_9[0][0]                    
__________________________________________________________________________________________________
bidirectional_10 (Bidirectional (None, None, 8)      224         slice_10[0][0]                   
__________________________________________________________________________________________________
bidirectional_11 (Bidirectional (None, None, 8)      224         slice_11[0][0]                   
__________________________________________________________________________________________________
bidirectional_12 (Bidirectional (None, None, 8)      224         slice_12[0][0]                   
__________________________________________________________________________________________________
bidirectional_13 (Bidirectional (None, None, 8)      224         slice_13[0][0]                   
__________________________________________________________________________________________________
bidirectional_14 (Bidirectional (None, None, 8)      224         slice_14[0][0]                   
__________________________________________________________________________________________________
bidirectional_15 (Bidirectional (None, None, 8)      224         slice_15[0][0]                   
__________________________________________________________________________________________________
bidirectional_16 (Bidirectional (None, None, 8)      224         slice_16[0][0]                   
__________________________________________________________________________________________________
bidirectional_17 (Bidirectional (None, None, 8)      224         slice_17[0][0]                   
__________________________________________________________________________________________________
concatenate_1 (Concatenate)     (None, None, 136)    0           bidirectional_1[0][0]            
                                                                 bidirectional_2[0][0]            
                                                                 bidirectional_3[0][0]            
                                                                 bidirectional_4[0][0]            
                                                                 bidirectional_5[0][0]            
                                                                 bidirectional_6[0][0]            
                                                                 bidirectional_7[0][0]            
                                                                 bidirectional_8[0][0]            
                                                                 bidirectional_9[0][0]            
                                                                 bidirectional_10[0][0]           
                                                                 bidirectional_11[0][0]           
                                                                 bidirectional_12[0][0]           
                                                                 bidirectional_13[0][0]           
                                                                 bidirectional_14[0][0]           
                                                                 bidirectional_15[0][0]           
                                                                 bidirectional_16[0][0]           
                                                                 bidirectional_17[0][0]           
__________________________________________________________________________________________________
lstm_18 (LSTM)                  (None, 32)           21632       concatenate_1[0][0]              
__________________________________________________________________________________________________
dropout_1 (Dropout)             (None, 32)           0           lstm_18[0][0]                    
__________________________________________________________________________________________________
dense_1 (Dense)                 (None, 1)            33          dropout_1[0][0]                  
==================================================================================================
Total params: 26,817
Trainable params: 26,817
Non-trainable params: 0
__________________________________________________________________________________________________
==> training
Train on 14681 samples, validate on 3222 samples
Epoch 1/100
 - 808s - loss: 0.3413 - val_loss: 0.3114

==>predicting on train



confusion matrix:
[[6874  162]
 [1004  308]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.11492899805307388
difference in average predicted and observed risk = -0.042234001946926114
number samples = 8348
accuracy = 0.860326
precision class 0 = 0.872557
precision class 1 = 0.655319
recall class 0 = 0.976976
recall class 1 = 0.234756
false negative rate = 0.765244
false positive rate = 0.023024
positive prediction rate = 0.056301
AUC of ROC = 0.82178
AUC of PRC = 0.507865
min(+P, Se) = 0.493161

-------------------------------

confusion matrix:
[[3870  132]
 [ 314  157]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.1131180003285408
difference in average predicted and observed risk = 0.0078200003285408
number samples = 4473
accuracy = 0.900291
precision class 0 = 0.924952
precision class 1 = 0.543253
recall class 0 = 0.967017
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.032984
positive prediction rate = 0.06461
AUC of ROC = 0.839778
AUC of PRC = 0.4608
min(+P, Se) = 0.469214

-------------------------------

confusion matrix:
[[1158   37]
 [  85   58]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.123649001121521
difference in average predicted and observed risk = 0.016773001121520997
number samples = 1338
accuracy = 0.908819
precision class 0 = 0.931617
precision class 1 = 0.610526
recall class 0 = 0.969038
recall class 1 = 0.405594
false negative rate = 0.594406
false positive rate = 0.030962
positive prediction rate = 0.071001
AUC of ROC = 0.866085
AUC of PRC = 0.533787
min(+P, Se) = 0.496552

-------------------------------

confusion matrix:
[[341   9]
 [ 25  14]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.11036299914121628
difference in average predicted and observed risk = 0.01010599914121628
number samples = 389
accuracy = 0.912596
precision class 0 = 0.931694
precision class 1 = 0.608696
recall class 0 = 0.974286
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.025714
positive prediction rate = 0.059126
AUC of ROC = 0.836044
AUC of PRC = 0.474372
min(+P, Se) = 0.487179

-------------------------------

confusion matrix:
[[104   7]
 [ 12  10]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1698019951581955
difference in average predicted and observed risk = 0.00438799515819549
number samples = 133
accuracy = 0.857143
precision class 0 = 0.896552
precision class 1 = 0.588235
recall class 0 = 0.936937
recall class 1 = 0.454545
false negative rate = 0.545455
false positive rate = 0.063063
positive prediction rate = 0.12782
AUC of ROC = 0.862817
AUC of PRC = 0.562742
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[6807  179]
 [ 777  296]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11263500154018402
difference in average predicted and observed risk = -0.02050799845981599
number samples = 8059
accuracy = 0.881375
precision class 0 = 0.897547
precision class 1 = 0.623158
recall class 0 = 0.974377
recall class 1 = 0.275862
false negative rate = 0.724138
false positive rate = 0.025623
positive prediction rate = 0.05894
AUC of ROC = 0.830311
AUC of PRC = 0.490946
min(+P, Se) = 0.469824

-------------------------------

confusion matrix:
[[5540  168]
 [ 663  251]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11909300088882446
difference in average predicted and observed risk = -0.018931999111175546
number samples = 6622
accuracy = 0.874509
precision class 0 = 0.893116
precision class 1 = 0.599045
recall class 0 = 0.970568
recall class 1 = 0.274617
false negative rate = 0.725383
false positive rate = 0.029432
positive prediction rate = 0.063274
AUC of ROC = 0.830603
AUC of PRC = 0.4834
min(+P, Se) = 0.478118

-------------------------------

confusion matrix:
[[8819  227]
 [1026  337]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.109995998442173
difference in average predicted and observed risk = -0.020948001557827
number samples = 10409
accuracy = 0.879623
precision class 0 = 0.895785
precision class 1 = 0.597518
recall class 0 = 0.974906
recall class 1 = 0.247249
false negative rate = 0.752751
false positive rate = 0.025094
positive prediction rate = 0.054184
AUC of ROC = 0.824347
AUC of PRC = 0.463944
min(+P, Se) = 0.454145

-------------------------------

confusion matrix:
[[1581   60]
 [ 268  139]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14613500237464905
difference in average predicted and observed risk = -0.05259499762535094
number samples = 2048
accuracy = 0.839844
precision class 0 = 0.855057
precision class 1 = 0.698492
recall class 0 = 0.963437
recall class 1 = 0.341523
false negative rate = 0.658477
false positive rate = 0.036563
positive prediction rate = 0.097168
AUC of ROC = 0.835438
AUC of PRC = 0.598536
min(+P, Se) = 0.570743

-------------------------------

confusion matrix:
[[1249   33]
 [  88   38]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.1057640016078949
difference in average predicted and observed risk = 0.0162750016078949
number samples = 1408
accuracy = 0.914062
precision class 0 = 0.934181
precision class 1 = 0.535211
recall class 0 = 0.974259
recall class 1 = 0.301587
false negative rate = 0.698413
false positive rate = 0.025741
positive prediction rate = 0.050426
AUC of ROC = 0.857
AUC of PRC = 0.405401
min(+P, Se) = 0.420635

-------------------------------

confusion matrix:
[[283  13]
 [ 31  21]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.145796000957489
difference in average predicted and observed risk = -0.0036289990425109886
number samples = 348
accuracy = 0.873563
precision class 0 = 0.901274
precision class 1 = 0.617647
recall class 0 = 0.956081
recall class 1 = 0.403846
false negative rate = 0.596154
false positive rate = 0.043919
positive prediction rate = 0.097701
AUC of ROC = 0.845699
AUC of PRC = 0.603581
min(+P, Se) = 0.538462

-------------------------------

confusion matrix:
[[415  14]
 [ 27  12]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11212100088596344
difference in average predicted and observed risk = 0.028788000885963436
number samples = 468
accuracy = 0.912393
precision class 0 = 0.938914
precision class 1 = 0.461538
recall class 0 = 0.967366
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.032634
positive prediction rate = 0.055556
AUC of ROC = 0.83928
AUC of PRC = 0.399342
min(+P, Se) = 0.435897

-------------------------------

confusion matrix:
[[12347   347]
 [ 1440   547]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11554799973964691
difference in average predicted and observed risk = -0.01979700026035308
number samples = 14681
accuracy = 0.878278
precision class 0 = 0.895554
precision class 1 = 0.611857
recall class 0 = 0.972664
recall class 1 = 0.275289
false negative rate = 0.724711
false positive rate = 0.027336
positive prediction rate = 0.060895
AUC of ROC = 0.830058
AUC of PRC = 0.487626
min(+P, Se) = 0.473578

-------------------------------

==>predicting on validation



confusion matrix:
[[1495   40]
 [ 198   80]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12042900174856186
difference in average predicted and observed risk = -0.03290799825143814
number samples = 1813
accuracy = 0.868726
precision class 0 = 0.883048
precision class 1 = 0.666667
recall class 0 = 0.973941
recall class 1 = 0.28777
false negative rate = 0.71223
false positive rate = 0.026059
positive prediction rate = 0.066189
AUC of ROC = 0.821737
AUC of PRC = 0.518568
min(+P, Se) = 0.498208

-------------------------------

confusion matrix:
[[870  37]
 [ 82  31]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11647199839353561
difference in average predicted and observed risk = 0.00568799839353562
number samples = 1020
accuracy = 0.883333
precision class 0 = 0.913866
precision class 1 = 0.455882
recall class 0 = 0.959206
recall class 1 = 0.274336
false negative rate = 0.725664
false positive rate = 0.040794
positive prediction rate = 0.066667
AUC of ROC = 0.818901
AUC of PRC = 0.401422
min(+P, Se) = 0.432203

-------------------------------

confusion matrix:
[[240  11]
 [ 22  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12457799911499023
difference in average predicted and observed risk = 0.005279999114990233
number samples = 285
accuracy = 0.884211
precision class 0 = 0.916031
precision class 1 = 0.521739
recall class 0 = 0.956175
recall class 1 = 0.352941
false negative rate = 0.647059
false positive rate = 0.043825
positive prediction rate = 0.080702
AUC of ROC = 0.863487
AUC of PRC = 0.478252
min(+P, Se) = 0.529412

-------------------------------

confusion matrix:
[[69  2]
 [ 5  2]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10741700232028961
difference in average predicted and observed risk = 0.017673002320289607
number samples = 78
accuracy = 0.910256
precision class 0 = 0.932432
precision class 1 = 0.5
recall class 0 = 0.971831
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.028169
positive prediction rate = 0.051282
AUC of ROC = 0.742455
AUC of PRC = 0.453299
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17899399995803833
difference in average predicted and observed risk = 0.02514799995803832
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1482   47]
 [ 171   73]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11873699724674225
difference in average predicted and observed risk = -0.018883002753257744
number samples = 1773
accuracy = 0.877045
precision class 0 = 0.896552
precision class 1 = 0.608333
recall class 0 = 0.969261
recall class 1 = 0.29918
false negative rate = 0.70082
false positive rate = 0.030739
positive prediction rate = 0.067682
AUC of ROC = 0.830986
AUC of PRC = 0.488573
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[1213   44]
 [ 136   56]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12088000029325485
difference in average predicted and observed risk = -0.01162499970674516
number samples = 1449
accuracy = 0.875776
precision class 0 = 0.899185
precision class 1 = 0.56
recall class 0 = 0.964996
recall class 1 = 0.291667
false negative rate = 0.708333
false positive rate = 0.035004
positive prediction rate = 0.069013
AUC of ROC = 0.817037
AUC of PRC = 0.467996
min(+P, Se) = 0.458763

-------------------------------

confusion matrix:
[[1914   64]
 [ 221   90]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11546400189399719
difference in average predicted and observed risk = -0.020402998106002795
number samples = 2289
accuracy = 0.875491
precision class 0 = 0.896487
precision class 1 = 0.584416
recall class 0 = 0.967644
recall class 1 = 0.289389
false negative rate = 0.710611
false positive rate = 0.032356
positive prediction rate = 0.067278
AUC of ROC = 0.823067
AUC of PRC = 0.474738
min(+P, Se) = 0.4791

-------------------------------

confusion matrix:
[[357  11]
 [ 58  23]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1415569931268692
difference in average predicted and observed risk = -0.038844006873130804
number samples = 449
accuracy = 0.846325
precision class 0 = 0.860241
precision class 1 = 0.676471
recall class 0 = 0.970109
recall class 1 = 0.283951
false negative rate = 0.716049
false positive rate = 0.029891
positive prediction rate = 0.075724
AUC of ROC = 0.827194
AUC of PRC = 0.552617
min(+P, Se) = 0.54321

-------------------------------

confusion matrix:
[[269   9]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10907799750566483
difference in average predicted and observed risk = 0.011674997505664822
number samples = 308
accuracy = 0.905844
precision class 0 = 0.930796
precision class 1 = 0.526316
recall class 0 = 0.967626
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.032374
positive prediction rate = 0.061688
AUC of ROC = 0.852998
AUC of PRC = 0.458797
min(+P, Se) = 0.433333

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11540500074625015
difference in average predicted and observed risk = 0.043240000746250146
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.790476
AUC of PRC = 0.296156
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[68  4]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1649159938097
difference in average predicted and observed risk = 0.0763079938097
number samples = 79
accuracy = 0.911392
precision class 0 = 0.957747
precision class 1 = 0.5
recall class 0 = 0.944444
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.055556
positive prediction rate = 0.101266
AUC of ROC = 0.831349
AUC of PRC = 0.597605
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[2695   91]
 [ 307  129]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11970099806785583
difference in average predicted and observed risk = -0.015619001932144161
number samples = 3222
accuracy = 0.876474
precision class 0 = 0.897735
precision class 1 = 0.586364
recall class 0 = 0.967337
recall class 1 = 0.295872
false negative rate = 0.704128
false positive rate = 0.032663
positive prediction rate = 0.068281
AUC of ROC = 0.824234
AUC of PRC = 0.476936
min(+P, Se) = 0.475446

-------------------------------

Epoch 00001: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch1.state
Epoch 2/100
 - 820s - loss: 0.3237 - val_loss: 0.3035

==>predicting on train



confusion matrix:
[[7009   27]
 [1168  144]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.10399200022220612
difference in average predicted and observed risk = -0.05317099977779388
number samples = 8348
accuracy = 0.856852
precision class 0 = 0.85716
precision class 1 = 0.842105
recall class 0 = 0.996163
recall class 1 = 0.109756
false negative rate = 0.890244
false positive rate = 0.003837
positive prediction rate = 0.020484
AUC of ROC = 0.832408
AUC of PRC = 0.532476
min(+P, Se) = 0.498476

-------------------------------

confusion matrix:
[[3967   35]
 [ 377   94]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10059499740600586
difference in average predicted and observed risk = -0.004703002593994143
number samples = 4473
accuracy = 0.907892
precision class 0 = 0.913214
precision class 1 = 0.728682
recall class 0 = 0.991254
recall class 1 = 0.199575
false negative rate = 0.800425
false positive rate = 0.008746
positive prediction rate = 0.02884
AUC of ROC = 0.854042
AUC of PRC = 0.509758
min(+P, Se) = 0.496815

-------------------------------

confusion matrix:
[[1187    8]
 [ 108   35]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10890199989080429
difference in average predicted and observed risk = 0.002025999890804292
number samples = 1338
accuracy = 0.913303
precision class 0 = 0.916602
precision class 1 = 0.813953
recall class 0 = 0.993305
recall class 1 = 0.244755
false negative rate = 0.755245
false positive rate = 0.006695
positive prediction rate = 0.032138
AUC of ROC = 0.879246
AUC of PRC = 0.576751
min(+P, Se) = 0.506944

-------------------------------

confusion matrix:
[[348   2]
 [ 29  10]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09969200193881989
difference in average predicted and observed risk = -0.0005649980611801136
number samples = 389
accuracy = 0.920308
precision class 0 = 0.923077
precision class 1 = 0.833333
recall class 0 = 0.994286
recall class 1 = 0.25641
false negative rate = 0.74359
false positive rate = 0.005714
positive prediction rate = 0.030848
AUC of ROC = 0.857436
AUC of PRC = 0.497743
min(+P, Se) = 0.538462

-------------------------------

confusion matrix:
[[109   2]
 [ 16   6]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1444379985332489
difference in average predicted and observed risk = -0.020976001466751104
number samples = 133
accuracy = 0.864662
precision class 0 = 0.872
precision class 1 = 0.75
recall class 0 = 0.981982
recall class 1 = 0.272727
false negative rate = 0.727273
false positive rate = 0.018018
positive prediction rate = 0.06015
AUC of ROC = 0.905815
AUC of PRC = 0.663753
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[6954   32]
 [ 926  147]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.10128799825906754
difference in average predicted and observed risk = -0.031855001740932476
number samples = 8059
accuracy = 0.881127
precision class 0 = 0.882487
precision class 1 = 0.821229
recall class 0 = 0.995419
recall class 1 = 0.136999
false negative rate = 0.863001
false positive rate = 0.004581
positive prediction rate = 0.022211
AUC of ROC = 0.844168
AUC of PRC = 0.524933
min(+P, Se) = 0.50046

-------------------------------

confusion matrix:
[[5666   42]
 [ 772  142]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.1065400019288063
difference in average predicted and observed risk = -0.031484998071193704
number samples = 6622
accuracy = 0.877076
precision class 0 = 0.880087
precision class 1 = 0.771739
recall class 0 = 0.992642
recall class 1 = 0.155361
false negative rate = 0.844639
false positive rate = 0.007358
positive prediction rate = 0.027786
AUC of ROC = 0.841259
AUC of PRC = 0.520443
min(+P, Se) = 0.497268

-------------------------------

confusion matrix:
[[8998   48]
 [1189  174]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.09936200082302094
difference in average predicted and observed risk = -0.03158199917697907
number samples = 10409
accuracy = 0.881161
precision class 0 = 0.883283
precision class 1 = 0.783784
recall class 0 = 0.994694
recall class 1 = 0.12766
false negative rate = 0.87234
false positive rate = 0.005306
positive prediction rate = 0.021328
AUC of ROC = 0.838008
AUC of PRC = 0.497047
min(+P, Se) = 0.470286

-------------------------------

confusion matrix:
[[1631   10]
 [ 335   72]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.12640799582004547
difference in average predicted and observed risk = -0.07232200417995452
number samples = 2048
accuracy = 0.831543
precision class 0 = 0.829603
precision class 1 = 0.878049
recall class 0 = 0.993906
recall class 1 = 0.176904
false negative rate = 0.823096
false positive rate = 0.006094
positive prediction rate = 0.040039
AUC of ROC = 0.848323
AUC of PRC = 0.636264
min(+P, Se) = 0.597052

-------------------------------

confusion matrix:
[[1271   11]
 [ 101   25]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.09717400372028351
difference in average predicted and observed risk = 0.007685003720283509
number samples = 1408
accuracy = 0.920455
precision class 0 = 0.926385
precision class 1 = 0.694444
recall class 0 = 0.99142
recall class 1 = 0.198413
false negative rate = 0.801587
false positive rate = 0.00858
positive prediction rate = 0.025568
AUC of ROC = 0.864225
AUC of PRC = 0.491482
min(+P, Se) = 0.463235

-------------------------------

confusion matrix:
[[294   2]
 [ 40  12]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.12867599725723267
difference in average predicted and observed risk = -0.020749002742767336
number samples = 348
accuracy = 0.87931
precision class 0 = 0.88024
precision class 1 = 0.857143
recall class 0 = 0.993243
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.006757
positive prediction rate = 0.04023
AUC of ROC = 0.859537
AUC of PRC = 0.605605
min(+P, Se) = 0.519231

-------------------------------

confusion matrix:
[[426   3]
 [ 33   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10052700340747833
difference in average predicted and observed risk = 0.017194003407478328
number samples = 468
accuracy = 0.923077
precision class 0 = 0.928105
precision class 1 = 0.666667
recall class 0 = 0.993007
recall class 1 = 0.153846
false negative rate = 0.846154
false positive rate = 0.006993
positive prediction rate = 0.019231
AUC of ROC = 0.844958
AUC of PRC = 0.414036
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[12620    74]
 [ 1698   289]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.10365699976682663
difference in average predicted and observed risk = -0.03168800023317336
number samples = 14681
accuracy = 0.8793
precision class 0 = 0.881408
precision class 1 = 0.796143
recall class 0 = 0.99417
recall class 1 = 0.145445
false negative rate = 0.854555
false positive rate = 0.00583
positive prediction rate = 0.024726
AUC of ROC = 0.842565
AUC of PRC = 0.522241
min(+P, Se) = 0.49925

-------------------------------

==>predicting on validation



confusion matrix:
[[1529    6]
 [ 235   43]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1084979996085167
difference in average predicted and observed risk = -0.04483900039148331
number samples = 1813
accuracy = 0.867071
precision class 0 = 0.86678
precision class 1 = 0.877551
recall class 0 = 0.996091
recall class 1 = 0.154676
false negative rate = 0.845324
false positive rate = 0.003909
positive prediction rate = 0.027027
AUC of ROC = 0.830928
AUC of PRC = 0.55019
min(+P, Se) = 0.510791

-------------------------------

confusion matrix:
[[899   8]
 [ 95  18]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10390499979257584
difference in average predicted and observed risk = -0.006879000207424157
number samples = 1020
accuracy = 0.89902
precision class 0 = 0.904427
precision class 1 = 0.692308
recall class 0 = 0.99118
recall class 1 = 0.159292
false negative rate = 0.840708
false positive rate = 0.00882
positive prediction rate = 0.02549
AUC of ROC = 0.832239
AUC of PRC = 0.44072
min(+P, Se) = 0.434783

-------------------------------

confusion matrix:
[[248   3]
 [ 28   6]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.11221999675035477
difference in average predicted and observed risk = -0.007078003249645234
number samples = 285
accuracy = 0.891228
precision class 0 = 0.898551
precision class 1 = 0.666667
recall class 0 = 0.988048
recall class 1 = 0.176471
false negative rate = 0.823529
false positive rate = 0.011952
positive prediction rate = 0.031579
AUC of ROC = 0.882704
AUC of PRC = 0.563108
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[71  0]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09795500338077545
difference in average predicted and observed risk = 0.008211003380775447
number samples = 78
accuracy = 0.923077
precision class 0 = 0.922078
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.0
positive prediction rate = 0.012821
AUC of ROC = 0.746479
AUC of PRC = 0.393216
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1579200029373169
difference in average predicted and observed risk = 0.004074002937316884
number samples = 26
accuracy = 0.884615
precision class 0 = 0.913043
precision class 1 = 0.666667
recall class 0 = 0.954545
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.045455
positive prediction rate = 0.115385
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1518   11]
 [ 206   38]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.10657999664545059
difference in average predicted and observed risk = -0.0310400033545494
number samples = 1773
accuracy = 0.877609
precision class 0 = 0.88051
precision class 1 = 0.77551
recall class 0 = 0.992806
recall class 1 = 0.155738
false negative rate = 0.844262
false positive rate = 0.007194
positive prediction rate = 0.027637
AUC of ROC = 0.836301
AUC of PRC = 0.521503
min(+P, Se) = 0.516393

-------------------------------

confusion matrix:
[[1250    7]
 [ 160   32]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.10866300016641617
difference in average predicted and observed risk = -0.023841999833583843
number samples = 1449
accuracy = 0.884748
precision class 0 = 0.886525
precision class 1 = 0.820513
recall class 0 = 0.994431
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.005569
positive prediction rate = 0.026915
AUC of ROC = 0.834858
AUC of PRC = 0.505976
min(+P, Se) = 0.463542

-------------------------------

confusion matrix:
[[1965   13]
 [ 263   48]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.10478299856185913
difference in average predicted and observed risk = -0.031084001438140857
number samples = 2289
accuracy = 0.879423
precision class 0 = 0.881957
precision class 1 = 0.786885
recall class 0 = 0.993428
recall class 1 = 0.154341
false negative rate = 0.845659
false positive rate = 0.006572
positive prediction rate = 0.026649
AUC of ROC = 0.83078
AUC of PRC = 0.507066
min(+P, Se) = 0.487179

-------------------------------

confusion matrix:
[[367   1]
 [ 69  12]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.12258400022983551
difference in average predicted and observed risk = -0.057816999770164496
number samples = 449
accuracy = 0.844098
precision class 0 = 0.841743
precision class 1 = 0.923077
recall class 0 = 0.997283
recall class 1 = 0.148148
false negative rate = 0.851852
false positive rate = 0.002717
positive prediction rate = 0.028953
AUC of ROC = 0.849134
AUC of PRC = 0.617022
min(+P, Se) = 0.567901

-------------------------------

confusion matrix:
[[276   2]
 [ 24   6]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10053899884223938
difference in average predicted and observed risk = 0.0031359988422393764
number samples = 308
accuracy = 0.915584
precision class 0 = 0.92
precision class 1 = 0.75
recall class 0 = 0.992806
recall class 1 = 0.2
false negative rate = 0.8
false positive rate = 0.007194
positive prediction rate = 0.025974
AUC of ROC = 0.86247
AUC of PRC = 0.490026
min(+P, Se) = 0.433333

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.0997219979763031
difference in average predicted and observed risk = 0.027556997976303094
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.8
AUC of PRC = 0.192538
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[72  0]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1378840059041977
difference in average predicted and observed risk = 0.04927600590419769
number samples = 79
accuracy = 0.949367
precision class 0 = 0.947368
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.0
positive prediction rate = 0.037975
AUC of ROC = 0.821429
AUC of PRC = 0.604158
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[2768   18]
 [ 366   70]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.10751699656248093
difference in average predicted and observed risk = -0.02780300343751907
number samples = 3222
accuracy = 0.880819
precision class 0 = 0.883216
precision class 1 = 0.795455
recall class 0 = 0.993539
recall class 1 = 0.16055
false negative rate = 0.83945
false positive rate = 0.006461
positive prediction rate = 0.027312
AUC of ROC = 0.835173
AUC of PRC = 0.513945
min(+P, Se) = 0.488739

-------------------------------

Epoch 00002: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch2.state
Epoch 3/100
 - 824s - loss: 0.3161 - val_loss: 0.2943

==>predicting on train



confusion matrix:
[[6796  240]
 [ 893  419]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.14563800394535065
difference in average predicted and observed risk = -0.01152499605464935
number samples = 8348
accuracy = 0.864279
precision class 0 = 0.88386
precision class 1 = 0.635812
recall class 0 = 0.96589
recall class 1 = 0.31936
false negative rate = 0.68064
false positive rate = 0.03411
positive prediction rate = 0.078941
AUC of ROC = 0.838827
AUC of PRC = 0.536254
min(+P, Se) = 0.509909

-------------------------------

confusion matrix:
[[3852  150]
 [ 272  199]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.1290770024061203
difference in average predicted and observed risk = 0.023779002406120298
number samples = 4473
accuracy = 0.905656
precision class 0 = 0.934045
precision class 1 = 0.570201
recall class 0 = 0.962519
recall class 1 = 0.422505
false negative rate = 0.577495
false positive rate = 0.037481
positive prediction rate = 0.078024
AUC of ROC = 0.86633
AUC of PRC = 0.52839
min(+P, Se) = 0.514831

-------------------------------

confusion matrix:
[[1150   45]
 [  78   65]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.14084500074386597
difference in average predicted and observed risk = 0.03396900074386597
number samples = 1338
accuracy = 0.908072
precision class 0 = 0.936482
precision class 1 = 0.590909
recall class 0 = 0.962343
recall class 1 = 0.454545
false negative rate = 0.545455
false positive rate = 0.037657
positive prediction rate = 0.082212
AUC of ROC = 0.885262
AUC of PRC = 0.561697
min(+P, Se) = 0.541667

-------------------------------

confusion matrix:
[[341   9]
 [ 23  16]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.12380799651145935
difference in average predicted and observed risk = 0.02355099651145935
number samples = 389
accuracy = 0.917738
precision class 0 = 0.936813
precision class 1 = 0.64
recall class 0 = 0.974286
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.025714
positive prediction rate = 0.064267
AUC of ROC = 0.878901
AUC of PRC = 0.520623
min(+P, Se) = 0.564103

-------------------------------

confusion matrix:
[[104   7]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1829800009727478
difference in average predicted and observed risk = 0.017566000972747797
number samples = 133
accuracy = 0.887218
precision class 0 = 0.928571
precision class 1 = 0.666667
recall class 0 = 0.936937
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.063063
positive prediction rate = 0.157895
AUC of ROC = 0.932023
AUC of PRC = 0.759346
min(+P, Se) = 0.730769

-------------------------------

confusion matrix:
[[6746  240]
 [ 684  389]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1359190046787262
difference in average predicted and observed risk = 0.002776004678726185
number samples = 8059
accuracy = 0.885346
precision class 0 = 0.907941
precision class 1 = 0.618442
recall class 0 = 0.965646
recall class 1 = 0.362535
false negative rate = 0.637465
false positive rate = 0.034354
positive prediction rate = 0.078049
AUC of ROC = 0.854304
AUC of PRC = 0.539704
min(+P, Se) = 0.512582

-------------------------------

confusion matrix:
[[5497  211]
 [ 590  324]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.1447789967060089
difference in average predicted and observed risk = 0.006753996706008902
number samples = 6622
accuracy = 0.87904
precision class 0 = 0.903072
precision class 1 = 0.605607
recall class 0 = 0.963034
recall class 1 = 0.354486
false negative rate = 0.645514
false positive rate = 0.036966
positive prediction rate = 0.080791
AUC of ROC = 0.850254
AUC of PRC = 0.527991
min(+P, Se) = 0.512035

-------------------------------

confusion matrix:
[[8745  301]
 [ 921  442]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.13499300181865692
difference in average predicted and observed risk = 0.0040490018186569166
number samples = 10409
accuracy = 0.882602
precision class 0 = 0.904718
precision class 1 = 0.594886
recall class 0 = 0.966726
recall class 1 = 0.324285
false negative rate = 0.675715
false positive rate = 0.033274
positive prediction rate = 0.071381
AUC of ROC = 0.847649
AUC of PRC = 0.512474
min(+P, Se) = 0.493764

-------------------------------

confusion matrix:
[[1569   72]
 [ 227  180]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.16863299906253815
difference in average predicted and observed risk = -0.030097000937461843
number samples = 2048
accuracy = 0.854004
precision class 0 = 0.873608
precision class 1 = 0.714286
recall class 0 = 0.956124
recall class 1 = 0.44226
false negative rate = 0.55774
false positive rate = 0.043876
positive prediction rate = 0.123047
AUC of ROC = 0.857954
AUC of PRC = 0.652921
min(+P, Se) = 0.60688

-------------------------------

confusion matrix:
[[1238   44]
 [  75   51]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.1301019936800003
difference in average predicted and observed risk = 0.040612993680000306
number samples = 1408
accuracy = 0.915483
precision class 0 = 0.942879
precision class 1 = 0.536842
recall class 0 = 0.965679
recall class 1 = 0.404762
false negative rate = 0.595238
false positive rate = 0.034321
positive prediction rate = 0.067472
AUC of ROC = 0.877733
AUC of PRC = 0.445918
min(+P, Se) = 0.507937

-------------------------------

confusion matrix:
[[280  16]
 [ 28  24]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.16523100435733795
difference in average predicted and observed risk = 0.01580600435733795
number samples = 348
accuracy = 0.873563
precision class 0 = 0.909091
precision class 1 = 0.6
recall class 0 = 0.945946
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.054054
positive prediction rate = 0.114943
AUC of ROC = 0.8546
AUC of PRC = 0.572957
min(+P, Se) = 0.538462

-------------------------------

confusion matrix:
[[411  18]
 [ 23  16]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.1344289928674698
difference in average predicted and observed risk = 0.05109599286746978
number samples = 468
accuracy = 0.912393
precision class 0 = 0.947005
precision class 1 = 0.470588
recall class 0 = 0.958042
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.041958
positive prediction rate = 0.07265
AUC of ROC = 0.860917
AUC of PRC = 0.461411
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[12243   451]
 [ 1274   713]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.13991500437259674
difference in average predicted and observed risk = 0.004570004372596748
number samples = 14681
accuracy = 0.882501
precision class 0 = 0.905748
precision class 1 = 0.612543
recall class 0 = 0.964471
recall class 1 = 0.358832
false negative rate = 0.641168
false positive rate = 0.035529
positive prediction rate = 0.079286
AUC of ROC = 0.852311
AUC of PRC = 0.533562
min(+P, Se) = 0.51233

-------------------------------

==>predicting on validation



confusion matrix:
[[1477   58]
 [ 179   99]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.14967800676822662
difference in average predicted and observed risk = -0.0036589932317733775
number samples = 1813
accuracy = 0.869277
precision class 0 = 0.891908
precision class 1 = 0.630573
recall class 0 = 0.962215
recall class 1 = 0.356115
false negative rate = 0.643885
false positive rate = 0.037785
positive prediction rate = 0.086597
AUC of ROC = 0.837548
AUC of PRC = 0.565203
min(+P, Se) = 0.526882

-------------------------------

confusion matrix:
[[867  40]
 [ 76  37]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.13433000445365906
difference in average predicted and observed risk = 0.023546004453659064
number samples = 1020
accuracy = 0.886275
precision class 0 = 0.919406
precision class 1 = 0.480519
recall class 0 = 0.955899
recall class 1 = 0.327434
false negative rate = 0.672566
false positive rate = 0.044101
positive prediction rate = 0.07549
AUC of ROC = 0.839683
AUC of PRC = 0.446448
min(+P, Se) = 0.443478

-------------------------------

confusion matrix:
[[239  12]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.14521899819374084
difference in average predicted and observed risk = 0.025920998193740843
number samples = 285
accuracy = 0.891228
precision class 0 = 0.926357
precision class 1 = 0.555556
recall class 0 = 0.952191
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.047809
positive prediction rate = 0.094737
AUC of ROC = 0.888446
AUC of PRC = 0.575016
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[67  4]
 [ 4  3]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.1310569941997528
difference in average predicted and observed risk = 0.0413129941997528
number samples = 78
accuracy = 0.897436
precision class 0 = 0.943662
precision class 1 = 0.428571
recall class 0 = 0.943662
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.056338
positive prediction rate = 0.089744
AUC of ROC = 0.7666
AUC of PRC = 0.277643
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19085900485515594
difference in average predicted and observed risk = 0.037013004855155934
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.988636
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1468   61]
 [ 157   87]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.14261199533939362
difference in average predicted and observed risk = 0.004991995339393623
number samples = 1773
accuracy = 0.877045
precision class 0 = 0.903385
precision class 1 = 0.587838
recall class 0 = 0.960105
recall class 1 = 0.356557
false negative rate = 0.643443
false positive rate = 0.039895
positive prediction rate = 0.083474
AUC of ROC = 0.845281
AUC of PRC = 0.537304
min(+P, Se) = 0.516393

-------------------------------

confusion matrix:
[[1203   54]
 [ 121   71]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.1463800072669983
difference in average predicted and observed risk = 0.01387500726699828
number samples = 1449
accuracy = 0.879227
precision class 0 = 0.90861
precision class 1 = 0.568
recall class 0 = 0.957041
recall class 1 = 0.369792
false negative rate = 0.630208
false positive rate = 0.042959
positive prediction rate = 0.086266
AUC of ROC = 0.841314
AUC of PRC = 0.517036
min(+P, Se) = 0.479167

-------------------------------

confusion matrix:
[[1896   82]
 [ 199  112]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1415340006351471
difference in average predicted and observed risk = 0.005667000635147107
number samples = 2289
accuracy = 0.877239
precision class 0 = 0.905012
precision class 1 = 0.57732
recall class 0 = 0.958544
recall class 1 = 0.360129
false negative rate = 0.639871
false positive rate = 0.041456
positive prediction rate = 0.084753
AUC of ROC = 0.83791
AUC of PRC = 0.520645
min(+P, Se) = 0.516026

-------------------------------

confusion matrix:
[[356  12]
 [ 53  28]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.16364100575447083
difference in average predicted and observed risk = -0.01675999424552918
number samples = 449
accuracy = 0.855234
precision class 0 = 0.870416
precision class 1 = 0.7
recall class 0 = 0.967391
recall class 1 = 0.345679
false negative rate = 0.654321
false positive rate = 0.032609
positive prediction rate = 0.089087
AUC of ROC = 0.852422
AUC of PRC = 0.595527
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[263  15]
 [ 18  12]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.1338299959897995
difference in average predicted and observed risk = 0.036426995989799496
number samples = 308
accuracy = 0.892857
precision class 0 = 0.935943
precision class 1 = 0.444444
recall class 0 = 0.946043
recall class 1 = 0.4
false negative rate = 0.6
false positive rate = 0.053957
positive prediction rate = 0.087662
AUC of ROC = 0.877818
AUC of PRC = 0.539808
min(+P, Se) = 0.433333

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.12832899391651154
difference in average predicted and observed risk = 0.05616399391651153
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.81746
AUC of PRC = 0.203874
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.17521099746227264
difference in average predicted and observed risk = 0.08660299746227264
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.835317
AUC of PRC = 0.633114
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2671  115]
 [ 278  158]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.1443070024251938
difference in average predicted and observed risk = 0.00898700242519379
number samples = 3222
accuracy = 0.878026
precision class 0 = 0.905731
precision class 1 = 0.578755
recall class 0 = 0.958722
recall class 1 = 0.362385
false negative rate = 0.637615
false positive rate = 0.041278
positive prediction rate = 0.08473
AUC of ROC = 0.843139
AUC of PRC = 0.527516
min(+P, Se) = 0.5

-------------------------------

Epoch 00003: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch3.state
Epoch 4/100
 - 823s - loss: 0.3127 - val_loss: 0.2975

==>predicting on train



confusion matrix:
[[6895  141]
 [ 981  331]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.11289899796247482
difference in average predicted and observed risk = -0.044264002037525174
number samples = 8348
accuracy = 0.865597
precision class 0 = 0.875444
precision class 1 = 0.701271
recall class 0 = 0.97996
recall class 1 = 0.252287
false negative rate = 0.747713
false positive rate = 0.02004
positive prediction rate = 0.05654
AUC of ROC = 0.842876
AUC of PRC = 0.542999
min(+P, Se) = 0.508384

-------------------------------

confusion matrix:
[[3877  125]
 [ 285  186]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10744699835777283
difference in average predicted and observed risk = 0.0021489983577728244
number samples = 4473
accuracy = 0.908339
precision class 0 = 0.931523
precision class 1 = 0.598071
recall class 0 = 0.968766
recall class 1 = 0.394904
false negative rate = 0.605096
false positive rate = 0.031234
positive prediction rate = 0.069528
AUC of ROC = 0.866482
AUC of PRC = 0.537937
min(+P, Se) = 0.498956

-------------------------------

confusion matrix:
[[1165   30]
 [  83   60]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11513499915599823
difference in average predicted and observed risk = 0.008258999155998231
number samples = 1338
accuracy = 0.915546
precision class 0 = 0.933494
precision class 1 = 0.666667
recall class 0 = 0.974895
recall class 1 = 0.41958
false negative rate = 0.58042
false positive rate = 0.025105
positive prediction rate = 0.067265
AUC of ROC = 0.884782
AUC of PRC = 0.592282
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[341   9]
 [ 24  15]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10225500166416168
difference in average predicted and observed risk = 0.0019980016641616832
number samples = 389
accuracy = 0.915167
precision class 0 = 0.934247
precision class 1 = 0.625
recall class 0 = 0.974286
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.025714
positive prediction rate = 0.061697
AUC of ROC = 0.873773
AUC of PRC = 0.510095
min(+P, Se) = 0.564103

-------------------------------

confusion matrix:
[[104   7]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16567100584506989
difference in average predicted and observed risk = 0.0002570058450698798
number samples = 133
accuracy = 0.887218
precision class 0 = 0.928571
precision class 1 = 0.666667
recall class 0 = 0.936937
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.063063
positive prediction rate = 0.157895
AUC of ROC = 0.905815
AUC of PRC = 0.723967
min(+P, Se) = 0.681818

-------------------------------

confusion matrix:
[[6819  167]
 [ 735  338]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.10959400236606598
difference in average predicted and observed risk = -0.023548997633934032
number samples = 8059
accuracy = 0.888075
precision class 0 = 0.902701
precision class 1 = 0.669307
recall class 0 = 0.976095
recall class 1 = 0.315005
false negative rate = 0.684995
false positive rate = 0.023905
positive prediction rate = 0.062663
AUC of ROC = 0.857382
AUC of PRC = 0.546035
min(+P, Se) = 0.504647

-------------------------------

confusion matrix:
[[5563  145]
 [ 646  268]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11412599682807922
difference in average predicted and observed risk = -0.023899003171920785
number samples = 6622
accuracy = 0.88055
precision class 0 = 0.895957
precision class 1 = 0.64891
recall class 0 = 0.974597
recall class 1 = 0.293217
false negative rate = 0.706783
false positive rate = 0.025403
positive prediction rate = 0.062368
AUC of ROC = 0.85
AUC of PRC = 0.53139
min(+P, Se) = 0.506565

-------------------------------

confusion matrix:
[[8847  199]
 [ 986  377]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10634099692106247
difference in average predicted and observed risk = -0.024603003078937535
number samples = 10409
accuracy = 0.886156
precision class 0 = 0.899725
precision class 1 = 0.654514
recall class 0 = 0.978001
recall class 1 = 0.276596
false negative rate = 0.723404
false positive rate = 0.021999
positive prediction rate = 0.055337
AUC of ROC = 0.849629
AUC of PRC = 0.516601
min(+P, Se) = 0.485549

-------------------------------

confusion matrix:
[[1589   52]
 [ 259  148]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14139999449253082
difference in average predicted and observed risk = -0.05733000550746917
number samples = 2048
accuracy = 0.848145
precision class 0 = 0.859848
precision class 1 = 0.74
recall class 0 = 0.968312
recall class 1 = 0.363636
false negative rate = 0.636364
false positive rate = 0.031688
positive prediction rate = 0.097656
AUC of ROC = 0.858382
AUC of PRC = 0.647446
min(+P, Se) = 0.597122

-------------------------------

confusion matrix:
[[1248   34]
 [  80   46]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10299400240182877
difference in average predicted and observed risk = 0.013505002401828767
number samples = 1408
accuracy = 0.919034
precision class 0 = 0.939759
precision class 1 = 0.575
recall class 0 = 0.973479
recall class 1 = 0.365079
false negative rate = 0.634921
false positive rate = 0.026521
positive prediction rate = 0.056818
AUC of ROC = 0.87504
AUC of PRC = 0.46968
min(+P, Se) = 0.460938

-------------------------------

confusion matrix:
[[285  11]
 [ 30  22]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.13691100478172302
difference in average predicted and observed risk = -0.01251399521827698
number samples = 348
accuracy = 0.882184
precision class 0 = 0.904762
precision class 1 = 0.666667
recall class 0 = 0.962838
recall class 1 = 0.423077
false negative rate = 0.576923
false positive rate = 0.037162
positive prediction rate = 0.094828
AUC of ROC = 0.867269
AUC of PRC = 0.602765
min(+P, Se) = 0.557692

-------------------------------

confusion matrix:
[[413  16]
 [ 26  13]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10642100125551224
difference in average predicted and observed risk = 0.023088001255512233
number samples = 468
accuracy = 0.910256
precision class 0 = 0.940775
precision class 1 = 0.448276
recall class 0 = 0.962704
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.037296
positive prediction rate = 0.061966
AUC of ROC = 0.861156
AUC of PRC = 0.457367
min(+P, Se) = 0.458333

-------------------------------

confusion matrix:
[[12382   312]
 [ 1381   606]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11163800209760666
difference in average predicted and observed risk = -0.023706997902393334
number samples = 14681
accuracy = 0.884681
precision class 0 = 0.899659
precision class 1 = 0.660131
recall class 0 = 0.975421
recall class 1 = 0.304982
false negative rate = 0.695018
false positive rate = 0.024579
positive prediction rate = 0.06253
AUC of ROC = 0.853947
AUC of PRC = 0.538937
min(+P, Se) = 0.504024

-------------------------------

==>predicting on validation



confusion matrix:
[[1496   39]
 [ 193   85]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.11857099831104279
difference in average predicted and observed risk = -0.034766001688957215
number samples = 1813
accuracy = 0.872035
precision class 0 = 0.885731
precision class 1 = 0.685484
recall class 0 = 0.974593
recall class 1 = 0.305755
false negative rate = 0.694245
false positive rate = 0.025407
positive prediction rate = 0.068395
AUC of ROC = 0.836754
AUC of PRC = 0.562342
min(+P, Se) = 0.521277

-------------------------------

confusion matrix:
[[874  33]
 [ 77  36]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11082100123167038
difference in average predicted and observed risk = 3.700123167038605e-05
number samples = 1020
accuracy = 0.892157
precision class 0 = 0.919033
precision class 1 = 0.521739
recall class 0 = 0.963616
recall class 1 = 0.318584
false negative rate = 0.681416
false positive rate = 0.036384
positive prediction rate = 0.067647
AUC of ROC = 0.84265
AUC of PRC = 0.455024
min(+P, Se) = 0.443478

-------------------------------

confusion matrix:
[[239  12]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1244869977235794
difference in average predicted and observed risk = 0.0051889977235794055
number samples = 285
accuracy = 0.891228
precision class 0 = 0.926357
precision class 1 = 0.555556
recall class 0 = 0.952191
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.047809
positive prediction rate = 0.094737
AUC of ROC = 0.878955
AUC of PRC = 0.570699
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[69  2]
 [ 4  3]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09856799989938736
difference in average predicted and observed risk = 0.008823999899387355
number samples = 78
accuracy = 0.923077
precision class 0 = 0.945205
precision class 1 = 0.6
recall class 0 = 0.971831
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.028169
positive prediction rate = 0.064103
AUC of ROC = 0.760563
AUC of PRC = 0.272561
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17369399964809418
difference in average predicted and observed risk = 0.019847999648094167
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1481   48]
 [ 158   86]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1168069988489151
difference in average predicted and observed risk = -0.020813001151084892
number samples = 1773
accuracy = 0.883813
precision class 0 = 0.9036
precision class 1 = 0.641791
recall class 0 = 0.968607
recall class 1 = 0.352459
false negative rate = 0.647541
false positive rate = 0.031393
positive prediction rate = 0.075578
AUC of ROC = 0.845782
AUC of PRC = 0.545484
min(+P, Se) = 0.526531

-------------------------------

confusion matrix:
[[1218   39]
 [ 135   57]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11635000258684158
difference in average predicted and observed risk = -0.01615499741315843
number samples = 1449
accuracy = 0.879917
precision class 0 = 0.900222
precision class 1 = 0.59375
recall class 0 = 0.968974
recall class 1 = 0.296875
false negative rate = 0.703125
false positive rate = 0.031026
positive prediction rate = 0.066253
AUC of ROC = 0.839735
AUC of PRC = 0.508591
min(+P, Se) = 0.478873

-------------------------------

confusion matrix:
[[1916   62]
 [ 212   99]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11377599835395813
difference in average predicted and observed risk = -0.022091001646041858
number samples = 2289
accuracy = 0.880297
precision class 0 = 0.900376
precision class 1 = 0.614907
recall class 0 = 0.968655
recall class 1 = 0.318328
false negative rate = 0.681672
false positive rate = 0.031345
positive prediction rate = 0.070336
AUC of ROC = 0.83792
AUC of PRC = 0.52177
min(+P, Se) = 0.501608

-------------------------------

confusion matrix:
[[358  10]
 [ 52  29]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1370140016078949
difference in average predicted and observed risk = -0.04338699839210511
number samples = 449
accuracy = 0.861915
precision class 0 = 0.873171
precision class 1 = 0.74359
recall class 0 = 0.972826
recall class 1 = 0.358025
false negative rate = 0.641975
false positive rate = 0.027174
positive prediction rate = 0.08686
AUC of ROC = 0.856448
AUC of PRC = 0.625541
min(+P, Se) = 0.565217

-------------------------------

confusion matrix:
[[268  10]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10529699921607971
difference in average predicted and observed risk = 0.007893999216079708
number samples = 308
accuracy = 0.902597
precision class 0 = 0.930556
precision class 1 = 0.5
recall class 0 = 0.964029
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.035971
positive prediction rate = 0.064935
AUC of ROC = 0.870983
AUC of PRC = 0.505225
min(+P, Se) = 0.466667

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10483299940824509
difference in average predicted and observed risk = 0.03266799940824508
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.787302
AUC of PRC = 0.168282
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[70  2]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1409820020198822
difference in average predicted and observed risk = 0.052374002019882196
number samples = 79
accuracy = 0.924051
precision class 0 = 0.945946
precision class 1 = 0.6
recall class 0 = 0.972222
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.027778
positive prediction rate = 0.063291
AUC of ROC = 0.829365
AUC of PRC = 0.596953
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[2699   87]
 [ 293  143]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11660200357437134
difference in average predicted and observed risk = -0.018717996425628658
number samples = 3222
accuracy = 0.882061
precision class 0 = 0.902072
precision class 1 = 0.621739
recall class 0 = 0.968772
recall class 1 = 0.327982
false negative rate = 0.672018
false positive rate = 0.031228
positive prediction rate = 0.071384
AUC of ROC = 0.842698
AUC of PRC = 0.528115
min(+P, Se) = 0.502294

-------------------------------

Epoch 00004: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch4.state
Epoch 5/100
 - 821s - loss: 0.3080 - val_loss: 0.2930

==>predicting on train



confusion matrix:
[[6965   71]
 [1069  243]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.11280100047588348
difference in average predicted and observed risk = -0.04436199952411651
number samples = 8348
accuracy = 0.86344
precision class 0 = 0.86694
precision class 1 = 0.773885
recall class 0 = 0.989909
recall class 1 = 0.185213
false negative rate = 0.814787
false positive rate = 0.010091
positive prediction rate = 0.037614
AUC of ROC = 0.843497
AUC of PRC = 0.549656
min(+P, Se) = 0.506061

-------------------------------

confusion matrix:
[[3937   65]
 [ 326  145]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10587599873542786
difference in average predicted and observed risk = 0.0005779987354278537
number samples = 4473
accuracy = 0.912587
precision class 0 = 0.923528
precision class 1 = 0.690476
recall class 0 = 0.983758
recall class 1 = 0.307856
false negative rate = 0.692144
false positive rate = 0.016242
positive prediction rate = 0.046948
AUC of ROC = 0.871796
AUC of PRC = 0.552399
min(+P, Se) = 0.526539

-------------------------------

confusion matrix:
[[1178   17]
 [ 100   43]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.1123260036110878
difference in average predicted and observed risk = 0.0054500036110878
number samples = 1338
accuracy = 0.912556
precision class 0 = 0.921753
precision class 1 = 0.716667
recall class 0 = 0.985774
recall class 1 = 0.300699
false negative rate = 0.699301
false positive rate = 0.014226
positive prediction rate = 0.044843
AUC of ROC = 0.886339
AUC of PRC = 0.600906
min(+P, Se) = 0.576389

-------------------------------

confusion matrix:
[[344   6]
 [ 28  11]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10214799642562866
difference in average predicted and observed risk = 0.0018909964256286632
number samples = 389
accuracy = 0.912596
precision class 0 = 0.924731
precision class 1 = 0.647059
recall class 0 = 0.982857
recall class 1 = 0.282051
false negative rate = 0.717949
false positive rate = 0.017143
positive prediction rate = 0.043702
AUC of ROC = 0.880366
AUC of PRC = 0.539403
min(+P, Se) = 0.575

-------------------------------

confusion matrix:
[[108   3]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1599999964237213
difference in average predicted and observed risk = -0.005414003576278692
number samples = 133
accuracy = 0.909774
precision class 0 = 0.923077
precision class 1 = 0.8125
recall class 0 = 0.972973
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.027027
positive prediction rate = 0.120301
AUC of ROC = 0.920966
AUC of PRC = 0.723916
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[6899   87]
 [ 823  250]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.10804899781942368
difference in average predicted and observed risk = -0.025094002180576336
number samples = 8059
accuracy = 0.887083
precision class 0 = 0.893421
precision class 1 = 0.74184
recall class 0 = 0.987547
recall class 1 = 0.232992
false negative rate = 0.767008
false positive rate = 0.012453
positive prediction rate = 0.041817
AUC of ROC = 0.85855
AUC of PRC = 0.55618
min(+P, Se) = 0.522305

-------------------------------

confusion matrix:
[[5633   75]
 [ 709  205]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11413399875164032
difference in average predicted and observed risk = -0.02389100124835969
number samples = 6622
accuracy = 0.881607
precision class 0 = 0.888206
precision class 1 = 0.732143
recall class 0 = 0.986861
recall class 1 = 0.224289
false negative rate = 0.775711
false positive rate = 0.013139
positive prediction rate = 0.042283
AUC of ROC = 0.85458
AUC of PRC = 0.541414
min(+P, Se) = 0.507659

-------------------------------

confusion matrix:
[[8944  102]
 [1079  284]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.105833999812603
difference in average predicted and observed risk = -0.025110000187397008
number samples = 10409
accuracy = 0.88654
precision class 0 = 0.892348
precision class 1 = 0.735751
recall class 0 = 0.988724
recall class 1 = 0.208364
false negative rate = 0.791636
false positive rate = 0.011276
positive prediction rate = 0.037083
AUC of ROC = 0.852407
AUC of PRC = 0.527488
min(+P, Se) = 0.49011

-------------------------------

confusion matrix:
[[1616   25]
 [ 292  115]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.13836699724197388
difference in average predicted and observed risk = -0.06036300275802611
number samples = 2048
accuracy = 0.845215
precision class 0 = 0.84696
precision class 1 = 0.821429
recall class 0 = 0.984765
recall class 1 = 0.282555
false negative rate = 0.717445
false positive rate = 0.015235
positive prediction rate = 0.068359
AUC of ROC = 0.862814
AUC of PRC = 0.658437
min(+P, Se) = 0.619165

-------------------------------

confusion matrix:
[[1262   20]
 [  94   32]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10368199646472931
difference in average predicted and observed risk = 0.01419299646472931
number samples = 1408
accuracy = 0.919034
precision class 0 = 0.930678
precision class 1 = 0.615385
recall class 0 = 0.984399
recall class 1 = 0.253968
false negative rate = 0.746032
false positive rate = 0.015601
positive prediction rate = 0.036932
AUC of ROC = 0.877597
AUC of PRC = 0.479091
min(+P, Se) = 0.515873

-------------------------------

confusion matrix:
[[290   6]
 [ 37  15]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.13255099952220917
difference in average predicted and observed risk = -0.016874000477790835
number samples = 348
accuracy = 0.876437
precision class 0 = 0.88685
precision class 1 = 0.714286
recall class 0 = 0.97973
recall class 1 = 0.288462
false negative rate = 0.711538
false positive rate = 0.02027
positive prediction rate = 0.060345
AUC of ROC = 0.861292
AUC of PRC = 0.605035
min(+P, Se) = 0.576923

-------------------------------

confusion matrix:
[[420   9]
 [ 30   9]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10565199702978134
difference in average predicted and observed risk = 0.022318997029781337
number samples = 468
accuracy = 0.916667
precision class 0 = 0.933333
precision class 1 = 0.5
recall class 0 = 0.979021
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.020979
positive prediction rate = 0.038462
AUC of ROC = 0.848246
AUC of PRC = 0.461008
min(+P, Se) = 0.478261

-------------------------------

confusion matrix:
[[12532   162]
 [ 1532   455]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11079300194978714
difference in average predicted and observed risk = -0.024551998050212853
number samples = 14681
accuracy = 0.884613
precision class 0 = 0.891069
precision class 1 = 0.737439
recall class 0 = 0.987238
recall class 1 = 0.228988
false negative rate = 0.771012
false positive rate = 0.012762
positive prediction rate = 0.042027
AUC of ROC = 0.856596
AUC of PRC = 0.549375
min(+P, Se) = 0.515045

-------------------------------

==>predicting on validation



confusion matrix:
[[1517   18]
 [ 214   64]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1183369979262352
difference in average predicted and observed risk = -0.0350000020737648
number samples = 1813
accuracy = 0.872035
precision class 0 = 0.876372
precision class 1 = 0.780488
recall class 0 = 0.988274
recall class 1 = 0.230216
false negative rate = 0.769784
false positive rate = 0.011726
positive prediction rate = 0.045229
AUC of ROC = 0.84238
AUC of PRC = 0.571598
min(+P, Se) = 0.52518

-------------------------------

confusion matrix:
[[890  17]
 [ 86  27]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10786200314760208
difference in average predicted and observed risk = -0.0029219968523979123
number samples = 1020
accuracy = 0.89902
precision class 0 = 0.911885
precision class 1 = 0.613636
recall class 0 = 0.981257
recall class 1 = 0.238938
false negative rate = 0.761062
false positive rate = 0.018743
positive prediction rate = 0.043137
AUC of ROC = 0.837352
AUC of PRC = 0.45406
min(+P, Se) = 0.447368

-------------------------------

confusion matrix:
[[245   6]
 [ 23  11]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12310600280761719
difference in average predicted and observed risk = 0.0038080028076171862
number samples = 285
accuracy = 0.898246
precision class 0 = 0.914179
precision class 1 = 0.647059
recall class 0 = 0.976096
recall class 1 = 0.323529
false negative rate = 0.676471
false positive rate = 0.023904
positive prediction rate = 0.059649
AUC of ROC = 0.89161
AUC of PRC = 0.551814
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[70  1]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09879600256681442
difference in average predicted and observed risk = 0.009052002566814418
number samples = 78
accuracy = 0.910256
precision class 0 = 0.921053
precision class 1 = 0.5
recall class 0 = 0.985915
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.014085
positive prediction rate = 0.025641
AUC of ROC = 0.7666
AUC of PRC = 0.400603
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18059800565242767
difference in average predicted and observed risk = 0.026752005652427663
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1505   24]
 [ 184   60]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11449199914932251
difference in average predicted and observed risk = -0.023128000850677483
number samples = 1773
accuracy = 0.882685
precision class 0 = 0.89106
precision class 1 = 0.714286
recall class 0 = 0.984303
recall class 1 = 0.245902
false negative rate = 0.754098
false positive rate = 0.015697
positive prediction rate = 0.047377
AUC of ROC = 0.847642
AUC of PRC = 0.53758
min(+P, Se) = 0.512295

-------------------------------

confusion matrix:
[[1238   19]
 [ 146   46]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11667100340127945
difference in average predicted and observed risk = -0.015833996598720562
number samples = 1449
accuracy = 0.886128
precision class 0 = 0.894509
precision class 1 = 0.707692
recall class 0 = 0.984885
recall class 1 = 0.239583
false negative rate = 0.760417
false positive rate = 0.015115
positive prediction rate = 0.044859
AUC of ROC = 0.843427
AUC of PRC = 0.53157
min(+P, Se) = 0.494792

-------------------------------

confusion matrix:
[[1949   29]
 [ 241   70]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1131419986486435
difference in average predicted and observed risk = -0.022725001351356494
number samples = 2289
accuracy = 0.882045
precision class 0 = 0.889954
precision class 1 = 0.707071
recall class 0 = 0.985339
recall class 1 = 0.22508
false negative rate = 0.77492
false positive rate = 0.014661
positive prediction rate = 0.04325
AUC of ROC = 0.841026
AUC of PRC = 0.526802
min(+P, Se) = 0.514469

-------------------------------

confusion matrix:
[[363   5]
 [ 60  21]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13135400414466858
difference in average predicted and observed risk = -0.04904699585533143
number samples = 449
accuracy = 0.855234
precision class 0 = 0.858156
precision class 1 = 0.807692
recall class 0 = 0.986413
recall class 1 = 0.259259
false negative rate = 0.740741
false positive rate = 0.013587
positive prediction rate = 0.057906
AUC of ROC = 0.861514
AUC of PRC = 0.620193
min(+P, Se) = 0.567901

-------------------------------

confusion matrix:
[[273   5]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10795599967241287
difference in average predicted and observed risk = 0.010552999672412869
number samples = 308
accuracy = 0.922078
precision class 0 = 0.934932
precision class 1 = 0.6875
recall class 0 = 0.982014
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.017986
positive prediction rate = 0.051948
AUC of ROC = 0.866547
AUC of PRC = 0.535621
min(+P, Se) = 0.433333

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10254699736833572
difference in average predicted and observed risk = 0.030381997368335717
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.796825
AUC of PRC = 0.295683
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.13788700103759766
difference in average predicted and observed risk = 0.04927900103759765
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.835317
AUC of PRC = 0.614793
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[2743   43]
 [ 330  106]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11547199636697769
difference in average predicted and observed risk = -0.019848003633022304
number samples = 3222
accuracy = 0.884233
precision class 0 = 0.892613
precision class 1 = 0.711409
recall class 0 = 0.984566
recall class 1 = 0.243119
false negative rate = 0.756881
false positive rate = 0.015434
positive prediction rate = 0.046245
AUC of ROC = 0.845575
AUC of PRC = 0.534621
min(+P, Se) = 0.503432

-------------------------------

Epoch 00005: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch5.state
Epoch 6/100
 - 825s - loss: 0.3052 - val_loss: 0.2869

==>predicting on train



confusion matrix:
[[6916  120]
 [ 963  349]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.1350879967212677
difference in average predicted and observed risk = -0.022075003278732297
number samples = 8348
accuracy = 0.870268
precision class 0 = 0.877776
precision class 1 = 0.744136
recall class 0 = 0.982945
recall class 1 = 0.266006
false negative rate = 0.733994
false positive rate = 0.017055
positive prediction rate = 0.056181
AUC of ROC = 0.850388
AUC of PRC = 0.564865
min(+P, Se) = 0.520579

-------------------------------

confusion matrix:
[[3912   90]
 [ 292  179]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.12336599826812744
difference in average predicted and observed risk = 0.01806799826812744
number samples = 4473
accuracy = 0.914599
precision class 0 = 0.930542
precision class 1 = 0.665428
recall class 0 = 0.977511
recall class 1 = 0.380042
false negative rate = 0.619958
false positive rate = 0.022489
positive prediction rate = 0.060139
AUC of ROC = 0.879269
AUC of PRC = 0.569672
min(+P, Se) = 0.530786

-------------------------------

confusion matrix:
[[1171   24]
 [  84   59]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.13289600610733032
difference in average predicted and observed risk = 0.026020006107330323
number samples = 1338
accuracy = 0.919282
precision class 0 = 0.933068
precision class 1 = 0.710843
recall class 0 = 0.979916
recall class 1 = 0.412587
false negative rate = 0.587413
false positive rate = 0.020084
positive prediction rate = 0.062033
AUC of ROC = 0.890915
AUC of PRC = 0.61681
min(+P, Se) = 0.58042

-------------------------------

confusion matrix:
[[344   6]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.12069500237703323
difference in average predicted and observed risk = 0.020438002377033235
number samples = 389
accuracy = 0.928021
precision class 0 = 0.939891
precision class 1 = 0.73913
recall class 0 = 0.982857
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.017143
positive prediction rate = 0.059126
AUC of ROC = 0.880952
AUC of PRC = 0.560349
min(+P, Se) = 0.609756

-------------------------------

confusion matrix:
[[108   3]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.18287000060081482
difference in average predicted and observed risk = 0.017456000600814814
number samples = 133
accuracy = 0.917293
precision class 0 = 0.931035
precision class 1 = 0.823529
recall class 0 = 0.972973
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.027027
positive prediction rate = 0.12782
AUC of ROC = 0.946355
AUC of PRC = 0.792458
min(+P, Se) = 0.727273

-------------------------------

confusion matrix:
[[6864  122]
 [ 731  342]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1282850056886673
difference in average predicted and observed risk = -0.004857994311332714
number samples = 8059
accuracy = 0.894156
precision class 0 = 0.903752
precision class 1 = 0.737069
recall class 0 = 0.982536
recall class 1 = 0.318733
false negative rate = 0.681267
false positive rate = 0.017463
positive prediction rate = 0.057575
AUC of ROC = 0.866688
AUC of PRC = 0.577698
min(+P, Se) = 0.53352

-------------------------------

confusion matrix:
[[5587  121]
 [ 638  276]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.13512100279331207
difference in average predicted and observed risk = -0.002903997206687936
number samples = 6622
accuracy = 0.885382
precision class 0 = 0.89751
precision class 1 = 0.695214
recall class 0 = 0.978802
recall class 1 = 0.301969
false negative rate = 0.698031
false positive rate = 0.021198
positive prediction rate = 0.059952
AUC of ROC = 0.859819
AUC of PRC = 0.554159
min(+P, Se) = 0.515317

-------------------------------

confusion matrix:
[[8890  156]
 [ 986  377]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.126132994890213
difference in average predicted and observed risk = -0.004811005109786992
number samples = 10409
accuracy = 0.890287
precision class 0 = 0.900162
precision class 1 = 0.707317
recall class 0 = 0.982755
recall class 1 = 0.276596
false negative rate = 0.723404
false positive rate = 0.017245
positive prediction rate = 0.051206
AUC of ROC = 0.860931
AUC of PRC = 0.548542
min(+P, Se) = 0.505132

-------------------------------

confusion matrix:
[[1601   40]
 [ 252  155]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.16021700203418732
difference in average predicted and observed risk = -0.03851299796581267
number samples = 2048
accuracy = 0.857422
precision class 0 = 0.864004
precision class 1 = 0.794872
recall class 0 = 0.975625
recall class 1 = 0.380835
false negative rate = 0.619165
false positive rate = 0.024375
positive prediction rate = 0.095215
AUC of ROC = 0.867299
AUC of PRC = 0.668482
min(+P, Se) = 0.614251

-------------------------------

confusion matrix:
[[1255   27]
 [  78   48]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.12325499951839447
difference in average predicted and observed risk = 0.03376599951839447
number samples = 1408
accuracy = 0.925426
precision class 0 = 0.941485
precision class 1 = 0.64
recall class 0 = 0.978939
recall class 1 = 0.380952
false negative rate = 0.619048
false positive rate = 0.021061
positive prediction rate = 0.053267
AUC of ROC = 0.881163
AUC of PRC = 0.482463
min(+P, Se) = 0.511811

-------------------------------

confusion matrix:
[[287   9]
 [ 29  23]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.15585899353027344
difference in average predicted and observed risk = 0.006433993530273435
number samples = 348
accuracy = 0.890805
precision class 0 = 0.908228
precision class 1 = 0.71875
recall class 0 = 0.969595
recall class 1 = 0.442308
false negative rate = 0.557692
false positive rate = 0.030405
positive prediction rate = 0.091954
AUC of ROC = 0.868048
AUC of PRC = 0.617601
min(+P, Se) = 0.566038

-------------------------------

confusion matrix:
[[418  11]
 [ 24  15]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.1277810037136078
difference in average predicted and observed risk = 0.044448003713607784
number samples = 468
accuracy = 0.925214
precision class 0 = 0.945701
precision class 1 = 0.576923
recall class 0 = 0.974359
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.025641
positive prediction rate = 0.055556
AUC of ROC = 0.855836
AUC of PRC = 0.495163
min(+P, Se) = 0.487179

-------------------------------

confusion matrix:
[[12451   243]
 [ 1369   618]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.1313689947128296
difference in average predicted and observed risk = -0.003976005287170403
number samples = 14681
accuracy = 0.890198
precision class 0 = 0.900941
precision class 1 = 0.71777
recall class 0 = 0.980857
recall class 1 = 0.311022
false negative rate = 0.688978
false positive rate = 0.019143
positive prediction rate = 0.058647
AUC of ROC = 0.863556
AUC of PRC = 0.566862
min(+P, Se) = 0.524648

-------------------------------

==>predicting on validation



confusion matrix:
[[1501   34]
 [ 193   85]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1407960057258606
difference in average predicted and observed risk = -0.012540994274139405
number samples = 1813
accuracy = 0.874793
precision class 0 = 0.886068
precision class 1 = 0.714286
recall class 0 = 0.97785
recall class 1 = 0.305755
false negative rate = 0.694245
false positive rate = 0.02215
positive prediction rate = 0.065637
AUC of ROC = 0.847259
AUC of PRC = 0.581016
min(+P, Se) = 0.528777

-------------------------------

confusion matrix:
[[879  28]
 [ 85  28]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.12551599740982056
difference in average predicted and observed risk = 0.014731997409820563
number samples = 1020
accuracy = 0.889216
precision class 0 = 0.911826
precision class 1 = 0.5
recall class 0 = 0.969129
recall class 1 = 0.247788
false negative rate = 0.752212
false positive rate = 0.030871
positive prediction rate = 0.054902
AUC of ROC = 0.844933
AUC of PRC = 0.464985
min(+P, Se) = 0.474576

-------------------------------

confusion matrix:
[[243   8]
 [ 22  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.14113600552082062
difference in average predicted and observed risk = 0.021838005520820616
number samples = 285
accuracy = 0.894737
precision class 0 = 0.916981
precision class 1 = 0.6
recall class 0 = 0.968127
recall class 1 = 0.352941
false negative rate = 0.647059
false positive rate = 0.031873
positive prediction rate = 0.070175
AUC of ROC = 0.886571
AUC of PRC = 0.578301
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[71  0]
 [ 5  2]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.1127379983663559
difference in average predicted and observed risk = 0.02299399836635589
number samples = 78
accuracy = 0.935897
precision class 0 = 0.934211
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.0
positive prediction rate = 0.025641
AUC of ROC = 0.750503
AUC of PRC = 0.457622
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19483600556850433
difference in average predicted and observed risk = 0.04099000556850432
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1490   39]
 [ 170   74]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.13494600355625153
difference in average predicted and observed risk = -0.0026739964437484665
number samples = 1773
accuracy = 0.882121
precision class 0 = 0.89759
precision class 1 = 0.654867
recall class 0 = 0.974493
recall class 1 = 0.303279
false negative rate = 0.696721
false positive rate = 0.025507
positive prediction rate = 0.063734
AUC of ROC = 0.852194
AUC of PRC = 0.552666
min(+P, Se) = 0.528689

-------------------------------

confusion matrix:
[[1225   32]
 [ 135   57]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.13672499358654022
difference in average predicted and observed risk = 0.0042199935865402105
number samples = 1449
accuracy = 0.884748
precision class 0 = 0.900735
precision class 1 = 0.640449
recall class 0 = 0.974543
recall class 1 = 0.296875
false negative rate = 0.703125
false positive rate = 0.025457
positive prediction rate = 0.061422
AUC of ROC = 0.848308
AUC of PRC = 0.539067
min(+P, Se) = 0.505208

-------------------------------

confusion matrix:
[[1930   48]
 [ 219   92]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.13304400444030762
difference in average predicted and observed risk = -0.0028229955596923706
number samples = 2289
accuracy = 0.883355
precision class 0 = 0.898092
precision class 1 = 0.657143
recall class 0 = 0.975733
recall class 1 = 0.29582
false negative rate = 0.70418
false positive rate = 0.024267
positive prediction rate = 0.061162
AUC of ROC = 0.846758
AUC of PRC = 0.535124
min(+P, Se) = 0.524116

-------------------------------

confusion matrix:
[[358  10]
 [ 57  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.15366800129413605
difference in average predicted and observed risk = -0.02673299870586396
number samples = 449
accuracy = 0.85078
precision class 0 = 0.862651
precision class 1 = 0.705882
recall class 0 = 0.972826
recall class 1 = 0.296296
false negative rate = 0.703704
false positive rate = 0.027174
positive prediction rate = 0.075724
AUC of ROC = 0.86148
AUC of PRC = 0.634078
min(+P, Se) = 0.569767

-------------------------------

confusion matrix:
[[271   7]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.12814000248908997
difference in average predicted and observed risk = 0.030737002489089962
number samples = 308
accuracy = 0.915584
precision class 0 = 0.934483
precision class 1 = 0.611111
recall class 0 = 0.97482
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.02518
positive prediction rate = 0.058442
AUC of ROC = 0.878058
AUC of PRC = 0.565095
min(+P, Se) = 0.451613

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11896699666976929
difference in average predicted and observed risk = 0.04680199666976928
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.803175
AUC of PRC = 0.3012
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[69  3]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.16244100034236908
difference in average predicted and observed risk = 0.07383300034236907
number samples = 79
accuracy = 0.911392
precision class 0 = 0.945205
precision class 1 = 0.5
recall class 0 = 0.958333
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.041667
positive prediction rate = 0.075949
AUC of ROC = 0.843254
AUC of PRC = 0.609879
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[2715   71]
 [ 305  131]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.13574600219726562
difference in average predicted and observed risk = 0.00042600219726562916
number samples = 3222
accuracy = 0.883302
precision class 0 = 0.899007
precision class 1 = 0.648515
recall class 0 = 0.974515
recall class 1 = 0.300459
false negative rate = 0.699541
false positive rate = 0.025485
positive prediction rate = 0.062694
AUC of ROC = 0.850373
AUC of PRC = 0.546162
min(+P, Se) = 0.520642

-------------------------------

Epoch 00006: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch6.state
Epoch 7/100
 - 826s - loss: 0.3028 - val_loss: 0.2976

==>predicting on train



confusion matrix:
[[6969   67]
 [1084  228]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.09546899795532227
difference in average predicted and observed risk = -0.06169400204467773
number samples = 8348
accuracy = 0.862123
precision class 0 = 0.865392
precision class 1 = 0.772881
recall class 0 = 0.990478
recall class 1 = 0.17378
false negative rate = 0.826219
false positive rate = 0.009522
positive prediction rate = 0.035338
AUC of ROC = 0.851723
AUC of PRC = 0.558844
min(+P, Se) = 0.523628

-------------------------------

confusion matrix:
[[3956   46]
 [ 342  129]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.08700600266456604
difference in average predicted and observed risk = -0.018291997335433963
number samples = 4473
accuracy = 0.913257
precision class 0 = 0.920428
precision class 1 = 0.737143
recall class 0 = 0.988506
recall class 1 = 0.273885
false negative rate = 0.726115
false positive rate = 0.011494
positive prediction rate = 0.039124
AUC of ROC = 0.881626
AUC of PRC = 0.558442
min(+P, Se) = 0.539278

-------------------------------

confusion matrix:
[[1179   16]
 [ 102   41]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.09475500136613846
difference in average predicted and observed risk = -0.01212099863386154
number samples = 1338
accuracy = 0.911809
precision class 0 = 0.920375
precision class 1 = 0.719298
recall class 0 = 0.986611
recall class 1 = 0.286713
false negative rate = 0.713287
false positive rate = 0.013389
positive prediction rate = 0.042601
AUC of ROC = 0.887954
AUC of PRC = 0.597227
min(+P, Se) = 0.573427

-------------------------------

confusion matrix:
[[347   3]
 [ 29  10]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.08401399850845337
difference in average predicted and observed risk = -0.01624300149154663
number samples = 389
accuracy = 0.917738
precision class 0 = 0.922872
precision class 1 = 0.769231
recall class 0 = 0.991429
recall class 1 = 0.25641
false negative rate = 0.74359
false positive rate = 0.008571
positive prediction rate = 0.033419
AUC of ROC = 0.880073
AUC of PRC = 0.547108
min(+P, Se) = 0.565217

-------------------------------

confusion matrix:
[[109   2]
 [ 10  12]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.13809500634670258
difference in average predicted and observed risk = -0.02731899365329743
number samples = 133
accuracy = 0.909774
precision class 0 = 0.915966
precision class 1 = 0.857143
recall class 0 = 0.981982
recall class 1 = 0.545455
false negative rate = 0.454545
false positive rate = 0.018018
positive prediction rate = 0.105263
AUC of ROC = 0.941851
AUC of PRC = 0.797661
min(+P, Se) = 0.655172

-------------------------------

confusion matrix:
[[6923   63]
 [ 855  218]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.08997400104999542
difference in average predicted and observed risk = -0.04316899895000459
number samples = 8059
accuracy = 0.88609
precision class 0 = 0.890075
precision class 1 = 0.775801
recall class 0 = 0.990982
recall class 1 = 0.203169
false negative rate = 0.796831
false positive rate = 0.009018
positive prediction rate = 0.034868
AUC of ROC = 0.868229
AUC of PRC = 0.565964
min(+P, Se) = 0.529795

-------------------------------

confusion matrix:
[[5637   71]
 [ 712  202]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.09647899866104126
difference in average predicted and observed risk = -0.04154600133895875
number samples = 6622
accuracy = 0.881758
precision class 0 = 0.887856
precision class 1 = 0.739927
recall class 0 = 0.987561
recall class 1 = 0.221007
false negative rate = 0.778993
false positive rate = 0.012439
positive prediction rate = 0.041226
AUC of ROC = 0.861111
AUC of PRC = 0.550497
min(+P, Se) = 0.519565

-------------------------------

confusion matrix:
[[8963   83]
 [1098  265]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.08837299793958664
difference in average predicted and observed risk = -0.042571002060413365
number samples = 10409
accuracy = 0.88654
precision class 0 = 0.890866
precision class 1 = 0.761494
recall class 0 = 0.990825
recall class 1 = 0.194424
false negative rate = 0.805576
false positive rate = 0.009175
positive prediction rate = 0.033433
AUC of ROC = 0.862161
AUC of PRC = 0.541002
min(+P, Se) = 0.508065

-------------------------------

confusion matrix:
[[1620   21]
 [ 309   98]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.11670699715614319
difference in average predicted and observed risk = -0.0820230028438568
number samples = 2048
accuracy = 0.838867
precision class 0 = 0.839813
precision class 1 = 0.823529
recall class 0 = 0.987203
recall class 1 = 0.240786
false negative rate = 0.759214
false positive rate = 0.012797
positive prediction rate = 0.058105
AUC of ROC = 0.870921
AUC of PRC = 0.665378
min(+P, Se) = 0.621622

-------------------------------

confusion matrix:
[[1267   15]
 [  93   33]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.0872419998049736
difference in average predicted and observed risk = -0.002247000195026397
number samples = 1408
accuracy = 0.923295
precision class 0 = 0.931618
precision class 1 = 0.6875
recall class 0 = 0.9883
recall class 1 = 0.261905
false negative rate = 0.738095
false positive rate = 0.0117
positive prediction rate = 0.034091
AUC of ROC = 0.884011
AUC of PRC = 0.488819
min(+P, Se) = 0.531746

-------------------------------

confusion matrix:
[[290   6]
 [ 38  14]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.11760400235652924
difference in average predicted and observed risk = -0.031820997643470766
number samples = 348
accuracy = 0.873563
precision class 0 = 0.884146
precision class 1 = 0.7
recall class 0 = 0.97973
recall class 1 = 0.269231
false negative rate = 0.730769
false positive rate = 0.02027
positive prediction rate = 0.057471
AUC of ROC = 0.86467
AUC of PRC = 0.601414
min(+P, Se) = 0.566038

-------------------------------

confusion matrix:
[[420   9]
 [ 29  10]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.08830299973487854
difference in average predicted and observed risk = 0.004969999734878536
number samples = 468
accuracy = 0.918803
precision class 0 = 0.935412
precision class 1 = 0.526316
recall class 0 = 0.979021
recall class 1 = 0.25641
false negative rate = 0.74359
false positive rate = 0.020979
positive prediction rate = 0.040598
AUC of ROC = 0.843763
AUC of PRC = 0.433153
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[12560   134]
 [ 1567   420]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.09290800243616104
difference in average predicted and observed risk = -0.04243699756383895
number samples = 14681
accuracy = 0.884136
precision class 0 = 0.889078
precision class 1 = 0.758123
recall class 0 = 0.989444
recall class 1 = 0.211374
false negative rate = 0.788626
false positive rate = 0.010556
positive prediction rate = 0.037736
AUC of ROC = 0.864881
AUC of PRC = 0.558412
min(+P, Se) = 0.525075

-------------------------------

==>predicting on validation



confusion matrix:
[[1525   10]
 [ 214   64]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.10037799924612045
difference in average predicted and observed risk = -0.05295900075387955
number samples = 1813
accuracy = 0.876448
precision class 0 = 0.876941
precision class 1 = 0.864865
recall class 0 = 0.993485
recall class 1 = 0.230216
false negative rate = 0.769784
false positive rate = 0.006515
positive prediction rate = 0.040816
AUC of ROC = 0.846751
AUC of PRC = 0.580313
min(+P, Se) = 0.539568

-------------------------------

confusion matrix:
[[891  16]
 [ 89  24]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.08957800269126892
difference in average predicted and observed risk = -0.021205997308731073
number samples = 1020
accuracy = 0.897059
precision class 0 = 0.909184
precision class 1 = 0.6
recall class 0 = 0.982359
recall class 1 = 0.212389
false negative rate = 0.787611
false positive rate = 0.017641
positive prediction rate = 0.039216
AUC of ROC = 0.844747
AUC of PRC = 0.451534
min(+P, Se) = 0.44

-------------------------------

confusion matrix:
[[246   5]
 [ 25   9]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.10233800113201141
difference in average predicted and observed risk = -0.016959998867988588
number samples = 285
accuracy = 0.894737
precision class 0 = 0.907749
precision class 1 = 0.642857
recall class 0 = 0.98008
recall class 1 = 0.264706
false negative rate = 0.735294
false positive rate = 0.01992
positive prediction rate = 0.049123
AUC of ROC = 0.891141
AUC of PRC = 0.580209
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08214300125837326
difference in average predicted and observed risk = -0.007600998741626744
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.77666
AUC of PRC = 0.388743
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[22  0]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1502700001001358
difference in average predicted and observed risk = -0.0035759998998642073
number samples = 26
accuracy = 1.0
precision class 0 = 1.0
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.0
positive prediction rate = 0.153846
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[1510   19]
 [ 189   55]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.09621699899435043
difference in average predicted and observed risk = -0.04140300100564956
number samples = 1773
accuracy = 0.882685
precision class 0 = 0.888758
precision class 1 = 0.743243
recall class 0 = 0.987574
recall class 1 = 0.22541
false negative rate = 0.77459
false positive rate = 0.012426
positive prediction rate = 0.041737
AUC of ROC = 0.850717
AUC of PRC = 0.54065
min(+P, Se) = 0.517647

-------------------------------

confusion matrix:
[[1243   14]
 [ 145   47]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.09816499799489975
difference in average predicted and observed risk = -0.03434000200510026
number samples = 1449
accuracy = 0.890269
precision class 0 = 0.895533
precision class 1 = 0.770492
recall class 0 = 0.988862
recall class 1 = 0.244792
false negative rate = 0.755208
false positive rate = 0.011138
positive prediction rate = 0.042098
AUC of ROC = 0.850835
AUC of PRC = 0.540253
min(+P, Se) = 0.497512

-------------------------------

confusion matrix:
[[1951   27]
 [ 238   73]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.09571599960327148
difference in average predicted and observed risk = -0.0401510003967285
number samples = 2289
accuracy = 0.884229
precision class 0 = 0.891275
precision class 1 = 0.73
recall class 0 = 0.98635
recall class 1 = 0.234727
false negative rate = 0.765273
false positive rate = 0.01365
positive prediction rate = 0.043687
AUC of ROC = 0.84687
AUC of PRC = 0.533892
min(+P, Se) = 0.509494

-------------------------------

confusion matrix:
[[365   3]
 [ 64  17]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.11005699634552002
difference in average predicted and observed risk = -0.07034400365447999
number samples = 449
accuracy = 0.85078
precision class 0 = 0.850816
precision class 1 = 0.85
recall class 0 = 0.991848
recall class 1 = 0.209877
false negative rate = 0.790123
false positive rate = 0.008152
positive prediction rate = 0.044543
AUC of ROC = 0.864936
AUC of PRC = 0.621945
min(+P, Se) = 0.568182

-------------------------------

confusion matrix:
[[277   1]
 [ 22   8]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.0874210000038147
difference in average predicted and observed risk = -0.009981999996185306
number samples = 308
accuracy = 0.925325
precision class 0 = 0.926421
precision class 1 = 0.888889
recall class 0 = 0.996403
recall class 1 = 0.266667
false negative rate = 0.733333
false positive rate = 0.003597
positive prediction rate = 0.029221
AUC of ROC = 0.869784
AUC of PRC = 0.517978
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.08281700313091278
difference in average predicted and observed risk = 0.010652003130912774
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.819048
AUC of PRC = 0.310023
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[72  0]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.11856699734926224
difference in average predicted and observed risk = 0.02995899734926223
number samples = 79
accuracy = 0.949367
precision class 0 = 0.947368
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.0
positive prediction rate = 0.037975
AUC of ROC = 0.825397
AUC of PRC = 0.612183
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[2753   33]
 [ 334  102]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.09709300100803375
difference in average predicted and observed risk = -0.03822699899196624
number samples = 3222
accuracy = 0.886096
precision class 0 = 0.891804
precision class 1 = 0.755556
recall class 0 = 0.988155
recall class 1 = 0.233945
false negative rate = 0.766055
false positive rate = 0.011845
positive prediction rate = 0.041899
AUC of ROC = 0.850687
AUC of PRC = 0.540449
min(+P, Se) = 0.508009

-------------------------------

Epoch 00007: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch7.state
Epoch 8/100
 - 825s - loss: 0.2967 - val_loss: 0.2853

==>predicting on train



confusion matrix:
[[6937   99]
 [ 986  326]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13396699726581573
difference in average predicted and observed risk = -0.023196002734184262
number samples = 8348
accuracy = 0.870029
precision class 0 = 0.875552
precision class 1 = 0.767059
recall class 0 = 0.985929
recall class 1 = 0.248476
false negative rate = 0.751524
false positive rate = 0.01407
positive prediction rate = 0.05091
AUC of ROC = 0.855524
AUC of PRC = 0.57482
min(+P, Se) = 0.539223

-------------------------------

confusion matrix:
[[3926   76]
 [ 300  171]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.1162559986114502
difference in average predicted and observed risk = 0.010957998611450193
number samples = 4473
accuracy = 0.91594
precision class 0 = 0.929011
precision class 1 = 0.692308
recall class 0 = 0.981009
recall class 1 = 0.363057
false negative rate = 0.636943
false positive rate = 0.018991
positive prediction rate = 0.05522
AUC of ROC = 0.882117
AUC of PRC = 0.569185
min(+P, Se) = 0.530786

-------------------------------

confusion matrix:
[[1175   20]
 [  90   53]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.1269409954547882
difference in average predicted and observed risk = 0.02006499545478821
number samples = 1338
accuracy = 0.917788
precision class 0 = 0.928854
precision class 1 = 0.726027
recall class 0 = 0.983264
recall class 1 = 0.370629
false negative rate = 0.629371
false positive rate = 0.016736
positive prediction rate = 0.054559
AUC of ROC = 0.894455
AUC of PRC = 0.610326
min(+P, Se) = 0.573427

-------------------------------

confusion matrix:
[[345   5]
 [ 24  15]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.1143449991941452
difference in average predicted and observed risk = 0.014087999194145204
number samples = 389
accuracy = 0.92545
precision class 0 = 0.934959
precision class 1 = 0.75
recall class 0 = 0.985714
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.014286
positive prediction rate = 0.051414
AUC of ROC = 0.890769
AUC of PRC = 0.576581
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[107   4]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1711139976978302
difference in average predicted and observed risk = 0.005699997697830195
number samples = 133
accuracy = 0.902256
precision class 0 = 0.922414
precision class 1 = 0.764706
recall class 0 = 0.963964
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.036036
positive prediction rate = 0.12782
AUC of ROC = 0.939803
AUC of PRC = 0.791815
min(+P, Se) = 0.727273

-------------------------------

confusion matrix:
[[6883  103]
 [ 756  317]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1228329986333847
difference in average predicted and observed risk = -0.010310001366615307
number samples = 8059
accuracy = 0.893411
precision class 0 = 0.901034
precision class 1 = 0.754762
recall class 0 = 0.985256
recall class 1 = 0.295433
false negative rate = 0.704567
false positive rate = 0.014744
positive prediction rate = 0.052116
AUC of ROC = 0.872121
AUC of PRC = 0.583578
min(+P, Se) = 0.544186

-------------------------------

confusion matrix:
[[5607  101]
 [ 653  261]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.13372699916362762
difference in average predicted and observed risk = -0.004298000836372384
number samples = 6622
accuracy = 0.886137
precision class 0 = 0.895687
precision class 1 = 0.720994
recall class 0 = 0.982306
recall class 1 = 0.285558
false negative rate = 0.714442
false positive rate = 0.017694
positive prediction rate = 0.054666
AUC of ROC = 0.863888
AUC of PRC = 0.562574
min(+P, Se) = 0.52954

-------------------------------

confusion matrix:
[[8918  128]
 [1004  359]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.12287099659442902
difference in average predicted and observed risk = -0.008073003405570989
number samples = 10409
accuracy = 0.891248
precision class 0 = 0.898811
precision class 1 = 0.737166
recall class 0 = 0.98585
recall class 1 = 0.26339
false negative rate = 0.73661
false positive rate = 0.01415
positive prediction rate = 0.046786
AUC of ROC = 0.866261
AUC of PRC = 0.559429
min(+P, Se) = 0.515774

-------------------------------

confusion matrix:
[[1606   35]
 [ 265  142]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1537570059299469
difference in average predicted and observed risk = -0.04497299407005309
number samples = 2048
accuracy = 0.853516
precision class 0 = 0.858365
precision class 1 = 0.80226
recall class 0 = 0.978672
recall class 1 = 0.348894
false negative rate = 0.651106
false positive rate = 0.021328
positive prediction rate = 0.086426
AUC of ROC = 0.871764
AUC of PRC = 0.672284
min(+P, Se) = 0.630807

-------------------------------

confusion matrix:
[[1258   24]
 [  81   45]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11963099986314774
difference in average predicted and observed risk = 0.030141999863147736
number samples = 1408
accuracy = 0.925426
precision class 0 = 0.939507
precision class 1 = 0.652174
recall class 0 = 0.981279
recall class 1 = 0.357143
false negative rate = 0.642857
false positive rate = 0.018721
positive prediction rate = 0.049006
AUC of ROC = 0.884815
AUC of PRC = 0.487178
min(+P, Se) = 0.492188

-------------------------------

confusion matrix:
[[288   8]
 [ 32  20]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1569869965314865
difference in average predicted and observed risk = 0.007561996531486509
number samples = 348
accuracy = 0.885057
precision class 0 = 0.9
precision class 1 = 0.714286
recall class 0 = 0.972973
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.027027
positive prediction rate = 0.08046
AUC of ROC = 0.867788
AUC of PRC = 0.603993
min(+P, Se) = 0.566038

-------------------------------

confusion matrix:
[[420   9]
 [ 27  12]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.12504200637340546
difference in average predicted and observed risk = 0.04170900637340545
number samples = 468
accuracy = 0.923077
precision class 0 = 0.939597
precision class 1 = 0.571429
recall class 0 = 0.979021
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.020979
positive prediction rate = 0.044872
AUC of ROC = 0.857749
AUC of PRC = 0.479705
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[12490   204]
 [ 1409   578]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12774699926376343
difference in average predicted and observed risk = -0.007598000736236565
number samples = 14681
accuracy = 0.89013
precision class 0 = 0.898626
precision class 1 = 0.73913
recall class 0 = 0.983929
recall class 1 = 0.290891
false negative rate = 0.709109
false positive rate = 0.016071
positive prediction rate = 0.053266
AUC of ROC = 0.868281
AUC of PRC = 0.573699
min(+P, Se) = 0.53699

-------------------------------

==>predicting on validation



confusion matrix:
[[1506   29]
 [ 198   80]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13930200040340424
difference in average predicted and observed risk = -0.014034999596595765
number samples = 1813
accuracy = 0.874793
precision class 0 = 0.883803
precision class 1 = 0.733945
recall class 0 = 0.981107
recall class 1 = 0.28777
false negative rate = 0.71223
false positive rate = 0.018893
positive prediction rate = 0.060121
AUC of ROC = 0.847878
AUC of PRC = 0.574806
min(+P, Se) = 0.521583

-------------------------------

confusion matrix:
[[885  22]
 [ 83  30]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11903200298547745
difference in average predicted and observed risk = 0.008248002985477454
number samples = 1020
accuracy = 0.897059
precision class 0 = 0.914256
precision class 1 = 0.576923
recall class 0 = 0.975744
recall class 1 = 0.265487
false negative rate = 0.734513
false positive rate = 0.024256
positive prediction rate = 0.05098
AUC of ROC = 0.852494
AUC of PRC = 0.478785
min(+P, Se) = 0.478261

-------------------------------

confusion matrix:
[[244   7]
 [ 24  10]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13592499494552612
difference in average predicted and observed risk = 0.016626994945526122
number samples = 285
accuracy = 0.891228
precision class 0 = 0.910448
precision class 1 = 0.588235
recall class 0 = 0.972112
recall class 1 = 0.294118
false negative rate = 0.705882
false positive rate = 0.027888
positive prediction rate = 0.059649
AUC of ROC = 0.887274
AUC of PRC = 0.569048
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.11221300065517426
difference in average predicted and observed risk = 0.02246900065517425
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.752515
AUC of PRC = 0.374808
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[22  0]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17465700209140778
difference in average predicted and observed risk = 0.020811002091407765
number samples = 26
accuracy = 1.0
precision class 0 = 1.0
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.0
positive prediction rate = 0.153846
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[1497   32]
 [ 175   69]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1290690004825592
difference in average predicted and observed risk = -0.008550999517440788
number samples = 1773
accuracy = 0.883249
precision class 0 = 0.895335
precision class 1 = 0.683168
recall class 0 = 0.979071
recall class 1 = 0.282787
false negative rate = 0.717213
false positive rate = 0.020929
positive prediction rate = 0.056966
AUC of ROC = 0.852572
AUC of PRC = 0.5483
min(+P, Se) = 0.528689

-------------------------------

confusion matrix:
[[1229   28]
 [ 136   56]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.1360660046339035
difference in average predicted and observed risk = 0.0035610046339034918
number samples = 1449
accuracy = 0.886818
precision class 0 = 0.900366
precision class 1 = 0.666667
recall class 0 = 0.977725
recall class 1 = 0.291667
false negative rate = 0.708333
false positive rate = 0.022275
positive prediction rate = 0.057971
AUC of ROC = 0.854693
AUC of PRC = 0.545813
min(+P, Se) = 0.505208

-------------------------------

confusion matrix:
[[1935   43]
 [ 224   87]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1305450052022934
difference in average predicted and observed risk = -0.005321994797706592
number samples = 2289
accuracy = 0.883355
precision class 0 = 0.896248
precision class 1 = 0.669231
recall class 0 = 0.978261
recall class 1 = 0.279743
false negative rate = 0.720257
false positive rate = 0.021739
positive prediction rate = 0.056793
AUC of ROC = 0.84886
AUC of PRC = 0.535384
min(+P, Se) = 0.519231

-------------------------------

confusion matrix:
[[361   7]
 [ 57  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1469780057668686
difference in average predicted and observed risk = -0.033422994233131414
number samples = 449
accuracy = 0.857461
precision class 0 = 0.863636
precision class 1 = 0.774194
recall class 0 = 0.980978
recall class 1 = 0.296296
false negative rate = 0.703704
false positive rate = 0.019022
positive prediction rate = 0.069042
AUC of ROC = 0.867284
AUC of PRC = 0.646419
min(+P, Se) = 0.586957

-------------------------------

confusion matrix:
[[273   5]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.12024199962615967
difference in average predicted and observed risk = 0.022838999626159665
number samples = 308
accuracy = 0.918831
precision class 0 = 0.931741
precision class 1 = 0.666667
recall class 0 = 0.982014
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.017986
positive prediction rate = 0.048701
AUC of ROC = 0.878897
AUC of PRC = 0.547549
min(+P, Se) = 0.483871

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11687400192022324
difference in average predicted and observed risk = 0.04470900192022323
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.822222
AUC of PRC = 0.302338
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[70  2]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.16224199533462524
difference in average predicted and observed risk = 0.07363399533462524
number samples = 79
accuracy = 0.924051
precision class 0 = 0.945946
precision class 1 = 0.6
recall class 0 = 0.972222
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.027778
positive prediction rate = 0.063291
AUC of ROC = 0.84127
AUC of PRC = 0.629069
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[2726   60]
 [ 311  125]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.13221600651741028
difference in average predicted and observed risk = -0.0031039934825897175
number samples = 3222
accuracy = 0.884854
precision class 0 = 0.897596
precision class 1 = 0.675676
recall class 0 = 0.978464
recall class 1 = 0.286697
false negative rate = 0.713303
false positive rate = 0.021536
positive prediction rate = 0.057418
AUC of ROC = 0.853132
AUC of PRC = 0.546582
min(+P, Se) = 0.518349

-------------------------------

Epoch 00008: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch8.state
Epoch 9/100
 - 819s - loss: 0.2985 - val_loss: 0.2879

==>predicting on train



confusion matrix:
[[6942   94]
 [1003  309]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.11833299696445465
difference in average predicted and observed risk = -0.038830003035545346
number samples = 8348
accuracy = 0.868591
precision class 0 = 0.873757
precision class 1 = 0.766749
recall class 0 = 0.98664
recall class 1 = 0.235518
false negative rate = 0.764482
false positive rate = 0.01336
positive prediction rate = 0.048275
AUC of ROC = 0.85231
AUC of PRC = 0.569556
min(+P, Se) = 0.528201

-------------------------------

confusion matrix:
[[3926   76]
 [ 301  170]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10735400021076202
difference in average predicted and observed risk = 0.0020560002107620212
number samples = 4473
accuracy = 0.915717
precision class 0 = 0.928791
precision class 1 = 0.691057
recall class 0 = 0.981009
recall class 1 = 0.360934
false negative rate = 0.639066
false positive rate = 0.018991
positive prediction rate = 0.054997
AUC of ROC = 0.880157
AUC of PRC = 0.570086
min(+P, Se) = 0.53178

-------------------------------

confusion matrix:
[[1174   21]
 [  92   51]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11737599968910217
difference in average predicted and observed risk = 0.010499999689102174
number samples = 1338
accuracy = 0.915546
precision class 0 = 0.92733
precision class 1 = 0.708333
recall class 0 = 0.982427
recall class 1 = 0.356643
false negative rate = 0.643357
false positive rate = 0.017573
positive prediction rate = 0.053812
AUC of ROC = 0.889347
AUC of PRC = 0.594826
min(+P, Se) = 0.552448

-------------------------------

confusion matrix:
[[346   4]
 [ 25  14]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10478000342845917
difference in average predicted and observed risk = 0.004523003428459169
number samples = 389
accuracy = 0.92545
precision class 0 = 0.932615
precision class 1 = 0.777778
recall class 0 = 0.988571
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.011429
positive prediction rate = 0.046272
AUC of ROC = 0.873187
AUC of PRC = 0.566975
min(+P, Se) = 0.590909

-------------------------------

confusion matrix:
[[108   3]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16655999422073364
difference in average predicted and observed risk = 0.001145994220733637
number samples = 133
accuracy = 0.917293
precision class 0 = 0.931035
precision class 1 = 0.823529
recall class 0 = 0.972973
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.027027
positive prediction rate = 0.12782
AUC of ROC = 0.908681
AUC of PRC = 0.753046
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[6884  102]
 [ 771  302]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1117670014500618
difference in average predicted and observed risk = -0.021375998549938213
number samples = 8059
accuracy = 0.891674
precision class 0 = 0.899282
precision class 1 = 0.747525
recall class 0 = 0.985399
recall class 1 = 0.281454
false negative rate = 0.718546
false positive rate = 0.014601
positive prediction rate = 0.05013
AUC of ROC = 0.866171
AUC of PRC = 0.572829
min(+P, Se) = 0.526561

-------------------------------

confusion matrix:
[[5612   96]
 [ 658  256]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11888699978590012
difference in average predicted and observed risk = -0.019138000214099893
number samples = 6622
accuracy = 0.886137
precision class 0 = 0.895056
precision class 1 = 0.727273
recall class 0 = 0.983181
recall class 1 = 0.280088
false negative rate = 0.719912
false positive rate = 0.016819
positive prediction rate = 0.053156
AUC of ROC = 0.861942
AUC of PRC = 0.561419
min(+P, Se) = 0.52459

-------------------------------

confusion matrix:
[[8925  121]
 [1016  347]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10974399745464325
difference in average predicted and observed risk = -0.021200002545356755
number samples = 10409
accuracy = 0.890768
precision class 0 = 0.897797
precision class 1 = 0.741453
recall class 0 = 0.986624
recall class 1 = 0.254585
false negative rate = 0.745415
false positive rate = 0.013376
positive prediction rate = 0.044961
AUC of ROC = 0.861416
AUC of PRC = 0.551556
min(+P, Se) = 0.508437

-------------------------------

confusion matrix:
[[1605   36]
 [ 267  140]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14253799617290497
difference in average predicted and observed risk = -0.05619200382709502
number samples = 2048
accuracy = 0.852051
precision class 0 = 0.857372
precision class 1 = 0.795455
recall class 0 = 0.978062
recall class 1 = 0.34398
false negative rate = 0.65602
false positive rate = 0.021938
positive prediction rate = 0.085938
AUC of ROC = 0.871086
AUC of PRC = 0.667764
min(+P, Se) = 0.616708

-------------------------------

confusion matrix:
[[1260   22]
 [  86   40]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.1083339974284172
difference in average predicted and observed risk = 0.018844997428417207
number samples = 1408
accuracy = 0.923295
precision class 0 = 0.936107
precision class 1 = 0.645161
recall class 0 = 0.982839
recall class 1 = 0.31746
false negative rate = 0.68254
false positive rate = 0.017161
positive prediction rate = 0.044034
AUC of ROC = 0.875814
AUC of PRC = 0.485365
min(+P, Se) = 0.492063

-------------------------------

confusion matrix:
[[286  10]
 [ 31  21]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14368000626564026
difference in average predicted and observed risk = -0.0057449937343597435
number samples = 348
accuracy = 0.882184
precision class 0 = 0.902208
precision class 1 = 0.677419
recall class 0 = 0.966216
recall class 1 = 0.403846
false negative rate = 0.596154
false positive rate = 0.033784
positive prediction rate = 0.08908
AUC of ROC = 0.863241
AUC of PRC = 0.607223
min(+P, Se) = 0.557692

-------------------------------

confusion matrix:
[[420   9]
 [ 29  10]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10945899784564972
difference in average predicted and observed risk = 0.026125997845649715
number samples = 468
accuracy = 0.918803
precision class 0 = 0.935412
precision class 1 = 0.526316
recall class 0 = 0.979021
recall class 1 = 0.25641
false negative rate = 0.74359
false positive rate = 0.020979
positive prediction rate = 0.040598
AUC of ROC = 0.848365
AUC of PRC = 0.4485
min(+P, Se) = 0.487805

-------------------------------

confusion matrix:
[[12496   198]
 [ 1429   558]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11497899889945984
difference in average predicted and observed risk = -0.020366001100540154
number samples = 14681
accuracy = 0.889176
precision class 0 = 0.897379
precision class 1 = 0.738095
recall class 0 = 0.984402
recall class 1 = 0.280825
false negative rate = 0.719175
false positive rate = 0.015598
positive prediction rate = 0.051495
AUC of ROC = 0.864023
AUC of PRC = 0.567234
min(+P, Se) = 0.525415

-------------------------------

==>predicting on validation



confusion matrix:
[[1511   24]
 [ 198   80]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12359099835157394
difference in average predicted and observed risk = -0.029746001648426057
number samples = 1813
accuracy = 0.877551
precision class 0 = 0.884143
precision class 1 = 0.769231
recall class 0 = 0.984365
recall class 1 = 0.28777
false negative rate = 0.71223
false positive rate = 0.015635
positive prediction rate = 0.057363
AUC of ROC = 0.851653
AUC of PRC = 0.581868
min(+P, Se) = 0.532374

-------------------------------

confusion matrix:
[[882  25]
 [ 88  25]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11001300066709518
difference in average predicted and observed risk = -0.0007709993329048093
number samples = 1020
accuracy = 0.889216
precision class 0 = 0.909278
precision class 1 = 0.5
recall class 0 = 0.972437
recall class 1 = 0.221239
false negative rate = 0.778761
false positive rate = 0.027563
positive prediction rate = 0.04902
AUC of ROC = 0.845245
AUC of PRC = 0.454132
min(+P, Se) = 0.46087

-------------------------------

confusion matrix:
[[242   9]
 [ 23  11]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12850500643253326
difference in average predicted and observed risk = 0.009207006432533263
number samples = 285
accuracy = 0.887719
precision class 0 = 0.913208
precision class 1 = 0.55
recall class 0 = 0.964143
recall class 1 = 0.323529
false negative rate = 0.676471
false positive rate = 0.035857
positive prediction rate = 0.070175
AUC of ROC = 0.883056
AUC of PRC = 0.575986
min(+P, Se) = 0.567568

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09856200218200684
difference in average predicted and observed risk = 0.008818002182006832
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.740443
AUC of PRC = 0.374322
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1836860030889511
difference in average predicted and observed risk = 0.0298400030889511
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.988636
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1495   34]
 [ 178   66]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11858800053596497
difference in average predicted and observed risk = -0.019031999464035027
number samples = 1773
accuracy = 0.880429
precision class 0 = 0.893604
precision class 1 = 0.66
recall class 0 = 0.977763
recall class 1 = 0.270492
false negative rate = 0.729508
false positive rate = 0.022237
positive prediction rate = 0.056402
AUC of ROC = 0.852317
AUC of PRC = 0.543775
min(+P, Se) = 0.537549

-------------------------------

confusion matrix:
[[1230   27]
 [ 137   55]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.1208529993891716
difference in average predicted and observed risk = -0.011652000610828411
number samples = 1449
accuracy = 0.886818
precision class 0 = 0.899781
precision class 1 = 0.670732
recall class 0 = 0.97852
recall class 1 = 0.286458
false negative rate = 0.713542
false positive rate = 0.02148
positive prediction rate = 0.056591
AUC of ROC = 0.852439
AUC of PRC = 0.537244
min(+P, Se) = 0.494898

-------------------------------

confusion matrix:
[[1936   42]
 [ 224   87]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11730200052261353
difference in average predicted and observed risk = -0.018564999477386462
number samples = 2289
accuracy = 0.883792
precision class 0 = 0.896296
precision class 1 = 0.674419
recall class 0 = 0.978766
recall class 1 = 0.279743
false negative rate = 0.720257
false positive rate = 0.021234
positive prediction rate = 0.056356
AUC of ROC = 0.848358
AUC of PRC = 0.533222
min(+P, Se) = 0.517685

-------------------------------

confusion matrix:
[[358  10]
 [ 60  21]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13806700706481934
difference in average predicted and observed risk = -0.04233399293518067
number samples = 449
accuracy = 0.844098
precision class 0 = 0.856459
precision class 1 = 0.677419
recall class 0 = 0.972826
recall class 1 = 0.259259
false negative rate = 0.740741
false positive rate = 0.027174
positive prediction rate = 0.069042
AUC of ROC = 0.865674
AUC of PRC = 0.622491
min(+P, Se) = 0.573171

-------------------------------

confusion matrix:
[[273   5]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10681100189685822
difference in average predicted and observed risk = 0.009408001896858212
number samples = 308
accuracy = 0.915584
precision class 0 = 0.928571
precision class 1 = 0.642857
recall class 0 = 0.982014
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.017986
positive prediction rate = 0.045455
AUC of ROC = 0.868345
AUC of PRC = 0.52132
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10668200254440308
difference in average predicted and observed risk = 0.03451700254440307
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.830159
AUC of PRC = 0.315534
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14719000458717346
difference in average predicted and observed risk = 0.058582004587173456
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.847222
AUC of PRC = 0.627342
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[2725   61]
 [ 315  121]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11960600316524506
difference in average predicted and observed risk = -0.01571399683475494
number samples = 3222
accuracy = 0.883302
precision class 0 = 0.896382
precision class 1 = 0.664835
recall class 0 = 0.978105
recall class 1 = 0.277523
false negative rate = 0.722477
false positive rate = 0.021895
positive prediction rate = 0.056487
AUC of ROC = 0.852046
AUC of PRC = 0.541198
min(+P, Se) = 0.515837

-------------------------------

Epoch 00009: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch9.state
Epoch 10/100
 - 817s - loss: 0.2994 - val_loss: 0.2824

==>predicting on train



confusion matrix:
[[6910  126]
 [ 952  360]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.14059899747371674
difference in average predicted and observed risk = -0.01656400252628326
number samples = 8348
accuracy = 0.870867
precision class 0 = 0.878911
precision class 1 = 0.740741
recall class 0 = 0.982092
recall class 1 = 0.27439
false negative rate = 0.72561
false positive rate = 0.017908
positive prediction rate = 0.058218
AUC of ROC = 0.858178
AUC of PRC = 0.579308
min(+P, Se) = 0.542683

-------------------------------

confusion matrix:
[[3919   83]
 [ 290  181]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.12206000089645386
difference in average predicted and observed risk = 0.016762000896453855
number samples = 4473
accuracy = 0.916611
precision class 0 = 0.9311
precision class 1 = 0.685606
recall class 0 = 0.97926
recall class 1 = 0.384289
false negative rate = 0.615711
false positive rate = 0.02074
positive prediction rate = 0.059021
AUC of ROC = 0.888734
AUC of PRC = 0.585328
min(+P, Se) = 0.543524

-------------------------------

confusion matrix:
[[1171   24]
 [  88   55]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.13382600247859955
difference in average predicted and observed risk = 0.02695000247859955
number samples = 1338
accuracy = 0.916293
precision class 0 = 0.930103
precision class 1 = 0.696203
recall class 0 = 0.979916
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.020084
positive prediction rate = 0.059043
AUC of ROC = 0.892226
AUC of PRC = 0.604186
min(+P, Se) = 0.560811

-------------------------------

confusion matrix:
[[344   6]
 [ 24  15]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.12145300209522247
difference in average predicted and observed risk = 0.021196002095222474
number samples = 389
accuracy = 0.922879
precision class 0 = 0.934783
precision class 1 = 0.714286
recall class 0 = 0.982857
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.017143
positive prediction rate = 0.053985
AUC of ROC = 0.894286
AUC of PRC = 0.608719
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[107   4]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.18072299659252167
difference in average predicted and observed risk = 0.015308996592521662
number samples = 133
accuracy = 0.917293
precision class 0 = 0.938596
precision class 1 = 0.789474
recall class 0 = 0.963964
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.036036
positive prediction rate = 0.142857
AUC of ROC = 0.925061
AUC of PRC = 0.80716
min(+P, Se) = 0.75

-------------------------------

confusion matrix:
[[6868  118]
 [ 738  335]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12839500606060028
difference in average predicted and observed risk = -0.004747993939399731
number samples = 8059
accuracy = 0.893783
precision class 0 = 0.902971
precision class 1 = 0.739514
recall class 0 = 0.983109
recall class 1 = 0.312209
false negative rate = 0.687791
false positive rate = 0.016891
positive prediction rate = 0.05621
AUC of ROC = 0.87501
AUC of PRC = 0.590923
min(+P, Se) = 0.548928

-------------------------------

confusion matrix:
[[5583  125]
 [ 623  291]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.14124099910259247
difference in average predicted and observed risk = 0.0032159991025924595
number samples = 6622
accuracy = 0.887043
precision class 0 = 0.899613
precision class 1 = 0.699519
recall class 0 = 0.978101
recall class 1 = 0.318381
false negative rate = 0.681619
false positive rate = 0.021899
positive prediction rate = 0.062821
AUC of ROC = 0.867875
AUC of PRC = 0.571591
min(+P, Se) = 0.53203

-------------------------------

confusion matrix:
[[8890  156]
 [ 977  386]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.12906000018119812
difference in average predicted and observed risk = -0.0018839998188018847
number samples = 10409
accuracy = 0.891152
precision class 0 = 0.900983
precision class 1 = 0.712177
recall class 0 = 0.982755
recall class 1 = 0.283199
false negative rate = 0.716801
false positive rate = 0.017245
positive prediction rate = 0.05207
AUC of ROC = 0.869252
AUC of PRC = 0.56661
min(+P, Se) = 0.529112

-------------------------------

confusion matrix:
[[1600   41]
 [ 252  155]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.16104300320148468
difference in average predicted and observed risk = -0.03768699679851531
number samples = 2048
accuracy = 0.856934
precision class 0 = 0.863931
precision class 1 = 0.790816
recall class 0 = 0.975015
recall class 1 = 0.380835
false negative rate = 0.619165
false positive rate = 0.024985
positive prediction rate = 0.095703
AUC of ROC = 0.877174
AUC of PRC = 0.679347
min(+P, Se) = 0.621622

-------------------------------

confusion matrix:
[[1254   28]
 [  80   46]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.1260789930820465
difference in average predicted and observed risk = 0.03658999308204651
number samples = 1408
accuracy = 0.923295
precision class 0 = 0.94003
precision class 1 = 0.621622
recall class 0 = 0.978159
recall class 1 = 0.365079
false negative rate = 0.634921
false positive rate = 0.021841
positive prediction rate = 0.052557
AUC of ROC = 0.886592
AUC of PRC = 0.496375
min(+P, Se) = 0.539683

-------------------------------

confusion matrix:
[[288   8]
 [ 28  24]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.16491499543190002
difference in average predicted and observed risk = 0.015489995431900022
number samples = 348
accuracy = 0.896552
precision class 0 = 0.911392
precision class 1 = 0.75
recall class 0 = 0.972973
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.027027
positive prediction rate = 0.091954
AUC of ROC = 0.875975
AUC of PRC = 0.637142
min(+P, Se) = 0.576923

-------------------------------

confusion matrix:
[[419  10]
 [ 24  15]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.13231399655342102
difference in average predicted and observed risk = 0.048980996553421016
number samples = 468
accuracy = 0.92735
precision class 0 = 0.945824
precision class 1 = 0.6
recall class 0 = 0.97669
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.02331
positive prediction rate = 0.053419
AUC of ROC = 0.85482
AUC of PRC = 0.486861
min(+P, Se) = 0.538462

-------------------------------

confusion matrix:
[[12451   243]
 [ 1361   626]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.13418899476528168
difference in average predicted and observed risk = -0.0011560052347183158
number samples = 14681
accuracy = 0.890743
precision class 0 = 0.901462
precision class 1 = 0.720368
recall class 0 = 0.980857
recall class 1 = 0.315048
false negative rate = 0.684952
false positive rate = 0.019143
positive prediction rate = 0.059192
AUC of ROC = 0.871662
AUC of PRC = 0.581707
min(+P, Se) = 0.542543

-------------------------------

==>predicting on validation



confusion matrix:
[[1501   34]
 [ 186   92]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.14576800167560577
difference in average predicted and observed risk = -0.007568998324394227
number samples = 1813
accuracy = 0.878654
precision class 0 = 0.889745
precision class 1 = 0.730159
recall class 0 = 0.97785
recall class 1 = 0.330935
false negative rate = 0.669065
false positive rate = 0.02215
positive prediction rate = 0.069498
AUC of ROC = 0.855077
AUC of PRC = 0.585744
min(+P, Se) = 0.539568

-------------------------------

confusion matrix:
[[882  25]
 [ 83  30]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.12499099969863892
difference in average predicted and observed risk = 0.014206999698638922
number samples = 1020
accuracy = 0.894118
precision class 0 = 0.91399
precision class 1 = 0.545455
recall class 0 = 0.972437
recall class 1 = 0.265487
false negative rate = 0.734513
false positive rate = 0.027563
positive prediction rate = 0.053922
AUC of ROC = 0.853236
AUC of PRC = 0.475516
min(+P, Se) = 0.483607

-------------------------------

confusion matrix:
[[242   9]
 [ 22  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.14485399425029755
difference in average predicted and observed risk = 0.025555994250297545
number samples = 285
accuracy = 0.891228
precision class 0 = 0.916667
precision class 1 = 0.571429
recall class 0 = 0.964143
recall class 1 = 0.352941
false negative rate = 0.647059
false positive rate = 0.035857
positive prediction rate = 0.073684
AUC of ROC = 0.889852
AUC of PRC = 0.567575
min(+P, Se) = 0.529412

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.11717700213193893
difference in average predicted and observed risk = 0.02743300213193893
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.748491
AUC of PRC = 0.371404
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19391199946403503
difference in average predicted and observed risk = 0.040065999464035024
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1492   37]
 [ 165   79]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.13626199960708618
difference in average predicted and observed risk = -0.0013580003929138107
number samples = 1773
accuracy = 0.886069
precision class 0 = 0.900422
precision class 1 = 0.681035
recall class 0 = 0.975801
recall class 1 = 0.32377
false negative rate = 0.67623
false positive rate = 0.024199
positive prediction rate = 0.065426
AUC of ROC = 0.859198
AUC of PRC = 0.556299
min(+P, Se) = 0.528455

-------------------------------

confusion matrix:
[[1223   34]
 [ 132   60]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.14192000031471252
difference in average predicted and observed risk = 0.009415000314712513
number samples = 1449
accuracy = 0.885438
precision class 0 = 0.902583
precision class 1 = 0.638298
recall class 0 = 0.972951
recall class 1 = 0.3125
false negative rate = 0.6875
false positive rate = 0.027049
positive prediction rate = 0.064872
AUC of ROC = 0.856955
AUC of PRC = 0.547113
min(+P, Se) = 0.53125

-------------------------------

confusion matrix:
[[1928   50]
 [ 211  100]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.13680900633335114
difference in average predicted and observed risk = 0.0009420063333511475
number samples = 2289
accuracy = 0.885976
precision class 0 = 0.901356
precision class 1 = 0.666667
recall class 0 = 0.974722
recall class 1 = 0.321543
false negative rate = 0.678457
false positive rate = 0.025278
positive prediction rate = 0.065531
AUC of ROC = 0.852732
AUC of PRC = 0.540728
min(+P, Se) = 0.522436

-------------------------------

confusion matrix:
[[359   9]
 [ 56  25]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.15431299805641174
difference in average predicted and observed risk = -0.026088001943588263
number samples = 449
accuracy = 0.855234
precision class 0 = 0.86506
precision class 1 = 0.735294
recall class 0 = 0.975543
recall class 1 = 0.308642
false negative rate = 0.691358
false positive rate = 0.024457
positive prediction rate = 0.075724
AUC of ROC = 0.870907
AUC of PRC = 0.640139
min(+P, Se) = 0.597561

-------------------------------

confusion matrix:
[[272   6]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.12856100499629974
difference in average predicted and observed risk = 0.03115800499629974
number samples = 308
accuracy = 0.915584
precision class 0 = 0.931507
precision class 1 = 0.625
recall class 0 = 0.978417
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.021583
positive prediction rate = 0.051948
AUC of ROC = 0.893046
AUC of PRC = 0.564016
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.12192700058221817
difference in average predicted and observed risk = 0.04976200058221816
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.846032
AUC of PRC = 0.334212
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[69  3]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.16920100152492523
difference in average predicted and observed risk = 0.08059300152492523
number samples = 79
accuracy = 0.911392
precision class 0 = 0.945205
precision class 1 = 0.5
recall class 0 = 0.958333
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.041667
positive prediction rate = 0.075949
AUC of ROC = 0.837302
AUC of PRC = 0.626308
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[2715   71]
 [ 297  139]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.13880600035190582
difference in average predicted and observed risk = 0.003486000351905827
number samples = 3222
accuracy = 0.885785
precision class 0 = 0.901394
precision class 1 = 0.661905
recall class 0 = 0.974515
recall class 1 = 0.318807
false negative rate = 0.681193
false positive rate = 0.025485
positive prediction rate = 0.065177
AUC of ROC = 0.857947
AUC of PRC = 0.552053
min(+P, Se) = 0.527523

-------------------------------

Epoch 00010: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch10.state
Epoch 11/100
 - 824s - loss: 0.2954 - val_loss: 0.2815

==>predicting on train



confusion matrix:
[[6959   77]
 [1027  285]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13585400581359863
difference in average predicted and observed risk = -0.021308994186401364
number samples = 8348
accuracy = 0.867753
precision class 0 = 0.8714
precision class 1 = 0.787293
recall class 0 = 0.989056
recall class 1 = 0.217226
false negative rate = 0.782774
false positive rate = 0.010944
positive prediction rate = 0.043364
AUC of ROC = 0.860109
AUC of PRC = 0.582705
min(+P, Se) = 0.539924

-------------------------------

confusion matrix:
[[3949   53]
 [ 325  146]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11479199677705765
difference in average predicted and observed risk = 0.009493996777057645
number samples = 4473
accuracy = 0.915493
precision class 0 = 0.923959
precision class 1 = 0.733668
recall class 0 = 0.986757
recall class 1 = 0.309979
false negative rate = 0.690021
false positive rate = 0.013243
positive prediction rate = 0.044489
AUC of ROC = 0.894246
AUC of PRC = 0.597912
min(+P, Se) = 0.55414

-------------------------------

confusion matrix:
[[1180   15]
 [  95   48]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.12309899926185608
difference in average predicted and observed risk = 0.01622299926185608
number samples = 1338
accuracy = 0.917788
precision class 0 = 0.92549
precision class 1 = 0.761905
recall class 0 = 0.987448
recall class 1 = 0.335664
false negative rate = 0.664336
false positive rate = 0.012552
positive prediction rate = 0.047085
AUC of ROC = 0.889165
AUC of PRC = 0.60353
min(+P, Se) = 0.531469

-------------------------------

confusion matrix:
[[346   4]
 [ 25  14]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.11440400034189224
difference in average predicted and observed risk = 0.014147000341892244
number samples = 389
accuracy = 0.92545
precision class 0 = 0.932615
precision class 1 = 0.777778
recall class 0 = 0.988571
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.011429
positive prediction rate = 0.046272
AUC of ROC = 0.899341
AUC of PRC = 0.606228
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[108   3]
 [ 11  11]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16422300040721893
difference in average predicted and observed risk = -0.0011909995927810724
number samples = 133
accuracy = 0.894737
precision class 0 = 0.907563
precision class 1 = 0.785714
recall class 0 = 0.972973
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.027027
positive prediction rate = 0.105263
AUC of ROC = 0.922195
AUC of PRC = 0.788924
min(+P, Se) = 0.772727

-------------------------------

confusion matrix:
[[6914   72]
 [ 804  269]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12243299931287766
difference in average predicted and observed risk = -0.010710000687122356
number samples = 8059
accuracy = 0.891302
precision class 0 = 0.895828
precision class 1 = 0.788856
recall class 0 = 0.989694
recall class 1 = 0.250699
false negative rate = 0.749301
false positive rate = 0.010306
positive prediction rate = 0.042313
AUC of ROC = 0.879218
AUC of PRC = 0.598114
min(+P, Se) = 0.551724

-------------------------------

confusion matrix:
[[5628   80]
 [ 679  235]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.1346929967403412
difference in average predicted and observed risk = -0.0033320032596588223
number samples = 6622
accuracy = 0.885382
precision class 0 = 0.892342
precision class 1 = 0.746032
recall class 0 = 0.985985
recall class 1 = 0.257112
false negative rate = 0.742888
false positive rate = 0.014015
positive prediction rate = 0.047569
AUC of ROC = 0.870139
AUC of PRC = 0.577305
min(+P, Se) = 0.537705

-------------------------------

confusion matrix:
[[8950   96]
 [1049  314]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.12394899874925613
difference in average predicted and observed risk = -0.006995001250743871
number samples = 10409
accuracy = 0.889999
precision class 0 = 0.89509
precision class 1 = 0.765854
recall class 0 = 0.989388
recall class 1 = 0.230374
false negative rate = 0.769626
false positive rate = 0.010612
positive prediction rate = 0.039389
AUC of ROC = 0.872747
AUC of PRC = 0.571801
min(+P, Se) = 0.527859

-------------------------------

confusion matrix:
[[1615   26]
 [ 283  124]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.15154699981212616
difference in average predicted and observed risk = -0.04718300018787383
number samples = 2048
accuracy = 0.849121
precision class 0 = 0.850896
precision class 1 = 0.826667
recall class 0 = 0.984156
recall class 1 = 0.304668
false negative rate = 0.695332
false positive rate = 0.015844
positive prediction rate = 0.073242
AUC of ROC = 0.88238
AUC of PRC = 0.687223
min(+P, Se) = 0.622549

-------------------------------

confusion matrix:
[[1265   17]
 [  91   35]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11849699914455414
difference in average predicted and observed risk = 0.02900799914455414
number samples = 1408
accuracy = 0.923295
precision class 0 = 0.932891
precision class 1 = 0.673077
recall class 0 = 0.986739
recall class 1 = 0.277778
false negative rate = 0.722222
false positive rate = 0.013261
positive prediction rate = 0.036932
AUC of ROC = 0.886301
AUC of PRC = 0.513763
min(+P, Se) = 0.527559

-------------------------------

confusion matrix:
[[290   6]
 [ 33  19]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1545639932155609
difference in average predicted and observed risk = 0.005138993215560911
number samples = 348
accuracy = 0.887931
precision class 0 = 0.897833
precision class 1 = 0.76
recall class 0 = 0.97973
recall class 1 = 0.365385
false negative rate = 0.634615
false positive rate = 0.02027
positive prediction rate = 0.071839
AUC of ROC = 0.865904
AUC of PRC = 0.619131
min(+P, Se) = 0.576923

-------------------------------

confusion matrix:
[[422   7]
 [ 27  12]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.1227319985628128
difference in average predicted and observed risk = 0.0393989985628128
number samples = 468
accuracy = 0.92735
precision class 0 = 0.939866
precision class 1 = 0.631579
recall class 0 = 0.983683
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.016317
positive prediction rate = 0.040598
AUC of ROC = 0.853924
AUC of PRC = 0.508924
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[12542   152]
 [ 1483   504]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12796300649642944
difference in average predicted and observed risk = -0.00738199350357055
number samples = 14681
accuracy = 0.888632
precision class 0 = 0.89426
precision class 1 = 0.768293
recall class 0 = 0.988026
recall class 1 = 0.253649
false negative rate = 0.746351
false positive rate = 0.011974
positive prediction rate = 0.044684
AUC of ROC = 0.875033
AUC of PRC = 0.588024
min(+P, Se) = 0.546049

-------------------------------

==>predicting on validation



confusion matrix:
[[1508   27]
 [ 207   71]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.14075900614261627
difference in average predicted and observed risk = -0.012577993857383729
number samples = 1813
accuracy = 0.870932
precision class 0 = 0.8793
precision class 1 = 0.72449
recall class 0 = 0.98241
recall class 1 = 0.255396
false negative rate = 0.744604
false positive rate = 0.01759
positive prediction rate = 0.054054
AUC of ROC = 0.855712
AUC of PRC = 0.582824
min(+P, Se) = 0.546763

-------------------------------

confusion matrix:
[[891  16]
 [ 92  21]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11582200229167938
difference in average predicted and observed risk = 0.005038002291679389
number samples = 1020
accuracy = 0.894118
precision class 0 = 0.906409
precision class 1 = 0.567568
recall class 0 = 0.982359
recall class 1 = 0.185841
false negative rate = 0.814159
false positive rate = 0.017641
positive prediction rate = 0.036275
AUC of ROC = 0.86311
AUC of PRC = 0.491564
min(+P, Se) = 0.469027

-------------------------------

confusion matrix:
[[246   5]
 [ 24  10]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1354299932718277
difference in average predicted and observed risk = 0.016131993271827696
number samples = 285
accuracy = 0.898246
precision class 0 = 0.911111
precision class 1 = 0.666667
recall class 0 = 0.98008
recall class 1 = 0.294118
false negative rate = 0.705882
false positive rate = 0.01992
positive prediction rate = 0.052632
AUC of ROC = 0.899578
AUC of PRC = 0.596376
min(+P, Se) = 0.538462

-------------------------------

confusion matrix:
[[71  0]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10629899799823761
difference in average predicted and observed risk = 0.016554997998237606
number samples = 78
accuracy = 0.923077
precision class 0 = 0.922078
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.0
positive prediction rate = 0.012821
AUC of ROC = 0.760563
AUC of PRC = 0.460526
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[22  0]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18030999600887299
difference in average predicted and observed risk = 0.026463996008872975
number samples = 26
accuracy = 0.961538
precision class 0 = 0.956522
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.0
positive prediction rate = 0.115385
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[1502   27]
 [ 186   58]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12873800098896027
difference in average predicted and observed risk = -0.008881999011039726
number samples = 1773
accuracy = 0.879865
precision class 0 = 0.88981
precision class 1 = 0.682353
recall class 0 = 0.982341
recall class 1 = 0.237705
false negative rate = 0.762295
false positive rate = 0.017659
positive prediction rate = 0.047941
AUC of ROC = 0.863127
AUC of PRC = 0.560447
min(+P, Se) = 0.534694

-------------------------------

confusion matrix:
[[1236   21]
 [ 144   48]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.13572199642658234
difference in average predicted and observed risk = 0.0032169964265823248
number samples = 1449
accuracy = 0.886128
precision class 0 = 0.895652
precision class 1 = 0.695652
recall class 0 = 0.983294
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.016706
positive prediction rate = 0.047619
AUC of ROC = 0.86242
AUC of PRC = 0.558793
min(+P, Se) = 0.515625

-------------------------------

confusion matrix:
[[1944   34]
 [ 237   74]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1305440068244934
difference in average predicted and observed risk = -0.00532299317550658
number samples = 2289
accuracy = 0.881608
precision class 0 = 0.891334
precision class 1 = 0.685185
recall class 0 = 0.982811
recall class 1 = 0.237942
false negative rate = 0.762058
false positive rate = 0.017189
positive prediction rate = 0.047182
AUC of ROC = 0.858401
AUC of PRC = 0.5514
min(+P, Se) = 0.524116

-------------------------------

confusion matrix:
[[362   6]
 [ 62  19]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1442990005016327
difference in average predicted and observed risk = -0.036101999498367315
number samples = 449
accuracy = 0.848552
precision class 0 = 0.853774
precision class 1 = 0.76
recall class 0 = 0.983696
recall class 1 = 0.234568
false negative rate = 0.765432
false positive rate = 0.016304
positive prediction rate = 0.055679
AUC of ROC = 0.870035
AUC of PRC = 0.635155
min(+P, Se) = 0.576471

-------------------------------

confusion matrix:
[[274   4]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.12173700332641602
difference in average predicted and observed risk = 0.024334003326416012
number samples = 308
accuracy = 0.918831
precision class 0 = 0.928814
precision class 1 = 0.692308
recall class 0 = 0.985611
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.014388
positive prediction rate = 0.042208
AUC of ROC = 0.892566
AUC of PRC = 0.563891
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[89  1]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11045999825000763
difference in average predicted and observed risk = 0.03829499825000762
number samples = 97
accuracy = 0.927835
precision class 0 = 0.936842
precision class 1 = 0.5
recall class 0 = 0.988889
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.011111
positive prediction rate = 0.020619
AUC of ROC = 0.844444
AUC of PRC = 0.322629
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[69  3]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.16578899323940277
difference in average predicted and observed risk = 0.07718099323940276
number samples = 79
accuracy = 0.911392
precision class 0 = 0.945205
precision class 1 = 0.5
recall class 0 = 0.958333
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.041667
positive prediction rate = 0.075949
AUC of ROC = 0.863095
AUC of PRC = 0.648363
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[2738   48]
 [ 330  106]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.13187900185585022
difference in average predicted and observed risk = -0.003440998144149776
number samples = 3222
accuracy = 0.882682
precision class 0 = 0.892438
precision class 1 = 0.688312
recall class 0 = 0.982771
recall class 1 = 0.243119
false negative rate = 0.756881
false positive rate = 0.017229
positive prediction rate = 0.047796
AUC of ROC = 0.862495
AUC of PRC = 0.559682
min(+P, Se) = 0.52027

-------------------------------

Epoch 00011: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch11.state
Epoch 12/100
 - 822s - loss: 0.2922 - val_loss: 0.2819

==>predicting on train



confusion matrix:
[[6947   89]
 [1002  310]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.11920099705457687
difference in average predicted and observed risk = -0.03796200294542312
number samples = 8348
accuracy = 0.86931
precision class 0 = 0.873946
precision class 1 = 0.776942
recall class 0 = 0.987351
recall class 1 = 0.23628
false negative rate = 0.763719
false positive rate = 0.012649
positive prediction rate = 0.047796
AUC of ROC = 0.862505
AUC of PRC = 0.588298
min(+P, Se) = 0.547655

-------------------------------

confusion matrix:
[[3926   76]
 [ 302  169]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10358799993991852
difference in average predicted and observed risk = -0.0017100000600814846
number samples = 4473
accuracy = 0.915493
precision class 0 = 0.928571
precision class 1 = 0.689796
recall class 0 = 0.981009
recall class 1 = 0.358811
false negative rate = 0.641189
false positive rate = 0.018991
positive prediction rate = 0.054773
AUC of ROC = 0.891135
AUC of PRC = 0.592494
min(+P, Se) = 0.543524

-------------------------------

confusion matrix:
[[1174   21]
 [  90   53]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11395300179719925
difference in average predicted and observed risk = 0.0070770017971992505
number samples = 1338
accuracy = 0.91704
precision class 0 = 0.928797
precision class 1 = 0.716216
recall class 0 = 0.982427
recall class 1 = 0.370629
false negative rate = 0.629371
false positive rate = 0.017573
positive prediction rate = 0.055306
AUC of ROC = 0.888674
AUC of PRC = 0.609559
min(+P, Se) = 0.566434

-------------------------------

confusion matrix:
[[345   5]
 [ 25  14]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10139600187540054
difference in average predicted and observed risk = 0.0011390018754005443
number samples = 389
accuracy = 0.922879
precision class 0 = 0.932432
precision class 1 = 0.736842
recall class 0 = 0.985714
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.014286
positive prediction rate = 0.048843
AUC of ROC = 0.890403
AUC of PRC = 0.589308
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[108   3]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16323800384998322
difference in average predicted and observed risk = -0.00217599615001679
number samples = 133
accuracy = 0.917293
precision class 0 = 0.931035
precision class 1 = 0.823529
recall class 0 = 0.972973
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.027027
positive prediction rate = 0.12782
AUC of ROC = 0.925061
AUC of PRC = 0.767652
min(+P, Se) = 0.708333

-------------------------------

confusion matrix:
[[6887   99]
 [ 762  311]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1097870022058487
difference in average predicted and observed risk = -0.023355997794151317
number samples = 8059
accuracy = 0.893163
precision class 0 = 0.900379
precision class 1 = 0.758537
recall class 0 = 0.985829
recall class 1 = 0.289842
false negative rate = 0.710158
false positive rate = 0.014171
positive prediction rate = 0.050875
AUC of ROC = 0.878806
AUC of PRC = 0.597661
min(+P, Se) = 0.55121

-------------------------------

confusion matrix:
[[5613   95]
 [ 665  249]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11889000236988068
difference in average predicted and observed risk = -0.019134997630119333
number samples = 6622
accuracy = 0.885231
precision class 0 = 0.894075
precision class 1 = 0.723837
recall class 0 = 0.983357
recall class 1 = 0.272429
false negative rate = 0.727571
false positive rate = 0.016643
positive prediction rate = 0.051948
AUC of ROC = 0.870117
AUC of PRC = 0.576362
min(+P, Se) = 0.53224

-------------------------------

confusion matrix:
[[8923  123]
 [1015  348]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.1089399978518486
difference in average predicted and observed risk = -0.022004002148151403
number samples = 10409
accuracy = 0.890672
precision class 0 = 0.897867
precision class 1 = 0.738854
recall class 0 = 0.986403
recall class 1 = 0.255319
false negative rate = 0.744681
false positive rate = 0.013597
positive prediction rate = 0.045249
AUC of ROC = 0.873163
AUC of PRC = 0.571125
min(+P, Se) = 0.525312

-------------------------------

confusion matrix:
[[1607   34]
 [ 270  137]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14057600498199463
difference in average predicted and observed risk = -0.05815399501800536
number samples = 2048
accuracy = 0.851562
precision class 0 = 0.856153
precision class 1 = 0.80117
recall class 0 = 0.979281
recall class 1 = 0.336609
false negative rate = 0.663391
false positive rate = 0.020719
positive prediction rate = 0.083496
AUC of ROC = 0.880111
AUC of PRC = 0.684009
min(+P, Se) = 0.628993

-------------------------------

confusion matrix:
[[1262   20]
 [  82   44]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10611700266599655
difference in average predicted and observed risk = 0.016628002665996552
number samples = 1408
accuracy = 0.927557
precision class 0 = 0.938988
precision class 1 = 0.6875
recall class 0 = 0.984399
recall class 1 = 0.349206
false negative rate = 0.650794
false positive rate = 0.015601
positive prediction rate = 0.045455
AUC of ROC = 0.890851
AUC of PRC = 0.520524
min(+P, Se) = 0.535433

-------------------------------

confusion matrix:
[[289   7]
 [ 30  22]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14398600161075592
difference in average predicted and observed risk = -0.005438998389244082
number samples = 348
accuracy = 0.893678
precision class 0 = 0.905956
precision class 1 = 0.758621
recall class 0 = 0.976351
recall class 1 = 0.423077
false negative rate = 0.576923
false positive rate = 0.023649
positive prediction rate = 0.083333
AUC of ROC = 0.869023
AUC of PRC = 0.635734
min(+P, Se) = 0.584906

-------------------------------

confusion matrix:
[[419  10]
 [ 30   9]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10831400007009506
difference in average predicted and observed risk = 0.024981000070095058
number samples = 468
accuracy = 0.91453
precision class 0 = 0.933185
precision class 1 = 0.473684
recall class 0 = 0.97669
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.02331
positive prediction rate = 0.040598
AUC of ROC = 0.851174
AUC of PRC = 0.492493
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[12500   194]
 [ 1427   560]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11389300227165222
difference in average predicted and observed risk = -0.02145199772834777
number samples = 14681
accuracy = 0.889585
precision class 0 = 0.897537
precision class 1 = 0.742706
recall class 0 = 0.984717
recall class 1 = 0.281832
false negative rate = 0.718168
false positive rate = 0.015283
positive prediction rate = 0.051359
AUC of ROC = 0.874778
AUC of PRC = 0.587485
min(+P, Se) = 0.542526

-------------------------------

==>predicting on validation



confusion matrix:
[[1510   25]
 [ 202   76]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12424500286579132
difference in average predicted and observed risk = -0.02909199713420868
number samples = 1813
accuracy = 0.874793
precision class 0 = 0.882009
precision class 1 = 0.752475
recall class 0 = 0.983713
recall class 1 = 0.273381
false negative rate = 0.726619
false positive rate = 0.016287
positive prediction rate = 0.055709
AUC of ROC = 0.856389
AUC of PRC = 0.586142
min(+P, Se) = 0.539568

-------------------------------

confusion matrix:
[[883  24]
 [ 88  25]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.1057789996266365
difference in average predicted and observed risk = -0.0050050003733634885
number samples = 1020
accuracy = 0.890196
precision class 0 = 0.909372
precision class 1 = 0.510204
recall class 0 = 0.973539
recall class 1 = 0.221239
false negative rate = 0.778761
false positive rate = 0.026461
positive prediction rate = 0.048039
AUC of ROC = 0.860661
AUC of PRC = 0.484422
min(+P, Se) = 0.482759

-------------------------------

confusion matrix:
[[243   8]
 [ 21  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1264140009880066
difference in average predicted and observed risk = 0.0071160009880065905
number samples = 285
accuracy = 0.898246
precision class 0 = 0.920455
precision class 1 = 0.619048
recall class 0 = 0.968127
recall class 1 = 0.382353
false negative rate = 0.617647
false positive rate = 0.031873
positive prediction rate = 0.073684
AUC of ROC = 0.893251
AUC of PRC = 0.601495
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09381599724292755
difference in average predicted and observed risk = 0.004071997242927547
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.746479
AUC of PRC = 0.383535
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1800830066204071
difference in average predicted and observed risk = 0.026237006620407094
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1495   34]
 [ 173   71]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11706600338220596
difference in average predicted and observed risk = -0.02055399661779403
number samples = 1773
accuracy = 0.883249
precision class 0 = 0.896283
precision class 1 = 0.67619
recall class 0 = 0.977763
recall class 1 = 0.290984
false negative rate = 0.709016
false positive rate = 0.022237
positive prediction rate = 0.059222
AUC of ROC = 0.861964
AUC of PRC = 0.561076
min(+P, Se) = 0.524194

-------------------------------

confusion matrix:
[[1231   26]
 [ 144   48]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.1198199987411499
difference in average predicted and observed risk = -0.01268500125885011
number samples = 1449
accuracy = 0.882678
precision class 0 = 0.895273
precision class 1 = 0.648649
recall class 0 = 0.979316
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.020684
positive prediction rate = 0.05107
AUC of ROC = 0.861024
AUC of PRC = 0.552348
min(+P, Se) = 0.510204

-------------------------------

confusion matrix:
[[1937   41]
 [ 227   84]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11577899754047394
difference in average predicted and observed risk = -0.02008800245952605
number samples = 2289
accuracy = 0.882918
precision class 0 = 0.895102
precision class 1 = 0.672
recall class 0 = 0.979272
recall class 1 = 0.270096
false negative rate = 0.729904
false positive rate = 0.020728
positive prediction rate = 0.054609
AUC of ROC = 0.8591
AUC of PRC = 0.551181
min(+P, Se) = 0.522796

-------------------------------

confusion matrix:
[[358  10]
 [ 60  21]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13373500108718872
difference in average predicted and observed risk = -0.046665998912811285
number samples = 449
accuracy = 0.844098
precision class 0 = 0.856459
precision class 1 = 0.677419
recall class 0 = 0.972826
recall class 1 = 0.259259
false negative rate = 0.740741
false positive rate = 0.027174
positive prediction rate = 0.069042
AUC of ROC = 0.868257
AUC of PRC = 0.631945
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[273   5]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11190900206565857
difference in average predicted and observed risk = 0.014506002065658566
number samples = 308
accuracy = 0.918831
precision class 0 = 0.931741
precision class 1 = 0.666667
recall class 0 = 0.982014
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.017986
positive prediction rate = 0.048701
AUC of ROC = 0.885012
AUC of PRC = 0.550966
min(+P, Se) = 0.46875

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10329999774694443
difference in average predicted and observed risk = 0.03113499774694442
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.84127
AUC of PRC = 0.316968
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14713700115680695
difference in average predicted and observed risk = 0.05852900115680694
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.839286
AUC of PRC = 0.623567
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[2726   60]
 [ 317  119]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11830499768257141
difference in average predicted and observed risk = -0.017015002317428585
number samples = 3222
accuracy = 0.882992
precision class 0 = 0.895826
precision class 1 = 0.664804
recall class 0 = 0.978464
recall class 1 = 0.272936
false negative rate = 0.727064
false positive rate = 0.021536
positive prediction rate = 0.055556
AUC of ROC = 0.861157
AUC of PRC = 0.557233
min(+P, Se) = 0.516055

-------------------------------

Epoch 00012: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch12.state
Epoch 13/100
 - 823s - loss: 0.2930 - val_loss: 0.2821

==>predicting on train



confusion matrix:
[[6954   82]
 [ 996  316]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.14033499360084534
difference in average predicted and observed risk = -0.01682800639915466
number samples = 8348
accuracy = 0.870867
precision class 0 = 0.874717
precision class 1 = 0.79397
recall class 0 = 0.988346
recall class 1 = 0.240854
false negative rate = 0.759146
false positive rate = 0.011654
positive prediction rate = 0.047676
AUC of ROC = 0.863815
AUC of PRC = 0.594756
min(+P, Se) = 0.54858

-------------------------------

confusion matrix:
[[3931   71]
 [ 296  175]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.12337099760770798
difference in average predicted and observed risk = 0.018072997607707975
number samples = 4473
accuracy = 0.917952
precision class 0 = 0.929974
precision class 1 = 0.711382
recall class 0 = 0.982259
recall class 1 = 0.37155
false negative rate = 0.62845
false positive rate = 0.017741
positive prediction rate = 0.054997
AUC of ROC = 0.891157
AUC of PRC = 0.598236
min(+P, Se) = 0.545648

-------------------------------

confusion matrix:
[[1175   20]
 [  90   53]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.13420599699020386
difference in average predicted and observed risk = 0.02732999699020386
number samples = 1338
accuracy = 0.917788
precision class 0 = 0.928854
precision class 1 = 0.726027
recall class 0 = 0.983264
recall class 1 = 0.370629
false negative rate = 0.629371
false positive rate = 0.016736
positive prediction rate = 0.054559
AUC of ROC = 0.888504
AUC of PRC = 0.588726
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[346   4]
 [ 24  15]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.12235300242900848
difference in average predicted and observed risk = 0.022096002429008485
number samples = 389
accuracy = 0.928021
precision class 0 = 0.935135
precision class 1 = 0.789474
recall class 0 = 0.988571
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.011429
positive prediction rate = 0.048843
AUC of ROC = 0.892234
AUC of PRC = 0.587701
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[107   4]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.18124499917030334
difference in average predicted and observed risk = 0.01583099917030334
number samples = 133
accuracy = 0.902256
precision class 0 = 0.922414
precision class 1 = 0.764706
recall class 0 = 0.963964
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.036036
positive prediction rate = 0.12782
AUC of ROC = 0.936937
AUC of PRC = 0.784342
min(+P, Se) = 0.73913

-------------------------------

confusion matrix:
[[6891   95]
 [ 759  314]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.130172997713089
difference in average predicted and observed risk = -0.002970002286911022
number samples = 8059
accuracy = 0.894032
precision class 0 = 0.900784
precision class 1 = 0.767726
recall class 0 = 0.986401
recall class 1 = 0.292637
false negative rate = 0.707363
false positive rate = 0.013599
positive prediction rate = 0.050751
AUC of ROC = 0.879253
AUC of PRC = 0.600579
min(+P, Se) = 0.55452

-------------------------------

confusion matrix:
[[5622   86]
 [ 656  258]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.1397700011730194
difference in average predicted and observed risk = 0.0017450011730194004
number samples = 6622
accuracy = 0.887949
precision class 0 = 0.895508
precision class 1 = 0.75
recall class 0 = 0.984933
recall class 1 = 0.282276
false negative rate = 0.717724
false positive rate = 0.015067
positive prediction rate = 0.051948
AUC of ROC = 0.87056
AUC of PRC = 0.582696
min(+P, Se) = 0.539387

-------------------------------

confusion matrix:
[[8932  114]
 [1011  352]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.13001300394535065
difference in average predicted and observed risk = -0.0009309960546493579
number samples = 10409
accuracy = 0.89192
precision class 0 = 0.89832
precision class 1 = 0.755365
recall class 0 = 0.987398
recall class 1 = 0.258254
false negative rate = 0.741746
false positive rate = 0.012602
positive prediction rate = 0.044769
AUC of ROC = 0.873893
AUC of PRC = 0.576203
min(+P, Se) = 0.532649

-------------------------------

confusion matrix:
[[1609   32]
 [ 268  139]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.15963199734687805
difference in average predicted and observed risk = -0.03909800265312194
number samples = 2048
accuracy = 0.853516
precision class 0 = 0.857219
precision class 1 = 0.812865
recall class 0 = 0.9805
recall class 1 = 0.341523
false negative rate = 0.658477
false positive rate = 0.0195
positive prediction rate = 0.083496
AUC of ROC = 0.880111
AUC of PRC = 0.688013
min(+P, Se) = 0.628993

-------------------------------

confusion matrix:
[[1263   19]
 [  79   47]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.12578800320625305
difference in average predicted and observed risk = 0.03629900320625305
number samples = 1408
accuracy = 0.930398
precision class 0 = 0.941133
precision class 1 = 0.712121
recall class 0 = 0.985179
recall class 1 = 0.373016
false negative rate = 0.626984
false positive rate = 0.014821
positive prediction rate = 0.046875
AUC of ROC = 0.886536
AUC of PRC = 0.519339
min(+P, Se) = 0.534884

-------------------------------

confusion matrix:
[[289   7]
 [ 30  22]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.16199800372123718
difference in average predicted and observed risk = 0.01257300372123718
number samples = 348
accuracy = 0.893678
precision class 0 = 0.905956
precision class 1 = 0.758621
recall class 0 = 0.976351
recall class 1 = 0.423077
false negative rate = 0.576923
false positive rate = 0.023649
positive prediction rate = 0.083333
AUC of ROC = 0.870387
AUC of PRC = 0.629517
min(+P, Se) = 0.557692

-------------------------------

confusion matrix:
[[420   9]
 [ 27  12]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.1301400065422058
difference in average predicted and observed risk = 0.046807006542205806
number samples = 468
accuracy = 0.923077
precision class 0 = 0.939597
precision class 1 = 0.571429
recall class 0 = 0.979021
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.020979
positive prediction rate = 0.044872
AUC of ROC = 0.857689
AUC of PRC = 0.504067
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[12513   181]
 [ 1415   572]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.13450199365615845
difference in average predicted and observed risk = -0.0008430063438415458
number samples = 14681
accuracy = 0.891288
precision class 0 = 0.898406
precision class 1 = 0.759628
recall class 0 = 0.985741
recall class 1 = 0.287871
false negative rate = 0.712129
false positive rate = 0.014259
positive prediction rate = 0.051291
AUC of ROC = 0.875237
AUC of PRC = 0.592095
min(+P, Se) = 0.547559

-------------------------------

==>predicting on validation



confusion matrix:
[[1513   22]
 [ 200   78]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.14520399272441864
difference in average predicted and observed risk = -0.008133007275581361
number samples = 1813
accuracy = 0.877551
precision class 0 = 0.883246
precision class 1 = 0.78
recall class 0 = 0.985668
recall class 1 = 0.280576
false negative rate = 0.719424
false positive rate = 0.014332
positive prediction rate = 0.055157
AUC of ROC = 0.856713
AUC of PRC = 0.586522
min(+P, Se) = 0.532374

-------------------------------

confusion matrix:
[[885  22]
 [ 87  26]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.12527699768543243
difference in average predicted and observed risk = 0.01449299768543244
number samples = 1020
accuracy = 0.893137
precision class 0 = 0.910494
precision class 1 = 0.541667
recall class 0 = 0.975744
recall class 1 = 0.230089
false negative rate = 0.769912
false positive rate = 0.024256
positive prediction rate = 0.047059
AUC of ROC = 0.856865
AUC of PRC = 0.4687
min(+P, Se) = 0.486726

-------------------------------

confusion matrix:
[[244   7]
 [ 22  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.14362600445747375
difference in average predicted and observed risk = 0.024328004457473754
number samples = 285
accuracy = 0.898246
precision class 0 = 0.917293
precision class 1 = 0.631579
recall class 0 = 0.972112
recall class 1 = 0.352941
false negative rate = 0.647059
false positive rate = 0.027888
positive prediction rate = 0.066667
AUC of ROC = 0.890321
AUC of PRC = 0.590057
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.12092000246047974
difference in average predicted and observed risk = 0.031176002460479732
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.732394
AUC of PRC = 0.25536
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.21039199829101562
difference in average predicted and observed risk = 0.056545998291015614
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1498   31]
 [ 177   67]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1365160048007965
difference in average predicted and observed risk = -0.0011039951992034835
number samples = 1773
accuracy = 0.882685
precision class 0 = 0.894328
precision class 1 = 0.683673
recall class 0 = 0.979725
recall class 1 = 0.27459
false negative rate = 0.72541
false positive rate = 0.020275
positive prediction rate = 0.055274
AUC of ROC = 0.858211
AUC of PRC = 0.550632
min(+P, Se) = 0.528689

-------------------------------

confusion matrix:
[[1234   23]
 [ 138   54]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.14135999977588654
difference in average predicted and observed risk = 0.008854999775886524
number samples = 1449
accuracy = 0.888889
precision class 0 = 0.899417
precision class 1 = 0.701299
recall class 0 = 0.981702
recall class 1 = 0.28125
false negative rate = 0.71875
false positive rate = 0.018298
positive prediction rate = 0.05314
AUC of ROC = 0.861849
AUC of PRC = 0.551467
min(+P, Se) = 0.505208

-------------------------------

confusion matrix:
[[1938   40]
 [ 225   86]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.13693900406360626
difference in average predicted and observed risk = 0.0010720040636062744
number samples = 2289
accuracy = 0.884229
precision class 0 = 0.895978
precision class 1 = 0.68254
recall class 0 = 0.979778
recall class 1 = 0.276527
false negative rate = 0.723473
false positive rate = 0.020222
positive prediction rate = 0.055046
AUC of ROC = 0.856902
AUC of PRC = 0.541847
min(+P, Se) = 0.517685

-------------------------------

confusion matrix:
[[361   7]
 [ 60  21]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.15355800092220306
difference in average predicted and observed risk = -0.026842999077796942
number samples = 449
accuracy = 0.85078
precision class 0 = 0.857482
precision class 1 = 0.75
recall class 0 = 0.980978
recall class 1 = 0.259259
false negative rate = 0.740741
false positive rate = 0.019022
positive prediction rate = 0.062361
AUC of ROC = 0.865607
AUC of PRC = 0.632492
min(+P, Se) = 0.578313

-------------------------------

confusion matrix:
[[275   3]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.1296759992837906
difference in average predicted and observed risk = 0.032272999283790585
number samples = 308
accuracy = 0.925325
precision class 0 = 0.932203
precision class 1 = 0.769231
recall class 0 = 0.989209
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.010791
positive prediction rate = 0.042208
AUC of ROC = 0.883453
AUC of PRC = 0.552083
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.12032599747180939
difference in average predicted and observed risk = 0.04816099747180938
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.844444
AUC of PRC = 0.319751
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.16280299425125122
difference in average predicted and observed risk = 0.07419499425125121
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.845238
AUC of PRC = 0.638126
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[2732   54]
 [ 315  121]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.13869400322437286
difference in average predicted and observed risk = 0.003374003224372868
number samples = 3222
accuracy = 0.885475
precision class 0 = 0.89662
precision class 1 = 0.691429
recall class 0 = 0.980617
recall class 1 = 0.277523
false negative rate = 0.722477
false positive rate = 0.019383
positive prediction rate = 0.054314
AUC of ROC = 0.859427
AUC of PRC = 0.550337
min(+P, Se) = 0.518349

-------------------------------

Epoch 00013: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch13.state
Epoch 14/100
 - 821s - loss: 0.2912 - val_loss: 0.2810

==>predicting on train



confusion matrix:
[[6933  103]
 [ 982  330]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13614299893379211
difference in average predicted and observed risk = -0.021020001066207883
number samples = 8348
accuracy = 0.870029
precision class 0 = 0.875932
precision class 1 = 0.762125
recall class 0 = 0.985361
recall class 1 = 0.251524
false negative rate = 0.748476
false positive rate = 0.014639
positive prediction rate = 0.051869
AUC of ROC = 0.864253
AUC of PRC = 0.588807
min(+P, Se) = 0.541508

-------------------------------

confusion matrix:
[[3933   69]
 [ 298  173]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11350899934768677
difference in average predicted and observed risk = 0.008210999347686765
number samples = 4473
accuracy = 0.917952
precision class 0 = 0.929567
precision class 1 = 0.714876
recall class 0 = 0.982759
recall class 1 = 0.367304
false negative rate = 0.632696
false positive rate = 0.017241
positive prediction rate = 0.054102
AUC of ROC = 0.892345
AUC of PRC = 0.593595
min(+P, Se) = 0.536998

-------------------------------

confusion matrix:
[[1174   21]
 [  92   51]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.12438300251960754
difference in average predicted and observed risk = 0.017507002519607545
number samples = 1338
accuracy = 0.915546
precision class 0 = 0.92733
precision class 1 = 0.708333
recall class 0 = 0.982427
recall class 1 = 0.356643
false negative rate = 0.643357
false positive rate = 0.017573
positive prediction rate = 0.053812
AUC of ROC = 0.892735
AUC of PRC = 0.591067
min(+P, Se) = 0.552448

-------------------------------

confusion matrix:
[[346   4]
 [ 25  14]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.11149100214242935
difference in average predicted and observed risk = 0.011234002142429353
number samples = 389
accuracy = 0.92545
precision class 0 = 0.932615
precision class 1 = 0.777778
recall class 0 = 0.988571
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.011429
positive prediction rate = 0.046272
AUC of ROC = 0.891062
AUC of PRC = 0.588359
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.17136600613594055
difference in average predicted and observed risk = 0.005952006135940546
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.938165
AUC of PRC = 0.822489
min(+P, Se) = 0.727273

-------------------------------

confusion matrix:
[[6893   93]
 [ 757  316]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12233699858188629
difference in average predicted and observed risk = -0.01080600141811372
number samples = 8059
accuracy = 0.894528
precision class 0 = 0.901046
precision class 1 = 0.772616
recall class 0 = 0.986688
recall class 1 = 0.294501
false negative rate = 0.705499
false positive rate = 0.013312
positive prediction rate = 0.050751
AUC of ROC = 0.880492
AUC of PRC = 0.597503
min(+P, Se) = 0.541473

-------------------------------

confusion matrix:
[[5602  106]
 [ 647  267]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.13454000651836395
difference in average predicted and observed risk = -0.003484993481636056
number samples = 6622
accuracy = 0.886288
precision class 0 = 0.896463
precision class 1 = 0.715818
recall class 0 = 0.98143
recall class 1 = 0.292123
false negative rate = 0.707877
false positive rate = 0.01857
positive prediction rate = 0.056327
AUC of ROC = 0.873123
AUC of PRC = 0.580982
min(+P, Se) = 0.535519

-------------------------------

confusion matrix:
[[8918  128]
 [1004  359]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.12350600212812424
difference in average predicted and observed risk = -0.007437997871875768
number samples = 10409
accuracy = 0.891248
precision class 0 = 0.898811
precision class 1 = 0.737166
recall class 0 = 0.98585
recall class 1 = 0.26339
false negative rate = 0.73661
false positive rate = 0.01415
positive prediction rate = 0.046786
AUC of ROC = 0.875315
AUC of PRC = 0.573817
min(+P, Se) = 0.525312

-------------------------------

confusion matrix:
[[1613   28]
 [ 258  149]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.15312500298023224
difference in average predicted and observed risk = -0.04560499701976775
number samples = 2048
accuracy = 0.860352
precision class 0 = 0.862106
precision class 1 = 0.841808
recall class 0 = 0.982937
recall class 1 = 0.366093
false negative rate = 0.633907
false positive rate = 0.017063
positive prediction rate = 0.086426
AUC of ROC = 0.884573
AUC of PRC = 0.694193
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[1257   25]
 [  84   42]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11896900087594986
difference in average predicted and observed risk = 0.02948000087594986
number samples = 1408
accuracy = 0.922585
precision class 0 = 0.93736
precision class 1 = 0.626866
recall class 0 = 0.980499
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.019501
positive prediction rate = 0.047585
AUC of ROC = 0.88185
AUC of PRC = 0.49263
min(+P, Se) = 0.492754

-------------------------------

confusion matrix:
[[288   8]
 [ 31  21]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1554429978132248
difference in average predicted and observed risk = 0.00601799781322479
number samples = 348
accuracy = 0.887931
precision class 0 = 0.902821
precision class 1 = 0.724138
recall class 0 = 0.972973
recall class 1 = 0.403846
false negative rate = 0.596154
false positive rate = 0.027027
positive prediction rate = 0.083333
AUC of ROC = 0.871557
AUC of PRC = 0.631605
min(+P, Se) = 0.622642

-------------------------------

confusion matrix:
[[419  10]
 [ 27  12]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11977999657392502
difference in average predicted and observed risk = 0.036446996573925014
number samples = 468
accuracy = 0.92094
precision class 0 = 0.939462
precision class 1 = 0.545455
recall class 0 = 0.97669
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.02331
positive prediction rate = 0.047009
AUC of ROC = 0.856494
AUC of PRC = 0.505169
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[12495   199]
 [ 1404   583]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12784099578857422
difference in average predicted and observed risk = -0.007504004211425774
number samples = 14681
accuracy = 0.890811
precision class 0 = 0.898986
precision class 1 = 0.745524
recall class 0 = 0.984323
recall class 1 = 0.293407
false negative rate = 0.706593
false positive rate = 0.015677
positive prediction rate = 0.053266
AUC of ROC = 0.876896
AUC of PRC = 0.58941
min(+P, Se) = 0.5385

-------------------------------

==>predicting on validation



confusion matrix:
[[1512   23]
 [ 198   80]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13979500532150269
difference in average predicted and observed risk = -0.013541994678497316
number samples = 1813
accuracy = 0.878103
precision class 0 = 0.884211
precision class 1 = 0.776699
recall class 0 = 0.985016
recall class 1 = 0.28777
false negative rate = 0.71223
false positive rate = 0.014984
positive prediction rate = 0.056812
AUC of ROC = 0.857076
AUC of PRC = 0.597193
min(+P, Se) = 0.553571

-------------------------------

confusion matrix:
[[886  21]
 [ 85  28]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11702200025320053
difference in average predicted and observed risk = 0.006238000253200537
number samples = 1020
accuracy = 0.896078
precision class 0 = 0.912461
precision class 1 = 0.571429
recall class 0 = 0.976847
recall class 1 = 0.247788
false negative rate = 0.752212
false positive rate = 0.023153
positive prediction rate = 0.048039
AUC of ROC = 0.850933
AUC of PRC = 0.456461
min(+P, Se) = 0.45614

-------------------------------

confusion matrix:
[[243   8]
 [ 21  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13641299307346344
difference in average predicted and observed risk = 0.01711499307346344
number samples = 285
accuracy = 0.898246
precision class 0 = 0.920455
precision class 1 = 0.619048
recall class 0 = 0.968127
recall class 1 = 0.382353
false negative rate = 0.617647
false positive rate = 0.031873
positive prediction rate = 0.073684
AUC of ROC = 0.901922
AUC of PRC = 0.623996
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10849999636411667
difference in average predicted and observed risk = 0.018755996364116664
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.770624
AUC of PRC = 0.380914
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19116300344467163
difference in average predicted and observed risk = 0.03731700344467162
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1497   32]
 [ 173   71]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12955400347709656
difference in average predicted and observed risk = -0.008065996522903435
number samples = 1773
accuracy = 0.884377
precision class 0 = 0.896407
precision class 1 = 0.68932
recall class 0 = 0.979071
recall class 1 = 0.290984
false negative rate = 0.709016
false positive rate = 0.020929
positive prediction rate = 0.058094
AUC of ROC = 0.85742
AUC of PRC = 0.550176
min(+P, Se) = 0.516393

-------------------------------

confusion matrix:
[[1234   23]
 [ 138   54]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.13486699759960175
difference in average predicted and observed risk = 0.002361997599601734
number samples = 1449
accuracy = 0.888889
precision class 0 = 0.899417
precision class 1 = 0.701299
recall class 0 = 0.981702
recall class 1 = 0.28125
false negative rate = 0.71875
false positive rate = 0.018298
positive prediction rate = 0.05314
AUC of ROC = 0.863684
AUC of PRC = 0.560702
min(+P, Se) = 0.510417

-------------------------------

confusion matrix:
[[1942   36]
 [ 221   90]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.13006800413131714
difference in average predicted and observed risk = -0.005798995868682849
number samples = 2289
accuracy = 0.887724
precision class 0 = 0.897827
precision class 1 = 0.714286
recall class 0 = 0.9818
recall class 1 = 0.289389
false negative rate = 0.710611
false positive rate = 0.0182
positive prediction rate = 0.055046
AUC of ROC = 0.85514
AUC of PRC = 0.547823
min(+P, Se) = 0.519231

-------------------------------

confusion matrix:
[[360   8]
 [ 60  21]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14755600690841675
difference in average predicted and observed risk = -0.03284499309158326
number samples = 449
accuracy = 0.848552
precision class 0 = 0.857143
precision class 1 = 0.724138
recall class 0 = 0.978261
recall class 1 = 0.259259
false negative rate = 0.740741
false positive rate = 0.021739
positive prediction rate = 0.064588
AUC of ROC = 0.867485
AUC of PRC = 0.63466
min(+P, Se) = 0.580247

-------------------------------

confusion matrix:
[[272   6]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.12102500349283218
difference in average predicted and observed risk = 0.02362200349283218
number samples = 308
accuracy = 0.915584
precision class 0 = 0.931507
precision class 1 = 0.625
recall class 0 = 0.978417
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.021583
positive prediction rate = 0.051948
AUC of ROC = 0.885971
AUC of PRC = 0.552262
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11280599981546402
difference in average predicted and observed risk = 0.04064099981546401
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.850794
AUC of PRC = 0.330433
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[70  2]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.16361400485038757
difference in average predicted and observed risk = 0.07500600485038757
number samples = 79
accuracy = 0.924051
precision class 0 = 0.945946
precision class 1 = 0.6
recall class 0 = 0.972222
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.027778
positive prediction rate = 0.063291
AUC of ROC = 0.869048
AUC of PRC = 0.644805
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[2731   55]
 [ 311  125]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.1319430023431778
difference in average predicted and observed risk = -0.0033769976568222004
number samples = 3222
accuracy = 0.886406
precision class 0 = 0.897765
precision class 1 = 0.694444
recall class 0 = 0.980258
recall class 1 = 0.286697
false negative rate = 0.713303
false positive rate = 0.019742
positive prediction rate = 0.055866
AUC of ROC = 0.859447
AUC of PRC = 0.555088
min(+P, Se) = 0.512304

-------------------------------

Epoch 00014: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch14.state
Epoch 15/100
 - 819s - loss: 0.2930 - val_loss: 0.2836

==>predicting on train



confusion matrix:
[[6946   90]
 [ 982  330]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13066799938678741
difference in average predicted and observed risk = -0.026495000613212583
number samples = 8348
accuracy = 0.871586
precision class 0 = 0.876135
precision class 1 = 0.785714
recall class 0 = 0.987209
recall class 1 = 0.251524
false negative rate = 0.748476
false positive rate = 0.012791
positive prediction rate = 0.050311
AUC of ROC = 0.862725
AUC of PRC = 0.591339
min(+P, Se) = 0.554878

-------------------------------

confusion matrix:
[[3921   81]
 [ 291  180]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11215999722480774
difference in average predicted and observed risk = 0.0068619972248077366
number samples = 4473
accuracy = 0.916834
precision class 0 = 0.930912
precision class 1 = 0.689655
recall class 0 = 0.97976
recall class 1 = 0.382166
false negative rate = 0.617834
false positive rate = 0.02024
positive prediction rate = 0.05835
AUC of ROC = 0.891963
AUC of PRC = 0.598791
min(+P, Se) = 0.545648

-------------------------------

confusion matrix:
[[1172   23]
 [  86   57]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.12226100265979767
difference in average predicted and observed risk = 0.01538500265979767
number samples = 1338
accuracy = 0.918535
precision class 0 = 0.931638
precision class 1 = 0.7125
recall class 0 = 0.980753
recall class 1 = 0.398601
false negative rate = 0.601399
false positive rate = 0.019247
positive prediction rate = 0.059791
AUC of ROC = 0.893607
AUC of PRC = 0.598723
min(+P, Se) = 0.566434

-------------------------------

confusion matrix:
[[344   6]
 [ 21  18]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.11029700189828873
difference in average predicted and observed risk = 0.010040001898288728
number samples = 389
accuracy = 0.930591
precision class 0 = 0.942466
precision class 1 = 0.75
recall class 0 = 0.982857
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.017143
positive prediction rate = 0.061697
AUC of ROC = 0.885275
AUC of PRC = 0.586799
min(+P, Se) = 0.65

-------------------------------

confusion matrix:
[[107   4]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1708430051803589
difference in average predicted and observed risk = 0.005429005180358881
number samples = 133
accuracy = 0.917293
precision class 0 = 0.938596
precision class 1 = 0.789474
recall class 0 = 0.963964
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.036036
positive prediction rate = 0.142857
AUC of ROC = 0.92588
AUC of PRC = 0.806115
min(+P, Se) = 0.727273

-------------------------------

confusion matrix:
[[6884  102]
 [ 740  333]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11932700127363205
difference in average predicted and observed risk = -0.013815998726367962
number samples = 8059
accuracy = 0.895521
precision class 0 = 0.902938
precision class 1 = 0.765517
recall class 0 = 0.985399
recall class 1 = 0.310345
false negative rate = 0.689655
false positive rate = 0.014601
positive prediction rate = 0.053977
AUC of ROC = 0.879714
AUC of PRC = 0.600892
min(+P, Se) = 0.553588

-------------------------------

confusion matrix:
[[5606  102]
 [ 647  267]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12987899780273438
difference in average predicted and observed risk = -0.008146002197265634
number samples = 6622
accuracy = 0.886892
precision class 0 = 0.89653
precision class 1 = 0.723577
recall class 0 = 0.98213
recall class 1 = 0.292123
false negative rate = 0.707877
false positive rate = 0.01787
positive prediction rate = 0.055723
AUC of ROC = 0.870832
AUC of PRC = 0.581374
min(+P, Se) = 0.541575

-------------------------------

confusion matrix:
[[8914  132]
 [ 988  375]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11924300342798233
difference in average predicted and observed risk = -0.011700996572017675
number samples = 10409
accuracy = 0.892401
precision class 0 = 0.900222
precision class 1 = 0.739645
recall class 0 = 0.985408
recall class 1 = 0.275128
false negative rate = 0.724872
false positive rate = 0.014592
positive prediction rate = 0.048708
AUC of ROC = 0.873588
AUC of PRC = 0.575632
min(+P, Se) = 0.532553

-------------------------------

confusion matrix:
[[1609   32]
 [ 260  147]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.15056699514389038
difference in average predicted and observed risk = -0.04816300485610961
number samples = 2048
accuracy = 0.857422
precision class 0 = 0.860888
precision class 1 = 0.821229
recall class 0 = 0.9805
recall class 1 = 0.361179
false negative rate = 0.638821
false positive rate = 0.0195
positive prediction rate = 0.087402
AUC of ROC = 0.883178
AUC of PRC = 0.693215
min(+P, Se) = 0.636364

-------------------------------

confusion matrix:
[[1260   22]
 [  79   47]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11674199998378754
difference in average predicted and observed risk = 0.027252999983787538
number samples = 1408
accuracy = 0.928267
precision class 0 = 0.941001
precision class 1 = 0.681159
recall class 0 = 0.982839
recall class 1 = 0.373016
false negative rate = 0.626984
false positive rate = 0.017161
positive prediction rate = 0.049006
AUC of ROC = 0.884698
AUC of PRC = 0.510386
min(+P, Se) = 0.522727

-------------------------------

confusion matrix:
[[287   9]
 [ 33  19]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1511469930410385
difference in average predicted and observed risk = 0.001721993041038511
number samples = 348
accuracy = 0.87931
precision class 0 = 0.896875
precision class 1 = 0.678571
recall class 0 = 0.969595
recall class 1 = 0.365385
false negative rate = 0.634615
false positive rate = 0.030405
positive prediction rate = 0.08046
AUC of ROC = 0.869738
AUC of PRC = 0.631412
min(+P, Se) = 0.596154

-------------------------------

confusion matrix:
[[420   9]
 [ 27  12]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11792399734258652
difference in average predicted and observed risk = 0.03459099734258651
number samples = 468
accuracy = 0.923077
precision class 0 = 0.939597
precision class 1 = 0.571429
recall class 0 = 0.979021
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.020979
positive prediction rate = 0.044872
AUC of ROC = 0.855717
AUC of PRC = 0.489464
min(+P, Se) = 0.488372

-------------------------------

confusion matrix:
[[12490   204]
 [ 1387   600]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12408699840307236
difference in average predicted and observed risk = -0.011258001596927636
number samples = 14681
accuracy = 0.891629
precision class 0 = 0.90005
precision class 1 = 0.746269
recall class 0 = 0.983929
recall class 1 = 0.301963
false negative rate = 0.698037
false positive rate = 0.016071
positive prediction rate = 0.054765
AUC of ROC = 0.87554
AUC of PRC = 0.591709
min(+P, Se) = 0.548014

-------------------------------

==>predicting on validation



confusion matrix:
[[1505   30]
 [ 200   78]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13550500571727753
difference in average predicted and observed risk = -0.017831994282722474
number samples = 1813
accuracy = 0.873138
precision class 0 = 0.882698
precision class 1 = 0.722222
recall class 0 = 0.980456
recall class 1 = 0.280576
false negative rate = 0.719424
false positive rate = 0.019544
positive prediction rate = 0.05957
AUC of ROC = 0.853565
AUC of PRC = 0.590267
min(+P, Se) = 0.564748

-------------------------------

confusion matrix:
[[883  24]
 [ 84  29]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.1141510009765625
difference in average predicted and observed risk = 0.0033670009765625064
number samples = 1020
accuracy = 0.894118
precision class 0 = 0.913133
precision class 1 = 0.54717
recall class 0 = 0.973539
recall class 1 = 0.256637
false negative rate = 0.743363
false positive rate = 0.026461
positive prediction rate = 0.051961
AUC of ROC = 0.848426
AUC of PRC = 0.453335
min(+P, Se) = 0.452174

-------------------------------

confusion matrix:
[[243   8]
 [ 23  11]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13325800001621246
difference in average predicted and observed risk = 0.013960000016212462
number samples = 285
accuracy = 0.891228
precision class 0 = 0.913534
precision class 1 = 0.578947
recall class 0 = 0.968127
recall class 1 = 0.323529
false negative rate = 0.676471
false positive rate = 0.031873
positive prediction rate = 0.066667
AUC of ROC = 0.883876
AUC of PRC = 0.598102
min(+P, Se) = 0.564103

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10694099962711334
difference in average predicted and observed risk = 0.017196999627113338
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.792757
AUC of PRC = 0.410629
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1753229945898056
difference in average predicted and observed risk = 0.021476994589805593
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1491   38]
 [ 175   69]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12572899460792542
difference in average predicted and observed risk = -0.011891005392074577
number samples = 1773
accuracy = 0.879865
precision class 0 = 0.894958
precision class 1 = 0.64486
recall class 0 = 0.975147
recall class 1 = 0.282787
false negative rate = 0.717213
false positive rate = 0.024853
positive prediction rate = 0.06035
AUC of ROC = 0.853668
AUC of PRC = 0.548637
min(+P, Se) = 0.526515

-------------------------------

confusion matrix:
[[1230   27]
 [ 139   53]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.13117000460624695
difference in average predicted and observed risk = -0.0013349953937530634
number samples = 1449
accuracy = 0.885438
precision class 0 = 0.898466
precision class 1 = 0.6625
recall class 0 = 0.97852
recall class 1 = 0.276042
false negative rate = 0.723958
false positive rate = 0.02148
positive prediction rate = 0.05521
AUC of ROC = 0.858289
AUC of PRC = 0.549503
min(+P, Se) = 0.536458

-------------------------------

confusion matrix:
[[1931   47]
 [ 224   87]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12609900534152985
difference in average predicted and observed risk = -0.009767994658470142
number samples = 2289
accuracy = 0.881608
precision class 0 = 0.896056
precision class 1 = 0.649254
recall class 0 = 0.976239
recall class 1 = 0.279743
false negative rate = 0.720257
false positive rate = 0.023761
positive prediction rate = 0.058541
AUC of ROC = 0.850219
AUC of PRC = 0.538317
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[361   7]
 [ 60  21]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14476299285888672
difference in average predicted and observed risk = -0.03563800714111329
number samples = 449
accuracy = 0.85078
precision class 0 = 0.857482
precision class 1 = 0.75
recall class 0 = 0.980978
recall class 1 = 0.259259
false negative rate = 0.740741
false positive rate = 0.019022
positive prediction rate = 0.062361
AUC of ROC = 0.870773
AUC of PRC = 0.6488
min(+P, Se) = 0.592593

-------------------------------

confusion matrix:
[[272   6]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11617200076580048
difference in average predicted and observed risk = 0.018769000765800473
number samples = 308
accuracy = 0.912338
precision class 0 = 0.928328
precision class 1 = 0.6
recall class 0 = 0.978417
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.021583
positive prediction rate = 0.048701
AUC of ROC = 0.878897
AUC of PRC = 0.543091
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11332199722528458
difference in average predicted and observed risk = 0.04115699722528457
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.868254
AUC of PRC = 0.34762
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[70  2]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15912200510501862
difference in average predicted and observed risk = 0.07051400510501861
number samples = 79
accuracy = 0.924051
precision class 0 = 0.945946
precision class 1 = 0.6
recall class 0 = 0.972222
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.027778
positive prediction rate = 0.063291
AUC of ROC = 0.835317
AUC of PRC = 0.643275
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[2721   65]
 [ 314  122]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.1281760036945343
difference in average predicted and observed risk = -0.007143996305465694
number samples = 3222
accuracy = 0.882371
precision class 0 = 0.89654
precision class 1 = 0.652406
recall class 0 = 0.976669
recall class 1 = 0.279817
false negative rate = 0.720183
false positive rate = 0.023331
positive prediction rate = 0.058038
AUC of ROC = 0.855446
AUC of PRC = 0.54962
min(+P, Se) = 0.527149

-------------------------------

Epoch 00015: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch15.state
Epoch 16/100
 - 824s - loss: 0.2873 - val_loss: 0.2912

==>predicting on train



confusion matrix:
[[6991   45]
 [1050  262]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.10728400200605392
difference in average predicted and observed risk = -0.04987899799394607
number samples = 8348
accuracy = 0.868831
precision class 0 = 0.869419
precision class 1 = 0.85342
recall class 0 = 0.993604
recall class 1 = 0.199695
false negative rate = 0.800305
false positive rate = 0.006396
positive prediction rate = 0.036775
AUC of ROC = 0.860991
AUC of PRC = 0.587718
min(+P, Se) = 0.538813

-------------------------------

confusion matrix:
[[3964   38]
 [ 324  147]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.09304500371217728
difference in average predicted and observed risk = -0.012252996287822726
number samples = 4473
accuracy = 0.91907
precision class 0 = 0.92444
precision class 1 = 0.794595
recall class 0 = 0.990505
recall class 1 = 0.312102
false negative rate = 0.687898
false positive rate = 0.009495
positive prediction rate = 0.041359
AUC of ROC = 0.896829
AUC of PRC = 0.608913
min(+P, Se) = 0.548729

-------------------------------

confusion matrix:
[[1186    9]
 [  99   44]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10024499893188477
difference in average predicted and observed risk = -0.006631001068115233
number samples = 1338
accuracy = 0.919282
precision class 0 = 0.922957
precision class 1 = 0.830189
recall class 0 = 0.992469
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.007531
positive prediction rate = 0.039611
AUC of ROC = 0.89641
AUC of PRC = 0.595922
min(+P, Se) = 0.58042

-------------------------------

confusion matrix:
[[348   2]
 [ 28  11]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09136500209569931
difference in average predicted and observed risk = -0.008891997904300689
number samples = 389
accuracy = 0.922879
precision class 0 = 0.925532
precision class 1 = 0.846154
recall class 0 = 0.994286
recall class 1 = 0.282051
false negative rate = 0.717949
false positive rate = 0.005714
positive prediction rate = 0.033419
AUC of ROC = 0.891868
AUC of PRC = 0.60026
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[110   1]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.15176799893379211
difference in average predicted and observed risk = -0.013646001066207891
number samples = 133
accuracy = 0.924812
precision class 0 = 0.92437
precision class 1 = 0.928571
recall class 0 = 0.990991
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.009009
positive prediction rate = 0.105263
AUC of ROC = 0.923423
AUC of PRC = 0.807379
min(+P, Se) = 0.727273

-------------------------------

confusion matrix:
[[6938   48]
 [ 806  267]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.09902399778366089
difference in average predicted and observed risk = -0.03411900221633912
number samples = 8059
accuracy = 0.894032
precision class 0 = 0.895919
precision class 1 = 0.847619
recall class 0 = 0.993129
recall class 1 = 0.248835
false negative rate = 0.751165
false positive rate = 0.006871
positive prediction rate = 0.039087
AUC of ROC = 0.880867
AUC of PRC = 0.603182
min(+P, Se) = 0.556384

-------------------------------

confusion matrix:
[[5661   47]
 [ 704  210]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.10625399649143219
difference in average predicted and observed risk = -0.03177100350856782
number samples = 6622
accuracy = 0.88659
precision class 0 = 0.889395
precision class 1 = 0.817121
recall class 0 = 0.991766
recall class 1 = 0.229759
false negative rate = 0.770241
false positive rate = 0.008234
positive prediction rate = 0.03881
AUC of ROC = 0.871088
AUC of PRC = 0.581159
min(+P, Se) = 0.528446

-------------------------------

confusion matrix:
[[8989   57]
 [1071  292]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.09796799719333649
difference in average predicted and observed risk = -0.03297600280666352
number samples = 10409
accuracy = 0.891632
precision class 0 = 0.893539
precision class 1 = 0.836676
recall class 0 = 0.993699
recall class 1 = 0.214233
false negative rate = 0.785767
false positive rate = 0.006301
positive prediction rate = 0.033529
AUC of ROC = 0.875701
AUC of PRC = 0.577766
min(+P, Se) = 0.529927

-------------------------------

confusion matrix:
[[1626   15]
 [ 287  120]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.12472599744796753
difference in average predicted and observed risk = -0.07400400255203246
number samples = 2048
accuracy = 0.852539
precision class 0 = 0.849974
precision class 1 = 0.888889
recall class 0 = 0.990859
recall class 1 = 0.29484
false negative rate = 0.70516
false positive rate = 0.009141
positive prediction rate = 0.065918
AUC of ROC = 0.882583
AUC of PRC = 0.690283
min(+P, Se) = 0.622549

-------------------------------

confusion matrix:
[[1267   15]
 [  88   38]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.09754099696874619
difference in average predicted and observed risk = 0.008051996968746186
number samples = 1408
accuracy = 0.926847
precision class 0 = 0.935055
precision class 1 = 0.716981
recall class 0 = 0.9883
recall class 1 = 0.301587
false negative rate = 0.698413
false positive rate = 0.0117
positive prediction rate = 0.037642
AUC of ROC = 0.884258
AUC of PRC = 0.521036
min(+P, Se) = 0.529412

-------------------------------

confusion matrix:
[[292   4]
 [ 35  17]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.12561999261379242
difference in average predicted and observed risk = -0.023805007386207583
number samples = 348
accuracy = 0.887931
precision class 0 = 0.892966
precision class 1 = 0.809524
recall class 0 = 0.986486
recall class 1 = 0.326923
false negative rate = 0.673077
false positive rate = 0.013514
positive prediction rate = 0.060345
AUC of ROC = 0.869997
AUC of PRC = 0.634268
min(+P, Se) = 0.557692

-------------------------------

confusion matrix:
[[425   4]
 [ 29  10]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.09704600274562836
difference in average predicted and observed risk = 0.013713002745628353
number samples = 468
accuracy = 0.929487
precision class 0 = 0.936123
precision class 1 = 0.714286
recall class 0 = 0.990676
recall class 1 = 0.25641
false negative rate = 0.74359
false positive rate = 0.009324
positive prediction rate = 0.029915
AUC of ROC = 0.855179
AUC of PRC = 0.500104
min(+P, Se) = 0.463415

-------------------------------

confusion matrix:
[[12599    95]
 [ 1510   477]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.1022849977016449
difference in average predicted and observed risk = -0.033060002298355096
number samples = 14681
accuracy = 0.890675
precision class 0 = 0.892976
precision class 1 = 0.833916
recall class 0 = 0.992516
recall class 1 = 0.24006
false negative rate = 0.75994
false positive rate = 0.007484
positive prediction rate = 0.038962
AUC of ROC = 0.87635
AUC of PRC = 0.592926
min(+P, Se) = 0.543533

-------------------------------

==>predicting on validation



confusion matrix:
[[1521   14]
 [ 216   62]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.110275998711586
difference in average predicted and observed risk = -0.043061001288414
number samples = 1813
accuracy = 0.873138
precision class 0 = 0.875648
precision class 1 = 0.815789
recall class 0 = 0.990879
recall class 1 = 0.223022
false negative rate = 0.776978
false positive rate = 0.009121
positive prediction rate = 0.041919
AUC of ROC = 0.847487
AUC of PRC = 0.584836
min(+P, Se) = 0.528777

-------------------------------

confusion matrix:
[[896  11]
 [ 93  20]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.0937270000576973
difference in average predicted and observed risk = -0.017056999942302697
number samples = 1020
accuracy = 0.898039
precision class 0 = 0.905966
precision class 1 = 0.645161
recall class 0 = 0.987872
recall class 1 = 0.176991
false negative rate = 0.823009
false positive rate = 0.012128
positive prediction rate = 0.030392
AUC of ROC = 0.845986
AUC of PRC = 0.458838
min(+P, Se) = 0.457364

-------------------------------

confusion matrix:
[[246   5]
 [ 22  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.11490300297737122
difference in average predicted and observed risk = -0.0043949970226287854
number samples = 285
accuracy = 0.905263
precision class 0 = 0.91791
precision class 1 = 0.705882
recall class 0 = 0.98008
recall class 1 = 0.352941
false negative rate = 0.647059
false positive rate = 0.01992
positive prediction rate = 0.059649
AUC of ROC = 0.895008
AUC of PRC = 0.63613
min(+P, Se) = 0.594595

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08628199994564056
difference in average predicted and observed risk = -0.0034620000543594404
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.768612
AUC of PRC = 0.396166
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[21  1]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17441900074481964
difference in average predicted and observed risk = 0.02057300074481963
number samples = 26
accuracy = 0.884615
precision class 0 = 0.913043
precision class 1 = 0.666667
recall class 0 = 0.954545
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.045455
positive prediction rate = 0.115385
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1507   22]
 [ 188   56]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.10469800233840942
difference in average predicted and observed risk = -0.03292199766159057
number samples = 1773
accuracy = 0.881557
precision class 0 = 0.889086
precision class 1 = 0.717949
recall class 0 = 0.985611
recall class 1 = 0.229508
false negative rate = 0.770492
false positive rate = 0.014388
positive prediction rate = 0.043993
AUC of ROC = 0.850368
AUC of PRC = 0.547885
min(+P, Se) = 0.520492

-------------------------------

confusion matrix:
[[1246   11]
 [ 151   41]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.10622099786996841
difference in average predicted and observed risk = -0.026284002130031597
number samples = 1449
accuracy = 0.888199
precision class 0 = 0.891911
precision class 1 = 0.788462
recall class 0 = 0.991249
recall class 1 = 0.213542
false negative rate = 0.786458
false positive rate = 0.008751
positive prediction rate = 0.035887
AUC of ROC = 0.854204
AUC of PRC = 0.552924
min(+P, Se) = 0.518135

-------------------------------

confusion matrix:
[[1958   20]
 [ 245   66]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.10348500311374664
difference in average predicted and observed risk = -0.032381996886253345
number samples = 2289
accuracy = 0.884229
precision class 0 = 0.888788
precision class 1 = 0.767442
recall class 0 = 0.989889
recall class 1 = 0.212219
false negative rate = 0.787781
false positive rate = 0.010111
positive prediction rate = 0.037571
AUC of ROC = 0.847179
AUC of PRC = 0.550263
min(+P, Se) = 0.528481

-------------------------------

confusion matrix:
[[364   4]
 [ 63  18]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.11700499802827835
difference in average predicted and observed risk = -0.06339600197172165
number samples = 449
accuracy = 0.85078
precision class 0 = 0.852459
precision class 1 = 0.818182
recall class 0 = 0.98913
recall class 1 = 0.222222
false negative rate = 0.777778
false positive rate = 0.01087
positive prediction rate = 0.048998
AUC of ROC = 0.859635
AUC of PRC = 0.636058
min(+P, Se) = 0.568421

-------------------------------

confusion matrix:
[[273   5]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.09940899908542633
difference in average predicted and observed risk = 0.002005999085426327
number samples = 308
accuracy = 0.915584
precision class 0 = 0.928571
precision class 1 = 0.642857
recall class 0 = 0.982014
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.017986
positive prediction rate = 0.045455
AUC of ROC = 0.885731
AUC of PRC = 0.528549
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.0928030014038086
difference in average predicted and observed risk = 0.020638001403808587
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.866667
AUC of PRC = 0.248294
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[70  2]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.13307000696659088
difference in average predicted and observed risk = 0.044462006966590875
number samples = 79
accuracy = 0.924051
precision class 0 = 0.945946
precision class 1 = 0.6
recall class 0 = 0.972222
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.027778
positive prediction rate = 0.063291
AUC of ROC = 0.843254
AUC of PRC = 0.617857
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[2753   33]
 [ 339   97]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.10538300126791
difference in average predicted and observed risk = -0.029936998732089992
number samples = 3222
accuracy = 0.884544
precision class 0 = 0.890362
precision class 1 = 0.746154
recall class 0 = 0.988155
recall class 1 = 0.222477
false negative rate = 0.777523
false positive rate = 0.011845
positive prediction rate = 0.040348
AUC of ROC = 0.851703
AUC of PRC = 0.550549
min(+P, Se) = 0.520642

-------------------------------

Epoch 00016: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch16.state
Epoch 17/100
 - 821s - loss: 0.2882 - val_loss: 0.2807

==>predicting on train



confusion matrix:
[[6941   95]
 [ 957  355]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.142985999584198
difference in average predicted and observed risk = -0.014177000415801999
number samples = 8348
accuracy = 0.873982
precision class 0 = 0.87883
precision class 1 = 0.788889
recall class 0 = 0.986498
recall class 1 = 0.270579
false negative rate = 0.729421
false positive rate = 0.013502
positive prediction rate = 0.053905
AUC of ROC = 0.868322
AUC of PRC = 0.609758
min(+P, Se) = 0.565549

-------------------------------

confusion matrix:
[[3934   68]
 [ 283  188]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11852899938821793
difference in average predicted and observed risk = 0.013230999388217923
number samples = 4473
accuracy = 0.921529
precision class 0 = 0.932891
precision class 1 = 0.734375
recall class 0 = 0.983009
recall class 1 = 0.399151
false negative rate = 0.600849
false positive rate = 0.016992
positive prediction rate = 0.057232
AUC of ROC = 0.902502
AUC of PRC = 0.623514
min(+P, Se) = 0.57384

-------------------------------

confusion matrix:
[[1177   18]
 [  91   52]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.12826000154018402
difference in average predicted and observed risk = 0.021384001540184022
number samples = 1338
accuracy = 0.918535
precision class 0 = 0.928233
precision class 1 = 0.742857
recall class 0 = 0.984937
recall class 1 = 0.363636
false negative rate = 0.636364
false positive rate = 0.015063
positive prediction rate = 0.052317
AUC of ROC = 0.900547
AUC of PRC = 0.614861
min(+P, Se) = 0.573427

-------------------------------

confusion matrix:
[[343   7]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.11868199706077576
difference in average predicted and observed risk = 0.018424997060775758
number samples = 389
accuracy = 0.92545
precision class 0 = 0.939726
precision class 1 = 0.708333
recall class 0 = 0.98
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.02
positive prediction rate = 0.061697
AUC of ROC = 0.904908
AUC of PRC = 0.615456
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[108   3]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1681479960680008
difference in average predicted and observed risk = 0.002733996068000788
number samples = 133
accuracy = 0.924812
precision class 0 = 0.93913
precision class 1 = 0.833333
recall class 0 = 0.972973
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.027027
positive prediction rate = 0.135338
AUC of ROC = 0.935708
AUC of PRC = 0.786355
min(+P, Se) = 0.727273

-------------------------------

confusion matrix:
[[6880  106]
 [ 724  349]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1286650002002716
difference in average predicted and observed risk = -0.004477999799728405
number samples = 8059
accuracy = 0.89701
precision class 0 = 0.904787
precision class 1 = 0.767033
recall class 0 = 0.984827
recall class 1 = 0.325256
false negative rate = 0.674744
false positive rate = 0.015173
positive prediction rate = 0.056459
AUC of ROC = 0.887901
AUC of PRC = 0.619316
min(+P, Se) = 0.578212

-------------------------------

confusion matrix:
[[5623   85]
 [ 636  278]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.13999800384044647
difference in average predicted and observed risk = 0.0019730038404464634
number samples = 6622
accuracy = 0.89112
precision class 0 = 0.898386
precision class 1 = 0.76584
recall class 0 = 0.985109
recall class 1 = 0.304158
false negative rate = 0.695842
false positive rate = 0.014891
positive prediction rate = 0.054817
AUC of ROC = 0.878525
AUC of PRC = 0.605845
min(+P, Se) = 0.545952

-------------------------------

confusion matrix:
[[8924  122]
 [ 967  396]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.12994299829006195
difference in average predicted and observed risk = -0.0010010017099380542
number samples = 10409
accuracy = 0.895379
precision class 0 = 0.902234
precision class 1 = 0.764479
recall class 0 = 0.986513
recall class 1 = 0.290536
false negative rate = 0.709464
false positive rate = 0.013487
positive prediction rate = 0.049765
AUC of ROC = 0.881496
AUC of PRC = 0.597489
min(+P, Se) = 0.553936

-------------------------------

confusion matrix:
[[1608   33]
 [ 252  155]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.157492995262146
difference in average predicted and observed risk = -0.041237004737853994
number samples = 2048
accuracy = 0.86084
precision class 0 = 0.864516
precision class 1 = 0.824468
recall class 0 = 0.97989
recall class 1 = 0.380835
false negative rate = 0.619165
false positive rate = 0.02011
positive prediction rate = 0.091797
AUC of ROC = 0.890303
AUC of PRC = 0.705418
min(+P, Se) = 0.628993

-------------------------------

confusion matrix:
[[1261   21]
 [  83   43]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.1244719997048378
difference in average predicted and observed risk = 0.0349829997048378
number samples = 1408
accuracy = 0.926136
precision class 0 = 0.938244
precision class 1 = 0.671875
recall class 0 = 0.983619
recall class 1 = 0.34127
false negative rate = 0.65873
false positive rate = 0.016381
positive prediction rate = 0.045455
AUC of ROC = 0.892269
AUC of PRC = 0.542995
min(+P, Se) = 0.554688

-------------------------------

confusion matrix:
[[290   6]
 [ 32  20]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1583860069513321
difference in average predicted and observed risk = 0.00896100695133209
number samples = 348
accuracy = 0.890805
precision class 0 = 0.900621
precision class 1 = 0.769231
recall class 0 = 0.97973
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.02027
positive prediction rate = 0.074713
AUC of ROC = 0.876429
AUC of PRC = 0.654323
min(+P, Se) = 0.603774

-------------------------------

confusion matrix:
[[420   9]
 [ 26  13]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.12494199723005295
difference in average predicted and observed risk = 0.041608997230052944
number samples = 468
accuracy = 0.925214
precision class 0 = 0.941704
precision class 1 = 0.590909
recall class 0 = 0.979021
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.020979
positive prediction rate = 0.047009
AUC of ROC = 0.878967
AUC of PRC = 0.546978
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[12503   191]
 [ 1360   627]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.13377699255943298
difference in average predicted and observed risk = -0.0015680074405670097
number samples = 14681
accuracy = 0.894353
precision class 0 = 0.901897
precision class 1 = 0.766504
recall class 0 = 0.984954
recall class 1 = 0.315551
false negative rate = 0.684449
false positive rate = 0.015046
positive prediction rate = 0.055718
AUC of ROC = 0.883633
AUC of PRC = 0.613004
min(+P, Se) = 0.563161

-------------------------------

==>predicting on validation



confusion matrix:
[[1506   29]
 [ 201   77]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.14682899415493011
difference in average predicted and observed risk = -0.006508005845069886
number samples = 1813
accuracy = 0.873138
precision class 0 = 0.88225
precision class 1 = 0.726415
recall class 0 = 0.981107
recall class 1 = 0.276978
false negative rate = 0.723022
false positive rate = 0.018893
positive prediction rate = 0.058467
AUC of ROC = 0.85394
AUC of PRC = 0.57862
min(+P, Se) = 0.528777

-------------------------------

confusion matrix:
[[888  19]
 [ 86  27]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11954700201749802
difference in average predicted and observed risk = 0.008763002017498023
number samples = 1020
accuracy = 0.897059
precision class 0 = 0.911704
precision class 1 = 0.586957
recall class 0 = 0.979052
recall class 1 = 0.238938
false negative rate = 0.761062
false positive rate = 0.020948
positive prediction rate = 0.045098
AUC of ROC = 0.862807
AUC of PRC = 0.497829
min(+P, Se) = 0.492063

-------------------------------

confusion matrix:
[[245   6]
 [ 23  11]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.14142100512981415
difference in average predicted and observed risk = 0.022123005129814147
number samples = 285
accuracy = 0.898246
precision class 0 = 0.914179
precision class 1 = 0.647059
recall class 0 = 0.976096
recall class 1 = 0.323529
false negative rate = 0.676471
false positive rate = 0.023904
positive prediction rate = 0.059649
AUC of ROC = 0.887509
AUC of PRC = 0.602353
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.11060100048780441
difference in average predicted and observed risk = 0.02085700048780441
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.746479
AUC of PRC = 0.372697
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[22  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.16374999284744263
difference in average predicted and observed risk = 0.009903992847442616
number samples = 26
accuracy = 0.923077
precision class 0 = 0.916667
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.076923
AUC of ROC = 0.988636
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1497   32]
 [ 177   67]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.13343200087547302
difference in average predicted and observed risk = -0.00418799912452697
number samples = 1773
accuracy = 0.882121
precision class 0 = 0.894265
precision class 1 = 0.676768
recall class 0 = 0.979071
recall class 1 = 0.27459
false negative rate = 0.72541
false positive rate = 0.020929
positive prediction rate = 0.055838
AUC of ROC = 0.863583
AUC of PRC = 0.561774
min(+P, Se) = 0.530364

-------------------------------

confusion matrix:
[[1233   24]
 [ 141   51]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.14130699634552002
difference in average predicted and observed risk = 0.008801996345520008
number samples = 1449
accuracy = 0.886128
precision class 0 = 0.89738
precision class 1 = 0.68
recall class 0 = 0.980907
recall class 1 = 0.265625
false negative rate = 0.734375
false positive rate = 0.019093
positive prediction rate = 0.05176
AUC of ROC = 0.856682
AUC of PRC = 0.555877
min(+P, Se) = 0.523316

-------------------------------

confusion matrix:
[[1938   40]
 [ 230   81]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1356150060892105
difference in average predicted and observed risk = -0.0002519939107894775
number samples = 2289
accuracy = 0.882045
precision class 0 = 0.893911
precision class 1 = 0.669421
recall class 0 = 0.979778
recall class 1 = 0.26045
false negative rate = 0.73955
false positive rate = 0.020222
positive prediction rate = 0.052862
AUC of ROC = 0.856252
AUC of PRC = 0.549551
min(+P, Se) = 0.522436

-------------------------------

confusion matrix:
[[363   5]
 [ 59  22]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1490350067615509
difference in average predicted and observed risk = -0.0313659932384491
number samples = 449
accuracy = 0.857461
precision class 0 = 0.86019
precision class 1 = 0.814815
recall class 0 = 0.986413
recall class 1 = 0.271605
false negative rate = 0.728395
false positive rate = 0.013587
positive prediction rate = 0.060134
AUC of ROC = 0.867083
AUC of PRC = 0.649511
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[272   6]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.13020800054073334
difference in average predicted and observed risk = 0.032805000540733334
number samples = 308
accuracy = 0.915584
precision class 0 = 0.931507
precision class 1 = 0.625
recall class 0 = 0.978417
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.021583
positive prediction rate = 0.051948
AUC of ROC = 0.880935
AUC of PRC = 0.519423
min(+P, Se) = 0.516129

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.1150050014257431
difference in average predicted and observed risk = 0.042840001425743096
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.834921
AUC of PRC = 0.329218
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.16111600399017334
difference in average predicted and observed risk = 0.07250800399017333
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.888889
AUC of PRC = 0.690515
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2730   56]
 [ 318  118]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.13697299361228943
difference in average predicted and observed risk = 0.0016529936122894329
number samples = 3222
accuracy = 0.883923
precision class 0 = 0.895669
precision class 1 = 0.678161
recall class 0 = 0.9799
recall class 1 = 0.270642
false negative rate = 0.729358
false positive rate = 0.020101
positive prediction rate = 0.054004
AUC of ROC = 0.860042
AUC of PRC = 0.558128
min(+P, Se) = 0.522831

-------------------------------

Epoch 00017: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch17.state
Epoch 18/100
 - 823s - loss: 0.2872 - val_loss: 0.2845

==>predicting on train



confusion matrix:
[[6966   70]
 [1012  300]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12101700156927109
difference in average predicted and observed risk = -0.03614599843072891
number samples = 8348
accuracy = 0.870388
precision class 0 = 0.873151
precision class 1 = 0.810811
recall class 0 = 0.990051
recall class 1 = 0.228659
false negative rate = 0.771341
false positive rate = 0.009949
positive prediction rate = 0.044322
AUC of ROC = 0.869315
AUC of PRC = 0.606713
min(+P, Se) = 0.558689

-------------------------------

confusion matrix:
[[3942   60]
 [ 304  167]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10433900356292725
difference in average predicted and observed risk = -0.0009589964370727566
number samples = 4473
accuracy = 0.918623
precision class 0 = 0.928403
precision class 1 = 0.735683
recall class 0 = 0.985008
recall class 1 = 0.354565
false negative rate = 0.645435
false positive rate = 0.014993
positive prediction rate = 0.050749
AUC of ROC = 0.898755
AUC of PRC = 0.609479
min(+P, Se) = 0.558386

-------------------------------

confusion matrix:
[[1181   14]
 [  93   50]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11344800144433975
difference in average predicted and observed risk = 0.006572001444339753
number samples = 1338
accuracy = 0.92003
precision class 0 = 0.927002
precision class 1 = 0.78125
recall class 0 = 0.988285
recall class 1 = 0.34965
false negative rate = 0.65035
false positive rate = 0.011715
positive prediction rate = 0.047833
AUC of ROC = 0.897972
AUC of PRC = 0.606093
min(+P, Se) = 0.5625

-------------------------------

confusion matrix:
[[346   4]
 [ 24  15]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.1018809974193573
difference in average predicted and observed risk = 0.001623997419357301
number samples = 389
accuracy = 0.928021
precision class 0 = 0.935135
precision class 1 = 0.789474
recall class 0 = 0.988571
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.011429
positive prediction rate = 0.048843
AUC of ROC = 0.899267
AUC of PRC = 0.605769
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[108   3]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1633940041065216
difference in average predicted and observed risk = -0.002019995893478399
number samples = 133
accuracy = 0.909774
precision class 0 = 0.923077
precision class 1 = 0.8125
recall class 0 = 0.972973
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.027027
positive prediction rate = 0.120301
AUC of ROC = 0.932842
AUC of PRC = 0.792387
min(+P, Se) = 0.772727

-------------------------------

confusion matrix:
[[6904   82]
 [ 772  301]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11126700043678284
difference in average predicted and observed risk = -0.021875999563217174
number samples = 8059
accuracy = 0.894032
precision class 0 = 0.899427
precision class 1 = 0.785901
recall class 0 = 0.988262
recall class 1 = 0.280522
false negative rate = 0.719478
false positive rate = 0.011738
positive prediction rate = 0.047525
AUC of ROC = 0.886705
AUC of PRC = 0.613582
min(+P, Se) = 0.568372

-------------------------------

confusion matrix:
[[5639   69]
 [ 670  244]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11981599777936935
difference in average predicted and observed risk = -0.018209002220630655
number samples = 6622
accuracy = 0.888402
precision class 0 = 0.893803
precision class 1 = 0.779553
recall class 0 = 0.987912
recall class 1 = 0.266958
false negative rate = 0.733042
false positive rate = 0.012088
positive prediction rate = 0.047267
AUC of ROC = 0.87637
AUC of PRC = 0.595627
min(+P, Se) = 0.544262

-------------------------------

confusion matrix:
[[8943  103]
 [1023  340]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11071699857711792
difference in average predicted and observed risk = -0.020227001422882085
number samples = 10409
accuracy = 0.891824
precision class 0 = 0.897351
precision class 1 = 0.767494
recall class 0 = 0.988614
recall class 1 = 0.24945
false negative rate = 0.75055
false positive rate = 0.011386
positive prediction rate = 0.042559
AUC of ROC = 0.880887
AUC of PRC = 0.589753
min(+P, Se) = 0.544387

-------------------------------

confusion matrix:
[[1622   19]
 [ 276  131]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.13929100334644318
difference in average predicted and observed risk = -0.059438996653556814
number samples = 2048
accuracy = 0.855957
precision class 0 = 0.854584
precision class 1 = 0.873333
recall class 0 = 0.988422
recall class 1 = 0.321867
false negative rate = 0.678133
false positive rate = 0.011578
positive prediction rate = 0.073242
AUC of ROC = 0.88907
AUC of PRC = 0.700659
min(+P, Se) = 0.638821

-------------------------------

confusion matrix:
[[1264   18]
 [  83   43]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10847499966621399
difference in average predicted and observed risk = 0.01898599966621399
number samples = 1408
accuracy = 0.928267
precision class 0 = 0.938382
precision class 1 = 0.704918
recall class 0 = 0.985959
recall class 1 = 0.34127
false negative rate = 0.65873
false positive rate = 0.014041
positive prediction rate = 0.043324
AUC of ROC = 0.887676
AUC of PRC = 0.532002
min(+P, Se) = 0.543307

-------------------------------

confusion matrix:
[[289   7]
 [ 31  21]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.142425999045372
difference in average predicted and observed risk = -0.006999000954627993
number samples = 348
accuracy = 0.890805
precision class 0 = 0.903125
precision class 1 = 0.75
recall class 0 = 0.976351
recall class 1 = 0.403846
false negative rate = 0.596154
false positive rate = 0.023649
positive prediction rate = 0.08046
AUC of ROC = 0.875195
AUC of PRC = 0.653554
min(+P, Se) = 0.584906

-------------------------------

confusion matrix:
[[425   4]
 [ 29  10]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10704900324344635
difference in average predicted and observed risk = 0.023716003243446346
number samples = 468
accuracy = 0.929487
precision class 0 = 0.936123
precision class 1 = 0.714286
recall class 0 = 0.990676
recall class 1 = 0.25641
false negative rate = 0.74359
false positive rate = 0.009324
positive prediction rate = 0.029915
AUC of ROC = 0.861395
AUC of PRC = 0.528249
min(+P, Se) = 0.538462

-------------------------------

confusion matrix:
[[12543   151]
 [ 1442   545]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11512300372123718
difference in average predicted and observed risk = -0.02022199627876281
number samples = 14681
accuracy = 0.891492
precision class 0 = 0.89689
precision class 1 = 0.783046
recall class 0 = 0.988105
recall class 1 = 0.274283
false negative rate = 0.725717
false positive rate = 0.011895
positive prediction rate = 0.047408
AUC of ROC = 0.882019
AUC of PRC = 0.605204
min(+P, Se) = 0.557625

-------------------------------

==>predicting on validation



confusion matrix:
[[1511   24]
 [ 209   69]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12476799637079239
difference in average predicted and observed risk = -0.028569003629207612
number samples = 1813
accuracy = 0.871484
precision class 0 = 0.878488
precision class 1 = 0.741935
recall class 0 = 0.984365
recall class 1 = 0.248201
false negative rate = 0.751799
false positive rate = 0.015635
positive prediction rate = 0.051296
AUC of ROC = 0.852628
AUC of PRC = 0.58006
min(+P, Se) = 0.542857

-------------------------------

confusion matrix:
[[892  15]
 [ 89  24]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10422199964523315
difference in average predicted and observed risk = -0.006562000354766839
number samples = 1020
accuracy = 0.898039
precision class 0 = 0.909276
precision class 1 = 0.615385
recall class 0 = 0.983462
recall class 1 = 0.212389
false negative rate = 0.787611
false positive rate = 0.016538
positive prediction rate = 0.038235
AUC of ROC = 0.852416
AUC of PRC = 0.479308
min(+P, Se) = 0.486726

-------------------------------

confusion matrix:
[[244   7]
 [ 22  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12453199923038483
difference in average predicted and observed risk = 0.005233999230384825
number samples = 285
accuracy = 0.898246
precision class 0 = 0.917293
precision class 1 = 0.631579
recall class 0 = 0.972112
recall class 1 = 0.352941
false negative rate = 0.647059
false positive rate = 0.027888
positive prediction rate = 0.066667
AUC of ROC = 0.889384
AUC of PRC = 0.603555
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09939900040626526
difference in average predicted and observed risk = 0.009655000406265254
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.7666
AUC of PRC = 0.414229
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1715400069952011
difference in average predicted and observed risk = 0.0176940069952011
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1500   29]
 [ 180   64]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11655399948358536
difference in average predicted and observed risk = -0.021066000516414635
number samples = 1773
accuracy = 0.882121
precision class 0 = 0.892857
precision class 1 = 0.688172
recall class 0 = 0.981033
recall class 1 = 0.262295
false negative rate = 0.737705
false positive rate = 0.018967
positive prediction rate = 0.052453
AUC of ROC = 0.854837
AUC of PRC = 0.548077
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[1237   20]
 [ 147   45]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11978299915790558
difference in average predicted and observed risk = -0.012722000842094433
number samples = 1449
accuracy = 0.884748
precision class 0 = 0.893786
precision class 1 = 0.692308
recall class 0 = 0.984089
recall class 1 = 0.234375
false negative rate = 0.765625
false positive rate = 0.015911
positive prediction rate = 0.044859
AUC of ROC = 0.859114
AUC of PRC = 0.556425
min(+P, Se) = 0.520833

-------------------------------

confusion matrix:
[[1940   38]
 [ 235   76]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1163330003619194
difference in average predicted and observed risk = -0.019533999638080585
number samples = 2289
accuracy = 0.880734
precision class 0 = 0.891954
precision class 1 = 0.666667
recall class 0 = 0.980789
recall class 1 = 0.244373
false negative rate = 0.755627
false positive rate = 0.019211
positive prediction rate = 0.049803
AUC of ROC = 0.8523
AUC of PRC = 0.543955
min(+P, Se) = 0.525478

-------------------------------

confusion matrix:
[[365   3]
 [ 61  20]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1305769979953766
difference in average predicted and observed risk = -0.04982400200462342
number samples = 449
accuracy = 0.857461
precision class 0 = 0.856808
precision class 1 = 0.869565
recall class 0 = 0.991848
recall class 1 = 0.246914
false negative rate = 0.753086
false positive rate = 0.008152
positive prediction rate = 0.051225
AUC of ROC = 0.868659
AUC of PRC = 0.647251
min(+P, Se) = 0.611765

-------------------------------

confusion matrix:
[[274   4]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10959900170564651
difference in average predicted and observed risk = 0.012196001705646511
number samples = 308
accuracy = 0.918831
precision class 0 = 0.928814
precision class 1 = 0.692308
recall class 0 = 0.985611
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.014388
positive prediction rate = 0.042208
AUC of ROC = 0.87542
AUC of PRC = 0.518409
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10301700234413147
difference in average predicted and observed risk = 0.030852002344131463
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.866667
AUC of PRC = 0.347104
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[70  2]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14623099565505981
difference in average predicted and observed risk = 0.05762299565505981
number samples = 79
accuracy = 0.924051
precision class 0 = 0.945946
precision class 1 = 0.6
recall class 0 = 0.972222
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.027778
positive prediction rate = 0.063291
AUC of ROC = 0.863095
AUC of PRC = 0.656754
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2737   49]
 [ 327  109]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11800599843263626
difference in average predicted and observed risk = -0.017314001567363735
number samples = 3222
accuracy = 0.883302
precision class 0 = 0.893277
precision class 1 = 0.689873
recall class 0 = 0.982412
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.017588
positive prediction rate = 0.049038
AUC of ROC = 0.856255
AUC of PRC = 0.551777
min(+P, Se) = 0.52164

-------------------------------

Epoch 00018: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch18.state
Epoch 19/100
 - 837s - loss: 0.2877 - val_loss: 0.2888

==>predicting on train



confusion matrix:
[[6984   52]
 [1045  267]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.10522399842739105
difference in average predicted and observed risk = -0.051939001572608945
number samples = 8348
accuracy = 0.868591
precision class 0 = 0.869847
precision class 1 = 0.836991
recall class 0 = 0.992609
recall class 1 = 0.203506
false negative rate = 0.796494
false positive rate = 0.007391
positive prediction rate = 0.038213
AUC of ROC = 0.870344
AUC of PRC = 0.610247
min(+P, Se) = 0.563262

-------------------------------

confusion matrix:
[[3958   44]
 [ 314  157]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.09183699637651443
difference in average predicted and observed risk = -0.013461003623485568
number samples = 4473
accuracy = 0.919964
precision class 0 = 0.926498
precision class 1 = 0.781095
recall class 0 = 0.989006
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.010995
positive prediction rate = 0.044936
AUC of ROC = 0.895161
AUC of PRC = 0.607219
min(+P, Se) = 0.552017

-------------------------------

confusion matrix:
[[1180   15]
 [  98   45]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10138899832963943
difference in average predicted and observed risk = -0.005487001670360564
number samples = 1338
accuracy = 0.915546
precision class 0 = 0.923318
precision class 1 = 0.75
recall class 0 = 0.987448
recall class 1 = 0.314685
false negative rate = 0.685315
false positive rate = 0.012552
positive prediction rate = 0.044843
AUC of ROC = 0.899131
AUC of PRC = 0.611453
min(+P, Se) = 0.573427

-------------------------------

confusion matrix:
[[347   3]
 [ 27  12]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.08950000256299973
difference in average predicted and observed risk = -0.010756997437000274
number samples = 389
accuracy = 0.922879
precision class 0 = 0.927808
precision class 1 = 0.8
recall class 0 = 0.991429
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.008571
positive prediction rate = 0.03856
AUC of ROC = 0.886593
AUC of PRC = 0.602964
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[110   1]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.15126200020313263
difference in average predicted and observed risk = -0.014151999796867376
number samples = 133
accuracy = 0.932331
precision class 0 = 0.932203
precision class 1 = 0.933333
recall class 0 = 0.990991
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.009009
positive prediction rate = 0.112782
AUC of ROC = 0.924652
AUC of PRC = 0.811234
min(+P, Se) = 0.75

-------------------------------

confusion matrix:
[[6921   65]
 [ 794  279]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.09752199798822403
difference in average predicted and observed risk = -0.03562100201177598
number samples = 8059
accuracy = 0.893411
precision class 0 = 0.897084
precision class 1 = 0.811047
recall class 0 = 0.990696
recall class 1 = 0.260019
false negative rate = 0.739981
false positive rate = 0.009304
positive prediction rate = 0.042685
AUC of ROC = 0.885614
AUC of PRC = 0.614871
min(+P, Se) = 0.577819

-------------------------------

confusion matrix:
[[5658   50]
 [ 698  216]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.10478200018405914
difference in average predicted and observed risk = -0.033242999815940866
number samples = 6622
accuracy = 0.887043
precision class 0 = 0.890182
precision class 1 = 0.81203
recall class 0 = 0.99124
recall class 1 = 0.236324
false negative rate = 0.763676
false positive rate = 0.00876
positive prediction rate = 0.040169
AUC of ROC = 0.875989
AUC of PRC = 0.597418
min(+P, Se) = 0.547046

-------------------------------

confusion matrix:
[[8972   74]
 [1055  308]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.0961650013923645
difference in average predicted and observed risk = -0.0347789986076355
number samples = 10409
accuracy = 0.891536
precision class 0 = 0.894784
precision class 1 = 0.806283
recall class 0 = 0.99182
recall class 1 = 0.225972
false negative rate = 0.774028
false positive rate = 0.00818
positive prediction rate = 0.036699
AUC of ROC = 0.879548
AUC of PRC = 0.589739
min(+P, Se) = 0.546588

-------------------------------

confusion matrix:
[[1624   17]
 [ 285  122]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.12570099532604218
difference in average predicted and observed risk = -0.07302900467395781
number samples = 2048
accuracy = 0.852539
precision class 0 = 0.850707
precision class 1 = 0.877698
recall class 0 = 0.98964
recall class 1 = 0.299754
false negative rate = 0.700246
false positive rate = 0.01036
positive prediction rate = 0.067871
AUC of ROC = 0.888836
AUC of PRC = 0.70253
min(+P, Se) = 0.636364

-------------------------------

confusion matrix:
[[1268   14]
 [  88   38]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.09430199861526489
difference in average predicted and observed risk = 0.0048129986152648935
number samples = 1408
accuracy = 0.927557
precision class 0 = 0.935103
precision class 1 = 0.730769
recall class 0 = 0.98908
recall class 1 = 0.301587
false negative rate = 0.698413
false positive rate = 0.01092
positive prediction rate = 0.036932
AUC of ROC = 0.891836
AUC of PRC = 0.554629
min(+P, Se) = 0.563492

-------------------------------

confusion matrix:
[[292   4]
 [ 36  16]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.12713700532913208
difference in average predicted and observed risk = -0.022287994670867922
number samples = 348
accuracy = 0.885057
precision class 0 = 0.890244
precision class 1 = 0.8
recall class 0 = 0.986486
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.013514
positive prediction rate = 0.057471
AUC of ROC = 0.877339
AUC of PRC = 0.652106
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[423   6]
 [ 28  11]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.09477999806404114
difference in average predicted and observed risk = 0.011446998064041133
number samples = 468
accuracy = 0.92735
precision class 0 = 0.937916
precision class 1 = 0.647059
recall class 0 = 0.986014
recall class 1 = 0.282051
false negative rate = 0.717949
false positive rate = 0.013986
positive prediction rate = 0.036325
AUC of ROC = 0.857211
AUC of PRC = 0.525707
min(+P, Se) = 0.564103

-------------------------------

confusion matrix:
[[12579   115]
 [ 1492   495]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.10079599916934967
difference in average predicted and observed risk = -0.03454900083065032
number samples = 14681
accuracy = 0.890539
precision class 0 = 0.893966
precision class 1 = 0.811475
recall class 0 = 0.990941
recall class 1 = 0.249119
false negative rate = 0.750881
false positive rate = 0.009059
positive prediction rate = 0.04155
AUC of ROC = 0.881192
AUC of PRC = 0.606468
min(+P, Se) = 0.562

-------------------------------

==>predicting on validation



confusion matrix:
[[1518   17]
 [ 217   61]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.10816100239753723
difference in average predicted and observed risk = -0.04517599760246277
number samples = 1813
accuracy = 0.870932
precision class 0 = 0.874928
precision class 1 = 0.782051
recall class 0 = 0.988925
recall class 1 = 0.219424
false negative rate = 0.780576
false positive rate = 0.011075
positive prediction rate = 0.043023
AUC of ROC = 0.856593
AUC of PRC = 0.589431
min(+P, Se) = 0.535971

-------------------------------

confusion matrix:
[[894  13]
 [ 92  21]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.09250400215387344
difference in average predicted and observed risk = -0.01827999784612655
number samples = 1020
accuracy = 0.897059
precision class 0 = 0.906694
precision class 1 = 0.617647
recall class 0 = 0.985667
recall class 1 = 0.185841
false negative rate = 0.814159
false positive rate = 0.014333
positive prediction rate = 0.033333
AUC of ROC = 0.851128
AUC of PRC = 0.475152
min(+P, Se) = 0.486726

-------------------------------

confusion matrix:
[[245   6]
 [ 23  11]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.11072400212287903
difference in average predicted and observed risk = -0.008573997877120973
number samples = 285
accuracy = 0.898246
precision class 0 = 0.914179
precision class 1 = 0.647059
recall class 0 = 0.976096
recall class 1 = 0.323529
false negative rate = 0.676471
false positive rate = 0.023904
positive prediction rate = 0.059649
AUC of ROC = 0.893133
AUC of PRC = 0.623139
min(+P, Se) = 0.605263

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09008999913930893
difference in average predicted and observed risk = 0.0003459991393089251
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.730382
AUC of PRC = 0.401732
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.16816799342632294
difference in average predicted and observed risk = 0.014321993426322926
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1506   23]
 [ 188   56]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.10241000354290009
difference in average predicted and observed risk = -0.03520999645709991
number samples = 1773
accuracy = 0.880993
precision class 0 = 0.88902
precision class 1 = 0.708861
recall class 0 = 0.984958
recall class 1 = 0.229508
false negative rate = 0.770492
false positive rate = 0.015043
positive prediction rate = 0.044557
AUC of ROC = 0.854598
AUC of PRC = 0.552618
min(+P, Se) = 0.52459

-------------------------------

confusion matrix:
[[1241   16]
 [ 151   41]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.1047850027680397
difference in average predicted and observed risk = -0.02771999723196031
number samples = 1449
accuracy = 0.884748
precision class 0 = 0.891523
precision class 1 = 0.719298
recall class 0 = 0.987271
recall class 1 = 0.213542
false negative rate = 0.786458
false positive rate = 0.012729
positive prediction rate = 0.039337
AUC of ROC = 0.862669
AUC of PRC = 0.563571
min(+P, Se) = 0.536458

-------------------------------

confusion matrix:
[[1948   30]
 [ 244   67]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.10169699788093567
difference in average predicted and observed risk = -0.03417000211906432
number samples = 2289
accuracy = 0.880297
precision class 0 = 0.888686
precision class 1 = 0.690722
recall class 0 = 0.984833
recall class 1 = 0.215434
false negative rate = 0.784566
false positive rate = 0.015167
positive prediction rate = 0.042377
AUC of ROC = 0.85605
AUC of PRC = 0.55071
min(+P, Se) = 0.517685

-------------------------------

confusion matrix:
[[364   4]
 [ 64  17]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.11623399704694748
difference in average predicted and observed risk = -0.06416700295305253
number samples = 449
accuracy = 0.848552
precision class 0 = 0.850467
precision class 1 = 0.809524
recall class 0 = 0.98913
recall class 1 = 0.209877
false negative rate = 0.790123
false positive rate = 0.01087
positive prediction rate = 0.046771
AUC of ROC = 0.862017
AUC of PRC = 0.633317
min(+P, Se) = 0.580247

-------------------------------

confusion matrix:
[[276   2]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.09502299875020981
difference in average predicted and observed risk = -0.002380001249790195
number samples = 308
accuracy = 0.925325
precision class 0 = 0.929293
precision class 1 = 0.818182
recall class 0 = 0.992806
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.007194
positive prediction rate = 0.035714
AUC of ROC = 0.876379
AUC of PRC = 0.548603
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.0931209996342659
difference in average predicted and observed risk = 0.020955999634265893
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.880952
AUC of PRC = 0.389064
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.12827199697494507
difference in average predicted and observed risk = 0.03966399697494506
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.865079
AUC of PRC = 0.721397
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2747   39]
 [ 339   97]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.10347799956798553
difference in average predicted and observed risk = -0.03184200043201446
number samples = 3222
accuracy = 0.882682
precision class 0 = 0.890149
precision class 1 = 0.713235
recall class 0 = 0.986001
recall class 1 = 0.222477
false negative rate = 0.777523
false positive rate = 0.013999
positive prediction rate = 0.04221
AUC of ROC = 0.857682
AUC of PRC = 0.556782
min(+P, Se) = 0.519016

-------------------------------

Epoch 00019: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch19.state
Epoch 20/100
 - 822s - loss: 0.2860 - val_loss: 0.2810

==>predicting on train



confusion matrix:
[[6912  124]
 [ 915  397]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13330599665641785
difference in average predicted and observed risk = -0.02385700334358215
number samples = 8348
accuracy = 0.875539
precision class 0 = 0.883097
precision class 1 = 0.761996
recall class 0 = 0.982376
recall class 1 = 0.302591
false negative rate = 0.697409
false positive rate = 0.017624
positive prediction rate = 0.06241
AUC of ROC = 0.873586
AUC of PRC = 0.612888
min(+P, Se) = 0.563498

-------------------------------

confusion matrix:
[[3902  100]
 [ 266  205]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11659099906682968
difference in average predicted and observed risk = 0.011292999066829679
number samples = 4473
accuracy = 0.918176
precision class 0 = 0.93618
precision class 1 = 0.672131
recall class 0 = 0.975012
recall class 1 = 0.435244
false negative rate = 0.564756
false positive rate = 0.024988
positive prediction rate = 0.068187
AUC of ROC = 0.900982
AUC of PRC = 0.614604
min(+P, Se) = 0.550209

-------------------------------

confusion matrix:
[[1166   29]
 [  80   63]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.12631100416183472
difference in average predicted and observed risk = 0.019435004161834718
number samples = 1338
accuracy = 0.918535
precision class 0 = 0.935795
precision class 1 = 0.684783
recall class 0 = 0.975732
recall class 1 = 0.440559
false negative rate = 0.559441
false positive rate = 0.024268
positive prediction rate = 0.068759
AUC of ROC = 0.905469
AUC of PRC = 0.616875
min(+P, Se) = 0.573427

-------------------------------

confusion matrix:
[[342   8]
 [ 20  19]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.11591199785470963
difference in average predicted and observed risk = 0.015654997854709626
number samples = 389
accuracy = 0.928021
precision class 0 = 0.944751
precision class 1 = 0.703704
recall class 0 = 0.977143
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.022857
positive prediction rate = 0.069409
AUC of ROC = 0.904249
AUC of PRC = 0.614177
min(+P, Se) = 0.651163

-------------------------------

confusion matrix:
[[107   4]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.18329599499702454
difference in average predicted and observed risk = 0.01788199499702453
number samples = 133
accuracy = 0.917293
precision class 0 = 0.938596
precision class 1 = 0.789474
recall class 0 = 0.963964
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.036036
positive prediction rate = 0.142857
AUC of ROC = 0.923423
AUC of PRC = 0.794294
min(+P, Se) = 0.727273

-------------------------------

confusion matrix:
[[6839  147]
 [ 688  385]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12357000261545181
difference in average predicted and observed risk = -0.009572997384548199
number samples = 8059
accuracy = 0.896389
precision class 0 = 0.908596
precision class 1 = 0.723684
recall class 0 = 0.978958
recall class 1 = 0.358807
false negative rate = 0.641193
false positive rate = 0.021042
positive prediction rate = 0.066013
AUC of ROC = 0.889926
AUC of PRC = 0.619703
min(+P, Se) = 0.569573

-------------------------------

confusion matrix:
[[5590  118]
 [ 600  314]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.13243399560451508
difference in average predicted and observed risk = -0.005591004395484933
number samples = 6622
accuracy = 0.891574
precision class 0 = 0.903069
precision class 1 = 0.726852
recall class 0 = 0.979327
recall class 1 = 0.343545
false negative rate = 0.656455
false positive rate = 0.020673
positive prediction rate = 0.065237
AUC of ROC = 0.880715
AUC of PRC = 0.599921
min(+P, Se) = 0.549234

-------------------------------

confusion matrix:
[[8876  170]
 [ 923  440]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.12258400022983551
difference in average predicted and observed risk = -0.008359999770164495
number samples = 10409
accuracy = 0.894995
precision class 0 = 0.905807
precision class 1 = 0.721311
recall class 0 = 0.981207
recall class 1 = 0.322817
false negative rate = 0.677183
false positive rate = 0.018793
positive prediction rate = 0.058603
AUC of ROC = 0.883349
AUC of PRC = 0.59204
min(+P, Se) = 0.545855

-------------------------------

confusion matrix:
[[1596   45]
 [ 240  167]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.15685799717903137
difference in average predicted and observed risk = -0.04187200282096862
number samples = 2048
accuracy = 0.86084
precision class 0 = 0.869281
precision class 1 = 0.787736
recall class 0 = 0.972578
recall class 1 = 0.410319
false negative rate = 0.589681
false positive rate = 0.027422
positive prediction rate = 0.103516
AUC of ROC = 0.894768
AUC of PRC = 0.709697
min(+P, Se) = 0.638821

-------------------------------

confusion matrix:
[[1255   27]
 [  75   51]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11818499863147736
difference in average predicted and observed risk = 0.028695998631477357
number samples = 1408
accuracy = 0.927557
precision class 0 = 0.943609
precision class 1 = 0.653846
recall class 0 = 0.978939
recall class 1 = 0.404762
false negative rate = 0.595238
false positive rate = 0.021061
positive prediction rate = 0.055398
AUC of ROC = 0.890127
AUC of PRC = 0.553675
min(+P, Se) = 0.550388

-------------------------------

confusion matrix:
[[285  11]
 [ 28  24]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.15353700518608093
difference in average predicted and observed risk = 0.00411200518608093
number samples = 348
accuracy = 0.887931
precision class 0 = 0.910543
precision class 1 = 0.685714
recall class 0 = 0.962838
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.037162
positive prediction rate = 0.100575
AUC of ROC = 0.880847
AUC of PRC = 0.646291
min(+P, Se) = 0.634615

-------------------------------

confusion matrix:
[[417  12]
 [ 22  17]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.1191750019788742
difference in average predicted and observed risk = 0.0358420019788742
number samples = 468
accuracy = 0.92735
precision class 0 = 0.949886
precision class 1 = 0.586207
recall class 0 = 0.972028
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.027972
positive prediction rate = 0.061966
AUC of ROC = 0.869524
AUC of PRC = 0.521304
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[12429   265]
 [ 1288   699]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12756800651550293
difference in average predicted and observed risk = -0.007776993484497063
number samples = 14681
accuracy = 0.894217
precision class 0 = 0.906102
precision class 1 = 0.725104
recall class 0 = 0.979124
recall class 1 = 0.351787
false negative rate = 0.648213
false positive rate = 0.020876
positive prediction rate = 0.065663
AUC of ROC = 0.885643
AUC of PRC = 0.610417
min(+P, Se) = 0.560141

-------------------------------

==>predicting on validation



confusion matrix:
[[1504   31]
 [ 186   92]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1380939930677414
difference in average predicted and observed risk = -0.015243006932258607
number samples = 1813
accuracy = 0.880309
precision class 0 = 0.889941
precision class 1 = 0.747967
recall class 0 = 0.979805
recall class 1 = 0.330935
false negative rate = 0.669065
false positive rate = 0.020195
positive prediction rate = 0.067843
AUC of ROC = 0.856708
AUC of PRC = 0.594119
min(+P, Se) = 0.539286

-------------------------------

confusion matrix:
[[876  31]
 [ 80  33]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11892800033092499
difference in average predicted and observed risk = 0.008144000330924994
number samples = 1020
accuracy = 0.891176
precision class 0 = 0.916318
precision class 1 = 0.515625
recall class 0 = 0.965821
recall class 1 = 0.292035
false negative rate = 0.707965
false positive rate = 0.034179
positive prediction rate = 0.062745
AUC of ROC = 0.856134
AUC of PRC = 0.463062
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[241  10]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13909299671649933
difference in average predicted and observed risk = 0.019794996716499327
number samples = 285
accuracy = 0.898246
precision class 0 = 0.926923
precision class 1 = 0.6
recall class 0 = 0.960159
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.039841
positive prediction rate = 0.087719
AUC of ROC = 0.905203
AUC of PRC = 0.595123
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10990499705076218
difference in average predicted and observed risk = 0.020160997050762172
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.756539
AUC of PRC = 0.35891
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.20581600069999695
difference in average predicted and observed risk = 0.05197000069999694
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1483   46]
 [ 159   85]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1316639930009842
difference in average predicted and observed risk = -0.0059560069990158004
number samples = 1773
accuracy = 0.884377
precision class 0 = 0.903167
precision class 1 = 0.648855
recall class 0 = 0.969915
recall class 1 = 0.348361
false negative rate = 0.651639
false positive rate = 0.030085
positive prediction rate = 0.073886
AUC of ROC = 0.861736
AUC of PRC = 0.549544
min(+P, Se) = 0.504098

-------------------------------

confusion matrix:
[[1228   29]
 [ 132   60]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.13236500322818756
difference in average predicted and observed risk = -0.00013999677181245063
number samples = 1449
accuracy = 0.888889
precision class 0 = 0.902941
precision class 1 = 0.674157
recall class 0 = 0.976929
recall class 1 = 0.3125
false negative rate = 0.6875
false positive rate = 0.023071
positive prediction rate = 0.061422
AUC of ROC = 0.860597
AUC of PRC = 0.557082
min(+P, Se) = 0.526042

-------------------------------

confusion matrix:
[[1924   54]
 [ 209  102]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1301960051059723
difference in average predicted and observed risk = -0.005670994894027698
number samples = 2289
accuracy = 0.885103
precision class 0 = 0.902016
precision class 1 = 0.653846
recall class 0 = 0.9727
recall class 1 = 0.327974
false negative rate = 0.672026
false positive rate = 0.0273
positive prediction rate = 0.068152
AUC of ROC = 0.857763
AUC of PRC = 0.546451
min(+P, Se) = 0.514469

-------------------------------

confusion matrix:
[[358  10]
 [ 56  25]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14902299642562866
difference in average predicted and observed risk = -0.031378003574371344
number samples = 449
accuracy = 0.853007
precision class 0 = 0.864734
precision class 1 = 0.714286
recall class 0 = 0.972826
recall class 1 = 0.308642
false negative rate = 0.691358
false positive rate = 0.027174
positive prediction rate = 0.077951
AUC of ROC = 0.86403
AUC of PRC = 0.630666
min(+P, Se) = 0.578313

-------------------------------

confusion matrix:
[[272   6]
 [ 18  12]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.12082800269126892
difference in average predicted and observed risk = 0.023425002691268917
number samples = 308
accuracy = 0.922078
precision class 0 = 0.937931
precision class 1 = 0.666667
recall class 0 = 0.978417
recall class 1 = 0.4
false negative rate = 0.6
false positive rate = 0.021583
positive prediction rate = 0.058442
AUC of ROC = 0.883933
AUC of PRC = 0.542031
min(+P, Se) = 0.470588

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.1134290024638176
difference in average predicted and observed risk = 0.04126400246381759
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.860317
AUC of PRC = 0.2549
min(+P, Se) = 0.3

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1530109941959381
difference in average predicted and observed risk = 0.0644029941959381
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.878968
AUC of PRC = 0.682953
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[2711   75]
 [ 291  145]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.13197900354862213
difference in average predicted and observed risk = -0.0033409964513778645
number samples = 3222
accuracy = 0.886406
precision class 0 = 0.903065
precision class 1 = 0.659091
recall class 0 = 0.97308
recall class 1 = 0.332569
false negative rate = 0.667431
false positive rate = 0.02692
positive prediction rate = 0.068281
AUC of ROC = 0.860753
AUC of PRC = 0.552737
min(+P, Se) = 0.513761

-------------------------------

Epoch 00020: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch20.state
Epoch 21/100
 - 819s - loss: 0.2841 - val_loss: 0.2812

==>predicting on train



confusion matrix:
[[6917  119]
 [ 920  392]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.14788800477981567
difference in average predicted and observed risk = -0.009274995220184323
number samples = 8348
accuracy = 0.875539
precision class 0 = 0.882608
precision class 1 = 0.767123
recall class 0 = 0.983087
recall class 1 = 0.298781
false negative rate = 0.701219
false positive rate = 0.016913
positive prediction rate = 0.061212
AUC of ROC = 0.871765
AUC of PRC = 0.609879
min(+P, Se) = 0.561738

-------------------------------

confusion matrix:
[[3905   97]
 [ 266  205]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.12759600579738617
difference in average predicted and observed risk = 0.022298005797386167
number samples = 4473
accuracy = 0.918846
precision class 0 = 0.936226
precision class 1 = 0.678808
recall class 0 = 0.975762
recall class 1 = 0.435244
false negative rate = 0.564756
false positive rate = 0.024238
positive prediction rate = 0.067516
AUC of ROC = 0.900448
AUC of PRC = 0.617946
min(+P, Se) = 0.572939

-------------------------------

confusion matrix:
[[1166   29]
 [  82   61]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.13857799768447876
difference in average predicted and observed risk = 0.03170199768447876
number samples = 1338
accuracy = 0.91704
precision class 0 = 0.934295
precision class 1 = 0.677778
recall class 0 = 0.975732
recall class 1 = 0.426573
false negative rate = 0.573427
false positive rate = 0.024268
positive prediction rate = 0.067265
AUC of ROC = 0.903251
AUC of PRC = 0.604844
min(+P, Se) = 0.58042

-------------------------------

confusion matrix:
[[342   8]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.12524199485778809
difference in average predicted and observed risk = 0.024984994857788087
number samples = 389
accuracy = 0.922879
precision class 0 = 0.93956
precision class 1 = 0.68
recall class 0 = 0.977143
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.022857
positive prediction rate = 0.064267
AUC of ROC = 0.89641
AUC of PRC = 0.596766
min(+P, Se) = 0.634146

-------------------------------

confusion matrix:
[[108   3]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.18979200720787048
difference in average predicted and observed risk = 0.024378007207870478
number samples = 133
accuracy = 0.924812
precision class 0 = 0.93913
precision class 1 = 0.833333
recall class 0 = 0.972973
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.027027
positive prediction rate = 0.135338
AUC of ROC = 0.932023
AUC of PRC = 0.807939
min(+P, Se) = 0.708333

-------------------------------

confusion matrix:
[[6849  137]
 [ 695  378]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.13563400506973267
difference in average predicted and observed risk = 0.0024910050697326547
number samples = 8059
accuracy = 0.896761
precision class 0 = 0.907874
precision class 1 = 0.733981
recall class 0 = 0.980389
recall class 1 = 0.352283
false negative rate = 0.647717
false positive rate = 0.019611
positive prediction rate = 0.063904
AUC of ROC = 0.888766
AUC of PRC = 0.619934
min(+P, Se) = 0.570363

-------------------------------

confusion matrix:
[[5589  119]
 [ 602  312]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.14672499895095825
difference in average predicted and observed risk = 0.008699998950958243
number samples = 6622
accuracy = 0.89112
precision class 0 = 0.902762
precision class 1 = 0.723898
recall class 0 = 0.979152
recall class 1 = 0.341357
false negative rate = 0.658643
false positive rate = 0.020848
positive prediction rate = 0.065086
AUC of ROC = 0.879222
AUC of PRC = 0.598462
min(+P, Se) = 0.553005

-------------------------------

confusion matrix:
[[8877  169]
 [ 926  437]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.13567200303077698
difference in average predicted and observed risk = 0.004728003030776973
number samples = 10409
accuracy = 0.894803
precision class 0 = 0.905539
precision class 1 = 0.721122
recall class 0 = 0.981318
recall class 1 = 0.320616
false negative rate = 0.679384
false positive rate = 0.018682
positive prediction rate = 0.058219
AUC of ROC = 0.883007
AUC of PRC = 0.593981
min(+P, Se) = 0.546588

-------------------------------

confusion matrix:
[[1600   41]
 [ 243  164]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.16753900051116943
difference in average predicted and observed risk = -0.031190999488830556
number samples = 2048
accuracy = 0.861328
precision class 0 = 0.86815
precision class 1 = 0.8
recall class 0 = 0.975015
recall class 1 = 0.402948
false negative rate = 0.597052
false positive rate = 0.024985
positive prediction rate = 0.100098
AUC of ROC = 0.892131
AUC of PRC = 0.707405
min(+P, Se) = 0.646192

-------------------------------

confusion matrix:
[[1256   26]
 [  72   54]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.13362400233745575
difference in average predicted and observed risk = 0.04413500233745575
number samples = 1408
accuracy = 0.930398
precision class 0 = 0.945783
precision class 1 = 0.675
recall class 0 = 0.979719
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.020281
positive prediction rate = 0.056818
AUC of ROC = 0.889725
AUC of PRC = 0.553429
min(+P, Se) = 0.550388

-------------------------------

confusion matrix:
[[287   9]
 [ 30  22]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.16923700273036957
difference in average predicted and observed risk = 0.019812002730369566
number samples = 348
accuracy = 0.887931
precision class 0 = 0.905363
precision class 1 = 0.709677
recall class 0 = 0.969595
recall class 1 = 0.423077
false negative rate = 0.576923
false positive rate = 0.030405
positive prediction rate = 0.08908
AUC of ROC = 0.880003
AUC of PRC = 0.636124
min(+P, Se) = 0.603774

-------------------------------

confusion matrix:
[[418  11]
 [ 26  13]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.13314199447631836
difference in average predicted and observed risk = 0.049808994476318355
number samples = 468
accuracy = 0.92094
precision class 0 = 0.941441
precision class 1 = 0.541667
recall class 0 = 0.974359
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.025641
positive prediction rate = 0.051282
AUC of ROC = 0.859184
AUC of PRC = 0.492251
min(+P, Se) = 0.488372

-------------------------------

confusion matrix:
[[12438   256]
 [ 1297   690]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.14063599705696106
difference in average predicted and observed risk = 0.0052909970569610665
number samples = 14681
accuracy = 0.894217
precision class 0 = 0.90557
precision class 1 = 0.729387
recall class 0 = 0.979833
recall class 1 = 0.347257
false negative rate = 0.652743
false positive rate = 0.020167
positive prediction rate = 0.064437
AUC of ROC = 0.884366
AUC of PRC = 0.609686
min(+P, Se) = 0.561651

-------------------------------

==>predicting on validation



confusion matrix:
[[1500   35]
 [ 192   86]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.15219199657440186
difference in average predicted and observed risk = -0.0011450034255981456
number samples = 1813
accuracy = 0.874793
precision class 0 = 0.886525
precision class 1 = 0.710744
recall class 0 = 0.977199
recall class 1 = 0.309353
false negative rate = 0.690647
false positive rate = 0.022801
positive prediction rate = 0.06674
AUC of ROC = 0.859244
AUC of PRC = 0.593002
min(+P, Se) = 0.544803

-------------------------------

confusion matrix:
[[880  27]
 [ 76  37]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.13032099604606628
difference in average predicted and observed risk = 0.01953699604606629
number samples = 1020
accuracy = 0.89902
precision class 0 = 0.920502
precision class 1 = 0.578125
recall class 0 = 0.970232
recall class 1 = 0.327434
false negative rate = 0.672566
false positive rate = 0.029768
positive prediction rate = 0.062745
AUC of ROC = 0.854768
AUC of PRC = 0.464848
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[243   8]
 [ 21  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.15199699997901917
difference in average predicted and observed risk = 0.032698999979019164
number samples = 285
accuracy = 0.898246
precision class 0 = 0.920455
precision class 1 = 0.619048
recall class 0 = 0.968127
recall class 1 = 0.382353
false negative rate = 0.617647
false positive rate = 0.031873
positive prediction rate = 0.073684
AUC of ROC = 0.896063
AUC of PRC = 0.601036
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.12070299685001373
difference in average predicted and observed risk = 0.03095899685001373
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.746479
AUC of PRC = 0.39055
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[20  2]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.21992699801921844
difference in average predicted and observed risk = 0.06608099801921843
number samples = 26
accuracy = 0.923077
precision class 0 = 1.0
precision class 1 = 0.666667
recall class 0 = 0.909091
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.090909
positive prediction rate = 0.230769
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1484   45]
 [ 161   83]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1440259963274002
difference in average predicted and observed risk = 0.006405996327400215
number samples = 1773
accuracy = 0.883813
precision class 0 = 0.902128
precision class 1 = 0.648438
recall class 0 = 0.970569
recall class 1 = 0.340164
false negative rate = 0.659836
false positive rate = 0.029431
positive prediction rate = 0.072194
AUC of ROC = 0.860176
AUC of PRC = 0.547175
min(+P, Se) = 0.532258

-------------------------------

confusion matrix:
[[1228   29]
 [ 134   58]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.1462700068950653
difference in average predicted and observed risk = 0.013765006895065296
number samples = 1449
accuracy = 0.887509
precision class 0 = 0.901615
precision class 1 = 0.666667
recall class 0 = 0.976929
recall class 1 = 0.302083
false negative rate = 0.697917
false positive rate = 0.023071
positive prediction rate = 0.060041
AUC of ROC = 0.862686
AUC of PRC = 0.561214
min(+P, Se) = 0.523316

-------------------------------

confusion matrix:
[[1927   51]
 [ 210  101]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.14277400076389313
difference in average predicted and observed risk = 0.00690700076389314
number samples = 2289
accuracy = 0.885976
precision class 0 = 0.901731
precision class 1 = 0.664474
recall class 0 = 0.974216
recall class 1 = 0.324759
false negative rate = 0.675241
false positive rate = 0.025784
positive prediction rate = 0.066405
AUC of ROC = 0.857856
AUC of PRC = 0.549478
min(+P, Se) = 0.524116

-------------------------------

confusion matrix:
[[358  10]
 [ 56  25]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.16142599284648895
difference in average predicted and observed risk = -0.018975007153511053
number samples = 449
accuracy = 0.853007
precision class 0 = 0.864734
precision class 1 = 0.714286
recall class 0 = 0.972826
recall class 1 = 0.308642
false negative rate = 0.691358
false positive rate = 0.027174
positive prediction rate = 0.077951
AUC of ROC = 0.863896
AUC of PRC = 0.622786
min(+P, Se) = 0.580247

-------------------------------

confusion matrix:
[[270   8]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.13685600459575653
difference in average predicted and observed risk = 0.03945300459575653
number samples = 308
accuracy = 0.909091
precision class 0 = 0.931035
precision class 1 = 0.555556
recall class 0 = 0.971223
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.028777
positive prediction rate = 0.058442
AUC of ROC = 0.88765
AUC of PRC = 0.52275
min(+P, Se) = 0.478261

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.12713800370693207
difference in average predicted and observed risk = 0.05497300370693206
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.861905
AUC of PRC = 0.352421
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[70  2]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.17127400636672974
difference in average predicted and observed risk = 0.08266600636672973
number samples = 79
accuracy = 0.924051
precision class 0 = 0.945946
precision class 1 = 0.6
recall class 0 = 0.972222
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.027778
positive prediction rate = 0.063291
AUC of ROC = 0.857143
AUC of PRC = 0.657066
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[2712   74]
 [ 295  141]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.1450349986553192
difference in average predicted and observed risk = 0.009714998655319218
number samples = 3222
accuracy = 0.885475
precision class 0 = 0.901896
precision class 1 = 0.655814
recall class 0 = 0.973439
recall class 1 = 0.323395
false negative rate = 0.676606
false positive rate = 0.026561
positive prediction rate = 0.066729
AUC of ROC = 0.860863
AUC of PRC = 0.552973
min(+P, Se) = 0.527523

-------------------------------

Epoch 00021: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch21.state
Epoch 22/100
 - 817s - loss: 0.2871 - val_loss: 0.2815

==>predicting on train



confusion matrix:
[[6977   59]
 [1034  278]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12435299903154373
difference in average predicted and observed risk = -0.032810000968456265
number samples = 8348
accuracy = 0.86907
precision class 0 = 0.870927
precision class 1 = 0.824926
recall class 0 = 0.991615
recall class 1 = 0.21189
false negative rate = 0.78811
false positive rate = 0.008385
positive prediction rate = 0.040369
AUC of ROC = 0.869022
AUC of PRC = 0.602937
min(+P, Se) = 0.5625

-------------------------------

confusion matrix:
[[3942   60]
 [ 302  169]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11108200252056122
difference in average predicted and observed risk = 0.0057840025205612156
number samples = 4473
accuracy = 0.91907
precision class 0 = 0.928841
precision class 1 = 0.737991
recall class 0 = 0.985008
recall class 1 = 0.358811
false negative rate = 0.641189
false positive rate = 0.014993
positive prediction rate = 0.051196
AUC of ROC = 0.891943
AUC of PRC = 0.608848
min(+P, Se) = 0.555085

-------------------------------

confusion matrix:
[[1177   18]
 [  90   53]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.12118499726057053
difference in average predicted and observed risk = 0.014308997260570527
number samples = 1338
accuracy = 0.919282
precision class 0 = 0.928966
precision class 1 = 0.746479
recall class 0 = 0.984937
recall class 1 = 0.370629
false negative rate = 0.629371
false positive rate = 0.015063
positive prediction rate = 0.053064
AUC of ROC = 0.900922
AUC of PRC = 0.611888
min(+P, Se) = 0.559441

-------------------------------

confusion matrix:
[[346   4]
 [ 28  11]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10909400135278702
difference in average predicted and observed risk = 0.008837001352787019
number samples = 389
accuracy = 0.917738
precision class 0 = 0.925134
precision class 1 = 0.733333
recall class 0 = 0.988571
recall class 1 = 0.282051
false negative rate = 0.717949
false positive rate = 0.011429
positive prediction rate = 0.03856
AUC of ROC = 0.887839
AUC of PRC = 0.565177
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[109   2]
 [ 10  12]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16551999747753143
difference in average predicted and observed risk = 0.00010599747753142763
number samples = 133
accuracy = 0.909774
precision class 0 = 0.915966
precision class 1 = 0.857143
recall class 0 = 0.981982
recall class 1 = 0.545455
false negative rate = 0.454545
false positive rate = 0.018018
positive prediction rate = 0.105263
AUC of ROC = 0.920966
AUC of PRC = 0.804503
min(+P, Se) = 0.695652

-------------------------------

confusion matrix:
[[6903   83]
 [ 783  290]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11611299961805344
difference in average predicted and observed risk = -0.017030000381946575
number samples = 8059
accuracy = 0.892542
precision class 0 = 0.898126
precision class 1 = 0.77748
recall class 0 = 0.988119
recall class 1 = 0.27027
false negative rate = 0.72973
false positive rate = 0.011881
positive prediction rate = 0.046284
AUC of ROC = 0.8823
AUC of PRC = 0.606242
min(+P, Se) = 0.557316

-------------------------------

confusion matrix:
[[5648   60]
 [ 681  233]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12470799684524536
difference in average predicted and observed risk = -0.013317003154754647
number samples = 6622
accuracy = 0.8881
precision class 0 = 0.8924
precision class 1 = 0.795222
recall class 0 = 0.989488
recall class 1 = 0.254923
false negative rate = 0.745077
false positive rate = 0.010512
positive prediction rate = 0.044246
AUC of ROC = 0.875648
AUC of PRC = 0.594323
min(+P, Se) = 0.552432

-------------------------------

confusion matrix:
[[8958   88]
 [1037  326]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11503700166940689
difference in average predicted and observed risk = -0.015906998330593114
number samples = 10409
accuracy = 0.89192
precision class 0 = 0.896248
precision class 1 = 0.78744
recall class 0 = 0.990272
recall class 1 = 0.239178
false negative rate = 0.760822
false positive rate = 0.009728
positive prediction rate = 0.039773
AUC of ROC = 0.877058
AUC of PRC = 0.583287
min(+P, Se) = 0.537784

-------------------------------

confusion matrix:
[[1615   26]
 [ 282  125]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14481200277805328
difference in average predicted and observed risk = -0.053917997221946706
number samples = 2048
accuracy = 0.849609
precision class 0 = 0.851344
precision class 1 = 0.827815
recall class 0 = 0.984156
recall class 1 = 0.307125
false negative rate = 0.692875
false positive rate = 0.015844
positive prediction rate = 0.07373
AUC of ROC = 0.889105
AUC of PRC = 0.6993
min(+P, Se) = 0.643735

-------------------------------

confusion matrix:
[[1269   13]
 [  84   42]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11447600275278091
difference in average predicted and observed risk = 0.024987002752780915
number samples = 1408
accuracy = 0.931108
precision class 0 = 0.937916
precision class 1 = 0.763636
recall class 0 = 0.98986
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.01014
positive prediction rate = 0.039062
AUC of ROC = 0.883528
AUC of PRC = 0.541371
min(+P, Se) = 0.531746

-------------------------------

confusion matrix:
[[288   8]
 [ 34  18]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1499740034341812
difference in average predicted and observed risk = 0.0005490034341812111
number samples = 348
accuracy = 0.87931
precision class 0 = 0.89441
precision class 1 = 0.692308
recall class 0 = 0.972973
recall class 1 = 0.346154
false negative rate = 0.653846
false positive rate = 0.027027
positive prediction rate = 0.074713
AUC of ROC = 0.876299
AUC of PRC = 0.636392
min(+P, Se) = 0.596154

-------------------------------

confusion matrix:
[[421   8]
 [ 27  12]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11580800265073776
difference in average predicted and observed risk = 0.03247500265073776
number samples = 468
accuracy = 0.925214
precision class 0 = 0.939732
precision class 1 = 0.6
recall class 0 = 0.981352
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.018648
positive prediction rate = 0.042735
AUC of ROC = 0.852489
AUC of PRC = 0.508488
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[12551   143]
 [ 1464   523]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11998999863862991
difference in average predicted and observed risk = -0.01535500136137008
number samples = 14681
accuracy = 0.890539
precision class 0 = 0.89554
precision class 1 = 0.785285
recall class 0 = 0.988735
recall class 1 = 0.263211
false negative rate = 0.736789
false positive rate = 0.011265
positive prediction rate = 0.045365
AUC of ROC = 0.879095
AUC of PRC = 0.600409
min(+P, Se) = 0.555053

-------------------------------

==>predicting on validation



confusion matrix:
[[1514   21]
 [ 210   68]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1289539933204651
difference in average predicted and observed risk = -0.024383006679534913
number samples = 1813
accuracy = 0.872587
precision class 0 = 0.87819
precision class 1 = 0.764045
recall class 0 = 0.986319
recall class 1 = 0.244604
false negative rate = 0.755396
false positive rate = 0.013681
positive prediction rate = 0.04909
AUC of ROC = 0.862271
AUC of PRC = 0.591139
min(+P, Se) = 0.532374

-------------------------------

confusion matrix:
[[891  16]
 [ 88  25]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11243700236082077
difference in average predicted and observed risk = 0.0016530023608207767
number samples = 1020
accuracy = 0.898039
precision class 0 = 0.910112
precision class 1 = 0.609756
recall class 0 = 0.982359
recall class 1 = 0.221239
false negative rate = 0.778761
false positive rate = 0.017641
positive prediction rate = 0.040196
AUC of ROC = 0.847948
AUC of PRC = 0.468202
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[245   6]
 [ 22  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13211899995803833
difference in average predicted and observed risk = 0.012820999958038329
number samples = 285
accuracy = 0.901754
precision class 0 = 0.917603
precision class 1 = 0.666667
recall class 0 = 0.976096
recall class 1 = 0.352941
false negative rate = 0.647059
false positive rate = 0.023904
positive prediction rate = 0.063158
AUC of ROC = 0.894891
AUC of PRC = 0.621965
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10717300325632095
difference in average predicted and observed risk = 0.01742900325632095
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.726358
AUC of PRC = 0.382494
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19382800161838531
difference in average predicted and observed risk = 0.039982001618385304
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1503   26]
 [ 181   63]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12313300371170044
difference in average predicted and observed risk = -0.014486996288299553
number samples = 1773
accuracy = 0.883249
precision class 0 = 0.892518
precision class 1 = 0.707865
recall class 0 = 0.982995
recall class 1 = 0.258197
false negative rate = 0.741803
false positive rate = 0.017005
positive prediction rate = 0.050197
AUC of ROC = 0.860414
AUC of PRC = 0.556325
min(+P, Se) = 0.528689

-------------------------------

confusion matrix:
[[1237   20]
 [ 145   47]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12506400048732758
difference in average predicted and observed risk = -0.007440999512672436
number samples = 1449
accuracy = 0.886128
precision class 0 = 0.89508
precision class 1 = 0.701493
recall class 0 = 0.984089
recall class 1 = 0.244792
false negative rate = 0.755208
false positive rate = 0.015911
positive prediction rate = 0.046239
AUC of ROC = 0.859346
AUC of PRC = 0.555561
min(+P, Se) = 0.507772

-------------------------------

confusion matrix:
[[1947   31]
 [ 233   78]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12205299735069275
difference in average predicted and observed risk = -0.013814002649307239
number samples = 2289
accuracy = 0.884666
precision class 0 = 0.893119
precision class 1 = 0.715596
recall class 0 = 0.984328
recall class 1 = 0.250804
false negative rate = 0.749196
false positive rate = 0.015672
positive prediction rate = 0.047619
AUC of ROC = 0.858002
AUC of PRC = 0.551773
min(+P, Se) = 0.50641

-------------------------------

confusion matrix:
[[362   6]
 [ 61  20]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13820700347423553
difference in average predicted and observed risk = -0.04219399652576447
number samples = 449
accuracy = 0.85078
precision class 0 = 0.855792
precision class 1 = 0.769231
recall class 0 = 0.983696
recall class 1 = 0.246914
false negative rate = 0.753086
false positive rate = 0.016304
positive prediction rate = 0.057906
AUC of ROC = 0.86356
AUC of PRC = 0.636911
min(+P, Se) = 0.592593

-------------------------------

confusion matrix:
[[273   5]
 [ 22   8]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11445800215005875
difference in average predicted and observed risk = 0.017055002150058743
number samples = 308
accuracy = 0.912338
precision class 0 = 0.925424
precision class 1 = 0.615385
recall class 0 = 0.982014
recall class 1 = 0.266667
false negative rate = 0.733333
false positive rate = 0.017986
positive prediction rate = 0.042208
AUC of ROC = 0.87494
AUC of PRC = 0.511762
min(+P, Se) = 0.484848

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11096999794244766
difference in average predicted and observed risk = 0.038804997942447655
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.880952
AUC of PRC = 0.37718
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15293200314044952
difference in average predicted and observed risk = 0.06432400314044952
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.857143
AUC of PRC = 0.663141
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[2740   46]
 [ 326  110]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12400200217962265
difference in average predicted and observed risk = -0.011317997820377346
number samples = 3222
accuracy = 0.884544
precision class 0 = 0.893673
precision class 1 = 0.705128
recall class 0 = 0.983489
recall class 1 = 0.252294
false negative rate = 0.747706
false positive rate = 0.016511
positive prediction rate = 0.048417
AUC of ROC = 0.859803
AUC of PRC = 0.555447
min(+P, Se) = 0.518349

-------------------------------

Epoch 00022: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch22.state
Epoch 23/100
 - 815s - loss: 0.2833 - val_loss: 0.2846

==>predicting on train



confusion matrix:
[[6975   61]
 [1026  286]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.10723800212144852
difference in average predicted and observed risk = -0.04992499787855148
number samples = 8348
accuracy = 0.869789
precision class 0 = 0.871766
precision class 1 = 0.824207
recall class 0 = 0.99133
recall class 1 = 0.217988
false negative rate = 0.782012
false positive rate = 0.00867
positive prediction rate = 0.041567
AUC of ROC = 0.871238
AUC of PRC = 0.607916
min(+P, Se) = 0.5625

-------------------------------

confusion matrix:
[[3942   60]
 [ 307  164]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.09585999697446823
difference in average predicted and observed risk = -0.009438003025531772
number samples = 4473
accuracy = 0.917952
precision class 0 = 0.927748
precision class 1 = 0.732143
recall class 0 = 0.985008
recall class 1 = 0.348195
false negative rate = 0.651805
false positive rate = 0.014993
positive prediction rate = 0.050078
AUC of ROC = 0.897004
AUC of PRC = 0.612721
min(+P, Se) = 0.547569

-------------------------------

confusion matrix:
[[1176   19]
 [  93   50]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10424400120973587
difference in average predicted and observed risk = -0.0026319987902641284
number samples = 1338
accuracy = 0.916293
precision class 0 = 0.926714
precision class 1 = 0.724638
recall class 0 = 0.9841
recall class 1 = 0.34965
false negative rate = 0.65035
false positive rate = 0.0159
positive prediction rate = 0.05157
AUC of ROC = 0.904363
AUC of PRC = 0.597002
min(+P, Se) = 0.573427

-------------------------------

confusion matrix:
[[347   3]
 [ 25  14]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09278900176286697
difference in average predicted and observed risk = -0.007467998237133025
number samples = 389
accuracy = 0.928021
precision class 0 = 0.932796
precision class 1 = 0.823529
recall class 0 = 0.991429
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.008571
positive prediction rate = 0.043702
AUC of ROC = 0.891429
AUC of PRC = 0.598696
min(+P, Se) = 0.585366

-------------------------------

confusion matrix:
[[109   2]
 [ 10  12]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1559309959411621
difference in average predicted and observed risk = -0.009483004058837896
number samples = 133
accuracy = 0.909774
precision class 0 = 0.915966
precision class 1 = 0.857143
recall class 0 = 0.981982
recall class 1 = 0.545455
false negative rate = 0.454545
false positive rate = 0.018018
positive prediction rate = 0.105263
AUC of ROC = 0.929156
AUC of PRC = 0.798758
min(+P, Se) = 0.681818

-------------------------------

confusion matrix:
[[6906   80]
 [ 778  295]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.10063000023365021
difference in average predicted and observed risk = -0.032512999766349804
number samples = 8059
accuracy = 0.893535
precision class 0 = 0.898751
precision class 1 = 0.786667
recall class 0 = 0.988549
recall class 1 = 0.27493
false negative rate = 0.72507
false positive rate = 0.011451
positive prediction rate = 0.046532
AUC of ROC = 0.886447
AUC of PRC = 0.612831
min(+P, Se) = 0.561044

-------------------------------

confusion matrix:
[[5643   65]
 [ 683  231]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.10711900144815445
difference in average predicted and observed risk = -0.03090599855184556
number samples = 6622
accuracy = 0.887043
precision class 0 = 0.892033
precision class 1 = 0.780405
recall class 0 = 0.988612
recall class 1 = 0.252735
false negative rate = 0.747265
false positive rate = 0.011388
positive prediction rate = 0.044699
AUC of ROC = 0.878461
AUC of PRC = 0.596045
min(+P, Se) = 0.556893

-------------------------------

confusion matrix:
[[8956   90]
 [1029  334]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.0985340029001236
difference in average predicted and observed risk = -0.03240999709987641
number samples = 10409
accuracy = 0.892497
precision class 0 = 0.896945
precision class 1 = 0.787736
recall class 0 = 0.990051
recall class 1 = 0.245048
false negative rate = 0.754952
false positive rate = 0.009949
positive prediction rate = 0.040734
AUC of ROC = 0.880724
AUC of PRC = 0.587993
min(+P, Se) = 0.542857

-------------------------------

confusion matrix:
[[1617   24]
 [ 283  124]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.13084599375724792
difference in average predicted and observed risk = -0.06788400624275207
number samples = 2048
accuracy = 0.850098
precision class 0 = 0.851053
precision class 1 = 0.837838
recall class 0 = 0.985375
recall class 1 = 0.304668
false negative rate = 0.695332
false positive rate = 0.014625
positive prediction rate = 0.072266
AUC of ROC = 0.891365
AUC of PRC = 0.702199
min(+P, Se) = 0.653563

-------------------------------

confusion matrix:
[[1266   16]
 [  84   42]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.0966859981417656
difference in average predicted and observed risk = 0.007196998141765595
number samples = 1408
accuracy = 0.928977
precision class 0 = 0.937778
precision class 1 = 0.724138
recall class 0 = 0.98752
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.01248
positive prediction rate = 0.041193
AUC of ROC = 0.890981
AUC of PRC = 0.551161
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[289   7]
 [ 35  17]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.13098600506782532
difference in average predicted and observed risk = -0.018438994932174685
number samples = 348
accuracy = 0.87931
precision class 0 = 0.891975
precision class 1 = 0.708333
recall class 0 = 0.976351
recall class 1 = 0.326923
false negative rate = 0.673077
false positive rate = 0.023649
positive prediction rate = 0.068966
AUC of ROC = 0.87539
AUC of PRC = 0.634938
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[421   8]
 [ 30   9]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.09612199664115906
difference in average predicted and observed risk = 0.012788996641159053
number samples = 468
accuracy = 0.918803
precision class 0 = 0.933481
precision class 1 = 0.529412
recall class 0 = 0.981352
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.018648
positive prediction rate = 0.036325
AUC of ROC = 0.856733
AUC of PRC = 0.492835
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[12549   145]
 [ 1461   526]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.10355699807405472
difference in average predicted and observed risk = -0.031788001925945275
number samples = 14681
accuracy = 0.890607
precision class 0 = 0.895717
precision class 1 = 0.783905
recall class 0 = 0.988577
recall class 1 = 0.264721
false negative rate = 0.735279
false positive rate = 0.011423
positive prediction rate = 0.045705
AUC of ROC = 0.882675
AUC of PRC = 0.604945
min(+P, Se) = 0.559075

-------------------------------

==>predicting on validation



confusion matrix:
[[1514   21]
 [ 206   72]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.11150900274515152
difference in average predicted and observed risk = -0.04182799725484848
number samples = 1813
accuracy = 0.874793
precision class 0 = 0.880233
precision class 1 = 0.774194
recall class 0 = 0.986319
recall class 1 = 0.258993
false negative rate = 0.741007
false positive rate = 0.013681
positive prediction rate = 0.051296
AUC of ROC = 0.861003
AUC of PRC = 0.597156
min(+P, Se) = 0.53405

-------------------------------

confusion matrix:
[[891  16]
 [ 86  27]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.09682100266218185
difference in average predicted and observed risk = -0.01396299733781814
number samples = 1020
accuracy = 0.9
precision class 0 = 0.911975
precision class 1 = 0.627907
recall class 0 = 0.982359
recall class 1 = 0.238938
false negative rate = 0.761062
false positive rate = 0.017641
positive prediction rate = 0.042157
AUC of ROC = 0.85267
AUC of PRC = 0.474291
min(+P, Se) = 0.451327

-------------------------------

confusion matrix:
[[246   5]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.11882200092077255
difference in average predicted and observed risk = -0.0004759990792274488
number samples = 285
accuracy = 0.912281
precision class 0 = 0.924812
precision class 1 = 0.736842
recall class 0 = 0.98008
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.01992
positive prediction rate = 0.066667
AUC of ROC = 0.904617
AUC of PRC = 0.633061
min(+P, Se) = 0.617647

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08886700123548508
difference in average predicted and observed risk = -0.0008769987645149274
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.722334
AUC of PRC = 0.390111
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1962680071592331
difference in average predicted and observed risk = 0.04242200715923308
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1499   30]
 [ 175   69]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.10813499987125397
difference in average predicted and observed risk = -0.029485000128746025
number samples = 1773
accuracy = 0.884377
precision class 0 = 0.89546
precision class 1 = 0.69697
recall class 0 = 0.980379
recall class 1 = 0.282787
false negative rate = 0.717213
false positive rate = 0.019621
positive prediction rate = 0.055838
AUC of ROC = 0.861669
AUC of PRC = 0.556508
min(+P, Se) = 0.517787

-------------------------------

confusion matrix:
[[1242   15]
 [ 143   49]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.10703899711370468
difference in average predicted and observed risk = -0.02546600288629533
number samples = 1449
accuracy = 0.890959
precision class 0 = 0.896751
precision class 1 = 0.765625
recall class 0 = 0.988067
recall class 1 = 0.255208
false negative rate = 0.744792
false positive rate = 0.011933
positive prediction rate = 0.044168
AUC of ROC = 0.862561
AUC of PRC = 0.570967
min(+P, Se) = 0.530928

-------------------------------

confusion matrix:
[[1950   28]
 [ 225   86]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.10539499670267105
difference in average predicted and observed risk = -0.030472003297328937
number samples = 2289
accuracy = 0.889471
precision class 0 = 0.896552
precision class 1 = 0.754386
recall class 0 = 0.985844
recall class 1 = 0.276527
false negative rate = 0.723473
false positive rate = 0.014156
positive prediction rate = 0.049803
AUC of ROC = 0.86062
AUC of PRC = 0.562851
min(+P, Se) = 0.527157

-------------------------------

confusion matrix:
[[359   9]
 [ 61  20]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.12367600202560425
difference in average predicted and observed risk = -0.05672499797439576
number samples = 449
accuracy = 0.844098
precision class 0 = 0.854762
precision class 1 = 0.689655
recall class 0 = 0.975543
recall class 1 = 0.246914
false negative rate = 0.753086
false positive rate = 0.024457
positive prediction rate = 0.064588
AUC of ROC = 0.859501
AUC of PRC = 0.618214
min(+P, Se) = 0.585366

-------------------------------

confusion matrix:
[[273   5]
 [ 22   8]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.09932699799537659
difference in average predicted and observed risk = 0.0019239979953765834
number samples = 308
accuracy = 0.912338
precision class 0 = 0.925424
precision class 1 = 0.615385
recall class 0 = 0.982014
recall class 1 = 0.266667
false negative rate = 0.733333
false positive rate = 0.017986
positive prediction rate = 0.042208
AUC of ROC = 0.881894
AUC of PRC = 0.517235
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.09468799829483032
difference in average predicted and observed risk = 0.022522998294830315
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.868254
AUC of PRC = 0.368508
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.12994199991226196
difference in average predicted and observed risk = 0.04133399991226196
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.867063
AUC of PRC = 0.660507
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2741   45]
 [ 318  118]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.10764200240373611
difference in average predicted and observed risk = -0.02767799759626388
number samples = 3222
accuracy = 0.887337
precision class 0 = 0.896044
precision class 1 = 0.723926
recall class 0 = 0.983848
recall class 1 = 0.270642
false negative rate = 0.729358
false positive rate = 0.016152
positive prediction rate = 0.05059
AUC of ROC = 0.861607
AUC of PRC = 0.562393
min(+P, Se) = 0.522727

-------------------------------

Epoch 00023: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch23.state
Epoch 24/100
 - 815s - loss: 0.2826 - val_loss: 0.2818

==>predicting on train



confusion matrix:
[[6980   56]
 [1047  265]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12260500341653824
difference in average predicted and observed risk = -0.03455799658346176
number samples = 8348
accuracy = 0.867873
precision class 0 = 0.869565
precision class 1 = 0.825545
recall class 0 = 0.992041
recall class 1 = 0.201982
false negative rate = 0.798018
false positive rate = 0.007959
positive prediction rate = 0.038452
AUC of ROC = 0.871536
AUC of PRC = 0.612121
min(+P, Se) = 0.560776

-------------------------------

confusion matrix:
[[3959   43]
 [ 313  158]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10612999647855759
difference in average predicted and observed risk = 0.000831996478557584
number samples = 4473
accuracy = 0.920411
precision class 0 = 0.926732
precision class 1 = 0.78607
recall class 0 = 0.989255
recall class 1 = 0.335456
false negative rate = 0.664544
false positive rate = 0.010745
positive prediction rate = 0.044936
AUC of ROC = 0.905843
AUC of PRC = 0.630018
min(+P, Se) = 0.563559

-------------------------------

confusion matrix:
[[1182   13]
 [  96   47]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11452200263738632
difference in average predicted and observed risk = 0.007646002637386323
number samples = 1338
accuracy = 0.918535
precision class 0 = 0.924883
precision class 1 = 0.783333
recall class 0 = 0.989121
recall class 1 = 0.328671
false negative rate = 0.671329
false positive rate = 0.010879
positive prediction rate = 0.044843
AUC of ROC = 0.906259
AUC of PRC = 0.612443
min(+P, Se) = 0.587413

-------------------------------

confusion matrix:
[[347   3]
 [ 26  13]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10465700179338455
difference in average predicted and observed risk = 0.004400001793384553
number samples = 389
accuracy = 0.92545
precision class 0 = 0.930295
precision class 1 = 0.8125
recall class 0 = 0.991429
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.008571
positive prediction rate = 0.041131
AUC of ROC = 0.895018
AUC of PRC = 0.609788
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[110   1]
 [ 10  12]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.15947900712490082
difference in average predicted and observed risk = -0.005934992875099188
number samples = 133
accuracy = 0.917293
precision class 0 = 0.916667
precision class 1 = 0.923077
recall class 0 = 0.990991
recall class 1 = 0.545455
false negative rate = 0.454545
false positive rate = 0.009009
positive prediction rate = 0.097744
AUC of ROC = 0.913595
AUC of PRC = 0.809491
min(+P, Se) = 0.695652

-------------------------------

confusion matrix:
[[6923   63]
 [ 799  274]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11270499974489212
difference in average predicted and observed risk = -0.02043800025510789
number samples = 8059
accuracy = 0.893039
precision class 0 = 0.896529
precision class 1 = 0.813056
recall class 0 = 0.990982
recall class 1 = 0.255359
false negative rate = 0.744641
false positive rate = 0.009018
positive prediction rate = 0.041817
AUC of ROC = 0.890615
AUC of PRC = 0.624264
min(+P, Se) = 0.57261

-------------------------------

confusion matrix:
[[5655   53]
 [ 693  221]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12157800048589706
difference in average predicted and observed risk = -0.016446999514102945
number samples = 6622
accuracy = 0.887345
precision class 0 = 0.890832
precision class 1 = 0.806569
recall class 0 = 0.990715
recall class 1 = 0.241794
false negative rate = 0.758206
false positive rate = 0.009285
positive prediction rate = 0.041377
AUC of ROC = 0.880046
AUC of PRC = 0.602648
min(+P, Se) = 0.555799

-------------------------------

confusion matrix:
[[8976   70]
 [1053  310]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11265400052070618
difference in average predicted and observed risk = -0.018289999479293828
number samples = 10409
accuracy = 0.892113
precision class 0 = 0.895005
precision class 1 = 0.815789
recall class 0 = 0.992262
recall class 1 = 0.227439
false negative rate = 0.772561
false positive rate = 0.007738
positive prediction rate = 0.036507
AUC of ROC = 0.883701
AUC of PRC = 0.597879
min(+P, Se) = 0.551573

-------------------------------

confusion matrix:
[[1620   21]
 [ 291  116]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1390089988708496
difference in average predicted and observed risk = -0.05972100112915038
number samples = 2048
accuracy = 0.847656
precision class 0 = 0.847724
precision class 1 = 0.846715
recall class 0 = 0.987203
recall class 1 = 0.285012
false negative rate = 0.714988
false positive rate = 0.012797
positive prediction rate = 0.066895
AUC of ROC = 0.894345
AUC of PRC = 0.708975
min(+P, Se) = 0.643735

-------------------------------

confusion matrix:
[[1267   15]
 [  86   40]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.1101519986987114
difference in average predicted and observed risk = 0.020662998698711396
number samples = 1408
accuracy = 0.928267
precision class 0 = 0.936438
precision class 1 = 0.727273
recall class 0 = 0.9883
recall class 1 = 0.31746
false negative rate = 0.68254
false positive rate = 0.0117
positive prediction rate = 0.039062
AUC of ROC = 0.89547
AUC of PRC = 0.575961
min(+P, Se) = 0.587302

-------------------------------

confusion matrix:
[[293   3]
 [ 34  18]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.142753005027771
difference in average predicted and observed risk = -0.006671994972229006
number samples = 348
accuracy = 0.893678
precision class 0 = 0.896024
precision class 1 = 0.857143
recall class 0 = 0.989865
recall class 1 = 0.346154
false negative rate = 0.653846
false positive rate = 0.010135
positive prediction rate = 0.060345
AUC of ROC = 0.880782
AUC of PRC = 0.657151
min(+P, Se) = 0.576923

-------------------------------

confusion matrix:
[[422   7]
 [ 28  11]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10961899906396866
difference in average predicted and observed risk = 0.026285999063968654
number samples = 468
accuracy = 0.925214
precision class 0 = 0.937778
precision class 1 = 0.611111
recall class 0 = 0.983683
recall class 1 = 0.282051
false negative rate = 0.717949
false positive rate = 0.016317
positive prediction rate = 0.038462
AUC of ROC = 0.865579
AUC of PRC = 0.490725
min(+P, Se) = 0.487179

-------------------------------

confusion matrix:
[[12578   116]
 [ 1492   495]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11670699715614319
difference in average predicted and observed risk = -0.018638002843856805
number samples = 14681
accuracy = 0.890471
precision class 0 = 0.893959
precision class 1 = 0.810147
recall class 0 = 0.990862
recall class 1 = 0.249119
false negative rate = 0.750881
false positive rate = 0.009138
positive prediction rate = 0.041618
AUC of ROC = 0.885781
AUC of PRC = 0.614221
min(+P, Se) = 0.565392

-------------------------------

==>predicting on validation



confusion matrix:
[[1517   18]
 [ 214   64]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12654200196266174
difference in average predicted and observed risk = -0.026794998037338258
number samples = 1813
accuracy = 0.872035
precision class 0 = 0.876372
precision class 1 = 0.780488
recall class 0 = 0.988274
recall class 1 = 0.230216
false negative rate = 0.769784
false positive rate = 0.011726
positive prediction rate = 0.045229
AUC of ROC = 0.854477
AUC of PRC = 0.586769
min(+P, Se) = 0.546763

-------------------------------

confusion matrix:
[[896  11]
 [ 91  22]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10695599764585495
difference in average predicted and observed risk = -0.0038280023541450436
number samples = 1020
accuracy = 0.9
precision class 0 = 0.907801
precision class 1 = 0.666667
recall class 0 = 0.987872
recall class 1 = 0.19469
false negative rate = 0.80531
false positive rate = 0.012128
positive prediction rate = 0.032353
AUC of ROC = 0.855802
AUC of PRC = 0.47836
min(+P, Se) = 0.472868

-------------------------------

confusion matrix:
[[246   5]
 [ 22  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12823399901390076
difference in average predicted and observed risk = 0.008935999013900756
number samples = 285
accuracy = 0.905263
precision class 0 = 0.91791
precision class 1 = 0.705882
recall class 0 = 0.98008
recall class 1 = 0.352941
false negative rate = 0.647059
false positive rate = 0.01992
positive prediction rate = 0.059649
AUC of ROC = 0.903797
AUC of PRC = 0.631619
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10112500190734863
difference in average predicted and observed risk = 0.011381001907348628
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.754527
AUC of PRC = 0.374363
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17982999980449677
difference in average predicted and observed risk = 0.025983999804496755
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1506   23]
 [ 187   57]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11875700205564499
difference in average predicted and observed risk = -0.018862997944355003
number samples = 1773
accuracy = 0.881557
precision class 0 = 0.889545
precision class 1 = 0.7125
recall class 0 = 0.984958
recall class 1 = 0.233607
false negative rate = 0.766393
false positive rate = 0.015043
positive prediction rate = 0.045121
AUC of ROC = 0.860717
AUC of PRC = 0.558909
min(+P, Se) = 0.530612

-------------------------------

confusion matrix:
[[1243   14]
 [ 147   45]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12220200151205063
difference in average predicted and observed risk = -0.010302998487949383
number samples = 1449
accuracy = 0.888889
precision class 0 = 0.894245
precision class 1 = 0.762712
recall class 0 = 0.988862
recall class 1 = 0.234375
false negative rate = 0.765625
false positive rate = 0.011138
positive prediction rate = 0.040718
AUC of ROC = 0.85959
AUC of PRC = 0.565452
min(+P, Se) = 0.541872

-------------------------------

confusion matrix:
[[1951   27]
 [ 238   73]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11897099763154984
difference in average predicted and observed risk = -0.016896002368450153
number samples = 2289
accuracy = 0.884229
precision class 0 = 0.891275
precision class 1 = 0.73
recall class 0 = 0.98635
recall class 1 = 0.234727
false negative rate = 0.765273
false positive rate = 0.01365
positive prediction rate = 0.043687
AUC of ROC = 0.856642
AUC of PRC = 0.5587
min(+P, Se) = 0.530159

-------------------------------

confusion matrix:
[[365   3]
 [ 63  18]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13065800070762634
difference in average predicted and observed risk = -0.04974299929237366
number samples = 449
accuracy = 0.853007
precision class 0 = 0.852804
precision class 1 = 0.857143
recall class 0 = 0.991848
recall class 1 = 0.222222
false negative rate = 0.777778
false positive rate = 0.008152
positive prediction rate = 0.046771
AUC of ROC = 0.864567
AUC of PRC = 0.631916
min(+P, Se) = 0.607143

-------------------------------

confusion matrix:
[[274   4]
 [ 23   7]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11358799785375595
difference in average predicted and observed risk = 0.016184997853755947
number samples = 308
accuracy = 0.912338
precision class 0 = 0.922559
precision class 1 = 0.636364
recall class 0 = 0.985611
recall class 1 = 0.233333
false negative rate = 0.766667
false positive rate = 0.014388
positive prediction rate = 0.035714
AUC of ROC = 0.882374
AUC of PRC = 0.515687
min(+P, Se) = 0.485714

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10529100149869919
difference in average predicted and observed risk = 0.03312600149869918
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.869841
AUC of PRC = 0.372998
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14478300511837006
difference in average predicted and observed risk = 0.05617500511837005
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.849206
AUC of PRC = 0.655113
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2749   37]
 [ 334  102]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12030600011348724
difference in average predicted and observed risk = -0.015013999886512752
number samples = 3222
accuracy = 0.884854
precision class 0 = 0.891664
precision class 1 = 0.733813
recall class 0 = 0.986719
recall class 1 = 0.233945
false negative rate = 0.766055
false positive rate = 0.013281
positive prediction rate = 0.043141
AUC of ROC = 0.859576
AUC of PRC = 0.560711
min(+P, Se) = 0.534831

-------------------------------

Epoch 00024: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch24.state
Epoch 25/100
 - 814s - loss: 0.2820 - val_loss: 0.2805

==>predicting on train



confusion matrix:
[[6970   66]
 [ 997  315]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12872099876403809
difference in average predicted and observed risk = -0.02844200123596191
number samples = 8348
accuracy = 0.872664
precision class 0 = 0.874859
precision class 1 = 0.826772
recall class 0 = 0.99062
recall class 1 = 0.240091
false negative rate = 0.759909
false positive rate = 0.00938
positive prediction rate = 0.04564
AUC of ROC = 0.873754
AUC of PRC = 0.624224
min(+P, Se) = 0.565549

-------------------------------

confusion matrix:
[[3945   57]
 [ 291  180]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10900600254535675
difference in average predicted and observed risk = 0.0037080025453567478
number samples = 4473
accuracy = 0.9222
precision class 0 = 0.931303
precision class 1 = 0.759494
recall class 0 = 0.985757
recall class 1 = 0.382166
false negative rate = 0.617834
false positive rate = 0.014243
positive prediction rate = 0.052985
AUC of ROC = 0.903983
AUC of PRC = 0.634212
min(+P, Se) = 0.569915

-------------------------------

confusion matrix:
[[1178   17]
 [  89   54]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11835899949073792
difference in average predicted and observed risk = 0.011482999490737916
number samples = 1338
accuracy = 0.920777
precision class 0 = 0.929755
precision class 1 = 0.760563
recall class 0 = 0.985774
recall class 1 = 0.377622
false negative rate = 0.622378
false positive rate = 0.014226
positive prediction rate = 0.053064
AUC of ROC = 0.904246
AUC of PRC = 0.622666
min(+P, Se) = 0.573427

-------------------------------

confusion matrix:
[[347   3]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.1068819984793663
difference in average predicted and observed risk = 0.006624998479366304
number samples = 389
accuracy = 0.935733
precision class 0 = 0.940379
precision class 1 = 0.85
recall class 0 = 0.991429
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.008571
positive prediction rate = 0.051414
AUC of ROC = 0.890476
AUC of PRC = 0.635606
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[109   2]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16216300427913666
difference in average predicted and observed risk = -0.0032509957208633478
number samples = 133
accuracy = 0.924812
precision class 0 = 0.931624
precision class 1 = 0.875
recall class 0 = 0.981982
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.018018
positive prediction rate = 0.120301
AUC of ROC = 0.916462
AUC of PRC = 0.814028
min(+P, Se) = 0.75

-------------------------------

confusion matrix:
[[6903   83]
 [ 755  318]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11605799943208694
difference in average predicted and observed risk = -0.017085000567913067
number samples = 8059
accuracy = 0.896017
precision class 0 = 0.90141
precision class 1 = 0.793017
recall class 0 = 0.988119
recall class 1 = 0.296365
false negative rate = 0.703635
false positive rate = 0.011881
positive prediction rate = 0.049758
AUC of ROC = 0.890772
AUC of PRC = 0.629861
min(+P, Se) = 0.581547

-------------------------------

confusion matrix:
[[5646   62]
 [ 652  262]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12811000645160675
difference in average predicted and observed risk = -0.009914993548393258
number samples = 6622
accuracy = 0.892178
precision class 0 = 0.896475
precision class 1 = 0.808642
recall class 0 = 0.989138
recall class 1 = 0.286652
false negative rate = 0.713348
false positive rate = 0.010862
positive prediction rate = 0.048928
AUC of ROC = 0.881578
AUC of PRC = 0.619167
min(+P, Se) = 0.563795

-------------------------------

confusion matrix:
[[8957   89]
 [ 999  364]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11727499961853027
difference in average predicted and observed risk = -0.013669000381469731
number samples = 10409
accuracy = 0.895475
precision class 0 = 0.899659
precision class 1 = 0.803532
recall class 0 = 0.990161
recall class 1 = 0.267058
false negative rate = 0.732942
false positive rate = 0.009839
positive prediction rate = 0.04352
AUC of ROC = 0.884361
AUC of PRC = 0.607986
min(+P, Se) = 0.559795

-------------------------------

confusion matrix:
[[1615   26]
 [ 269  138]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14574000239372253
difference in average predicted and observed risk = -0.052989997606277456
number samples = 2048
accuracy = 0.855957
precision class 0 = 0.857219
precision class 1 = 0.841463
recall class 0 = 0.984156
recall class 1 = 0.339066
false negative rate = 0.660934
false positive rate = 0.015844
positive prediction rate = 0.080078
AUC of ROC = 0.895392
AUC of PRC = 0.719241
min(+P, Se) = 0.633907

-------------------------------

confusion matrix:
[[1268   14]
 [  81   45]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.1132109984755516
difference in average predicted and observed risk = 0.023721998475551606
number samples = 1408
accuracy = 0.932528
precision class 0 = 0.939956
precision class 1 = 0.762712
recall class 0 = 0.98908
recall class 1 = 0.357143
false negative rate = 0.642857
false positive rate = 0.01092
positive prediction rate = 0.041903
AUC of ROC = 0.893006
AUC of PRC = 0.578118
min(+P, Se) = 0.587302

-------------------------------

confusion matrix:
[[289   7]
 [ 33  19]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.15013200044631958
difference in average predicted and observed risk = 0.0007070004463195778
number samples = 348
accuracy = 0.885057
precision class 0 = 0.897516
precision class 1 = 0.730769
recall class 0 = 0.976351
recall class 1 = 0.365385
false negative rate = 0.634615
false positive rate = 0.023649
positive prediction rate = 0.074713
AUC of ROC = 0.876104
AUC of PRC = 0.648023
min(+P, Se) = 0.603774

-------------------------------

confusion matrix:
[[420   9]
 [ 25  14]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11284700036048889
difference in average predicted and observed risk = 0.029514000360488887
number samples = 468
accuracy = 0.92735
precision class 0 = 0.94382
precision class 1 = 0.608696
recall class 0 = 0.979021
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.020979
positive prediction rate = 0.049145
AUC of ROC = 0.871855
AUC of PRC = 0.539998
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[12549   145]
 [ 1407   580]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12149400264024734
difference in average predicted and observed risk = -0.013850997359752648
number samples = 14681
accuracy = 0.894285
precision class 0 = 0.899183
precision class 1 = 0.8
recall class 0 = 0.988577
recall class 1 = 0.291897
false negative rate = 0.708103
false positive rate = 0.011423
positive prediction rate = 0.049384
AUC of ROC = 0.886442
AUC of PRC = 0.624449
min(+P, Se) = 0.57193

-------------------------------

==>predicting on validation



confusion matrix:
[[1509   26]
 [ 198   80]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13358600437641144
difference in average predicted and observed risk = -0.019750995623588563
number samples = 1813
accuracy = 0.876448
precision class 0 = 0.884007
precision class 1 = 0.754717
recall class 0 = 0.983062
recall class 1 = 0.28777
false negative rate = 0.71223
false positive rate = 0.016938
positive prediction rate = 0.058467
AUC of ROC = 0.855314
AUC of PRC = 0.593288
min(+P, Se) = 0.523297

-------------------------------

confusion matrix:
[[891  16]
 [ 85  28]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.111394003033638
difference in average predicted and observed risk = 0.0006100030336380069
number samples = 1020
accuracy = 0.90098
precision class 0 = 0.91291
precision class 1 = 0.636364
recall class 0 = 0.982359
recall class 1 = 0.247788
false negative rate = 0.752212
false positive rate = 0.017641
positive prediction rate = 0.043137
AUC of ROC = 0.853441
AUC of PRC = 0.483127
min(+P, Se) = 0.464912

-------------------------------

confusion matrix:
[[245   6]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1324470043182373
difference in average predicted and observed risk = 0.013149004318237303
number samples = 285
accuracy = 0.908772
precision class 0 = 0.924528
precision class 1 = 0.7
recall class 0 = 0.976096
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.023904
positive prediction rate = 0.070175
AUC of ROC = 0.898641
AUC of PRC = 0.634427
min(+P, Se) = 0.581395

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10454100370407104
difference in average predicted and observed risk = 0.01479700370407104
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.774648
AUC of PRC = 0.366178
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[20  2]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1914519965648651
difference in average predicted and observed risk = 0.0376059965648651
number samples = 26
accuracy = 0.884615
precision class 0 = 0.952381
precision class 1 = 0.6
recall class 0 = 0.909091
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.090909
positive prediction rate = 0.192308
AUC of ROC = 0.954545
AUC of PRC = 0.795833
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[1498   31]
 [ 171   73]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12372100353240967
difference in average predicted and observed risk = -0.013898996467590324
number samples = 1773
accuracy = 0.886069
precision class 0 = 0.897543
precision class 1 = 0.701923
recall class 0 = 0.979725
recall class 1 = 0.29918
false negative rate = 0.70082
false positive rate = 0.020275
positive prediction rate = 0.058658
AUC of ROC = 0.858538
AUC of PRC = 0.559067
min(+P, Se) = 0.508197

-------------------------------

confusion matrix:
[[1236   21]
 [ 139   53]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.1292870044708252
difference in average predicted and observed risk = -0.0032179955291748163
number samples = 1449
accuracy = 0.889579
precision class 0 = 0.898909
precision class 1 = 0.716216
recall class 0 = 0.983294
recall class 1 = 0.276042
false negative rate = 0.723958
false positive rate = 0.016706
positive prediction rate = 0.05107
AUC of ROC = 0.861641
AUC of PRC = 0.570278
min(+P, Se) = 0.53125

-------------------------------

confusion matrix:
[[1941   37]
 [ 217   94]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12444499880075455
difference in average predicted and observed risk = -0.01142200119924544
number samples = 2289
accuracy = 0.889035
precision class 0 = 0.899444
precision class 1 = 0.717557
recall class 0 = 0.981294
recall class 1 = 0.302251
false negative rate = 0.697749
false positive rate = 0.018706
positive prediction rate = 0.05723
AUC of ROC = 0.855736
AUC of PRC = 0.558466
min(+P, Se) = 0.501608

-------------------------------

confusion matrix:
[[360   8]
 [ 61  20]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1401599943637848
difference in average predicted and observed risk = -0.040241005636215216
number samples = 449
accuracy = 0.846325
precision class 0 = 0.855107
precision class 1 = 0.714286
recall class 0 = 0.978261
recall class 1 = 0.246914
false negative rate = 0.753086
false positive rate = 0.021739
positive prediction rate = 0.062361
AUC of ROC = 0.866579
AUC of PRC = 0.633664
min(+P, Se) = 0.602273

-------------------------------

confusion matrix:
[[274   4]
 [ 22   8]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11767999827861786
difference in average predicted and observed risk = 0.020276998278617855
number samples = 308
accuracy = 0.915584
precision class 0 = 0.925676
precision class 1 = 0.666667
recall class 0 = 0.985611
recall class 1 = 0.266667
false negative rate = 0.733333
false positive rate = 0.014388
positive prediction rate = 0.038961
AUC of ROC = 0.88777
AUC of PRC = 0.540071
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10997600108385086
difference in average predicted and observed risk = 0.037811001083850854
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.866667
AUC of PRC = 0.356661
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15182900428771973
difference in average predicted and observed risk = 0.06322100428771972
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.853175
AUC of PRC = 0.686043
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2734   52]
 [ 310  126]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12622399628162384
difference in average predicted and observed risk = -0.009096003718376156
number samples = 3222
accuracy = 0.887647
precision class 0 = 0.89816
precision class 1 = 0.707865
recall class 0 = 0.981335
recall class 1 = 0.288991
false negative rate = 0.711009
false positive rate = 0.018665
positive prediction rate = 0.055245
AUC of ROC = 0.859352
AUC of PRC = 0.563748
min(+P, Se) = 0.517162

-------------------------------

Epoch 00025: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch25.state
Epoch 26/100
 - 820s - loss: 0.2835 - val_loss: 0.2820

==>predicting on train



confusion matrix:
[[6970   66]
 [ 977  335]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.121738001704216
difference in average predicted and observed risk = -0.035424998295783994
number samples = 8348
accuracy = 0.87506
precision class 0 = 0.877061
precision class 1 = 0.835411
recall class 0 = 0.99062
recall class 1 = 0.255335
false negative rate = 0.744665
false positive rate = 0.00938
positive prediction rate = 0.048035
AUC of ROC = 0.877625
AUC of PRC = 0.630316
min(+P, Se) = 0.575457

-------------------------------

confusion matrix:
[[3936   66]
 [ 285  186]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10688100010156631
difference in average predicted and observed risk = 0.001583000101566312
number samples = 4473
accuracy = 0.921529
precision class 0 = 0.93248
precision class 1 = 0.738095
recall class 0 = 0.983508
recall class 1 = 0.394904
false negative rate = 0.605096
false positive rate = 0.016492
positive prediction rate = 0.056338
AUC of ROC = 0.905618
AUC of PRC = 0.629835
min(+P, Se) = 0.562633

-------------------------------

confusion matrix:
[[1174   21]
 [  92   51]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11493799835443497
difference in average predicted and observed risk = 0.008061998354434968
number samples = 1338
accuracy = 0.915546
precision class 0 = 0.92733
precision class 1 = 0.708333
recall class 0 = 0.982427
recall class 1 = 0.356643
false negative rate = 0.643357
false positive rate = 0.017573
positive prediction rate = 0.053812
AUC of ROC = 0.90675
AUC of PRC = 0.632113
min(+P, Se) = 0.576389

-------------------------------

confusion matrix:
[[344   6]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10513900220394135
difference in average predicted and observed risk = 0.004882002203941346
number samples = 389
accuracy = 0.928021
precision class 0 = 0.939891
precision class 1 = 0.73913
recall class 0 = 0.982857
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.017143
positive prediction rate = 0.059126
AUC of ROC = 0.900147
AUC of PRC = 0.620685
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16625800728797913
difference in average predicted and observed risk = 0.0008440072879791205
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.937346
AUC of PRC = 0.817053
min(+P, Se) = 0.727273

-------------------------------

confusion matrix:
[[6894   92]
 [ 736  337]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11263000220060349
difference in average predicted and observed risk = -0.020512997799396526
number samples = 8059
accuracy = 0.897258
precision class 0 = 0.903539
precision class 1 = 0.785548
recall class 0 = 0.986831
recall class 1 = 0.314073
false negative rate = 0.685927
false positive rate = 0.013169
positive prediction rate = 0.053232
AUC of ROC = 0.894908
AUC of PRC = 0.632233
min(+P, Se) = 0.583411

-------------------------------

confusion matrix:
[[5639   69]
 [ 647  267]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12133300304412842
difference in average predicted and observed risk = -0.01669199695587159
number samples = 6622
accuracy = 0.891876
precision class 0 = 0.897073
precision class 1 = 0.794643
recall class 0 = 0.987912
recall class 1 = 0.292123
false negative rate = 0.707877
false positive rate = 0.012088
positive prediction rate = 0.05074
AUC of ROC = 0.882877
AUC of PRC = 0.620237
min(+P, Se) = 0.568928

-------------------------------

confusion matrix:
[[8941  105]
 [ 981  382]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11227499693632126
difference in average predicted and observed risk = -0.018669003063678746
number samples = 10409
accuracy = 0.895667
precision class 0 = 0.901129
precision class 1 = 0.784394
recall class 0 = 0.988393
recall class 1 = 0.280264
false negative rate = 0.719736
false positive rate = 0.011607
positive prediction rate = 0.046786
AUC of ROC = 0.888048
AUC of PRC = 0.611079
min(+P, Se) = 0.56085

-------------------------------

confusion matrix:
[[1617   24]
 [ 264  143]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14061200618743896
difference in average predicted and observed risk = -0.058117993812561025
number samples = 2048
accuracy = 0.859375
precision class 0 = 0.859649
precision class 1 = 0.856287
recall class 0 = 0.985375
recall class 1 = 0.351351
false negative rate = 0.648649
false positive rate = 0.014625
positive prediction rate = 0.081543
AUC of ROC = 0.897477
AUC of PRC = 0.719467
min(+P, Se) = 0.63747

-------------------------------

confusion matrix:
[[1266   16]
 [  81   45]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10851100087165833
difference in average predicted and observed risk = 0.019022000871658326
number samples = 1408
accuracy = 0.931108
precision class 0 = 0.939866
precision class 1 = 0.737705
recall class 0 = 0.98752
recall class 1 = 0.357143
false negative rate = 0.642857
false positive rate = 0.01248
positive prediction rate = 0.043324
AUC of ROC = 0.895928
AUC of PRC = 0.579752
min(+P, Se) = 0.563492

-------------------------------

confusion matrix:
[[289   7]
 [ 31  21]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14670300483703613
difference in average predicted and observed risk = -0.0027219951629638695
number samples = 348
accuracy = 0.890805
precision class 0 = 0.903125
precision class 1 = 0.75
recall class 0 = 0.976351
recall class 1 = 0.403846
false negative rate = 0.596154
false positive rate = 0.023649
positive prediction rate = 0.08046
AUC of ROC = 0.882406
AUC of PRC = 0.664084
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[420   9]
 [ 26  13]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10826899856328964
difference in average predicted and observed risk = 0.024935998563289638
number samples = 468
accuracy = 0.925214
precision class 0 = 0.941704
precision class 1 = 0.590909
recall class 0 = 0.979021
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.020979
positive prediction rate = 0.047009
AUC of ROC = 0.87054
AUC of PRC = 0.529507
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[12533   161]
 [ 1383   604]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11655499786138535
difference in average predicted and observed risk = -0.018790002138614648
number samples = 14681
accuracy = 0.89483
precision class 0 = 0.900618
precision class 1 = 0.789542
recall class 0 = 0.987317
recall class 1 = 0.303976
false negative rate = 0.696024
false positive rate = 0.012683
positive prediction rate = 0.052108
AUC of ROC = 0.889497
AUC of PRC = 0.626644
min(+P, Se) = 0.573729

-------------------------------

==>predicting on validation



confusion matrix:
[[1514   21]
 [ 202   76]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1262730062007904
difference in average predicted and observed risk = -0.027063993799209596
number samples = 1813
accuracy = 0.876999
precision class 0 = 0.882284
precision class 1 = 0.783505
recall class 0 = 0.986319
recall class 1 = 0.273381
false negative rate = 0.726619
false positive rate = 0.013681
positive prediction rate = 0.053502
AUC of ROC = 0.855018
AUC of PRC = 0.58761
min(+P, Se) = 0.539568

-------------------------------

confusion matrix:
[[883  24]
 [ 85  28]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.1087379977107048
difference in average predicted and observed risk = -0.00204600228929519
number samples = 1020
accuracy = 0.893137
precision class 0 = 0.91219
precision class 1 = 0.538462
recall class 0 = 0.973539
recall class 1 = 0.247788
false negative rate = 0.752212
false positive rate = 0.026461
positive prediction rate = 0.05098
AUC of ROC = 0.859032
AUC of PRC = 0.468407
min(+P, Se) = 0.469027

-------------------------------

confusion matrix:
[[243   8]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13070400059223175
difference in average predicted and observed risk = 0.01140600059223175
number samples = 285
accuracy = 0.901754
precision class 0 = 0.923954
precision class 1 = 0.636364
recall class 0 = 0.968127
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.031873
positive prediction rate = 0.077193
AUC of ROC = 0.899227
AUC of PRC = 0.617728
min(+P, Se) = 0.564103

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09977199882268906
difference in average predicted and observed risk = 0.010027998822689052
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.758551
AUC of PRC = 0.388077
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18811999261379242
difference in average predicted and observed risk = 0.03427399261379241
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1493   36]
 [ 173   71]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12051399797201157
difference in average predicted and observed risk = -0.017106002027988426
number samples = 1773
accuracy = 0.882121
precision class 0 = 0.896158
precision class 1 = 0.663551
recall class 0 = 0.976455
recall class 1 = 0.290984
false negative rate = 0.709016
false positive rate = 0.023545
positive prediction rate = 0.06035
AUC of ROC = 0.860656
AUC of PRC = 0.549248
min(+P, Se) = 0.508197

-------------------------------

confusion matrix:
[[1237   20]
 [ 141   51]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12152999639511108
difference in average predicted and observed risk = -0.010975003604888928
number samples = 1449
accuracy = 0.888889
precision class 0 = 0.897678
precision class 1 = 0.71831
recall class 0 = 0.984089
recall class 1 = 0.265625
false negative rate = 0.734375
false positive rate = 0.015911
positive prediction rate = 0.048999
AUC of ROC = 0.861285
AUC of PRC = 0.56245
min(+P, Se) = 0.536458

-------------------------------

confusion matrix:
[[1935   43]
 [ 222   89]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11949799954891205
difference in average predicted and observed risk = -0.01636900045108794
number samples = 2289
accuracy = 0.884229
precision class 0 = 0.897079
precision class 1 = 0.674242
recall class 0 = 0.978261
recall class 1 = 0.286174
false negative rate = 0.713826
false positive rate = 0.021739
positive prediction rate = 0.057667
AUC of ROC = 0.858458
AUC of PRC = 0.549683
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[362   6]
 [ 60  21]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.134101003408432
difference in average predicted and observed risk = -0.046299996591568
number samples = 449
accuracy = 0.853007
precision class 0 = 0.85782
precision class 1 = 0.777778
recall class 0 = 0.983696
recall class 1 = 0.259259
false negative rate = 0.740741
false positive rate = 0.016304
positive prediction rate = 0.060134
AUC of ROC = 0.860205
AUC of PRC = 0.633593
min(+P, Se) = 0.614458

-------------------------------

confusion matrix:
[[274   4]
 [ 22   8]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11249999701976776
difference in average predicted and observed risk = 0.015096997019767758
number samples = 308
accuracy = 0.915584
precision class 0 = 0.925676
precision class 1 = 0.666667
recall class 0 = 0.985611
recall class 1 = 0.266667
false negative rate = 0.733333
false positive rate = 0.014388
positive prediction rate = 0.038961
AUC of ROC = 0.892926
AUC of PRC = 0.532236
min(+P, Se) = 0.516129

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10576599836349487
difference in average predicted and observed risk = 0.033600998363494866
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.860317
AUC of PRC = 0.238288
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14072099328041077
difference in average predicted and observed risk = 0.05211299328041076
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.869048
AUC of PRC = 0.682575
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2730   56]
 [ 314  122]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12097100168466568
difference in average predicted and observed risk = -0.014348998315334316
number samples = 3222
accuracy = 0.885164
precision class 0 = 0.896846
precision class 1 = 0.685393
recall class 0 = 0.9799
recall class 1 = 0.279817
false negative rate = 0.720183
false positive rate = 0.020101
positive prediction rate = 0.055245
AUC of ROC = 0.860504
AUC of PRC = 0.554818
min(+P, Se) = 0.520642

-------------------------------

Epoch 00026: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch26.state
Epoch 27/100
 - 819s - loss: 0.2834 - val_loss: 0.2840

==>predicting on train



confusion matrix:
[[6974   62]
 [1009  303]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12599299848079681
difference in average predicted and observed risk = -0.031170001519203183
number samples = 8348
accuracy = 0.871706
precision class 0 = 0.873606
precision class 1 = 0.830137
recall class 0 = 0.991188
recall class 1 = 0.230945
false negative rate = 0.769055
false positive rate = 0.008812
positive prediction rate = 0.043723
AUC of ROC = 0.877266
AUC of PRC = 0.620154
min(+P, Se) = 0.56936

-------------------------------

confusion matrix:
[[3946   56]
 [ 305  166]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10660800337791443
difference in average predicted and observed risk = 0.001310003377914426
number samples = 4473
accuracy = 0.919294
precision class 0 = 0.928252
precision class 1 = 0.747748
recall class 0 = 0.986007
recall class 1 = 0.352442
false negative rate = 0.647558
false positive rate = 0.013993
positive prediction rate = 0.049631
AUC of ROC = 0.905397
AUC of PRC = 0.62662
min(+P, Se) = 0.561181

-------------------------------

confusion matrix:
[[1179   16]
 [  94   49]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11713399738073349
difference in average predicted and observed risk = 0.010257997380733491
number samples = 1338
accuracy = 0.917788
precision class 0 = 0.926159
precision class 1 = 0.753846
recall class 0 = 0.986611
recall class 1 = 0.342657
false negative rate = 0.657343
false positive rate = 0.013389
positive prediction rate = 0.04858
AUC of ROC = 0.904058
AUC of PRC = 0.617477
min(+P, Se) = 0.573427

-------------------------------

confusion matrix:
[[347   3]
 [ 24  15]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10481899976730347
difference in average predicted and observed risk = 0.004561999767303468
number samples = 389
accuracy = 0.930591
precision class 0 = 0.93531
precision class 1 = 0.833333
recall class 0 = 0.991429
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.008571
positive prediction rate = 0.046272
AUC of ROC = 0.898974
AUC of PRC = 0.611467
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[108   3]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16393500566482544
difference in average predicted and observed risk = -0.001478994335174566
number samples = 133
accuracy = 0.924812
precision class 0 = 0.93913
precision class 1 = 0.833333
recall class 0 = 0.972973
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.027027
positive prediction rate = 0.135338
AUC of ROC = 0.918919
AUC of PRC = 0.807439
min(+P, Se) = 0.727273

-------------------------------

confusion matrix:
[[6907   79]
 [ 766  307]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11423599720001221
difference in average predicted and observed risk = -0.018907002799987804
number samples = 8059
accuracy = 0.895148
precision class 0 = 0.900169
precision class 1 = 0.795337
recall class 0 = 0.988692
recall class 1 = 0.286114
false negative rate = 0.713886
false positive rate = 0.011308
positive prediction rate = 0.047897
AUC of ROC = 0.893874
AUC of PRC = 0.624192
min(+P, Se) = 0.567568

-------------------------------

confusion matrix:
[[5647   61]
 [ 673  241]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12493500113487244
difference in average predicted and observed risk = -0.013089998865127572
number samples = 6622
accuracy = 0.889157
precision class 0 = 0.893513
precision class 1 = 0.798013
recall class 0 = 0.989313
recall class 1 = 0.263676
false negative rate = 0.736324
false positive rate = 0.010687
positive prediction rate = 0.045606
AUC of ROC = 0.884323
AUC of PRC = 0.613922
min(+P, Se) = 0.570022

-------------------------------

confusion matrix:
[[8962   84]
 [1019  344]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11487799882888794
difference in average predicted and observed risk = -0.016066001171112065
number samples = 10409
accuracy = 0.894034
precision class 0 = 0.897906
precision class 1 = 0.803738
recall class 0 = 0.990714
recall class 1 = 0.252384
false negative rate = 0.747616
false positive rate = 0.009286
positive prediction rate = 0.041118
AUC of ROC = 0.886936
AUC of PRC = 0.604405
min(+P, Se) = 0.553925

-------------------------------

confusion matrix:
[[1620   21]
 [ 273  134]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14195400476455688
difference in average predicted and observed risk = -0.056775995235443105
number samples = 2048
accuracy = 0.856445
precision class 0 = 0.855784
precision class 1 = 0.864516
recall class 0 = 0.987203
recall class 1 = 0.329238
false negative rate = 0.670762
false positive rate = 0.012797
positive prediction rate = 0.075684
AUC of ROC = 0.901122
AUC of PRC = 0.715627
min(+P, Se) = 0.648649

-------------------------------

confusion matrix:
[[1264   18]
 [  85   41]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11213000118732452
difference in average predicted and observed risk = 0.022641001187324525
number samples = 1408
accuracy = 0.926847
precision class 0 = 0.93699
precision class 1 = 0.694915
recall class 0 = 0.985959
recall class 1 = 0.325397
false negative rate = 0.674603
false positive rate = 0.014041
positive prediction rate = 0.041903
AUC of ROC = 0.89594
AUC of PRC = 0.57498
min(+P, Se) = 0.581395

-------------------------------

confusion matrix:
[[287   9]
 [ 34  18]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14895099401474
difference in average predicted and observed risk = -0.00047400598526001203
number samples = 348
accuracy = 0.876437
precision class 0 = 0.894081
precision class 1 = 0.666667
recall class 0 = 0.969595
recall class 1 = 0.346154
false negative rate = 0.653846
false positive rate = 0.030405
positive prediction rate = 0.077586
AUC of ROC = 0.877144
AUC of PRC = 0.628788
min(+P, Se) = 0.596154

-------------------------------

confusion matrix:
[[421   8]
 [ 28  11]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11058299988508224
difference in average predicted and observed risk = 0.02724999988508224
number samples = 468
accuracy = 0.923077
precision class 0 = 0.937639
precision class 1 = 0.578947
recall class 0 = 0.981352
recall class 1 = 0.282051
false negative rate = 0.717949
false positive rate = 0.018648
positive prediction rate = 0.040598
AUC of ROC = 0.857092
AUC of PRC = 0.496718
min(+P, Se) = 0.488889

-------------------------------

confusion matrix:
[[12554   140]
 [ 1439   548]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11906199902296066
difference in average predicted and observed risk = -0.01628300097703933
number samples = 14681
accuracy = 0.892446
precision class 0 = 0.897163
precision class 1 = 0.796512
recall class 0 = 0.988971
recall class 1 = 0.275793
false negative rate = 0.724207
false positive rate = 0.011029
positive prediction rate = 0.046863
AUC of ROC = 0.889388
AUC of PRC = 0.619222
min(+P, Se) = 0.5692

-------------------------------

==>predicting on validation



confusion matrix:
[[1511   24]
 [ 205   73]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12957200407981873
difference in average predicted and observed risk = -0.023764995920181275
number samples = 1813
accuracy = 0.87369
precision class 0 = 0.880536
precision class 1 = 0.752577
recall class 0 = 0.984365
recall class 1 = 0.26259
false negative rate = 0.73741
false positive rate = 0.015635
positive prediction rate = 0.053502
AUC of ROC = 0.852038
AUC of PRC = 0.584798
min(+P, Se) = 0.530249

-------------------------------

confusion matrix:
[[889  18]
 [ 88  25]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10941199958324432
difference in average predicted and observed risk = -0.0013720004167556699
number samples = 1020
accuracy = 0.896078
precision class 0 = 0.909928
precision class 1 = 0.581395
recall class 0 = 0.980154
recall class 1 = 0.221239
false negative rate = 0.778761
false positive rate = 0.019846
positive prediction rate = 0.042157
AUC of ROC = 0.849792
AUC of PRC = 0.464912
min(+P, Se) = 0.46087

-------------------------------

confusion matrix:
[[246   5]
 [ 22  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12742599844932556
difference in average predicted and observed risk = 0.00812799844932556
number samples = 285
accuracy = 0.905263
precision class 0 = 0.91791
precision class 1 = 0.705882
recall class 0 = 0.98008
recall class 1 = 0.352941
false negative rate = 0.647059
false positive rate = 0.01992
positive prediction rate = 0.059649
AUC of ROC = 0.902156
AUC of PRC = 0.619355
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10523799806833267
difference in average predicted and observed risk = 0.015493998068332668
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.758551
AUC of PRC = 0.382662
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[22  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.16422699391841888
difference in average predicted and observed risk = 0.010380993918418874
number samples = 26
accuracy = 0.923077
precision class 0 = 0.916667
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.076923
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[1500   29]
 [ 178   66]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12015700340270996
difference in average predicted and observed risk = -0.01746299659729003
number samples = 1773
accuracy = 0.883249
precision class 0 = 0.893921
precision class 1 = 0.694737
recall class 0 = 0.981033
recall class 1 = 0.270492
false negative rate = 0.729508
false positive rate = 0.018967
positive prediction rate = 0.053581
AUC of ROC = 0.854839
AUC of PRC = 0.546009
min(+P, Se) = 0.504098

-------------------------------

confusion matrix:
[[1237   20]
 [ 145   47]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.125791996717453
difference in average predicted and observed risk = -0.006713003282547009
number samples = 1449
accuracy = 0.886128
precision class 0 = 0.89508
precision class 1 = 0.701493
recall class 0 = 0.984089
recall class 1 = 0.244792
false negative rate = 0.755208
false positive rate = 0.015911
positive prediction rate = 0.046239
AUC of ROC = 0.859644
AUC of PRC = 0.561512
min(+P, Se) = 0.541667

-------------------------------

confusion matrix:
[[1942   36]
 [ 228   83]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.121738001704216
difference in average predicted and observed risk = -0.014128998295783984
number samples = 2289
accuracy = 0.884666
precision class 0 = 0.894931
precision class 1 = 0.697479
recall class 0 = 0.9818
recall class 1 = 0.266881
false negative rate = 0.733119
false positive rate = 0.0182
positive prediction rate = 0.051988
AUC of ROC = 0.852152
AUC of PRC = 0.54402
min(+P, Se) = 0.514469

-------------------------------

confusion matrix:
[[363   5]
 [ 63  18]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13287700712680817
difference in average predicted and observed risk = -0.04752399287319184
number samples = 449
accuracy = 0.848552
precision class 0 = 0.852113
precision class 1 = 0.782609
recall class 0 = 0.986413
recall class 1 = 0.222222
false negative rate = 0.777778
false positive rate = 0.013587
positive prediction rate = 0.051225
AUC of ROC = 0.864533
AUC of PRC = 0.640487
min(+P, Se) = 0.611765

-------------------------------

confusion matrix:
[[273   5]
 [ 23   7]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11381799727678299
difference in average predicted and observed risk = 0.016414997276782986
number samples = 308
accuracy = 0.909091
precision class 0 = 0.922297
precision class 1 = 0.583333
recall class 0 = 0.982014
recall class 1 = 0.233333
false negative rate = 0.766667
false positive rate = 0.017986
positive prediction rate = 0.038961
AUC of ROC = 0.883813
AUC of PRC = 0.502301
min(+P, Se) = 0.486486

-------------------------------

confusion matrix:
[[88  2]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10843200236558914
difference in average predicted and observed risk = 0.036267002365589135
number samples = 97
accuracy = 0.927835
precision class 0 = 0.946237
precision class 1 = 0.5
recall class 0 = 0.977778
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.022222
positive prediction rate = 0.041237
AUC of ROC = 0.87619
AUC of PRC = 0.371686
min(+P, Se) = 0.3

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1445070058107376
difference in average predicted and observed risk = 0.055899005810737604
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.873016
AUC of PRC = 0.722134
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2737   49]
 [ 323  113]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12269099801778793
difference in average predicted and observed risk = -0.012629001982212062
number samples = 3222
accuracy = 0.884544
precision class 0 = 0.894444
precision class 1 = 0.697531
recall class 0 = 0.982412
recall class 1 = 0.259174
false negative rate = 0.740826
false positive rate = 0.017588
positive prediction rate = 0.050279
AUC of ROC = 0.856249
AUC of PRC = 0.55157
min(+P, Se) = 0.522936

-------------------------------

Epoch 00027: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch27.state
Epoch 28/100
 - 823s - loss: 0.2818 - val_loss: 0.2792

==>predicting on train



confusion matrix:
[[6933  103]
 [ 925  387]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13434800505638123
difference in average predicted and observed risk = -0.02281499494361877
number samples = 8348
accuracy = 0.876857
precision class 0 = 0.882286
precision class 1 = 0.789796
recall class 0 = 0.985361
recall class 1 = 0.294969
false negative rate = 0.705031
false positive rate = 0.014639
positive prediction rate = 0.058697
AUC of ROC = 0.877271
AUC of PRC = 0.634067
min(+P, Se) = 0.577744

-------------------------------

confusion matrix:
[[3924   78]
 [ 268  203]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11146000027656555
difference in average predicted and observed risk = 0.006162000276565549
number samples = 4473
accuracy = 0.922647
precision class 0 = 0.936069
precision class 1 = 0.72242
recall class 0 = 0.98051
recall class 1 = 0.430998
false negative rate = 0.569002
false positive rate = 0.01949
positive prediction rate = 0.062821
AUC of ROC = 0.909896
AUC of PRC = 0.64495
min(+P, Se) = 0.578059

-------------------------------

confusion matrix:
[[1173   22]
 [  88   55]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11951900273561478
difference in average predicted and observed risk = 0.012643002735614778
number samples = 1338
accuracy = 0.917788
precision class 0 = 0.930214
precision class 1 = 0.714286
recall class 0 = 0.98159
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.01841
positive prediction rate = 0.057549
AUC of ROC = 0.907406
AUC of PRC = 0.64012
min(+P, Se) = 0.58042

-------------------------------

confusion matrix:
[[346   4]
 [ 21  18]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10860999673604965
difference in average predicted and observed risk = 0.008352996736049653
number samples = 389
accuracy = 0.935733
precision class 0 = 0.942779
precision class 1 = 0.818182
recall class 0 = 0.988571
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.011429
positive prediction rate = 0.056555
AUC of ROC = 0.922637
AUC of PRC = 0.637075
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[108   3]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16886000335216522
difference in average predicted and observed risk = 0.0034460033521652167
number samples = 133
accuracy = 0.917293
precision class 0 = 0.931035
precision class 1 = 0.823529
recall class 0 = 0.972973
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.027027
positive prediction rate = 0.12782
AUC of ROC = 0.935299
AUC of PRC = 0.810329
min(+P, Se) = 0.772727

-------------------------------

confusion matrix:
[[6872  114]
 [ 697  376]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1210469976067543
difference in average predicted and observed risk = -0.012096002393245708
number samples = 8059
accuracy = 0.899367
precision class 0 = 0.907914
precision class 1 = 0.767347
recall class 0 = 0.983682
recall class 1 = 0.350419
false negative rate = 0.649581
false positive rate = 0.016318
positive prediction rate = 0.060802
AUC of ROC = 0.898244
AUC of PRC = 0.646634
min(+P, Se) = 0.589935

-------------------------------

confusion matrix:
[[5612   96]
 [ 613  301]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.1312589943408966
difference in average predicted and observed risk = -0.006766005659103402
number samples = 6622
accuracy = 0.892933
precision class 0 = 0.901526
precision class 1 = 0.758186
recall class 0 = 0.983181
recall class 1 = 0.329322
false negative rate = 0.670678
false positive rate = 0.016819
positive prediction rate = 0.059952
AUC of ROC = 0.884197
AUC of PRC = 0.624604
min(+P, Se) = 0.57221

-------------------------------

confusion matrix:
[[8917  129]
 [ 931  432]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.12172400206327438
difference in average predicted and observed risk = -0.009219997936725621
number samples = 10409
accuracy = 0.898165
precision class 0 = 0.905463
precision class 1 = 0.770053
recall class 0 = 0.98574
recall class 1 = 0.316948
false negative rate = 0.683052
false positive rate = 0.01426
positive prediction rate = 0.053896
AUC of ROC = 0.890024
AUC of PRC = 0.622427
min(+P, Se) = 0.567131

-------------------------------

confusion matrix:
[[1605   36]
 [ 252  155]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1500539928674698
difference in average predicted and observed risk = -0.0486760071325302
number samples = 2048
accuracy = 0.859375
precision class 0 = 0.864297
precision class 1 = 0.811518
recall class 0 = 0.978062
recall class 1 = 0.380835
false negative rate = 0.619165
false positive rate = 0.021938
positive prediction rate = 0.093262
AUC of ROC = 0.901516
AUC of PRC = 0.724606
min(+P, Se) = 0.654412

-------------------------------

confusion matrix:
[[1258   24]
 [  76   50]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11763700097799301
difference in average predicted and observed risk = 0.028148000977993012
number samples = 1408
accuracy = 0.928977
precision class 0 = 0.943029
precision class 1 = 0.675676
recall class 0 = 0.981279
recall class 1 = 0.396825
false negative rate = 0.603175
false positive rate = 0.018721
positive prediction rate = 0.052557
AUC of ROC = 0.895179
AUC of PRC = 0.589731
min(+P, Se) = 0.579365

-------------------------------

confusion matrix:
[[286  10]
 [ 29  23]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1497730016708374
difference in average predicted and observed risk = 0.0003480016708374001
number samples = 348
accuracy = 0.887931
precision class 0 = 0.907937
precision class 1 = 0.69697
recall class 0 = 0.966216
recall class 1 = 0.442308
false negative rate = 0.557692
false positive rate = 0.033784
positive prediction rate = 0.094828
AUC of ROC = 0.880003
AUC of PRC = 0.632003
min(+P, Se) = 0.576923

-------------------------------

confusion matrix:
[[418  11]
 [ 22  17]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11245100200176239
difference in average predicted and observed risk = 0.029118002001762386
number samples = 468
accuracy = 0.929487
precision class 0 = 0.95
precision class 1 = 0.607143
recall class 0 = 0.974359
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.025641
positive prediction rate = 0.059829
AUC of ROC = 0.886737
AUC of PRC = 0.577896
min(+P, Se) = 0.538462

-------------------------------

confusion matrix:
[[12484   210]
 [ 1310   677]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.1256529986858368
difference in average predicted and observed risk = -0.009692001314163201
number samples = 14681
accuracy = 0.896465
precision class 0 = 0.905031
precision class 1 = 0.763247
recall class 0 = 0.983457
recall class 1 = 0.340715
false negative rate = 0.659285
false positive rate = 0.016543
positive prediction rate = 0.060418
AUC of ROC = 0.891964
AUC of PRC = 0.636465
min(+P, Se) = 0.582788

-------------------------------

==>predicting on validation



confusion matrix:
[[1503   32]
 [ 186   92]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13948999345302582
difference in average predicted and observed risk = -0.013847006546974183
number samples = 1813
accuracy = 0.879757
precision class 0 = 0.889876
precision class 1 = 0.741935
recall class 0 = 0.979153
recall class 1 = 0.330935
false negative rate = 0.669065
false positive rate = 0.020847
positive prediction rate = 0.068395
AUC of ROC = 0.853359
AUC of PRC = 0.590702
min(+P, Se) = 0.532872

-------------------------------

confusion matrix:
[[883  24]
 [ 79  34]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11453499644994736
difference in average predicted and observed risk = 0.0037509964499473636
number samples = 1020
accuracy = 0.89902
precision class 0 = 0.917879
precision class 1 = 0.586207
recall class 0 = 0.973539
recall class 1 = 0.300885
false negative rate = 0.699115
false positive rate = 0.026461
positive prediction rate = 0.056863
AUC of ROC = 0.856378
AUC of PRC = 0.490999
min(+P, Se) = 0.465517

-------------------------------

confusion matrix:
[[242   9]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1343279927968979
difference in average predicted and observed risk = 0.015029992796897887
number samples = 285
accuracy = 0.901754
precision class 0 = 0.927203
precision class 1 = 0.625
recall class 0 = 0.964143
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.035857
positive prediction rate = 0.084211
AUC of ROC = 0.915514
AUC of PRC = 0.632333
min(+P, Se) = 0.534884

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09913600236177444
difference in average predicted and observed risk = 0.00939200236177444
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.804829
AUC of PRC = 0.391741
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[20  2]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18335700035095215
difference in average predicted and observed risk = 0.029511000350952138
number samples = 26
accuracy = 0.923077
precision class 0 = 1.0
precision class 1 = 0.666667
recall class 0 = 0.909091
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.090909
positive prediction rate = 0.230769
AUC of ROC = 0.954545
AUC of PRC = 0.795833
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[1488   41]
 [ 160   84]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1288589984178543
difference in average predicted and observed risk = -0.008761001582145683
number samples = 1773
accuracy = 0.886633
precision class 0 = 0.902913
precision class 1 = 0.672
recall class 0 = 0.973185
recall class 1 = 0.344262
false negative rate = 0.655738
false positive rate = 0.026815
positive prediction rate = 0.070502
AUC of ROC = 0.861331
AUC of PRC = 0.5657
min(+P, Se) = 0.522449

-------------------------------

confusion matrix:
[[1229   28]
 [ 130   62]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.132532000541687
difference in average predicted and observed risk = 2.7000541687000057e-05
number samples = 1449
accuracy = 0.890959
precision class 0 = 0.904341
precision class 1 = 0.688889
recall class 0 = 0.977725
recall class 1 = 0.322917
false negative rate = 0.677083
false positive rate = 0.022275
positive prediction rate = 0.062112
AUC of ROC = 0.861973
AUC of PRC = 0.570418
min(+P, Se) = 0.515464

-------------------------------

confusion matrix:
[[1929   49]
 [ 206  105]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1288740038871765
difference in average predicted and observed risk = -0.006992996112823474
number samples = 2289
accuracy = 0.888598
precision class 0 = 0.903513
precision class 1 = 0.681818
recall class 0 = 0.975227
recall class 1 = 0.337621
false negative rate = 0.662379
false positive rate = 0.024772
positive prediction rate = 0.067278
AUC of ROC = 0.85639
AUC of PRC = 0.556739
min(+P, Se) = 0.5209

-------------------------------

confusion matrix:
[[359   9]
 [ 56  25]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14345699548721313
difference in average predicted and observed risk = -0.03694400451278687
number samples = 449
accuracy = 0.855234
precision class 0 = 0.86506
precision class 1 = 0.735294
recall class 0 = 0.975543
recall class 1 = 0.308642
false negative rate = 0.691358
false positive rate = 0.024457
positive prediction rate = 0.075724
AUC of ROC = 0.864835
AUC of PRC = 0.640636
min(+P, Se) = 0.576087

-------------------------------

confusion matrix:
[[272   6]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.1256050020456314
difference in average predicted and observed risk = 0.028202002045631405
number samples = 308
accuracy = 0.915584
precision class 0 = 0.931507
precision class 1 = 0.625
recall class 0 = 0.978417
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.021583
positive prediction rate = 0.051948
AUC of ROC = 0.889089
AUC of PRC = 0.546717
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[86  4]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10836400091648102
difference in average predicted and observed risk = 0.03619900091648101
number samples = 97
accuracy = 0.896907
precision class 0 = 0.934783
precision class 1 = 0.2
recall class 0 = 0.955556
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.044444
positive prediction rate = 0.051546
AUC of ROC = 0.877778
AUC of PRC = 0.34638
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[71  1]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15065699815750122
difference in average predicted and observed risk = 0.062048998157501215
number samples = 79
accuracy = 0.962025
precision class 0 = 0.972603
precision class 1 = 0.833333
recall class 0 = 0.986111
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.013889
positive prediction rate = 0.075949
AUC of ROC = 0.914683
AUC of PRC = 0.759822
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2717   69]
 [ 290  146]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.13051000237464905
difference in average predicted and observed risk = -0.004809997625350948
number samples = 3222
accuracy = 0.888579
precision class 0 = 0.903558
precision class 1 = 0.67907
recall class 0 = 0.975233
recall class 1 = 0.334862
false negative rate = 0.665138
false positive rate = 0.024767
positive prediction rate = 0.066729
AUC of ROC = 0.861104
AUC of PRC = 0.566102
min(+P, Se) = 0.517084

-------------------------------

Epoch 00028: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch28.state
Epoch 29/100
 - 818s - loss: 0.2798 - val_loss: 0.2822

==>predicting on train



confusion matrix:
[[6958   78]
 [ 969  343]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12498199939727783
difference in average predicted and observed risk = -0.032181000602722165
number samples = 8348
accuracy = 0.874581
precision class 0 = 0.87776
precision class 1 = 0.814727
recall class 0 = 0.988914
recall class 1 = 0.261433
false negative rate = 0.738567
false positive rate = 0.011086
positive prediction rate = 0.050431
AUC of ROC = 0.877298
AUC of PRC = 0.624294
min(+P, Se) = 0.568926

-------------------------------

confusion matrix:
[[3946   56]
 [ 283  188]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10587500035762787
difference in average predicted and observed risk = 0.0005770003576278659
number samples = 4473
accuracy = 0.924212
precision class 0 = 0.933081
precision class 1 = 0.770492
recall class 0 = 0.986007
recall class 1 = 0.399151
false negative rate = 0.600849
false positive rate = 0.013993
positive prediction rate = 0.05455
AUC of ROC = 0.909049
AUC of PRC = 0.641446
min(+P, Se) = 0.571125

-------------------------------

confusion matrix:
[[1181   14]
 [  85   58]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11478400230407715
difference in average predicted and observed risk = 0.00790800230407715
number samples = 1338
accuracy = 0.926009
precision class 0 = 0.932859
precision class 1 = 0.805556
recall class 0 = 0.988285
recall class 1 = 0.405594
false negative rate = 0.594406
false positive rate = 0.011715
positive prediction rate = 0.053812
AUC of ROC = 0.907171
AUC of PRC = 0.61196
min(+P, Se) = 0.573427

-------------------------------

confusion matrix:
[[346   4]
 [ 25  14]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.1017019972205162
difference in average predicted and observed risk = 0.001444997220516206
number samples = 389
accuracy = 0.92545
precision class 0 = 0.932615
precision class 1 = 0.777778
recall class 0 = 0.988571
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.011429
positive prediction rate = 0.046272
AUC of ROC = 0.911136
AUC of PRC = 0.624632
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[109   2]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1621679961681366
difference in average predicted and observed risk = -0.003246003831863409
number samples = 133
accuracy = 0.917293
precision class 0 = 0.923729
precision class 1 = 0.866667
recall class 0 = 0.981982
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.018018
positive prediction rate = 0.112782
AUC of ROC = 0.939803
AUC of PRC = 0.831137
min(+P, Se) = 0.772727

-------------------------------

confusion matrix:
[[6906   80]
 [ 736  337]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11401499807834625
difference in average predicted and observed risk = -0.01912800192165376
number samples = 8059
accuracy = 0.898747
precision class 0 = 0.90369
precision class 1 = 0.808153
recall class 0 = 0.988549
recall class 1 = 0.314073
false negative rate = 0.685927
false positive rate = 0.011451
positive prediction rate = 0.051743
AUC of ROC = 0.896291
AUC of PRC = 0.633815
min(+P, Se) = 0.573159

-------------------------------

confusion matrix:
[[5634   74]
 [ 635  279]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12274099886417389
difference in average predicted and observed risk = -0.01528400113582612
number samples = 6622
accuracy = 0.892933
precision class 0 = 0.898708
precision class 1 = 0.790368
recall class 0 = 0.987036
recall class 1 = 0.305252
false negative rate = 0.694748
false positive rate = 0.012964
positive prediction rate = 0.053307
AUC of ROC = 0.885053
AUC of PRC = 0.61854
min(+P, Se) = 0.56674

-------------------------------

confusion matrix:
[[8954   92]
 [ 977  386]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11335299909114838
difference in average predicted and observed risk = -0.01759100090885163
number samples = 10409
accuracy = 0.8973
precision class 0 = 0.901621
precision class 1 = 0.807531
recall class 0 = 0.98983
recall class 1 = 0.283199
false negative rate = 0.716801
false positive rate = 0.01017
positive prediction rate = 0.045922
AUC of ROC = 0.889598
AUC of PRC = 0.612157
min(+P, Se) = 0.553925

-------------------------------

confusion matrix:
[[1616   25]
 [ 261  146]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14320500195026398
difference in average predicted and observed risk = -0.05552499804973601
number samples = 2048
accuracy = 0.860352
precision class 0 = 0.860948
precision class 1 = 0.853801
recall class 0 = 0.984765
recall class 1 = 0.358722
false negative rate = 0.641278
false positive rate = 0.015235
positive prediction rate = 0.083496
AUC of ROC = 0.90159
AUC of PRC = 0.723372
min(+P, Se) = 0.642157

-------------------------------

confusion matrix:
[[1264   18]
 [  80   46]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11184599995613098
difference in average predicted and observed risk = 0.022356999956130982
number samples = 1408
accuracy = 0.930398
precision class 0 = 0.940476
precision class 1 = 0.71875
recall class 0 = 0.985959
recall class 1 = 0.365079
false negative rate = 0.634921
false positive rate = 0.014041
positive prediction rate = 0.045455
AUC of ROC = 0.896534
AUC of PRC = 0.583992
min(+P, Se) = 0.578125

-------------------------------

confusion matrix:
[[288   8]
 [ 31  21]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14297699928283691
difference in average predicted and observed risk = -0.006448000717163088
number samples = 348
accuracy = 0.887931
precision class 0 = 0.902821
precision class 1 = 0.724138
recall class 0 = 0.972973
recall class 1 = 0.403846
false negative rate = 0.596154
false positive rate = 0.027027
positive prediction rate = 0.083333
AUC of ROC = 0.880717
AUC of PRC = 0.617168
min(+P, Se) = 0.603774

-------------------------------

confusion matrix:
[[418  11]
 [ 22  17]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10946699976921082
difference in average predicted and observed risk = 0.02613399976921081
number samples = 468
accuracy = 0.929487
precision class 0 = 0.95
precision class 1 = 0.607143
recall class 0 = 0.974359
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.025641
positive prediction rate = 0.059829
AUC of ROC = 0.859662
AUC of PRC = 0.514414
min(+P, Se) = 0.52381

-------------------------------

confusion matrix:
[[12540   154]
 [ 1371   616]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11795099824666977
difference in average predicted and observed risk = -0.017394001753330224
number samples = 14681
accuracy = 0.896124
precision class 0 = 0.901445
precision class 1 = 0.8
recall class 0 = 0.987868
recall class 1 = 0.310015
false negative rate = 0.689985
false positive rate = 0.012132
positive prediction rate = 0.052449
AUC of ROC = 0.891238
AUC of PRC = 0.626682
min(+P, Se) = 0.570206

-------------------------------

==>predicting on validation



confusion matrix:
[[1507   28]
 [ 200   78]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1286650002002716
difference in average predicted and observed risk = -0.024671999799728395
number samples = 1813
accuracy = 0.874242
precision class 0 = 0.882835
precision class 1 = 0.735849
recall class 0 = 0.981759
recall class 1 = 0.280576
false negative rate = 0.719424
false positive rate = 0.018241
positive prediction rate = 0.058467
AUC of ROC = 0.854196
AUC of PRC = 0.585765
min(+P, Se) = 0.53405

-------------------------------

confusion matrix:
[[891  16]
 [ 83  30]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10767800360918045
difference in average predicted and observed risk = -0.003105996390819543
number samples = 1020
accuracy = 0.902941
precision class 0 = 0.914784
precision class 1 = 0.652174
recall class 0 = 0.982359
recall class 1 = 0.265487
false negative rate = 0.734513
false positive rate = 0.017641
positive prediction rate = 0.045098
AUC of ROC = 0.852748
AUC of PRC = 0.47978
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[246   5]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1298460066318512
difference in average predicted and observed risk = 0.010548006631851195
number samples = 285
accuracy = 0.915789
precision class 0 = 0.928302
precision class 1 = 0.75
recall class 0 = 0.98008
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.01992
positive prediction rate = 0.070175
AUC of ROC = 0.899695
AUC of PRC = 0.62781
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.0993340015411377
difference in average predicted and observed risk = 0.009590001541137691
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.774648
AUC of PRC = 0.382556
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17953699827194214
difference in average predicted and observed risk = 0.025690998271942128
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1500   29]
 [ 171   73]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12115400284528732
difference in average predicted and observed risk = -0.01646599715471267
number samples = 1773
accuracy = 0.887197
precision class 0 = 0.897666
precision class 1 = 0.715686
recall class 0 = 0.981033
recall class 1 = 0.29918
false negative rate = 0.70082
false positive rate = 0.018967
positive prediction rate = 0.05753
AUC of ROC = 0.857067
AUC of PRC = 0.554185
min(+P, Se) = 0.522449

-------------------------------

confusion matrix:
[[1234   23]
 [ 137   55]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12264899909496307
difference in average predicted and observed risk = -0.009856000905036938
number samples = 1449
accuracy = 0.889579
precision class 0 = 0.900073
precision class 1 = 0.705128
recall class 0 = 0.981702
recall class 1 = 0.286458
false negative rate = 0.713542
false positive rate = 0.018298
positive prediction rate = 0.05383
AUC of ROC = 0.86138
AUC of PRC = 0.564222
min(+P, Se) = 0.523316

-------------------------------

confusion matrix:
[[1941   37]
 [ 220   91]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11966200172901154
difference in average predicted and observed risk = -0.016204998270988452
number samples = 2289
accuracy = 0.887724
precision class 0 = 0.898195
precision class 1 = 0.710938
recall class 0 = 0.981294
recall class 1 = 0.292605
false negative rate = 0.707395
false positive rate = 0.018706
positive prediction rate = 0.05592
AUC of ROC = 0.855462
AUC of PRC = 0.554759
min(+P, Se) = 0.514469

-------------------------------

confusion matrix:
[[362   6]
 [ 57  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13576899468898773
difference in average predicted and observed risk = -0.044632005311012274
number samples = 449
accuracy = 0.859688
precision class 0 = 0.863962
precision class 1 = 0.8
recall class 0 = 0.983696
recall class 1 = 0.296296
false negative rate = 0.703704
false positive rate = 0.016304
positive prediction rate = 0.066815
AUC of ROC = 0.860977
AUC of PRC = 0.630133
min(+P, Se) = 0.592593

-------------------------------

confusion matrix:
[[273   5]
 [ 22   8]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.1155640035867691
difference in average predicted and observed risk = 0.0181610035867691
number samples = 308
accuracy = 0.912338
precision class 0 = 0.925424
precision class 1 = 0.615385
recall class 0 = 0.982014
recall class 1 = 0.266667
false negative rate = 0.733333
false positive rate = 0.017986
positive prediction rate = 0.042208
AUC of ROC = 0.879017
AUC of PRC = 0.498032
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10857699811458588
difference in average predicted and observed risk = 0.03641199811458587
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.888889
AUC of PRC = 0.26155
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14596199989318848
difference in average predicted and observed risk = 0.05735399989318847
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.882937
AUC of PRC = 0.709647
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2734   52]
 [ 308  128]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12182600051164627
difference in average predicted and observed risk = -0.013493999488353725
number samples = 3222
accuracy = 0.888268
precision class 0 = 0.898751
precision class 1 = 0.711111
recall class 0 = 0.981335
recall class 1 = 0.293578
false negative rate = 0.706422
false positive rate = 0.018665
positive prediction rate = 0.055866
AUC of ROC = 0.858702
AUC of PRC = 0.558207
min(+P, Se) = 0.520642

-------------------------------

Epoch 00029: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch29.state
Epoch 30/100
 - 815s - loss: 0.2787 - val_loss: 0.2842

==>predicting on train



confusion matrix:
[[6946   90]
 [ 953  359]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12190499901771545
difference in average predicted and observed risk = -0.03525800098228454
number samples = 8348
accuracy = 0.87506
precision class 0 = 0.879352
precision class 1 = 0.799555
recall class 0 = 0.987209
recall class 1 = 0.273628
false negative rate = 0.726372
false positive rate = 0.012791
positive prediction rate = 0.053785
AUC of ROC = 0.874452
AUC of PRC = 0.61705
min(+P, Se) = 0.565549

-------------------------------

confusion matrix:
[[3928   74]
 [ 278  193]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.1067499965429306
difference in average predicted and observed risk = 0.0014519965429306003
number samples = 4473
accuracy = 0.921306
precision class 0 = 0.933904
precision class 1 = 0.722846
recall class 0 = 0.981509
recall class 1 = 0.409766
false negative rate = 0.590234
false positive rate = 0.018491
positive prediction rate = 0.059691
AUC of ROC = 0.89933
AUC of PRC = 0.624936
min(+P, Se) = 0.564756

-------------------------------

confusion matrix:
[[1175   20]
 [  83   60]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.1163100004196167
difference in average predicted and observed risk = 0.0094340004196167
number samples = 1338
accuracy = 0.923019
precision class 0 = 0.934022
precision class 1 = 0.75
recall class 0 = 0.983264
recall class 1 = 0.41958
false negative rate = 0.58042
false positive rate = 0.016736
positive prediction rate = 0.059791
AUC of ROC = 0.90706
AUC of PRC = 0.610291
min(+P, Se) = 0.557047

-------------------------------

confusion matrix:
[[346   4]
 [ 24  15]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10286100208759308
difference in average predicted and observed risk = 0.0026040020875930797
number samples = 389
accuracy = 0.928021
precision class 0 = 0.935135
precision class 1 = 0.789474
recall class 0 = 0.988571
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.011429
positive prediction rate = 0.048843
AUC of ROC = 0.898974
AUC of PRC = 0.591023
min(+P, Se) = 0.634146

-------------------------------

confusion matrix:
[[109   2]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.17104700207710266
difference in average predicted and observed risk = 0.005633002077102656
number samples = 133
accuracy = 0.924812
precision class 0 = 0.931624
precision class 1 = 0.875
recall class 0 = 0.981982
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.018018
positive prediction rate = 0.120301
AUC of ROC = 0.932432
AUC of PRC = 0.810431
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[6884  102]
 [ 718  355]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11352600157260895
difference in average predicted and observed risk = -0.019616998427391064
number samples = 8059
accuracy = 0.89825
precision class 0 = 0.905551
precision class 1 = 0.776805
recall class 0 = 0.985399
recall class 1 = 0.330848
false negative rate = 0.669152
false positive rate = 0.014601
positive prediction rate = 0.056707
AUC of ROC = 0.889358
AUC of PRC = 0.620025
min(+P, Se) = 0.563485

-------------------------------

confusion matrix:
[[5620   88]
 [ 628  286]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12060300260782242
difference in average predicted and observed risk = -0.01742199739217759
number samples = 6622
accuracy = 0.891876
precision class 0 = 0.899488
precision class 1 = 0.764706
recall class 0 = 0.984583
recall class 1 = 0.31291
false negative rate = 0.68709
false positive rate = 0.015417
positive prediction rate = 0.056478
AUC of ROC = 0.881583
AUC of PRC = 0.60978
min(+P, Se) = 0.548634

-------------------------------

confusion matrix:
[[8924  122]
 [ 961  402]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.111455999314785
difference in average predicted and observed risk = -0.019488000685215
number samples = 10409
accuracy = 0.895955
precision class 0 = 0.902782
precision class 1 = 0.767176
recall class 0 = 0.986513
recall class 1 = 0.294938
false negative rate = 0.705062
false positive rate = 0.013487
positive prediction rate = 0.050341
AUC of ROC = 0.883281
AUC of PRC = 0.597428
min(+P, Se) = 0.547253

-------------------------------

confusion matrix:
[[1608   33]
 [ 254  153]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14647400379180908
difference in average predicted and observed risk = -0.05225599620819091
number samples = 2048
accuracy = 0.859863
precision class 0 = 0.863588
precision class 1 = 0.822581
recall class 0 = 0.97989
recall class 1 = 0.375921
false negative rate = 0.624079
false positive rate = 0.02011
positive prediction rate = 0.09082
AUC of ROC = 0.896857
AUC of PRC = 0.712215
min(+P, Se) = 0.633907

-------------------------------

confusion matrix:
[[1264   18]
 [  75   51]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10885000228881836
difference in average predicted and observed risk = 0.01936100228881836
number samples = 1408
accuracy = 0.933949
precision class 0 = 0.943988
precision class 1 = 0.73913
recall class 0 = 0.985959
recall class 1 = 0.404762
false negative rate = 0.595238
false positive rate = 0.014041
positive prediction rate = 0.049006
AUC of ROC = 0.890288
AUC of PRC = 0.575721
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[287   9]
 [ 32  20]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14218899607658386
difference in average predicted and observed risk = -0.00723600392341614
number samples = 348
accuracy = 0.882184
precision class 0 = 0.899687
precision class 1 = 0.689655
recall class 0 = 0.969595
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.030405
positive prediction rate = 0.083333
AUC of ROC = 0.874935
AUC of PRC = 0.624097
min(+P, Se) = 0.584906

-------------------------------

confusion matrix:
[[421   8]
 [ 24  15]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10827399790287018
difference in average predicted and observed risk = 0.024940997902870174
number samples = 468
accuracy = 0.931624
precision class 0 = 0.946067
precision class 1 = 0.652174
recall class 0 = 0.981352
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.018648
positive prediction rate = 0.049145
AUC of ROC = 0.856076
AUC of PRC = 0.523855
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[12504   190]
 [ 1346   641]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11671800166368484
difference in average predicted and observed risk = -0.018626998336315148
number samples = 14681
accuracy = 0.895375
precision class 0 = 0.902816
precision class 1 = 0.77136
recall class 0 = 0.985032
recall class 1 = 0.322597
false negative rate = 0.677403
false positive rate = 0.014968
positive prediction rate = 0.056604
AUC of ROC = 0.885735
AUC of PRC = 0.61532
min(+P, Se) = 0.557567

-------------------------------

==>predicting on validation



confusion matrix:
[[1506   29]
 [ 201   77]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1263190060853958
difference in average predicted and observed risk = -0.027017993914604188
number samples = 1813
accuracy = 0.873138
precision class 0 = 0.88225
precision class 1 = 0.726415
recall class 0 = 0.981107
recall class 1 = 0.276978
false negative rate = 0.723022
false positive rate = 0.018893
positive prediction rate = 0.058467
AUC of ROC = 0.854704
AUC of PRC = 0.58444
min(+P, Se) = 0.528777

-------------------------------

confusion matrix:
[[885  22]
 [ 78  35]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10903500020503998
difference in average predicted and observed risk = -0.0017489997949600156
number samples = 1020
accuracy = 0.901961
precision class 0 = 0.919003
precision class 1 = 0.614035
recall class 0 = 0.975744
recall class 1 = 0.309735
false negative rate = 0.690265
false positive rate = 0.024256
positive prediction rate = 0.055882
AUC of ROC = 0.851275
AUC of PRC = 0.47688
min(+P, Se) = 0.469027

-------------------------------

confusion matrix:
[[244   7]
 [ 18  16]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13008399307727814
difference in average predicted and observed risk = 0.010785993077278136
number samples = 285
accuracy = 0.912281
precision class 0 = 0.931298
precision class 1 = 0.695652
recall class 0 = 0.972112
recall class 1 = 0.470588
false negative rate = 0.529412
false positive rate = 0.027888
positive prediction rate = 0.080702
AUC of ROC = 0.888563
AUC of PRC = 0.613277
min(+P, Se) = 0.542857

-------------------------------

confusion matrix:
[[69  2]
 [ 5  2]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09914200007915497
difference in average predicted and observed risk = 0.009398000079154964
number samples = 78
accuracy = 0.910256
precision class 0 = 0.932432
precision class 1 = 0.5
recall class 0 = 0.971831
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.028169
positive prediction rate = 0.051282
AUC of ROC = 0.754527
AUC of PRC = 0.381618
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19947700202465057
difference in average predicted and observed risk = 0.04563100202465056
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1487   42]
 [ 166   78]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12122099846601486
difference in average predicted and observed risk = -0.01639900153398513
number samples = 1773
accuracy = 0.882685
precision class 0 = 0.899577
precision class 1 = 0.65
recall class 0 = 0.972531
recall class 1 = 0.319672
false negative rate = 0.680328
false positive rate = 0.027469
positive prediction rate = 0.067682
AUC of ROC = 0.858455
AUC of PRC = 0.552734
min(+P, Se) = 0.52381

-------------------------------

confusion matrix:
[[1238   19]
 [ 136   56]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12098000198602676
difference in average predicted and observed risk = -0.011524998013973248
number samples = 1449
accuracy = 0.89303
precision class 0 = 0.901019
precision class 1 = 0.746667
recall class 0 = 0.984885
recall class 1 = 0.291667
false negative rate = 0.708333
false positive rate = 0.015115
positive prediction rate = 0.05176
AUC of ROC = 0.855041
AUC of PRC = 0.55657
min(+P, Se) = 0.505155

-------------------------------

confusion matrix:
[[1937   41]
 [ 217   94]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11804600059986115
difference in average predicted and observed risk = -0.017820999400138843
number samples = 2289
accuracy = 0.887287
precision class 0 = 0.899257
precision class 1 = 0.696296
recall class 0 = 0.979272
recall class 1 = 0.302251
false negative rate = 0.697749
false positive rate = 0.020728
positive prediction rate = 0.058978
AUC of ROC = 0.855122
AUC of PRC = 0.550404
min(+P, Se) = 0.508039

-------------------------------

confusion matrix:
[[359   9]
 [ 55  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1421619951725006
difference in average predicted and observed risk = -0.038239004827499395
number samples = 449
accuracy = 0.857461
precision class 0 = 0.86715
precision class 1 = 0.742857
recall class 0 = 0.975543
recall class 1 = 0.320988
false negative rate = 0.679012
false positive rate = 0.024457
positive prediction rate = 0.077951
AUC of ROC = 0.85893
AUC of PRC = 0.623992
min(+P, Se) = 0.576471

-------------------------------

confusion matrix:
[[271   7]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11083400249481201
difference in average predicted and observed risk = 0.013431002494812008
number samples = 308
accuracy = 0.912338
precision class 0 = 0.931271
precision class 1 = 0.588235
recall class 0 = 0.97482
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.02518
positive prediction rate = 0.055195
AUC of ROC = 0.867746
AUC of PRC = 0.502045
min(+P, Se) = 0.483871

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10764800012111664
difference in average predicted and observed risk = 0.03548300012111663
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.877778
AUC of PRC = 0.357597
min(+P, Se) = 0.3

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1469389945268631
difference in average predicted and observed risk = 0.05833099452686309
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.890873
AUC of PRC = 0.672423
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2725   61]
 [ 302  134]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12111300230026245
difference in average predicted and observed risk = -0.014206997699737545
number samples = 3222
accuracy = 0.887337
precision class 0 = 0.900231
precision class 1 = 0.68718
recall class 0 = 0.978105
recall class 1 = 0.307339
false negative rate = 0.692661
false positive rate = 0.021895
positive prediction rate = 0.060521
AUC of ROC = 0.856889
AUC of PRC = 0.553515
min(+P, Se) = 0.514806

-------------------------------

Epoch 00030: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch30.state
Epoch 31/100
 - 812s - loss: 0.2821 - val_loss: 0.2821

==>predicting on train



confusion matrix:
[[6972   64]
 [ 996  316]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.1284250020980835
difference in average predicted and observed risk = -0.0287379979019165
number samples = 8348
accuracy = 0.873023
precision class 0 = 0.875
precision class 1 = 0.831579
recall class 0 = 0.990904
recall class 1 = 0.240854
false negative rate = 0.759146
false positive rate = 0.009096
positive prediction rate = 0.04552
AUC of ROC = 0.88032
AUC of PRC = 0.629867
min(+P, Se) = 0.576982

-------------------------------

confusion matrix:
[[3946   56]
 [ 284  187]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11092499643564224
difference in average predicted and observed risk = 0.00562699643564224
number samples = 4473
accuracy = 0.923988
precision class 0 = 0.93286
precision class 1 = 0.769547
recall class 0 = 0.986007
recall class 1 = 0.397028
false negative rate = 0.602972
false positive rate = 0.013993
positive prediction rate = 0.054326
AUC of ROC = 0.906293
AUC of PRC = 0.639655
min(+P, Se) = 0.569002

-------------------------------

confusion matrix:
[[1180   15]
 [  87   56]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11890500038862228
difference in average predicted and observed risk = 0.012029000388622285
number samples = 1338
accuracy = 0.923767
precision class 0 = 0.931334
precision class 1 = 0.788732
recall class 0 = 0.987448
recall class 1 = 0.391608
false negative rate = 0.608392
false positive rate = 0.012552
positive prediction rate = 0.053064
AUC of ROC = 0.911455
AUC of PRC = 0.611101
min(+P, Se) = 0.559441

-------------------------------

confusion matrix:
[[347   3]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10901100188493729
difference in average predicted and observed risk = 0.008754001884937287
number samples = 389
accuracy = 0.935733
precision class 0 = 0.940379
precision class 1 = 0.85
recall class 0 = 0.991429
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.008571
positive prediction rate = 0.051414
AUC of ROC = 0.914725
AUC of PRC = 0.6246
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[109   2]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1664460003376007
difference in average predicted and observed risk = 0.0010320003376007025
number samples = 133
accuracy = 0.917293
precision class 0 = 0.923729
precision class 1 = 0.866667
recall class 0 = 0.981982
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.018018
positive prediction rate = 0.112782
AUC of ROC = 0.948812
AUC of PRC = 0.823147
min(+P, Se) = 0.72

-------------------------------

confusion matrix:
[[6907   79]
 [ 747  326]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11848100274801254
difference in average predicted and observed risk = -0.014661997251987469
number samples = 8059
accuracy = 0.897506
precision class 0 = 0.902404
precision class 1 = 0.804938
recall class 0 = 0.988692
recall class 1 = 0.303821
false negative rate = 0.696179
false positive rate = 0.011308
positive prediction rate = 0.050254
AUC of ROC = 0.896779
AUC of PRC = 0.634598
min(+P, Se) = 0.582479

-------------------------------

confusion matrix:
[[5647   61]
 [ 651  263]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.1264059990644455
difference in average predicted and observed risk = -0.011619000935554513
number samples = 6622
accuracy = 0.89248
precision class 0 = 0.896634
precision class 1 = 0.811728
recall class 0 = 0.989313
recall class 1 = 0.287746
false negative rate = 0.712254
false positive rate = 0.010687
positive prediction rate = 0.048928
AUC of ROC = 0.886395
AUC of PRC = 0.621927
min(+P, Se) = 0.564551

-------------------------------

confusion matrix:
[[8956   90]
 [ 989  374]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11795999854803085
difference in average predicted and observed risk = -0.012984001451969152
number samples = 10409
accuracy = 0.89634
precision class 0 = 0.900553
precision class 1 = 0.806035
recall class 0 = 0.990051
recall class 1 = 0.274395
false negative rate = 0.725605
false positive rate = 0.009949
positive prediction rate = 0.044577
AUC of ROC = 0.890877
AUC of PRC = 0.615437
min(+P, Se) = 0.56493

-------------------------------

confusion matrix:
[[1620   21]
 [ 270  137]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1471180021762848
difference in average predicted and observed risk = -0.0516119978237152
number samples = 2048
accuracy = 0.85791
precision class 0 = 0.857143
precision class 1 = 0.867089
recall class 0 = 0.987203
recall class 1 = 0.336609
false negative rate = 0.663391
false positive rate = 0.012797
positive prediction rate = 0.077148
AUC of ROC = 0.898803
AUC of PRC = 0.717412
min(+P, Se) = 0.642157

-------------------------------

confusion matrix:
[[1266   16]
 [  79   47]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11377199739217758
difference in average predicted and observed risk = 0.024282997392177583
number samples = 1408
accuracy = 0.932528
precision class 0 = 0.941264
precision class 1 = 0.746032
recall class 0 = 0.98752
recall class 1 = 0.373016
false negative rate = 0.626984
false positive rate = 0.01248
positive prediction rate = 0.044744
AUC of ROC = 0.89859
AUC of PRC = 0.581263
min(+P, Se) = 0.574803

-------------------------------

confusion matrix:
[[288   8]
 [ 35  17]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14451800286769867
difference in average predicted and observed risk = -0.004906997132301333
number samples = 348
accuracy = 0.876437
precision class 0 = 0.891641
precision class 1 = 0.68
recall class 0 = 0.972973
recall class 1 = 0.326923
false negative rate = 0.673077
false positive rate = 0.027027
positive prediction rate = 0.071839
AUC of ROC = 0.881367
AUC of PRC = 0.608235
min(+P, Se) = 0.576923

-------------------------------

confusion matrix:
[[424   5]
 [ 25  14]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11169599741697311
difference in average predicted and observed risk = 0.02836299741697311
number samples = 468
accuracy = 0.935897
precision class 0 = 0.944321
precision class 1 = 0.736842
recall class 0 = 0.988345
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.011655
positive prediction rate = 0.040598
AUC of ROC = 0.866535
AUC of PRC = 0.545419
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[12554   140]
 [ 1398   589]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12205599993467331
difference in average predicted and observed risk = -0.013289000065326684
number samples = 14681
accuracy = 0.895239
precision class 0 = 0.899799
precision class 1 = 0.807956
recall class 0 = 0.988971
recall class 1 = 0.296427
false negative rate = 0.703573
false positive rate = 0.011029
positive prediction rate = 0.049656
AUC of ROC = 0.892085
AUC of PRC = 0.628718
min(+P, Se) = 0.574233

-------------------------------

==>predicting on validation



confusion matrix:
[[1512   23]
 [ 207   71]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1323540061712265
difference in average predicted and observed risk = -0.0209829938287735
number samples = 1813
accuracy = 0.873138
precision class 0 = 0.879581
precision class 1 = 0.755319
recall class 0 = 0.985016
recall class 1 = 0.255396
false negative rate = 0.744604
false positive rate = 0.014984
positive prediction rate = 0.051848
AUC of ROC = 0.850814
AUC of PRC = 0.577839
min(+P, Se) = 0.510714

-------------------------------

confusion matrix:
[[895  12]
 [ 82  31]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11267100274562836
difference in average predicted and observed risk = 0.0018870027456283633
number samples = 1020
accuracy = 0.907843
precision class 0 = 0.91607
precision class 1 = 0.72093
recall class 0 = 0.98677
recall class 1 = 0.274336
false negative rate = 0.725664
false positive rate = 0.01323
positive prediction rate = 0.042157
AUC of ROC = 0.85871
AUC of PRC = 0.511615
min(+P, Se) = 0.469565

-------------------------------

confusion matrix:
[[243   8]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13433800637722015
difference in average predicted and observed risk = 0.015040006377220153
number samples = 285
accuracy = 0.905263
precision class 0 = 0.927481
precision class 1 = 0.652174
recall class 0 = 0.968127
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.031873
positive prediction rate = 0.080702
AUC of ROC = 0.898289
AUC of PRC = 0.62721
min(+P, Se) = 0.542857

-------------------------------

confusion matrix:
[[69  2]
 [ 5  2]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10074000060558319
difference in average predicted and observed risk = 0.010996000605583187
number samples = 78
accuracy = 0.910256
precision class 0 = 0.932432
precision class 1 = 0.5
recall class 0 = 0.971831
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.028169
positive prediction rate = 0.051282
AUC of ROC = 0.750503
AUC of PRC = 0.387865
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[22  0]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17927399277687073
difference in average predicted and observed risk = 0.025427992776870717
number samples = 26
accuracy = 0.961538
precision class 0 = 0.956522
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.0
positive prediction rate = 0.115385
AUC of ROC = 0.988636
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1498   31]
 [ 174   70]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12474100291728973
difference in average predicted and observed risk = -0.012878997082710258
number samples = 1773
accuracy = 0.884377
precision class 0 = 0.895933
precision class 1 = 0.693069
recall class 0 = 0.979725
recall class 1 = 0.286885
false negative rate = 0.713115
false positive rate = 0.020275
positive prediction rate = 0.056966
AUC of ROC = 0.857565
AUC of PRC = 0.558834
min(+P, Se) = 0.504032

-------------------------------

confusion matrix:
[[1243   14]
 [ 140   52]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12734399735927582
difference in average predicted and observed risk = -0.005161002640724194
number samples = 1449
accuracy = 0.89372
precision class 0 = 0.898771
precision class 1 = 0.787879
recall class 0 = 0.988862
recall class 1 = 0.270833
false negative rate = 0.729167
false positive rate = 0.011138
positive prediction rate = 0.045549
AUC of ROC = 0.858124
AUC of PRC = 0.566925
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[1948   30]
 [ 225   86]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12403400242328644
difference in average predicted and observed risk = -0.01183299757671355
number samples = 2289
accuracy = 0.888598
precision class 0 = 0.896457
precision class 1 = 0.741379
recall class 0 = 0.984833
recall class 1 = 0.276527
false negative rate = 0.723473
false positive rate = 0.015167
positive prediction rate = 0.050677
AUC of ROC = 0.855705
AUC of PRC = 0.557153
min(+P, Se) = 0.501608

-------------------------------

confusion matrix:
[[361   7]
 [ 56  25]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14163999259471893
difference in average predicted and observed risk = -0.03876100740528107
number samples = 449
accuracy = 0.859688
precision class 0 = 0.865707
precision class 1 = 0.78125
recall class 0 = 0.980978
recall class 1 = 0.308642
false negative rate = 0.691358
false positive rate = 0.019022
positive prediction rate = 0.071269
AUC of ROC = 0.855609
AUC of PRC = 0.632381
min(+P, Se) = 0.561224

-------------------------------

confusion matrix:
[[273   5]
 [ 23   7]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11700200289487839
difference in average predicted and observed risk = 0.019599002894878384
number samples = 308
accuracy = 0.909091
precision class 0 = 0.922297
precision class 1 = 0.583333
recall class 0 = 0.982014
recall class 1 = 0.233333
false negative rate = 0.766667
false positive rate = 0.017986
positive prediction rate = 0.038961
AUC of ROC = 0.880935
AUC of PRC = 0.511611
min(+P, Se) = 0.483871

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.1089790016412735
difference in average predicted and observed risk = 0.03681400164127349
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.855556
AUC of PRC = 0.331656
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1464409977197647
difference in average predicted and observed risk = 0.0578329977197647
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.888889
AUC of PRC = 0.731713
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2741   45]
 [ 314  122]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12591099739074707
difference in average predicted and observed risk = -0.009409002609252926
number samples = 3222
accuracy = 0.888579
precision class 0 = 0.897218
precision class 1 = 0.730539
recall class 0 = 0.983848
recall class 1 = 0.279817
false negative rate = 0.720183
false positive rate = 0.016152
positive prediction rate = 0.051831
AUC of ROC = 0.857454
AUC of PRC = 0.560853
min(+P, Se) = 0.495413

-------------------------------

Epoch 00031: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch31.state
Epoch 32/100
 - 814s - loss: 0.2796 - val_loss: 0.2825

==>predicting on train



confusion matrix:
[[6970   66]
 [ 981  331]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.11941000074148178
difference in average predicted and observed risk = -0.037752999258518216
number samples = 8348
accuracy = 0.874581
precision class 0 = 0.876619
precision class 1 = 0.833753
recall class 0 = 0.99062
recall class 1 = 0.252287
false negative rate = 0.747713
false positive rate = 0.00938
positive prediction rate = 0.047556
AUC of ROC = 0.877136
AUC of PRC = 0.633614
min(+P, Se) = 0.581694

-------------------------------

confusion matrix:
[[3943   59]
 [ 288  183]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10336499661207199
difference in average predicted and observed risk = -0.0019330033879280117
number samples = 4473
accuracy = 0.922423
precision class 0 = 0.931931
precision class 1 = 0.756198
recall class 0 = 0.985257
recall class 1 = 0.388535
false negative rate = 0.611465
false positive rate = 0.014743
positive prediction rate = 0.054102
AUC of ROC = 0.901293
AUC of PRC = 0.633161
min(+P, Se) = 0.573248

-------------------------------

confusion matrix:
[[1178   17]
 [  88   55]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.1114720031619072
difference in average predicted and observed risk = 0.004596003161907197
number samples = 1338
accuracy = 0.921525
precision class 0 = 0.93049
precision class 1 = 0.763889
recall class 0 = 0.985774
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.014226
positive prediction rate = 0.053812
AUC of ROC = 0.907008
AUC of PRC = 0.626802
min(+P, Se) = 0.566434

-------------------------------

confusion matrix:
[[347   3]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10046300292015076
difference in average predicted and observed risk = 0.00020600292015075794
number samples = 389
accuracy = 0.935733
precision class 0 = 0.940379
precision class 1 = 0.85
recall class 0 = 0.991429
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.008571
positive prediction rate = 0.051414
AUC of ROC = 0.897875
AUC of PRC = 0.632383
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[108   3]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1538729965686798
difference in average predicted and observed risk = -0.011541003431320196
number samples = 133
accuracy = 0.909774
precision class 0 = 0.923077
precision class 1 = 0.8125
recall class 0 = 0.972973
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.027027
positive prediction rate = 0.120301
AUC of ROC = 0.912776
AUC of PRC = 0.779075
min(+P, Se) = 0.681818

-------------------------------

confusion matrix:
[[6901   85]
 [ 750  323]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.109825998544693
difference in average predicted and observed risk = -0.023317001455307018
number samples = 8059
accuracy = 0.896389
precision class 0 = 0.901974
precision class 1 = 0.791667
recall class 0 = 0.987833
recall class 1 = 0.301025
false negative rate = 0.698975
false positive rate = 0.012167
positive prediction rate = 0.050627
AUC of ROC = 0.891794
AUC of PRC = 0.634254
min(+P, Se) = 0.594972

-------------------------------

confusion matrix:
[[5645   63]
 [ 638  276]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11821100115776062
difference in average predicted and observed risk = -0.01981399884223939
number samples = 6622
accuracy = 0.894141
precision class 0 = 0.898456
precision class 1 = 0.814159
recall class 0 = 0.988963
recall class 1 = 0.301969
false negative rate = 0.698031
false positive rate = 0.011037
positive prediction rate = 0.051193
AUC of ROC = 0.88341
AUC of PRC = 0.62553
min(+P, Se) = 0.564551

-------------------------------

confusion matrix:
[[8954   92]
 [ 984  379]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10894399881362915
difference in average predicted and observed risk = -0.022000001186370854
number samples = 10409
accuracy = 0.896628
precision class 0 = 0.900986
precision class 1 = 0.804671
recall class 0 = 0.98983
recall class 1 = 0.278063
false negative rate = 0.721937
false positive rate = 0.01017
positive prediction rate = 0.045249
AUC of ROC = 0.885758
AUC of PRC = 0.616729
min(+P, Se) = 0.566716

-------------------------------

confusion matrix:
[[1616   25]
 [ 266  141]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.139397993683815
difference in average predicted and observed risk = -0.05933200631618499
number samples = 2048
accuracy = 0.85791
precision class 0 = 0.858661
precision class 1 = 0.849398
recall class 0 = 0.984765
recall class 1 = 0.346437
false negative rate = 0.653563
false positive rate = 0.015235
positive prediction rate = 0.081055
AUC of ROC = 0.897024
AUC of PRC = 0.716028
min(+P, Se) = 0.646192

-------------------------------

confusion matrix:
[[1267   15]
 [  79   47]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10683699697256088
difference in average predicted and observed risk = 0.017347996972560883
number samples = 1408
accuracy = 0.933239
precision class 0 = 0.941308
precision class 1 = 0.758065
recall class 0 = 0.9883
recall class 1 = 0.373016
false negative rate = 0.626984
false positive rate = 0.0117
positive prediction rate = 0.044034
AUC of ROC = 0.895018
AUC of PRC = 0.583432
min(+P, Se) = 0.578125

-------------------------------

confusion matrix:
[[288   8]
 [ 33  19]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14154699444770813
difference in average predicted and observed risk = -0.007878005552291872
number samples = 348
accuracy = 0.882184
precision class 0 = 0.897196
precision class 1 = 0.703704
recall class 0 = 0.972973
recall class 1 = 0.365385
false negative rate = 0.634615
false positive rate = 0.027027
positive prediction rate = 0.077586
AUC of ROC = 0.879288
AUC of PRC = 0.631838
min(+P, Se) = 0.576923

-------------------------------

confusion matrix:
[[421   8]
 [ 26  13]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.1040790006518364
difference in average predicted and observed risk = 0.02074600065183639
number samples = 468
accuracy = 0.92735
precision class 0 = 0.941834
precision class 1 = 0.619048
recall class 0 = 0.981352
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.018648
positive prediction rate = 0.044872
AUC of ROC = 0.863726
AUC of PRC = 0.549039
min(+P, Se) = 0.487179

-------------------------------

confusion matrix:
[[12546   148]
 [ 1388   599]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11360800266265869
difference in average predicted and observed risk = -0.0217369973373413
number samples = 14681
accuracy = 0.895375
precision class 0 = 0.900388
precision class 1 = 0.801874
recall class 0 = 0.988341
recall class 1 = 0.301459
false negative rate = 0.698541
false positive rate = 0.011659
positive prediction rate = 0.050882
AUC of ROC = 0.887906
AUC of PRC = 0.629932
min(+P, Se) = 0.580775

-------------------------------

==>predicting on validation



confusion matrix:
[[1512   23]
 [ 204   74]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12275099754333496
difference in average predicted and observed risk = -0.03058600245666504
number samples = 1813
accuracy = 0.874793
precision class 0 = 0.881119
precision class 1 = 0.762887
recall class 0 = 0.985016
recall class 1 = 0.266187
false negative rate = 0.733813
false positive rate = 0.014984
positive prediction rate = 0.053502
AUC of ROC = 0.856267
AUC of PRC = 0.59125
min(+P, Se) = 0.52518

-------------------------------

confusion matrix:
[[894  13]
 [ 84  29]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.1036280021071434
difference in average predicted and observed risk = -0.0071559978928565915
number samples = 1020
accuracy = 0.904902
precision class 0 = 0.91411
precision class 1 = 0.690476
recall class 0 = 0.985667
recall class 1 = 0.256637
false negative rate = 0.743363
false positive rate = 0.014333
positive prediction rate = 0.041176
AUC of ROC = 0.851821
AUC of PRC = 0.487164
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[245   6]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1273149996995926
difference in average predicted and observed risk = 0.008016999699592589
number samples = 285
accuracy = 0.912281
precision class 0 = 0.92803
precision class 1 = 0.714286
recall class 0 = 0.976096
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.023904
positive prediction rate = 0.073684
AUC of ROC = 0.890555
AUC of PRC = 0.62982
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09288699924945831
difference in average predicted and observed risk = 0.0031429992494583087
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.752515
AUC of PRC = 0.405339
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17856000363826752
difference in average predicted and observed risk = 0.024714003638267507
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.977273
AUC of PRC = 0.908333
min(+P, Se) = 0.75

-------------------------------

confusion matrix:
[[1498   31]
 [ 171   73]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1160300001502037
difference in average predicted and observed risk = -0.021589999849796288
number samples = 1773
accuracy = 0.886069
precision class 0 = 0.897543
precision class 1 = 0.701923
recall class 0 = 0.979725
recall class 1 = 0.29918
false negative rate = 0.70082
false positive rate = 0.020275
positive prediction rate = 0.058658
AUC of ROC = 0.859077
AUC of PRC = 0.563054
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[1243   14]
 [ 143   49]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11780600249767303
difference in average predicted and observed risk = -0.014698997502326977
number samples = 1449
accuracy = 0.891649
precision class 0 = 0.896825
precision class 1 = 0.777778
recall class 0 = 0.988862
recall class 1 = 0.255208
false negative rate = 0.744792
false positive rate = 0.011138
positive prediction rate = 0.043478
AUC of ROC = 0.85773
AUC of PRC = 0.561023
min(+P, Se) = 0.507538

-------------------------------

confusion matrix:
[[1948   30]
 [ 224   87]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11460299789905548
difference in average predicted and observed risk = -0.021264002100944507
number samples = 2289
accuracy = 0.889035
precision class 0 = 0.896869
precision class 1 = 0.74359
recall class 0 = 0.984833
recall class 1 = 0.279743
false negative rate = 0.720257
false positive rate = 0.015167
positive prediction rate = 0.051114
AUC of ROC = 0.856996
AUC of PRC = 0.560045
min(+P, Se) = 0.503205

-------------------------------

confusion matrix:
[[361   7]
 [ 57  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13406099379062653
difference in average predicted and observed risk = -0.04634000620937348
number samples = 449
accuracy = 0.857461
precision class 0 = 0.863636
precision class 1 = 0.774194
recall class 0 = 0.980978
recall class 1 = 0.296296
false negative rate = 0.703704
false positive rate = 0.019022
positive prediction rate = 0.069042
AUC of ROC = 0.861883
AUC of PRC = 0.626165
min(+P, Se) = 0.573171

-------------------------------

confusion matrix:
[[274   4]
 [ 23   7]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10575799643993378
difference in average predicted and observed risk = 0.008354996439933773
number samples = 308
accuracy = 0.912338
precision class 0 = 0.922559
precision class 1 = 0.636364
recall class 0 = 0.985611
recall class 1 = 0.233333
false negative rate = 0.766667
false positive rate = 0.014388
positive prediction rate = 0.035714
AUC of ROC = 0.867146
AUC of PRC = 0.497771
min(+P, Se) = 0.451613

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.1053370013833046
difference in average predicted and observed risk = 0.03317200138330459
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.87619
AUC of PRC = 0.370424
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1406320035457611
difference in average predicted and observed risk = 0.0520240035457611
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.871032
AUC of PRC = 0.69469
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2741   45]
 [ 314  122]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11682800203561783
difference in average predicted and observed risk = -0.018491997964382167
number samples = 3222
accuracy = 0.888579
precision class 0 = 0.897218
precision class 1 = 0.730539
recall class 0 = 0.983848
recall class 1 = 0.279817
false negative rate = 0.720183
false positive rate = 0.016152
positive prediction rate = 0.051831
AUC of ROC = 0.858181
AUC of PRC = 0.561748
min(+P, Se) = 0.506818

-------------------------------

Epoch 00032: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch32.state
Epoch 33/100
 - 821s - loss: 0.2763 - val_loss: 0.2809

==>predicting on train



confusion matrix:
[[6955   81]
 [ 944  368]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.1372150033712387
difference in average predicted and observed risk = -0.01994799662876129
number samples = 8348
accuracy = 0.877216
precision class 0 = 0.880491
precision class 1 = 0.819599
recall class 0 = 0.988488
recall class 1 = 0.280488
false negative rate = 0.719512
false positive rate = 0.011512
positive prediction rate = 0.053785
AUC of ROC = 0.884005
AUC of PRC = 0.643336
min(+P, Se) = 0.589939

-------------------------------

confusion matrix:
[[3946   56]
 [ 278  193]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11410800367593765
difference in average predicted and observed risk = 0.00881000367593765
number samples = 4473
accuracy = 0.92533
precision class 0 = 0.934186
precision class 1 = 0.7751
recall class 0 = 0.986007
recall class 1 = 0.409766
false negative rate = 0.590234
false positive rate = 0.013993
positive prediction rate = 0.055667
AUC of ROC = 0.905803
AUC of PRC = 0.648237
min(+P, Se) = 0.586639

-------------------------------

confusion matrix:
[[1178   17]
 [  86   57]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.12347999960184097
difference in average predicted and observed risk = 0.016603999601840974
number samples = 1338
accuracy = 0.923019
precision class 0 = 0.931962
precision class 1 = 0.77027
recall class 0 = 0.985774
recall class 1 = 0.398601
false negative rate = 0.601399
false positive rate = 0.014226
positive prediction rate = 0.055306
AUC of ROC = 0.911151
AUC of PRC = 0.636372
min(+P, Se) = 0.5625

-------------------------------

confusion matrix:
[[346   4]
 [ 23  16]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.11274000257253647
difference in average predicted and observed risk = 0.01248300257253647
number samples = 389
accuracy = 0.930591
precision class 0 = 0.937669
precision class 1 = 0.8
recall class 0 = 0.988571
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.011429
positive prediction rate = 0.051414
AUC of ROC = 0.91956
AUC of PRC = 0.611182
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[109   2]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1668580025434494
difference in average predicted and observed risk = 0.0014440025434493964
number samples = 133
accuracy = 0.917293
precision class 0 = 0.923729
precision class 1 = 0.866667
recall class 0 = 0.981982
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.018018
positive prediction rate = 0.112782
AUC of ROC = 0.943898
AUC of PRC = 0.820928
min(+P, Se) = 0.782609

-------------------------------

confusion matrix:
[[6905   81]
 [ 718  355]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1236329972743988
difference in average predicted and observed risk = -0.009510002725601208
number samples = 8059
accuracy = 0.900856
precision class 0 = 0.905811
precision class 1 = 0.81422
recall class 0 = 0.988405
recall class 1 = 0.330848
false negative rate = 0.669152
false positive rate = 0.011595
positive prediction rate = 0.054101
AUC of ROC = 0.898832
AUC of PRC = 0.649464
min(+P, Se) = 0.600743

-------------------------------

confusion matrix:
[[5629   79]
 [ 622  292]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.13451999425888062
difference in average predicted and observed risk = -0.0035050057411193936
number samples = 6622
accuracy = 0.894141
precision class 0 = 0.900496
precision class 1 = 0.787062
recall class 0 = 0.98616
recall class 1 = 0.319475
false negative rate = 0.680525
false positive rate = 0.01384
positive prediction rate = 0.056025
AUC of ROC = 0.890116
AUC of PRC = 0.633846
min(+P, Se) = 0.580963

-------------------------------

confusion matrix:
[[8949   97]
 [ 959  404]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.1246350035071373
difference in average predicted and observed risk = -0.006308996492862706
number samples = 10409
accuracy = 0.898549
precision class 0 = 0.90321
precision class 1 = 0.806387
recall class 0 = 0.989277
recall class 1 = 0.296405
false negative rate = 0.703595
false positive rate = 0.010723
positive prediction rate = 0.048131
AUC of ROC = 0.892366
AUC of PRC = 0.628694
min(+P, Se) = 0.577794

-------------------------------

confusion matrix:
[[1613   28]
 [ 249  158]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.15363900363445282
difference in average predicted and observed risk = -0.04509099636554717
number samples = 2048
accuracy = 0.864746
precision class 0 = 0.866273
precision class 1 = 0.849462
recall class 0 = 0.982937
recall class 1 = 0.388206
false negative rate = 0.611794
false positive rate = 0.017063
positive prediction rate = 0.09082
AUC of ROC = 0.9048
AUC of PRC = 0.732029
min(+P, Se) = 0.651106

-------------------------------

confusion matrix:
[[1265   17]
 [  75   51]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11897700279951096
difference in average predicted and observed risk = 0.029488002799510957
number samples = 1408
accuracy = 0.934659
precision class 0 = 0.94403
precision class 1 = 0.75
recall class 0 = 0.986739
recall class 1 = 0.404762
false negative rate = 0.595238
false positive rate = 0.013261
positive prediction rate = 0.048295
AUC of ROC = 0.904471
AUC of PRC = 0.592764
min(+P, Se) = 0.595238

-------------------------------

confusion matrix:
[[288   8]
 [ 34  18]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.15365299582481384
difference in average predicted and observed risk = 0.0042279958248138405
number samples = 348
accuracy = 0.87931
precision class 0 = 0.89441
precision class 1 = 0.692308
recall class 0 = 0.972973
recall class 1 = 0.346154
false negative rate = 0.653846
false positive rate = 0.027027
positive prediction rate = 0.074713
AUC of ROC = 0.880133
AUC of PRC = 0.620077
min(+P, Se) = 0.576923

-------------------------------

confusion matrix:
[[419  10]
 [ 23  16]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11576300114393234
difference in average predicted and observed risk = 0.03243000114393234
number samples = 468
accuracy = 0.929487
precision class 0 = 0.947964
precision class 1 = 0.615385
recall class 0 = 0.97669
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.02331
positive prediction rate = 0.055556
AUC of ROC = 0.875979
AUC of PRC = 0.56043
min(+P, Se) = 0.525

-------------------------------

confusion matrix:
[[12534   160]
 [ 1340   647]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12854300439357758
difference in average predicted and observed risk = -0.006801995606422417
number samples = 14681
accuracy = 0.897827
precision class 0 = 0.903416
precision class 1 = 0.801735
recall class 0 = 0.987396
recall class 1 = 0.325617
false negative rate = 0.674384
false positive rate = 0.012604
positive prediction rate = 0.054969
AUC of ROC = 0.894856
AUC of PRC = 0.642172
min(+P, Se) = 0.589331

-------------------------------

==>predicting on validation



confusion matrix:
[[1510   25]
 [ 199   79]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1419840008020401
difference in average predicted and observed risk = -0.011352999197959901
number samples = 1813
accuracy = 0.876448
precision class 0 = 0.883558
precision class 1 = 0.759615
recall class 0 = 0.983713
recall class 1 = 0.284173
false negative rate = 0.715827
false positive rate = 0.016287
positive prediction rate = 0.057363
AUC of ROC = 0.847958
AUC of PRC = 0.574165
min(+P, Se) = 0.517986

-------------------------------

confusion matrix:
[[891  16]
 [ 85  28]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11518500000238419
difference in average predicted and observed risk = 0.004401000002384192
number samples = 1020
accuracy = 0.90098
precision class 0 = 0.91291
precision class 1 = 0.636364
recall class 0 = 0.982359
recall class 1 = 0.247788
false negative rate = 0.752212
false positive rate = 0.017641
positive prediction rate = 0.043137
AUC of ROC = 0.86312
AUC of PRC = 0.50453
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[244   7]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13608799874782562
difference in average predicted and observed risk = 0.01678999874782562
number samples = 285
accuracy = 0.905263
precision class 0 = 0.924242
precision class 1 = 0.666667
recall class 0 = 0.972112
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.027888
positive prediction rate = 0.073684
AUC of ROC = 0.881884
AUC of PRC = 0.622181
min(+P, Se) = 0.538462

-------------------------------

confusion matrix:
[[69  2]
 [ 5  2]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10092499852180481
difference in average predicted and observed risk = 0.011180998521804805
number samples = 78
accuracy = 0.910256
precision class 0 = 0.932432
precision class 1 = 0.5
recall class 0 = 0.971831
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.028169
positive prediction rate = 0.051282
AUC of ROC = 0.77666
AUC of PRC = 0.417842
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18435199558734894
difference in average predicted and observed risk = 0.030505995587348927
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1497   32]
 [ 171   73]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12971599400043488
difference in average predicted and observed risk = -0.007904005999565117
number samples = 1773
accuracy = 0.885505
precision class 0 = 0.897482
precision class 1 = 0.695238
recall class 0 = 0.979071
recall class 1 = 0.29918
false negative rate = 0.70082
false positive rate = 0.020929
positive prediction rate = 0.059222
AUC of ROC = 0.85738
AUC of PRC = 0.556419
min(+P, Se) = 0.514286

-------------------------------

confusion matrix:
[[1238   19]
 [ 139   53]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.13552099466323853
difference in average predicted and observed risk = 0.0030159946632385137
number samples = 1449
accuracy = 0.890959
precision class 0 = 0.899056
precision class 1 = 0.736111
recall class 0 = 0.984885
recall class 1 = 0.276042
false negative rate = 0.723958
false positive rate = 0.015115
positive prediction rate = 0.049689
AUC of ROC = 0.858957
AUC of PRC = 0.567534
min(+P, Se) = 0.505208

-------------------------------

confusion matrix:
[[1943   35]
 [ 222   89]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1303820013999939
difference in average predicted and observed risk = -0.005484998600006091
number samples = 2289
accuracy = 0.887724
precision class 0 = 0.89746
precision class 1 = 0.717742
recall class 0 = 0.982305
recall class 1 = 0.286174
false negative rate = 0.713826
false positive rate = 0.017695
positive prediction rate = 0.054172
AUC of ROC = 0.854003
AUC of PRC = 0.554643
min(+P, Se) = 0.507987

-------------------------------

confusion matrix:
[[361   7]
 [ 57  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14603500068187714
difference in average predicted and observed risk = -0.03436599931812287
number samples = 449
accuracy = 0.857461
precision class 0 = 0.863636
precision class 1 = 0.774194
recall class 0 = 0.980978
recall class 1 = 0.296296
false negative rate = 0.703704
false positive rate = 0.019022
positive prediction rate = 0.069042
AUC of ROC = 0.864198
AUC of PRC = 0.636814
min(+P, Se) = 0.580247

-------------------------------

confusion matrix:
[[273   5]
 [ 22   8]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.1261560022830963
difference in average predicted and observed risk = 0.02875300228309631
number samples = 308
accuracy = 0.912338
precision class 0 = 0.925424
precision class 1 = 0.615385
recall class 0 = 0.982014
recall class 1 = 0.266667
false negative rate = 0.733333
false positive rate = 0.017986
positive prediction rate = 0.042208
AUC of ROC = 0.872662
AUC of PRC = 0.509424
min(+P, Se) = 0.548387

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11518199741840363
difference in average predicted and observed risk = 0.04301699741840362
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.869841
AUC of PRC = 0.350491
min(+P, Se) = 0.3

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15587499737739563
difference in average predicted and observed risk = 0.06726699737739562
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.900794
AUC of PRC = 0.725642
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2735   51]
 [ 310  126]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.13232700526714325
difference in average predicted and observed risk = -0.0029929947328567463
number samples = 3222
accuracy = 0.887958
precision class 0 = 0.898194
precision class 1 = 0.711864
recall class 0 = 0.981694
recall class 1 = 0.288991
false negative rate = 0.711009
false positive rate = 0.018306
positive prediction rate = 0.054935
AUC of ROC = 0.857485
AUC of PRC = 0.560105
min(+P, Se) = 0.508009

-------------------------------

Epoch 00033: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch33.state
Epoch 34/100
 - 819s - loss: 0.2788 - val_loss: 0.2838

==>predicting on train



confusion matrix:
[[6963   73]
 [ 965  347]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.11873400211334229
difference in average predicted and observed risk = -0.03842899788665771
number samples = 8348
accuracy = 0.875659
precision class 0 = 0.87828
precision class 1 = 0.82619
recall class 0 = 0.989625
recall class 1 = 0.264482
false negative rate = 0.735518
false positive rate = 0.010375
positive prediction rate = 0.050311
AUC of ROC = 0.881137
AUC of PRC = 0.635472
min(+P, Se) = 0.577744

-------------------------------

confusion matrix:
[[3944   58]
 [ 285  186]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.09958600252866745
difference in average predicted and observed risk = -0.005711997471332553
number samples = 4473
accuracy = 0.923318
precision class 0 = 0.932608
precision class 1 = 0.762295
recall class 0 = 0.985507
recall class 1 = 0.394904
false negative rate = 0.605096
false positive rate = 0.014493
positive prediction rate = 0.05455
AUC of ROC = 0.909531
AUC of PRC = 0.645736
min(+P, Se) = 0.585987

-------------------------------

confusion matrix:
[[1178   17]
 [  89   54]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10802099853754044
difference in average predicted and observed risk = 0.001144998537540437
number samples = 1338
accuracy = 0.920777
precision class 0 = 0.929755
precision class 1 = 0.760563
recall class 0 = 0.985774
recall class 1 = 0.377622
false negative rate = 0.622378
false positive rate = 0.014226
positive prediction rate = 0.053064
AUC of ROC = 0.916195
AUC of PRC = 0.653433
min(+P, Se) = 0.58042

-------------------------------

confusion matrix:
[[346   4]
 [ 23  16]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09729000180959702
difference in average predicted and observed risk = -0.0029669981904029835
number samples = 389
accuracy = 0.930591
precision class 0 = 0.937669
precision class 1 = 0.8
recall class 0 = 0.988571
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.011429
positive prediction rate = 0.051414
AUC of ROC = 0.918828
AUC of PRC = 0.634636
min(+P, Se) = 0.622222

-------------------------------

confusion matrix:
[[109   2]
 [ 10  12]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.15284299850463867
difference in average predicted and observed risk = -0.012571001495361334
number samples = 133
accuracy = 0.909774
precision class 0 = 0.915966
precision class 1 = 0.857143
recall class 0 = 0.981982
recall class 1 = 0.545455
false negative rate = 0.454545
false positive rate = 0.018018
positive prediction rate = 0.105263
AUC of ROC = 0.951679
AUC of PRC = 0.818726
min(+P, Se) = 0.73913

-------------------------------

confusion matrix:
[[6904   82]
 [ 735  338]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1081869974732399
difference in average predicted and observed risk = -0.024956002526760113
number samples = 8059
accuracy = 0.898623
precision class 0 = 0.903783
precision class 1 = 0.804762
recall class 0 = 0.988262
recall class 1 = 0.315005
false negative rate = 0.684995
false positive rate = 0.011738
positive prediction rate = 0.052116
AUC of ROC = 0.899673
AUC of PRC = 0.645504
min(+P, Se) = 0.595903

-------------------------------

confusion matrix:
[[5636   72]
 [ 637  277]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11589600145816803
difference in average predicted and observed risk = -0.02212899854183198
number samples = 6622
accuracy = 0.892933
precision class 0 = 0.898454
precision class 1 = 0.793696
recall class 0 = 0.987386
recall class 1 = 0.303063
false negative rate = 0.696937
false positive rate = 0.012614
positive prediction rate = 0.052703
AUC of ROC = 0.888805
AUC of PRC = 0.628484
min(+P, Se) = 0.565646

-------------------------------

confusion matrix:
[[8947   99]
 [ 979  384]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10751800239086151
difference in average predicted and observed risk = -0.023425997609138494
number samples = 10409
accuracy = 0.896436
precision class 0 = 0.90137
precision class 1 = 0.795031
recall class 0 = 0.989056
recall class 1 = 0.281731
false negative rate = 0.718269
false positive rate = 0.010944
positive prediction rate = 0.046402
AUC of ROC = 0.893445
AUC of PRC = 0.623808
min(+P, Se) = 0.568915

-------------------------------

confusion matrix:
[[1618   23]
 [ 259  148]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1368120014667511
difference in average predicted and observed risk = -0.06191799853324889
number samples = 2048
accuracy = 0.862305
precision class 0 = 0.862014
precision class 1 = 0.865497
recall class 0 = 0.985984
recall class 1 = 0.363636
false negative rate = 0.636364
false positive rate = 0.014016
positive prediction rate = 0.083496
AUC of ROC = 0.902906
AUC of PRC = 0.726294
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[1266   16]
 [  77   49]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10374999791383743
difference in average predicted and observed risk = 0.014260997913837434
number samples = 1408
accuracy = 0.933949
precision class 0 = 0.942666
precision class 1 = 0.753846
recall class 0 = 0.98752
recall class 1 = 0.388889
false negative rate = 0.611111
false positive rate = 0.01248
positive prediction rate = 0.046165
AUC of ROC = 0.899902
AUC of PRC = 0.589673
min(+P, Se) = 0.579365

-------------------------------

confusion matrix:
[[288   8]
 [ 32  20]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.13623599708080292
difference in average predicted and observed risk = -0.013189002919197085
number samples = 348
accuracy = 0.885057
precision class 0 = 0.9
precision class 1 = 0.714286
recall class 0 = 0.972973
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.027027
positive prediction rate = 0.08046
AUC of ROC = 0.882666
AUC of PRC = 0.6257
min(+P, Se) = 0.576923

-------------------------------

confusion matrix:
[[421   8]
 [ 25  14]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.099372997879982
difference in average predicted and observed risk = 0.01603999787998199
number samples = 468
accuracy = 0.929487
precision class 0 = 0.943946
precision class 1 = 0.636364
recall class 0 = 0.981352
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.018648
positive prediction rate = 0.047009
AUC of ROC = 0.868089
AUC of PRC = 0.5482
min(+P, Se) = 0.525

-------------------------------

confusion matrix:
[[12540   154]
 [ 1372   615]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11166399717330933
difference in average predicted and observed risk = -0.023681002826690667
number samples = 14681
accuracy = 0.896056
precision class 0 = 0.90138
precision class 1 = 0.79974
recall class 0 = 0.987868
recall class 1 = 0.309512
false negative rate = 0.690488
false positive rate = 0.012132
positive prediction rate = 0.052381
AUC of ROC = 0.894747
AUC of PRC = 0.637461
min(+P, Se) = 0.581782

-------------------------------

==>predicting on validation



confusion matrix:
[[1511   24]
 [ 203   75]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12290699779987335
difference in average predicted and observed risk = -0.03043000220012665
number samples = 1813
accuracy = 0.874793
precision class 0 = 0.881564
precision class 1 = 0.757576
recall class 0 = 0.984365
recall class 1 = 0.269784
false negative rate = 0.730216
false positive rate = 0.015635
positive prediction rate = 0.054606
AUC of ROC = 0.849511
AUC of PRC = 0.582404
min(+P, Se) = 0.525773

-------------------------------

confusion matrix:
[[892  15]
 [ 82  31]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10009799897670746
difference in average predicted and observed risk = -0.010686001023292535
number samples = 1020
accuracy = 0.904902
precision class 0 = 0.915811
precision class 1 = 0.673913
recall class 0 = 0.983462
recall class 1 = 0.274336
false negative rate = 0.725664
false positive rate = 0.016538
positive prediction rate = 0.045098
AUC of ROC = 0.859197
AUC of PRC = 0.503841
min(+P, Se) = 0.477876

-------------------------------

confusion matrix:
[[243   8]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12308599799871445
difference in average predicted and observed risk = 0.0037879979987144458
number samples = 285
accuracy = 0.905263
precision class 0 = 0.927481
precision class 1 = 0.652174
recall class 0 = 0.968127
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.031873
positive prediction rate = 0.080702
AUC of ROC = 0.895946
AUC of PRC = 0.628795
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08673799782991409
difference in average predicted and observed risk = -0.0030060021700859113
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.794769
AUC of PRC = 0.399789
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17131200432777405
difference in average predicted and observed risk = 0.017466004327774037
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1498   31]
 [ 169   75]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1142750009894371
difference in average predicted and observed risk = -0.02334499901056289
number samples = 1773
accuracy = 0.887197
precision class 0 = 0.89862
precision class 1 = 0.707547
recall class 0 = 0.979725
recall class 1 = 0.307377
false negative rate = 0.692623
false positive rate = 0.020275
positive prediction rate = 0.059786
AUC of ROC = 0.85612
AUC of PRC = 0.557232
min(+P, Se) = 0.520325

-------------------------------

confusion matrix:
[[1238   19]
 [ 142   50]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11636900156736374
difference in average predicted and observed risk = -0.016135998432636273
number samples = 1449
accuracy = 0.888889
precision class 0 = 0.897101
precision class 1 = 0.724638
recall class 0 = 0.984885
recall class 1 = 0.260417
false negative rate = 0.739583
false positive rate = 0.015115
positive prediction rate = 0.047619
AUC of ROC = 0.86051
AUC of PRC = 0.570505
min(+P, Se) = 0.510417

-------------------------------

confusion matrix:
[[1944   34]
 [ 224   87]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11266899853944778
difference in average predicted and observed risk = -0.023198001460552203
number samples = 2289
accuracy = 0.887287
precision class 0 = 0.896679
precision class 1 = 0.719008
recall class 0 = 0.982811
recall class 1 = 0.279743
false negative rate = 0.720257
false positive rate = 0.017189
positive prediction rate = 0.052862
AUC of ROC = 0.854923
AUC of PRC = 0.55807
min(+P, Se) = 0.519231

-------------------------------

confusion matrix:
[[362   6]
 [ 55  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13154099881649017
difference in average predicted and observed risk = -0.04886000118350983
number samples = 449
accuracy = 0.864143
precision class 0 = 0.868106
precision class 1 = 0.8125
recall class 0 = 0.983696
recall class 1 = 0.320988
false negative rate = 0.679012
false positive rate = 0.016304
positive prediction rate = 0.071269
AUC of ROC = 0.861145
AUC of PRC = 0.646759
min(+P, Se) = 0.573171

-------------------------------

confusion matrix:
[[271   7]
 [ 22   8]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10990100353956223
difference in average predicted and observed risk = 0.012498003539562222
number samples = 308
accuracy = 0.905844
precision class 0 = 0.924915
precision class 1 = 0.533333
recall class 0 = 0.97482
recall class 1 = 0.266667
false negative rate = 0.733333
false positive rate = 0.02518
positive prediction rate = 0.048701
AUC of ROC = 0.876978
AUC of PRC = 0.498312
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10044299811124802
difference in average predicted and observed risk = 0.02827799811124801
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.880952
AUC of PRC = 0.35981
min(+P, Se) = 0.3

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.13511499762535095
difference in average predicted and observed risk = 0.046506997625350946
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.888889
AUC of PRC = 0.697573
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2736   50]
 [ 311  125]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11521700024604797
difference in average predicted and observed risk = -0.020102999753952022
number samples = 3222
accuracy = 0.887958
precision class 0 = 0.897932
precision class 1 = 0.714286
recall class 0 = 0.982053
recall class 1 = 0.286697
false negative rate = 0.713303
false positive rate = 0.017947
positive prediction rate = 0.054314
AUC of ROC = 0.857668
AUC of PRC = 0.562201
min(+P, Se) = 0.511161

-------------------------------

Epoch 00034: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch34.state
Epoch 35/100
 - 818s - loss: 0.2771 - val_loss: 0.2840

==>predicting on train



confusion matrix:
[[6980   56]
 [ 983  329]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.11727099865674973
difference in average predicted and observed risk = -0.03989200134325027
number samples = 8348
accuracy = 0.875539
precision class 0 = 0.876554
precision class 1 = 0.854545
recall class 0 = 0.992041
recall class 1 = 0.250762
false negative rate = 0.749238
false positive rate = 0.007959
positive prediction rate = 0.046119
AUC of ROC = 0.878967
AUC of PRC = 0.636951
min(+P, Se) = 0.578065

-------------------------------

confusion matrix:
[[3961   41]
 [ 296  175]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.09671399742364883
difference in average predicted and observed risk = -0.008584002576351168
number samples = 4473
accuracy = 0.924659
precision class 0 = 0.930467
precision class 1 = 0.810185
recall class 0 = 0.989755
recall class 1 = 0.37155
false negative rate = 0.62845
false positive rate = 0.010245
positive prediction rate = 0.04829
AUC of ROC = 0.912239
AUC of PRC = 0.654338
min(+P, Se) = 0.591966

-------------------------------

confusion matrix:
[[1179   16]
 [  94   49]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10476899892091751
difference in average predicted and observed risk = -0.002107001079082488
number samples = 1338
accuracy = 0.917788
precision class 0 = 0.926159
precision class 1 = 0.753846
recall class 0 = 0.986611
recall class 1 = 0.342657
false negative rate = 0.657343
false positive rate = 0.013389
positive prediction rate = 0.04858
AUC of ROC = 0.913585
AUC of PRC = 0.649189
min(+P, Se) = 0.594406

-------------------------------

confusion matrix:
[[348   2]
 [ 25  14]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09168600291013718
difference in average predicted and observed risk = -0.008570997089862822
number samples = 389
accuracy = 0.930591
precision class 0 = 0.932976
precision class 1 = 0.875
recall class 0 = 0.994286
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.005714
positive prediction rate = 0.041131
AUC of ROC = 0.901612
AUC of PRC = 0.600798
min(+P, Se) = 0.634146

-------------------------------

confusion matrix:
[[109   2]
 [ 10  12]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.14591200649738312
difference in average predicted and observed risk = -0.019501993502616888
number samples = 133
accuracy = 0.909774
precision class 0 = 0.915966
precision class 1 = 0.857143
recall class 0 = 0.981982
recall class 1 = 0.545455
false negative rate = 0.454545
false positive rate = 0.018018
positive prediction rate = 0.105263
AUC of ROC = 0.931204
AUC of PRC = 0.817905
min(+P, Se) = 0.75

-------------------------------

confusion matrix:
[[6924   62]
 [ 758  315]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.10515599697828293
difference in average predicted and observed risk = -0.027987003021717083
number samples = 8059
accuracy = 0.89825
precision class 0 = 0.901328
precision class 1 = 0.835544
recall class 0 = 0.991125
recall class 1 = 0.293569
false negative rate = 0.706431
false positive rate = 0.008875
positive prediction rate = 0.04678
AUC of ROC = 0.89922
AUC of PRC = 0.65023
min(+P, Se) = 0.596459

-------------------------------

confusion matrix:
[[5653   55]
 [ 650  264]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11467599868774414
difference in average predicted and observed risk = -0.023349001312255868
number samples = 6622
accuracy = 0.893537
precision class 0 = 0.896874
precision class 1 = 0.827586
recall class 0 = 0.990364
recall class 1 = 0.28884
false negative rate = 0.71116
false positive rate = 0.009636
positive prediction rate = 0.048173
AUC of ROC = 0.886738
AUC of PRC = 0.630944
min(+P, Se) = 0.56674

-------------------------------

confusion matrix:
[[8977   69]
 [ 992  371]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10557100176811218
difference in average predicted and observed risk = -0.025372998231887822
number samples = 10409
accuracy = 0.898069
precision class 0 = 0.900492
precision class 1 = 0.843182
recall class 0 = 0.992372
recall class 1 = 0.272194
false negative rate = 0.727806
false positive rate = 0.007628
positive prediction rate = 0.042271
AUC of ROC = 0.891021
AUC of PRC = 0.625865
min(+P, Se) = 0.569343

-------------------------------

confusion matrix:
[[1621   20]
 [ 273  134]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.13375499844551086
difference in average predicted and observed risk = -0.06497500155448913
number samples = 2048
accuracy = 0.856934
precision class 0 = 0.855861
precision class 1 = 0.87013
recall class 0 = 0.987812
recall class 1 = 0.329238
false negative rate = 0.670762
false positive rate = 0.012188
positive prediction rate = 0.075195
AUC of ROC = 0.905701
AUC of PRC = 0.737527
min(+P, Se) = 0.651961

-------------------------------

confusion matrix:
[[1269   13]
 [  83   43]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10146299749612808
difference in average predicted and observed risk = 0.011973997496128083
number samples = 1408
accuracy = 0.931818
precision class 0 = 0.938609
precision class 1 = 0.767857
recall class 0 = 0.98986
recall class 1 = 0.34127
false negative rate = 0.65873
false positive rate = 0.01014
positive prediction rate = 0.039773
AUC of ROC = 0.896677
AUC of PRC = 0.586552
min(+P, Se) = 0.606299

-------------------------------

confusion matrix:
[[289   7]
 [ 34  18]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.13232700526714325
difference in average predicted and observed risk = -0.017097994732856753
number samples = 348
accuracy = 0.882184
precision class 0 = 0.894737
precision class 1 = 0.72
recall class 0 = 0.976351
recall class 1 = 0.346154
false negative rate = 0.653846
false positive rate = 0.023649
positive prediction rate = 0.071839
AUC of ROC = 0.878898
AUC of PRC = 0.629683
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[421   8]
 [ 26  13]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.09638199955224991
difference in average predicted and observed risk = 0.013048999552249904
number samples = 468
accuracy = 0.92735
precision class 0 = 0.941834
precision class 1 = 0.619048
recall class 0 = 0.981352
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.018648
positive prediction rate = 0.044872
AUC of ROC = 0.87036
AUC of PRC = 0.556195
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[12577   117]
 [ 1408   579]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.10944999754428864
difference in average predicted and observed risk = -0.025895002455711358
number samples = 14681
accuracy = 0.896124
precision class 0 = 0.899321
precision class 1 = 0.831897
recall class 0 = 0.990783
recall class 1 = 0.291394
false negative rate = 0.708606
false positive rate = 0.009217
positive prediction rate = 0.047408
AUC of ROC = 0.893552
AUC of PRC = 0.64129
min(+P, Se) = 0.582791

-------------------------------

==>predicting on validation



confusion matrix:
[[1513   22]
 [ 207   71]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12065500020980835
difference in average predicted and observed risk = -0.03268199979019165
number samples = 1813
accuracy = 0.87369
precision class 0 = 0.879651
precision class 1 = 0.763441
recall class 0 = 0.985668
recall class 1 = 0.255396
false negative rate = 0.744604
false positive rate = 0.014332
positive prediction rate = 0.051296
AUC of ROC = 0.851815
AUC of PRC = 0.582399
min(+P, Se) = 0.539568

-------------------------------

confusion matrix:
[[897  10]
 [ 89  24]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.09634000062942505
difference in average predicted and observed risk = -0.014443999370574945
number samples = 1020
accuracy = 0.902941
precision class 0 = 0.909736
precision class 1 = 0.705882
recall class 0 = 0.988975
recall class 1 = 0.212389
false negative rate = 0.787611
false positive rate = 0.011025
positive prediction rate = 0.033333
AUC of ROC = 0.858183
AUC of PRC = 0.498552
min(+P, Se) = 0.471074

-------------------------------

confusion matrix:
[[246   5]
 [ 21  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1188109964132309
difference in average predicted and observed risk = -0.00048700358676910527
number samples = 285
accuracy = 0.908772
precision class 0 = 0.921348
precision class 1 = 0.722222
recall class 0 = 0.98008
recall class 1 = 0.382353
false negative rate = 0.617647
false positive rate = 0.01992
positive prediction rate = 0.063158
AUC of ROC = 0.891844
AUC of PRC = 0.643355
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08712899684906006
difference in average predicted and observed risk = -0.0026150031509399457
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.758551
AUC of PRC = 0.351779
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[21  1]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.15907800197601318
difference in average predicted and observed risk = 0.005232001976013173
number samples = 26
accuracy = 0.884615
precision class 0 = 0.913043
precision class 1 = 0.666667
recall class 0 = 0.954545
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.045455
positive prediction rate = 0.115385
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1502   27]
 [ 180   64]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11099600046873093
difference in average predicted and observed risk = -0.026623999531269066
number samples = 1773
accuracy = 0.883249
precision class 0 = 0.892985
precision class 1 = 0.703297
recall class 0 = 0.982341
recall class 1 = 0.262295
false negative rate = 0.737705
false positive rate = 0.017659
positive prediction rate = 0.051325
AUC of ROC = 0.856783
AUC of PRC = 0.552501
min(+P, Se) = 0.517787

-------------------------------

confusion matrix:
[[1244   13]
 [ 145   47]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.1138790026307106
difference in average predicted and observed risk = -0.01862599736928941
number samples = 1449
accuracy = 0.890959
precision class 0 = 0.895608
precision class 1 = 0.783333
recall class 0 = 0.989658
recall class 1 = 0.244792
false negative rate = 0.755208
false positive rate = 0.010342
positive prediction rate = 0.041408
AUC of ROC = 0.861554
AUC of PRC = 0.574629
min(+P, Se) = 0.53125

-------------------------------

confusion matrix:
[[1952   26]
 [ 234   77]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11019399762153625
difference in average predicted and observed risk = -0.025673002378463733
number samples = 2289
accuracy = 0.886413
precision class 0 = 0.892955
precision class 1 = 0.747573
recall class 0 = 0.986855
recall class 1 = 0.247588
false negative rate = 0.752412
false positive rate = 0.013145
positive prediction rate = 0.044998
AUC of ROC = 0.856256
AUC of PRC = 0.560028
min(+P, Se) = 0.522293

-------------------------------

confusion matrix:
[[362   6]
 [ 60  21]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.12556800246238708
difference in average predicted and observed risk = -0.05483299753761292
number samples = 449
accuracy = 0.853007
precision class 0 = 0.85782
precision class 1 = 0.777778
recall class 0 = 0.983696
recall class 1 = 0.259259
false negative rate = 0.740741
false positive rate = 0.016304
positive prediction rate = 0.060134
AUC of ROC = 0.856851
AUC of PRC = 0.619547
min(+P, Se) = 0.573171

-------------------------------

confusion matrix:
[[273   5]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10755100101232529
difference in average predicted and observed risk = 0.010148001012325283
number samples = 308
accuracy = 0.915584
precision class 0 = 0.928571
precision class 1 = 0.642857
recall class 0 = 0.982014
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.017986
positive prediction rate = 0.045455
AUC of ROC = 0.876379
AUC of PRC = 0.511925
min(+P, Se) = 0.53125

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.09702999889850616
difference in average predicted and observed risk = 0.024864998898506158
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.865079
AUC of PRC = 0.355716
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.13486799597740173
difference in average predicted and observed risk = 0.04625999597740173
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.90873
AUC of PRC = 0.695258
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2746   40]
 [ 325  111]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11229299753904343
difference in average predicted and observed risk = -0.02302700246095657
number samples = 3222
accuracy = 0.886716
precision class 0 = 0.894171
precision class 1 = 0.735099
recall class 0 = 0.985642
recall class 1 = 0.254587
false negative rate = 0.745413
false positive rate = 0.014358
positive prediction rate = 0.046865
AUC of ROC = 0.858404
AUC of PRC = 0.56116
min(+P, Se) = 0.522936

-------------------------------

Epoch 00035: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch35.state
Epoch 36/100
 - 814s - loss: 0.2747 - val_loss: 0.2817

==>predicting on train



confusion matrix:
[[6978   58]
 [ 971  341]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12192399799823761
difference in average predicted and observed risk = -0.03523900200176239
number samples = 8348
accuracy = 0.876737
precision class 0 = 0.877846
precision class 1 = 0.854637
recall class 0 = 0.991757
recall class 1 = 0.259909
false negative rate = 0.740091
false positive rate = 0.008243
positive prediction rate = 0.047796
AUC of ROC = 0.880979
AUC of PRC = 0.64447
min(+P, Se) = 0.589177

-------------------------------

confusion matrix:
[[3962   40]
 [ 294  177]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10462799668312073
difference in average predicted and observed risk = -0.0006700033168792752
number samples = 4473
accuracy = 0.92533
precision class 0 = 0.930921
precision class 1 = 0.815668
recall class 0 = 0.990005
recall class 1 = 0.375796
false negative rate = 0.624204
false positive rate = 0.009995
positive prediction rate = 0.048513
AUC of ROC = 0.909391
AUC of PRC = 0.654415
min(+P, Se) = 0.59322

-------------------------------

confusion matrix:
[[1181   14]
 [  91   52]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11299999803304672
difference in average predicted and observed risk = 0.006123998033046724
number samples = 1338
accuracy = 0.921525
precision class 0 = 0.928459
precision class 1 = 0.787879
recall class 0 = 0.988285
recall class 1 = 0.363636
false negative rate = 0.636364
false positive rate = 0.011715
positive prediction rate = 0.049327
AUC of ROC = 0.915546
AUC of PRC = 0.654502
min(+P, Se) = 0.568493

-------------------------------

confusion matrix:
[[347   3]
 [ 25  14]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10173200070858002
difference in average predicted and observed risk = 0.0014750007085800182
number samples = 389
accuracy = 0.928021
precision class 0 = 0.932796
precision class 1 = 0.823529
recall class 0 = 0.991429
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.008571
positive prediction rate = 0.043702
AUC of ROC = 0.913407
AUC of PRC = 0.618811
min(+P, Se) = 0.636364

-------------------------------

confusion matrix:
[[109   2]
 [ 11  11]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1591459959745407
difference in average predicted and observed risk = -0.006268004025459295
number samples = 133
accuracy = 0.902256
precision class 0 = 0.908333
precision class 1 = 0.846154
recall class 0 = 0.981982
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.018018
positive prediction rate = 0.097744
AUC of ROC = 0.929156
AUC of PRC = 0.815196
min(+P, Se) = 0.75

-------------------------------

confusion matrix:
[[6925   61]
 [ 744  329]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1111529991030693
difference in average predicted and observed risk = -0.021990000896930706
number samples = 8059
accuracy = 0.900112
precision class 0 = 0.902986
precision class 1 = 0.84359
recall class 0 = 0.991268
recall class 1 = 0.306617
false negative rate = 0.693383
false positive rate = 0.008732
positive prediction rate = 0.048393
AUC of ROC = 0.898298
AUC of PRC = 0.651437
min(+P, Se) = 0.598322

-------------------------------

confusion matrix:
[[5652   56]
 [ 648  266]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12110699713230133
difference in average predicted and observed risk = -0.016918002867698678
number samples = 6622
accuracy = 0.893688
precision class 0 = 0.897143
precision class 1 = 0.826087
recall class 0 = 0.990189
recall class 1 = 0.291028
false negative rate = 0.708972
false positive rate = 0.009811
positive prediction rate = 0.048626
AUC of ROC = 0.888117
AUC of PRC = 0.638764
min(+P, Se) = 0.579235

-------------------------------

confusion matrix:
[[8972   74]
 [ 988  375]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11129900068044662
difference in average predicted and observed risk = -0.01964499931955338
number samples = 10409
accuracy = 0.897973
precision class 0 = 0.900803
precision class 1 = 0.835189
recall class 0 = 0.99182
recall class 1 = 0.275128
false negative rate = 0.724872
false positive rate = 0.00818
positive prediction rate = 0.043136
AUC of ROC = 0.892039
AUC of PRC = 0.630447
min(+P, Se) = 0.573206

-------------------------------

confusion matrix:
[[1620   21]
 [ 268  139]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14104300737380981
difference in average predicted and observed risk = -0.057686992626190176
number samples = 2048
accuracy = 0.858887
precision class 0 = 0.858051
precision class 1 = 0.86875
recall class 0 = 0.987203
recall class 1 = 0.341523
false negative rate = 0.658477
false positive rate = 0.012797
positive prediction rate = 0.078125
AUC of ROC = 0.903422
AUC of PRC = 0.733865
min(+P, Se) = 0.659314

-------------------------------

confusion matrix:
[[1271   11]
 [  80   46]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10813000053167343
difference in average predicted and observed risk = 0.018641000531673432
number samples = 1408
accuracy = 0.935369
precision class 0 = 0.940785
precision class 1 = 0.807018
recall class 0 = 0.99142
recall class 1 = 0.365079
false negative rate = 0.634921
false positive rate = 0.00858
positive prediction rate = 0.040483
AUC of ROC = 0.899333
AUC of PRC = 0.60879
min(+P, Se) = 0.598425

-------------------------------

confusion matrix:
[[290   6]
 [ 33  19]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1403149962425232
difference in average predicted and observed risk = -0.009110003757476809
number samples = 348
accuracy = 0.887931
precision class 0 = 0.897833
precision class 1 = 0.76
recall class 0 = 0.97973
recall class 1 = 0.365385
false negative rate = 0.634615
false positive rate = 0.02027
positive prediction rate = 0.071839
AUC of ROC = 0.870907
AUC of PRC = 0.63006
min(+P, Se) = 0.576923

-------------------------------

confusion matrix:
[[424   5]
 [ 23  16]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10535299777984619
difference in average predicted and observed risk = 0.022019997779846187
number samples = 468
accuracy = 0.940171
precision class 0 = 0.948546
precision class 1 = 0.761905
recall class 0 = 0.988345
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.011655
positive prediction rate = 0.044872
AUC of ROC = 0.87036
AUC of PRC = 0.585116
min(+P, Se) = 0.538462

-------------------------------

confusion matrix:
[[12577   117]
 [ 1392   595]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11564300209283829
difference in average predicted and observed risk = -0.019701997907161706
number samples = 14681
accuracy = 0.897214
precision class 0 = 0.900351
precision class 1 = 0.835674
recall class 0 = 0.990783
recall class 1 = 0.299446
false negative rate = 0.700554
false positive rate = 0.009217
positive prediction rate = 0.048498
AUC of ROC = 0.893656
AUC of PRC = 0.645527
min(+P, Se) = 0.589331

-------------------------------

==>predicting on validation



confusion matrix:
[[1514   21]
 [ 208   70]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1255279928445816
difference in average predicted and observed risk = -0.027809007155418397
number samples = 1813
accuracy = 0.87369
precision class 0 = 0.87921
precision class 1 = 0.769231
recall class 0 = 0.986319
recall class 1 = 0.251799
false negative rate = 0.748201
false positive rate = 0.013681
positive prediction rate = 0.050193
AUC of ROC = 0.855222
AUC of PRC = 0.586307
min(+P, Se) = 0.528777

-------------------------------

confusion matrix:
[[896  11]
 [ 86  27]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10500100255012512
difference in average predicted and observed risk = -0.0057829974498748715
number samples = 1020
accuracy = 0.904902
precision class 0 = 0.912424
precision class 1 = 0.710526
recall class 0 = 0.987872
recall class 1 = 0.238938
false negative rate = 0.761062
false positive rate = 0.012128
positive prediction rate = 0.037255
AUC of ROC = 0.853763
AUC of PRC = 0.499081
min(+P, Se) = 0.460177

-------------------------------

confusion matrix:
[[245   6]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12790000438690186
difference in average predicted and observed risk = 0.008602004386901854
number samples = 285
accuracy = 0.908772
precision class 0 = 0.924528
precision class 1 = 0.7
recall class 0 = 0.976096
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.023904
positive prediction rate = 0.070175
AUC of ROC = 0.897
AUC of PRC = 0.650217
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09742999821901321
difference in average predicted and observed risk = 0.00768599821901321
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.760563
AUC of PRC = 0.394688
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18665799498558044
difference in average predicted and observed risk = 0.032811994985580434
number samples = 26
accuracy = 0.884615
precision class 0 = 0.913043
precision class 1 = 0.666667
recall class 0 = 0.954545
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.045455
positive prediction rate = 0.115385
AUC of ROC = 0.954545
AUC of PRC = 0.73125
min(+P, Se) = 0.75

-------------------------------

confusion matrix:
[[1501   28]
 [ 177   67]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11838100105524063
difference in average predicted and observed risk = -0.01923899894475936
number samples = 1773
accuracy = 0.884377
precision class 0 = 0.894517
precision class 1 = 0.705263
recall class 0 = 0.981687
recall class 1 = 0.27459
false negative rate = 0.72541
false positive rate = 0.018313
positive prediction rate = 0.053581
AUC of ROC = 0.859836
AUC of PRC = 0.560403
min(+P, Se) = 0.512295

-------------------------------

confusion matrix:
[[1244   13]
 [ 145   47]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11987599730491638
difference in average predicted and observed risk = -0.01262900269508363
number samples = 1449
accuracy = 0.890959
precision class 0 = 0.895608
precision class 1 = 0.783333
recall class 0 = 0.989658
recall class 1 = 0.244792
false negative rate = 0.755208
false positive rate = 0.010342
positive prediction rate = 0.041408
AUC of ROC = 0.85778
AUC of PRC = 0.567756
min(+P, Se) = 0.520619

-------------------------------

confusion matrix:
[[1950   28]
 [ 231   80]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11672300100326538
difference in average predicted and observed risk = -0.019143998996734607
number samples = 2289
accuracy = 0.88685
precision class 0 = 0.894085
precision class 1 = 0.740741
recall class 0 = 0.985844
recall class 1 = 0.257235
false negative rate = 0.742765
false positive rate = 0.014156
positive prediction rate = 0.047182
AUC of ROC = 0.855036
AUC of PRC = 0.554942
min(+P, Se) = 0.509615

-------------------------------

confusion matrix:
[[362   6]
 [ 61  20]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13375499844551086
difference in average predicted and observed risk = -0.04664600155448914
number samples = 449
accuracy = 0.85078
precision class 0 = 0.855792
precision class 1 = 0.769231
recall class 0 = 0.983696
recall class 1 = 0.246914
false negative rate = 0.753086
false positive rate = 0.016304
positive prediction rate = 0.057906
AUC of ROC = 0.862822
AUC of PRC = 0.641712
min(+P, Se) = 0.574713

-------------------------------

confusion matrix:
[[274   4]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11311399936676025
difference in average predicted and observed risk = 0.01571099936676025
number samples = 308
accuracy = 0.922078
precision class 0 = 0.931973
precision class 1 = 0.714286
recall class 0 = 0.985611
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.014388
positive prediction rate = 0.045455
AUC of ROC = 0.878297
AUC of PRC = 0.545159
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10595200210809708
difference in average predicted and observed risk = 0.03378700210809707
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.869841
AUC of PRC = 0.372419
min(+P, Se) = 0.3

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14225000143051147
difference in average predicted and observed risk = 0.05364200143051147
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.916667
AUC of PRC = 0.738136
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2745   41]
 [ 322  114]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11905299872159958
difference in average predicted and observed risk = -0.016267001278400417
number samples = 3222
accuracy = 0.887337
precision class 0 = 0.895011
precision class 1 = 0.735484
recall class 0 = 0.985284
recall class 1 = 0.261468
false negative rate = 0.738532
false positive rate = 0.014716
positive prediction rate = 0.048107
AUC of ROC = 0.858509
AUC of PRC = 0.563025
min(+P, Se) = 0.518349

-------------------------------

Epoch 00036: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch36.state
Epoch 37/100
 - 816s - loss: 0.2740 - val_loss: 0.2821

==>predicting on train



confusion matrix:
[[6975   61]
 [ 971  341]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.1322229951620102
difference in average predicted and observed risk = -0.024940004837989804
number samples = 8348
accuracy = 0.876378
precision class 0 = 0.8778
precision class 1 = 0.848259
recall class 0 = 0.99133
recall class 1 = 0.259909
false negative rate = 0.740091
false positive rate = 0.00867
positive prediction rate = 0.048155
AUC of ROC = 0.882175
AUC of PRC = 0.643785
min(+P, Se) = 0.583079

-------------------------------

confusion matrix:
[[3950   52]
 [ 281  190]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11162599921226501
difference in average predicted and observed risk = 0.006327999212265012
number samples = 4473
accuracy = 0.925553
precision class 0 = 0.933585
precision class 1 = 0.785124
recall class 0 = 0.987006
recall class 1 = 0.403397
false negative rate = 0.596603
false positive rate = 0.012994
positive prediction rate = 0.054102
AUC of ROC = 0.910244
AUC of PRC = 0.65449
min(+P, Se) = 0.59322

-------------------------------

confusion matrix:
[[1178   17]
 [  87   56]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.12020199745893478
difference in average predicted and observed risk = 0.013325997458934785
number samples = 1338
accuracy = 0.922272
precision class 0 = 0.931225
precision class 1 = 0.767123
recall class 0 = 0.985774
recall class 1 = 0.391608
false negative rate = 0.608392
false positive rate = 0.014226
positive prediction rate = 0.054559
AUC of ROC = 0.913334
AUC of PRC = 0.64567
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[347   3]
 [ 24  15]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10757599771022797
difference in average predicted and observed risk = 0.007318997710227967
number samples = 389
accuracy = 0.930591
precision class 0 = 0.93531
precision class 1 = 0.833333
recall class 0 = 0.991429
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.008571
positive prediction rate = 0.046272
AUC of ROC = 0.911795
AUC of PRC = 0.65673
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[108   3]
 [ 11  11]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1622530072927475
difference in average predicted and observed risk = -0.003160992707252508
number samples = 133
accuracy = 0.894737
precision class 0 = 0.907563
precision class 1 = 0.785714
recall class 0 = 0.972973
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.027027
positive prediction rate = 0.105263
AUC of ROC = 0.927109
AUC of PRC = 0.77983
min(+P, Se) = 0.73913

-------------------------------

confusion matrix:
[[6909   77]
 [ 726  347]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12033600360155106
difference in average predicted and observed risk = -0.012806996398448955
number samples = 8059
accuracy = 0.90036
precision class 0 = 0.904912
precision class 1 = 0.818396
recall class 0 = 0.988978
recall class 1 = 0.323392
false negative rate = 0.676608
false positive rate = 0.011022
positive prediction rate = 0.052612
AUC of ROC = 0.899697
AUC of PRC = 0.651385
min(+P, Se) = 0.601118

-------------------------------

confusion matrix:
[[5649   59]
 [ 648  266]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12950299680233002
difference in average predicted and observed risk = -0.008522003197669992
number samples = 6622
accuracy = 0.893235
precision class 0 = 0.897094
precision class 1 = 0.818462
recall class 0 = 0.989664
recall class 1 = 0.291028
false negative rate = 0.708972
false positive rate = 0.010336
positive prediction rate = 0.049079
AUC of ROC = 0.889239
AUC of PRC = 0.635915
min(+P, Se) = 0.572361

-------------------------------

confusion matrix:
[[8960   86]
 [ 980  383]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.12014699727296829
difference in average predicted and observed risk = -0.010797002727031713
number samples = 10409
accuracy = 0.897589
precision class 0 = 0.901408
precision class 1 = 0.816631
recall class 0 = 0.990493
recall class 1 = 0.280998
false negative rate = 0.719002
false positive rate = 0.009507
positive prediction rate = 0.045057
AUC of ROC = 0.89246
AUC of PRC = 0.627921
min(+P, Se) = 0.57478

-------------------------------

confusion matrix:
[[1617   24]
 [ 257  150]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.15032300353050232
difference in average predicted and observed risk = -0.04840699646949767
number samples = 2048
accuracy = 0.862793
precision class 0 = 0.86286
precision class 1 = 0.862069
recall class 0 = 0.985375
recall class 1 = 0.36855
false negative rate = 0.63145
false positive rate = 0.014625
positive prediction rate = 0.084961
AUC of ROC = 0.906378
AUC of PRC = 0.736486
min(+P, Se) = 0.654501

-------------------------------

confusion matrix:
[[1270   12]
 [  75   51]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11689399927854538
difference in average predicted and observed risk = 0.02740499927854538
number samples = 1408
accuracy = 0.93821
precision class 0 = 0.944238
precision class 1 = 0.809524
recall class 0 = 0.99064
recall class 1 = 0.404762
false negative rate = 0.595238
false positive rate = 0.00936
positive prediction rate = 0.044744
AUC of ROC = 0.903709
AUC of PRC = 0.628907
min(+P, Se) = 0.587302

-------------------------------

confusion matrix:
[[288   8]
 [ 36  16]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14845000207424164
difference in average predicted and observed risk = -0.0009749979257583641
number samples = 348
accuracy = 0.873563
precision class 0 = 0.888889
precision class 1 = 0.666667
recall class 0 = 0.972973
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.027027
positive prediction rate = 0.068966
AUC of ROC = 0.872726
AUC of PRC = 0.62031
min(+P, Se) = 0.596154

-------------------------------

confusion matrix:
[[423   6]
 [ 26  13]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11247699707746506
difference in average predicted and observed risk = 0.029143997077465053
number samples = 468
accuracy = 0.931624
precision class 0 = 0.942094
precision class 1 = 0.684211
recall class 0 = 0.986014
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.013986
positive prediction rate = 0.040598
AUC of ROC = 0.8654
AUC of PRC = 0.528155
min(+P, Se) = 0.487805

-------------------------------

confusion matrix:
[[12558   136]
 [ 1374   613]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12447100132703781
difference in average predicted and observed risk = -0.010873998672962182
number samples = 14681
accuracy = 0.897146
precision class 0 = 0.901378
precision class 1 = 0.818425
recall class 0 = 0.989286
recall class 1 = 0.308505
false negative rate = 0.691495
false positive rate = 0.010714
positive prediction rate = 0.051018
AUC of ROC = 0.894904
AUC of PRC = 0.644045
min(+P, Se) = 0.58688

-------------------------------

==>predicting on validation



confusion matrix:
[[1511   24]
 [ 207   71]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13617800176143646
difference in average predicted and observed risk = -0.01715899823856354
number samples = 1813
accuracy = 0.872587
precision class 0 = 0.879511
precision class 1 = 0.747368
recall class 0 = 0.984365
recall class 1 = 0.255396
false negative rate = 0.744604
false positive rate = 0.015635
positive prediction rate = 0.052399
AUC of ROC = 0.851529
AUC of PRC = 0.575711
min(+P, Se) = 0.512545

-------------------------------

confusion matrix:
[[894  13]
 [ 84  29]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11357899755239487
difference in average predicted and observed risk = 0.0027949975523948734
number samples = 1020
accuracy = 0.904902
precision class 0 = 0.91411
precision class 1 = 0.690476
recall class 0 = 0.985667
recall class 1 = 0.256637
false negative rate = 0.743363
false positive rate = 0.014333
positive prediction rate = 0.041176
AUC of ROC = 0.854065
AUC of PRC = 0.49757
min(+P, Se) = 0.478261

-------------------------------

confusion matrix:
[[242   9]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13569200038909912
difference in average predicted and observed risk = 0.01639400038909912
number samples = 285
accuracy = 0.898246
precision class 0 = 0.923664
precision class 1 = 0.608696
recall class 0 = 0.964143
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.035857
positive prediction rate = 0.080702
AUC of ROC = 0.889149
AUC of PRC = 0.623629
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10061699897050858
difference in average predicted and observed risk = 0.010872998970508571
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.774648
AUC of PRC = 0.415222
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1921290010213852
difference in average predicted and observed risk = 0.03828300102138518
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1498   31]
 [ 175   69]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12836800515651703
difference in average predicted and observed risk = -0.009251994843482964
number samples = 1773
accuracy = 0.883813
precision class 0 = 0.895397
precision class 1 = 0.69
recall class 0 = 0.979725
recall class 1 = 0.282787
false negative rate = 0.717213
false positive rate = 0.020275
positive prediction rate = 0.056402
AUC of ROC = 0.857873
AUC of PRC = 0.553824
min(+P, Se) = 0.514286

-------------------------------

confusion matrix:
[[1239   18]
 [ 143   49]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12882000207901
difference in average predicted and observed risk = -0.003684997920990002
number samples = 1449
accuracy = 0.888889
precision class 0 = 0.896527
precision class 1 = 0.731343
recall class 0 = 0.98568
recall class 1 = 0.255208
false negative rate = 0.744792
false positive rate = 0.01432
positive prediction rate = 0.046239
AUC of ROC = 0.8556
AUC of PRC = 0.561197
min(+P, Se) = 0.505208

-------------------------------

confusion matrix:
[[1946   32]
 [ 228   83]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12650300562381744
difference in average predicted and observed risk = -0.009363994376182544
number samples = 2289
accuracy = 0.886413
precision class 0 = 0.895124
precision class 1 = 0.721739
recall class 0 = 0.983822
recall class 1 = 0.266881
false negative rate = 0.733119
false positive rate = 0.016178
positive prediction rate = 0.05024
AUC of ROC = 0.85188
AUC of PRC = 0.55116
min(+P, Se) = 0.495177

-------------------------------

confusion matrix:
[[361   7]
 [ 59  22]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14393000304698944
difference in average predicted and observed risk = -0.036470996953010565
number samples = 449
accuracy = 0.853007
precision class 0 = 0.859524
precision class 1 = 0.758621
recall class 0 = 0.980978
recall class 1 = 0.271605
false negative rate = 0.728395
false positive rate = 0.019022
positive prediction rate = 0.064588
AUC of ROC = 0.863996
AUC of PRC = 0.636117
min(+P, Se) = 0.567901

-------------------------------

confusion matrix:
[[271   7]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.12154100090265274
difference in average predicted and observed risk = 0.024138000902652737
number samples = 308
accuracy = 0.909091
precision class 0 = 0.928082
precision class 1 = 0.5625
recall class 0 = 0.97482
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.02518
positive prediction rate = 0.051948
AUC of ROC = 0.869544
AUC of PRC = 0.510309
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11296200007200241
difference in average predicted and observed risk = 0.040797000072002404
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.88254
AUC of PRC = 0.26128
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14779700338840485
difference in average predicted and observed risk = 0.05918900338840484
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.90873
AUC of PRC = 0.718368
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2737   49]
 [ 318  118]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12857100367546082
difference in average predicted and observed risk = -0.00674899632453918
number samples = 3222
accuracy = 0.886096
precision class 0 = 0.895908
precision class 1 = 0.706587
recall class 0 = 0.982412
recall class 1 = 0.270642
false negative rate = 0.729358
false positive rate = 0.017588
positive prediction rate = 0.051831
AUC of ROC = 0.856586
AUC of PRC = 0.555671
min(+P, Se) = 0.510251

-------------------------------

Epoch 00037: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch37.state
Epoch 38/100
 - 815s - loss: 0.2747 - val_loss: 0.2779

==>predicting on train



confusion matrix:
[[6966   70]
 [ 934  378]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.14127300679683685
difference in average predicted and observed risk = -0.015889993203163144
number samples = 8348
accuracy = 0.879732
precision class 0 = 0.881772
precision class 1 = 0.84375
recall class 0 = 0.990051
recall class 1 = 0.28811
false negative rate = 0.71189
false positive rate = 0.009949
positive prediction rate = 0.053666
AUC of ROC = 0.885692
AUC of PRC = 0.655409
min(+P, Se) = 0.585366

-------------------------------

confusion matrix:
[[3947   55]
 [ 276  195]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11476600170135498
difference in average predicted and observed risk = 0.009468001701354978
number samples = 4473
accuracy = 0.926
precision class 0 = 0.934644
precision class 1 = 0.78
recall class 0 = 0.986257
recall class 1 = 0.414013
false negative rate = 0.585987
false positive rate = 0.013743
positive prediction rate = 0.055891
AUC of ROC = 0.915421
AUC of PRC = 0.672317
min(+P, Se) = 0.613588

-------------------------------

confusion matrix:
[[1178   17]
 [  85   58]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.1222279965877533
difference in average predicted and observed risk = 0.015351996587753297
number samples = 1338
accuracy = 0.923767
precision class 0 = 0.9327
precision class 1 = 0.773333
recall class 0 = 0.985774
recall class 1 = 0.405594
false negative rate = 0.594406
false positive rate = 0.014226
positive prediction rate = 0.056054
AUC of ROC = 0.915458
AUC of PRC = 0.654461
min(+P, Se) = 0.598639

-------------------------------

confusion matrix:
[[349   1]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.11038900166749954
difference in average predicted and observed risk = 0.010132001667499543
number samples = 389
accuracy = 0.940874
precision class 0 = 0.940701
precision class 1 = 0.944444
recall class 0 = 0.997143
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.002857
positive prediction rate = 0.046272
AUC of ROC = 0.918608
AUC of PRC = 0.695869
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[109   2]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.17212800681591034
difference in average predicted and observed risk = 0.006714006815910334
number samples = 133
accuracy = 0.917293
precision class 0 = 0.923729
precision class 1 = 0.866667
recall class 0 = 0.981982
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.018018
positive prediction rate = 0.112782
AUC of ROC = 0.934889
AUC of PRC = 0.818741
min(+P, Se) = 0.772727

-------------------------------

confusion matrix:
[[6907   79]
 [ 708  365]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12602099776268005
difference in average predicted and observed risk = -0.007122002237319958
number samples = 8059
accuracy = 0.902345
precision class 0 = 0.907026
precision class 1 = 0.822072
recall class 0 = 0.988692
recall class 1 = 0.340168
false negative rate = 0.659832
false positive rate = 0.011308
positive prediction rate = 0.055094
AUC of ROC = 0.904523
AUC of PRC = 0.669287
min(+P, Se) = 0.604846

-------------------------------

confusion matrix:
[[5642   66]
 [ 618  296]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.13688699901103973
difference in average predicted and observed risk = -0.001138000988960275
number samples = 6622
accuracy = 0.896708
precision class 0 = 0.901278
precision class 1 = 0.81768
recall class 0 = 0.988437
recall class 1 = 0.323851
false negative rate = 0.676149
false positive rate = 0.011563
positive prediction rate = 0.054666
AUC of ROC = 0.893216
AUC of PRC = 0.648399
min(+P, Se) = 0.573144

-------------------------------

confusion matrix:
[[8948   98]
 [ 931  432]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.12799400091171265
difference in average predicted and observed risk = -0.0029499990882873584
number samples = 10409
accuracy = 0.901143
precision class 0 = 0.90576
precision class 1 = 0.815094
recall class 0 = 0.989166
recall class 1 = 0.316948
false negative rate = 0.683052
false positive rate = 0.010834
positive prediction rate = 0.050917
AUC of ROC = 0.897798
AUC of PRC = 0.646323
min(+P, Se) = 0.576839

-------------------------------

confusion matrix:
[[1621   20]
 [ 262  145]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.15265299379825592
difference in average predicted and observed risk = -0.04607700620174407
number samples = 2048
accuracy = 0.862305
precision class 0 = 0.86086
precision class 1 = 0.878788
recall class 0 = 0.987812
recall class 1 = 0.356265
false negative rate = 0.643735
false positive rate = 0.012188
positive prediction rate = 0.080566
AUC of ROC = 0.907902
AUC of PRC = 0.741937
min(+P, Se) = 0.65602

-------------------------------

confusion matrix:
[[1267   15]
 [  76   50]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11994300037622452
difference in average predicted and observed risk = 0.03045400037622452
number samples = 1408
accuracy = 0.935369
precision class 0 = 0.94341
precision class 1 = 0.769231
recall class 0 = 0.9883
recall class 1 = 0.396825
false negative rate = 0.603175
false positive rate = 0.0117
positive prediction rate = 0.046165
AUC of ROC = 0.907275
AUC of PRC = 0.628166
min(+P, Se) = 0.603175

-------------------------------

confusion matrix:
[[291   5]
 [ 33  19]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.15309500694274902
difference in average predicted and observed risk = 0.003670006942749021
number samples = 348
accuracy = 0.890805
precision class 0 = 0.898148
precision class 1 = 0.791667
recall class 0 = 0.983108
recall class 1 = 0.365385
false negative rate = 0.634615
false positive rate = 0.016892
positive prediction rate = 0.068966
AUC of ROC = 0.88624
AUC of PRC = 0.659873
min(+P, Se) = 0.603774

-------------------------------

confusion matrix:
[[422   7]
 [ 24  15]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.1174980029463768
difference in average predicted and observed risk = 0.034165002946376796
number samples = 468
accuracy = 0.933761
precision class 0 = 0.946188
precision class 1 = 0.681818
recall class 0 = 0.983683
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.016317
positive prediction rate = 0.047009
AUC of ROC = 0.87311
AUC of PRC = 0.561311
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[12549   145]
 [ 1326   661]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.13092200458049774
difference in average predicted and observed risk = -0.004422995419502251
number samples = 14681
accuracy = 0.899802
precision class 0 = 0.904432
precision class 1 = 0.820099
recall class 0 = 0.988577
recall class 1 = 0.332662
false negative rate = 0.667338
false positive rate = 0.011423
positive prediction rate = 0.054901
AUC of ROC = 0.899421
AUC of PRC = 0.659785
min(+P, Se) = 0.59084

-------------------------------

==>predicting on validation



confusion matrix:
[[1510   25]
 [ 197   81]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.14538300037384033
difference in average predicted and observed risk = -0.007953999626159669
number samples = 1813
accuracy = 0.877551
precision class 0 = 0.884593
precision class 1 = 0.764151
recall class 0 = 0.983713
recall class 1 = 0.291367
false negative rate = 0.708633
false positive rate = 0.016287
positive prediction rate = 0.058467
AUC of ROC = 0.851632
AUC of PRC = 0.592457
min(+P, Se) = 0.532143

-------------------------------

confusion matrix:
[[891  16]
 [ 80  33]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11887700110673904
difference in average predicted and observed risk = 0.00809300110673905
number samples = 1020
accuracy = 0.905882
precision class 0 = 0.917611
precision class 1 = 0.673469
recall class 0 = 0.982359
recall class 1 = 0.292035
false negative rate = 0.707965
false positive rate = 0.017641
positive prediction rate = 0.048039
AUC of ROC = 0.860632
AUC of PRC = 0.528634
min(+P, Se) = 0.491667

-------------------------------

confusion matrix:
[[243   8]
 [ 17  17]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.14065399765968323
difference in average predicted and observed risk = 0.021355997659683226
number samples = 285
accuracy = 0.912281
precision class 0 = 0.934615
precision class 1 = 0.68
recall class 0 = 0.968127
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.031873
positive prediction rate = 0.087719
AUC of ROC = 0.899578
AUC of PRC = 0.647897
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10085000097751617
difference in average predicted and observed risk = 0.01110600097751617
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.814889
AUC of PRC = 0.438187
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1928270012140274
difference in average predicted and observed risk = 0.038981001214027394
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1497   32]
 [ 166   78]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.13403600454330444
difference in average predicted and observed risk = -0.003583995456695549
number samples = 1773
accuracy = 0.888325
precision class 0 = 0.90018
precision class 1 = 0.709091
recall class 0 = 0.979071
recall class 1 = 0.319672
false negative rate = 0.680328
false positive rate = 0.020929
positive prediction rate = 0.062042
AUC of ROC = 0.861227
AUC of PRC = 0.569205
min(+P, Se) = 0.520492

-------------------------------

confusion matrix:
[[1237   20]
 [ 135   57]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.1381320059299469
difference in average predicted and observed risk = 0.005627005929946888
number samples = 1449
accuracy = 0.89303
precision class 0 = 0.901604
precision class 1 = 0.74026
recall class 0 = 0.984089
recall class 1 = 0.296875
false negative rate = 0.703125
false positive rate = 0.015911
positive prediction rate = 0.05314
AUC of ROC = 0.859508
AUC of PRC = 0.582324
min(+P, Se) = 0.526042

-------------------------------

confusion matrix:
[[1945   33]
 [ 218   93]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1342869997024536
difference in average predicted and observed risk = -0.0015800002975463745
number samples = 2289
accuracy = 0.890345
precision class 0 = 0.899214
precision class 1 = 0.738095
recall class 0 = 0.983316
recall class 1 = 0.299035
false negative rate = 0.700965
false positive rate = 0.016684
positive prediction rate = 0.055046
AUC of ROC = 0.854759
AUC of PRC = 0.570664
min(+P, Se) = 0.525641

-------------------------------

confusion matrix:
[[358  10]
 [ 56  25]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1508129984140396
difference in average predicted and observed risk = -0.029588001585960394
number samples = 449
accuracy = 0.853007
precision class 0 = 0.864734
precision class 1 = 0.714286
recall class 0 = 0.972826
recall class 1 = 0.308642
false negative rate = 0.691358
false positive rate = 0.027174
positive prediction rate = 0.077951
AUC of ROC = 0.866915
AUC of PRC = 0.637232
min(+P, Se) = 0.576087

-------------------------------

confusion matrix:
[[272   6]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.12757499516010284
difference in average predicted and observed risk = 0.03017199516010284
number samples = 308
accuracy = 0.918831
precision class 0 = 0.934708
precision class 1 = 0.647059
recall class 0 = 0.978417
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.021583
positive prediction rate = 0.055195
AUC of ROC = 0.889329
AUC of PRC = 0.565312
min(+P, Se) = 0.566667

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.1165900006890297
difference in average predicted and observed risk = 0.04442500068902969
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.879365
AUC of PRC = 0.351235
min(+P, Se) = 0.3

-------------------------------

confusion matrix:
[[71  1]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15315599739551544
difference in average predicted and observed risk = 0.06454799739551544
number samples = 79
accuracy = 0.962025
precision class 0 = 0.972603
precision class 1 = 0.833333
recall class 0 = 0.986111
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.013889
positive prediction rate = 0.075949
AUC of ROC = 0.878968
AUC of PRC = 0.739731
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2734   52]
 [ 301  135]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.13587799668312073
difference in average predicted and observed risk = 0.0005579966831207317
number samples = 3222
accuracy = 0.890441
precision class 0 = 0.900824
precision class 1 = 0.721925
recall class 0 = 0.981335
recall class 1 = 0.309633
false negative rate = 0.690367
false positive rate = 0.018665
positive prediction rate = 0.058038
AUC of ROC = 0.860262
AUC of PRC = 0.575176
min(+P, Se) = 0.522422

-------------------------------

Epoch 00038: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch38.state
Epoch 39/100
 - 816s - loss: 0.2776 - val_loss: 0.2791

==>predicting on train



confusion matrix:
[[6972   64]
 [ 963  349]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12892800569534302
difference in average predicted and observed risk = -0.02823499430465698
number samples = 8348
accuracy = 0.876977
precision class 0 = 0.878639
precision class 1 = 0.845036
recall class 0 = 0.990904
recall class 1 = 0.266006
false negative rate = 0.733994
false positive rate = 0.009096
positive prediction rate = 0.049473
AUC of ROC = 0.884049
AUC of PRC = 0.64452
min(+P, Se) = 0.58689

-------------------------------

confusion matrix:
[[3939   63]
 [ 270  201]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11006300151348114
difference in average predicted and observed risk = 0.004765001513481137
number samples = 4473
accuracy = 0.925553
precision class 0 = 0.935852
precision class 1 = 0.761364
recall class 0 = 0.984258
recall class 1 = 0.426752
false negative rate = 0.573248
false positive rate = 0.015742
positive prediction rate = 0.059021
AUC of ROC = 0.912436
AUC of PRC = 0.659913
min(+P, Se) = 0.590234

-------------------------------

confusion matrix:
[[1177   18]
 [  81   62]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11747799813747406
difference in average predicted and observed risk = 0.010601998137474061
number samples = 1338
accuracy = 0.926009
precision class 0 = 0.935612
precision class 1 = 0.775
recall class 0 = 0.984937
recall class 1 = 0.433566
false negative rate = 0.566434
false positive rate = 0.015063
positive prediction rate = 0.059791
AUC of ROC = 0.918296
AUC of PRC = 0.63998
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[345   5]
 [ 20  19]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10601499676704407
difference in average predicted and observed risk = 0.0057579967670440685
number samples = 389
accuracy = 0.935733
precision class 0 = 0.945205
precision class 1 = 0.791667
recall class 0 = 0.985714
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.014286
positive prediction rate = 0.061697
AUC of ROC = 0.915238
AUC of PRC = 0.670589
min(+P, Se) = 0.65

-------------------------------

confusion matrix:
[[108   3]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.17350399494171143
difference in average predicted and observed risk = 0.00808999494171142
number samples = 133
accuracy = 0.909774
precision class 0 = 0.923077
precision class 1 = 0.8125
recall class 0 = 0.972973
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.027027
positive prediction rate = 0.120301
AUC of ROC = 0.957002
AUC of PRC = 0.845969
min(+P, Se) = 0.772727

-------------------------------

confusion matrix:
[[6898   88]
 [ 714  359]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11865799874067307
difference in average predicted and observed risk = -0.014485001259326946
number samples = 8059
accuracy = 0.900484
precision class 0 = 0.906201
precision class 1 = 0.803132
recall class 0 = 0.987403
recall class 1 = 0.334576
false negative rate = 0.665424
false positive rate = 0.012597
positive prediction rate = 0.055466
AUC of ROC = 0.902773
AUC of PRC = 0.65586
min(+P, Se) = 0.600556

-------------------------------

confusion matrix:
[[5643   65]
 [ 629  285]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12591999769210815
difference in average predicted and observed risk = -0.012105002307891854
number samples = 6622
accuracy = 0.895198
precision class 0 = 0.899713
precision class 1 = 0.814286
recall class 0 = 0.988612
recall class 1 = 0.311816
false negative rate = 0.688184
false positive rate = 0.011388
positive prediction rate = 0.052854
AUC of ROC = 0.890521
AUC of PRC = 0.635801
min(+P, Se) = 0.568306

-------------------------------

confusion matrix:
[[8947   99]
 [ 957  406]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11765100061893463
difference in average predicted and observed risk = -0.013292999381065373
number samples = 10409
accuracy = 0.898549
precision class 0 = 0.903372
precision class 1 = 0.80396
recall class 0 = 0.989056
recall class 1 = 0.297872
false negative rate = 0.702128
false positive rate = 0.010944
positive prediction rate = 0.048516
AUC of ROC = 0.895834
AUC of PRC = 0.631867
min(+P, Se) = 0.575935

-------------------------------

confusion matrix:
[[1614   27]
 [ 249  158]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14837700128555298
difference in average predicted and observed risk = -0.05035299871444701
number samples = 2048
accuracy = 0.865234
precision class 0 = 0.866345
precision class 1 = 0.854054
recall class 0 = 0.983547
recall class 1 = 0.388206
false negative rate = 0.611794
false positive rate = 0.016453
positive prediction rate = 0.090332
AUC of ROC = 0.907104
AUC of PRC = 0.737447
min(+P, Se) = 0.658477

-------------------------------

confusion matrix:
[[1271   11]
 [  74   52]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11370699852705002
difference in average predicted and observed risk = 0.02421799852705002
number samples = 1408
accuracy = 0.939631
precision class 0 = 0.944981
precision class 1 = 0.825397
recall class 0 = 0.99142
recall class 1 = 0.412698
false negative rate = 0.587302
false positive rate = 0.00858
positive prediction rate = 0.044744
AUC of ROC = 0.900763
AUC of PRC = 0.622134
min(+P, Se) = 0.587302

-------------------------------

confusion matrix:
[[288   8]
 [ 35  17]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14477400481700897
difference in average predicted and observed risk = -0.00465099518299103
number samples = 348
accuracy = 0.876437
precision class 0 = 0.891641
precision class 1 = 0.68
recall class 0 = 0.972973
recall class 1 = 0.326923
false negative rate = 0.673077
false positive rate = 0.027027
positive prediction rate = 0.071839
AUC of ROC = 0.880262
AUC of PRC = 0.634193
min(+P, Se) = 0.576923

-------------------------------

confusion matrix:
[[421   8]
 [ 28  11]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.1092350035905838
difference in average predicted and observed risk = 0.025902003590583797
number samples = 468
accuracy = 0.923077
precision class 0 = 0.937639
precision class 1 = 0.578947
recall class 0 = 0.981352
recall class 1 = 0.282051
false negative rate = 0.717949
false positive rate = 0.018648
positive prediction rate = 0.040598
AUC of ROC = 0.868448
AUC of PRC = 0.501924
min(+P, Se) = 0.512195

-------------------------------

confusion matrix:
[[12541   153]
 [ 1343   644]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.1219329982995987
difference in average predicted and observed risk = -0.0134120017004013
number samples = 14681
accuracy = 0.8981
precision class 0 = 0.90327
precision class 1 = 0.80803
recall class 0 = 0.987947
recall class 1 = 0.324107
false negative rate = 0.675893
false positive rate = 0.012053
positive prediction rate = 0.054288
AUC of ROC = 0.897282
AUC of PRC = 0.646627
min(+P, Se) = 0.586016

-------------------------------

==>predicting on validation



confusion matrix:
[[1512   23]
 [ 207   71]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1331149935722351
difference in average predicted and observed risk = -0.020222006427764894
number samples = 1813
accuracy = 0.873138
precision class 0 = 0.879581
precision class 1 = 0.755319
recall class 0 = 0.985016
recall class 1 = 0.255396
false negative rate = 0.744604
false positive rate = 0.014984
positive prediction rate = 0.051848
AUC of ROC = 0.855815
AUC of PRC = 0.587044
min(+P, Se) = 0.52518

-------------------------------

confusion matrix:
[[888  19]
 [ 81  32]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11302699893712997
difference in average predicted and observed risk = 0.0022429989371299808
number samples = 1020
accuracy = 0.901961
precision class 0 = 0.916409
precision class 1 = 0.627451
recall class 0 = 0.979052
recall class 1 = 0.283186
false negative rate = 0.716814
false positive rate = 0.020948
positive prediction rate = 0.05
AUC of ROC = 0.858651
AUC of PRC = 0.504668
min(+P, Se) = 0.460177

-------------------------------

confusion matrix:
[[243   8]
 [ 18  16]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13527999818325043
difference in average predicted and observed risk = 0.015981998183250426
number samples = 285
accuracy = 0.908772
precision class 0 = 0.931035
precision class 1 = 0.666667
recall class 0 = 0.968127
recall class 1 = 0.470588
false negative rate = 0.529412
false positive rate = 0.031873
positive prediction rate = 0.084211
AUC of ROC = 0.893251
AUC of PRC = 0.646697
min(+P, Se) = 0.560976

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09521699696779251
difference in average predicted and observed risk = 0.005472996967792507
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.794769
AUC of PRC = 0.3882
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.20155499875545502
difference in average predicted and observed risk = 0.04770899875545501
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1492   37]
 [ 169   75]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12685999274253845
difference in average predicted and observed risk = -0.01076000725746154
number samples = 1773
accuracy = 0.883813
precision class 0 = 0.898254
precision class 1 = 0.669643
recall class 0 = 0.975801
recall class 1 = 0.307377
false negative rate = 0.692623
false positive rate = 0.024199
positive prediction rate = 0.06317
AUC of ROC = 0.862159
AUC of PRC = 0.561174
min(+P, Se) = 0.518367

-------------------------------

confusion matrix:
[[1241   16]
 [ 143   49]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.126241996884346
difference in average predicted and observed risk = -0.006263003115654003
number samples = 1449
accuracy = 0.890269
precision class 0 = 0.896676
precision class 1 = 0.753846
recall class 0 = 0.987271
recall class 1 = 0.255208
false negative rate = 0.744792
false positive rate = 0.012729
positive prediction rate = 0.044859
AUC of ROC = 0.860398
AUC of PRC = 0.572754
min(+P, Se) = 0.515306

-------------------------------

confusion matrix:
[[1943   35]
 [ 227   84]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1240290030837059
difference in average predicted and observed risk = -0.011837996916294086
number samples = 2289
accuracy = 0.88554
precision class 0 = 0.895392
precision class 1 = 0.705882
recall class 0 = 0.982305
recall class 1 = 0.270096
false negative rate = 0.729904
false positive rate = 0.017695
positive prediction rate = 0.051988
AUC of ROC = 0.858113
AUC of PRC = 0.560304
min(+P, Se) = 0.504823

-------------------------------

confusion matrix:
[[359   9]
 [ 55  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14657999575138092
difference in average predicted and observed risk = -0.033821004248619085
number samples = 449
accuracy = 0.857461
precision class 0 = 0.86715
precision class 1 = 0.742857
recall class 0 = 0.975543
recall class 1 = 0.320988
false negative rate = 0.679012
false positive rate = 0.024457
positive prediction rate = 0.077951
AUC of ROC = 0.864399
AUC of PRC = 0.643288
min(+P, Se) = 0.580247

-------------------------------

confusion matrix:
[[273   5]
 [ 22   8]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11605600267648697
difference in average predicted and observed risk = 0.018653002676486966
number samples = 308
accuracy = 0.912338
precision class 0 = 0.925424
precision class 1 = 0.615385
recall class 0 = 0.982014
recall class 1 = 0.266667
false negative rate = 0.733333
false positive rate = 0.017986
positive prediction rate = 0.042208
AUC of ROC = 0.876619
AUC of PRC = 0.518894
min(+P, Se) = 0.516129

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.1132349967956543
difference in average predicted and observed risk = 0.04106999679565429
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.877778
AUC of PRC = 0.265363
min(+P, Se) = 0.3

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14432300627231598
difference in average predicted and observed risk = 0.05571500627231597
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.888889
AUC of PRC = 0.747348
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2733   53]
 [ 312  124]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12658199667930603
difference in average predicted and observed risk = -0.008738003320693966
number samples = 3222
accuracy = 0.886716
precision class 0 = 0.897537
precision class 1 = 0.700565
recall class 0 = 0.980976
recall class 1 = 0.284404
false negative rate = 0.715596
false positive rate = 0.019024
positive prediction rate = 0.054935
AUC of ROC = 0.861085
AUC of PRC = 0.565141
min(+P, Se) = 0.517007

-------------------------------

Epoch 00039: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch39.state
Epoch 40/100
 - 817s - loss: 0.2747 - val_loss: 0.2820

==>predicting on train



confusion matrix:
[[6999   37]
 [1035  277]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.11257699877023697
difference in average predicted and observed risk = -0.04458600122976303
number samples = 8348
accuracy = 0.871586
precision class 0 = 0.871172
precision class 1 = 0.882166
recall class 0 = 0.994741
recall class 1 = 0.211128
false negative rate = 0.788872
false positive rate = 0.005259
positive prediction rate = 0.037614
AUC of ROC = 0.88499
AUC of PRC = 0.648097
min(+P, Se) = 0.585366

-------------------------------

confusion matrix:
[[3976   26]
 [ 308  163]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.09650500118732452
difference in average predicted and observed risk = -0.008792998812675479
number samples = 4473
accuracy = 0.92533
precision class 0 = 0.928105
precision class 1 = 0.862434
recall class 0 = 0.993503
recall class 1 = 0.346072
false negative rate = 0.653928
false positive rate = 0.006497
positive prediction rate = 0.042254
AUC of ROC = 0.907146
AUC of PRC = 0.660004
min(+P, Se) = 0.592357

-------------------------------

confusion matrix:
[[1186    9]
 [  89   54]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10347700119018555
difference in average predicted and observed risk = -0.003398998809814452
number samples = 1338
accuracy = 0.926756
precision class 0 = 0.930196
precision class 1 = 0.857143
recall class 0 = 0.992469
recall class 1 = 0.377622
false negative rate = 0.622378
false positive rate = 0.007531
positive prediction rate = 0.047085
AUC of ROC = 0.914568
AUC of PRC = 0.64669
min(+P, Se) = 0.569444

-------------------------------

confusion matrix:
[[349   1]
 [ 25  14]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.0947749987244606
difference in average predicted and observed risk = -0.005482001275539397
number samples = 389
accuracy = 0.933162
precision class 0 = 0.933155
precision class 1 = 0.933333
recall class 0 = 0.997143
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.002857
positive prediction rate = 0.03856
AUC of ROC = 0.910989
AUC of PRC = 0.667397
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[109   2]
 [ 10  12]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.15401999652385712
difference in average predicted and observed risk = -0.011394003476142889
number samples = 133
accuracy = 0.909774
precision class 0 = 0.915966
precision class 1 = 0.857143
recall class 0 = 0.981982
recall class 1 = 0.545455
false negative rate = 0.454545
false positive rate = 0.018018
positive prediction rate = 0.105263
AUC of ROC = 0.941851
AUC of PRC = 0.82767
min(+P, Se) = 0.730769

-------------------------------

confusion matrix:
[[6946   40]
 [ 786  287]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1034810021519661
difference in average predicted and observed risk = -0.029661997848033916
number samples = 8059
accuracy = 0.897506
precision class 0 = 0.898345
precision class 1 = 0.877676
recall class 0 = 0.994274
recall class 1 = 0.267474
false negative rate = 0.732526
false positive rate = 0.005726
positive prediction rate = 0.040576
AUC of ROC = 0.900788
AUC of PRC = 0.656206
min(+P, Se) = 0.594041

-------------------------------

confusion matrix:
[[5673   35]
 [ 681  233]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11073900014162064
difference in average predicted and observed risk = -0.027285999858379373
number samples = 6622
accuracy = 0.891876
precision class 0 = 0.892823
precision class 1 = 0.869403
recall class 0 = 0.993868
recall class 1 = 0.254923
false negative rate = 0.745077
false positive rate = 0.006132
positive prediction rate = 0.040471
AUC of ROC = 0.889495
AUC of PRC = 0.640757
min(+P, Se) = 0.573304

-------------------------------

confusion matrix:
[[8999   47]
 [1035  328]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10251399874687195
difference in average predicted and observed risk = -0.028430001253128057
number samples = 10409
accuracy = 0.896051
precision class 0 = 0.896851
precision class 1 = 0.874667
recall class 0 = 0.994804
recall class 1 = 0.240646
false negative rate = 0.759354
false positive rate = 0.005196
positive prediction rate = 0.036027
AUC of ROC = 0.893297
AUC of PRC = 0.634763
min(+P, Se) = 0.574047

-------------------------------

confusion matrix:
[[1627   14]
 [ 283  124]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.13149599730968475
difference in average predicted and observed risk = -0.06723400269031524
number samples = 2048
accuracy = 0.85498
precision class 0 = 0.851832
precision class 1 = 0.898551
recall class 0 = 0.991469
recall class 1 = 0.304668
false negative rate = 0.695332
false positive rate = 0.008531
positive prediction rate = 0.067383
AUC of ROC = 0.905548
AUC of PRC = 0.734533
min(+P, Se) = 0.653563

-------------------------------

confusion matrix:
[[1275    7]
 [  86   40]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.09922400116920471
difference in average predicted and observed risk = 0.009735001169204713
number samples = 1408
accuracy = 0.933949
precision class 0 = 0.936811
precision class 1 = 0.851064
recall class 0 = 0.99454
recall class 1 = 0.31746
false negative rate = 0.68254
false positive rate = 0.00546
positive prediction rate = 0.033381
AUC of ROC = 0.90392
AUC of PRC = 0.613838
min(+P, Se) = 0.582677

-------------------------------

confusion matrix:
[[292   4]
 [ 35  17]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1313299983739853
difference in average predicted and observed risk = -0.018095001626014712
number samples = 348
accuracy = 0.887931
precision class 0 = 0.892966
precision class 1 = 0.809524
recall class 0 = 0.986486
recall class 1 = 0.326923
false negative rate = 0.673077
false positive rate = 0.013514
positive prediction rate = 0.060345
AUC of ROC = 0.880198
AUC of PRC = 0.657337
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[426   3]
 [ 28  11]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.09719900041818619
difference in average predicted and observed risk = 0.013866000418186183
number samples = 468
accuracy = 0.933761
precision class 0 = 0.938326
precision class 1 = 0.785714
recall class 0 = 0.993007
recall class 1 = 0.282051
false negative rate = 0.717949
false positive rate = 0.006993
positive prediction rate = 0.029915
AUC of ROC = 0.874664
AUC of PRC = 0.552774
min(+P, Se) = 0.525

-------------------------------

confusion matrix:
[[12619    75]
 [ 1467   520]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.10675500333309174
difference in average predicted and observed risk = -0.028589996666908257
number samples = 14681
accuracy = 0.894966
precision class 0 = 0.895854
precision class 1 = 0.87395
recall class 0 = 0.994092
recall class 1 = 0.261701
false negative rate = 0.738299
false positive rate = 0.005908
positive prediction rate = 0.040529
AUC of ROC = 0.895624
AUC of PRC = 0.648912
min(+P, Se) = 0.584298

-------------------------------

==>predicting on validation



confusion matrix:
[[1522   13]
 [ 213   65]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.11584799736738205
difference in average predicted and observed risk = -0.03748900263261795
number samples = 1813
accuracy = 0.875345
precision class 0 = 0.877233
precision class 1 = 0.833333
recall class 0 = 0.991531
recall class 1 = 0.233813
false negative rate = 0.766187
false positive rate = 0.008469
positive prediction rate = 0.043023
AUC of ROC = 0.856881
AUC of PRC = 0.593882
min(+P, Se) = 0.535971

-------------------------------

confusion matrix:
[[897  10]
 [ 88  25]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.09804300218820572
difference in average predicted and observed risk = -0.012740997811794275
number samples = 1020
accuracy = 0.903922
precision class 0 = 0.91066
precision class 1 = 0.714286
recall class 0 = 0.988975
recall class 1 = 0.221239
false negative rate = 0.778761
false positive rate = 0.011025
positive prediction rate = 0.034314
AUC of ROC = 0.858134
AUC of PRC = 0.506244
min(+P, Se) = 0.469027

-------------------------------

confusion matrix:
[[246   5]
 [ 21  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1174440011382103
difference in average predicted and observed risk = -0.0018539988617897046
number samples = 285
accuracy = 0.908772
precision class 0 = 0.921348
precision class 1 = 0.722222
recall class 0 = 0.98008
recall class 1 = 0.382353
false negative rate = 0.617647
false positive rate = 0.01992
positive prediction rate = 0.063158
AUC of ROC = 0.898055
AUC of PRC = 0.650203
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.0863799974322319
difference in average predicted and observed risk = -0.0033640025677681012
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.764588
AUC of PRC = 0.401517
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[21  1]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1806969940662384
difference in average predicted and observed risk = 0.026850994066238393
number samples = 26
accuracy = 0.884615
precision class 0 = 0.913043
precision class 1 = 0.666667
recall class 0 = 0.954545
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.045455
positive prediction rate = 0.115385
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1508   21]
 [ 183   61]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.10897699743509293
difference in average predicted and observed risk = -0.028643002564907066
number samples = 1773
accuracy = 0.884941
precision class 0 = 0.89178
precision class 1 = 0.743902
recall class 0 = 0.986266
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.013734
positive prediction rate = 0.046249
AUC of ROC = 0.863433
AUC of PRC = 0.568812
min(+P, Se) = 0.516393

-------------------------------

confusion matrix:
[[1247   10]
 [ 147   45]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11161299794912338
difference in average predicted and observed risk = -0.02089200205087663
number samples = 1449
accuracy = 0.891649
precision class 0 = 0.894548
precision class 1 = 0.818182
recall class 0 = 0.992045
recall class 1 = 0.234375
false negative rate = 0.765625
false positive rate = 0.007955
positive prediction rate = 0.037957
AUC of ROC = 0.858907
AUC of PRC = 0.573917
min(+P, Se) = 0.526042

-------------------------------

confusion matrix:
[[1959   19]
 [ 236   75]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.10787999629974365
difference in average predicted and observed risk = -0.027987003700256335
number samples = 2289
accuracy = 0.888598
precision class 0 = 0.892483
precision class 1 = 0.797872
recall class 0 = 0.990394
recall class 1 = 0.241158
false negative rate = 0.758842
false positive rate = 0.009606
positive prediction rate = 0.041066
AUC of ROC = 0.858079
AUC of PRC = 0.565353
min(+P, Se) = 0.508039

-------------------------------

confusion matrix:
[[363   5]
 [ 60  21]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.12654100358486176
difference in average predicted and observed risk = -0.05385999641513825
number samples = 449
accuracy = 0.855234
precision class 0 = 0.858156
precision class 1 = 0.807692
recall class 0 = 0.986413
recall class 1 = 0.259259
false negative rate = 0.740741
false positive rate = 0.013587
positive prediction rate = 0.057906
AUC of ROC = 0.864634
AUC of PRC = 0.64417
min(+P, Se) = 0.576471

-------------------------------

confusion matrix:
[[274   4]
 [ 24   6]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10051900148391724
difference in average predicted and observed risk = 0.003116001483917233
number samples = 308
accuracy = 0.909091
precision class 0 = 0.919463
precision class 1 = 0.6
recall class 0 = 0.985611
recall class 1 = 0.2
false negative rate = 0.8
false positive rate = 0.014388
positive prediction rate = 0.032468
AUC of ROC = 0.879376
AUC of PRC = 0.532822
min(+P, Se) = 0.487805

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.09969799965620041
difference in average predicted and observed risk = 0.027532999656200402
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.880952
AUC of PRC = 0.371869
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1336590051651001
difference in average predicted and observed risk = 0.04505100516510009
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.880952
AUC of PRC = 0.722246
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2755   31]
 [ 330  106]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11016199737787247
difference in average predicted and observed risk = -0.02515800262212753
number samples = 3222
accuracy = 0.887958
precision class 0 = 0.893031
precision class 1 = 0.773723
recall class 0 = 0.988873
recall class 1 = 0.243119
false negative rate = 0.756881
false positive rate = 0.011127
positive prediction rate = 0.04252
AUC of ROC = 0.861108
AUC of PRC = 0.570123
min(+P, Se) = 0.520642

-------------------------------

Epoch 00040: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch40.state
Epoch 41/100
 - 822s - loss: 0.2721 - val_loss: 0.2815

==>predicting on train



confusion matrix:
[[6970   66]
 [ 953  359]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12278600037097931
difference in average predicted and observed risk = -0.03437699962902069
number samples = 8348
accuracy = 0.877935
precision class 0 = 0.879717
precision class 1 = 0.844706
recall class 0 = 0.99062
recall class 1 = 0.273628
false negative rate = 0.726372
false positive rate = 0.00938
positive prediction rate = 0.05091
AUC of ROC = 0.88689
AUC of PRC = 0.656762
min(+P, Se) = 0.592988

-------------------------------

confusion matrix:
[[3942   60]
 [ 277  194]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10434500128030777
difference in average predicted and observed risk = -0.0009529987196922329
number samples = 4473
accuracy = 0.924659
precision class 0 = 0.934345
precision class 1 = 0.76378
recall class 0 = 0.985008
recall class 1 = 0.41189
false negative rate = 0.58811
false positive rate = 0.014993
positive prediction rate = 0.056785
AUC of ROC = 0.910659
AUC of PRC = 0.658958
min(+P, Se) = 0.581741

-------------------------------

confusion matrix:
[[1179   16]
 [  82   61]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11135900020599365
difference in average predicted and observed risk = 0.0044830002059936536
number samples = 1338
accuracy = 0.926756
precision class 0 = 0.934972
precision class 1 = 0.792208
recall class 0 = 0.986611
recall class 1 = 0.426573
false negative rate = 0.573427
false positive rate = 0.013389
positive prediction rate = 0.057549
AUC of ROC = 0.915528
AUC of PRC = 0.642212
min(+P, Se) = 0.587413

-------------------------------

confusion matrix:
[[347   3]
 [ 23  16]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10140100121498108
difference in average predicted and observed risk = 0.0011440012149810802
number samples = 389
accuracy = 0.933162
precision class 0 = 0.937838
precision class 1 = 0.842105
recall class 0 = 0.991429
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.008571
positive prediction rate = 0.048843
AUC of ROC = 0.914652
AUC of PRC = 0.6683
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[108   3]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1640399992465973
difference in average predicted and observed risk = -0.0013740007534027154
number samples = 133
accuracy = 0.917293
precision class 0 = 0.931035
precision class 1 = 0.823529
recall class 0 = 0.972973
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.027027
positive prediction rate = 0.12782
AUC of ROC = 0.945127
AUC of PRC = 0.84326
min(+P, Se) = 0.791667

-------------------------------

confusion matrix:
[[6900   86]
 [ 717  356]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11159399896860123
difference in average predicted and observed risk = -0.021549001031398785
number samples = 8059
accuracy = 0.90036
precision class 0 = 0.905868
precision class 1 = 0.80543
recall class 0 = 0.98769
recall class 1 = 0.33178
false negative rate = 0.66822
false positive rate = 0.01231
positive prediction rate = 0.054846
AUC of ROC = 0.904101
AUC of PRC = 0.663991
min(+P, Se) = 0.612813

-------------------------------

confusion matrix:
[[5646   62]
 [ 626  288]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12121400237083435
difference in average predicted and observed risk = -0.016810997629165658
number samples = 6622
accuracy = 0.896104
precision class 0 = 0.900191
precision class 1 = 0.822857
recall class 0 = 0.989138
recall class 1 = 0.315098
false negative rate = 0.684902
false positive rate = 0.010862
positive prediction rate = 0.052854
AUC of ROC = 0.890595
AUC of PRC = 0.643581
min(+P, Se) = 0.575

-------------------------------

confusion matrix:
[[8950   96]
 [ 960  403]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11133600026369095
difference in average predicted and observed risk = -0.019607999736309056
number samples = 10409
accuracy = 0.898549
precision class 0 = 0.903128
precision class 1 = 0.807615
recall class 0 = 0.989388
recall class 1 = 0.295671
false negative rate = 0.704329
false positive rate = 0.010612
positive prediction rate = 0.047939
AUC of ROC = 0.896306
AUC of PRC = 0.639561
min(+P, Se) = 0.585044

-------------------------------

confusion matrix:
[[1619   22]
 [ 251  156]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14204999804496765
difference in average predicted and observed risk = -0.05668000195503234
number samples = 2048
accuracy = 0.866699
precision class 0 = 0.865775
precision class 1 = 0.876405
recall class 0 = 0.986594
recall class 1 = 0.383292
false negative rate = 0.616708
false positive rate = 0.013406
positive prediction rate = 0.086914
AUC of ROC = 0.908425
AUC of PRC = 0.743415
min(+P, Se) = 0.659367

-------------------------------

confusion matrix:
[[1267   15]
 [  78   48]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10808199644088745
difference in average predicted and observed risk = 0.018592996440887452
number samples = 1408
accuracy = 0.933949
precision class 0 = 0.942007
precision class 1 = 0.761905
recall class 0 = 0.9883
recall class 1 = 0.380952
false negative rate = 0.619048
false positive rate = 0.0117
positive prediction rate = 0.044744
AUC of ROC = 0.904892
AUC of PRC = 0.621041
min(+P, Se) = 0.579365

-------------------------------

confusion matrix:
[[290   6]
 [ 31  21]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14378899335861206
difference in average predicted and observed risk = -0.005636006641387942
number samples = 348
accuracy = 0.893678
precision class 0 = 0.903427
precision class 1 = 0.777778
recall class 0 = 0.97973
recall class 1 = 0.403846
false negative rate = 0.596154
false positive rate = 0.02027
positive prediction rate = 0.077586
AUC of ROC = 0.878183
AUC of PRC = 0.662932
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[420   9]
 [ 23  16]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10680200159549713
difference in average predicted and observed risk = 0.023469001595497127
number samples = 468
accuracy = 0.931624
precision class 0 = 0.948081
precision class 1 = 0.64
recall class 0 = 0.979021
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.020979
positive prediction rate = 0.053419
AUC of ROC = 0.877353
AUC of PRC = 0.555369
min(+P, Se) = 0.525

-------------------------------

confusion matrix:
[[12546   148]
 [ 1343   644]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11593300104141235
difference in average predicted and observed risk = -0.01941199895858764
number samples = 14681
accuracy = 0.89844
precision class 0 = 0.903305
precision class 1 = 0.813131
recall class 0 = 0.988341
recall class 1 = 0.324107
false negative rate = 0.675893
false positive rate = 0.011659
positive prediction rate = 0.053947
AUC of ROC = 0.898032
AUC of PRC = 0.654527
min(+P, Se) = 0.594

-------------------------------

==>predicting on validation



confusion matrix:
[[1512   23]
 [ 200   78]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12634800374507904
difference in average predicted and observed risk = -0.02698899625492096
number samples = 1813
accuracy = 0.876999
precision class 0 = 0.883178
precision class 1 = 0.772277
recall class 0 = 0.985016
recall class 1 = 0.280576
false negative rate = 0.719424
false positive rate = 0.014984
positive prediction rate = 0.055709
AUC of ROC = 0.854444
AUC of PRC = 0.587391
min(+P, Se) = 0.539286

-------------------------------

confusion matrix:
[[891  16]
 [ 81  32]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10371000319719315
difference in average predicted and observed risk = -0.007073996802806848
number samples = 1020
accuracy = 0.904902
precision class 0 = 0.916667
precision class 1 = 0.666667
recall class 0 = 0.982359
recall class 1 = 0.283186
false negative rate = 0.716814
false positive rate = 0.017641
positive prediction rate = 0.047059
AUC of ROC = 0.858329
AUC of PRC = 0.504195
min(+P, Se) = 0.469027

-------------------------------

confusion matrix:
[[242   9]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12739400565624237
difference in average predicted and observed risk = 0.00809600565624237
number samples = 285
accuracy = 0.901754
precision class 0 = 0.927203
precision class 1 = 0.625
recall class 0 = 0.964143
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.035857
positive prediction rate = 0.084211
AUC of ROC = 0.887509
AUC of PRC = 0.625698
min(+P, Se) = 0.547619

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09502899646759033
difference in average predicted and observed risk = 0.005284996467590328
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.77666
AUC of PRC = 0.392982
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1921280026435852
difference in average predicted and observed risk = 0.038282002643585195
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1494   35]
 [ 170   74]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.117808997631073
difference in average predicted and observed risk = -0.019811002368926994
number samples = 1773
accuracy = 0.884377
precision class 0 = 0.897837
precision class 1 = 0.678899
recall class 0 = 0.977109
recall class 1 = 0.303279
false negative rate = 0.696721
false positive rate = 0.022891
positive prediction rate = 0.061478
AUC of ROC = 0.862537
AUC of PRC = 0.564913
min(+P, Se) = 0.530612

-------------------------------

confusion matrix:
[[1241   16]
 [ 136   56]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12056200206279755
difference in average predicted and observed risk = -0.011942997937202465
number samples = 1449
accuracy = 0.8951
precision class 0 = 0.901235
precision class 1 = 0.777778
recall class 0 = 0.987271
recall class 1 = 0.291667
false negative rate = 0.708333
false positive rate = 0.012729
positive prediction rate = 0.049689
AUC of ROC = 0.856789
AUC of PRC = 0.565025
min(+P, Se) = 0.510309

-------------------------------

confusion matrix:
[[1944   34]
 [ 221   90]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11656399816274643
difference in average predicted and observed risk = -0.01930300183725356
number samples = 2289
accuracy = 0.888598
precision class 0 = 0.897922
precision class 1 = 0.725806
recall class 0 = 0.982811
recall class 1 = 0.289389
false negative rate = 0.710611
false positive rate = 0.017189
positive prediction rate = 0.054172
AUC of ROC = 0.853974
AUC of PRC = 0.558384
min(+P, Se) = 0.517685

-------------------------------

confusion matrix:
[[361   7]
 [ 55  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13492099940776825
difference in average predicted and observed risk = -0.045480000592231756
number samples = 449
accuracy = 0.861915
precision class 0 = 0.867788
precision class 1 = 0.787879
recall class 0 = 0.980978
recall class 1 = 0.320988
false negative rate = 0.679012
false positive rate = 0.019022
positive prediction rate = 0.073497
AUC of ROC = 0.873121
AUC of PRC = 0.656109
min(+P, Se) = 0.574468

-------------------------------

confusion matrix:
[[271   7]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11021900177001953
difference in average predicted and observed risk = 0.012816001770019528
number samples = 308
accuracy = 0.909091
precision class 0 = 0.928082
precision class 1 = 0.5625
recall class 0 = 0.97482
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.02518
positive prediction rate = 0.051948
AUC of ROC = 0.879976
AUC of PRC = 0.527066
min(+P, Se) = 0.516129

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10831400007009506
difference in average predicted and observed risk = 0.036149000070095055
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.890476
AUC of PRC = 0.365421
min(+P, Se) = 0.315789

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14835500717163086
difference in average predicted and observed risk = 0.05974700717163085
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.878968
AUC of PRC = 0.734545
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2735   51]
 [ 306  130]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11904700100421906
difference in average predicted and observed risk = -0.01627299899578094
number samples = 3222
accuracy = 0.889199
precision class 0 = 0.899375
precision class 1 = 0.718232
recall class 0 = 0.981694
recall class 1 = 0.298165
false negative rate = 0.701835
false positive rate = 0.018306
positive prediction rate = 0.056176
AUC of ROC = 0.859482
AUC of PRC = 0.564379
min(+P, Se) = 0.519451

-------------------------------

Epoch 00041: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch41.state
Epoch 42/100
 - 818s - loss: 0.2766 - val_loss: 0.2799

==>predicting on train



confusion matrix:
[[6975   61]
 [ 957  355]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13182500004768372
difference in average predicted and observed risk = -0.02533799995231628
number samples = 8348
accuracy = 0.878055
precision class 0 = 0.879349
precision class 1 = 0.853365
recall class 0 = 0.99133
recall class 1 = 0.270579
false negative rate = 0.729421
false positive rate = 0.00867
positive prediction rate = 0.049832
AUC of ROC = 0.887186
AUC of PRC = 0.657266
min(+P, Se) = 0.592988

-------------------------------

confusion matrix:
[[3949   53]
 [ 276  195]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10914500057697296
difference in average predicted and observed risk = 0.0038470005769729587
number samples = 4473
accuracy = 0.926448
precision class 0 = 0.934675
precision class 1 = 0.78629
recall class 0 = 0.986757
recall class 1 = 0.414013
false negative rate = 0.585987
false positive rate = 0.013243
positive prediction rate = 0.055444
AUC of ROC = 0.915059
AUC of PRC = 0.669097
min(+P, Se) = 0.590234

-------------------------------

confusion matrix:
[[1178   17]
 [  84   59]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11651399731636047
difference in average predicted and observed risk = 0.009637997316360475
number samples = 1338
accuracy = 0.924514
precision class 0 = 0.933439
precision class 1 = 0.776316
recall class 0 = 0.985774
recall class 1 = 0.412587
false negative rate = 0.587413
false positive rate = 0.014226
positive prediction rate = 0.056801
AUC of ROC = 0.916909
AUC of PRC = 0.638961
min(+P, Se) = 0.590278

-------------------------------

confusion matrix:
[[348   2]
 [ 24  15]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10538700222969055
difference in average predicted and observed risk = 0.005130002229690553
number samples = 389
accuracy = 0.933162
precision class 0 = 0.935484
precision class 1 = 0.882353
recall class 0 = 0.994286
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.005714
positive prediction rate = 0.043702
AUC of ROC = 0.928498
AUC of PRC = 0.686127
min(+P, Se) = 0.717949

-------------------------------

confusion matrix:
[[108   3]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16581200063228607
difference in average predicted and observed risk = 0.0003980006322860663
number samples = 133
accuracy = 0.909774
precision class 0 = 0.923077
precision class 1 = 0.8125
recall class 0 = 0.972973
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.027027
positive prediction rate = 0.120301
AUC of ROC = 0.951679
AUC of PRC = 0.849371
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6908   78]
 [ 711  362]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11856299638748169
difference in average predicted and observed risk = -0.014580003612518322
number samples = 8059
accuracy = 0.902097
precision class 0 = 0.906681
precision class 1 = 0.822727
recall class 0 = 0.988835
recall class 1 = 0.337372
false negative rate = 0.662628
false positive rate = 0.011165
positive prediction rate = 0.054597
AUC of ROC = 0.906918
AUC of PRC = 0.671216
min(+P, Se) = 0.615098

-------------------------------

confusion matrix:
[[5650   58]
 [ 639  275]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.1286810040473938
difference in average predicted and observed risk = -0.00934399595260621
number samples = 6622
accuracy = 0.894745
precision class 0 = 0.898394
precision class 1 = 0.825826
recall class 0 = 0.989839
recall class 1 = 0.300875
false negative rate = 0.699125
false positive rate = 0.010161
positive prediction rate = 0.050287
AUC of ROC = 0.892495
AUC of PRC = 0.644737
min(+P, Se) = 0.580963

-------------------------------

confusion matrix:
[[8957   89]
 [ 964  399]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11940199881792068
difference in average predicted and observed risk = -0.01154200118207932
number samples = 10409
accuracy = 0.898838
precision class 0 = 0.902832
precision class 1 = 0.817623
recall class 0 = 0.990161
recall class 1 = 0.292737
false negative rate = 0.707263
false positive rate = 0.009839
positive prediction rate = 0.046883
AUC of ROC = 0.899117
AUC of PRC = 0.645761
min(+P, Se) = 0.584006

-------------------------------

confusion matrix:
[[1621   20]
 [ 250  157]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14662599563598633
difference in average predicted and observed risk = -0.05210400436401366
number samples = 2048
accuracy = 0.868164
precision class 0 = 0.866382
precision class 1 = 0.887006
recall class 0 = 0.987812
recall class 1 = 0.385749
false negative rate = 0.614251
false positive rate = 0.012188
positive prediction rate = 0.086426
AUC of ROC = 0.910964
AUC of PRC = 0.749951
min(+P, Se) = 0.658477

-------------------------------

confusion matrix:
[[1268   14]
 [  80   46]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11485700309276581
difference in average predicted and observed risk = 0.02536800309276581
number samples = 1408
accuracy = 0.933239
precision class 0 = 0.940653
precision class 1 = 0.766667
recall class 0 = 0.98908
recall class 1 = 0.365079
false negative rate = 0.634921
false positive rate = 0.01092
positive prediction rate = 0.042614
AUC of ROC = 0.901679
AUC of PRC = 0.607597
min(+P, Se) = 0.579365

-------------------------------

confusion matrix:
[[290   6]
 [ 32  20]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14690899848937988
difference in average predicted and observed risk = -0.0025160015106201195
number samples = 348
accuracy = 0.890805
precision class 0 = 0.900621
precision class 1 = 0.769231
recall class 0 = 0.97973
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.02027
positive prediction rate = 0.074713
AUC of ROC = 0.877339
AUC of PRC = 0.635204
min(+P, Se) = 0.581818

-------------------------------

confusion matrix:
[[422   7]
 [ 24  15]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.1103229969739914
difference in average predicted and observed risk = 0.02698999697399139
number samples = 468
accuracy = 0.933761
precision class 0 = 0.946188
precision class 1 = 0.681818
recall class 0 = 0.983683
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.016317
positive prediction rate = 0.047009
AUC of ROC = 0.887753
AUC of PRC = 0.579299
min(+P, Se) = 0.538462

-------------------------------

confusion matrix:
[[12558   136]
 [ 1350   637]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12312699854373932
difference in average predicted and observed risk = -0.012218001456260674
number samples = 14681
accuracy = 0.898781
precision class 0 = 0.902934
precision class 1 = 0.824062
recall class 0 = 0.989286
recall class 1 = 0.320584
false negative rate = 0.679416
false positive rate = 0.010714
positive prediction rate = 0.052653
AUC of ROC = 0.900477
AUC of PRC = 0.658995
min(+P, Se) = 0.59799

-------------------------------

==>predicting on validation



confusion matrix:
[[1513   22]
 [ 204   74]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13663600385189056
difference in average predicted and observed risk = -0.016700996148109437
number samples = 1813
accuracy = 0.875345
precision class 0 = 0.881188
precision class 1 = 0.770833
recall class 0 = 0.985668
recall class 1 = 0.266187
false negative rate = 0.733813
false positive rate = 0.014332
positive prediction rate = 0.052951
AUC of ROC = 0.851424
AUC of PRC = 0.587941
min(+P, Se) = 0.530466

-------------------------------

confusion matrix:
[[896  11]
 [ 88  25]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10601899772882462
difference in average predicted and observed risk = -0.004765002271175378
number samples = 1020
accuracy = 0.902941
precision class 0 = 0.910569
precision class 1 = 0.694444
recall class 0 = 0.987872
recall class 1 = 0.221239
false negative rate = 0.778761
false positive rate = 0.012128
positive prediction rate = 0.035294
AUC of ROC = 0.862203
AUC of PRC = 0.514907
min(+P, Se) = 0.46087

-------------------------------

confusion matrix:
[[245   6]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1307860016822815
difference in average predicted and observed risk = 0.011488001682281493
number samples = 285
accuracy = 0.908772
precision class 0 = 0.924528
precision class 1 = 0.7
recall class 0 = 0.976096
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.023904
positive prediction rate = 0.070175
AUC of ROC = 0.887509
AUC of PRC = 0.625529
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09825599938631058
difference in average predicted and observed risk = 0.008511999386310573
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.796781
AUC of PRC = 0.442817
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.20055800676345825
difference in average predicted and observed risk = 0.04671200676345824
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1503   26]
 [ 178   66]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12384399771690369
difference in average predicted and observed risk = -0.013776002283096306
number samples = 1773
accuracy = 0.884941
precision class 0 = 0.894111
precision class 1 = 0.717391
recall class 0 = 0.982995
recall class 1 = 0.270492
false negative rate = 0.729508
false positive rate = 0.017005
positive prediction rate = 0.051889
AUC of ROC = 0.86065
AUC of PRC = 0.565068
min(+P, Se) = 0.512295

-------------------------------

confusion matrix:
[[1241   16]
 [ 140   52]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12866699695587158
difference in average predicted and observed risk = -0.0038380030441284296
number samples = 1449
accuracy = 0.89234
precision class 0 = 0.898624
precision class 1 = 0.764706
recall class 0 = 0.987271
recall class 1 = 0.270833
false negative rate = 0.729167
false positive rate = 0.012729
positive prediction rate = 0.046929
AUC of ROC = 0.859764
AUC of PRC = 0.575742
min(+P, Se) = 0.515625

-------------------------------

confusion matrix:
[[1951   27]
 [ 228   83]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12432000041007996
difference in average predicted and observed risk = -0.011546999589920032
number samples = 2289
accuracy = 0.888598
precision class 0 = 0.895365
precision class 1 = 0.754545
recall class 0 = 0.98635
recall class 1 = 0.266881
false negative rate = 0.733119
false positive rate = 0.01365
positive prediction rate = 0.048056
AUC of ROC = 0.855541
AUC of PRC = 0.56433
min(+P, Se) = 0.519231

-------------------------------

confusion matrix:
[[362   6]
 [ 61  20]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1379529982805252
difference in average predicted and observed risk = -0.0424480017194748
number samples = 449
accuracy = 0.85078
precision class 0 = 0.855792
precision class 1 = 0.769231
recall class 0 = 0.983696
recall class 1 = 0.246914
false negative rate = 0.753086
false positive rate = 0.016304
positive prediction rate = 0.057906
AUC of ROC = 0.866948
AUC of PRC = 0.640201
min(+P, Se) = 0.576471

-------------------------------

confusion matrix:
[[273   5]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11761599779129028
difference in average predicted and observed risk = 0.02021299779129028
number samples = 308
accuracy = 0.918831
precision class 0 = 0.931741
precision class 1 = 0.666667
recall class 0 = 0.982014
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.017986
positive prediction rate = 0.048701
AUC of ROC = 0.875659
AUC of PRC = 0.543484
min(+P, Se) = 0.516129

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11388199776411057
difference in average predicted and observed risk = 0.04171699776411056
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.88254
AUC of PRC = 0.357709
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15483400225639343
difference in average predicted and observed risk = 0.06622600225639343
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.888889
AUC of PRC = 0.747348
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2744   42]
 [ 318  118]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12601299583911896
difference in average predicted and observed risk = -0.009307004160881038
number samples = 3222
accuracy = 0.888268
precision class 0 = 0.896146
precision class 1 = 0.7375
recall class 0 = 0.984925
recall class 1 = 0.270642
false negative rate = 0.729358
false positive rate = 0.015075
positive prediction rate = 0.049659
AUC of ROC = 0.859671
AUC of PRC = 0.568693
min(+P, Se) = 0.516055

-------------------------------

Epoch 00042: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch42.state
Epoch 43/100
 - 813s - loss: 0.2730 - val_loss: 0.2821

==>predicting on train



confusion matrix:
[[6962   74]
 [ 920  392]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12419100105762482
difference in average predicted and observed risk = -0.03297199894237518
number samples = 8348
accuracy = 0.88093
precision class 0 = 0.883278
precision class 1 = 0.841202
recall class 0 = 0.989483
recall class 1 = 0.298781
false negative rate = 0.701219
false positive rate = 0.010517
positive prediction rate = 0.055822
AUC of ROC = 0.886506
AUC of PRC = 0.660107
min(+P, Se) = 0.589394

-------------------------------

confusion matrix:
[[3946   56]
 [ 260  211]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.1049489974975586
difference in average predicted and observed risk = -0.00034900250244140896
number samples = 4473
accuracy = 0.929354
precision class 0 = 0.938184
precision class 1 = 0.790262
recall class 0 = 0.986007
recall class 1 = 0.447983
false negative rate = 0.552017
false positive rate = 0.013993
positive prediction rate = 0.059691
AUC of ROC = 0.909683
AUC of PRC = 0.666281
min(+P, Se) = 0.582278

-------------------------------

confusion matrix:
[[1179   16]
 [  81   62]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11292999982833862
difference in average predicted and observed risk = 0.006053999828338624
number samples = 1338
accuracy = 0.927504
precision class 0 = 0.935714
precision class 1 = 0.794872
recall class 0 = 0.986611
recall class 1 = 0.433566
false negative rate = 0.566434
false positive rate = 0.013389
positive prediction rate = 0.058296
AUC of ROC = 0.915844
AUC of PRC = 0.649907
min(+P, Se) = 0.594406

-------------------------------

confusion matrix:
[[347   3]
 [ 21  18]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10068000108003616
difference in average predicted and observed risk = 0.00042300108003616443
number samples = 389
accuracy = 0.938303
precision class 0 = 0.942935
precision class 1 = 0.857143
recall class 0 = 0.991429
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.008571
positive prediction rate = 0.053985
AUC of ROC = 0.913626
AUC of PRC = 0.676789
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[107   4]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16589100658893585
difference in average predicted and observed risk = 0.0004770065889358466
number samples = 133
accuracy = 0.902256
precision class 0 = 0.922414
precision class 1 = 0.764706
recall class 0 = 0.963964
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.036036
positive prediction rate = 0.12782
AUC of ROC = 0.94226
AUC of PRC = 0.841451
min(+P, Se) = 0.772727

-------------------------------

confusion matrix:
[[6897   89]
 [ 686  387]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11289399862289429
difference in average predicted and observed risk = -0.020249001377105724
number samples = 8059
accuracy = 0.903834
precision class 0 = 0.909535
precision class 1 = 0.813025
recall class 0 = 0.98726
recall class 1 = 0.360671
false negative rate = 0.639329
false positive rate = 0.01274
positive prediction rate = 0.059064
AUC of ROC = 0.902735
AUC of PRC = 0.668349
min(+P, Se) = 0.601118

-------------------------------

confusion matrix:
[[5644   64]
 [ 605  309]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12212400138378143
difference in average predicted and observed risk = -0.015900998616218576
number samples = 6622
accuracy = 0.898973
precision class 0 = 0.903185
precision class 1 = 0.828418
recall class 0 = 0.988788
recall class 1 = 0.338074
false negative rate = 0.661926
false positive rate = 0.011212
positive prediction rate = 0.056327
AUC of ROC = 0.890843
AUC of PRC = 0.650433
min(+P, Se) = 0.575956

-------------------------------

confusion matrix:
[[8953   93]
 [ 917  446]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11247000098228455
difference in average predicted and observed risk = -0.01847399901771546
number samples = 10409
accuracy = 0.902969
precision class 0 = 0.907092
precision class 1 = 0.827458
recall class 0 = 0.989719
recall class 1 = 0.327219
false negative rate = 0.672781
false positive rate = 0.010281
positive prediction rate = 0.051782
AUC of ROC = 0.895781
AUC of PRC = 0.648774
min(+P, Se) = 0.576669

-------------------------------

confusion matrix:
[[1612   29]
 [ 248  159]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.144337996840477
difference in average predicted and observed risk = -0.054392003159523
number samples = 2048
accuracy = 0.864746
precision class 0 = 0.866667
precision class 1 = 0.845745
recall class 0 = 0.982328
recall class 1 = 0.390663
false negative rate = 0.609337
false positive rate = 0.017672
positive prediction rate = 0.091797
AUC of ROC = 0.905363
AUC of PRC = 0.739563
min(+P, Se) = 0.644608

-------------------------------

confusion matrix:
[[1265   17]
 [  74   52]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10887199640274048
difference in average predicted and observed risk = 0.01938299640274048
number samples = 1408
accuracy = 0.935369
precision class 0 = 0.944735
precision class 1 = 0.753623
recall class 0 = 0.986739
recall class 1 = 0.412698
false negative rate = 0.587302
false positive rate = 0.013261
positive prediction rate = 0.049006
AUC of ROC = 0.905765
AUC of PRC = 0.619595
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[288   8]
 [ 29  23]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14406900107860565
difference in average predicted and observed risk = -0.00535599892139435
number samples = 348
accuracy = 0.893678
precision class 0 = 0.908517
precision class 1 = 0.741935
recall class 0 = 0.972973
recall class 1 = 0.442308
false negative rate = 0.557692
false positive rate = 0.027027
positive prediction rate = 0.08908
AUC of ROC = 0.876559
AUC of PRC = 0.648855
min(+P, Se) = 0.611111

-------------------------------

confusion matrix:
[[423   6]
 [ 23  16]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10423500090837479
difference in average predicted and observed risk = 0.020902000908374782
number samples = 468
accuracy = 0.938034
precision class 0 = 0.94843
precision class 1 = 0.727273
recall class 0 = 0.986014
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.013986
positive prediction rate = 0.047009
AUC of ROC = 0.880461
AUC of PRC = 0.592824
min(+P, Se) = 0.564103

-------------------------------

confusion matrix:
[[12541   153]
 [ 1291   696]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11705700308084488
difference in average predicted and observed risk = -0.018287996919155114
number samples = 14681
accuracy = 0.901642
precision class 0 = 0.906666
precision class 1 = 0.819788
recall class 0 = 0.987947
recall class 1 = 0.350277
false negative rate = 0.649723
false positive rate = 0.012053
positive prediction rate = 0.05783
AUC of ROC = 0.897298
AUC of PRC = 0.659877
min(+P, Se) = 0.588324

-------------------------------

==>predicting on validation



confusion matrix:
[[1507   28]
 [ 196   82]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12820200622081757
difference in average predicted and observed risk = -0.025134993779182435
number samples = 1813
accuracy = 0.876448
precision class 0 = 0.884909
precision class 1 = 0.745455
recall class 0 = 0.981759
recall class 1 = 0.294964
false negative rate = 0.705036
false positive rate = 0.018241
positive prediction rate = 0.060673
AUC of ROC = 0.855311
AUC of PRC = 0.585947
min(+P, Se) = 0.521173

-------------------------------

confusion matrix:
[[890  17]
 [ 87  26]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10421200096607208
difference in average predicted and observed risk = -0.006571999033927911
number samples = 1020
accuracy = 0.898039
precision class 0 = 0.910952
precision class 1 = 0.604651
recall class 0 = 0.981257
recall class 1 = 0.230089
false negative rate = 0.769912
false positive rate = 0.018743
positive prediction rate = 0.042157
AUC of ROC = 0.85589
AUC of PRC = 0.495573
min(+P, Se) = 0.469027

-------------------------------

confusion matrix:
[[243   8]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1287350058555603
difference in average predicted and observed risk = 0.009437005855560301
number samples = 285
accuracy = 0.905263
precision class 0 = 0.927481
precision class 1 = 0.652174
recall class 0 = 0.968127
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.031873
positive prediction rate = 0.080702
AUC of ROC = 0.892079
AUC of PRC = 0.632667
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.0894009992480278
difference in average predicted and observed risk = -0.0003430007519722028
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.758551
AUC of PRC = 0.405699
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.20036199688911438
difference in average predicted and observed risk = 0.04651599688911437
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1494   35]
 [ 174   70]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11834599822759628
difference in average predicted and observed risk = -0.01927400177240371
number samples = 1773
accuracy = 0.882121
precision class 0 = 0.895683
precision class 1 = 0.666667
recall class 0 = 0.977109
recall class 1 = 0.286885
false negative rate = 0.713115
false positive rate = 0.022891
positive prediction rate = 0.059222
AUC of ROC = 0.861782
AUC of PRC = 0.558589
min(+P, Se) = 0.508197

-------------------------------

confusion matrix:
[[1236   21]
 [ 134   58]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12268500030040741
difference in average predicted and observed risk = -0.009819999699592602
number samples = 1449
accuracy = 0.89303
precision class 0 = 0.90219
precision class 1 = 0.734177
recall class 0 = 0.983294
recall class 1 = 0.302083
false negative rate = 0.697917
false positive rate = 0.016706
positive prediction rate = 0.05452
AUC of ROC = 0.857829
AUC of PRC = 0.573412
min(+P, Se) = 0.502591

-------------------------------

confusion matrix:
[[1941   37]
 [ 221   90]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11795800179243088
difference in average predicted and observed risk = -0.01790899820756911
number samples = 2289
accuracy = 0.887287
precision class 0 = 0.89778
precision class 1 = 0.708661
recall class 0 = 0.981294
recall class 1 = 0.289389
false negative rate = 0.710611
false positive rate = 0.018706
positive prediction rate = 0.055483
AUC of ROC = 0.857149
AUC of PRC = 0.559368
min(+P, Se) = 0.494413

-------------------------------

confusion matrix:
[[359   9]
 [ 59  22]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13537900149822235
difference in average predicted and observed risk = -0.045021998501777655
number samples = 449
accuracy = 0.848552
precision class 0 = 0.858852
precision class 1 = 0.709677
recall class 0 = 0.975543
recall class 1 = 0.271605
false negative rate = 0.728395
false positive rate = 0.024457
positive prediction rate = 0.069042
AUC of ROC = 0.864667
AUC of PRC = 0.639286
min(+P, Se) = 0.590361

-------------------------------

confusion matrix:
[[273   5]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11063200235366821
difference in average predicted and observed risk = 0.01322900235366821
number samples = 308
accuracy = 0.918831
precision class 0 = 0.931741
precision class 1 = 0.666667
recall class 0 = 0.982014
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.017986
positive prediction rate = 0.048701
AUC of ROC = 0.880576
AUC of PRC = 0.54273
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[86  4]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10957600176334381
difference in average predicted and observed risk = 0.037411001763343804
number samples = 97
accuracy = 0.896907
precision class 0 = 0.934783
precision class 1 = 0.2
recall class 0 = 0.955556
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.044444
positive prediction rate = 0.051546
AUC of ROC = 0.860317
AUC of PRC = 0.344077
min(+P, Se) = 0.315789

-------------------------------

confusion matrix:
[[71  1]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15320399403572083
difference in average predicted and observed risk = 0.06459599403572082
number samples = 79
accuracy = 0.962025
precision class 0 = 0.972603
precision class 1 = 0.833333
recall class 0 = 0.986111
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.013889
positive prediction rate = 0.075949
AUC of ROC = 0.884921
AUC of PRC = 0.746767
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2730   56]
 [ 308  128]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12029799818992615
difference in average predicted and observed risk = -0.015022001810073848
number samples = 3222
accuracy = 0.887027
precision class 0 = 0.898618
precision class 1 = 0.695652
recall class 0 = 0.9799
recall class 1 = 0.293578
false negative rate = 0.706422
false positive rate = 0.020101
positive prediction rate = 0.057107
AUC of ROC = 0.85955
AUC of PRC = 0.564477
min(+P, Se) = 0.503401

-------------------------------

Epoch 00043: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch43.state
Epoch 44/100
 - 814s - loss: 0.2708 - val_loss: 0.2813

==>predicting on train



confusion matrix:
[[6987   49]
 [ 986  326]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.11880899965763092
difference in average predicted and observed risk = -0.03835400034236908
number samples = 8348
accuracy = 0.876018
precision class 0 = 0.876333
precision class 1 = 0.869333
recall class 0 = 0.993036
recall class 1 = 0.248476
false negative rate = 0.751524
false positive rate = 0.006964
positive prediction rate = 0.044921
AUC of ROC = 0.887713
AUC of PRC = 0.659252
min(+P, Se) = 0.594677

-------------------------------

confusion matrix:
[[3978   24]
 [ 297  174]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.09817100316286087
difference in average predicted and observed risk = -0.007126996837139132
number samples = 4473
accuracy = 0.928236
precision class 0 = 0.930526
precision class 1 = 0.878788
recall class 0 = 0.994003
recall class 1 = 0.369427
false negative rate = 0.630573
false positive rate = 0.005997
positive prediction rate = 0.044266
AUC of ROC = 0.913941
AUC of PRC = 0.673293
min(+P, Se) = 0.59322

-------------------------------

confusion matrix:
[[1185   10]
 [  91   52]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10505399852991104
difference in average predicted and observed risk = -0.0018220014700889575
number samples = 1338
accuracy = 0.924514
precision class 0 = 0.928683
precision class 1 = 0.83871
recall class 0 = 0.991632
recall class 1 = 0.363636
false negative rate = 0.636364
false positive rate = 0.008368
positive prediction rate = 0.046338
AUC of ROC = 0.919478
AUC of PRC = 0.643418
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[349   1]
 [ 27  12]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09263399988412857
difference in average predicted and observed risk = -0.007623000115871428
number samples = 389
accuracy = 0.928021
precision class 0 = 0.928191
precision class 1 = 0.923077
recall class 0 = 0.997143
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.002857
positive prediction rate = 0.033419
AUC of ROC = 0.91326
AUC of PRC = 0.663183
min(+P, Se) = 0.651163

-------------------------------

confusion matrix:
[[110   1]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.15481099486351013
difference in average predicted and observed risk = -0.010603005136489874
number samples = 133
accuracy = 0.924812
precision class 0 = 0.92437
precision class 1 = 0.928571
recall class 0 = 0.990991
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.009009
positive prediction rate = 0.105263
AUC of ROC = 0.945536
AUC of PRC = 0.861536
min(+P, Se) = 0.826087

-------------------------------

confusion matrix:
[[6936   50]
 [ 743  330]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.10660199820995331
difference in average predicted and observed risk = -0.026541001790046703
number samples = 8059
accuracy = 0.901601
precision class 0 = 0.903243
precision class 1 = 0.868421
recall class 0 = 0.992843
recall class 1 = 0.307549
false negative rate = 0.692451
false positive rate = 0.007157
positive prediction rate = 0.047152
AUC of ROC = 0.906066
AUC of PRC = 0.671783
min(+P, Se) = 0.616962

-------------------------------

confusion matrix:
[[5673   35]
 [ 667  247]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11613000184297562
difference in average predicted and observed risk = -0.021894998157024392
number samples = 6622
accuracy = 0.89399
precision class 0 = 0.894795
precision class 1 = 0.875886
recall class 0 = 0.993868
recall class 1 = 0.270241
false negative rate = 0.729759
false positive rate = 0.006132
positive prediction rate = 0.042585
AUC of ROC = 0.893101
AUC of PRC = 0.650546
min(+P, Se) = 0.569248

-------------------------------

confusion matrix:
[[8991   55]
 [1000  363]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10723499953746796
difference in average predicted and observed risk = -0.02370900046253205
number samples = 10409
accuracy = 0.898645
precision class 0 = 0.89991
precision class 1 = 0.868421
recall class 0 = 0.99392
recall class 1 = 0.266324
false negative rate = 0.733676
false positive rate = 0.00608
positive prediction rate = 0.040158
AUC of ROC = 0.898731
AUC of PRC = 0.65015
min(+P, Se) = 0.588881

-------------------------------

confusion matrix:
[[1630   11]
 [ 268  139]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.13403500616550446
difference in average predicted and observed risk = -0.06469499383449553
number samples = 2048
accuracy = 0.86377
precision class 0 = 0.858799
precision class 1 = 0.926667
recall class 0 = 0.993297
recall class 1 = 0.341523
false negative rate = 0.658477
false positive rate = 0.006703
positive prediction rate = 0.073242
AUC of ROC = 0.909706
AUC of PRC = 0.747354
min(+P, Se) = 0.643735

-------------------------------

confusion matrix:
[[1274    8]
 [  82   44]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10295099765062332
difference in average predicted and observed risk = 0.013461997650623322
number samples = 1408
accuracy = 0.93608
precision class 0 = 0.939528
precision class 1 = 0.846154
recall class 0 = 0.99376
recall class 1 = 0.349206
false negative rate = 0.650794
false positive rate = 0.00624
positive prediction rate = 0.036932
AUC of ROC = 0.905913
AUC of PRC = 0.612737
min(+P, Se) = 0.579365

-------------------------------

confusion matrix:
[[290   6]
 [ 35  17]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1349180042743683
difference in average predicted and observed risk = -0.014506995725631716
number samples = 348
accuracy = 0.882184
precision class 0 = 0.892308
precision class 1 = 0.73913
recall class 0 = 0.97973
recall class 1 = 0.326923
false negative rate = 0.673077
false positive rate = 0.02027
positive prediction rate = 0.066092
AUC of ROC = 0.879808
AUC of PRC = 0.649408
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[424   5]
 [ 25  14]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.09721200168132782
difference in average predicted and observed risk = 0.013879001681327816
number samples = 468
accuracy = 0.935897
precision class 0 = 0.944321
precision class 1 = 0.736842
recall class 0 = 0.988345
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.011655
positive prediction rate = 0.040598
AUC of ROC = 0.884406
AUC of PRC = 0.574094
min(+P, Se) = 0.564103

-------------------------------

confusion matrix:
[[12609    85]
 [ 1410   577]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11089999973773956
difference in average predicted and observed risk = -0.02444500026226043
number samples = 14681
accuracy = 0.898168
precision class 0 = 0.899422
precision class 1 = 0.871601
recall class 0 = 0.993304
recall class 1 = 0.290388
false negative rate = 0.709612
false positive rate = 0.006696
positive prediction rate = 0.045092
AUC of ROC = 0.900209
AUC of PRC = 0.66189
min(+P, Se) = 0.59599

-------------------------------

==>predicting on validation



confusion matrix:
[[1517   18]
 [ 212   66]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12213700264692307
difference in average predicted and observed risk = -0.031199997353076936
number samples = 1813
accuracy = 0.873138
precision class 0 = 0.877386
precision class 1 = 0.785714
recall class 0 = 0.988274
recall class 1 = 0.23741
false negative rate = 0.76259
false positive rate = 0.011726
positive prediction rate = 0.046332
AUC of ROC = 0.854515
AUC of PRC = 0.585424
min(+P, Se) = 0.522968

-------------------------------

confusion matrix:
[[896  11]
 [ 87  26]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.09722000360488892
difference in average predicted and observed risk = -0.013563996395111078
number samples = 1020
accuracy = 0.903922
precision class 0 = 0.911495
precision class 1 = 0.702703
recall class 0 = 0.987872
recall class 1 = 0.230089
false negative rate = 0.769912
false positive rate = 0.012128
positive prediction rate = 0.036275
AUC of ROC = 0.85871
AUC of PRC = 0.515652
min(+P, Se) = 0.464567

-------------------------------

confusion matrix:
[[246   5]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12040899693965912
difference in average predicted and observed risk = 0.0011109969396591174
number samples = 285
accuracy = 0.912281
precision class 0 = 0.924812
precision class 1 = 0.736842
recall class 0 = 0.98008
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.01992
positive prediction rate = 0.066667
AUC of ROC = 0.894071
AUC of PRC = 0.633818
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08660099655389786
difference in average predicted and observed risk = -0.0031430034461021467
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.792757
AUC of PRC = 0.396541
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18556900322437286
difference in average predicted and observed risk = 0.03172300322437285
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1505   24]
 [ 181   63]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11151999980211258
difference in average predicted and observed risk = -0.026100000197887413
number samples = 1773
accuracy = 0.884377
precision class 0 = 0.892645
precision class 1 = 0.724138
recall class 0 = 0.984303
recall class 1 = 0.258197
false negative rate = 0.741803
false positive rate = 0.015697
positive prediction rate = 0.049069
AUC of ROC = 0.860053
AUC of PRC = 0.561629
min(+P, Se) = 0.514286

-------------------------------

confusion matrix:
[[1244   13]
 [ 145   47]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.1164729967713356
difference in average predicted and observed risk = -0.01603200322866441
number samples = 1449
accuracy = 0.890959
precision class 0 = 0.895608
precision class 1 = 0.783333
recall class 0 = 0.989658
recall class 1 = 0.244792
false negative rate = 0.755208
false positive rate = 0.010342
positive prediction rate = 0.041408
AUC of ROC = 0.86317
AUC of PRC = 0.582261
min(+P, Se) = 0.517949

-------------------------------

confusion matrix:
[[1955   23]
 [ 235   76]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11170600354671478
difference in average predicted and observed risk = -0.024160996453285205
number samples = 2289
accuracy = 0.887287
precision class 0 = 0.892694
precision class 1 = 0.767677
recall class 0 = 0.988372
recall class 1 = 0.244373
false negative rate = 0.755627
false positive rate = 0.011628
positive prediction rate = 0.04325
AUC of ROC = 0.857004
AUC of PRC = 0.563969
min(+P, Se) = 0.509615

-------------------------------

confusion matrix:
[[363   5]
 [ 61  20]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.12625500559806824
difference in average predicted and observed risk = -0.05414599440193177
number samples = 449
accuracy = 0.853007
precision class 0 = 0.856132
precision class 1 = 0.8
recall class 0 = 0.986413
recall class 1 = 0.246914
false negative rate = 0.753086
false positive rate = 0.013587
positive prediction rate = 0.055679
AUC of ROC = 0.870739
AUC of PRC = 0.646886
min(+P, Se) = 0.580247

-------------------------------

confusion matrix:
[[273   5]
 [ 22   8]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10602500289678574
difference in average predicted and observed risk = 0.008622002896785733
number samples = 308
accuracy = 0.912338
precision class 0 = 0.925424
precision class 1 = 0.615385
recall class 0 = 0.982014
recall class 1 = 0.266667
false negative rate = 0.733333
false positive rate = 0.017986
positive prediction rate = 0.042208
AUC of ROC = 0.877338
AUC of PRC = 0.550048
min(+P, Se) = 0.575758

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10391300171613693
difference in average predicted and observed risk = 0.031748001716136925
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.873016
AUC of PRC = 0.359514
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[71  1]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1439809948205948
difference in average predicted and observed risk = 0.05537299482059478
number samples = 79
accuracy = 0.962025
precision class 0 = 0.972603
precision class 1 = 0.833333
recall class 0 = 0.986111
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.013889
positive prediction rate = 0.075949
AUC of ROC = 0.875
AUC of PRC = 0.734021
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2749   37]
 [ 326  110]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.1137470006942749
difference in average predicted and observed risk = -0.021572999305725093
number samples = 3222
accuracy = 0.887337
precision class 0 = 0.893984
precision class 1 = 0.748299
recall class 0 = 0.986719
recall class 1 = 0.252294
false negative rate = 0.747706
false positive rate = 0.013281
positive prediction rate = 0.045624
AUC of ROC = 0.860698
AUC of PRC = 0.569085
min(+P, Se) = 0.514541

-------------------------------

Epoch 00044: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch44.state
Epoch 45/100
 - 814s - loss: 0.2733 - val_loss: 0.2807

==>predicting on train



confusion matrix:
[[6973   63]
 [ 955  357]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.14406199753284454
difference in average predicted and observed risk = -0.013101002467155454
number samples = 8348
accuracy = 0.878055
precision class 0 = 0.879541
precision class 1 = 0.85
recall class 0 = 0.991046
recall class 1 = 0.272104
false negative rate = 0.727896
false positive rate = 0.008954
positive prediction rate = 0.050311
AUC of ROC = 0.888162
AUC of PRC = 0.658221
min(+P, Se) = 0.588415

-------------------------------

confusion matrix:
[[3965   37]
 [ 282  189]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11608699709177017
difference in average predicted and observed risk = 0.01078899709177017
number samples = 4473
accuracy = 0.928683
precision class 0 = 0.9336
precision class 1 = 0.836283
recall class 0 = 0.990755
recall class 1 = 0.401274
false negative rate = 0.598726
false positive rate = 0.009245
positive prediction rate = 0.050525
AUC of ROC = 0.919552
AUC of PRC = 0.688596
min(+P, Se) = 0.619958

-------------------------------

confusion matrix:
[[1181   14]
 [  86   57]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.12476199865341187
difference in average predicted and observed risk = 0.017885998653411866
number samples = 1338
accuracy = 0.925262
precision class 0 = 0.932123
precision class 1 = 0.802817
recall class 0 = 0.988285
recall class 1 = 0.398601
false negative rate = 0.601399
false positive rate = 0.011715
positive prediction rate = 0.053064
AUC of ROC = 0.917523
AUC of PRC = 0.641129
min(+P, Se) = 0.601399

-------------------------------

confusion matrix:
[[348   2]
 [ 27  12]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.11223199963569641
difference in average predicted and observed risk = 0.011974999635696412
number samples = 389
accuracy = 0.92545
precision class 0 = 0.928
precision class 1 = 0.857143
recall class 0 = 0.994286
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.005714
positive prediction rate = 0.03599
AUC of ROC = 0.928498
AUC of PRC = 0.72063
min(+P, Se) = 0.658537

-------------------------------

confusion matrix:
[[109   2]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.17316600680351257
difference in average predicted and observed risk = 0.007752006803512568
number samples = 133
accuracy = 0.917293
precision class 0 = 0.923729
precision class 1 = 0.866667
recall class 0 = 0.981982
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.018018
positive prediction rate = 0.112782
AUC of ROC = 0.949631
AUC of PRC = 0.860324
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6920   66]
 [ 711  362]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12762999534606934
difference in average predicted and observed risk = -0.005513004653930675
number samples = 8059
accuracy = 0.903586
precision class 0 = 0.906827
precision class 1 = 0.845794
recall class 0 = 0.990553
recall class 1 = 0.337372
false negative rate = 0.662628
false positive rate = 0.009447
positive prediction rate = 0.053108
AUC of ROC = 0.909347
AUC of PRC = 0.6778
min(+P, Se) = 0.623836

-------------------------------

confusion matrix:
[[5656   52]
 [ 648  266]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.13997800648212433
difference in average predicted and observed risk = 0.0019530064821243198
number samples = 6622
accuracy = 0.894292
precision class 0 = 0.897208
precision class 1 = 0.836478
recall class 0 = 0.99089
recall class 1 = 0.291028
false negative rate = 0.708972
false positive rate = 0.00911
positive prediction rate = 0.048022
AUC of ROC = 0.894296
AUC of PRC = 0.654365
min(+P, Se) = 0.572678

-------------------------------

confusion matrix:
[[8969   77]
 [ 960  403]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.130512997508049
difference in average predicted and observed risk = -0.0004310024919509936
number samples = 10409
accuracy = 0.900375
precision class 0 = 0.903314
precision class 1 = 0.839583
recall class 0 = 0.991488
recall class 1 = 0.295671
false negative rate = 0.704329
false positive rate = 0.008512
positive prediction rate = 0.046114
AUC of ROC = 0.901296
AUC of PRC = 0.652834
min(+P, Se) = 0.586941

-------------------------------

confusion matrix:
[[1626   15]
 [ 267  140]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.15179799497127533
difference in average predicted and observed risk = -0.04693200502872466
number samples = 2048
accuracy = 0.862305
precision class 0 = 0.858954
precision class 1 = 0.903226
recall class 0 = 0.990859
recall class 1 = 0.34398
false negative rate = 0.65602
false positive rate = 0.009141
positive prediction rate = 0.075684
AUC of ROC = 0.911419
AUC of PRC = 0.754757
min(+P, Se) = 0.65534

-------------------------------

confusion matrix:
[[1271   11]
 [  77   49]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.1245110034942627
difference in average predicted and observed risk = 0.035022003494262696
number samples = 1408
accuracy = 0.9375
precision class 0 = 0.942878
precision class 1 = 0.816667
recall class 0 = 0.99142
recall class 1 = 0.388889
false negative rate = 0.611111
false positive rate = 0.00858
positive prediction rate = 0.042614
AUC of ROC = 0.912872
AUC of PRC = 0.634872
min(+P, Se) = 0.611111

-------------------------------

confusion matrix:
[[288   8]
 [ 32  20]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.15668199956417084
difference in average predicted and observed risk = 0.007256999564170835
number samples = 348
accuracy = 0.885057
precision class 0 = 0.9
precision class 1 = 0.714286
recall class 0 = 0.972973
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.027027
positive prediction rate = 0.08046
AUC of ROC = 0.88533
AUC of PRC = 0.66096
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[422   7]
 [ 23  16]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.12024000287055969
difference in average predicted and observed risk = 0.03690700287055969
number samples = 468
accuracy = 0.935897
precision class 0 = 0.948315
precision class 1 = 0.695652
recall class 0 = 0.983683
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.016317
positive prediction rate = 0.049145
AUC of ROC = 0.880641
AUC of PRC = 0.577355
min(+P, Se) = 0.564103

-------------------------------

confusion matrix:
[[12576   118]
 [ 1359   628]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.133200004696846
difference in average predicted and observed risk = -0.002144995303153985
number samples = 14681
accuracy = 0.899394
precision class 0 = 0.902476
precision class 1 = 0.841823
recall class 0 = 0.990704
recall class 1 = 0.316054
false negative rate = 0.683946
false positive rate = 0.009296
positive prediction rate = 0.050814
AUC of ROC = 0.902606
AUC of PRC = 0.666721
min(+P, Se) = 0.599095

-------------------------------

==>predicting on validation



confusion matrix:
[[1507   28]
 [ 204   74]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.14789700508117676
difference in average predicted and observed risk = -0.005439994918823243
number samples = 1813
accuracy = 0.872035
precision class 0 = 0.880771
precision class 1 = 0.72549
recall class 0 = 0.981759
recall class 1 = 0.266187
false negative rate = 0.733813
false positive rate = 0.018241
positive prediction rate = 0.05626
AUC of ROC = 0.847819
AUC of PRC = 0.57607
min(+P, Se) = 0.521583

-------------------------------

confusion matrix:
[[896  11]
 [ 87  26]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11581800132989883
difference in average predicted and observed risk = 0.005034001329898841
number samples = 1020
accuracy = 0.903922
precision class 0 = 0.911495
precision class 1 = 0.702703
recall class 0 = 0.987872
recall class 1 = 0.230089
false negative rate = 0.769912
false positive rate = 0.012128
positive prediction rate = 0.036275
AUC of ROC = 0.859402
AUC of PRC = 0.510341
min(+P, Se) = 0.530973

-------------------------------

confusion matrix:
[[246   5]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.14506299793720245
difference in average predicted and observed risk = 0.025764997937202452
number samples = 285
accuracy = 0.915789
precision class 0 = 0.928302
precision class 1 = 0.75
recall class 0 = 0.98008
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.01992
positive prediction rate = 0.070175
AUC of ROC = 0.906492
AUC of PRC = 0.645881
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10671400278806686
difference in average predicted and observed risk = 0.01697000278806686
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.802817
AUC of PRC = 0.386361
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19952400028705597
difference in average predicted and observed risk = 0.04567800028705596
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.965909
AUC of PRC = 0.835417
min(+P, Se) = 0.75

-------------------------------

confusion matrix:
[[1503   26]
 [ 176   68]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1330520063638687
difference in average predicted and observed risk = -0.004567993636131279
number samples = 1773
accuracy = 0.886069
precision class 0 = 0.895176
precision class 1 = 0.723404
recall class 0 = 0.982995
recall class 1 = 0.278689
false negative rate = 0.721311
false positive rate = 0.017005
positive prediction rate = 0.053017
AUC of ROC = 0.858576
AUC of PRC = 0.559458
min(+P, Se) = 0.520492

-------------------------------

confusion matrix:
[[1236   21]
 [ 141   51]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.14163300395011902
difference in average predicted and observed risk = 0.009128003950119007
number samples = 1449
accuracy = 0.888199
precision class 0 = 0.897604
precision class 1 = 0.708333
recall class 0 = 0.983294
recall class 1 = 0.265625
false negative rate = 0.734375
false positive rate = 0.016706
positive prediction rate = 0.049689
AUC of ROC = 0.859271
AUC of PRC = 0.57445
min(+P, Se) = 0.53125

-------------------------------

confusion matrix:
[[1946   32]
 [ 228   83]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.13568399846553802
difference in average predicted and observed risk = -0.00018300153446196288
number samples = 2289
accuracy = 0.886413
precision class 0 = 0.895124
precision class 1 = 0.721739
recall class 0 = 0.983822
recall class 1 = 0.266881
false negative rate = 0.733119
false positive rate = 0.016178
positive prediction rate = 0.05024
AUC of ROC = 0.852963
AUC of PRC = 0.557614
min(+P, Se) = 0.527331

-------------------------------

confusion matrix:
[[362   6]
 [ 61  20]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1468539983034134
difference in average predicted and observed risk = -0.033547001696586615
number samples = 449
accuracy = 0.85078
precision class 0 = 0.855792
precision class 1 = 0.769231
recall class 0 = 0.983696
recall class 1 = 0.246914
false negative rate = 0.753086
false positive rate = 0.016304
positive prediction rate = 0.057906
AUC of ROC = 0.865539
AUC of PRC = 0.626579
min(+P, Se) = 0.56044

-------------------------------

confusion matrix:
[[273   5]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.13054899871349335
difference in average predicted and observed risk = 0.033145998713493344
number samples = 308
accuracy = 0.918831
precision class 0 = 0.931741
precision class 1 = 0.666667
recall class 0 = 0.982014
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.017986
positive prediction rate = 0.048701
AUC of ROC = 0.891727
AUC of PRC = 0.570232
min(+P, Se) = 0.566667

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11733700335025787
difference in average predicted and observed risk = 0.04517200335025787
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.877778
AUC of PRC = 0.375197
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[71  1]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1647759974002838
difference in average predicted and observed risk = 0.07616799740028381
number samples = 79
accuracy = 0.962025
precision class 0 = 0.972603
precision class 1 = 0.833333
recall class 0 = 0.986111
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.013889
positive prediction rate = 0.075949
AUC of ROC = 0.880952
AUC of PRC = 0.734821
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2739   47]
 [ 317  119]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.13691100478172302
difference in average predicted and observed risk = 0.0015910047817230266
number samples = 3222
accuracy = 0.887027
precision class 0 = 0.89627
precision class 1 = 0.716867
recall class 0 = 0.98313
recall class 1 = 0.272936
false negative rate = 0.727064
false positive rate = 0.01687
positive prediction rate = 0.051521
AUC of ROC = 0.858137
AUC of PRC = 0.564169
min(+P, Se) = 0.527523

-------------------------------

Epoch 00045: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch45.state
Epoch 46/100
 - 822s - loss: 0.2753 - val_loss: 0.2824

==>predicting on train



confusion matrix:
[[6959   77]
 [ 936  376]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13283999264240265
difference in average predicted and observed risk = -0.024323007357597348
number samples = 8348
accuracy = 0.878654
precision class 0 = 0.881444
precision class 1 = 0.830022
recall class 0 = 0.989056
recall class 1 = 0.286585
false negative rate = 0.713415
false positive rate = 0.010944
positive prediction rate = 0.054264
AUC of ROC = 0.887388
AUC of PRC = 0.656377
min(+P, Se) = 0.588415

-------------------------------

confusion matrix:
[[3945   57]
 [ 264  207]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.1137320026755333
difference in average predicted and observed risk = 0.008434002675533292
number samples = 4473
accuracy = 0.928236
precision class 0 = 0.937277
precision class 1 = 0.784091
recall class 0 = 0.985757
recall class 1 = 0.43949
false negative rate = 0.56051
false positive rate = 0.014243
positive prediction rate = 0.059021
AUC of ROC = 0.913299
AUC of PRC = 0.669786
min(+P, Se) = 0.583864

-------------------------------

confusion matrix:
[[1177   18]
 [  84   59]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.12189099937677383
difference in average predicted and observed risk = 0.015014999376773835
number samples = 1338
accuracy = 0.923767
precision class 0 = 0.933386
precision class 1 = 0.766234
recall class 0 = 0.984937
recall class 1 = 0.412587
false negative rate = 0.587413
false positive rate = 0.015063
positive prediction rate = 0.057549
AUC of ROC = 0.916622
AUC of PRC = 0.642865
min(+P, Se) = 0.594406

-------------------------------

confusion matrix:
[[347   3]
 [ 23  16]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10811000317335129
difference in average predicted and observed risk = 0.007853003173351289
number samples = 389
accuracy = 0.933162
precision class 0 = 0.937838
precision class 1 = 0.842105
recall class 0 = 0.991429
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.008571
positive prediction rate = 0.048843
AUC of ROC = 0.91663
AUC of PRC = 0.677888
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[108   3]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1819469928741455
difference in average predicted and observed risk = 0.016532992874145502
number samples = 133
accuracy = 0.924812
precision class 0 = 0.93913
precision class 1 = 0.833333
recall class 0 = 0.972973
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.027027
positive prediction rate = 0.135338
AUC of ROC = 0.947584
AUC of PRC = 0.844738
min(+P, Se) = 0.727273

-------------------------------

confusion matrix:
[[6895   91]
 [ 698  375]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12160500138998032
difference in average predicted and observed risk = -0.011537998610019695
number samples = 8059
accuracy = 0.902097
precision class 0 = 0.908073
precision class 1 = 0.804721
recall class 0 = 0.986974
recall class 1 = 0.349487
false negative rate = 0.650513
false positive rate = 0.013026
positive prediction rate = 0.057824
AUC of ROC = 0.904848
AUC of PRC = 0.667109
min(+P, Se) = 0.610438

-------------------------------

confusion matrix:
[[5641   67]
 [ 616  298]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.13092699646949768
difference in average predicted and observed risk = -0.007098003530502328
number samples = 6622
accuracy = 0.896859
precision class 0 = 0.90155
precision class 1 = 0.816438
recall class 0 = 0.988262
recall class 1 = 0.326039
false negative rate = 0.673961
false positive rate = 0.011738
positive prediction rate = 0.055119
AUC of ROC = 0.892081
AUC of PRC = 0.644635
min(+P, Se) = 0.574863

-------------------------------

confusion matrix:
[[8943  103]
 [ 937  426]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.12110699713230133
difference in average predicted and observed risk = -0.009837002867698674
number samples = 10409
accuracy = 0.900086
precision class 0 = 0.905162
precision class 1 = 0.805293
recall class 0 = 0.988614
recall class 1 = 0.312546
false negative rate = 0.687454
false positive rate = 0.011386
positive prediction rate = 0.050821
AUC of ROC = 0.89774
AUC of PRC = 0.643432
min(+P, Se) = 0.581378

-------------------------------

confusion matrix:
[[1613   28]
 [ 248  159]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.15334400534629822
difference in average predicted and observed risk = -0.04538599465370177
number samples = 2048
accuracy = 0.865234
precision class 0 = 0.866738
precision class 1 = 0.850267
recall class 0 = 0.982937
recall class 1 = 0.390663
false negative rate = 0.609337
false positive rate = 0.017063
positive prediction rate = 0.091309
AUC of ROC = 0.909413
AUC of PRC = 0.745048
min(+P, Se) = 0.64951

-------------------------------

confusion matrix:
[[1269   13]
 [  75   51]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11870300024747849
difference in average predicted and observed risk = 0.029214000247478486
number samples = 1408
accuracy = 0.9375
precision class 0 = 0.944196
precision class 1 = 0.796875
recall class 0 = 0.98986
recall class 1 = 0.404762
false negative rate = 0.595238
false positive rate = 0.01014
positive prediction rate = 0.045455
AUC of ROC = 0.902131
AUC of PRC = 0.609597
min(+P, Se) = 0.566929

-------------------------------

confusion matrix:
[[289   7]
 [ 29  23]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1496800035238266
difference in average predicted and observed risk = 0.00025500352382659686
number samples = 348
accuracy = 0.896552
precision class 0 = 0.908805
precision class 1 = 0.766667
recall class 0 = 0.976351
recall class 1 = 0.442308
false negative rate = 0.557692
false positive rate = 0.023649
positive prediction rate = 0.086207
AUC of ROC = 0.882082
AUC of PRC = 0.664899
min(+P, Se) = 0.607143

-------------------------------

confusion matrix:
[[422   7]
 [ 25  14]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11355199664831161
difference in average predicted and observed risk = 0.03021899664831161
number samples = 468
accuracy = 0.931624
precision class 0 = 0.944072
precision class 1 = 0.666667
recall class 0 = 0.983683
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.016317
positive prediction rate = 0.044872
AUC of ROC = 0.871137
AUC of PRC = 0.555319
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[12536   158]
 [ 1314   673]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12580999732017517
difference in average predicted and observed risk = -0.009535002679824822
number samples = 14681
accuracy = 0.899734
precision class 0 = 0.905126
precision class 1 = 0.809868
recall class 0 = 0.987553
recall class 1 = 0.338702
false negative rate = 0.661298
false positive rate = 0.012447
positive prediction rate = 0.056604
AUC of ROC = 0.899052
AUC of PRC = 0.656601
min(+P, Se) = 0.593373

-------------------------------

==>predicting on validation



confusion matrix:
[[1508   27]
 [ 199   79]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13714799284934998
difference in average predicted and observed risk = -0.016189007150650025
number samples = 1813
accuracy = 0.875345
precision class 0 = 0.883421
precision class 1 = 0.745283
recall class 0 = 0.98241
recall class 1 = 0.284173
false negative rate = 0.715827
false positive rate = 0.01759
positive prediction rate = 0.058467
AUC of ROC = 0.851438
AUC of PRC = 0.577059
min(+P, Se) = 0.523297

-------------------------------

confusion matrix:
[[887  20]
 [ 80  33]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11455799639225006
difference in average predicted and observed risk = 0.0037739963922500674
number samples = 1020
accuracy = 0.901961
precision class 0 = 0.91727
precision class 1 = 0.622642
recall class 0 = 0.977949
recall class 1 = 0.292035
false negative rate = 0.707965
false positive rate = 0.022051
positive prediction rate = 0.051961
AUC of ROC = 0.853812
AUC of PRC = 0.486456
min(+P, Se) = 0.482456

-------------------------------

confusion matrix:
[[244   7]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1390399932861328
difference in average predicted and observed risk = 0.01974199328613281
number samples = 285
accuracy = 0.908772
precision class 0 = 0.927757
precision class 1 = 0.681818
recall class 0 = 0.972112
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.027888
positive prediction rate = 0.077193
AUC of ROC = 0.900516
AUC of PRC = 0.628878
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.1024250015616417
difference in average predicted and observed risk = 0.012681001561641689
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.784708
AUC of PRC = 0.400737
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19498300552368164
difference in average predicted and observed risk = 0.04113700552368163
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1494   35]
 [ 166   78]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12924599647521973
difference in average predicted and observed risk = -0.008374003524780266
number samples = 1773
accuracy = 0.886633
precision class 0 = 0.9
precision class 1 = 0.690265
recall class 0 = 0.977109
recall class 1 = 0.319672
false negative rate = 0.680328
false positive rate = 0.022891
positive prediction rate = 0.063734
AUC of ROC = 0.859479
AUC of PRC = 0.554928
min(+P, Se) = 0.520492

-------------------------------

confusion matrix:
[[1235   22]
 [ 138   54]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.13045500218868256
difference in average predicted and observed risk = -0.0020499978113174555
number samples = 1449
accuracy = 0.889579
precision class 0 = 0.89949
precision class 1 = 0.710526
recall class 0 = 0.982498
recall class 1 = 0.28125
false negative rate = 0.71875
false positive rate = 0.017502
positive prediction rate = 0.05245
AUC of ROC = 0.854904
AUC of PRC = 0.554166
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[1939   39]
 [ 219   92]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12744100391864777
difference in average predicted and observed risk = -0.008425996081352222
number samples = 2289
accuracy = 0.887287
precision class 0 = 0.898517
precision class 1 = 0.70229
recall class 0 = 0.980283
recall class 1 = 0.29582
false negative rate = 0.70418
false positive rate = 0.019717
positive prediction rate = 0.05723
AUC of ROC = 0.854533
AUC of PRC = 0.54994
min(+P, Se) = 0.508039

-------------------------------

confusion matrix:
[[359   9]
 [ 56  25]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1472959965467453
difference in average predicted and observed risk = -0.033105003453254706
number samples = 449
accuracy = 0.855234
precision class 0 = 0.86506
precision class 1 = 0.735294
recall class 0 = 0.975543
recall class 1 = 0.308642
false negative rate = 0.691358
false positive rate = 0.024457
positive prediction rate = 0.075724
AUC of ROC = 0.863459
AUC of PRC = 0.637409
min(+P, Se) = 0.578313

-------------------------------

confusion matrix:
[[273   5]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.1199290007352829
difference in average predicted and observed risk = 0.022526000735282894
number samples = 308
accuracy = 0.915584
precision class 0 = 0.928571
precision class 1 = 0.642857
recall class 0 = 0.982014
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.017986
positive prediction rate = 0.045455
AUC of ROC = 0.870863
AUC of PRC = 0.501614
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.1142909973859787
difference in average predicted and observed risk = 0.04212599738597869
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.868254
AUC of PRC = 0.344092
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1558309942483902
difference in average predicted and observed risk = 0.06722299424839019
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.880952
AUC of PRC = 0.712731
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2729   57]
 [ 304  132]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12978999316692352
difference in average predicted and observed risk = -0.005530006833076473
number samples = 3222
accuracy = 0.887958
precision class 0 = 0.899769
precision class 1 = 0.698413
recall class 0 = 0.979541
recall class 1 = 0.302752
false negative rate = 0.697248
false positive rate = 0.020459
positive prediction rate = 0.058659
AUC of ROC = 0.857383
AUC of PRC = 0.555424
min(+P, Se) = 0.511468

-------------------------------

Epoch 00046: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch46.state
Epoch 47/100
 - 817s - loss: 0.2728 - val_loss: 0.2806

==>predicting on train



confusion matrix:
[[6977   59]
 [ 962  350]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.1258700042963028
difference in average predicted and observed risk = -0.0312929957036972
number samples = 8348
accuracy = 0.877695
precision class 0 = 0.878826
precision class 1 = 0.855746
recall class 0 = 0.991615
recall class 1 = 0.266768
false negative rate = 0.733232
false positive rate = 0.008385
positive prediction rate = 0.048994
AUC of ROC = 0.889681
AUC of PRC = 0.664454
min(+P, Se) = 0.605484

-------------------------------

confusion matrix:
[[3962   40]
 [ 273  198]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10496900230646133
difference in average predicted and observed risk = -0.0003289976935386685
number samples = 4473
accuracy = 0.930025
precision class 0 = 0.935537
precision class 1 = 0.831933
recall class 0 = 0.990005
recall class 1 = 0.420382
false negative rate = 0.579618
false positive rate = 0.009995
positive prediction rate = 0.053208
AUC of ROC = 0.91774
AUC of PRC = 0.681215
min(+P, Se) = 0.596603

-------------------------------

confusion matrix:
[[1180   15]
 [  83   60]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.1130639985203743
difference in average predicted and observed risk = 0.006187998520374299
number samples = 1338
accuracy = 0.926756
precision class 0 = 0.934283
precision class 1 = 0.8
recall class 0 = 0.987448
recall class 1 = 0.41958
false negative rate = 0.58042
false positive rate = 0.012552
positive prediction rate = 0.056054
AUC of ROC = 0.917869
AUC of PRC = 0.660192
min(+P, Se) = 0.590278

-------------------------------

confusion matrix:
[[347   3]
 [ 25  14]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.1006769984960556
difference in average predicted and observed risk = 0.00041999849605560413
number samples = 389
accuracy = 0.928021
precision class 0 = 0.932796
precision class 1 = 0.823529
recall class 0 = 0.991429
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.008571
positive prediction rate = 0.043702
AUC of ROC = 0.919121
AUC of PRC = 0.705204
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[109   2]
 [ 10  12]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.15859000384807587
difference in average predicted and observed risk = -0.006823996151924139
number samples = 133
accuracy = 0.909774
precision class 0 = 0.915966
precision class 1 = 0.857143
recall class 0 = 0.981982
recall class 1 = 0.545455
false negative rate = 0.454545
false positive rate = 0.018018
positive prediction rate = 0.105263
AUC of ROC = 0.94226
AUC of PRC = 0.819646
min(+P, Se) = 0.727273

-------------------------------

confusion matrix:
[[6920   66]
 [ 722  351]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11338800191879272
difference in average predicted and observed risk = -0.019754998081207287
number samples = 8059
accuracy = 0.902221
precision class 0 = 0.905522
precision class 1 = 0.841727
recall class 0 = 0.990553
recall class 1 = 0.32712
false negative rate = 0.67288
false positive rate = 0.009447
positive prediction rate = 0.051743
AUC of ROC = 0.908921
AUC of PRC = 0.679703
min(+P, Se) = 0.622677

-------------------------------

confusion matrix:
[[5655   53]
 [ 631  283]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12353300303220749
difference in average predicted and observed risk = -0.01449199696779252
number samples = 6622
accuracy = 0.896708
precision class 0 = 0.899618
precision class 1 = 0.842262
recall class 0 = 0.990715
recall class 1 = 0.309628
false negative rate = 0.690372
false positive rate = 0.009285
positive prediction rate = 0.05074
AUC of ROC = 0.893891
AUC of PRC = 0.652744
min(+P, Se) = 0.579235

-------------------------------

confusion matrix:
[[8971   75]
 [ 963  400]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11390600353479385
difference in average predicted and observed risk = -0.01703799646520615
number samples = 10409
accuracy = 0.900279
precision class 0 = 0.90306
precision class 1 = 0.842105
recall class 0 = 0.991709
recall class 1 = 0.29347
false negative rate = 0.70653
false positive rate = 0.008291
positive prediction rate = 0.045634
AUC of ROC = 0.900569
AUC of PRC = 0.653177
min(+P, Se) = 0.593109

-------------------------------

confusion matrix:
[[1622   19]
 [ 257  150]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1430239975452423
difference in average predicted and observed risk = -0.05570600245475768
number samples = 2048
accuracy = 0.865234
precision class 0 = 0.863225
precision class 1 = 0.887574
recall class 0 = 0.988422
recall class 1 = 0.36855
false negative rate = 0.63145
false positive rate = 0.011578
positive prediction rate = 0.08252
AUC of ROC = 0.912404
AUC of PRC = 0.755049
min(+P, Se) = 0.653753

-------------------------------

confusion matrix:
[[1271   11]
 [  77   49]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10995899885892868
difference in average predicted and observed risk = 0.02046999885892868
number samples = 1408
accuracy = 0.9375
precision class 0 = 0.942878
precision class 1 = 0.816667
recall class 0 = 0.99142
recall class 1 = 0.388889
false negative rate = 0.611111
false positive rate = 0.00858
positive prediction rate = 0.042614
AUC of ROC = 0.904533
AUC of PRC = 0.62671
min(+P, Se) = 0.59542

-------------------------------

confusion matrix:
[[288   8]
 [ 32  20]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14193500578403473
difference in average predicted and observed risk = -0.007489994215965273
number samples = 348
accuracy = 0.885057
precision class 0 = 0.9
precision class 1 = 0.714286
recall class 0 = 0.972973
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.027027
positive prediction rate = 0.08046
AUC of ROC = 0.886954
AUC of PRC = 0.65469
min(+P, Se) = 0.641509

-------------------------------

confusion matrix:
[[423   6]
 [ 24  15]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10482200235128403
difference in average predicted and observed risk = 0.021489002351284023
number samples = 468
accuracy = 0.935897
precision class 0 = 0.946309
precision class 1 = 0.714286
recall class 0 = 0.986014
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.013986
positive prediction rate = 0.044872
AUC of ROC = 0.881298
AUC of PRC = 0.594491
min(+P, Se) = 0.575

-------------------------------

confusion matrix:
[[12575   119]
 [ 1353   634]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.1179639995098114
difference in average predicted and observed risk = -0.01738100049018859
number samples = 14681
accuracy = 0.899734
precision class 0 = 0.902858
precision class 1 = 0.841965
recall class 0 = 0.990626
recall class 1 = 0.319074
false negative rate = 0.680926
false positive rate = 0.009375
positive prediction rate = 0.051291
AUC of ROC = 0.902179
AUC of PRC = 0.667174
min(+P, Se) = 0.602616

-------------------------------

==>predicting on validation



confusion matrix:
[[1512   23]
 [ 201   77]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1293649971485138
difference in average predicted and observed risk = -0.023972002851486207
number samples = 1813
accuracy = 0.876448
precision class 0 = 0.882662
precision class 1 = 0.77
recall class 0 = 0.985016
recall class 1 = 0.276978
false negative rate = 0.723022
false positive rate = 0.014984
positive prediction rate = 0.055157
AUC of ROC = 0.85578
AUC of PRC = 0.583016
min(+P, Se) = 0.52518

-------------------------------

confusion matrix:
[[894  13]
 [ 88  25]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.1031780019402504
difference in average predicted and observed risk = -0.007605998059749597
number samples = 1020
accuracy = 0.90098
precision class 0 = 0.910387
precision class 1 = 0.657895
recall class 0 = 0.985667
recall class 1 = 0.221239
false negative rate = 0.778761
false positive rate = 0.014333
positive prediction rate = 0.037255
AUC of ROC = 0.857792
AUC of PRC = 0.496414
min(+P, Se) = 0.482456

-------------------------------

confusion matrix:
[[244   7]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12770499289035797
difference in average predicted and observed risk = 0.00840699289035797
number samples = 285
accuracy = 0.905263
precision class 0 = 0.924242
precision class 1 = 0.666667
recall class 0 = 0.972112
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.027888
positive prediction rate = 0.073684
AUC of ROC = 0.902039
AUC of PRC = 0.644105
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09977299720048904
difference in average predicted and observed risk = 0.01002899720048904
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.798793
AUC of PRC = 0.412583
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19122199714183807
difference in average predicted and observed risk = 0.03737599714183806
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1503   26]
 [ 177   67]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11837700009346008
difference in average predicted and observed risk = -0.01924299990653991
number samples = 1773
accuracy = 0.885505
precision class 0 = 0.894643
precision class 1 = 0.72043
recall class 0 = 0.982995
recall class 1 = 0.27459
false negative rate = 0.72541
false positive rate = 0.017005
positive prediction rate = 0.052453
AUC of ROC = 0.861776
AUC of PRC = 0.561309
min(+P, Se) = 0.512295

-------------------------------

confusion matrix:
[[1237   20]
 [ 138   54]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12356600165367126
difference in average predicted and observed risk = -0.008938998346328747
number samples = 1449
accuracy = 0.890959
precision class 0 = 0.899636
precision class 1 = 0.72973
recall class 0 = 0.984089
recall class 1 = 0.28125
false negative rate = 0.71875
false positive rate = 0.015911
positive prediction rate = 0.05107
AUC of ROC = 0.862068
AUC of PRC = 0.565686
min(+P, Se) = 0.53125

-------------------------------

confusion matrix:
[[1947   31]
 [ 229   82]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1187950000166893
difference in average predicted and observed risk = -0.017071999983310687
number samples = 2289
accuracy = 0.886413
precision class 0 = 0.894761
precision class 1 = 0.725664
recall class 0 = 0.984328
recall class 1 = 0.263666
false negative rate = 0.736334
false positive rate = 0.015672
positive prediction rate = 0.049367
AUC of ROC = 0.859157
AUC of PRC = 0.55633
min(+P, Se) = 0.508039

-------------------------------

confusion matrix:
[[362   6]
 [ 59  22]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13495400547981262
difference in average predicted and observed risk = -0.045446994520187384
number samples = 449
accuracy = 0.855234
precision class 0 = 0.859857
precision class 1 = 0.785714
recall class 0 = 0.983696
recall class 1 = 0.271605
false negative rate = 0.728395
false positive rate = 0.016304
positive prediction rate = 0.062361
AUC of ROC = 0.863023
AUC of PRC = 0.62345
min(+P, Se) = 0.566265

-------------------------------

confusion matrix:
[[273   5]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11100299656391144
difference in average predicted and observed risk = 0.013599996563911435
number samples = 308
accuracy = 0.922078
precision class 0 = 0.934932
precision class 1 = 0.6875
recall class 0 = 0.982014
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.017986
positive prediction rate = 0.051948
AUC of ROC = 0.876139
AUC of PRC = 0.548662
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10569500178098679
difference in average predicted and observed risk = 0.03353000178098678
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.869841
AUC of PRC = 0.355172
min(+P, Se) = 0.315789

-------------------------------

confusion matrix:
[[71  1]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15154999494552612
difference in average predicted and observed risk = 0.06294199494552612
number samples = 79
accuracy = 0.962025
precision class 0 = 0.972603
precision class 1 = 0.833333
recall class 0 = 0.986111
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.013889
positive prediction rate = 0.075949
AUC of ROC = 0.896825
AUC of PRC = 0.748646
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2740   46]
 [ 315  121]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12071099877357483
difference in average predicted and observed risk = -0.014609001226425167
number samples = 3222
accuracy = 0.887958
precision class 0 = 0.89689
precision class 1 = 0.724551
recall class 0 = 0.983489
recall class 1 = 0.277523
false negative rate = 0.722477
false positive rate = 0.016511
positive prediction rate = 0.051831
AUC of ROC = 0.861357
AUC of PRC = 0.56236
min(+P, Se) = 0.514806

-------------------------------

Epoch 00047: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch47.state
Epoch 48/100
 - 812s - loss: 0.2692 - val_loss: 0.2831

==>predicting on train



confusion matrix:
[[6989   47]
 [ 958  354]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.11934900283813477
difference in average predicted and observed risk = -0.03781399716186523
number samples = 8348
accuracy = 0.879612
precision class 0 = 0.879451
precision class 1 = 0.882793
recall class 0 = 0.99332
recall class 1 = 0.269817
false negative rate = 0.730183
false positive rate = 0.00668
positive prediction rate = 0.048035
AUC of ROC = 0.889666
AUC of PRC = 0.667525
min(+P, Se) = 0.593298

-------------------------------

confusion matrix:
[[3972   30]
 [ 290  181]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.09814800322055817
difference in average predicted and observed risk = -0.007149996779441836
number samples = 4473
accuracy = 0.92846
precision class 0 = 0.931957
precision class 1 = 0.85782
recall class 0 = 0.992504
recall class 1 = 0.384289
false negative rate = 0.615711
false positive rate = 0.007496
positive prediction rate = 0.047172
AUC of ROC = 0.913423
AUC of PRC = 0.676558
min(+P, Se) = 0.607219

-------------------------------

confusion matrix:
[[1184   11]
 [  90   53]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10614699870347977
difference in average predicted and observed risk = -0.0007290012965202319
number samples = 1338
accuracy = 0.924514
precision class 0 = 0.929356
precision class 1 = 0.828125
recall class 0 = 0.990795
recall class 1 = 0.370629
false negative rate = 0.629371
false positive rate = 0.009205
positive prediction rate = 0.047833
AUC of ROC = 0.91829
AUC of PRC = 0.663522
min(+P, Se) = 0.594406

-------------------------------

confusion matrix:
[[349   1]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.0947830006480217
difference in average predicted and observed risk = -0.005473999351978301
number samples = 389
accuracy = 0.940874
precision class 0 = 0.940701
precision class 1 = 0.944444
recall class 0 = 0.997143
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.002857
positive prediction rate = 0.046272
AUC of ROC = 0.908864
AUC of PRC = 0.714116
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.15756699442863464
difference in average predicted and observed risk = -0.007847005571365362
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.947584
AUC of PRC = 0.850767
min(+P, Se) = 0.772727

-------------------------------

confusion matrix:
[[6933   53]
 [ 722  351]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.10700900107622147
difference in average predicted and observed risk = -0.026133998923778545
number samples = 8059
accuracy = 0.903834
precision class 0 = 0.905683
precision class 1 = 0.868812
recall class 0 = 0.992413
recall class 1 = 0.32712
false negative rate = 0.67288
false positive rate = 0.007587
positive prediction rate = 0.05013
AUC of ROC = 0.905709
AUC of PRC = 0.67918
min(+P, Se) = 0.614525

-------------------------------

confusion matrix:
[[5670   38]
 [ 645  269]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11670400202274323
difference in average predicted and observed risk = -0.021320997977256784
number samples = 6622
accuracy = 0.896859
precision class 0 = 0.897862
precision class 1 = 0.876221
recall class 0 = 0.993343
recall class 1 = 0.294311
false negative rate = 0.705689
false positive rate = 0.006657
positive prediction rate = 0.046361
AUC of ROC = 0.894933
AUC of PRC = 0.659443
min(+P, Se) = 0.586885

-------------------------------

confusion matrix:
[[8991   55]
 [ 967  396]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.1071309968829155
difference in average predicted and observed risk = -0.023813003117084508
number samples = 10409
accuracy = 0.901816
precision class 0 = 0.902892
precision class 1 = 0.878049
recall class 0 = 0.99392
recall class 1 = 0.290536
false negative rate = 0.709464
false positive rate = 0.00608
positive prediction rate = 0.043328
AUC of ROC = 0.89884
AUC of PRC = 0.657337
min(+P, Se) = 0.587674

-------------------------------

confusion matrix:
[[1626   15]
 [ 263  144]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.13621699810028076
difference in average predicted and observed risk = -0.06251300189971923
number samples = 2048
accuracy = 0.864258
precision class 0 = 0.860773
precision class 1 = 0.90566
recall class 0 = 0.990859
recall class 1 = 0.353808
false negative rate = 0.646192
false positive rate = 0.009141
positive prediction rate = 0.077637
AUC of ROC = 0.911828
AUC of PRC = 0.755337
min(+P, Se) = 0.658477

-------------------------------

confusion matrix:
[[1272   10]
 [  79   47]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10347899794578552
difference in average predicted and observed risk = 0.013989997945785523
number samples = 1408
accuracy = 0.93679
precision class 0 = 0.941525
precision class 1 = 0.824561
recall class 0 = 0.9922
recall class 1 = 0.373016
false negative rate = 0.626984
false positive rate = 0.0078
positive prediction rate = 0.040483
AUC of ROC = 0.905752
AUC of PRC = 0.634906
min(+P, Se) = 0.619048

-------------------------------

confusion matrix:
[[289   7]
 [ 34  18]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1382090002298355
difference in average predicted and observed risk = -0.011215999770164492
number samples = 348
accuracy = 0.882184
precision class 0 = 0.894737
precision class 1 = 0.72
recall class 0 = 0.976351
recall class 1 = 0.346154
false negative rate = 0.653846
false positive rate = 0.023649
positive prediction rate = 0.071839
AUC of ROC = 0.881627
AUC of PRC = 0.644715
min(+P, Se) = 0.603774

-------------------------------

confusion matrix:
[[425   4]
 [ 24  15]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10105899721384048
difference in average predicted and observed risk = 0.01772599721384048
number samples = 468
accuracy = 0.940171
precision class 0 = 0.946548
precision class 1 = 0.789474
recall class 0 = 0.990676
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.009324
positive prediction rate = 0.040598
AUC of ROC = 0.876935
AUC of PRC = 0.596218
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[12603    91]
 [ 1367   620]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11138200014829636
difference in average predicted and observed risk = -0.023962999851703637
number samples = 14681
accuracy = 0.900688
precision class 0 = 0.902147
precision class 1 = 0.872011
recall class 0 = 0.992831
recall class 1 = 0.312028
false negative rate = 0.687972
false positive rate = 0.007169
positive prediction rate = 0.04843
AUC of ROC = 0.900745
AUC of PRC = 0.669852
min(+P, Se) = 0.599095

-------------------------------

==>predicting on validation



confusion matrix:
[[1512   23]
 [ 199   79]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1230740025639534
difference in average predicted and observed risk = -0.0302629974360466
number samples = 1813
accuracy = 0.877551
precision class 0 = 0.883694
precision class 1 = 0.77451
recall class 0 = 0.985016
recall class 1 = 0.284173
false negative rate = 0.715827
false positive rate = 0.014984
positive prediction rate = 0.05626
AUC of ROC = 0.85649
AUC of PRC = 0.585553
min(+P, Se) = 0.546763

-------------------------------

confusion matrix:
[[895  12]
 [ 91  22]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.0964059978723526
difference in average predicted and observed risk = -0.014378002127647393
number samples = 1020
accuracy = 0.89902
precision class 0 = 0.907708
precision class 1 = 0.647059
recall class 0 = 0.98677
recall class 1 = 0.19469
false negative rate = 0.80531
false positive rate = 0.01323
positive prediction rate = 0.033333
AUC of ROC = 0.850806
AUC of PRC = 0.481295
min(+P, Se) = 0.469027

-------------------------------

confusion matrix:
[[245   6]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.11998900026082993
difference in average predicted and observed risk = 0.0006910002608299243
number samples = 285
accuracy = 0.912281
precision class 0 = 0.92803
precision class 1 = 0.714286
recall class 0 = 0.976096
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.023904
positive prediction rate = 0.073684
AUC of ROC = 0.893485
AUC of PRC = 0.658755
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.0846410021185875
difference in average predicted and observed risk = -0.00510299788141251
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.796781
AUC of PRC = 0.427321
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17348900437355042
difference in average predicted and observed risk = 0.019643004373550405
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1503   26]
 [ 177   67]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11107199639081955
difference in average predicted and observed risk = -0.026548003609180443
number samples = 1773
accuracy = 0.885505
precision class 0 = 0.894643
precision class 1 = 0.72043
recall class 0 = 0.982995
recall class 1 = 0.27459
false negative rate = 0.72541
false positive rate = 0.017005
positive prediction rate = 0.052453
AUC of ROC = 0.859366
AUC of PRC = 0.55812
min(+P, Se) = 0.516393

-------------------------------

confusion matrix:
[[1239   18]
 [ 138   54]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11721599847078323
difference in average predicted and observed risk = -0.015289001529216778
number samples = 1449
accuracy = 0.89234
precision class 0 = 0.899782
precision class 1 = 0.75
recall class 0 = 0.98568
recall class 1 = 0.28125
false negative rate = 0.71875
false positive rate = 0.01432
positive prediction rate = 0.049689
AUC of ROC = 0.860784
AUC of PRC = 0.570162
min(+P, Se) = 0.53125

-------------------------------

confusion matrix:
[[1949   29]
 [ 227   84]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11163199692964554
difference in average predicted and observed risk = -0.02423500307035445
number samples = 2289
accuracy = 0.888161
precision class 0 = 0.89568
precision class 1 = 0.743363
recall class 0 = 0.985339
recall class 1 = 0.270096
false negative rate = 0.729904
false positive rate = 0.014661
positive prediction rate = 0.049367
AUC of ROC = 0.854964
AUC of PRC = 0.554004
min(+P, Se) = 0.524116

-------------------------------

confusion matrix:
[[361   7]
 [ 59  22]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.12998899817466736
difference in average predicted and observed risk = -0.05041200182533265
number samples = 449
accuracy = 0.853007
precision class 0 = 0.859524
precision class 1 = 0.758621
recall class 0 = 0.980978
recall class 1 = 0.271605
false negative rate = 0.728395
false positive rate = 0.019022
positive prediction rate = 0.064588
AUC of ROC = 0.866781
AUC of PRC = 0.626187
min(+P, Se) = 0.573034

-------------------------------

confusion matrix:
[[274   4]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10142000019550323
difference in average predicted and observed risk = 0.004017000195503231
number samples = 308
accuracy = 0.918831
precision class 0 = 0.928814
precision class 1 = 0.692308
recall class 0 = 0.985611
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.014388
positive prediction rate = 0.042208
AUC of ROC = 0.882494
AUC of PRC = 0.554467
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10269500315189362
difference in average predicted and observed risk = 0.03053000315189361
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.873016
AUC of PRC = 0.36127
min(+P, Se) = 0.315789

-------------------------------

confusion matrix:
[[71  1]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14792999625205994
difference in average predicted and observed risk = 0.05932199625205993
number samples = 79
accuracy = 0.962025
precision class 0 = 0.972603
precision class 1 = 0.833333
recall class 0 = 0.986111
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.013889
positive prediction rate = 0.075949
AUC of ROC = 0.880952
AUC of PRC = 0.746225
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2742   44]
 [ 315  121]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11383499950170517
difference in average predicted and observed risk = -0.021485000498294826
number samples = 3222
accuracy = 0.888579
precision class 0 = 0.896958
precision class 1 = 0.733333
recall class 0 = 0.984207
recall class 1 = 0.277523
false negative rate = 0.722477
false positive rate = 0.015793
positive prediction rate = 0.05121
AUC of ROC = 0.859501
AUC of PRC = 0.562787
min(+P, Se) = 0.522026

-------------------------------

Epoch 00048: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch48.state
Epoch 49/100
 - 812s - loss: 0.2704 - val_loss: 0.2781

==>predicting on train



confusion matrix:
[[6977   59]
 [ 939  373]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13194799423217773
difference in average predicted and observed risk = -0.025215005767822263
number samples = 8348
accuracy = 0.88045
precision class 0 = 0.881379
precision class 1 = 0.863426
recall class 0 = 0.991615
recall class 1 = 0.284299
false negative rate = 0.715701
false positive rate = 0.008385
positive prediction rate = 0.051749
AUC of ROC = 0.893998
AUC of PRC = 0.676324
min(+P, Se) = 0.60274

-------------------------------

confusion matrix:
[[3972   30]
 [ 276  195]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10809800028800964
difference in average predicted and observed risk = 0.002800000288009641
number samples = 4473
accuracy = 0.93159
precision class 0 = 0.935028
precision class 1 = 0.866667
recall class 0 = 0.992504
recall class 1 = 0.414013
false negative rate = 0.585987
false positive rate = 0.007496
positive prediction rate = 0.050302
AUC of ROC = 0.92027
AUC of PRC = 0.688779
min(+P, Se) = 0.612632

-------------------------------

confusion matrix:
[[1183   12]
 [  88   55]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11512400209903717
difference in average predicted and observed risk = 0.008248002099037172
number samples = 1338
accuracy = 0.925262
precision class 0 = 0.930763
precision class 1 = 0.820895
recall class 0 = 0.989958
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.010042
positive prediction rate = 0.050075
AUC of ROC = 0.920022
AUC of PRC = 0.663706
min(+P, Se) = 0.622378

-------------------------------

confusion matrix:
[[349   1]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10266800224781036
difference in average predicted and observed risk = 0.002411002247810365
number samples = 389
accuracy = 0.940874
precision class 0 = 0.940701
precision class 1 = 0.944444
recall class 0 = 0.997143
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.002857
positive prediction rate = 0.046272
AUC of ROC = 0.928425
AUC of PRC = 0.745317
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16919299960136414
difference in average predicted and observed risk = 0.0037789996013641303
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.95905
AUC of PRC = 0.861964
min(+P, Se) = 0.772727

-------------------------------

confusion matrix:
[[6925   61]
 [ 696  377]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11814499646425247
difference in average predicted and observed risk = -0.01499800353574754
number samples = 8059
accuracy = 0.906068
precision class 0 = 0.908673
precision class 1 = 0.860731
recall class 0 = 0.991268
recall class 1 = 0.351351
false negative rate = 0.648649
false positive rate = 0.008732
positive prediction rate = 0.054349
AUC of ROC = 0.911449
AUC of PRC = 0.692467
min(+P, Se) = 0.626281

-------------------------------

confusion matrix:
[[5665   43]
 [ 636  278]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12826399505138397
difference in average predicted and observed risk = -0.009761004948616037
number samples = 6622
accuracy = 0.897463
precision class 0 = 0.899064
precision class 1 = 0.866044
recall class 0 = 0.992467
recall class 1 = 0.304158
false negative rate = 0.695842
false positive rate = 0.007533
positive prediction rate = 0.048475
AUC of ROC = 0.900306
AUC of PRC = 0.664281
min(+P, Se) = 0.591904

-------------------------------

confusion matrix:
[[8980   66]
 [ 944  419]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11927500367164612
difference in average predicted and observed risk = -0.011668996328353887
number samples = 10409
accuracy = 0.902969
precision class 0 = 0.904877
precision class 1 = 0.863918
recall class 0 = 0.992704
recall class 1 = 0.30741
false negative rate = 0.69259
false positive rate = 0.007296
positive prediction rate = 0.046594
AUC of ROC = 0.903943
AUC of PRC = 0.666393
min(+P, Se) = 0.598679

-------------------------------

confusion matrix:
[[1625   16]
 [ 258  149]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14643999934196472
difference in average predicted and observed risk = -0.05229000065803527
number samples = 2048
accuracy = 0.866211
precision class 0 = 0.862985
precision class 1 = 0.90303
recall class 0 = 0.99025
recall class 1 = 0.366093
false negative rate = 0.633907
false positive rate = 0.00975
positive prediction rate = 0.080566
AUC of ROC = 0.917741
AUC of PRC = 0.762044
min(+P, Se) = 0.661017

-------------------------------

confusion matrix:
[[1274    8]
 [  74   52]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11283399909734726
difference in average predicted and observed risk = 0.02334499909734726
number samples = 1408
accuracy = 0.941761
precision class 0 = 0.945104
precision class 1 = 0.866667
recall class 0 = 0.99376
recall class 1 = 0.412698
false negative rate = 0.587302
false positive rate = 0.00624
positive prediction rate = 0.042614
AUC of ROC = 0.907894
AUC of PRC = 0.640905
min(+P, Se) = 0.59542

-------------------------------

confusion matrix:
[[286  10]
 [ 34  18]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14472900331020355
difference in average predicted and observed risk = -0.00469599668979645
number samples = 348
accuracy = 0.873563
precision class 0 = 0.89375
precision class 1 = 0.642857
recall class 0 = 0.966216
recall class 1 = 0.346154
false negative rate = 0.653846
false positive rate = 0.033784
positive prediction rate = 0.08046
AUC of ROC = 0.887799
AUC of PRC = 0.658926
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[425   4]
 [ 22  17]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10859400033950806
difference in average predicted and observed risk = 0.025261000339508052
number samples = 468
accuracy = 0.944444
precision class 0 = 0.950783
precision class 1 = 0.809524
recall class 0 = 0.990676
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.009324
positive prediction rate = 0.044872
AUC of ROC = 0.897735
AUC of PRC = 0.611698
min(+P, Se) = 0.575

-------------------------------

confusion matrix:
[[12590   104]
 [ 1332   655]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.1227089986205101
difference in average predicted and observed risk = -0.012636001379489892
number samples = 14681
accuracy = 0.902187
precision class 0 = 0.904324
precision class 1 = 0.862978
recall class 0 = 0.991807
recall class 1 = 0.329643
false negative rate = 0.670357
false positive rate = 0.008193
positive prediction rate = 0.051699
AUC of ROC = 0.906329
AUC of PRC = 0.679404
min(+P, Se) = 0.609965

-------------------------------

==>predicting on validation



confusion matrix:
[[1509   26]
 [ 199   79]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13670499622821808
difference in average predicted and observed risk = -0.016632003771781922
number samples = 1813
accuracy = 0.875896
precision class 0 = 0.883489
precision class 1 = 0.752381
recall class 0 = 0.983062
recall class 1 = 0.284173
false negative rate = 0.715827
false positive rate = 0.016938
positive prediction rate = 0.057915
AUC of ROC = 0.854477
AUC of PRC = 0.581132
min(+P, Se) = 0.528777

-------------------------------

confusion matrix:
[[896  11]
 [ 89  24]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10690899938344955
difference in average predicted and observed risk = -0.003875000616550439
number samples = 1020
accuracy = 0.901961
precision class 0 = 0.909645
precision class 1 = 0.685714
recall class 0 = 0.987872
recall class 1 = 0.212389
false negative rate = 0.787611
false positive rate = 0.012128
positive prediction rate = 0.034314
AUC of ROC = 0.861734
AUC of PRC = 0.519293
min(+P, Se) = 0.513274

-------------------------------

confusion matrix:
[[243   8]
 [ 18  16]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13486799597740173
difference in average predicted and observed risk = 0.015569995977401732
number samples = 285
accuracy = 0.908772
precision class 0 = 0.931035
precision class 1 = 0.666667
recall class 0 = 0.968127
recall class 1 = 0.470588
false negative rate = 0.529412
false positive rate = 0.031873
positive prediction rate = 0.084211
AUC of ROC = 0.902859
AUC of PRC = 0.656279
min(+P, Se) = 0.617647

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09730199724435806
difference in average predicted and observed risk = 0.007557997244358058
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.832998
AUC of PRC = 0.453786
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[20  2]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19678500294685364
difference in average predicted and observed risk = 0.04293900294685363
number samples = 26
accuracy = 0.923077
precision class 0 = 1.0
precision class 1 = 0.666667
recall class 0 = 0.909091
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.090909
positive prediction rate = 0.230769
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1498   31]
 [ 171   73]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1250540018081665
difference in average predicted and observed risk = -0.012565998191833488
number samples = 1773
accuracy = 0.886069
precision class 0 = 0.897543
precision class 1 = 0.701923
recall class 0 = 0.979725
recall class 1 = 0.29918
false negative rate = 0.70082
false positive rate = 0.020275
positive prediction rate = 0.058658
AUC of ROC = 0.861854
AUC of PRC = 0.563589
min(+P, Se) = 0.518367

-------------------------------

confusion matrix:
[[1239   18]
 [ 141   51]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12858200073242188
difference in average predicted and observed risk = -0.003922999267578137
number samples = 1449
accuracy = 0.890269
precision class 0 = 0.897826
precision class 1 = 0.73913
recall class 0 = 0.98568
recall class 1 = 0.265625
false negative rate = 0.734375
false positive rate = 0.01432
positive prediction rate = 0.047619
AUC of ROC = 0.866116
AUC of PRC = 0.582838
min(+P, Se) = 0.536458

-------------------------------

confusion matrix:
[[1945   33]
 [ 225   86]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12478099763393402
difference in average predicted and observed risk = -0.011086002366065967
number samples = 2289
accuracy = 0.887287
precision class 0 = 0.896313
precision class 1 = 0.722689
recall class 0 = 0.983316
recall class 1 = 0.276527
false negative rate = 0.723473
false positive rate = 0.016684
positive prediction rate = 0.051988
AUC of ROC = 0.8589
AUC of PRC = 0.564864
min(+P, Se) = 0.524116

-------------------------------

confusion matrix:
[[360   8]
 [ 59  22]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1415559947490692
difference in average predicted and observed risk = -0.03884500525093079
number samples = 449
accuracy = 0.85078
precision class 0 = 0.859189
precision class 1 = 0.733333
recall class 0 = 0.978261
recall class 1 = 0.271605
false negative rate = 0.728395
false positive rate = 0.021739
positive prediction rate = 0.066815
AUC of ROC = 0.868089
AUC of PRC = 0.632566
min(+P, Se) = 0.554217

-------------------------------

confusion matrix:
[[274   4]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11639600247144699
difference in average predicted and observed risk = 0.018993002471446988
number samples = 308
accuracy = 0.922078
precision class 0 = 0.931973
precision class 1 = 0.714286
recall class 0 = 0.985611
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.014388
positive prediction rate = 0.045455
AUC of ROC = 0.882494
AUC of PRC = 0.557787
min(+P, Se) = 0.548387

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11053700000047684
difference in average predicted and observed risk = 0.03837200000047683
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.887302
AUC of PRC = 0.361219
min(+P, Se) = 0.307692

-------------------------------

confusion matrix:
[[71  1]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15546800196170807
difference in average predicted and observed risk = 0.06686000196170806
number samples = 79
accuracy = 0.962025
precision class 0 = 0.972603
precision class 1 = 0.833333
recall class 0 = 0.986111
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.013889
positive prediction rate = 0.075949
AUC of ROC = 0.892857
AUC of PRC = 0.755519
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2737   49]
 [ 312  124]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12664100527763367
difference in average predicted and observed risk = -0.008678994722366329
number samples = 3222
accuracy = 0.887958
precision class 0 = 0.897671
precision class 1 = 0.716763
recall class 0 = 0.982412
recall class 1 = 0.284404
false negative rate = 0.715596
false positive rate = 0.017588
positive prediction rate = 0.053693
AUC of ROC = 0.862826
AUC of PRC = 0.570158
min(+P, Se) = 0.522936

-------------------------------

Epoch 00049: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch49.state
Epoch 50/100
 - 812s - loss: 0.2664 - val_loss: 0.2790

==>predicting on train



confusion matrix:
[[6981   55]
 [ 950  362]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12490200251340866
difference in average predicted and observed risk = -0.032260997486591336
number samples = 8348
accuracy = 0.879612
precision class 0 = 0.880217
precision class 1 = 0.868106
recall class 0 = 0.992183
recall class 1 = 0.275915
false negative rate = 0.724085
false positive rate = 0.007817
positive prediction rate = 0.049952
AUC of ROC = 0.893994
AUC of PRC = 0.674342
min(+P, Se) = 0.602134

-------------------------------

confusion matrix:
[[3960   42]
 [ 272  199]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10244599729776382
difference in average predicted and observed risk = -0.0028520027022361782
number samples = 4473
accuracy = 0.929801
precision class 0 = 0.935728
precision class 1 = 0.825726
recall class 0 = 0.989505
recall class 1 = 0.422505
false negative rate = 0.577495
false positive rate = 0.010495
positive prediction rate = 0.053879
AUC of ROC = 0.918951
AUC of PRC = 0.688399
min(+P, Se) = 0.607966

-------------------------------

confusion matrix:
[[1184   11]
 [  87   56]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10929100215435028
difference in average predicted and observed risk = 0.002415002154350282
number samples = 1338
accuracy = 0.926756
precision class 0 = 0.93155
precision class 1 = 0.835821
recall class 0 = 0.990795
recall class 1 = 0.391608
false negative rate = 0.608392
false positive rate = 0.009205
positive prediction rate = 0.050075
AUC of ROC = 0.922123
AUC of PRC = 0.673147
min(+P, Se) = 0.622378

-------------------------------

confusion matrix:
[[349   1]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09599699825048447
difference in average predicted and observed risk = -0.004260001749515532
number samples = 389
accuracy = 0.940874
precision class 0 = 0.940701
precision class 1 = 0.944444
recall class 0 = 0.997143
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.002857
positive prediction rate = 0.046272
AUC of ROC = 0.924762
AUC of PRC = 0.721793
min(+P, Se) = 0.7

-------------------------------

confusion matrix:
[[109   2]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1570570021867752
difference in average predicted and observed risk = -0.008356997813224798
number samples = 133
accuracy = 0.924812
precision class 0 = 0.931624
precision class 1 = 0.875
recall class 0 = 0.981982
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.018018
positive prediction rate = 0.120301
AUC of ROC = 0.951269
AUC of PRC = 0.854013
min(+P, Se) = 0.772727

-------------------------------

confusion matrix:
[[6922   64]
 [ 708  365]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11157400161027908
difference in average predicted and observed risk = -0.021568998389720928
number samples = 8059
accuracy = 0.904206
precision class 0 = 0.907208
precision class 1 = 0.850816
recall class 0 = 0.990839
recall class 1 = 0.340168
false negative rate = 0.659832
false positive rate = 0.009161
positive prediction rate = 0.053232
AUC of ROC = 0.910543
AUC of PRC = 0.688199
min(+P, Se) = 0.622554

-------------------------------

confusion matrix:
[[5661   47]
 [ 631  283]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12174700200557709
difference in average predicted and observed risk = -0.01627799799442292
number samples = 6622
accuracy = 0.897614
precision class 0 = 0.899714
precision class 1 = 0.857576
recall class 0 = 0.991766
recall class 1 = 0.309628
false negative rate = 0.690372
false positive rate = 0.008234
positive prediction rate = 0.049834
AUC of ROC = 0.900498
AUC of PRC = 0.665256
min(+P, Se) = 0.586433

-------------------------------

confusion matrix:
[[8972   74]
 [ 952  411]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11208199709653854
difference in average predicted and observed risk = -0.01886200290346146
number samples = 10409
accuracy = 0.901431
precision class 0 = 0.904071
precision class 1 = 0.847423
recall class 0 = 0.99182
recall class 1 = 0.301541
false negative rate = 0.698459
false positive rate = 0.00818
positive prediction rate = 0.046594
AUC of ROC = 0.90428
AUC of PRC = 0.665807
min(+P, Se) = 0.595011

-------------------------------

confusion matrix:
[[1625   16]
 [ 256  151]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14177000522613525
difference in average predicted and observed risk = -0.056959994773864736
number samples = 2048
accuracy = 0.867188
precision class 0 = 0.863902
precision class 1 = 0.904192
recall class 0 = 0.99025
recall class 1 = 0.371007
false negative rate = 0.628993
false positive rate = 0.00975
positive prediction rate = 0.081543
AUC of ROC = 0.915634
AUC of PRC = 0.759437
min(+P, Se) = 0.669118

-------------------------------

confusion matrix:
[[1272   10]
 [  73   53]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.1077290028333664
difference in average predicted and observed risk = 0.018240002833366395
number samples = 1408
accuracy = 0.941051
precision class 0 = 0.945725
precision class 1 = 0.84127
recall class 0 = 0.9922
recall class 1 = 0.420635
false negative rate = 0.579365
false positive rate = 0.0078
positive prediction rate = 0.044744
AUC of ROC = 0.909591
AUC of PRC = 0.646482
min(+P, Se) = 0.619048

-------------------------------

confusion matrix:
[[289   7]
 [ 35  17]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14066000282764435
difference in average predicted and observed risk = -0.008764997172355654
number samples = 348
accuracy = 0.87931
precision class 0 = 0.891975
precision class 1 = 0.708333
recall class 0 = 0.976351
recall class 1 = 0.326923
false negative rate = 0.673077
false positive rate = 0.023649
positive prediction rate = 0.068966
AUC of ROC = 0.88611
AUC of PRC = 0.652258
min(+P, Se) = 0.634615

-------------------------------

confusion matrix:
[[425   4]
 [ 23  16]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10202500224113464
difference in average predicted and observed risk = 0.01869200224113464
number samples = 468
accuracy = 0.942308
precision class 0 = 0.948661
precision class 1 = 0.8
recall class 0 = 0.990676
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.009324
positive prediction rate = 0.042735
AUC of ROC = 0.889785
AUC of PRC = 0.592271
min(+P, Se) = 0.538462

-------------------------------

confusion matrix:
[[12583   111]
 [ 1339   648]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11616300046443939
difference in average predicted and observed risk = -0.0191819995355606
number samples = 14681
accuracy = 0.901233
precision class 0 = 0.903821
precision class 1 = 0.853755
recall class 0 = 0.991256
recall class 1 = 0.32612
false negative rate = 0.67388
false positive rate = 0.008744
positive prediction rate = 0.051699
AUC of ROC = 0.905909
AUC of PRC = 0.677702
min(+P, Se) = 0.607448

-------------------------------

==>predicting on validation



confusion matrix:
[[1508   27]
 [ 201   77]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1283549964427948
difference in average predicted and observed risk = -0.0249820035572052
number samples = 1813
accuracy = 0.874242
precision class 0 = 0.882387
precision class 1 = 0.740385
recall class 0 = 0.98241
recall class 1 = 0.276978
false negative rate = 0.723022
false positive rate = 0.01759
positive prediction rate = 0.057363
AUC of ROC = 0.855136
AUC of PRC = 0.588695
min(+P, Se) = 0.540925

-------------------------------

confusion matrix:
[[894  13]
 [ 88  25]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10258200019598007
difference in average predicted and observed risk = -0.008201999804019922
number samples = 1020
accuracy = 0.90098
precision class 0 = 0.910387
precision class 1 = 0.657895
recall class 0 = 0.985667
recall class 1 = 0.221239
false negative rate = 0.778761
false positive rate = 0.014333
positive prediction rate = 0.037255
AUC of ROC = 0.860329
AUC of PRC = 0.504708
min(+P, Se) = 0.491803

-------------------------------

confusion matrix:
[[243   8]
 [ 18  16]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12994499504566193
difference in average predicted and observed risk = 0.010646995045661925
number samples = 285
accuracy = 0.908772
precision class 0 = 0.931035
precision class 1 = 0.666667
recall class 0 = 0.968127
recall class 1 = 0.470588
false negative rate = 0.529412
false positive rate = 0.031873
positive prediction rate = 0.084211
AUC of ROC = 0.910007
AUC of PRC = 0.675229
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08943100273609161
difference in average predicted and observed risk = -0.00031299726390839056
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.818913
AUC of PRC = 0.420824
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17742200195789337
difference in average predicted and observed risk = 0.02357600195789336
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1496   33]
 [ 173   71]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11802999675273895
difference in average predicted and observed risk = -0.01959000324726104
number samples = 1773
accuracy = 0.883813
precision class 0 = 0.896345
precision class 1 = 0.682692
recall class 0 = 0.978417
recall class 1 = 0.290984
false negative rate = 0.709016
false positive rate = 0.021583
positive prediction rate = 0.058658
AUC of ROC = 0.863272
AUC of PRC = 0.564135
min(+P, Se) = 0.532787

-------------------------------

confusion matrix:
[[1239   18]
 [ 140   52]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12194299697875977
difference in average predicted and observed risk = -0.010562003021240246
number samples = 1449
accuracy = 0.890959
precision class 0 = 0.898477
precision class 1 = 0.742857
recall class 0 = 0.98568
recall class 1 = 0.270833
false negative rate = 0.729167
false positive rate = 0.01432
positive prediction rate = 0.048309
AUC of ROC = 0.864998
AUC of PRC = 0.579386
min(+P, Se) = 0.541667

-------------------------------

confusion matrix:
[[1943   35]
 [ 227   84]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11784300208091736
difference in average predicted and observed risk = -0.01802399791908263
number samples = 2289
accuracy = 0.88554
precision class 0 = 0.895392
precision class 1 = 0.705882
recall class 0 = 0.982305
recall class 1 = 0.270096
false negative rate = 0.729904
false positive rate = 0.017695
positive prediction rate = 0.051988
AUC of ROC = 0.858901
AUC of PRC = 0.563111
min(+P, Se) = 0.528662

-------------------------------

confusion matrix:
[[359   9]
 [ 56  25]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1366499960422516
difference in average predicted and observed risk = -0.04375100395774842
number samples = 449
accuracy = 0.855234
precision class 0 = 0.86506
precision class 1 = 0.735294
recall class 0 = 0.975543
recall class 1 = 0.308642
false negative rate = 0.691358
false positive rate = 0.024457
positive prediction rate = 0.075724
AUC of ROC = 0.868324
AUC of PRC = 0.642095
min(+P, Se) = 0.580247

-------------------------------

confusion matrix:
[[274   4]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10853099822998047
difference in average predicted and observed risk = 0.011127998229980465
number samples = 308
accuracy = 0.918831
precision class 0 = 0.928814
precision class 1 = 0.692308
recall class 0 = 0.985611
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.014388
positive prediction rate = 0.042208
AUC of ROC = 0.883573
AUC of PRC = 0.505211
min(+P, Se) = 0.566667

-------------------------------

confusion matrix:
[[88  2]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10028500109910965
difference in average predicted and observed risk = 0.028120001099109643
number samples = 97
accuracy = 0.917526
precision class 0 = 0.93617
precision class 1 = 0.333333
recall class 0 = 0.977778
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.022222
positive prediction rate = 0.030928
AUC of ROC = 0.880952
AUC of PRC = 0.366291
min(+P, Se) = 0.357143

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14821800589561462
difference in average predicted and observed risk = 0.05961000589561462
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.896825
AUC of PRC = 0.748646
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2735   51]
 [ 313  123]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11979000270366669
difference in average predicted and observed risk = -0.015529997296333309
number samples = 3222
accuracy = 0.887027
precision class 0 = 0.89731
precision class 1 = 0.706897
recall class 0 = 0.981694
recall class 1 = 0.28211
false negative rate = 0.71789
false positive rate = 0.018306
positive prediction rate = 0.054004
AUC of ROC = 0.863218
AUC of PRC = 0.569608
min(+P, Se) = 0.534247

-------------------------------

Epoch 00050: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch50.state
Epoch 51/100
 - 814s - loss: 0.2735 - val_loss: 0.2817

==>predicting on train



confusion matrix:
[[6986   50]
 [ 963  349]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.11900600045919418
difference in average predicted and observed risk = -0.038156999540805814
number samples = 8348
accuracy = 0.878654
precision class 0 = 0.878853
precision class 1 = 0.874687
recall class 0 = 0.992894
recall class 1 = 0.266006
false negative rate = 0.733994
false positive rate = 0.007106
positive prediction rate = 0.047796
AUC of ROC = 0.896597
AUC of PRC = 0.679757
min(+P, Se) = 0.611577

-------------------------------

confusion matrix:
[[3963   39]
 [ 281  190]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.1013450026512146
difference in average predicted and observed risk = -0.003952997348785403
number samples = 4473
accuracy = 0.92846
precision class 0 = 0.933789
precision class 1 = 0.829694
recall class 0 = 0.990255
recall class 1 = 0.403397
false negative rate = 0.596603
false positive rate = 0.009745
positive prediction rate = 0.051196
AUC of ROC = 0.91686
AUC of PRC = 0.678858
min(+P, Se) = 0.594937

-------------------------------

confusion matrix:
[[1184   11]
 [  85   58]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10818199813365936
difference in average predicted and observed risk = 0.001305998133659364
number samples = 1338
accuracy = 0.928251
precision class 0 = 0.933018
precision class 1 = 0.84058
recall class 0 = 0.990795
recall class 1 = 0.405594
false negative rate = 0.594406
false positive rate = 0.009205
positive prediction rate = 0.05157
AUC of ROC = 0.923299
AUC of PRC = 0.694155
min(+P, Se) = 0.597222

-------------------------------

confusion matrix:
[[348   2]
 [ 23  16]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09896700084209442
difference in average predicted and observed risk = -0.0012899991579055775
number samples = 389
accuracy = 0.935733
precision class 0 = 0.938005
precision class 1 = 0.888889
recall class 0 = 0.994286
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.005714
positive prediction rate = 0.046272
AUC of ROC = 0.917729
AUC of PRC = 0.694345
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[109   2]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1582079976797104
difference in average predicted and observed risk = -0.007206002320289617
number samples = 133
accuracy = 0.924812
precision class 0 = 0.931624
precision class 1 = 0.875
recall class 0 = 0.981982
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.018018
positive prediction rate = 0.120301
AUC of ROC = 0.953317
AUC of PRC = 0.85824
min(+P, Se) = 0.772727

-------------------------------

confusion matrix:
[[6929   57]
 [ 725  348]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.10816600173711777
difference in average predicted and observed risk = -0.024976998262882244
number samples = 8059
accuracy = 0.902966
precision class 0 = 0.905278
precision class 1 = 0.859259
recall class 0 = 0.991841
recall class 1 = 0.324324
false negative rate = 0.675676
false positive rate = 0.008159
positive prediction rate = 0.050254
AUC of ROC = 0.911925
AUC of PRC = 0.689337
min(+P, Se) = 0.617894

-------------------------------

confusion matrix:
[[5661   47]
 [ 635  279]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11769100278615952
difference in average predicted and observed risk = -0.020333997213840493
number samples = 6622
accuracy = 0.89701
precision class 0 = 0.899142
precision class 1 = 0.855828
recall class 0 = 0.991766
recall class 1 = 0.305252
false negative rate = 0.694748
false positive rate = 0.008234
positive prediction rate = 0.04923
AUC of ROC = 0.899161
AUC of PRC = 0.664449
min(+P, Se) = 0.589716

-------------------------------

confusion matrix:
[[8981   65]
 [ 964  399]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.1084970012307167
difference in average predicted and observed risk = -0.0224469987692833
number samples = 10409
accuracy = 0.901143
precision class 0 = 0.903067
precision class 1 = 0.859914
recall class 0 = 0.992814
recall class 1 = 0.292737
false negative rate = 0.707263
false positive rate = 0.007185
positive prediction rate = 0.044577
AUC of ROC = 0.904094
AUC of PRC = 0.663777
min(+P, Se) = 0.595745

-------------------------------

confusion matrix:
[[1622   19]
 [ 260  147]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.13717499375343323
difference in average predicted and observed risk = -0.06155500624656676
number samples = 2048
accuracy = 0.86377
precision class 0 = 0.861849
precision class 1 = 0.885542
recall class 0 = 0.988422
recall class 1 = 0.361179
false negative rate = 0.638821
false positive rate = 0.011578
positive prediction rate = 0.081055
AUC of ROC = 0.915183
AUC of PRC = 0.759303
min(+P, Se) = 0.658477

-------------------------------

confusion matrix:
[[1272   10]
 [  78   48]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10273700207471848
difference in average predicted and observed risk = 0.013248002074718476
number samples = 1408
accuracy = 0.9375
precision class 0 = 0.942222
precision class 1 = 0.827586
recall class 0 = 0.9922
recall class 1 = 0.380952
false negative rate = 0.619048
false positive rate = 0.0078
positive prediction rate = 0.041193
AUC of ROC = 0.909888
AUC of PRC = 0.634168
min(+P, Se) = 0.573643

-------------------------------

confusion matrix:
[[290   6]
 [ 33  19]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.13896900415420532
difference in average predicted and observed risk = -0.01045599584579468
number samples = 348
accuracy = 0.887931
precision class 0 = 0.897833
precision class 1 = 0.76
recall class 0 = 0.97973
recall class 1 = 0.365385
false negative rate = 0.634615
false positive rate = 0.02027
positive prediction rate = 0.071839
AUC of ROC = 0.895985
AUC of PRC = 0.681519
min(+P, Se) = 0.634615

-------------------------------

confusion matrix:
[[425   4]
 [ 25  14]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10207200050354004
difference in average predicted and observed risk = 0.018739000503540035
number samples = 468
accuracy = 0.938034
precision class 0 = 0.944444
precision class 1 = 0.777778
recall class 0 = 0.990676
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.009324
positive prediction rate = 0.038462
AUC of ROC = 0.897077
AUC of PRC = 0.637002
min(+P, Se) = 0.589744

-------------------------------

confusion matrix:
[[12590   104]
 [ 1360   627]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11246199905872345
difference in average predicted and observed risk = -0.022883000941276543
number samples = 14681
accuracy = 0.900279
precision class 0 = 0.902509
precision class 1 = 0.857729
recall class 0 = 0.991807
recall class 1 = 0.315551
false negative rate = 0.684449
false positive rate = 0.008193
positive prediction rate = 0.049792
AUC of ROC = 0.906182
AUC of PRC = 0.677959
min(+P, Se) = 0.603119

-------------------------------

==>predicting on validation



confusion matrix:
[[1513   22]
 [ 207   71]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12229199707508087
difference in average predicted and observed risk = -0.03104500292491913
number samples = 1813
accuracy = 0.87369
precision class 0 = 0.879651
precision class 1 = 0.763441
recall class 0 = 0.985668
recall class 1 = 0.255396
false negative rate = 0.744604
false positive rate = 0.014332
positive prediction rate = 0.051296
AUC of ROC = 0.853212
AUC of PRC = 0.590685
min(+P, Se) = 0.53125

-------------------------------

confusion matrix:
[[889  18]
 [ 89  24]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10175999999046326
difference in average predicted and observed risk = -0.009024000009536737
number samples = 1020
accuracy = 0.895098
precision class 0 = 0.908998
precision class 1 = 0.571429
recall class 0 = 0.980154
recall class 1 = 0.212389
false negative rate = 0.787611
false positive rate = 0.019846
positive prediction rate = 0.041176
AUC of ROC = 0.856865
AUC of PRC = 0.47908
min(+P, Se) = 0.45614

-------------------------------

confusion matrix:
[[244   7]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12305500358343124
difference in average predicted and observed risk = 0.0037570035834312426
number samples = 285
accuracy = 0.905263
precision class 0 = 0.924242
precision class 1 = 0.666667
recall class 0 = 0.972112
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.027888
positive prediction rate = 0.073684
AUC of ROC = 0.904265
AUC of PRC = 0.654257
min(+P, Se) = 0.611111

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08660700172185898
difference in average predicted and observed risk = -0.003136998278141026
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.808853
AUC of PRC = 0.407629
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[20  2]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1911180019378662
difference in average predicted and observed risk = 0.0372720019378662
number samples = 26
accuracy = 0.923077
precision class 0 = 1.0
precision class 1 = 0.666667
recall class 0 = 0.909091
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.090909
positive prediction rate = 0.230769
AUC of ROC = 0.954545
AUC of PRC = 0.73125
min(+P, Se) = 0.75

-------------------------------

confusion matrix:
[[1496   33]
 [ 179   65]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11320500075817108
difference in average predicted and observed risk = -0.02441499924182891
number samples = 1773
accuracy = 0.880429
precision class 0 = 0.893134
precision class 1 = 0.663265
recall class 0 = 0.978417
recall class 1 = 0.266393
false negative rate = 0.733607
false positive rate = 0.021583
positive prediction rate = 0.055274
AUC of ROC = 0.858737
AUC of PRC = 0.556797
min(+P, Se) = 0.520492

-------------------------------

confusion matrix:
[[1239   18]
 [ 143   49]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.1184220016002655
difference in average predicted and observed risk = -0.014082998399734509
number samples = 1449
accuracy = 0.888889
precision class 0 = 0.896527
precision class 1 = 0.731343
recall class 0 = 0.98568
recall class 1 = 0.255208
false negative rate = 0.744792
false positive rate = 0.01432
positive prediction rate = 0.046239
AUC of ROC = 0.863891
AUC of PRC = 0.575354
min(+P, Se) = 0.510417

-------------------------------

confusion matrix:
[[1942   36]
 [ 232   79]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11352500319480896
difference in average predicted and observed risk = -0.022341996805191028
number samples = 2289
accuracy = 0.882918
precision class 0 = 0.893284
precision class 1 = 0.686957
recall class 0 = 0.9818
recall class 1 = 0.254019
false negative rate = 0.745981
false positive rate = 0.0182
positive prediction rate = 0.05024
AUC of ROC = 0.855263
AUC of PRC = 0.552321
min(+P, Se) = 0.504823

-------------------------------

confusion matrix:
[[360   8]
 [ 59  22]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13118800520896912
difference in average predicted and observed risk = -0.04921299479103089
number samples = 449
accuracy = 0.85078
precision class 0 = 0.859189
precision class 1 = 0.733333
recall class 0 = 0.978261
recall class 1 = 0.271605
false negative rate = 0.728395
false positive rate = 0.021739
positive prediction rate = 0.066815
AUC of ROC = 0.866512
AUC of PRC = 0.643021
min(+P, Se) = 0.609756

-------------------------------

confusion matrix:
[[275   3]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10729499906301498
difference in average predicted and observed risk = 0.00989199906301498
number samples = 308
accuracy = 0.922078
precision class 0 = 0.929054
precision class 1 = 0.75
recall class 0 = 0.989209
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.010791
positive prediction rate = 0.038961
AUC of ROC = 0.890408
AUC of PRC = 0.556382
min(+P, Se) = 0.566667

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10020100325345993
difference in average predicted and observed risk = 0.028036003253459924
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.87619
AUC of PRC = 0.358974
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.13643500208854675
difference in average predicted and observed risk = 0.04782700208854675
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.902778
AUC of PRC = 0.738636
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2735   51]
 [ 322  114]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11555100232362747
difference in average predicted and observed risk = -0.019768997676372524
number samples = 3222
accuracy = 0.884233
precision class 0 = 0.894668
precision class 1 = 0.690909
recall class 0 = 0.981694
recall class 1 = 0.261468
false negative rate = 0.738532
false positive rate = 0.018306
positive prediction rate = 0.05121
AUC of ROC = 0.860154
AUC of PRC = 0.56344
min(+P, Se) = 0.518349

-------------------------------

Epoch 00051: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch51.state
Epoch 52/100
 - 826s - loss: 0.2690 - val_loss: 0.2803

==>predicting on train



confusion matrix:
[[6995   41]
 [ 989  323]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.1213029995560646
difference in average predicted and observed risk = -0.03586000044393539
number samples = 8348
accuracy = 0.876617
precision class 0 = 0.876127
precision class 1 = 0.887363
recall class 0 = 0.994173
recall class 1 = 0.246189
false negative rate = 0.753811
false positive rate = 0.005827
positive prediction rate = 0.043603
AUC of ROC = 0.892464
AUC of PRC = 0.671277
min(+P, Se) = 0.602584

-------------------------------

confusion matrix:
[[3969   33]
 [ 287  184]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.1038689985871315
difference in average predicted and observed risk = -0.0014290014128685025
number samples = 4473
accuracy = 0.92846
precision class 0 = 0.932566
precision class 1 = 0.847926
recall class 0 = 0.991754
recall class 1 = 0.390658
false negative rate = 0.609342
false positive rate = 0.008246
positive prediction rate = 0.048513
AUC of ROC = 0.914252
AUC of PRC = 0.673899
min(+P, Se) = 0.602972

-------------------------------

confusion matrix:
[[1184   11]
 [  92   51]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11129800230264664
difference in average predicted and observed risk = 0.004422002302646638
number samples = 1338
accuracy = 0.923019
precision class 0 = 0.9279
precision class 1 = 0.822581
recall class 0 = 0.990795
recall class 1 = 0.356643
false negative rate = 0.643357
false positive rate = 0.009205
positive prediction rate = 0.046338
AUC of ROC = 0.920262
AUC of PRC = 0.661779
min(+P, Se) = 0.566434

-------------------------------

confusion matrix:
[[349   1]
 [ 25  14]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09953299909830093
difference in average predicted and observed risk = -0.0007240009016990651
number samples = 389
accuracy = 0.933162
precision class 0 = 0.933155
precision class 1 = 0.933333
recall class 0 = 0.997143
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.002857
positive prediction rate = 0.03856
AUC of ROC = 0.922198
AUC of PRC = 0.69622
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[109   2]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1581529974937439
difference in average predicted and observed risk = -0.007261002506256109
number samples = 133
accuracy = 0.924812
precision class 0 = 0.931624
precision class 1 = 0.875
recall class 0 = 0.981982
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.018018
positive prediction rate = 0.120301
AUC of ROC = 0.954955
AUC of PRC = 0.834868
min(+P, Se) = 0.772727

-------------------------------

confusion matrix:
[[6930   56]
 [ 745  328]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11123699694871902
difference in average predicted and observed risk = -0.021906003051280987
number samples = 8059
accuracy = 0.900608
precision class 0 = 0.902932
precision class 1 = 0.854167
recall class 0 = 0.991984
recall class 1 = 0.305685
false negative rate = 0.694315
false positive rate = 0.008016
positive prediction rate = 0.047649
AUC of ROC = 0.907616
AUC of PRC = 0.677381
min(+P, Se) = 0.614166

-------------------------------

confusion matrix:
[[5676   32]
 [ 656  258]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11921700090169907
difference in average predicted and observed risk = -0.018807999098300943
number samples = 6622
accuracy = 0.896104
precision class 0 = 0.896399
precision class 1 = 0.889655
recall class 0 = 0.994394
recall class 1 = 0.282276
false negative rate = 0.717724
false positive rate = 0.005606
positive prediction rate = 0.043793
AUC of ROC = 0.896908
AUC of PRC = 0.660001
min(+P, Se) = 0.587786

-------------------------------

confusion matrix:
[[8991   55]
 [ 999  364]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11059100180864334
difference in average predicted and observed risk = -0.020352998191356664
number samples = 10409
accuracy = 0.898741
precision class 0 = 0.9
precision class 1 = 0.868735
recall class 0 = 0.99392
recall class 1 = 0.267058
false negative rate = 0.732942
false positive rate = 0.00608
positive prediction rate = 0.040254
AUC of ROC = 0.90065
AUC of PRC = 0.656805
min(+P, Se) = 0.591343

-------------------------------

confusion matrix:
[[1630   11]
 [ 264  143]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.13985900580883026
difference in average predicted and observed risk = -0.05887099419116973
number samples = 2048
accuracy = 0.865723
precision class 0 = 0.860612
precision class 1 = 0.928571
recall class 0 = 0.993297
recall class 1 = 0.351351
false negative rate = 0.648649
false positive rate = 0.006703
positive prediction rate = 0.075195
AUC of ROC = 0.913508
AUC of PRC = 0.754063
min(+P, Se) = 0.651961

-------------------------------

confusion matrix:
[[1273    9]
 [  79   47]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10752599686384201
difference in average predicted and observed risk = 0.01803699686384201
number samples = 1408
accuracy = 0.9375
precision class 0 = 0.941568
precision class 1 = 0.839286
recall class 0 = 0.99298
recall class 1 = 0.373016
false negative rate = 0.626984
false positive rate = 0.00702
positive prediction rate = 0.039773
AUC of ROC = 0.90678
AUC of PRC = 0.623988
min(+P, Se) = 0.595238

-------------------------------

confusion matrix:
[[289   7]
 [ 34  18]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1416420042514801
difference in average predicted and observed risk = -0.0077829957485199
number samples = 348
accuracy = 0.882184
precision class 0 = 0.894737
precision class 1 = 0.72
recall class 0 = 0.976351
recall class 1 = 0.346154
false negative rate = 0.653846
false positive rate = 0.023649
positive prediction rate = 0.071839
AUC of ROC = 0.8852
AUC of PRC = 0.654774
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[423   6]
 [ 25  14]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.1018190011382103
difference in average predicted and observed risk = 0.018486001138210292
number samples = 468
accuracy = 0.933761
precision class 0 = 0.944196
precision class 1 = 0.7
recall class 0 = 0.986014
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.013986
positive prediction rate = 0.042735
AUC of ROC = 0.87813
AUC of PRC = 0.579612
min(+P, Se) = 0.538462

-------------------------------

confusion matrix:
[[12606    88]
 [ 1401   586]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11483599990606308
difference in average predicted and observed risk = -0.020509000093936913
number samples = 14681
accuracy = 0.898576
precision class 0 = 0.899979
precision class 1 = 0.869436
recall class 0 = 0.993068
recall class 1 = 0.294917
false negative rate = 0.705083
false positive rate = 0.006932
positive prediction rate = 0.04591
AUC of ROC = 0.902739
AUC of PRC = 0.669166
min(+P, Se) = 0.602416

-------------------------------

==>predicting on validation



confusion matrix:
[[1516   19]
 [ 210   68]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12478899955749512
difference in average predicted and observed risk = -0.028548000442504884
number samples = 1813
accuracy = 0.87369
precision class 0 = 0.878331
precision class 1 = 0.781609
recall class 0 = 0.987622
recall class 1 = 0.244604
false negative rate = 0.755396
false positive rate = 0.012378
positive prediction rate = 0.047987
AUC of ROC = 0.85563
AUC of PRC = 0.578834
min(+P, Se) = 0.519573

-------------------------------

confusion matrix:
[[897  10]
 [ 89  24]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10263600200414658
difference in average predicted and observed risk = -0.008147997995853418
number samples = 1020
accuracy = 0.902941
precision class 0 = 0.909736
precision class 1 = 0.705882
recall class 0 = 0.988975
recall class 1 = 0.212389
false negative rate = 0.787611
false positive rate = 0.011025
positive prediction rate = 0.033333
AUC of ROC = 0.860329
AUC of PRC = 0.491235
min(+P, Se) = 0.460177

-------------------------------

confusion matrix:
[[247   4]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12518000602722168
difference in average predicted and observed risk = 0.005882006027221678
number samples = 285
accuracy = 0.915789
precision class 0 = 0.925094
precision class 1 = 0.777778
recall class 0 = 0.984064
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.015936
positive prediction rate = 0.063158
AUC of ROC = 0.902859
AUC of PRC = 0.661422
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09065400063991547
difference in average predicted and observed risk = 0.000910000639915462
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.78672
AUC of PRC = 0.41222
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18835300207138062
difference in average predicted and observed risk = 0.034507002071380605
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1504   25]
 [ 180   64]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11668000370264053
difference in average predicted and observed risk = -0.02093999629735946
number samples = 1773
accuracy = 0.884377
precision class 0 = 0.893112
precision class 1 = 0.719101
recall class 0 = 0.983649
recall class 1 = 0.262295
false negative rate = 0.737705
false positive rate = 0.016351
positive prediction rate = 0.050197
AUC of ROC = 0.863658
AUC of PRC = 0.55777
min(+P, Se) = 0.508197

-------------------------------

confusion matrix:
[[1246   11]
 [ 146   46]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11849699914455414
difference in average predicted and observed risk = -0.014008000855445873
number samples = 1449
accuracy = 0.891649
precision class 0 = 0.895115
precision class 1 = 0.807018
recall class 0 = 0.991249
recall class 1 = 0.239583
false negative rate = 0.760417
false positive rate = 0.008751
positive prediction rate = 0.039337
AUC of ROC = 0.861509
AUC of PRC = 0.566288
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[1956   22]
 [ 236   75]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11504799872636795
difference in average predicted and observed risk = -0.020819001273632037
number samples = 2289
accuracy = 0.887287
precision class 0 = 0.892336
precision class 1 = 0.773196
recall class 0 = 0.988878
recall class 1 = 0.241158
false negative rate = 0.758842
false positive rate = 0.011122
positive prediction rate = 0.042377
AUC of ROC = 0.85981
AUC of PRC = 0.555476
min(+P, Se) = 0.496835

-------------------------------

confusion matrix:
[[363   5]
 [ 58  23]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.133433997631073
difference in average predicted and observed risk = -0.04696700236892701
number samples = 449
accuracy = 0.859688
precision class 0 = 0.862233
precision class 1 = 0.821429
recall class 0 = 0.986413
recall class 1 = 0.283951
false negative rate = 0.716049
false positive rate = 0.013587
positive prediction rate = 0.062361
AUC of ROC = 0.86564
AUC of PRC = 0.635051
min(+P, Se) = 0.56701

-------------------------------

confusion matrix:
[[274   4]
 [ 22   8]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10830499976873398
difference in average predicted and observed risk = 0.010901999768733975
number samples = 308
accuracy = 0.915584
precision class 0 = 0.925676
precision class 1 = 0.666667
recall class 0 = 0.985611
recall class 1 = 0.266667
false negative rate = 0.733333
false positive rate = 0.014388
positive prediction rate = 0.038961
AUC of ROC = 0.885012
AUC of PRC = 0.519466
min(+P, Se) = 0.529412

-------------------------------

confusion matrix:
[[86  4]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10638900101184845
difference in average predicted and observed risk = 0.03422400101184844
number samples = 97
accuracy = 0.896907
precision class 0 = 0.934783
precision class 1 = 0.2
recall class 0 = 0.955556
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.044444
positive prediction rate = 0.051546
AUC of ROC = 0.861905
AUC of PRC = 0.352803
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1473429948091507
difference in average predicted and observed risk = 0.05873499480915069
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.894841
AUC of PRC = 0.730619
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2750   36]
 [ 326  110]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11749699711799622
difference in average predicted and observed risk = -0.01782300288200378
number samples = 3222
accuracy = 0.887647
precision class 0 = 0.894018
precision class 1 = 0.753425
recall class 0 = 0.987078
recall class 1 = 0.252294
false negative rate = 0.747706
false positive rate = 0.012922
positive prediction rate = 0.045313
AUC of ROC = 0.862219
AUC of PRC = 0.560024
min(+P, Se) = 0.508009

-------------------------------

Epoch 00052: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch52.state
Epoch 53/100
 - 818s - loss: 0.2685 - val_loss: 0.2809

==>predicting on train



confusion matrix:
[[6979   57]
 [ 948  364]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13333700597286224
difference in average predicted and observed risk = -0.023825994027137753
number samples = 8348
accuracy = 0.879612
precision class 0 = 0.880409
precision class 1 = 0.864608
recall class 0 = 0.991899
recall class 1 = 0.277439
false negative rate = 0.722561
false positive rate = 0.008101
positive prediction rate = 0.050431
AUC of ROC = 0.895166
AUC of PRC = 0.673913
min(+P, Se) = 0.606545

-------------------------------

confusion matrix:
[[3960   42]
 [ 271  200]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11001499742269516
difference in average predicted and observed risk = 0.004716997422695157
number samples = 4473
accuracy = 0.930025
precision class 0 = 0.935949
precision class 1 = 0.826446
recall class 0 = 0.989505
recall class 1 = 0.424628
false negative rate = 0.575372
false positive rate = 0.010495
positive prediction rate = 0.054102
AUC of ROC = 0.919822
AUC of PRC = 0.686434
min(+P, Se) = 0.613588

-------------------------------

confusion matrix:
[[1182   13]
 [  86   57]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.1173190027475357
difference in average predicted and observed risk = 0.010443002747535707
number samples = 1338
accuracy = 0.926009
precision class 0 = 0.932177
precision class 1 = 0.814286
recall class 0 = 0.989121
recall class 1 = 0.398601
false negative rate = 0.601399
false positive rate = 0.010879
positive prediction rate = 0.052317
AUC of ROC = 0.922363
AUC of PRC = 0.671212
min(+P, Se) = 0.611111

-------------------------------

confusion matrix:
[[348   2]
 [ 20  19]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10720899701118469
difference in average predicted and observed risk = 0.0069519970111846935
number samples = 389
accuracy = 0.943445
precision class 0 = 0.945652
precision class 1 = 0.904762
recall class 0 = 0.994286
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.005714
positive prediction rate = 0.053985
AUC of ROC = 0.932821
AUC of PRC = 0.730486
min(+P, Se) = 0.717949

-------------------------------

confusion matrix:
[[109   2]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16793100535869598
difference in average predicted and observed risk = 0.0025170053586959784
number samples = 133
accuracy = 0.917293
precision class 0 = 0.923729
precision class 1 = 0.866667
recall class 0 = 0.981982
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.018018
positive prediction rate = 0.112782
AUC of ROC = 0.957821
AUC of PRC = 0.844018
min(+P, Se) = 0.730769

-------------------------------

confusion matrix:
[[6923   63]
 [ 705  368]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12016700208187103
difference in average predicted and observed risk = -0.012975997918128979
number samples = 8059
accuracy = 0.904703
precision class 0 = 0.907577
precision class 1 = 0.853828
recall class 0 = 0.990982
recall class 1 = 0.342964
false negative rate = 0.657036
false positive rate = 0.009018
positive prediction rate = 0.053481
AUC of ROC = 0.912465
AUC of PRC = 0.690485
min(+P, Se) = 0.621521

-------------------------------

confusion matrix:
[[5655   53]
 [ 629  285]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12953400611877441
difference in average predicted and observed risk = -0.008490993881225595
number samples = 6622
accuracy = 0.89701
precision class 0 = 0.899905
precision class 1 = 0.843195
recall class 0 = 0.990715
recall class 1 = 0.311816
false negative rate = 0.688184
false positive rate = 0.009285
positive prediction rate = 0.051042
AUC of ROC = 0.900813
AUC of PRC = 0.661379
min(+P, Se) = 0.592795

-------------------------------

confusion matrix:
[[8975   71]
 [ 954  409]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.12054300308227539
difference in average predicted and observed risk = -0.010400996917724614
number samples = 10409
accuracy = 0.901528
precision class 0 = 0.903918
precision class 1 = 0.852083
recall class 0 = 0.992151
recall class 1 = 0.300073
false negative rate = 0.699927
false positive rate = 0.007849
positive prediction rate = 0.046114
AUC of ROC = 0.90501
AUC of PRC = 0.663111
min(+P, Se) = 0.595652

-------------------------------

confusion matrix:
[[1619   22]
 [ 247  160]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14996400475502014
difference in average predicted and observed risk = -0.04876599524497985
number samples = 2048
accuracy = 0.868652
precision class 0 = 0.867631
precision class 1 = 0.879121
recall class 0 = 0.986594
recall class 1 = 0.39312
false negative rate = 0.60688
false positive rate = 0.013406
positive prediction rate = 0.088867
AUC of ROC = 0.917784
AUC of PRC = 0.763133
min(+P, Se) = 0.683047

-------------------------------

confusion matrix:
[[1272   10]
 [  76   50]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11438900232315063
difference in average predicted and observed risk = 0.024900002323150636
number samples = 1408
accuracy = 0.93892
precision class 0 = 0.94362
precision class 1 = 0.833333
recall class 0 = 0.9922
recall class 1 = 0.396825
false negative rate = 0.603175
false positive rate = 0.0078
positive prediction rate = 0.042614
AUC of ROC = 0.908804
AUC of PRC = 0.63473
min(+P, Se) = 0.611111

-------------------------------

confusion matrix:
[[288   8]
 [ 34  18]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14938299357891083
difference in average predicted and observed risk = -4.200642108917463e-05
number samples = 348
accuracy = 0.87931
precision class 0 = 0.89441
precision class 1 = 0.692308
recall class 0 = 0.972973
recall class 1 = 0.346154
false negative rate = 0.653846
false positive rate = 0.027027
positive prediction rate = 0.074713
AUC of ROC = 0.895335
AUC of PRC = 0.656498
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[424   5]
 [ 23  16]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10962899774312973
difference in average predicted and observed risk = 0.026295997743129726
number samples = 468
accuracy = 0.940171
precision class 0 = 0.948546
precision class 1 = 0.761905
recall class 0 = 0.988345
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.011655
positive prediction rate = 0.044872
AUC of ROC = 0.888172
AUC of PRC = 0.611263
min(+P, Se) = 0.564103

-------------------------------

confusion matrix:
[[12578   116]
 [ 1334   653]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12439200282096863
difference in average predicted and observed risk = -0.010952997179031365
number samples = 14681
accuracy = 0.901233
precision class 0 = 0.904112
precision class 1 = 0.849155
recall class 0 = 0.990862
recall class 1 = 0.328636
false negative rate = 0.671364
false positive rate = 0.009138
positive prediction rate = 0.052381
AUC of ROC = 0.907149
AUC of PRC = 0.677195
min(+P, Se) = 0.608652

-------------------------------

==>predicting on validation



confusion matrix:
[[1505   30]
 [ 204   74]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1370919942855835
difference in average predicted and observed risk = -0.016245005714416505
number samples = 1813
accuracy = 0.870932
precision class 0 = 0.880632
precision class 1 = 0.711538
recall class 0 = 0.980456
recall class 1 = 0.266187
false negative rate = 0.733813
false positive rate = 0.019544
positive prediction rate = 0.057363
AUC of ROC = 0.849195
AUC of PRC = 0.574673
min(+P, Se) = 0.52921

-------------------------------

confusion matrix:
[[894  13]
 [ 84  29]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10855499655008316
difference in average predicted and observed risk = -0.002229003449916833
number samples = 1020
accuracy = 0.904902
precision class 0 = 0.91411
precision class 1 = 0.690476
recall class 0 = 0.985667
recall class 1 = 0.256637
false negative rate = 0.743363
false positive rate = 0.014333
positive prediction rate = 0.041176
AUC of ROC = 0.857939
AUC of PRC = 0.504987
min(+P, Se) = 0.495652

-------------------------------

confusion matrix:
[[243   8]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1339849978685379
difference in average predicted and observed risk = 0.014686997868537902
number samples = 285
accuracy = 0.901754
precision class 0 = 0.923954
precision class 1 = 0.636364
recall class 0 = 0.968127
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.031873
positive prediction rate = 0.077193
AUC of ROC = 0.902976
AUC of PRC = 0.66016
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09635400027036667
difference in average predicted and observed risk = 0.006610000270366664
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.820926
AUC of PRC = 0.424708
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19979199767112732
difference in average predicted and observed risk = 0.04594599767112731
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1497   32]
 [ 172   72]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1264829933643341
difference in average predicted and observed risk = -0.011137006635665886
number samples = 1773
accuracy = 0.884941
precision class 0 = 0.896944
precision class 1 = 0.692308
recall class 0 = 0.979071
recall class 1 = 0.295082
false negative rate = 0.704918
false positive rate = 0.020929
positive prediction rate = 0.058658
AUC of ROC = 0.858131
AUC of PRC = 0.557925
min(+P, Se) = 0.52459

-------------------------------

confusion matrix:
[[1235   22]
 [ 142   50]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12830600142478943
difference in average predicted and observed risk = -0.004198998575210583
number samples = 1449
accuracy = 0.886818
precision class 0 = 0.896877
precision class 1 = 0.694444
recall class 0 = 0.982498
recall class 1 = 0.260417
false negative rate = 0.739583
false positive rate = 0.017502
positive prediction rate = 0.049689
AUC of ROC = 0.861024
AUC of PRC = 0.567718
min(+P, Se) = 0.530928

-------------------------------

confusion matrix:
[[1944   34]
 [ 229   82]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12548400461673737
difference in average predicted and observed risk = -0.010382995383262622
number samples = 2289
accuracy = 0.885103
precision class 0 = 0.894616
precision class 1 = 0.706897
recall class 0 = 0.982811
recall class 1 = 0.263666
false negative rate = 0.736334
false positive rate = 0.017189
positive prediction rate = 0.050677
AUC of ROC = 0.853558
AUC of PRC = 0.553321
min(+P, Se) = 0.517572

-------------------------------

confusion matrix:
[[360   8]
 [ 55  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14262400567531586
difference in average predicted and observed risk = -0.03777699432468415
number samples = 449
accuracy = 0.859688
precision class 0 = 0.86747
precision class 1 = 0.764706
recall class 0 = 0.978261
recall class 1 = 0.320988
false negative rate = 0.679012
false positive rate = 0.021739
positive prediction rate = 0.075724
AUC of ROC = 0.864969
AUC of PRC = 0.637171
min(+P, Se) = 0.568182

-------------------------------

confusion matrix:
[[272   6]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11745300143957138
difference in average predicted and observed risk = 0.020050001439571377
number samples = 308
accuracy = 0.912338
precision class 0 = 0.928328
precision class 1 = 0.6
recall class 0 = 0.978417
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.021583
positive prediction rate = 0.048701
AUC of ROC = 0.883333
AUC of PRC = 0.530463
min(+P, Se) = 0.580645

-------------------------------

confusion matrix:
[[86  4]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.1115799993276596
difference in average predicted and observed risk = 0.0394149993276596
number samples = 97
accuracy = 0.896907
precision class 0 = 0.934783
precision class 1 = 0.2
recall class 0 = 0.955556
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.044444
positive prediction rate = 0.051546
AUC of ROC = 0.890476
AUC of PRC = 0.368409
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15063199400901794
difference in average predicted and observed risk = 0.06202399400901794
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.896825
AUC of PRC = 0.730976
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2732   54]
 [ 314  122]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12730300426483154
difference in average predicted and observed risk = -0.008016995735168453
number samples = 3222
accuracy = 0.885785
precision class 0 = 0.896914
precision class 1 = 0.693182
recall class 0 = 0.980617
recall class 1 = 0.279817
false negative rate = 0.720183
false positive rate = 0.019383
positive prediction rate = 0.054624
AUC of ROC = 0.858837
AUC of PRC = 0.561163
min(+P, Se) = 0.527523

-------------------------------

Epoch 00053: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch53.state
Epoch 54/100
 - 812s - loss: 0.2645 - val_loss: 0.2800

==>predicting on train



confusion matrix:
[[6998   38]
 [ 974  338]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12084600329399109
difference in average predicted and observed risk = -0.03631699670600891
number samples = 8348
accuracy = 0.878773
precision class 0 = 0.877822
precision class 1 = 0.898936
recall class 0 = 0.994599
recall class 1 = 0.257622
false negative rate = 0.742378
false positive rate = 0.005401
positive prediction rate = 0.045041
AUC of ROC = 0.896296
AUC of PRC = 0.679498
min(+P, Se) = 0.600914

-------------------------------

confusion matrix:
[[3973   29]
 [ 289  182]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.1003739982843399
difference in average predicted and observed risk = -0.004924001715660098
number samples = 4473
accuracy = 0.928907
precision class 0 = 0.932191
precision class 1 = 0.862559
recall class 0 = 0.992754
recall class 1 = 0.386412
false negative rate = 0.613588
false positive rate = 0.007246
positive prediction rate = 0.047172
AUC of ROC = 0.920817
AUC of PRC = 0.690114
min(+P, Se) = 0.611465

-------------------------------

confusion matrix:
[[1183   12]
 [  94   49]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10842099785804749
difference in average predicted and observed risk = 0.0015449978580474866
number samples = 1338
accuracy = 0.920777
precision class 0 = 0.92639
precision class 1 = 0.803279
recall class 0 = 0.989958
recall class 1 = 0.342657
false negative rate = 0.657343
false positive rate = 0.010042
positive prediction rate = 0.04559
AUC of ROC = 0.92341
AUC of PRC = 0.668234
min(+P, Se) = 0.611111

-------------------------------

confusion matrix:
[[349   1]
 [ 24  15]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.0967160016298294
difference in average predicted and observed risk = -0.003540998370170592
number samples = 389
accuracy = 0.935733
precision class 0 = 0.935657
precision class 1 = 0.9375
recall class 0 = 0.997143
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.002857
positive prediction rate = 0.041131
AUC of ROC = 0.923663
AUC of PRC = 0.724939
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[109   2]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.15455299615859985
difference in average predicted and observed risk = -0.010861003841400152
number samples = 133
accuracy = 0.917293
precision class 0 = 0.923729
precision class 1 = 0.866667
recall class 0 = 0.981982
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.018018
positive prediction rate = 0.112782
AUC of ROC = 0.946765
AUC of PRC = 0.837771
min(+P, Se) = 0.772727

-------------------------------

confusion matrix:
[[6939   47]
 [ 740  333]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.10877300053834915
difference in average predicted and observed risk = -0.02436999946165086
number samples = 8059
accuracy = 0.902345
precision class 0 = 0.903633
precision class 1 = 0.876316
recall class 0 = 0.993272
recall class 1 = 0.310345
false negative rate = 0.689655
false positive rate = 0.006728
positive prediction rate = 0.047152
AUC of ROC = 0.911968
AUC of PRC = 0.690016
min(+P, Se) = 0.630009

-------------------------------

confusion matrix:
[[5673   35]
 [ 650  264]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11845999956130981
difference in average predicted and observed risk = -0.019565000438690194
number samples = 6622
accuracy = 0.896557
precision class 0 = 0.897201
precision class 1 = 0.882943
recall class 0 = 0.993868
recall class 1 = 0.28884
false negative rate = 0.71116
false positive rate = 0.006132
positive prediction rate = 0.045153
AUC of ROC = 0.902603
AUC of PRC = 0.66935
min(+P, Se) = 0.586433

-------------------------------

confusion matrix:
[[9001   45]
 [ 983  380]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10918600112199783
difference in average predicted and observed risk = -0.02175799887800217
number samples = 10409
accuracy = 0.901239
precision class 0 = 0.901542
precision class 1 = 0.894118
recall class 0 = 0.995025
recall class 1 = 0.278797
false negative rate = 0.721203
false positive rate = 0.004975
positive prediction rate = 0.04083
AUC of ROC = 0.905998
AUC of PRC = 0.668403
min(+P, Se) = 0.592972

-------------------------------

confusion matrix:
[[1625   16]
 [ 269  138]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1368200033903122
difference in average predicted and observed risk = -0.061909996609687795
number samples = 2048
accuracy = 0.86084
precision class 0 = 0.857973
precision class 1 = 0.896104
recall class 0 = 0.99025
recall class 1 = 0.339066
false negative rate = 0.660934
false positive rate = 0.00975
positive prediction rate = 0.075195
AUC of ROC = 0.916249
AUC of PRC = 0.7591
min(+P, Se) = 0.665848

-------------------------------

confusion matrix:
[[1271   11]
 [  81   45]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.105492003262043
difference in average predicted and observed risk = 0.016003003262043
number samples = 1408
accuracy = 0.934659
precision class 0 = 0.940089
precision class 1 = 0.803571
recall class 0 = 0.99142
recall class 1 = 0.357143
false negative rate = 0.642857
false positive rate = 0.00858
positive prediction rate = 0.039773
AUC of ROC = 0.91146
AUC of PRC = 0.639229
min(+P, Se) = 0.595238

-------------------------------

confusion matrix:
[[289   7]
 [ 34  18]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.13923299312591553
difference in average predicted and observed risk = -0.010192006874084475
number samples = 348
accuracy = 0.882184
precision class 0 = 0.894737
precision class 1 = 0.72
recall class 0 = 0.976351
recall class 1 = 0.346154
false negative rate = 0.653846
false positive rate = 0.023649
positive prediction rate = 0.071839
AUC of ROC = 0.89553
AUC of PRC = 0.675654
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[426   3]
 [ 23  16]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.1011430025100708
difference in average predicted and observed risk = 0.017810002510070796
number samples = 468
accuracy = 0.944444
precision class 0 = 0.948775
precision class 1 = 0.842105
recall class 0 = 0.993007
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.006993
positive prediction rate = 0.040598
AUC of ROC = 0.894328
AUC of PRC = 0.61267
min(+P, Se) = 0.575

-------------------------------

confusion matrix:
[[12612    82]
 [ 1390   597]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.1131419986486435
difference in average predicted and observed risk = -0.0222030013513565
number samples = 14681
accuracy = 0.899734
precision class 0 = 0.900728
precision class 1 = 0.879234
recall class 0 = 0.99354
recall class 1 = 0.300453
false negative rate = 0.699547
false positive rate = 0.00646
positive prediction rate = 0.04625
AUC of ROC = 0.907549
AUC of PRC = 0.680189
min(+P, Se) = 0.609461

-------------------------------

==>predicting on validation



confusion matrix:
[[1516   19]
 [ 207   71]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12405700236558914
difference in average predicted and observed risk = -0.02927999763441086
number samples = 1813
accuracy = 0.875345
precision class 0 = 0.879861
precision class 1 = 0.788889
recall class 0 = 0.987622
recall class 1 = 0.255396
false negative rate = 0.744604
false positive rate = 0.012378
positive prediction rate = 0.049641
AUC of ROC = 0.854653
AUC of PRC = 0.584412
min(+P, Se) = 0.530466

-------------------------------

confusion matrix:
[[893  14]
 [ 86  27]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.09994599968194962
difference in average predicted and observed risk = -0.010838000318050378
number samples = 1020
accuracy = 0.901961
precision class 0 = 0.912155
precision class 1 = 0.658537
recall class 0 = 0.984564
recall class 1 = 0.238938
false negative rate = 0.761062
false positive rate = 0.015436
positive prediction rate = 0.040196
AUC of ROC = 0.862973
AUC of PRC = 0.499269
min(+P, Se) = 0.486957

-------------------------------

confusion matrix:
[[245   6]
 [ 22  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12117999792098999
difference in average predicted and observed risk = 0.001881997920989989
number samples = 285
accuracy = 0.901754
precision class 0 = 0.917603
precision class 1 = 0.666667
recall class 0 = 0.976096
recall class 1 = 0.352941
false negative rate = 0.647059
false positive rate = 0.023904
positive prediction rate = 0.063158
AUC of ROC = 0.902273
AUC of PRC = 0.638478
min(+P, Se) = 0.589744

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08905600011348724
difference in average predicted and observed risk = -0.0006879998865127607
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.832998
AUC of PRC = 0.436938
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18507300317287445
difference in average predicted and observed risk = 0.03122700317287444
number samples = 26
accuracy = 0.884615
precision class 0 = 0.913043
precision class 1 = 0.666667
recall class 0 = 0.954545
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.045455
positive prediction rate = 0.115385
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1501   28]
 [ 176   68]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11426199972629547
difference in average predicted and observed risk = -0.02335800027370452
number samples = 1773
accuracy = 0.884941
precision class 0 = 0.895051
precision class 1 = 0.708333
recall class 0 = 0.981687
recall class 1 = 0.278689
false negative rate = 0.721311
false positive rate = 0.018313
positive prediction rate = 0.054146
AUC of ROC = 0.862127
AUC of PRC = 0.557099
min(+P, Se) = 0.52459

-------------------------------

confusion matrix:
[[1243   14]
 [ 147   45]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11771500110626221
difference in average predicted and observed risk = -0.014789998893737805
number samples = 1449
accuracy = 0.888889
precision class 0 = 0.894245
precision class 1 = 0.762712
recall class 0 = 0.988862
recall class 1 = 0.234375
false negative rate = 0.765625
false positive rate = 0.011138
positive prediction rate = 0.040718
AUC of ROC = 0.86644
AUC of PRC = 0.577196
min(+P, Se) = 0.523077

-------------------------------

confusion matrix:
[[1949   29]
 [ 235   76]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11379600316286087
difference in average predicted and observed risk = -0.022070996837139117
number samples = 2289
accuracy = 0.884666
precision class 0 = 0.892399
precision class 1 = 0.72381
recall class 0 = 0.985339
recall class 1 = 0.244373
false negative rate = 0.755627
false positive rate = 0.014661
positive prediction rate = 0.045872
AUC of ROC = 0.860898
AUC of PRC = 0.55944
min(+P, Se) = 0.514469

-------------------------------

confusion matrix:
[[362   6]
 [ 57  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13092899322509766
difference in average predicted and observed risk = -0.04947200677490235
number samples = 449
accuracy = 0.859688
precision class 0 = 0.863962
precision class 1 = 0.8
recall class 0 = 0.983696
recall class 1 = 0.296296
false negative rate = 0.703704
false positive rate = 0.016304
positive prediction rate = 0.066815
AUC of ROC = 0.864936
AUC of PRC = 0.633725
min(+P, Se) = 0.567901

-------------------------------

confusion matrix:
[[275   3]
 [ 22   8]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.1056390032172203
difference in average predicted and observed risk = 0.008236003217220303
number samples = 308
accuracy = 0.918831
precision class 0 = 0.925926
precision class 1 = 0.727273
recall class 0 = 0.989209
recall class 1 = 0.266667
false negative rate = 0.733333
false positive rate = 0.010791
positive prediction rate = 0.035714
AUC of ROC = 0.885492
AUC of PRC = 0.544752
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10378500074148178
difference in average predicted and observed risk = 0.031620000741481774
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.884127
AUC of PRC = 0.359449
min(+P, Se) = 0.315789

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14286699891090393
difference in average predicted and observed risk = 0.054258998910903924
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.890873
AUC of PRC = 0.706307
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2744   42]
 [ 323  113]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11581499874591827
difference in average predicted and observed risk = -0.019505001254081722
number samples = 3222
accuracy = 0.886716
precision class 0 = 0.894685
precision class 1 = 0.729032
recall class 0 = 0.984925
recall class 1 = 0.259174
false negative rate = 0.740826
false positive rate = 0.015075
positive prediction rate = 0.048107
AUC of ROC = 0.863446
AUC of PRC = 0.564831
min(+P, Se) = 0.524027

-------------------------------

Epoch 00054: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch54.state
Epoch 55/100
 - 814s - loss: 0.2670 - val_loss: 0.2796

==>predicting on train



confusion matrix:
[[6963   73]
 [ 907  405]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.133775994181633
difference in average predicted and observed risk = -0.023387005818367
number samples = 8348
accuracy = 0.882607
precision class 0 = 0.884752
precision class 1 = 0.84728
recall class 0 = 0.989625
recall class 1 = 0.308689
false negative rate = 0.691311
false positive rate = 0.010375
positive prediction rate = 0.057259
AUC of ROC = 0.89609
AUC of PRC = 0.679222
min(+P, Se) = 0.605945

-------------------------------

confusion matrix:
[[3958   44]
 [ 267  204]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.1104080006480217
difference in average predicted and observed risk = 0.005110000648021695
number samples = 4473
accuracy = 0.930472
precision class 0 = 0.936805
precision class 1 = 0.822581
recall class 0 = 0.989006
recall class 1 = 0.433121
false negative rate = 0.566879
false positive rate = 0.010995
positive prediction rate = 0.055444
AUC of ROC = 0.920863
AUC of PRC = 0.694123
min(+P, Se) = 0.622363

-------------------------------

confusion matrix:
[[1178   17]
 [  78   65]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11923100054264069
difference in average predicted and observed risk = 0.012355000542640687
number samples = 1338
accuracy = 0.928999
precision class 0 = 0.937898
precision class 1 = 0.792683
recall class 0 = 0.985774
recall class 1 = 0.454545
false negative rate = 0.545455
false positive rate = 0.014226
positive prediction rate = 0.061285
AUC of ROC = 0.926278
AUC of PRC = 0.698056
min(+P, Se) = 0.622378

-------------------------------

confusion matrix:
[[348   2]
 [ 20  19]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.1085050031542778
difference in average predicted and observed risk = 0.008248003154277803
number samples = 389
accuracy = 0.943445
precision class 0 = 0.945652
precision class 1 = 0.904762
recall class 0 = 0.994286
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.005714
positive prediction rate = 0.053985
AUC of ROC = 0.926886
AUC of PRC = 0.743141
min(+P, Se) = 0.707317

-------------------------------

confusion matrix:
[[109   2]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16673800349235535
difference in average predicted and observed risk = 0.0013240034923553412
number samples = 133
accuracy = 0.924812
precision class 0 = 0.931624
precision class 1 = 0.875
recall class 0 = 0.981982
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.018018
positive prediction rate = 0.120301
AUC of ROC = 0.949222
AUC of PRC = 0.853138
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6912   74]
 [ 687  386]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12044200301170349
difference in average predicted and observed risk = -0.01270099698829652
number samples = 8059
accuracy = 0.905571
precision class 0 = 0.909593
precision class 1 = 0.83913
recall class 0 = 0.989407
recall class 1 = 0.359739
false negative rate = 0.640261
false positive rate = 0.010593
positive prediction rate = 0.057079
AUC of ROC = 0.912761
AUC of PRC = 0.696475
min(+P, Se) = 0.634758

-------------------------------

confusion matrix:
[[5644   64]
 [ 593  321]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.13045799732208252
difference in average predicted and observed risk = -0.007567002677917489
number samples = 6622
accuracy = 0.900785
precision class 0 = 0.904922
precision class 1 = 0.833766
recall class 0 = 0.988788
recall class 1 = 0.351204
false negative rate = 0.648796
false positive rate = 0.011212
positive prediction rate = 0.05814
AUC of ROC = 0.901481
AUC of PRC = 0.670076
min(+P, Se) = 0.598468

-------------------------------

confusion matrix:
[[8964   82]
 [ 921  442]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.12101099640130997
difference in average predicted and observed risk = -0.009933003598690038
number samples = 10409
accuracy = 0.903641
precision class 0 = 0.906829
precision class 1 = 0.843511
recall class 0 = 0.990935
recall class 1 = 0.324285
false negative rate = 0.675715
false positive rate = 0.009065
positive prediction rate = 0.050341
AUC of ROC = 0.905735
AUC of PRC = 0.670237
min(+P, Se) = 0.60293

-------------------------------

confusion matrix:
[[1615   26]
 [ 243  164]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.15095700323581696
difference in average predicted and observed risk = -0.047772996764183034
number samples = 2048
accuracy = 0.868652
precision class 0 = 0.869214
precision class 1 = 0.863158
recall class 0 = 0.984156
recall class 1 = 0.402948
false negative rate = 0.597052
false positive rate = 0.015844
positive prediction rate = 0.092773
AUC of ROC = 0.918124
AUC of PRC = 0.766525
min(+P, Se) = 0.669118

-------------------------------

confusion matrix:
[[1268   14]
 [  68   58]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11484099924564362
difference in average predicted and observed risk = 0.025351999245643617
number samples = 1408
accuracy = 0.941761
precision class 0 = 0.949102
precision class 1 = 0.805556
recall class 0 = 0.98908
recall class 1 = 0.460317
false negative rate = 0.539683
false positive rate = 0.01092
positive prediction rate = 0.051136
AUC of ROC = 0.910724
AUC of PRC = 0.648606
min(+P, Se) = 0.603175

-------------------------------

confusion matrix:
[[287   9]
 [ 29  23]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14972199499607086
difference in average predicted and observed risk = 0.00029699499607085955
number samples = 348
accuracy = 0.890805
precision class 0 = 0.908228
precision class 1 = 0.71875
recall class 0 = 0.969595
recall class 1 = 0.442308
false negative rate = 0.557692
false positive rate = 0.030405
positive prediction rate = 0.091954
AUC of ROC = 0.889423
AUC of PRC = 0.680594
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[422   7]
 [ 19  20]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.1110519990324974
difference in average predicted and observed risk = 0.0277189990324974
number samples = 468
accuracy = 0.944444
precision class 0 = 0.956916
precision class 1 = 0.740741
recall class 0 = 0.983683
recall class 1 = 0.512821
false negative rate = 0.487179
false positive rate = 0.016317
positive prediction rate = 0.057692
AUC of ROC = 0.891877
AUC of PRC = 0.621463
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[12556   138]
 [ 1280   707]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12495999783277512
difference in average predicted and observed risk = -0.010385002167224877
number samples = 14681
accuracy = 0.903413
precision class 0 = 0.907488
precision class 1 = 0.836686
recall class 0 = 0.989129
recall class 1 = 0.355813
false negative rate = 0.644187
false positive rate = 0.010871
positive prediction rate = 0.057557
AUC of ROC = 0.907637
AUC of PRC = 0.684324
min(+P, Se) = 0.61639

-------------------------------

==>predicting on validation



confusion matrix:
[[1504   31]
 [ 197   81]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13666300475597382
difference in average predicted and observed risk = -0.016673995244026185
number samples = 1813
accuracy = 0.874242
precision class 0 = 0.884186
precision class 1 = 0.723214
recall class 0 = 0.979805
recall class 1 = 0.291367
false negative rate = 0.708633
false positive rate = 0.020195
positive prediction rate = 0.061776
AUC of ROC = 0.853097
AUC of PRC = 0.578858
min(+P, Se) = 0.528777

-------------------------------

confusion matrix:
[[890  17]
 [ 85  28]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.1118599995970726
difference in average predicted and observed risk = 0.0010759995970726077
number samples = 1020
accuracy = 0.9
precision class 0 = 0.912821
precision class 1 = 0.622222
recall class 0 = 0.981257
recall class 1 = 0.247788
false negative rate = 0.752212
false positive rate = 0.018743
positive prediction rate = 0.044118
AUC of ROC = 0.86069
AUC of PRC = 0.5009
min(+P, Se) = 0.466667

-------------------------------

confusion matrix:
[[244   7]
 [ 18  16]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13182899355888367
difference in average predicted and observed risk = 0.012530993558883666
number samples = 285
accuracy = 0.912281
precision class 0 = 0.931298
precision class 1 = 0.695652
recall class 0 = 0.972112
recall class 1 = 0.470588
false negative rate = 0.529412
false positive rate = 0.027888
positive prediction rate = 0.080702
AUC of ROC = 0.902039
AUC of PRC = 0.670096
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[69  2]
 [ 5  2]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10041200369596481
difference in average predicted and observed risk = 0.010668003695964809
number samples = 78
accuracy = 0.910256
precision class 0 = 0.932432
precision class 1 = 0.5
recall class 0 = 0.971831
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.028169
positive prediction rate = 0.051282
AUC of ROC = 0.806841
AUC of PRC = 0.443572
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19106699526309967
difference in average predicted and observed risk = 0.03722099526309966
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.954545
AUC of PRC = 0.73125
min(+P, Se) = 0.75

-------------------------------

confusion matrix:
[[1493   36]
 [ 169   75]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1263130009174347
difference in average predicted and observed risk = -0.0113069990825653
number samples = 1773
accuracy = 0.884377
precision class 0 = 0.898315
precision class 1 = 0.675676
recall class 0 = 0.976455
recall class 1 = 0.307377
false negative rate = 0.692623
false positive rate = 0.023545
positive prediction rate = 0.062606
AUC of ROC = 0.86128
AUC of PRC = 0.55643
min(+P, Se) = 0.528455

-------------------------------

confusion matrix:
[[1235   22]
 [ 137   55]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12994199991226196
difference in average predicted and observed risk = -0.0025630000877380488
number samples = 1449
accuracy = 0.890269
precision class 0 = 0.900146
precision class 1 = 0.714286
recall class 0 = 0.982498
recall class 1 = 0.286458
false negative rate = 0.713542
false positive rate = 0.017502
positive prediction rate = 0.05314
AUC of ROC = 0.862644
AUC of PRC = 0.575079
min(+P, Se) = 0.526042

-------------------------------

confusion matrix:
[[1939   39]
 [ 222   89]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1259949952363968
difference in average predicted and observed risk = -0.009872004763603198
number samples = 2289
accuracy = 0.885976
precision class 0 = 0.89727
precision class 1 = 0.695312
recall class 0 = 0.980283
recall class 1 = 0.286174
false negative rate = 0.713826
false positive rate = 0.019717
positive prediction rate = 0.05592
AUC of ROC = 0.857887
AUC of PRC = 0.553302
min(+P, Se) = 0.507886

-------------------------------

confusion matrix:
[[360   8]
 [ 57  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14395900070667267
difference in average predicted and observed risk = -0.03644199929332734
number samples = 449
accuracy = 0.855234
precision class 0 = 0.863309
precision class 1 = 0.75
recall class 0 = 0.978261
recall class 1 = 0.296296
false negative rate = 0.703704
false positive rate = 0.021739
positive prediction rate = 0.071269
AUC of ROC = 0.861749
AUC of PRC = 0.63587
min(+P, Se) = 0.580247

-------------------------------

confusion matrix:
[[273   5]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11783000081777573
difference in average predicted and observed risk = 0.020427000817775723
number samples = 308
accuracy = 0.922078
precision class 0 = 0.934932
precision class 1 = 0.6875
recall class 0 = 0.982014
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.017986
positive prediction rate = 0.051948
AUC of ROC = 0.886211
AUC of PRC = 0.571489
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[86  4]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10884200036525726
difference in average predicted and observed risk = 0.036677000365257256
number samples = 97
accuracy = 0.896907
precision class 0 = 0.934783
precision class 1 = 0.2
recall class 0 = 0.955556
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.044444
positive prediction rate = 0.051546
AUC of ROC = 0.884127
AUC of PRC = 0.356535
min(+P, Se) = 0.294118

-------------------------------

confusion matrix:
[[70  2]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1563130021095276
difference in average predicted and observed risk = 0.06770500210952758
number samples = 79
accuracy = 0.949367
precision class 0 = 0.972222
precision class 1 = 0.714286
recall class 0 = 0.972222
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.027778
positive prediction rate = 0.088608
AUC of ROC = 0.890873
AUC of PRC = 0.747655
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2728   58]
 [ 306  130]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12794500589370728
difference in average predicted and observed risk = -0.0073749941062927205
number samples = 3222
accuracy = 0.887027
precision class 0 = 0.899143
precision class 1 = 0.691489
recall class 0 = 0.979182
recall class 1 = 0.298165
false negative rate = 0.701835
false positive rate = 0.020818
positive prediction rate = 0.058349
AUC of ROC = 0.861226
AUC of PRC = 0.564372
min(+P, Se) = 0.518349

-------------------------------

Epoch 00055: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch55.state
Epoch 56/100
 - 816s - loss: 0.2668 - val_loss: 0.2795

==>predicting on train



confusion matrix:
[[6961   75]
 [ 874  438]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.1428450047969818
difference in average predicted and observed risk = -0.014317995203018186
number samples = 8348
accuracy = 0.88632
precision class 0 = 0.888449
precision class 1 = 0.853801
recall class 0 = 0.989341
recall class 1 = 0.333841
false negative rate = 0.666159
false positive rate = 0.010659
positive prediction rate = 0.061452
AUC of ROC = 0.897671
AUC of PRC = 0.684172
min(+P, Se) = 0.610053

-------------------------------

confusion matrix:
[[3955   47]
 [ 257  214]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11543799936771393
difference in average predicted and observed risk = 0.010139999367713926
number samples = 4473
accuracy = 0.932037
precision class 0 = 0.938984
precision class 1 = 0.819923
recall class 0 = 0.988256
recall class 1 = 0.454352
false negative rate = 0.545648
false positive rate = 0.011744
positive prediction rate = 0.05835
AUC of ROC = 0.924499
AUC of PRC = 0.703886
min(+P, Se) = 0.626327

-------------------------------

confusion matrix:
[[1178   17]
 [  79   64]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.12336499989032745
difference in average predicted and observed risk = 0.016488999890327455
number samples = 1338
accuracy = 0.928251
precision class 0 = 0.937152
precision class 1 = 0.790123
recall class 0 = 0.985774
recall class 1 = 0.447552
false negative rate = 0.552448
false positive rate = 0.014226
positive prediction rate = 0.060538
AUC of ROC = 0.924604
AUC of PRC = 0.698186
min(+P, Se) = 0.616438

-------------------------------

confusion matrix:
[[348   2]
 [ 20  19]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.11427900195121765
difference in average predicted and observed risk = 0.014022001951217652
number samples = 389
accuracy = 0.943445
precision class 0 = 0.945652
precision class 1 = 0.904762
recall class 0 = 0.994286
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.005714
positive prediction rate = 0.053985
AUC of ROC = 0.937656
AUC of PRC = 0.754898
min(+P, Se) = 0.74359

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16833099722862244
difference in average predicted and observed risk = 0.002916997228622431
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.955364
AUC of PRC = 0.857471
min(+P, Se) = 0.791667

-------------------------------

confusion matrix:
[[6902   84]
 [ 663  410]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12745000422000885
difference in average predicted and observed risk = -0.005692995779991161
number samples = 8059
accuracy = 0.907309
precision class 0 = 0.91236
precision class 1 = 0.82996
recall class 0 = 0.987976
recall class 1 = 0.382106
false negative rate = 0.617894
false positive rate = 0.012024
positive prediction rate = 0.061298
AUC of ROC = 0.915003
AUC of PRC = 0.701613
min(+P, Se) = 0.634669

-------------------------------

confusion matrix:
[[5649   59]
 [ 574  340]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.13796499371528625
difference in average predicted and observed risk = -6.000628471375391e-05
number samples = 6622
accuracy = 0.90441
precision class 0 = 0.907762
precision class 1 = 0.85213
recall class 0 = 0.989664
recall class 1 = 0.371991
false negative rate = 0.628009
false positive rate = 0.010336
positive prediction rate = 0.060254
AUC of ROC = 0.904121
AUC of PRC = 0.679284
min(+P, Se) = 0.598485

-------------------------------

confusion matrix:
[[8960   86]
 [ 881  482]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.12891000509262085
difference in average predicted and observed risk = -0.0020339949073791552
number samples = 10409
accuracy = 0.9071
precision class 0 = 0.910477
precision class 1 = 0.848592
recall class 0 = 0.990493
recall class 1 = 0.353632
false negative rate = 0.646368
false positive rate = 0.009507
positive prediction rate = 0.054568
AUC of ROC = 0.908922
AUC of PRC = 0.680574
min(+P, Se) = 0.605282

-------------------------------

confusion matrix:
[[1615   26]
 [ 238  169]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1545329988002777
difference in average predicted and observed risk = -0.04419700119972228
number samples = 2048
accuracy = 0.871094
precision class 0 = 0.87156
precision class 1 = 0.866667
recall class 0 = 0.984156
recall class 1 = 0.415233
false negative rate = 0.584767
false positive rate = 0.015844
positive prediction rate = 0.095215
AUC of ROC = 0.919172
AUC of PRC = 0.769426
min(+P, Se) = 0.686275

-------------------------------

confusion matrix:
[[1267   15]
 [  72   54]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.12271899729967117
difference in average predicted and observed risk = 0.033229997299671174
number samples = 1408
accuracy = 0.93821
precision class 0 = 0.946229
precision class 1 = 0.782609
recall class 0 = 0.9883
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.0117
positive prediction rate = 0.049006
AUC of ROC = 0.911578
AUC of PRC = 0.643576
min(+P, Se) = 0.596899

-------------------------------

confusion matrix:
[[286  10]
 [ 28  24]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1580280065536499
difference in average predicted and observed risk = 0.0086030065536499
number samples = 348
accuracy = 0.890805
precision class 0 = 0.910828
precision class 1 = 0.705882
recall class 0 = 0.966216
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.033784
positive prediction rate = 0.097701
AUC of ROC = 0.894815
AUC of PRC = 0.667785
min(+P, Se) = 0.641509

-------------------------------

confusion matrix:
[[423   6]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11673600226640701
difference in average predicted and observed risk = 0.03340300226640701
number samples = 468
accuracy = 0.948718
precision class 0 = 0.959184
precision class 1 = 0.777778
recall class 0 = 0.986014
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.013986
positive prediction rate = 0.057692
AUC of ROC = 0.894985
AUC of PRC = 0.662094
min(+P, Se) = 0.589744

-------------------------------

confusion matrix:
[[12551   143]
 [ 1237   750]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.13219299912452698
difference in average predicted and observed risk = -0.0031520008754730156
number samples = 14681
accuracy = 0.906001
precision class 0 = 0.910284
precision class 1 = 0.839866
recall class 0 = 0.988735
recall class 1 = 0.377453
false negative rate = 0.622547
false positive rate = 0.011265
positive prediction rate = 0.060827
AUC of ROC = 0.910085
AUC of PRC = 0.69138
min(+P, Se) = 0.618282

-------------------------------

==>predicting on validation



confusion matrix:
[[1502   33]
 [ 193   85]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.14497800171375275
difference in average predicted and observed risk = -0.008358998286247254
number samples = 1813
accuracy = 0.875345
precision class 0 = 0.886136
precision class 1 = 0.720339
recall class 0 = 0.978502
recall class 1 = 0.305755
false negative rate = 0.694245
false positive rate = 0.021498
positive prediction rate = 0.065085
AUC of ROC = 0.850116
AUC of PRC = 0.579837
min(+P, Se) = 0.535971

-------------------------------

confusion matrix:
[[887  20]
 [ 83  30]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11642900109291077
difference in average predicted and observed risk = 0.005645001092910773
number samples = 1020
accuracy = 0.89902
precision class 0 = 0.914433
precision class 1 = 0.6
recall class 0 = 0.977949
recall class 1 = 0.265487
false negative rate = 0.734513
false positive rate = 0.022051
positive prediction rate = 0.04902
AUC of ROC = 0.862417
AUC of PRC = 0.495147
min(+P, Se) = 0.477876

-------------------------------

confusion matrix:
[[242   9]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13839100301265717
difference in average predicted and observed risk = 0.019093003012657164
number samples = 285
accuracy = 0.901754
precision class 0 = 0.927203
precision class 1 = 0.625
recall class 0 = 0.964143
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.035857
positive prediction rate = 0.084211
AUC of ROC = 0.901453
AUC of PRC = 0.660308
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10344800353050232
difference in average predicted and observed risk = 0.013704003530502315
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.804829
AUC of PRC = 0.378099
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[20  2]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18776699900627136
difference in average predicted and observed risk = 0.03392099900627135
number samples = 26
accuracy = 0.884615
precision class 0 = 0.952381
precision class 1 = 0.6
recall class 0 = 0.909091
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.090909
positive prediction rate = 0.192308
AUC of ROC = 0.954545
AUC of PRC = 0.795833
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[1488   41]
 [ 166   78]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.13269400596618652
difference in average predicted and observed risk = -0.004925994033813469
number samples = 1773
accuracy = 0.883249
precision class 0 = 0.899637
precision class 1 = 0.655462
recall class 0 = 0.973185
recall class 1 = 0.319672
false negative rate = 0.680328
false positive rate = 0.026815
positive prediction rate = 0.067118
AUC of ROC = 0.860771
AUC of PRC = 0.557849
min(+P, Se) = 0.536885

-------------------------------

confusion matrix:
[[1232   25]
 [ 136   56]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.13714799284934998
difference in average predicted and observed risk = 0.004642992849349964
number samples = 1449
accuracy = 0.888889
precision class 0 = 0.900585
precision class 1 = 0.691358
recall class 0 = 0.980111
recall class 1 = 0.291667
false negative rate = 0.708333
false positive rate = 0.019889
positive prediction rate = 0.055901
AUC of ROC = 0.860672
AUC of PRC = 0.572841
min(+P, Se) = 0.515464

-------------------------------

confusion matrix:
[[1936   42]
 [ 222   89]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.13244299590587616
difference in average predicted and observed risk = -0.003424004094123828
number samples = 2289
accuracy = 0.884666
precision class 0 = 0.897127
precision class 1 = 0.679389
recall class 0 = 0.978766
recall class 1 = 0.286174
false negative rate = 0.713826
false positive rate = 0.021234
positive prediction rate = 0.05723
AUC of ROC = 0.855348
AUC of PRC = 0.553582
min(+P, Se) = 0.519231

-------------------------------

confusion matrix:
[[357  11]
 [ 55  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1500380039215088
difference in average predicted and observed risk = -0.030362996078491217
number samples = 449
accuracy = 0.853007
precision class 0 = 0.866505
precision class 1 = 0.702703
recall class 0 = 0.970109
recall class 1 = 0.320988
false negative rate = 0.679012
false positive rate = 0.029891
positive prediction rate = 0.082405
AUC of ROC = 0.866177
AUC of PRC = 0.635872
min(+P, Se) = 0.573171

-------------------------------

confusion matrix:
[[271   7]
 [ 18  12]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.12623700499534607
difference in average predicted and observed risk = 0.028834004995346066
number samples = 308
accuracy = 0.918831
precision class 0 = 0.937716
precision class 1 = 0.631579
recall class 0 = 0.97482
recall class 1 = 0.4
false negative rate = 0.6
false positive rate = 0.02518
positive prediction rate = 0.061688
AUC of ROC = 0.884772
AUC of PRC = 0.554817
min(+P, Se) = 0.566667

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11918400228023529
difference in average predicted and observed risk = 0.047019002280235284
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.884127
AUC of PRC = 0.359406
min(+P, Se) = 0.3

-------------------------------

confusion matrix:
[[70  2]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.16486400365829468
difference in average predicted and observed risk = 0.07625600365829467
number samples = 79
accuracy = 0.949367
precision class 0 = 0.972222
precision class 1 = 0.714286
recall class 0 = 0.972222
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.027778
positive prediction rate = 0.088608
AUC of ROC = 0.900794
AUC of PRC = 0.749374
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2720   66]
 [ 302  134]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.13469800353050232
difference in average predicted and observed risk = -0.0006219964694976765
number samples = 3222
accuracy = 0.885785
precision class 0 = 0.900066
precision class 1 = 0.67
recall class 0 = 0.97631
recall class 1 = 0.307339
false negative rate = 0.692661
false positive rate = 0.02369
positive prediction rate = 0.062073
AUC of ROC = 0.860203
AUC of PRC = 0.56371
min(+P, Se) = 0.529545

-------------------------------

Epoch 00056: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch56.state
Epoch 57/100
 - 816s - loss: 0.2654 - val_loss: 0.2843

==>predicting on train



confusion matrix:
[[6991   45]
 [ 988  324]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.11223399639129639
difference in average predicted and observed risk = -0.04492900360870361
number samples = 8348
accuracy = 0.876258
precision class 0 = 0.876175
precision class 1 = 0.878049
recall class 0 = 0.993604
recall class 1 = 0.246951
false negative rate = 0.753049
false positive rate = 0.006396
positive prediction rate = 0.044202
AUC of ROC = 0.893076
AUC of PRC = 0.672591
min(+P, Se) = 0.601372

-------------------------------

confusion matrix:
[[3974   28]
 [ 298  173]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.09350699931383133
difference in average predicted and observed risk = -0.011791000686168673
number samples = 4473
accuracy = 0.927118
precision class 0 = 0.930243
precision class 1 = 0.860696
recall class 0 = 0.993003
recall class 1 = 0.367304
false negative rate = 0.632696
false positive rate = 0.006997
positive prediction rate = 0.044936
AUC of ROC = 0.916846
AUC of PRC = 0.684585
min(+P, Se) = 0.61945

-------------------------------

confusion matrix:
[[1184   11]
 [  95   48]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.09960799664258957
difference in average predicted and observed risk = -0.00726800335741043
number samples = 1338
accuracy = 0.920777
precision class 0 = 0.925723
precision class 1 = 0.813559
recall class 0 = 0.990795
recall class 1 = 0.335664
false negative rate = 0.664336
false positive rate = 0.009205
positive prediction rate = 0.044096
AUC of ROC = 0.919993
AUC of PRC = 0.657513
min(+P, Se) = 0.611111

-------------------------------

confusion matrix:
[[349   1]
 [ 27  12]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.08882399648427963
difference in average predicted and observed risk = -0.011433003515720366
number samples = 389
accuracy = 0.928021
precision class 0 = 0.928191
precision class 1 = 0.923077
recall class 0 = 0.997143
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.002857
positive prediction rate = 0.033419
AUC of ROC = 0.919414
AUC of PRC = 0.736292
min(+P, Se) = 0.7

-------------------------------

confusion matrix:
[[109   2]
 [ 10  12]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.14783799648284912
difference in average predicted and observed risk = -0.017576003517150884
number samples = 133
accuracy = 0.909774
precision class 0 = 0.915966
precision class 1 = 0.857143
recall class 0 = 0.981982
recall class 1 = 0.545455
false negative rate = 0.454545
false positive rate = 0.018018
positive prediction rate = 0.105263
AUC of ROC = 0.940213
AUC of PRC = 0.83707
min(+P, Se) = 0.782609

-------------------------------

confusion matrix:
[[6937   49]
 [ 753  320]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.10115700215101242
difference in average predicted and observed risk = -0.03198599784898759
number samples = 8059
accuracy = 0.900484
precision class 0 = 0.902081
precision class 1 = 0.867209
recall class 0 = 0.992986
recall class 1 = 0.298229
false negative rate = 0.701771
false positive rate = 0.007014
positive prediction rate = 0.045787
AUC of ROC = 0.908942
AUC of PRC = 0.685937
min(+P, Se) = 0.622554

-------------------------------

confusion matrix:
[[5670   38]
 [ 665  249]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.10985399782657623
difference in average predicted and observed risk = -0.028171002173423776
number samples = 6622
accuracy = 0.893839
precision class 0 = 0.895028
precision class 1 = 0.867596
recall class 0 = 0.993343
recall class 1 = 0.272429
false negative rate = 0.727571
false positive rate = 0.006657
positive prediction rate = 0.04334
AUC of ROC = 0.898335
AUC of PRC = 0.662108
min(+P, Se) = 0.592998

-------------------------------

confusion matrix:
[[8989   57]
 [1000  363]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10119099915027618
difference in average predicted and observed risk = -0.02975300084972382
number samples = 10409
accuracy = 0.898453
precision class 0 = 0.89989
precision class 1 = 0.864286
recall class 0 = 0.993699
recall class 1 = 0.266324
false negative rate = 0.733676
false positive rate = 0.006301
positive prediction rate = 0.04035
AUC of ROC = 0.902044
AUC of PRC = 0.660508
min(+P, Se) = 0.58871

-------------------------------

confusion matrix:
[[1626   15]
 [ 279  128]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1286810040473938
difference in average predicted and observed risk = -0.07004899595260619
number samples = 2048
accuracy = 0.856445
precision class 0 = 0.853543
precision class 1 = 0.895105
recall class 0 = 0.990859
recall class 1 = 0.314496
false negative rate = 0.685504
false positive rate = 0.009141
positive prediction rate = 0.069824
AUC of ROC = 0.915805
AUC of PRC = 0.757394
min(+P, Se) = 0.673219

-------------------------------

confusion matrix:
[[1274    8]
 [  80   46]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.09730300307273865
difference in average predicted and observed risk = 0.007814003072738648
number samples = 1408
accuracy = 0.9375
precision class 0 = 0.940916
precision class 1 = 0.851852
recall class 0 = 0.99376
recall class 1 = 0.365079
false negative rate = 0.634921
false positive rate = 0.00624
positive prediction rate = 0.038352
AUC of ROC = 0.906019
AUC of PRC = 0.640991
min(+P, Se) = 0.618321

-------------------------------

confusion matrix:
[[290   6]
 [ 35  17]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1314380019903183
difference in average predicted and observed risk = -0.017986998009681704
number samples = 348
accuracy = 0.882184
precision class 0 = 0.892308
precision class 1 = 0.73913
recall class 0 = 0.97973
recall class 1 = 0.326923
false negative rate = 0.673077
false positive rate = 0.02027
positive prediction rate = 0.066092
AUC of ROC = 0.877924
AUC of PRC = 0.663525
min(+P, Se) = 0.641509

-------------------------------

confusion matrix:
[[428   1]
 [ 24  15]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.0920799970626831
difference in average predicted and observed risk = 0.008746997062683101
number samples = 468
accuracy = 0.946581
precision class 0 = 0.946903
precision class 1 = 0.9375
recall class 0 = 0.997669
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.002331
positive prediction rate = 0.034188
AUC of ROC = 0.893252
AUC of PRC = 0.653518
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12607    87]
 [ 1418   569]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.1050800010561943
difference in average predicted and observed risk = -0.030264998943805688
number samples = 14681
accuracy = 0.897487
precision class 0 = 0.898895
precision class 1 = 0.867378
recall class 0 = 0.993146
recall class 1 = 0.286361
false negative rate = 0.713639
false positive rate = 0.006854
positive prediction rate = 0.044684
AUC of ROC = 0.904097
AUC of PRC = 0.67486
min(+P, Se) = 0.60804

-------------------------------

==>predicting on validation



confusion matrix:
[[1516   19]
 [ 217   61]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.11478900164365768
difference in average predicted and observed risk = -0.03854799835634232
number samples = 1813
accuracy = 0.869829
precision class 0 = 0.874784
precision class 1 = 0.7625
recall class 0 = 0.987622
recall class 1 = 0.219424
false negative rate = 0.780576
false positive rate = 0.012378
positive prediction rate = 0.044126
AUC of ROC = 0.856488
AUC of PRC = 0.582969
min(+P, Se) = 0.535971

-------------------------------

confusion matrix:
[[899   8]
 [ 89  24]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.09096100181341171
difference in average predicted and observed risk = -0.01982299818658828
number samples = 1020
accuracy = 0.904902
precision class 0 = 0.909919
precision class 1 = 0.75
recall class 0 = 0.99118
recall class 1 = 0.212389
false negative rate = 0.787611
false positive rate = 0.00882
positive prediction rate = 0.031373
AUC of ROC = 0.85911
AUC of PRC = 0.513162
min(+P, Se) = 0.495726

-------------------------------

confusion matrix:
[[248   3]
 [ 22  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.11171499639749527
difference in average predicted and observed risk = -0.0075830036025047315
number samples = 285
accuracy = 0.912281
precision class 0 = 0.918519
precision class 1 = 0.8
recall class 0 = 0.988048
recall class 1 = 0.352941
false negative rate = 0.647059
false positive rate = 0.011952
positive prediction rate = 0.052632
AUC of ROC = 0.882939
AUC of PRC = 0.648547
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08825799822807312
difference in average predicted and observed risk = -0.0014860017719268842
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.778672
AUC of PRC = 0.407734
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18413099646568298
difference in average predicted and observed risk = 0.030284996465682973
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1508   21]
 [ 181   63]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.10528499633073807
difference in average predicted and observed risk = -0.032335003669261925
number samples = 1773
accuracy = 0.886069
precision class 0 = 0.892836
precision class 1 = 0.75
recall class 0 = 0.986266
recall class 1 = 0.258197
false negative rate = 0.741803
false positive rate = 0.013734
positive prediction rate = 0.047377
AUC of ROC = 0.859822
AUC of PRC = 0.566221
min(+P, Se) = 0.528689

-------------------------------

confusion matrix:
[[1245   12]
 [ 154   38]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.10885600000619888
difference in average predicted and observed risk = -0.02364899999380113
number samples = 1449
accuracy = 0.885438
precision class 0 = 0.889921
precision class 1 = 0.76
recall class 0 = 0.990453
recall class 1 = 0.197917
false negative rate = 0.802083
false positive rate = 0.009547
positive prediction rate = 0.034507
AUC of ROC = 0.863647
AUC of PRC = 0.569018
min(+P, Se) = 0.557292

-------------------------------

confusion matrix:
[[1958   20]
 [ 243   68]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.10415299981832504
difference in average predicted and observed risk = -0.031714000181674945
number samples = 2289
accuracy = 0.885103
precision class 0 = 0.889596
precision class 1 = 0.772727
recall class 0 = 0.989889
recall class 1 = 0.21865
false negative rate = 0.78135
false positive rate = 0.010111
positive prediction rate = 0.038445
AUC of ROC = 0.861496
AUC of PRC = 0.565331
min(+P, Se) = 0.528846

-------------------------------

confusion matrix:
[[364   4]
 [ 59  22]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.12450599670410156
difference in average predicted and observed risk = -0.05589500329589844
number samples = 449
accuracy = 0.859688
precision class 0 = 0.86052
precision class 1 = 0.846154
recall class 0 = 0.98913
recall class 1 = 0.271605
false negative rate = 0.728395
false positive rate = 0.01087
positive prediction rate = 0.057906
AUC of ROC = 0.855643
AUC of PRC = 0.628656
min(+P, Se) = 0.566265

-------------------------------

confusion matrix:
[[274   4]
 [ 24   6]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.09605500102043152
difference in average predicted and observed risk = -0.001347998979568485
number samples = 308
accuracy = 0.909091
precision class 0 = 0.919463
precision class 1 = 0.6
recall class 0 = 0.985611
recall class 1 = 0.2
false negative rate = 0.8
false positive rate = 0.014388
positive prediction rate = 0.032468
AUC of ROC = 0.865348
AUC of PRC = 0.523192
min(+P, Se) = 0.580645

-------------------------------

confusion matrix:
[[86  4]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10087300091981888
difference in average predicted and observed risk = 0.02870800091981887
number samples = 97
accuracy = 0.896907
precision class 0 = 0.934783
precision class 1 = 0.2
recall class 0 = 0.955556
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.044444
positive prediction rate = 0.051546
AUC of ROC = 0.88254
AUC of PRC = 0.369181
min(+P, Se) = 0.357143

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.13574500381946564
difference in average predicted and observed risk = 0.04713700381946563
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.892857
AUC of PRC = 0.714171
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2753   33]
 [ 335  101]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.10689099878072739
difference in average predicted and observed risk = -0.02842900121927261
number samples = 3222
accuracy = 0.885785
precision class 0 = 0.891516
precision class 1 = 0.753731
recall class 0 = 0.988155
recall class 1 = 0.231651
false negative rate = 0.768349
false positive rate = 0.011845
positive prediction rate = 0.041589
AUC of ROC = 0.860954
AUC of PRC = 0.56669
min(+P, Se) = 0.535469

-------------------------------

Epoch 00057: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch57.state
Epoch 58/100
 - 823s - loss: 0.2688 - val_loss: 0.2832

==>predicting on train



confusion matrix:
[[6980   56]
 [ 931  381]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.1221269965171814
difference in average predicted and observed risk = -0.0350360034828186
number samples = 8348
accuracy = 0.881768
precision class 0 = 0.882316
precision class 1 = 0.871854
recall class 0 = 0.992041
recall class 1 = 0.290396
false negative rate = 0.709604
false positive rate = 0.007959
positive prediction rate = 0.052348
AUC of ROC = 0.894393
AUC of PRC = 0.677698
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[3966   36]
 [ 276  195]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10195799916982651
difference in average predicted and observed risk = -0.003340000830173495
number samples = 4473
accuracy = 0.930248
precision class 0 = 0.934936
precision class 1 = 0.844156
recall class 0 = 0.991005
recall class 1 = 0.414013
false negative rate = 0.585987
false positive rate = 0.008996
positive prediction rate = 0.051643
AUC of ROC = 0.920235
AUC of PRC = 0.688962
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[1186    9]
 [  84   59]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10855399817228317
difference in average predicted and observed risk = 0.0016779981722831738
number samples = 1338
accuracy = 0.930493
precision class 0 = 0.933858
precision class 1 = 0.867647
recall class 0 = 0.992469
recall class 1 = 0.412587
false negative rate = 0.587413
false positive rate = 0.007531
positive prediction rate = 0.050822
AUC of ROC = 0.925704
AUC of PRC = 0.685772
min(+P, Se) = 0.608392

-------------------------------

confusion matrix:
[[349   1]
 [ 26  13]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09802000224590302
difference in average predicted and observed risk = -0.0022369977540969838
number samples = 389
accuracy = 0.930591
precision class 0 = 0.930667
precision class 1 = 0.928571
recall class 0 = 0.997143
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.002857
positive prediction rate = 0.03599
AUC of ROC = 0.927985
AUC of PRC = 0.706487
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16422300040721893
difference in average predicted and observed risk = -0.0011909995927810724
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.952088
AUC of PRC = 0.865817
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6931   55]
 [ 706  367]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11035499721765518
difference in average predicted and observed risk = -0.02278800278234483
number samples = 8059
accuracy = 0.905571
precision class 0 = 0.907555
precision class 1 = 0.869668
recall class 0 = 0.992127
recall class 1 = 0.342032
false negative rate = 0.657968
false positive rate = 0.007873
positive prediction rate = 0.052364
AUC of ROC = 0.911613
AUC of PRC = 0.690766
min(+P, Se) = 0.617894

-------------------------------

confusion matrix:
[[5659   49]
 [ 618  296]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11951600015163422
difference in average predicted and observed risk = -0.018508999848365792
number samples = 6622
accuracy = 0.899275
precision class 0 = 0.901545
precision class 1 = 0.857971
recall class 0 = 0.991416
recall class 1 = 0.323851
false negative rate = 0.676149
false positive rate = 0.008584
positive prediction rate = 0.052099
AUC of ROC = 0.90015
AUC of PRC = 0.668044
min(+P, Se) = 0.590164

-------------------------------

confusion matrix:
[[8973   73]
 [ 940  423]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11033999919891357
difference in average predicted and observed risk = -0.02060400080108643
number samples = 10409
accuracy = 0.90268
precision class 0 = 0.905175
precision class 1 = 0.852823
recall class 0 = 0.99193
recall class 1 = 0.310345
false negative rate = 0.689655
false positive rate = 0.00807
positive prediction rate = 0.047651
AUC of ROC = 0.904182
AUC of PRC = 0.66352
min(+P, Se) = 0.588408

-------------------------------

confusion matrix:
[[1625   16]
 [ 255  152]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14026600122451782
difference in average predicted and observed risk = -0.05846399877548217
number samples = 2048
accuracy = 0.867676
precision class 0 = 0.864362
precision class 1 = 0.904762
recall class 0 = 0.99025
recall class 1 = 0.373464
false negative rate = 0.626536
false positive rate = 0.00975
positive prediction rate = 0.082031
AUC of ROC = 0.917748
AUC of PRC = 0.762892
min(+P, Se) = 0.667482

-------------------------------

confusion matrix:
[[1274    8]
 [  77   49]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.1052509993314743
difference in average predicted and observed risk = 0.015761999331474305
number samples = 1408
accuracy = 0.939631
precision class 0 = 0.943005
precision class 1 = 0.859649
recall class 0 = 0.99376
recall class 1 = 0.388889
false negative rate = 0.611111
false positive rate = 0.00624
positive prediction rate = 0.040483
AUC of ROC = 0.907659
AUC of PRC = 0.654432
min(+P, Se) = 0.609375

-------------------------------

confusion matrix:
[[291   5]
 [ 31  21]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1388469934463501
difference in average predicted and observed risk = -0.010578006553649905
number samples = 348
accuracy = 0.896552
precision class 0 = 0.903727
precision class 1 = 0.807692
recall class 0 = 0.983108
recall class 1 = 0.403846
false negative rate = 0.596154
false positive rate = 0.016892
positive prediction rate = 0.074713
AUC of ROC = 0.897154
AUC of PRC = 0.681917
min(+P, Se) = 0.622642

-------------------------------

confusion matrix:
[[427   2]
 [ 21  18]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10359600186347961
difference in average predicted and observed risk = 0.02026300186347961
number samples = 468
accuracy = 0.950855
precision class 0 = 0.953125
precision class 1 = 0.9
recall class 0 = 0.995338
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.004662
positive prediction rate = 0.042735
AUC of ROC = 0.885602
AUC of PRC = 0.654136
min(+P, Se) = 0.538462

-------------------------------

confusion matrix:
[[12590   104]
 [ 1324   663]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11448699980974197
difference in average predicted and observed risk = -0.02085800019025802
number samples = 14681
accuracy = 0.902731
precision class 0 = 0.904844
precision class 1 = 0.864407
recall class 0 = 0.991807
recall class 1 = 0.333669
false negative rate = 0.666331
false positive rate = 0.008193
positive prediction rate = 0.052244
AUC of ROC = 0.906413
AUC of PRC = 0.680239
min(+P, Se) = 0.602416

-------------------------------

==>predicting on validation



confusion matrix:
[[1512   23]
 [ 203   75]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12475799769163132
difference in average predicted and observed risk = -0.028579002308368684
number samples = 1813
accuracy = 0.875345
precision class 0 = 0.881633
precision class 1 = 0.765306
recall class 0 = 0.985016
recall class 1 = 0.269784
false negative rate = 0.730216
false positive rate = 0.014984
positive prediction rate = 0.054054
AUC of ROC = 0.845727
AUC of PRC = 0.582088
min(+P, Se) = 0.539568

-------------------------------

confusion matrix:
[[896  11]
 [ 86  27]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10176999866962433
difference in average predicted and observed risk = -0.009014001330375665
number samples = 1020
accuracy = 0.904902
precision class 0 = 0.912424
precision class 1 = 0.710526
recall class 0 = 0.987872
recall class 1 = 0.238938
false negative rate = 0.761062
false positive rate = 0.012128
positive prediction rate = 0.037255
AUC of ROC = 0.854124
AUC of PRC = 0.510735
min(+P, Se) = 0.491228

-------------------------------

confusion matrix:
[[244   7]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12272699922323227
difference in average predicted and observed risk = 0.003428999223232268
number samples = 285
accuracy = 0.905263
precision class 0 = 0.924242
precision class 1 = 0.666667
recall class 0 = 0.972112
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.027888
positive prediction rate = 0.073684
AUC of ROC = 0.902742
AUC of PRC = 0.65669
min(+P, Se) = 0.621622

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09069699794054031
difference in average predicted and observed risk = 0.0009529979405403094
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.83501
AUC of PRC = 0.397495
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17684200406074524
difference in average predicted and observed risk = 0.02299600406074523
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1500   29]
 [ 173   71]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11566600203514099
difference in average predicted and observed risk = -0.021953997964859
number samples = 1773
accuracy = 0.886069
precision class 0 = 0.896593
precision class 1 = 0.71
recall class 0 = 0.981033
recall class 1 = 0.290984
false negative rate = 0.709016
false positive rate = 0.018967
positive prediction rate = 0.056402
AUC of ROC = 0.857638
AUC of PRC = 0.569232
min(+P, Se) = 0.512195

-------------------------------

confusion matrix:
[[1242   15]
 [ 143   49]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11840199679136276
difference in average predicted and observed risk = -0.01410300320863725
number samples = 1449
accuracy = 0.890959
precision class 0 = 0.896751
precision class 1 = 0.765625
recall class 0 = 0.988067
recall class 1 = 0.255208
false negative rate = 0.744792
false positive rate = 0.011933
positive prediction rate = 0.044168
AUC of ROC = 0.854071
AUC of PRC = 0.568087
min(+P, Se) = 0.541667

-------------------------------

confusion matrix:
[[1951   27]
 [ 230   81]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11411800235509872
difference in average predicted and observed risk = -0.021748997644901263
number samples = 2289
accuracy = 0.887724
precision class 0 = 0.894544
precision class 1 = 0.75
recall class 0 = 0.98635
recall class 1 = 0.26045
false negative rate = 0.73955
false positive rate = 0.01365
positive prediction rate = 0.047182
AUC of ROC = 0.852087
AUC of PRC = 0.56196
min(+P, Se) = 0.514469

-------------------------------

confusion matrix:
[[360   8]
 [ 58  23]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13526999950408936
difference in average predicted and observed risk = -0.04513100049591065
number samples = 449
accuracy = 0.853007
precision class 0 = 0.861244
precision class 1 = 0.741935
recall class 0 = 0.978261
recall class 1 = 0.283951
false negative rate = 0.716049
false positive rate = 0.021739
positive prediction rate = 0.069042
AUC of ROC = 0.859467
AUC of PRC = 0.635123
min(+P, Se) = 0.568182

-------------------------------

confusion matrix:
[[274   4]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10625799745321274
difference in average predicted and observed risk = 0.008854997453212735
number samples = 308
accuracy = 0.918831
precision class 0 = 0.928814
precision class 1 = 0.692308
recall class 0 = 0.985611
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.014388
positive prediction rate = 0.042208
AUC of ROC = 0.868945
AUC of PRC = 0.526968
min(+P, Se) = 0.548387

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.1080470010638237
difference in average predicted and observed risk = 0.03588200106382369
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.887302
AUC of PRC = 0.383829
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[71  1]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14531199634075165
difference in average predicted and observed risk = 0.05670399634075164
number samples = 79
accuracy = 0.962025
precision class 0 = 0.972603
precision class 1 = 0.833333
recall class 0 = 0.986111
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.013889
positive prediction rate = 0.075949
AUC of ROC = 0.918651
AUC of PRC = 0.76085
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2742   44]
 [ 316  120]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11689700186252594
difference in average predicted and observed risk = -0.018422998137474056
number samples = 3222
accuracy = 0.888268
precision class 0 = 0.896665
precision class 1 = 0.731707
recall class 0 = 0.984207
recall class 1 = 0.275229
false negative rate = 0.724771
false positive rate = 0.015793
positive prediction rate = 0.0509
AUC of ROC = 0.855644
AUC of PRC = 0.567612
min(+P, Se) = 0.527523

-------------------------------

Epoch 00058: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch58.state
Epoch 59/100
 - 822s - loss: 0.2670 - val_loss: 0.2815

==>predicting on train



confusion matrix:
[[6965   71]
 [ 910  402]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13084399700164795
difference in average predicted and observed risk = -0.026319002998352048
number samples = 8348
accuracy = 0.882487
precision class 0 = 0.884444
precision class 1 = 0.849894
recall class 0 = 0.989909
recall class 1 = 0.306402
false negative rate = 0.693598
false positive rate = 0.010091
positive prediction rate = 0.05666
AUC of ROC = 0.899201
AUC of PRC = 0.685725
min(+P, Se) = 0.610518

-------------------------------

confusion matrix:
[[3953   49]
 [ 259  212]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10962700098752975
difference in average predicted and observed risk = 0.004329000987529752
number samples = 4473
accuracy = 0.931142
precision class 0 = 0.938509
precision class 1 = 0.812261
recall class 0 = 0.987756
recall class 1 = 0.450106
false negative rate = 0.549894
false positive rate = 0.012244
positive prediction rate = 0.05835
AUC of ROC = 0.924341
AUC of PRC = 0.704856
min(+P, Se) = 0.631356

-------------------------------

confusion matrix:
[[1180   15]
 [  82   61]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11650700122117996
difference in average predicted and observed risk = 0.009631001221179963
number samples = 1338
accuracy = 0.927504
precision class 0 = 0.935024
precision class 1 = 0.802632
recall class 0 = 0.987448
recall class 1 = 0.426573
false negative rate = 0.573427
false positive rate = 0.012552
positive prediction rate = 0.056801
AUC of ROC = 0.923826
AUC of PRC = 0.681641
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[348   2]
 [ 20  19]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10648199915885925
difference in average predicted and observed risk = 0.006224999158859254
number samples = 389
accuracy = 0.943445
precision class 0 = 0.945652
precision class 1 = 0.904762
recall class 0 = 0.994286
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.005714
positive prediction rate = 0.053985
AUC of ROC = 0.930916
AUC of PRC = 0.737143
min(+P, Se) = 0.75

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.17104099690914154
difference in average predicted and observed risk = 0.005626996909141535
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.952088
AUC of PRC = 0.861797
min(+P, Se) = 0.782609

-------------------------------

confusion matrix:
[[6906   80]
 [ 685  388]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11876299977302551
difference in average predicted and observed risk = -0.014380000226974499
number samples = 8059
accuracy = 0.905075
precision class 0 = 0.909762
precision class 1 = 0.82906
recall class 0 = 0.988549
recall class 1 = 0.361603
false negative rate = 0.638397
false positive rate = 0.011451
positive prediction rate = 0.058072
AUC of ROC = 0.915778
AUC of PRC = 0.69835
min(+P, Se) = 0.631873

-------------------------------

confusion matrix:
[[5649   59]
 [ 593  321]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.1276939958333969
difference in average predicted and observed risk = -0.010331004166603097
number samples = 6622
accuracy = 0.90154
precision class 0 = 0.904998
precision class 1 = 0.844737
recall class 0 = 0.989664
recall class 1 = 0.351204
false negative rate = 0.648796
false positive rate = 0.010336
positive prediction rate = 0.057384
AUC of ROC = 0.903871
AUC of PRC = 0.680128
min(+P, Se) = 0.603279

-------------------------------

confusion matrix:
[[8958   88]
 [ 913  450]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.1185149997472763
difference in average predicted and observed risk = -0.012429000252723699
number samples = 10409
accuracy = 0.903833
precision class 0 = 0.907507
precision class 1 = 0.836431
recall class 0 = 0.990272
recall class 1 = 0.330154
false negative rate = 0.669846
false positive rate = 0.009728
positive prediction rate = 0.051686
AUC of ROC = 0.909254
AUC of PRC = 0.675712
min(+P, Se) = 0.600147

-------------------------------

confusion matrix:
[[1615   26]
 [ 241  166]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14907699823379517
difference in average predicted and observed risk = -0.049653001766204824
number samples = 2048
accuracy = 0.869629
precision class 0 = 0.870151
precision class 1 = 0.864583
recall class 0 = 0.984156
recall class 1 = 0.407862
false negative rate = 0.592138
false positive rate = 0.015844
positive prediction rate = 0.09375
AUC of ROC = 0.920044
AUC of PRC = 0.770308
min(+P, Se) = 0.685504

-------------------------------

confusion matrix:
[[1270   12]
 [  71   55]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11481499671936035
difference in average predicted and observed risk = 0.025325996719360352
number samples = 1408
accuracy = 0.941051
precision class 0 = 0.947054
precision class 1 = 0.820895
recall class 0 = 0.99064
recall class 1 = 0.436508
false negative rate = 0.563492
false positive rate = 0.00936
positive prediction rate = 0.047585
AUC of ROC = 0.909597
AUC of PRC = 0.659123
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[287   9]
 [ 32  20]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14614200592041016
difference in average predicted and observed risk = -0.003282994079589846
number samples = 348
accuracy = 0.882184
precision class 0 = 0.899687
precision class 1 = 0.689655
recall class 0 = 0.969595
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.030405
positive prediction rate = 0.083333
AUC of ROC = 0.890333
AUC of PRC = 0.668648
min(+P, Se) = 0.648148

-------------------------------

confusion matrix:
[[425   4]
 [ 21  18]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10951799899339676
difference in average predicted and observed risk = 0.026184998993396755
number samples = 468
accuracy = 0.946581
precision class 0 = 0.952915
precision class 1 = 0.818182
recall class 0 = 0.990676
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.009324
positive prediction rate = 0.047009
AUC of ROC = 0.897197
AUC of PRC = 0.659561
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12555   139]
 [ 1278   709]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12279099971055984
difference in average predicted and observed risk = -0.012554000289440148
number samples = 14681
accuracy = 0.903481
precision class 0 = 0.907612
precision class 1 = 0.836085
recall class 0 = 0.98905
recall class 1 = 0.356819
false negative rate = 0.643181
false positive rate = 0.01095
positive prediction rate = 0.057762
AUC of ROC = 0.910452
AUC of PRC = 0.689969
min(+P, Se) = 0.618712

-------------------------------

==>predicting on validation



confusion matrix:
[[1503   32]
 [ 200   78]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13318400084972382
difference in average predicted and observed risk = -0.020152999150276185
number samples = 1813
accuracy = 0.872035
precision class 0 = 0.88256
precision class 1 = 0.709091
recall class 0 = 0.979153
recall class 1 = 0.280576
false negative rate = 0.719424
false positive rate = 0.020847
positive prediction rate = 0.060673
AUC of ROC = 0.846495
AUC of PRC = 0.575124
min(+P, Se) = 0.521583

-------------------------------

confusion matrix:
[[894  13]
 [ 78  35]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10802599787712097
difference in average predicted and observed risk = -0.002758002122879022
number samples = 1020
accuracy = 0.910784
precision class 0 = 0.919753
precision class 1 = 0.729167
recall class 0 = 0.985667
recall class 1 = 0.309735
false negative rate = 0.690265
false positive rate = 0.014333
positive prediction rate = 0.047059
AUC of ROC = 0.858807
AUC of PRC = 0.521005
min(+P, Se) = 0.482456

-------------------------------

confusion matrix:
[[244   7]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13414399325847626
difference in average predicted and observed risk = 0.014845993258476256
number samples = 285
accuracy = 0.908772
precision class 0 = 0.927757
precision class 1 = 0.681818
recall class 0 = 0.972112
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.027888
positive prediction rate = 0.077193
AUC of ROC = 0.904031
AUC of PRC = 0.637027
min(+P, Se) = 0.589744

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.0982619971036911
difference in average predicted and observed risk = 0.008517997103691097
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.812877
AUC of PRC = 0.431339
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18321000039577484
difference in average predicted and observed risk = 0.02936400039577483
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1493   36]
 [ 163   81]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12426400184631348
difference in average predicted and observed risk = -0.013355998153686516
number samples = 1773
accuracy = 0.887761
precision class 0 = 0.90157
precision class 1 = 0.692308
recall class 0 = 0.976455
recall class 1 = 0.331967
false negative rate = 0.668033
false positive rate = 0.023545
positive prediction rate = 0.06599
AUC of ROC = 0.858691
AUC of PRC = 0.562787
min(+P, Se) = 0.52459

-------------------------------

confusion matrix:
[[1238   19]
 [ 140   52]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12559600174427032
difference in average predicted and observed risk = -0.006908998255729687
number samples = 1449
accuracy = 0.890269
precision class 0 = 0.898403
precision class 1 = 0.732394
recall class 0 = 0.984885
recall class 1 = 0.270833
false negative rate = 0.729167
false positive rate = 0.015115
positive prediction rate = 0.048999
AUC of ROC = 0.855766
AUC of PRC = 0.56423
min(+P, Se) = 0.512953

-------------------------------

confusion matrix:
[[1942   36]
 [ 221   90]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12205199897289276
difference in average predicted and observed risk = -0.013815001027107227
number samples = 2289
accuracy = 0.887724
precision class 0 = 0.897827
precision class 1 = 0.714286
recall class 0 = 0.9818
recall class 1 = 0.289389
false negative rate = 0.710611
false positive rate = 0.0182
positive prediction rate = 0.055046
AUC of ROC = 0.853846
AUC of PRC = 0.556955
min(+P, Se) = 0.5209

-------------------------------

confusion matrix:
[[360   8]
 [ 54  27]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14325900375843048
difference in average predicted and observed risk = -0.037141996241569525
number samples = 449
accuracy = 0.861915
precision class 0 = 0.869565
precision class 1 = 0.771429
recall class 0 = 0.978261
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.021739
positive prediction rate = 0.077951
AUC of ROC = 0.860373
AUC of PRC = 0.638662
min(+P, Se) = 0.567901

-------------------------------

confusion matrix:
[[272   6]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11637700349092484
difference in average predicted and observed risk = 0.018974003490924832
number samples = 308
accuracy = 0.915584
precision class 0 = 0.931507
precision class 1 = 0.625
recall class 0 = 0.978417
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.021583
positive prediction rate = 0.051948
AUC of ROC = 0.872902
AUC of PRC = 0.509538
min(+P, Se) = 0.516129

-------------------------------

confusion matrix:
[[86  4]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11355700343847275
difference in average predicted and observed risk = 0.04139200343847274
number samples = 97
accuracy = 0.896907
precision class 0 = 0.934783
precision class 1 = 0.2
recall class 0 = 0.955556
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.044444
positive prediction rate = 0.051546
AUC of ROC = 0.874603
AUC of PRC = 0.354861
min(+P, Se) = 0.315789

-------------------------------

confusion matrix:
[[71  1]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14872099459171295
difference in average predicted and observed risk = 0.060112994591712945
number samples = 79
accuracy = 0.962025
precision class 0 = 0.972603
precision class 1 = 0.833333
recall class 0 = 0.986111
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.013889
positive prediction rate = 0.075949
AUC of ROC = 0.914683
AUC of PRC = 0.759822
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2731   55]
 [ 303  133]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12486299872398376
difference in average predicted and observed risk = -0.010457001276016231
number samples = 3222
accuracy = 0.888889
precision class 0 = 0.900132
precision class 1 = 0.707447
recall class 0 = 0.980258
recall class 1 = 0.305046
false negative rate = 0.694954
false positive rate = 0.019742
positive prediction rate = 0.058349
AUC of ROC = 0.856926
AUC of PRC = 0.56348
min(+P, Se) = 0.527149

-------------------------------

Epoch 00059: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch59.state
Epoch 60/100
 - 818s - loss: 0.2686 - val_loss: 0.2777

==>predicting on train



confusion matrix:
[[6979   57]
 [ 916  396]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12615400552749634
difference in average predicted and observed risk = -0.03100899447250366
number samples = 8348
accuracy = 0.883445
precision class 0 = 0.883977
precision class 1 = 0.874172
recall class 0 = 0.991899
recall class 1 = 0.301829
false negative rate = 0.698171
false positive rate = 0.008101
positive prediction rate = 0.054264
AUC of ROC = 0.898532
AUC of PRC = 0.686574
min(+P, Se) = 0.613567

-------------------------------

confusion matrix:
[[3962   40]
 [ 259  212]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10716400295495987
difference in average predicted and observed risk = 0.0018660029549598667
number samples = 4473
accuracy = 0.933154
precision class 0 = 0.93864
precision class 1 = 0.84127
recall class 0 = 0.990005
recall class 1 = 0.450106
false negative rate = 0.549894
false positive rate = 0.009995
positive prediction rate = 0.056338
AUC of ROC = 0.922112
AUC of PRC = 0.703136
min(+P, Se) = 0.618947

-------------------------------

confusion matrix:
[[1182   13]
 [  82   61]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11421100050210953
difference in average predicted and observed risk = 0.007335000502109529
number samples = 1338
accuracy = 0.928999
precision class 0 = 0.935127
precision class 1 = 0.824324
recall class 0 = 0.989121
recall class 1 = 0.426573
false negative rate = 0.573427
false positive rate = 0.010879
positive prediction rate = 0.055306
AUC of ROC = 0.925646
AUC of PRC = 0.688505
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[349   1]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10355299711227417
difference in average predicted and observed risk = 0.003295997112274171
number samples = 389
accuracy = 0.940874
precision class 0 = 0.940701
precision class 1 = 0.944444
recall class 0 = 0.997143
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.002857
positive prediction rate = 0.046272
AUC of ROC = 0.924322
AUC of PRC = 0.738097
min(+P, Se) = 0.717949

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.169172003865242
difference in average predicted and observed risk = 0.003758003865241999
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.958231
AUC of PRC = 0.878931
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6927   59]
 [ 684  389]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11513900011777878
difference in average predicted and observed risk = -0.018003999882221233
number samples = 8059
accuracy = 0.907805
precision class 0 = 0.91013
precision class 1 = 0.868304
recall class 0 = 0.991555
recall class 1 = 0.362535
false negative rate = 0.637465
false positive rate = 0.008445
positive prediction rate = 0.05559
AUC of ROC = 0.914404
AUC of PRC = 0.700822
min(+P, Se) = 0.637803

-------------------------------

confusion matrix:
[[5654   54]
 [ 602  312]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12385500222444534
difference in average predicted and observed risk = -0.014169997775554666
number samples = 6622
accuracy = 0.900936
precision class 0 = 0.903772
precision class 1 = 0.852459
recall class 0 = 0.99054
recall class 1 = 0.341357
false negative rate = 0.658643
false positive rate = 0.00946
positive prediction rate = 0.05527
AUC of ROC = 0.902971
AUC of PRC = 0.678104
min(+P, Se) = 0.598691

-------------------------------

confusion matrix:
[[8973   73]
 [ 913  450]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11467699706554413
difference in average predicted and observed risk = -0.016267002934455876
number samples = 10409
accuracy = 0.905274
precision class 0 = 0.907647
precision class 1 = 0.860421
recall class 0 = 0.99193
recall class 1 = 0.330154
false negative rate = 0.669846
false positive rate = 0.00807
positive prediction rate = 0.050245
AUC of ROC = 0.908063
AUC of PRC = 0.678204
min(+P, Se) = 0.608504

-------------------------------

confusion matrix:
[[1622   19]
 [ 250  157]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14474700391292572
difference in average predicted and observed risk = -0.05398299608707427
number samples = 2048
accuracy = 0.868652
precision class 0 = 0.866453
precision class 1 = 0.892045
recall class 0 = 0.988422
recall class 1 = 0.385749
false negative rate = 0.614251
false positive rate = 0.011578
positive prediction rate = 0.085938
AUC of ROC = 0.91738
AUC of PRC = 0.766357
min(+P, Se) = 0.678133

-------------------------------

confusion matrix:
[[1271   11]
 [  69   57]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11152099817991257
difference in average predicted and observed risk = 0.022031998179912568
number samples = 1408
accuracy = 0.943182
precision class 0 = 0.948507
precision class 1 = 0.838235
recall class 0 = 0.99142
recall class 1 = 0.452381
false negative rate = 0.547619
false positive rate = 0.00858
positive prediction rate = 0.048295
AUC of ROC = 0.914463
AUC of PRC = 0.658397
min(+P, Se) = 0.626984

-------------------------------

confusion matrix:
[[289   7]
 [ 33  19]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14557799696922302
difference in average predicted and observed risk = -0.00384700303077698
number samples = 348
accuracy = 0.885057
precision class 0 = 0.897516
precision class 1 = 0.730769
recall class 0 = 0.976351
recall class 1 = 0.365385
false negative rate = 0.634615
false positive rate = 0.023649
positive prediction rate = 0.074713
AUC of ROC = 0.888578
AUC of PRC = 0.67988
min(+P, Se) = 0.634615

-------------------------------

confusion matrix:
[[426   3]
 [ 21  18]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10742799937725067
difference in average predicted and observed risk = 0.024094999377250667
number samples = 468
accuracy = 0.948718
precision class 0 = 0.95302
precision class 1 = 0.857143
recall class 0 = 0.993007
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.006993
positive prediction rate = 0.044872
AUC of ROC = 0.893551
AUC of PRC = 0.644365
min(+P, Se) = 0.564103

-------------------------------

confusion matrix:
[[12581   113]
 [ 1286   701]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11907000094652176
difference in average predicted and observed risk = -0.016274999053478234
number samples = 14681
accuracy = 0.904707
precision class 0 = 0.907262
precision class 1 = 0.861179
recall class 0 = 0.991098
recall class 1 = 0.352793
false negative rate = 0.647207
false positive rate = 0.008902
positive prediction rate = 0.055446
AUC of ROC = 0.909281
AUC of PRC = 0.690358
min(+P, Se) = 0.619527

-------------------------------

==>predicting on validation



confusion matrix:
[[1510   25]
 [ 201   77]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12814100086688995
difference in average predicted and observed risk = -0.025195999133110047
number samples = 1813
accuracy = 0.875345
precision class 0 = 0.882525
precision class 1 = 0.754902
recall class 0 = 0.983713
recall class 1 = 0.276978
false negative rate = 0.723022
false positive rate = 0.016287
positive prediction rate = 0.05626
AUC of ROC = 0.856563
AUC of PRC = 0.585035
min(+P, Se) = 0.514388

-------------------------------

confusion matrix:
[[896  11]
 [ 80  33]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10645999759435654
difference in average predicted and observed risk = -0.004324002405643457
number samples = 1020
accuracy = 0.910784
precision class 0 = 0.918033
precision class 1 = 0.75
recall class 0 = 0.987872
recall class 1 = 0.292035
false negative rate = 0.707965
false positive rate = 0.012128
positive prediction rate = 0.043137
AUC of ROC = 0.863773
AUC of PRC = 0.522816
min(+P, Se) = 0.471074

-------------------------------

confusion matrix:
[[244   7]
 [ 18  16]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1267389953136444
difference in average predicted and observed risk = 0.007440995313644408
number samples = 285
accuracy = 0.912281
precision class 0 = 0.931298
precision class 1 = 0.695652
recall class 0 = 0.972112
recall class 1 = 0.470588
false negative rate = 0.529412
false positive rate = 0.027888
positive prediction rate = 0.080702
AUC of ROC = 0.90157
AUC of PRC = 0.650238
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09407299757003784
difference in average predicted and observed risk = 0.0043289975700378375
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.800805
AUC of PRC = 0.41803
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19128699600696564
difference in average predicted and observed risk = 0.03744099600696563
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1500   29]
 [ 167   77]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12049499899148941
difference in average predicted and observed risk = -0.017125001008510582
number samples = 1773
accuracy = 0.889453
precision class 0 = 0.89982
precision class 1 = 0.726415
recall class 0 = 0.981033
recall class 1 = 0.315574
false negative rate = 0.684426
false positive rate = 0.018967
positive prediction rate = 0.059786
AUC of ROC = 0.865338
AUC of PRC = 0.564263
min(+P, Se) = 0.512295

-------------------------------

confusion matrix:
[[1240   17]
 [ 139   53]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12125899642705917
difference in average predicted and observed risk = -0.011246003572940838
number samples = 1449
accuracy = 0.89234
precision class 0 = 0.899202
precision class 1 = 0.757143
recall class 0 = 0.986476
recall class 1 = 0.276042
false negative rate = 0.723958
false positive rate = 0.013524
positive prediction rate = 0.048309
AUC of ROC = 0.862864
AUC of PRC = 0.575446
min(+P, Se) = 0.53125

-------------------------------

confusion matrix:
[[1947   31]
 [ 224   87]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11789999902248383
difference in average predicted and observed risk = -0.017967000977516162
number samples = 2289
accuracy = 0.888598
precision class 0 = 0.896822
precision class 1 = 0.737288
recall class 0 = 0.984328
recall class 1 = 0.279743
false negative rate = 0.720257
false positive rate = 0.015672
positive prediction rate = 0.051551
AUC of ROC = 0.86094
AUC of PRC = 0.55995
min(+P, Se) = 0.501608

-------------------------------

confusion matrix:
[[362   6]
 [ 55  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13919700682163239
difference in average predicted and observed risk = -0.04120399317836762
number samples = 449
accuracy = 0.864143
precision class 0 = 0.868106
precision class 1 = 0.8125
recall class 0 = 0.983696
recall class 1 = 0.320988
false negative rate = 0.679012
false positive rate = 0.016304
positive prediction rate = 0.071269
AUC of ROC = 0.864768
AUC of PRC = 0.639294
min(+P, Se) = 0.567901

-------------------------------

confusion matrix:
[[274   4]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11336199939250946
difference in average predicted and observed risk = 0.015958999392509457
number samples = 308
accuracy = 0.925325
precision class 0 = 0.935154
precision class 1 = 0.733333
recall class 0 = 0.985611
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.014388
positive prediction rate = 0.048701
AUC of ROC = 0.88777
AUC of PRC = 0.560917
min(+P, Se) = 0.580645

-------------------------------

confusion matrix:
[[86  4]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10910400003194809
difference in average predicted and observed risk = 0.03693900003194808
number samples = 97
accuracy = 0.896907
precision class 0 = 0.934783
precision class 1 = 0.2
recall class 0 = 0.955556
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.044444
positive prediction rate = 0.051546
AUC of ROC = 0.887302
AUC of PRC = 0.379501
min(+P, Se) = 0.357143

-------------------------------

confusion matrix:
[[71  1]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14519399404525757
difference in average predicted and observed risk = 0.05658599404525756
number samples = 79
accuracy = 0.962025
precision class 0 = 0.972603
precision class 1 = 0.833333
recall class 0 = 0.986111
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.013889
positive prediction rate = 0.075949
AUC of ROC = 0.896825
AUC of PRC = 0.756168
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2740   46]
 [ 306  130]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12083800137042999
difference in average predicted and observed risk = -0.014481998629570003
number samples = 3222
accuracy = 0.890751
precision class 0 = 0.89954
precision class 1 = 0.738636
recall class 0 = 0.983489
recall class 1 = 0.298165
false negative rate = 0.701835
false positive rate = 0.016511
positive prediction rate = 0.054624
AUC of ROC = 0.863837
AUC of PRC = 0.56852
min(+P, Se) = 0.527523

-------------------------------

Epoch 00060: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch60.state
Epoch 61/100
 - 813s - loss: 0.2692 - val_loss: 0.2831

==>predicting on train



confusion matrix:
[[6982   54]
 [ 929  383]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12237600237131119
difference in average predicted and observed risk = -0.03478699762868881
number samples = 8348
accuracy = 0.882247
precision class 0 = 0.882569
precision class 1 = 0.87643
recall class 0 = 0.992325
recall class 1 = 0.291921
false negative rate = 0.708079
false positive rate = 0.007675
positive prediction rate = 0.052348
AUC of ROC = 0.901272
AUC of PRC = 0.691084
min(+P, Se) = 0.618902

-------------------------------

confusion matrix:
[[3954   48]
 [ 270  201]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10331299901008606
difference in average predicted and observed risk = -0.001985000989913943
number samples = 4473
accuracy = 0.928907
precision class 0 = 0.93608
precision class 1 = 0.807229
recall class 0 = 0.988006
recall class 1 = 0.426752
false negative rate = 0.573248
false positive rate = 0.011994
positive prediction rate = 0.055667
AUC of ROC = 0.921387
AUC of PRC = 0.693484
min(+P, Se) = 0.618644

-------------------------------

confusion matrix:
[[1183   12]
 [  82   61]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11089599877595901
difference in average predicted and observed risk = 0.004019998775959016
number samples = 1338
accuracy = 0.929746
precision class 0 = 0.935178
precision class 1 = 0.835616
recall class 0 = 0.989958
recall class 1 = 0.426573
false negative rate = 0.573427
false positive rate = 0.010042
positive prediction rate = 0.054559
AUC of ROC = 0.927284
AUC of PRC = 0.693915
min(+P, Se) = 0.65035

-------------------------------

confusion matrix:
[[348   2]
 [ 25  14]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09942600131034851
difference in average predicted and observed risk = -0.0008309986896514882
number samples = 389
accuracy = 0.930591
precision class 0 = 0.932976
precision class 1 = 0.875
recall class 0 = 0.994286
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.005714
positive prediction rate = 0.041131
AUC of ROC = 0.929451
AUC of PRC = 0.706017
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[108   3]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16780899465084076
difference in average predicted and observed risk = 0.002394994650840754
number samples = 133
accuracy = 0.909774
precision class 0 = 0.923077
precision class 1 = 0.8125
recall class 0 = 0.972973
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.027027
positive prediction rate = 0.120301
AUC of ROC = 0.95905
AUC of PRC = 0.865172
min(+P, Se) = 0.782609

-------------------------------

confusion matrix:
[[6920   66]
 [ 699  374]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11155299842357635
difference in average predicted and observed risk = -0.021590001576423656
number samples = 8059
accuracy = 0.905075
precision class 0 = 0.908256
precision class 1 = 0.85
recall class 0 = 0.990553
recall class 1 = 0.348555
false negative rate = 0.651445
false positive rate = 0.009447
positive prediction rate = 0.054597
AUC of ROC = 0.916498
AUC of PRC = 0.704685
min(+P, Se) = 0.643057

-------------------------------

confusion matrix:
[[5655   53]
 [ 616  298]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11991500109434128
difference in average predicted and observed risk = -0.01810999890565873
number samples = 6622
accuracy = 0.898973
precision class 0 = 0.90177
precision class 1 = 0.849003
recall class 0 = 0.990715
recall class 1 = 0.326039
false negative rate = 0.673961
false positive rate = 0.009285
positive prediction rate = 0.053005
AUC of ROC = 0.904594
AUC of PRC = 0.672651
min(+P, Se) = 0.605033

-------------------------------

confusion matrix:
[[8963   83]
 [ 935  428]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11095699667930603
difference in average predicted and observed risk = -0.019987003320693975
number samples = 10409
accuracy = 0.9022
precision class 0 = 0.905536
precision class 1 = 0.837573
recall class 0 = 0.990825
recall class 1 = 0.314013
false negative rate = 0.685987
false positive rate = 0.009175
positive prediction rate = 0.049092
AUC of ROC = 0.91006
AUC of PRC = 0.677031
min(+P, Se) = 0.612903

-------------------------------

confusion matrix:
[[1623   18]
 [ 251  156]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14159099757671356
difference in average predicted and observed risk = -0.05713900242328643
number samples = 2048
accuracy = 0.868652
precision class 0 = 0.866062
precision class 1 = 0.896552
recall class 0 = 0.989031
recall class 1 = 0.383292
false negative rate = 0.616708
false positive rate = 0.010969
positive prediction rate = 0.084961
AUC of ROC = 0.918486
AUC of PRC = 0.76454
min(+P, Se) = 0.68059

-------------------------------

confusion matrix:
[[1274    8]
 [  72   54]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.1072470024228096
difference in average predicted and observed risk = 0.0177580024228096
number samples = 1408
accuracy = 0.943182
precision class 0 = 0.946508
precision class 1 = 0.870968
recall class 0 = 0.99376
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.00624
positive prediction rate = 0.044034
AUC of ROC = 0.917961
AUC of PRC = 0.665209
min(+P, Se) = 0.626984

-------------------------------

confusion matrix:
[[290   6]
 [ 34  18]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14150699973106384
difference in average predicted and observed risk = -0.00791800026893616
number samples = 348
accuracy = 0.885057
precision class 0 = 0.895062
precision class 1 = 0.75
recall class 0 = 0.97973
recall class 1 = 0.346154
false negative rate = 0.653846
false positive rate = 0.02027
positive prediction rate = 0.068966
AUC of ROC = 0.894036
AUC of PRC = 0.693895
min(+P, Se) = 0.660377

-------------------------------

confusion matrix:
[[425   4]
 [ 23  16]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10237099975347519
difference in average predicted and observed risk = 0.019037999753475185
number samples = 468
accuracy = 0.942308
precision class 0 = 0.948661
precision class 1 = 0.8
recall class 0 = 0.990676
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.009324
positive prediction rate = 0.042735
AUC of ROC = 0.896241
AUC of PRC = 0.642281
min(+P, Se) = 0.564103

-------------------------------

confusion matrix:
[[12575   119]
 [ 1315   672]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11532499641180038
difference in average predicted and observed risk = -0.02002000358819961
number samples = 14681
accuracy = 0.902323
precision class 0 = 0.905328
precision class 1 = 0.849558
recall class 0 = 0.990626
recall class 1 = 0.338198
false negative rate = 0.661802
false positive rate = 0.009375
positive prediction rate = 0.053879
AUC of ROC = 0.911222
AUC of PRC = 0.690283
min(+P, Se) = 0.62456

-------------------------------

==>predicting on validation



confusion matrix:
[[1508   27]
 [ 205   73]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12411300092935562
difference in average predicted and observed risk = -0.02922399907064438
number samples = 1813
accuracy = 0.872035
precision class 0 = 0.880327
precision class 1 = 0.73
recall class 0 = 0.98241
recall class 1 = 0.26259
false negative rate = 0.73741
false positive rate = 0.01759
positive prediction rate = 0.055157
AUC of ROC = 0.85323
AUC of PRC = 0.578486
min(+P, Se) = 0.516129

-------------------------------

confusion matrix:
[[890  17]
 [ 81  32]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10418099910020828
difference in average predicted and observed risk = -0.006603000899791711
number samples = 1020
accuracy = 0.903922
precision class 0 = 0.916581
precision class 1 = 0.653061
recall class 0 = 0.981257
recall class 1 = 0.283186
false negative rate = 0.716814
false positive rate = 0.018743
positive prediction rate = 0.048039
AUC of ROC = 0.861773
AUC of PRC = 0.50373
min(+P, Se) = 0.453782

-------------------------------

confusion matrix:
[[244   7]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12487000226974487
difference in average predicted and observed risk = 0.005572002269744872
number samples = 285
accuracy = 0.905263
precision class 0 = 0.924242
precision class 1 = 0.666667
recall class 0 = 0.972112
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.027888
positive prediction rate = 0.073684
AUC of ROC = 0.894188
AUC of PRC = 0.621034
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09107500314712524
difference in average predicted and observed risk = 0.0013310031471252398
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.802817
AUC of PRC = 0.405858
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1881130039691925
difference in average predicted and observed risk = 0.034267003969192494
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1496   33]
 [ 171   73]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11785800009965897
difference in average predicted and observed risk = -0.019761999900341026
number samples = 1773
accuracy = 0.884941
precision class 0 = 0.897421
precision class 1 = 0.688679
recall class 0 = 0.978417
recall class 1 = 0.29918
false negative rate = 0.70082
false positive rate = 0.021583
positive prediction rate = 0.059786
AUC of ROC = 0.860176
AUC of PRC = 0.552527
min(+P, Se) = 0.504098

-------------------------------

confusion matrix:
[[1236   21]
 [ 141   51]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11725500226020813
difference in average predicted and observed risk = -0.015249997739791882
number samples = 1449
accuracy = 0.888199
precision class 0 = 0.897604
precision class 1 = 0.708333
recall class 0 = 0.983294
recall class 1 = 0.265625
false negative rate = 0.734375
false positive rate = 0.016706
positive prediction rate = 0.049689
AUC of ROC = 0.862719
AUC of PRC = 0.565689
min(+P, Se) = 0.525773

-------------------------------

confusion matrix:
[[1942   36]
 [ 227   84]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11492600291967392
difference in average predicted and observed risk = -0.020940997080326068
number samples = 2289
accuracy = 0.885103
precision class 0 = 0.895343
precision class 1 = 0.7
recall class 0 = 0.9818
recall class 1 = 0.270096
false negative rate = 0.729904
false positive rate = 0.0182
positive prediction rate = 0.052425
AUC of ROC = 0.858685
AUC of PRC = 0.555382
min(+P, Se) = 0.501608

-------------------------------

confusion matrix:
[[360   8]
 [ 55  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1364309936761856
difference in average predicted and observed risk = -0.0439700063238144
number samples = 449
accuracy = 0.859688
precision class 0 = 0.86747
precision class 1 = 0.764706
recall class 0 = 0.978261
recall class 1 = 0.320988
false negative rate = 0.679012
false positive rate = 0.021739
positive prediction rate = 0.075724
AUC of ROC = 0.859534
AUC of PRC = 0.619805
min(+P, Se) = 0.560976

-------------------------------

confusion matrix:
[[272   6]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10919699817895889
difference in average predicted and observed risk = 0.01179399817895889
number samples = 308
accuracy = 0.912338
precision class 0 = 0.928328
precision class 1 = 0.6
recall class 0 = 0.978417
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.021583
positive prediction rate = 0.048701
AUC of ROC = 0.882014
AUC of PRC = 0.503849
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10493099689483643
difference in average predicted and observed risk = 0.03276599689483642
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.906349
AUC of PRC = 0.42517
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[71  1]
 [ 4  3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.13582399487495422
difference in average predicted and observed risk = 0.04721599487495422
number samples = 79
accuracy = 0.936709
precision class 0 = 0.946667
precision class 1 = 0.75
recall class 0 = 0.986111
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.013889
positive prediction rate = 0.050633
AUC of ROC = 0.884921
AUC of PRC = 0.641246
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2732   54]
 [ 312  124]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11758700013160706
difference in average predicted and observed risk = -0.01773299986839294
number samples = 3222
accuracy = 0.886406
precision class 0 = 0.897503
precision class 1 = 0.696629
recall class 0 = 0.980617
recall class 1 = 0.284404
false negative rate = 0.715596
false positive rate = 0.019383
positive prediction rate = 0.055245
AUC of ROC = 0.860806
AUC of PRC = 0.557379
min(+P, Se) = 0.511468

-------------------------------

Epoch 00061: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch61.state
Epoch 62/100
 - 816s - loss: 0.2651 - val_loss: 0.2820

==>predicting on train



confusion matrix:
[[6983   53]
 [ 901  411]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12782299518585205
difference in average predicted and observed risk = -0.029340004814147946
number samples = 8348
accuracy = 0.885721
precision class 0 = 0.885718
precision class 1 = 0.885776
recall class 0 = 0.992467
recall class 1 = 0.313262
false negative rate = 0.686738
false positive rate = 0.007533
positive prediction rate = 0.055582
AUC of ROC = 0.901157
AUC of PRC = 0.695245
min(+P, Se) = 0.614329

-------------------------------

confusion matrix:
[[3960   42]
 [ 261  210]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10466200113296509
difference in average predicted and observed risk = -0.0006359988670349148
number samples = 4473
accuracy = 0.93226
precision class 0 = 0.938166
precision class 1 = 0.833333
recall class 0 = 0.989505
recall class 1 = 0.44586
false negative rate = 0.55414
false positive rate = 0.010495
positive prediction rate = 0.056338
AUC of ROC = 0.92516
AUC of PRC = 0.709533
min(+P, Se) = 0.624204

-------------------------------

confusion matrix:
[[1180   15]
 [  78   65]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11374299973249435
difference in average predicted and observed risk = 0.0068669997324943555
number samples = 1338
accuracy = 0.930493
precision class 0 = 0.937997
precision class 1 = 0.8125
recall class 0 = 0.987448
recall class 1 = 0.454545
false negative rate = 0.545455
false positive rate = 0.012552
positive prediction rate = 0.059791
AUC of ROC = 0.929935
AUC of PRC = 0.711761
min(+P, Se) = 0.645833

-------------------------------

confusion matrix:
[[347   3]
 [ 19  20]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10123199969530106
difference in average predicted and observed risk = 0.000974999695301057
number samples = 389
accuracy = 0.943445
precision class 0 = 0.948087
precision class 1 = 0.869565
recall class 0 = 0.991429
recall class 1 = 0.512821
false negative rate = 0.487179
false positive rate = 0.008571
positive prediction rate = 0.059126
AUC of ROC = 0.931722
AUC of PRC = 0.750053
min(+P, Se) = 0.717949

-------------------------------

confusion matrix:
[[109   2]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1652349978685379
difference in average predicted and observed risk = -0.00017900213146210264
number samples = 133
accuracy = 0.917293
precision class 0 = 0.923729
precision class 1 = 0.866667
recall class 0 = 0.981982
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.018018
positive prediction rate = 0.112782
AUC of ROC = 0.963554
AUC of PRC = 0.880661
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6932   54]
 [ 671  402]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11456900089979172
difference in average predicted and observed risk = -0.018573999100208294
number samples = 8059
accuracy = 0.910038
precision class 0 = 0.911745
precision class 1 = 0.881579
recall class 0 = 0.99227
recall class 1 = 0.374651
false negative rate = 0.625349
false positive rate = 0.00773
positive prediction rate = 0.056583
AUC of ROC = 0.917244
AUC of PRC = 0.711895
min(+P, Se) = 0.642125

-------------------------------

confusion matrix:
[[5647   61]
 [ 597  317]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12465400248765945
difference in average predicted and observed risk = -0.013370997512340554
number samples = 6622
accuracy = 0.900634
precision class 0 = 0.904388
precision class 1 = 0.838624
recall class 0 = 0.989313
recall class 1 = 0.346827
false negative rate = 0.653173
false positive rate = 0.010687
positive prediction rate = 0.057082
AUC of ROC = 0.907076
AUC of PRC = 0.684721
min(+P, Se) = 0.602845

-------------------------------

confusion matrix:
[[8976   70]
 [ 897  466]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11493600159883499
difference in average predicted and observed risk = -0.016007998401165013
number samples = 10409
accuracy = 0.9071
precision class 0 = 0.909146
precision class 1 = 0.869403
recall class 0 = 0.992262
recall class 1 = 0.341893
false negative rate = 0.658107
false positive rate = 0.007738
positive prediction rate = 0.051494
AUC of ROC = 0.911518
AUC of PRC = 0.688299
min(+P, Se) = 0.613636

-------------------------------

confusion matrix:
[[1617   24]
 [ 250  157]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14464299380779266
difference in average predicted and observed risk = -0.054087006192207326
number samples = 2048
accuracy = 0.866211
precision class 0 = 0.866095
precision class 1 = 0.867403
recall class 0 = 0.985375
recall class 1 = 0.385749
false negative rate = 0.614251
false positive rate = 0.014625
positive prediction rate = 0.088379
AUC of ROC = 0.91941
AUC of PRC = 0.768241
min(+P, Se) = 0.667482

-------------------------------

confusion matrix:
[[1272   10]
 [  67   59]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11118700355291367
difference in average predicted and observed risk = 0.021698003552913667
number samples = 1408
accuracy = 0.945312
precision class 0 = 0.949963
precision class 1 = 0.855072
recall class 0 = 0.9922
recall class 1 = 0.468254
false negative rate = 0.531746
false positive rate = 0.0078
positive prediction rate = 0.049006
AUC of ROC = 0.920307
AUC of PRC = 0.690522
min(+P, Se) = 0.634921

-------------------------------

confusion matrix:
[[289   7]
 [ 33  19]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14666099846363068
difference in average predicted and observed risk = -0.002764001536369326
number samples = 348
accuracy = 0.885057
precision class 0 = 0.897516
precision class 1 = 0.730769
recall class 0 = 0.976351
recall class 1 = 0.365385
false negative rate = 0.634615
false positive rate = 0.023649
positive prediction rate = 0.074713
AUC of ROC = 0.894686
AUC of PRC = 0.680079
min(+P, Se) = 0.634615

-------------------------------

confusion matrix:
[[425   4]
 [ 21  18]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10380499809980392
difference in average predicted and observed risk = 0.02047199809980392
number samples = 468
accuracy = 0.946581
precision class 0 = 0.952915
precision class 1 = 0.818182
recall class 0 = 0.990676
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.009324
positive prediction rate = 0.047009
AUC of ROC = 0.897496
AUC of PRC = 0.654674
min(+P, Se) = 0.589744

-------------------------------

confusion matrix:
[[12579   115]
 [ 1268   719]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11911799758672714
difference in average predicted and observed risk = -0.01622700241327285
number samples = 14681
accuracy = 0.905797
precision class 0 = 0.908428
precision class 1 = 0.86211
recall class 0 = 0.990941
recall class 1 = 0.361852
false negative rate = 0.638148
false positive rate = 0.009059
positive prediction rate = 0.056808
AUC of ROC = 0.912698
AUC of PRC = 0.699778
min(+P, Se) = 0.62456

-------------------------------

==>predicting on validation



confusion matrix:
[[1507   28]
 [ 198   80]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13052600622177124
difference in average predicted and observed risk = -0.02281099377822876
number samples = 1813
accuracy = 0.875345
precision class 0 = 0.883871
precision class 1 = 0.740741
recall class 0 = 0.981759
recall class 1 = 0.28777
false negative rate = 0.71223
false positive rate = 0.018241
positive prediction rate = 0.05957
AUC of ROC = 0.853251
AUC of PRC = 0.576114
min(+P, Se) = 0.517986

-------------------------------

confusion matrix:
[[890  17]
 [ 83  30]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10563699901103973
difference in average predicted and observed risk = -0.00514700098896026
number samples = 1020
accuracy = 0.901961
precision class 0 = 0.914697
precision class 1 = 0.638298
recall class 0 = 0.981257
recall class 1 = 0.265487
false negative rate = 0.734513
false positive rate = 0.018743
positive prediction rate = 0.046078
AUC of ROC = 0.855743
AUC of PRC = 0.494259
min(+P, Se) = 0.448819

-------------------------------

confusion matrix:
[[244   7]
 [ 21  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1255899965763092
difference in average predicted and observed risk = 0.006291996576309203
number samples = 285
accuracy = 0.901754
precision class 0 = 0.920755
precision class 1 = 0.65
recall class 0 = 0.972112
recall class 1 = 0.382353
false negative rate = 0.617647
false positive rate = 0.027888
positive prediction rate = 0.070175
AUC of ROC = 0.901687
AUC of PRC = 0.627825
min(+P, Se) = 0.575

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08925200253725052
difference in average predicted and observed risk = -0.0004919974627494855
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.83501
AUC of PRC = 0.438098
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1798270046710968
difference in average predicted and observed risk = 0.02598100467109679
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1495   34]
 [ 170   74]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12067999690771103
difference in average predicted and observed risk = -0.016940003092288963
number samples = 1773
accuracy = 0.884941
precision class 0 = 0.897898
precision class 1 = 0.685185
recall class 0 = 0.977763
recall class 1 = 0.303279
false negative rate = 0.696721
false positive rate = 0.022237
positive prediction rate = 0.060914
AUC of ROC = 0.860637
AUC of PRC = 0.55255
min(+P, Se) = 0.512295

-------------------------------

confusion matrix:
[[1236   21]
 [ 138   54]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12274499982595444
difference in average predicted and observed risk = -0.009760000174045574
number samples = 1449
accuracy = 0.890269
precision class 0 = 0.899563
precision class 1 = 0.72
recall class 0 = 0.983294
recall class 1 = 0.28125
false negative rate = 0.71875
false positive rate = 0.016706
positive prediction rate = 0.05176
AUC of ROC = 0.86034
AUC of PRC = 0.561291
min(+P, Se) = 0.515464

-------------------------------

confusion matrix:
[[1940   38]
 [ 224   87]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11901199817657471
difference in average predicted and observed risk = -0.01685500182342528
number samples = 2289
accuracy = 0.88554
precision class 0 = 0.896488
precision class 1 = 0.696
recall class 0 = 0.980789
recall class 1 = 0.279743
false negative rate = 0.720257
false positive rate = 0.019211
positive prediction rate = 0.054609
AUC of ROC = 0.857752
AUC of PRC = 0.55216
min(+P, Se) = 0.511182

-------------------------------

confusion matrix:
[[361   7]
 [ 56  25]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14039300382137299
difference in average predicted and observed risk = -0.04000799617862702
number samples = 449
accuracy = 0.859688
precision class 0 = 0.865707
precision class 1 = 0.78125
recall class 0 = 0.980978
recall class 1 = 0.308642
false negative rate = 0.691358
false positive rate = 0.019022
positive prediction rate = 0.071269
AUC of ROC = 0.859534
AUC of PRC = 0.626271
min(+P, Se) = 0.559524

-------------------------------

confusion matrix:
[[273   5]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11160100251436234
difference in average predicted and observed risk = 0.014198002514362332
number samples = 308
accuracy = 0.918831
precision class 0 = 0.931741
precision class 1 = 0.666667
recall class 0 = 0.982014
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.017986
positive prediction rate = 0.048701
AUC of ROC = 0.884412
AUC of PRC = 0.521449
min(+P, Se) = 0.516129

-------------------------------

confusion matrix:
[[86  4]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.1074569970369339
difference in average predicted and observed risk = 0.03529199703693389
number samples = 97
accuracy = 0.896907
precision class 0 = 0.934783
precision class 1 = 0.2
recall class 0 = 0.955556
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.044444
positive prediction rate = 0.051546
AUC of ROC = 0.888889
AUC of PRC = 0.384472
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[71  1]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14645999670028687
difference in average predicted and observed risk = 0.05785199670028686
number samples = 79
accuracy = 0.962025
precision class 0 = 0.972603
precision class 1 = 0.833333
recall class 0 = 0.986111
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.013889
positive prediction rate = 0.075949
AUC of ROC = 0.902778
AUC of PRC = 0.715958
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2731   55]
 [ 308  128]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12160799652338028
difference in average predicted and observed risk = -0.013712003476619716
number samples = 3222
accuracy = 0.887337
precision class 0 = 0.898651
precision class 1 = 0.699454
recall class 0 = 0.980258
recall class 1 = 0.293578
false negative rate = 0.706422
false positive rate = 0.019742
positive prediction rate = 0.056797
AUC of ROC = 0.860213
AUC of PRC = 0.556604
min(+P, Se) = 0.516055

-------------------------------

Epoch 00062: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch62.state
Epoch 63/100
 - 825s - loss: 0.2644 - val_loss: 0.2842

==>predicting on train



confusion matrix:
[[6979   57]
 [ 885  427]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.1327269971370697
difference in average predicted and observed risk = -0.024436002862930295
number samples = 8348
accuracy = 0.887159
precision class 0 = 0.887462
precision class 1 = 0.882231
recall class 0 = 0.991899
recall class 1 = 0.325457
false negative rate = 0.674543
false positive rate = 0.008101
positive prediction rate = 0.057978
AUC of ROC = 0.903225
AUC of PRC = 0.700339
min(+P, Se) = 0.624524

-------------------------------

confusion matrix:
[[3961   41]
 [ 256  215]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.1075109988451004
difference in average predicted and observed risk = 0.0022129988451004
number samples = 4473
accuracy = 0.933602
precision class 0 = 0.939293
precision class 1 = 0.839844
recall class 0 = 0.989755
recall class 1 = 0.456476
false negative rate = 0.543524
false positive rate = 0.010245
positive prediction rate = 0.057232
AUC of ROC = 0.9281
AUC of PRC = 0.719316
min(+P, Se) = 0.630573

-------------------------------

confusion matrix:
[[1182   13]
 [  75   68]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11568199843168259
difference in average predicted and observed risk = 0.008805998431682588
number samples = 1338
accuracy = 0.93423
precision class 0 = 0.940334
precision class 1 = 0.839506
recall class 0 = 0.989121
recall class 1 = 0.475524
false negative rate = 0.524476
false positive rate = 0.010879
positive prediction rate = 0.060538
AUC of ROC = 0.928197
AUC of PRC = 0.710664
min(+P, Se) = 0.636364

-------------------------------

confusion matrix:
[[349   1]
 [ 20  19]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10384800285100937
difference in average predicted and observed risk = 0.00359100285100937
number samples = 389
accuracy = 0.946015
precision class 0 = 0.945799
precision class 1 = 0.95
recall class 0 = 0.997143
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.002857
positive prediction rate = 0.051414
AUC of ROC = 0.937289
AUC of PRC = 0.763808
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[109   2]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16416500508785248
difference in average predicted and observed risk = -0.0012489949121475274
number samples = 133
accuracy = 0.924812
precision class 0 = 0.931624
precision class 1 = 0.875
recall class 0 = 0.981982
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.018018
positive prediction rate = 0.120301
AUC of ROC = 0.959869
AUC of PRC = 0.873068
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6929   57]
 [ 659  414]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11866500228643417
difference in average predicted and observed risk = -0.014477997713565838
number samples = 8059
accuracy = 0.911155
precision class 0 = 0.913152
precision class 1 = 0.878981
recall class 0 = 0.991841
recall class 1 = 0.385834
false negative rate = 0.614166
false positive rate = 0.008159
positive prediction rate = 0.058444
AUC of ROC = 0.919177
AUC of PRC = 0.717282
min(+P, Se) = 0.643989

-------------------------------

confusion matrix:
[[5651   57]
 [ 585  329]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12829899787902832
difference in average predicted and observed risk = -0.009726002120971688
number samples = 6622
accuracy = 0.90305
precision class 0 = 0.90619
precision class 1 = 0.852332
recall class 0 = 0.990014
recall class 1 = 0.359956
false negative rate = 0.640044
false positive rate = 0.009986
positive prediction rate = 0.058291
AUC of ROC = 0.909477
AUC of PRC = 0.691777
min(+P, Se) = 0.607221

-------------------------------

confusion matrix:
[[8979   67]
 [ 890  473]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11899799853563309
difference in average predicted and observed risk = -0.011946001464366918
number samples = 10409
accuracy = 0.90806
precision class 0 = 0.909819
precision class 1 = 0.875926
recall class 0 = 0.992593
recall class 1 = 0.347029
false negative rate = 0.652971
false positive rate = 0.007407
positive prediction rate = 0.051878
AUC of ROC = 0.914444
AUC of PRC = 0.696174
min(+P, Se) = 0.617021

-------------------------------

confusion matrix:
[[1618   23]
 [ 237  170]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14868099987506866
difference in average predicted and observed risk = -0.050049000124931325
number samples = 2048
accuracy = 0.873047
precision class 0 = 0.872237
precision class 1 = 0.880829
recall class 0 = 0.985984
recall class 1 = 0.41769
false negative rate = 0.58231
false positive rate = 0.014016
positive prediction rate = 0.094238
AUC of ROC = 0.920105
AUC of PRC = 0.774928
min(+P, Se) = 0.673219

-------------------------------

confusion matrix:
[[1267   15]
 [  66   60]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11452600359916687
difference in average predicted and observed risk = 0.02503700359916687
number samples = 1408
accuracy = 0.942472
precision class 0 = 0.950488
precision class 1 = 0.8
recall class 0 = 0.9883
recall class 1 = 0.47619
false negative rate = 0.52381
false positive rate = 0.0117
positive prediction rate = 0.053267
AUC of ROC = 0.919403
AUC of PRC = 0.668175
min(+P, Se) = 0.595238

-------------------------------

confusion matrix:
[[290   6]
 [ 30  22]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14837299287319183
difference in average predicted and observed risk = -0.0010520071268081688
number samples = 348
accuracy = 0.896552
precision class 0 = 0.90625
precision class 1 = 0.785714
recall class 0 = 0.97973
recall class 1 = 0.423077
false negative rate = 0.576923
false positive rate = 0.02027
positive prediction rate = 0.08046
AUC of ROC = 0.896505
AUC of PRC = 0.700195
min(+P, Se) = 0.634615

-------------------------------

confusion matrix:
[[426   3]
 [ 21  18]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.1065870001912117
difference in average predicted and observed risk = 0.023254000191211696
number samples = 468
accuracy = 0.948718
precision class 0 = 0.95302
precision class 1 = 0.857143
recall class 0 = 0.993007
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.006993
positive prediction rate = 0.044872
AUC of ROC = 0.895224
AUC of PRC = 0.649503
min(+P, Se) = 0.589744

-------------------------------

confusion matrix:
[[12580   114]
 [ 1244   743]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12301100045442581
difference in average predicted and observed risk = -0.012333999545574181
number samples = 14681
accuracy = 0.907499
precision class 0 = 0.910012
precision class 1 = 0.866978
recall class 0 = 0.991019
recall class 1 = 0.373931
false negative rate = 0.626069
false positive rate = 0.008981
positive prediction rate = 0.058375
AUC of ROC = 0.914792
AUC of PRC = 0.705884
min(+P, Se) = 0.627076

-------------------------------

==>predicting on validation



confusion matrix:
[[1506   29]
 [ 193   85]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13416700065135956
difference in average predicted and observed risk = -0.019169999348640443
number samples = 1813
accuracy = 0.877551
precision class 0 = 0.886404
precision class 1 = 0.745614
recall class 0 = 0.981107
recall class 1 = 0.305755
false negative rate = 0.694245
false positive rate = 0.018893
positive prediction rate = 0.062879
AUC of ROC = 0.846071
AUC of PRC = 0.56614
min(+P, Se) = 0.51049

-------------------------------

confusion matrix:
[[888  19]
 [ 83  30]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10916399955749512
difference in average predicted and observed risk = -0.0016200004425048764
number samples = 1020
accuracy = 0.9
precision class 0 = 0.914521
precision class 1 = 0.612245
recall class 0 = 0.979052
recall class 1 = 0.265487
false negative rate = 0.734513
false positive rate = 0.020948
positive prediction rate = 0.048039
AUC of ROC = 0.856622
AUC of PRC = 0.50656
min(+P, Se) = 0.469027

-------------------------------

confusion matrix:
[[244   7]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13141299784183502
difference in average predicted and observed risk = 0.01211499784183502
number samples = 285
accuracy = 0.905263
precision class 0 = 0.924242
precision class 1 = 0.666667
recall class 0 = 0.972112
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.027888
positive prediction rate = 0.073684
AUC of ROC = 0.899813
AUC of PRC = 0.617888
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09306400269269943
difference in average predicted and observed risk = 0.003320002692699428
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.822938
AUC of PRC = 0.42376
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1792140007019043
difference in average predicted and observed risk = 0.025368000701904286
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1494   35]
 [ 168   76]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12448900192975998
difference in average predicted and observed risk = -0.013130998070240013
number samples = 1773
accuracy = 0.885505
precision class 0 = 0.898917
precision class 1 = 0.684685
recall class 0 = 0.977109
recall class 1 = 0.311475
false negative rate = 0.688525
false positive rate = 0.022891
positive prediction rate = 0.062606
AUC of ROC = 0.857868
AUC of PRC = 0.548517
min(+P, Se) = 0.51004

-------------------------------

confusion matrix:
[[1234   23]
 [ 134   58]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12646199762821198
difference in average predicted and observed risk = -0.0060430023717880366
number samples = 1449
accuracy = 0.891649
precision class 0 = 0.902047
precision class 1 = 0.716049
recall class 0 = 0.981702
recall class 1 = 0.302083
false negative rate = 0.697917
false positive rate = 0.018298
positive prediction rate = 0.055901
AUC of ROC = 0.854216
AUC of PRC = 0.557282
min(+P, Se) = 0.515625

-------------------------------

confusion matrix:
[[1938   40]
 [ 220   91]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12291199713945389
difference in average predicted and observed risk = -0.0129550028605461
number samples = 2289
accuracy = 0.886413
precision class 0 = 0.898054
precision class 1 = 0.694656
recall class 0 = 0.979778
recall class 1 = 0.292605
false negative rate = 0.707395
false positive rate = 0.020222
positive prediction rate = 0.05723
AUC of ROC = 0.851446
AUC of PRC = 0.543166
min(+P, Se) = 0.498392

-------------------------------

confusion matrix:
[[361   7]
 [ 55  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14410400390625
difference in average predicted and observed risk = -0.036296996093750006
number samples = 449
accuracy = 0.861915
precision class 0 = 0.867788
precision class 1 = 0.787879
recall class 0 = 0.980978
recall class 1 = 0.320988
false negative rate = 0.679012
false positive rate = 0.019022
positive prediction rate = 0.073497
AUC of ROC = 0.858897
AUC of PRC = 0.629306
min(+P, Se) = 0.567901

-------------------------------

confusion matrix:
[[272   6]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11433800309896469
difference in average predicted and observed risk = 0.016935003098964688
number samples = 308
accuracy = 0.918831
precision class 0 = 0.934708
precision class 1 = 0.647059
recall class 0 = 0.978417
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.021583
positive prediction rate = 0.055195
AUC of ROC = 0.888249
AUC of PRC = 0.539014
min(+P, Se) = 0.540541

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.1116039976477623
difference in average predicted and observed risk = 0.03943899764776229
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.895238
AUC of PRC = 0.380631
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15029600262641907
difference in average predicted and observed risk = 0.06168800262641906
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.904762
AUC of PRC = 0.74
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2728   58]
 [ 302  134]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12537699937820435
difference in average predicted and observed risk = -0.00994300062179565
number samples = 3222
accuracy = 0.888268
precision class 0 = 0.90033
precision class 1 = 0.697917
recall class 0 = 0.979182
recall class 1 = 0.307339
false negative rate = 0.692661
false positive rate = 0.020818
positive prediction rate = 0.05959
AUC of ROC = 0.856015
AUC of PRC = 0.552597
min(+P, Se) = 0.510297

-------------------------------

Epoch 00063: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch63.state
Epoch 64/100
 - 819s - loss: 0.2640 - val_loss: 0.2845

==>predicting on train



confusion matrix:
[[6979   57]
 [ 926  386]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12708599865436554
difference in average predicted and observed risk = -0.030077001345634458
number samples = 8348
accuracy = 0.882247
precision class 0 = 0.882859
precision class 1 = 0.871332
recall class 0 = 0.991899
recall class 1 = 0.294207
false negative rate = 0.705793
false positive rate = 0.008101
positive prediction rate = 0.053067
AUC of ROC = 0.900891
AUC of PRC = 0.686335
min(+P, Se) = 0.616844

-------------------------------

confusion matrix:
[[3958   44]
 [ 267  204]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10618499666452408
difference in average predicted and observed risk = 0.0008869966645240757
number samples = 4473
accuracy = 0.930472
precision class 0 = 0.936805
precision class 1 = 0.822581
recall class 0 = 0.989006
recall class 1 = 0.433121
false negative rate = 0.566879
false positive rate = 0.010995
positive prediction rate = 0.055444
AUC of ROC = 0.923866
AUC of PRC = 0.694027
min(+P, Se) = 0.619247

-------------------------------

confusion matrix:
[[1181   14]
 [  79   64]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11435600370168686
difference in average predicted and observed risk = 0.00748000370168686
number samples = 1338
accuracy = 0.930493
precision class 0 = 0.937302
precision class 1 = 0.820513
recall class 0 = 0.988285
recall class 1 = 0.447552
false negative rate = 0.552448
false positive rate = 0.011715
positive prediction rate = 0.058296
AUC of ROC = 0.929842
AUC of PRC = 0.704972
min(+P, Se) = 0.631944

-------------------------------

confusion matrix:
[[349   1]
 [ 23  16]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10074900090694427
difference in average predicted and observed risk = 0.000492000906944276
number samples = 389
accuracy = 0.938303
precision class 0 = 0.938172
precision class 1 = 0.941176
recall class 0 = 0.997143
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.002857
positive prediction rate = 0.043702
AUC of ROC = 0.929231
AUC of PRC = 0.708133
min(+P, Se) = 0.658537

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.17352400720119476
difference in average predicted and observed risk = 0.008110007201194758
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.954955
AUC of PRC = 0.87053
min(+P, Se) = 0.791667

-------------------------------

confusion matrix:
[[6923   63]
 [ 693  380]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11547300219535828
difference in average predicted and observed risk = -0.017669997804641735
number samples = 8059
accuracy = 0.906192
precision class 0 = 0.909007
precision class 1 = 0.857788
recall class 0 = 0.990982
recall class 1 = 0.354147
false negative rate = 0.645853
false positive rate = 0.009018
positive prediction rate = 0.05497
AUC of ROC = 0.916205
AUC of PRC = 0.698783
min(+P, Se) = 0.632216

-------------------------------

confusion matrix:
[[5653   55]
 [ 609  305]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12391500174999237
difference in average predicted and observed risk = -0.014109998250007638
number samples = 6622
accuracy = 0.899728
precision class 0 = 0.902747
precision class 1 = 0.847222
recall class 0 = 0.990364
recall class 1 = 0.333698
false negative rate = 0.666302
false positive rate = 0.009636
positive prediction rate = 0.054364
AUC of ROC = 0.906282
AUC of PRC = 0.675253
min(+P, Se) = 0.605033

-------------------------------

confusion matrix:
[[8971   75]
 [ 930  433]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11500599980354309
difference in average predicted and observed risk = -0.015938000196456914
number samples = 10409
accuracy = 0.903449
precision class 0 = 0.90607
precision class 1 = 0.852362
recall class 0 = 0.991709
recall class 1 = 0.317682
false negative rate = 0.682318
false positive rate = 0.008291
positive prediction rate = 0.048804
AUC of ROC = 0.910819
AUC of PRC = 0.676575
min(+P, Se) = 0.606016

-------------------------------

confusion matrix:
[[1621   20]
 [ 249  158]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1454409956932068
difference in average predicted and observed risk = -0.0532890043067932
number samples = 2048
accuracy = 0.868652
precision class 0 = 0.866845
precision class 1 = 0.88764
recall class 0 = 0.987812
recall class 1 = 0.388206
false negative rate = 0.611794
false positive rate = 0.012188
positive prediction rate = 0.086914
AUC of ROC = 0.918293
AUC of PRC = 0.762229
min(+P, Se) = 0.670732

-------------------------------

confusion matrix:
[[1269   13]
 [  70   56]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11192499846220016
difference in average predicted and observed risk = 0.022435998462200166
number samples = 1408
accuracy = 0.941051
precision class 0 = 0.947722
precision class 1 = 0.811594
recall class 0 = 0.98986
recall class 1 = 0.444444
false negative rate = 0.555556
false positive rate = 0.01014
positive prediction rate = 0.049006
AUC of ROC = 0.916803
AUC of PRC = 0.656389
min(+P, Se) = 0.604651

-------------------------------

confusion matrix:
[[291   5]
 [ 31  21]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14354799687862396
difference in average predicted and observed risk = -0.00587700312137604
number samples = 348
accuracy = 0.896552
precision class 0 = 0.903727
precision class 1 = 0.807692
recall class 0 = 0.983108
recall class 1 = 0.403846
false negative rate = 0.596154
false positive rate = 0.016892
positive prediction rate = 0.074713
AUC of ROC = 0.89527
AUC of PRC = 0.687844
min(+P, Se) = 0.634615

-------------------------------

confusion matrix:
[[424   5]
 [ 22  17]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.1039699986577034
difference in average predicted and observed risk = 0.020636998657703395
number samples = 468
accuracy = 0.942308
precision class 0 = 0.950673
precision class 1 = 0.772727
recall class 0 = 0.988345
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.011655
positive prediction rate = 0.047009
AUC of ROC = 0.895105
AUC of PRC = 0.631743
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12576   118]
 [ 1302   685]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11928100138902664
difference in average predicted and observed risk = -0.01606399861097335
number samples = 14681
accuracy = 0.903276
precision class 0 = 0.906182
precision class 1 = 0.853051
recall class 0 = 0.990704
recall class 1 = 0.344741
false negative rate = 0.655259
false positive rate = 0.009296
positive prediction rate = 0.054697
AUC of ROC = 0.911738
AUC of PRC = 0.688361
min(+P, Se) = 0.619718

-------------------------------

==>predicting on validation



confusion matrix:
[[1511   24]
 [ 203   75]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12865500152111053
difference in average predicted and observed risk = -0.024681998478889466
number samples = 1813
accuracy = 0.874793
precision class 0 = 0.881564
precision class 1 = 0.757576
recall class 0 = 0.984365
recall class 1 = 0.269784
false negative rate = 0.730216
false positive rate = 0.015635
positive prediction rate = 0.054606
AUC of ROC = 0.851227
AUC of PRC = 0.577394
min(+P, Se) = 0.525597

-------------------------------

confusion matrix:
[[891  16]
 [ 82  31]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10689599812030792
difference in average predicted and observed risk = -0.0038880018796920712
number samples = 1020
accuracy = 0.903922
precision class 0 = 0.915725
precision class 1 = 0.659574
recall class 0 = 0.982359
recall class 1 = 0.274336
false negative rate = 0.725664
false positive rate = 0.017641
positive prediction rate = 0.046078
AUC of ROC = 0.852904
AUC of PRC = 0.495976
min(+P, Se) = 0.442478

-------------------------------

confusion matrix:
[[240  11]
 [ 21  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13077600300312042
difference in average predicted and observed risk = 0.011478003003120421
number samples = 285
accuracy = 0.887719
precision class 0 = 0.91954
precision class 1 = 0.541667
recall class 0 = 0.956175
recall class 1 = 0.382353
false negative rate = 0.617647
false positive rate = 0.043825
positive prediction rate = 0.084211
AUC of ROC = 0.898641
AUC of PRC = 0.576301
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09417100250720978
difference in average predicted and observed risk = 0.0044270025072097735
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.814889
AUC of PRC = 0.434113
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19221700727939606
difference in average predicted and observed risk = 0.03837100727939605
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.977273
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1494   35]
 [ 172   72]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1215360015630722
difference in average predicted and observed risk = -0.016083998436927788
number samples = 1773
accuracy = 0.883249
precision class 0 = 0.896759
precision class 1 = 0.672897
recall class 0 = 0.977109
recall class 1 = 0.295082
false negative rate = 0.704918
false positive rate = 0.022891
positive prediction rate = 0.06035
AUC of ROC = 0.858166
AUC of PRC = 0.551
min(+P, Se) = 0.504098

-------------------------------

confusion matrix:
[[1238   19]
 [ 140   52]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12174899876117706
difference in average predicted and observed risk = -0.010756001238822949
number samples = 1449
accuracy = 0.890269
precision class 0 = 0.898403
precision class 1 = 0.732394
recall class 0 = 0.984885
recall class 1 = 0.270833
false negative rate = 0.729167
false positive rate = 0.015115
positive prediction rate = 0.048999
AUC of ROC = 0.858161
AUC of PRC = 0.561204
min(+P, Se) = 0.515625

-------------------------------

confusion matrix:
[[1942   36]
 [ 224   87]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11935000121593475
difference in average predicted and observed risk = -0.016516998784065234
number samples = 2289
accuracy = 0.886413
precision class 0 = 0.896584
precision class 1 = 0.707317
recall class 0 = 0.9818
recall class 1 = 0.279743
false negative rate = 0.720257
false positive rate = 0.0182
positive prediction rate = 0.053735
AUC of ROC = 0.854834
AUC of PRC = 0.548826
min(+P, Se) = 0.505917

-------------------------------

confusion matrix:
[[359   9]
 [ 56  25]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14155399799346924
difference in average predicted and observed risk = -0.03884700200653077
number samples = 449
accuracy = 0.855234
precision class 0 = 0.86506
precision class 1 = 0.735294
recall class 0 = 0.975543
recall class 1 = 0.308642
false negative rate = 0.691358
false positive rate = 0.024457
positive prediction rate = 0.075724
AUC of ROC = 0.859937
AUC of PRC = 0.619081
min(+P, Se) = 0.560976

-------------------------------

confusion matrix:
[[273   5]
 [ 24   6]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10851100087165833
difference in average predicted and observed risk = 0.011108000871658322
number samples = 308
accuracy = 0.905844
precision class 0 = 0.919192
precision class 1 = 0.545455
recall class 0 = 0.982014
recall class 1 = 0.2
false negative rate = 0.8
false positive rate = 0.017986
positive prediction rate = 0.035714
AUC of ROC = 0.872422
AUC of PRC = 0.506793
min(+P, Se) = 0.566667

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10818500071763992
difference in average predicted and observed risk = 0.036020000717639916
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.88254
AUC of PRC = 0.387056
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14220499992370605
difference in average predicted and observed risk = 0.05359699992370605
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.892857
AUC of PRC = 0.696474
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2732   54]
 [ 312  124]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12163200229406357
difference in average predicted and observed risk = -0.013687997705936428
number samples = 3222
accuracy = 0.886406
precision class 0 = 0.897503
precision class 1 = 0.696629
recall class 0 = 0.980617
recall class 1 = 0.284404
false negative rate = 0.715596
false positive rate = 0.019383
positive prediction rate = 0.055245
AUC of ROC = 0.857629
AUC of PRC = 0.554505
min(+P, Se) = 0.511468

-------------------------------

Epoch 00064: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch64.state
Epoch 65/100
 - 820s - loss: 0.2644 - val_loss: 0.2869

==>predicting on train



confusion matrix:
[[6971   65]
 [ 867  445]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12239199876785278
difference in average predicted and observed risk = -0.034771001232147214
number samples = 8348
accuracy = 0.888357
precision class 0 = 0.889385
precision class 1 = 0.872549
recall class 0 = 0.990762
recall class 1 = 0.339177
false negative rate = 0.660823
false positive rate = 0.009238
positive prediction rate = 0.061092
AUC of ROC = 0.899018
AUC of PRC = 0.689323
min(+P, Se) = 0.61128

-------------------------------

confusion matrix:
[[3953   49]
 [ 263  208]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10035499930381775
difference in average predicted and observed risk = -0.004943000696182254
number samples = 4473
accuracy = 0.930248
precision class 0 = 0.937619
precision class 1 = 0.809339
recall class 0 = 0.987756
recall class 1 = 0.441614
false negative rate = 0.558386
false positive rate = 0.012244
positive prediction rate = 0.057456
AUC of ROC = 0.921935
AUC of PRC = 0.697356
min(+P, Se) = 0.608051

-------------------------------

confusion matrix:
[[1181   14]
 [  80   63]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10764200240373611
difference in average predicted and observed risk = 0.0007660024037361157
number samples = 1338
accuracy = 0.929746
precision class 0 = 0.936558
precision class 1 = 0.818182
recall class 0 = 0.988285
recall class 1 = 0.440559
false negative rate = 0.559441
false positive rate = 0.011715
positive prediction rate = 0.057549
AUC of ROC = 0.928572
AUC of PRC = 0.699888
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[349   1]
 [ 21  18]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09560699760913849
difference in average predicted and observed risk = -0.00465000239086151
number samples = 389
accuracy = 0.943445
precision class 0 = 0.943243
precision class 1 = 0.947368
recall class 0 = 0.997143
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.002857
positive prediction rate = 0.048843
AUC of ROC = 0.928791
AUC of PRC = 0.705209
min(+P, Se) = 0.675

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1651889979839325
difference in average predicted and observed risk = -0.00022500201606751036
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.961507
AUC of PRC = 0.867984
min(+P, Se) = 0.782609

-------------------------------

confusion matrix:
[[6913   73]
 [ 660  413]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1110209971666336
difference in average predicted and observed risk = -0.022122002833366405
number samples = 8059
accuracy = 0.909046
precision class 0 = 0.912848
precision class 1 = 0.849794
recall class 0 = 0.989551
recall class 1 = 0.384902
false negative rate = 0.615098
false positive rate = 0.010449
positive prediction rate = 0.060305
AUC of ROC = 0.91568
AUC of PRC = 0.703251
min(+P, Se) = 0.637465

-------------------------------

confusion matrix:
[[5650   58]
 [ 578  336]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11765100061893463
difference in average predicted and observed risk = -0.020373999381065377
number samples = 6622
accuracy = 0.903957
precision class 0 = 0.907193
precision class 1 = 0.852792
recall class 0 = 0.989839
recall class 1 = 0.367615
false negative rate = 0.632385
false positive rate = 0.010161
positive prediction rate = 0.059499
AUC of ROC = 0.903422
AUC of PRC = 0.677735
min(+P, Se) = 0.588621

-------------------------------

confusion matrix:
[[8965   81]
 [ 889  474]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10927800089120865
difference in average predicted and observed risk = -0.021665999108791356
number samples = 10409
accuracy = 0.906811
precision class 0 = 0.909783
precision class 1 = 0.854054
recall class 0 = 0.991046
recall class 1 = 0.347762
false negative rate = 0.652238
false positive rate = 0.008954
positive prediction rate = 0.053319
AUC of ROC = 0.908748
AUC of PRC = 0.678752
min(+P, Se) = 0.603081

-------------------------------

confusion matrix:
[[1615   26]
 [ 233  174]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14410999417304993
difference in average predicted and observed risk = -0.05462000582695006
number samples = 2048
accuracy = 0.873535
precision class 0 = 0.873918
precision class 1 = 0.87
recall class 0 = 0.984156
recall class 1 = 0.427518
false negative rate = 0.572482
false positive rate = 0.015844
positive prediction rate = 0.097656
AUC of ROC = 0.919022
AUC of PRC = 0.769276
min(+P, Se) = 0.676471

-------------------------------

confusion matrix:
[[1269   13]
 [  68   58]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10398100316524506
difference in average predicted and observed risk = 0.014492003165245057
number samples = 1408
accuracy = 0.942472
precision class 0 = 0.94914
precision class 1 = 0.816901
recall class 0 = 0.98986
recall class 1 = 0.460317
false negative rate = 0.539683
false positive rate = 0.01014
positive prediction rate = 0.050426
AUC of ROC = 0.912135
AUC of PRC = 0.650128
min(+P, Se) = 0.585938

-------------------------------

confusion matrix:
[[289   7]
 [ 30  22]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1371999979019165
difference in average predicted and observed risk = -0.012225002098083498
number samples = 348
accuracy = 0.893678
precision class 0 = 0.905956
precision class 1 = 0.758621
recall class 0 = 0.976351
recall class 1 = 0.423077
false negative rate = 0.576923
false positive rate = 0.023649
positive prediction rate = 0.083333
AUC of ROC = 0.893061
AUC of PRC = 0.685087
min(+P, Se) = 0.634615

-------------------------------

confusion matrix:
[[425   4]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10051199793815613
difference in average predicted and observed risk = 0.017178997938156124
number samples = 468
accuracy = 0.952991
precision class 0 = 0.959368
precision class 1 = 0.84
recall class 0 = 0.990676
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.009324
positive prediction rate = 0.053419
AUC of ROC = 0.894388
AUC of PRC = 0.654953
min(+P, Se) = 0.575

-------------------------------

confusion matrix:
[[12563   131]
 [ 1238   749]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11401200294494629
difference in average predicted and observed risk = -0.021332997055053704
number samples = 14681
accuracy = 0.90675
precision class 0 = 0.910296
precision class 1 = 0.851136
recall class 0 = 0.98968
recall class 1 = 0.37695
false negative rate = 0.62305
false positive rate = 0.01032
positive prediction rate = 0.059941
AUC of ROC = 0.910196
AUC of PRC = 0.691808
min(+P, Se) = 0.614997

-------------------------------

==>predicting on validation



confusion matrix:
[[1504   31]
 [ 191   87]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1246889978647232
difference in average predicted and observed risk = -0.028648002135276796
number samples = 1813
accuracy = 0.877551
precision class 0 = 0.887316
precision class 1 = 0.737288
recall class 0 = 0.979805
recall class 1 = 0.31295
false negative rate = 0.68705
false positive rate = 0.020195
positive prediction rate = 0.065085
AUC of ROC = 0.852199
AUC of PRC = 0.580024
min(+P, Se) = 0.521583

-------------------------------

confusion matrix:
[[889  18]
 [ 81  32]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10153999924659729
difference in average predicted and observed risk = -0.009244000753402704
number samples = 1020
accuracy = 0.902941
precision class 0 = 0.916495
precision class 1 = 0.64
recall class 0 = 0.980154
recall class 1 = 0.283186
false negative rate = 0.716814
false positive rate = 0.019846
positive prediction rate = 0.04902
AUC of ROC = 0.848592
AUC of PRC = 0.49329
min(+P, Se) = 0.460177

-------------------------------

confusion matrix:
[[242   9]
 [ 18  16]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12451700121164322
difference in average predicted and observed risk = 0.005219001211643218
number samples = 285
accuracy = 0.905263
precision class 0 = 0.930769
precision class 1 = 0.64
recall class 0 = 0.964143
recall class 1 = 0.470588
false negative rate = 0.529412
false positive rate = 0.035857
positive prediction rate = 0.087719
AUC of ROC = 0.897
AUC of PRC = 0.657385
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08517500013113022
difference in average predicted and observed risk = -0.004568999868869786
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.816901
AUC of PRC = 0.431732
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.180417999625206
difference in average predicted and observed risk = 0.026571999625205983
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1490   39]
 [ 165   79]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11665099859237671
difference in average predicted and observed risk = -0.020969001407623283
number samples = 1773
accuracy = 0.884941
precision class 0 = 0.900302
precision class 1 = 0.669492
recall class 0 = 0.974493
recall class 1 = 0.32377
false negative rate = 0.67623
false positive rate = 0.025507
positive prediction rate = 0.066554
AUC of ROC = 0.858964
AUC of PRC = 0.558425
min(+P, Se) = 0.520492

-------------------------------

confusion matrix:
[[1235   22]
 [ 131   61]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11706800013780594
difference in average predicted and observed risk = -0.015436999862194073
number samples = 1449
accuracy = 0.89441
precision class 0 = 0.9041
precision class 1 = 0.73494
recall class 0 = 0.982498
recall class 1 = 0.317708
false negative rate = 0.682292
false positive rate = 0.017502
positive prediction rate = 0.057281
AUC of ROC = 0.854353
AUC of PRC = 0.563164
min(+P, Se) = 0.526042

-------------------------------

confusion matrix:
[[1937   41]
 [ 215   96]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11387799680233002
difference in average predicted and observed risk = -0.02198900319766997
number samples = 2289
accuracy = 0.888161
precision class 0 = 0.900093
precision class 1 = 0.70073
recall class 0 = 0.979272
recall class 1 = 0.308682
false negative rate = 0.691318
false positive rate = 0.020728
positive prediction rate = 0.059851
AUC of ROC = 0.854707
AUC of PRC = 0.556325
min(+P, Se) = 0.511254

-------------------------------

confusion matrix:
[[359   9]
 [ 54  27]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13931599259376526
difference in average predicted and observed risk = -0.04108500740623475
number samples = 449
accuracy = 0.859688
precision class 0 = 0.869249
precision class 1 = 0.75
recall class 0 = 0.975543
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.024457
positive prediction rate = 0.080178
AUC of ROC = 0.853362
AUC of PRC = 0.618344
min(+P, Se) = 0.54878

-------------------------------

confusion matrix:
[[273   5]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10260400176048279
difference in average predicted and observed risk = 0.005201001760482785
number samples = 308
accuracy = 0.918831
precision class 0 = 0.931741
precision class 1 = 0.666667
recall class 0 = 0.982014
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.017986
positive prediction rate = 0.048701
AUC of ROC = 0.872422
AUC of PRC = 0.529533
min(+P, Se) = 0.542857

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10573799908161163
difference in average predicted and observed risk = 0.033572999081611626
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.892063
AUC of PRC = 0.414787
min(+P, Se) = 0.315789

-------------------------------

confusion matrix:
[[70  2]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14399899542331696
difference in average predicted and observed risk = 0.05539099542331695
number samples = 79
accuracy = 0.949367
precision class 0 = 0.972222
precision class 1 = 0.714286
recall class 0 = 0.972222
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.027778
positive prediction rate = 0.088608
AUC of ROC = 0.896825
AUC of PRC = 0.780446
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2725   61]
 [ 296  140]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.1168380007147789
difference in average predicted and observed risk = -0.018481999285221096
number samples = 3222
accuracy = 0.889199
precision class 0 = 0.902019
precision class 1 = 0.696517
recall class 0 = 0.978105
recall class 1 = 0.321101
false negative rate = 0.678899
false positive rate = 0.021895
positive prediction rate = 0.062384
AUC of ROC = 0.856713
AUC of PRC = 0.560708
min(+P, Se) = 0.521445

-------------------------------

Epoch 00065: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch65.state
Epoch 66/100
 - 823s - loss: 0.2653 - val_loss: 0.2836

==>predicting on train



confusion matrix:
[[6982   54]
 [ 905  407]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12592099606990814
difference in average predicted and observed risk = -0.031242003930091855
number samples = 8348
accuracy = 0.885122
precision class 0 = 0.885254
precision class 1 = 0.882863
recall class 0 = 0.992325
recall class 1 = 0.310213
false negative rate = 0.689787
false positive rate = 0.007675
positive prediction rate = 0.055223
AUC of ROC = 0.903723
AUC of PRC = 0.695412
min(+P, Se) = 0.615091

-------------------------------

confusion matrix:
[[3962   40]
 [ 265  206]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10361199826002121
difference in average predicted and observed risk = -0.001686001739978793
number samples = 4473
accuracy = 0.931813
precision class 0 = 0.937308
precision class 1 = 0.837398
recall class 0 = 0.990005
recall class 1 = 0.437367
false negative rate = 0.562633
false positive rate = 0.009995
positive prediction rate = 0.054997
AUC of ROC = 0.926324
AUC of PRC = 0.704527
min(+P, Se) = 0.622363

-------------------------------

confusion matrix:
[[1187    8]
 [  82   61]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11050499975681305
difference in average predicted and observed risk = 0.0036289997568130505
number samples = 1338
accuracy = 0.932735
precision class 0 = 0.935382
precision class 1 = 0.884058
recall class 0 = 0.993305
recall class 1 = 0.426573
false negative rate = 0.573427
false positive rate = 0.006695
positive prediction rate = 0.05157
AUC of ROC = 0.933353
AUC of PRC = 0.711063
min(+P, Se) = 0.643357

-------------------------------

confusion matrix:
[[349   1]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09835399687290192
difference in average predicted and observed risk = -0.0019030031270980824
number samples = 389
accuracy = 0.940874
precision class 0 = 0.940701
precision class 1 = 0.944444
recall class 0 = 0.997143
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.002857
positive prediction rate = 0.046272
AUC of ROC = 0.925641
AUC of PRC = 0.692899
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[109   2]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16177299618721008
difference in average predicted and observed risk = -0.0036410038127899225
number samples = 133
accuracy = 0.924812
precision class 0 = 0.931624
precision class 1 = 0.875
recall class 0 = 0.981982
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.018018
positive prediction rate = 0.120301
AUC of ROC = 0.965602
AUC of PRC = 0.879819
min(+P, Se) = 0.772727

-------------------------------

confusion matrix:
[[6928   58]
 [ 672  401]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1140810027718544
difference in average predicted and observed risk = -0.01906199722814561
number samples = 8059
accuracy = 0.909418
precision class 0 = 0.911579
precision class 1 = 0.873638
recall class 0 = 0.991698
recall class 1 = 0.373719
false negative rate = 0.626281
false positive rate = 0.008302
positive prediction rate = 0.056955
AUC of ROC = 0.919921
AUC of PRC = 0.711574
min(+P, Se) = 0.637465

-------------------------------

confusion matrix:
[[5661   47]
 [ 610  304]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12124600261449814
difference in average predicted and observed risk = -0.01677899738550187
number samples = 6622
accuracy = 0.900785
precision class 0 = 0.902727
precision class 1 = 0.866097
recall class 0 = 0.991766
recall class 1 = 0.332604
false negative rate = 0.667396
false positive rate = 0.008234
positive prediction rate = 0.053005
AUC of ROC = 0.907795
AUC of PRC = 0.680436
min(+P, Se) = 0.600656

-------------------------------

confusion matrix:
[[8982   64]
 [ 916  447]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11364900320768356
difference in average predicted and observed risk = -0.01729499679231644
number samples = 10409
accuracy = 0.905851
precision class 0 = 0.907456
precision class 1 = 0.874755
recall class 0 = 0.992925
recall class 1 = 0.327953
false negative rate = 0.672047
false positive rate = 0.007075
positive prediction rate = 0.049092
AUC of ROC = 0.913999
AUC of PRC = 0.685456
min(+P, Se) = 0.60675

-------------------------------

confusion matrix:
[[1622   19]
 [ 240  167]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1423330008983612
difference in average predicted and observed risk = -0.056396999101638784
number samples = 2048
accuracy = 0.873535
precision class 0 = 0.871106
precision class 1 = 0.897849
recall class 0 = 0.988422
recall class 1 = 0.410319
false negative rate = 0.589681
false positive rate = 0.011578
positive prediction rate = 0.09082
AUC of ROC = 0.921839
AUC of PRC = 0.771116
min(+P, Se) = 0.684597

-------------------------------

confusion matrix:
[[1269   13]
 [  73   53]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10730800032615662
difference in average predicted and observed risk = 0.017819000326156617
number samples = 1408
accuracy = 0.93892
precision class 0 = 0.945604
precision class 1 = 0.80303
recall class 0 = 0.98986
recall class 1 = 0.420635
false negative rate = 0.579365
false positive rate = 0.01014
positive prediction rate = 0.046875
AUC of ROC = 0.910581
AUC of PRC = 0.657031
min(+P, Se) = 0.614173

-------------------------------

confusion matrix:
[[290   6]
 [ 34  18]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14060600101947784
difference in average predicted and observed risk = -0.008818998980522158
number samples = 348
accuracy = 0.885057
precision class 0 = 0.895062
precision class 1 = 0.75
recall class 0 = 0.97973
recall class 1 = 0.346154
false negative rate = 0.653846
false positive rate = 0.02027
positive prediction rate = 0.068966
AUC of ROC = 0.900338
AUC of PRC = 0.703666
min(+P, Se) = 0.641509

-------------------------------

confusion matrix:
[[426   3]
 [ 19  20]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10210099816322327
difference in average predicted and observed risk = 0.018767998163223262
number samples = 468
accuracy = 0.952991
precision class 0 = 0.957303
precision class 1 = 0.869565
recall class 0 = 0.993007
recall class 1 = 0.512821
false negative rate = 0.487179
false positive rate = 0.006993
positive prediction rate = 0.049145
AUC of ROC = 0.901022
AUC of PRC = 0.654942
min(+P, Se) = 0.589744

-------------------------------

confusion matrix:
[[12589   105]
 [ 1282   705]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11731299757957458
difference in average predicted and observed risk = -0.018032002420425408
number samples = 14681
accuracy = 0.905524
precision class 0 = 0.907577
precision class 1 = 0.87037
recall class 0 = 0.991728
recall class 1 = 0.354806
false negative rate = 0.645194
false positive rate = 0.008272
positive prediction rate = 0.055173
AUC of ROC = 0.914514
AUC of PRC = 0.697692
min(+P, Se) = 0.62003

-------------------------------

==>predicting on validation



confusion matrix:
[[1505   30]
 [ 198   80]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12818999588489532
difference in average predicted and observed risk = -0.025147004115104676
number samples = 1813
accuracy = 0.874242
precision class 0 = 0.883735
precision class 1 = 0.727273
recall class 0 = 0.980456
recall class 1 = 0.28777
false negative rate = 0.71223
false positive rate = 0.019544
positive prediction rate = 0.060673
AUC of ROC = 0.847276
AUC of PRC = 0.577714
min(+P, Se) = 0.506944

-------------------------------

confusion matrix:
[[890  17]
 [ 86  27]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10463699698448181
difference in average predicted and observed risk = -0.006147003015518182
number samples = 1020
accuracy = 0.89902
precision class 0 = 0.911885
precision class 1 = 0.613636
recall class 0 = 0.981257
recall class 1 = 0.238938
false negative rate = 0.761062
false positive rate = 0.018743
positive prediction rate = 0.043137
AUC of ROC = 0.857783
AUC of PRC = 0.491457
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[243   8]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12942199409008026
difference in average predicted and observed risk = 0.01012399409008026
number samples = 285
accuracy = 0.905263
precision class 0 = 0.927481
precision class 1 = 0.652174
recall class 0 = 0.968127
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.031873
positive prediction rate = 0.080702
AUC of ROC = 0.901219
AUC of PRC = 0.642722
min(+P, Se) = 0.594595

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08733899891376495
difference in average predicted and observed risk = -0.0024050010862350507
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.82495
AUC of PRC = 0.404527
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18381699919700623
difference in average predicted and observed risk = 0.029970999197006215
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1495   34]
 [ 171   73]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11934799700975418
difference in average predicted and observed risk = -0.01827200299024581
number samples = 1773
accuracy = 0.884377
precision class 0 = 0.897359
precision class 1 = 0.682243
recall class 0 = 0.977763
recall class 1 = 0.29918
false negative rate = 0.70082
false positive rate = 0.022237
positive prediction rate = 0.06035
AUC of ROC = 0.858552
AUC of PRC = 0.554653
min(+P, Se) = 0.518219

-------------------------------

confusion matrix:
[[1233   24]
 [ 138   54]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12147100269794464
difference in average predicted and observed risk = -0.01103399730205537
number samples = 1449
accuracy = 0.888199
precision class 0 = 0.899344
precision class 1 = 0.692308
recall class 0 = 0.980907
recall class 1 = 0.28125
false negative rate = 0.71875
false positive rate = 0.019093
positive prediction rate = 0.05383
AUC of ROC = 0.857104
AUC of PRC = 0.56893
min(+P, Se) = 0.520833

-------------------------------

confusion matrix:
[[1937   41]
 [ 223   88]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11838000267744064
difference in average predicted and observed risk = -0.017486997322559344
number samples = 2289
accuracy = 0.884666
precision class 0 = 0.896759
precision class 1 = 0.682171
recall class 0 = 0.979272
recall class 1 = 0.282958
false negative rate = 0.717042
false positive rate = 0.020728
positive prediction rate = 0.056356
AUC of ROC = 0.852298
AUC of PRC = 0.553381
min(+P, Se) = 0.508039

-------------------------------

confusion matrix:
[[361   7]
 [ 58  23]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13553400337696075
difference in average predicted and observed risk = -0.04486699662303925
number samples = 449
accuracy = 0.855234
precision class 0 = 0.861575
precision class 1 = 0.766667
recall class 0 = 0.980978
recall class 1 = 0.283951
false negative rate = 0.716049
false positive rate = 0.019022
positive prediction rate = 0.066815
AUC of ROC = 0.86101
AUC of PRC = 0.623084
min(+P, Se) = 0.580247

-------------------------------

confusion matrix:
[[272   6]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11162599921226501
difference in average predicted and observed risk = 0.014222999212265011
number samples = 308
accuracy = 0.915584
precision class 0 = 0.931507
precision class 1 = 0.625
recall class 0 = 0.978417
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.021583
positive prediction rate = 0.051948
AUC of ROC = 0.888249
AUC of PRC = 0.534667
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10614199936389923
difference in average predicted and observed risk = 0.033976999363899224
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.885714
AUC of PRC = 0.383579
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14066100120544434
difference in average predicted and observed risk = 0.05205300120544433
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.886905
AUC of PRC = 0.740855
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2728   58]
 [ 309  127]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.1203019991517067
difference in average predicted and observed risk = -0.0150180008482933
number samples = 3222
accuracy = 0.886096
precision class 0 = 0.898255
precision class 1 = 0.686486
recall class 0 = 0.979182
recall class 1 = 0.291284
false negative rate = 0.708716
false positive rate = 0.020818
positive prediction rate = 0.057418
AUC of ROC = 0.857412
AUC of PRC = 0.560168
min(+P, Se) = 0.509132

-------------------------------

Epoch 00066: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch66.state
Epoch 67/100
 - 822s - loss: 0.2646 - val_loss: 0.2869

==>predicting on train



confusion matrix:
[[6979   57]
 [ 934  378]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.11906199902296066
difference in average predicted and observed risk = -0.038101000977039334
number samples = 8348
accuracy = 0.881289
precision class 0 = 0.881966
precision class 1 = 0.868966
recall class 0 = 0.991899
recall class 1 = 0.28811
false negative rate = 0.71189
false positive rate = 0.008101
positive prediction rate = 0.052108
AUC of ROC = 0.900967
AUC of PRC = 0.692514
min(+P, Se) = 0.61814

-------------------------------

confusion matrix:
[[3970   32]
 [ 279  192]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.09784200042486191
difference in average predicted and observed risk = -0.007455999575138095
number samples = 4473
accuracy = 0.930472
precision class 0 = 0.934337
precision class 1 = 0.857143
recall class 0 = 0.992004
recall class 1 = 0.407643
false negative rate = 0.592357
false positive rate = 0.007996
positive prediction rate = 0.050078
AUC of ROC = 0.926401
AUC of PRC = 0.706513
min(+P, Se) = 0.624204

-------------------------------

confusion matrix:
[[1183   12]
 [  89   54]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10389699786901474
difference in average predicted and observed risk = -0.002979002130985259
number samples = 1338
accuracy = 0.924514
precision class 0 = 0.930031
precision class 1 = 0.818182
recall class 0 = 0.989958
recall class 1 = 0.377622
false negative rate = 0.622378
false positive rate = 0.010042
positive prediction rate = 0.049327
AUC of ROC = 0.934459
AUC of PRC = 0.70364
min(+P, Se) = 0.622378

-------------------------------

confusion matrix:
[[349   1]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09247300028800964
difference in average predicted and observed risk = -0.007783999711990355
number samples = 389
accuracy = 0.940874
precision class 0 = 0.940701
precision class 1 = 0.944444
recall class 0 = 0.997143
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.002857
positive prediction rate = 0.046272
AUC of ROC = 0.932674
AUC of PRC = 0.760984
min(+P, Se) = 0.7

-------------------------------

confusion matrix:
[[109   2]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.15456999838352203
difference in average predicted and observed risk = -0.010844001616477972
number samples = 133
accuracy = 0.924812
precision class 0 = 0.931624
precision class 1 = 0.875
recall class 0 = 0.981982
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.018018
positive prediction rate = 0.120301
AUC of ROC = 0.969697
AUC of PRC = 0.893648
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6936   50]
 [ 707  366]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.10701899975538254
difference in average predicted and observed risk = -0.026124000244617473
number samples = 8059
accuracy = 0.906068
precision class 0 = 0.907497
precision class 1 = 0.879808
recall class 0 = 0.992843
recall class 1 = 0.3411
false negative rate = 0.6589
false positive rate = 0.007157
positive prediction rate = 0.051619
AUC of ROC = 0.918103
AUC of PRC = 0.709235
min(+P, Se) = 0.634078

-------------------------------

confusion matrix:
[[5654   54]
 [ 625  289]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11547199636697769
difference in average predicted and observed risk = -0.022553003633022317
number samples = 6622
accuracy = 0.897463
precision class 0 = 0.900462
precision class 1 = 0.842566
recall class 0 = 0.99054
recall class 1 = 0.316193
false negative rate = 0.683807
false positive rate = 0.00946
positive prediction rate = 0.051797
AUC of ROC = 0.907937
AUC of PRC = 0.686443
min(+P, Se) = 0.610503

-------------------------------

confusion matrix:
[[8979   67]
 [ 945  418]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10733900219202042
difference in average predicted and observed risk = -0.02360499780797959
number samples = 10409
accuracy = 0.902776
precision class 0 = 0.904776
precision class 1 = 0.861856
recall class 0 = 0.992593
recall class 1 = 0.306676
false negative rate = 0.693324
false positive rate = 0.007407
positive prediction rate = 0.046594
AUC of ROC = 0.911913
AUC of PRC = 0.685554
min(+P, Se) = 0.610704

-------------------------------

confusion matrix:
[[1621   20]
 [ 255  152]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1354770064353943
difference in average predicted and observed risk = -0.0632529935646057
number samples = 2048
accuracy = 0.865723
precision class 0 = 0.864073
precision class 1 = 0.883721
recall class 0 = 0.987812
recall class 1 = 0.373464
false negative rate = 0.626536
false positive rate = 0.012188
positive prediction rate = 0.083984
AUC of ROC = 0.923891
AUC of PRC = 0.777072
min(+P, Se) = 0.678133

-------------------------------

confusion matrix:
[[1276    6]
 [  80   46]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.0998539999127388
difference in average predicted and observed risk = 0.010364999912738801
number samples = 1408
accuracy = 0.93892
precision class 0 = 0.941003
precision class 1 = 0.884615
recall class 0 = 0.99532
recall class 1 = 0.365079
false negative rate = 0.634921
false positive rate = 0.00468
positive prediction rate = 0.036932
AUC of ROC = 0.914345
AUC of PRC = 0.670734
min(+P, Se) = 0.619048

-------------------------------

confusion matrix:
[[289   7]
 [ 32  20]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.13364200294017792
difference in average predicted and observed risk = -0.015782997059822085
number samples = 348
accuracy = 0.887931
precision class 0 = 0.900312
precision class 1 = 0.740741
recall class 0 = 0.976351
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.023649
positive prediction rate = 0.077586
AUC of ROC = 0.893191
AUC of PRC = 0.677453
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[425   4]
 [ 20  19]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.09674099832773209
difference in average predicted and observed risk = 0.013407998327732082
number samples = 468
accuracy = 0.948718
precision class 0 = 0.955056
precision class 1 = 0.826087
recall class 0 = 0.990676
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.009324
positive prediction rate = 0.049145
AUC of ROC = 0.8911
AUC of PRC = 0.643456
min(+P, Se) = 0.589744

-------------------------------

confusion matrix:
[[12590   104]
 [ 1332   655]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11083199828863144
difference in average predicted and observed risk = -0.024513001711368554
number samples = 14681
accuracy = 0.902187
precision class 0 = 0.904324
precision class 1 = 0.862978
recall class 0 = 0.991807
recall class 1 = 0.329643
false negative rate = 0.670357
false positive rate = 0.008193
positive prediction rate = 0.051699
AUC of ROC = 0.913492
AUC of PRC = 0.698845
min(+P, Se) = 0.622547

-------------------------------

==>predicting on validation



confusion matrix:
[[1510   25]
 [ 206   72]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1217460036277771
difference in average predicted and observed risk = -0.0315909963722229
number samples = 1813
accuracy = 0.872587
precision class 0 = 0.879953
precision class 1 = 0.742268
recall class 0 = 0.983713
recall class 1 = 0.258993
false negative rate = 0.741007
false positive rate = 0.016287
positive prediction rate = 0.053502
AUC of ROC = 0.846756
AUC of PRC = 0.567575
min(+P, Se) = 0.510791

-------------------------------

confusion matrix:
[[898   9]
 [ 88  25]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.09575200080871582
difference in average predicted and observed risk = -0.015031999191284173
number samples = 1020
accuracy = 0.904902
precision class 0 = 0.910751
precision class 1 = 0.735294
recall class 0 = 0.990077
recall class 1 = 0.221239
false negative rate = 0.778761
false positive rate = 0.009923
positive prediction rate = 0.033333
AUC of ROC = 0.856261
AUC of PRC = 0.509409
min(+P, Se) = 0.469027

-------------------------------

confusion matrix:
[[245   6]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.11866699904203415
difference in average predicted and observed risk = -0.0006310009579658521
number samples = 285
accuracy = 0.912281
precision class 0 = 0.92803
precision class 1 = 0.714286
recall class 0 = 0.976096
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.023904
positive prediction rate = 0.073684
AUC of ROC = 0.883525
AUC of PRC = 0.666779
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08367200195789337
difference in average predicted and observed risk = -0.006071998042106633
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.800805
AUC of PRC = 0.403675
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18978199362754822
difference in average predicted and observed risk = 0.03593599362754821
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1503   26]
 [ 177   67]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11129800230264664
difference in average predicted and observed risk = -0.026321997697353355
number samples = 1773
accuracy = 0.885505
precision class 0 = 0.894643
precision class 1 = 0.72043
recall class 0 = 0.982995
recall class 1 = 0.27459
false negative rate = 0.72541
false positive rate = 0.017005
positive prediction rate = 0.052453
AUC of ROC = 0.853526
AUC of PRC = 0.554392
min(+P, Se) = 0.504098

-------------------------------

confusion matrix:
[[1240   17]
 [ 143   49]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11479800194501877
difference in average predicted and observed risk = -0.017706998054981243
number samples = 1449
accuracy = 0.889579
precision class 0 = 0.896602
precision class 1 = 0.742424
recall class 0 = 0.986476
recall class 1 = 0.255208
false negative rate = 0.744792
false positive rate = 0.013524
positive prediction rate = 0.045549
AUC of ROC = 0.856818
AUC of PRC = 0.559204
min(+P, Se) = 0.494792

-------------------------------

confusion matrix:
[[1951   27]
 [ 235   76]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11095699667930603
difference in average predicted and observed risk = -0.024910003320693958
number samples = 2289
accuracy = 0.88554
precision class 0 = 0.892498
precision class 1 = 0.737864
recall class 0 = 0.98635
recall class 1 = 0.244373
false negative rate = 0.755627
false positive rate = 0.01365
positive prediction rate = 0.044998
AUC of ROC = 0.8526
AUC of PRC = 0.554181
min(+P, Se) = 0.504823

-------------------------------

confusion matrix:
[[361   7]
 [ 58  23]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.12683799862861633
difference in average predicted and observed risk = -0.05356300137138367
number samples = 449
accuracy = 0.855234
precision class 0 = 0.861575
precision class 1 = 0.766667
recall class 0 = 0.980978
recall class 1 = 0.283951
false negative rate = 0.716049
false positive rate = 0.019022
positive prediction rate = 0.066815
AUC of ROC = 0.853127
AUC of PRC = 0.619368
min(+P, Se) = 0.54321

-------------------------------

confusion matrix:
[[273   5]
 [ 18  12]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10542699694633484
difference in average predicted and observed risk = 0.008023996946334835
number samples = 308
accuracy = 0.925325
precision class 0 = 0.938144
precision class 1 = 0.705882
recall class 0 = 0.982014
recall class 1 = 0.4
false negative rate = 0.6
false positive rate = 0.017986
positive prediction rate = 0.055195
AUC of ROC = 0.873621
AUC of PRC = 0.54001
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[87  3]
 [ 6  1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10041899979114532
difference in average predicted and observed risk = 0.028253999791145318
number samples = 97
accuracy = 0.907216
precision class 0 = 0.935484
precision class 1 = 0.25
recall class 0 = 0.966667
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.033333
positive prediction rate = 0.041237
AUC of ROC = 0.887302
AUC of PRC = 0.261934
min(+P, Se) = 0.352941

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.13328300416469574
difference in average predicted and observed risk = 0.044675004164695734
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.880952
AUC of PRC = 0.681757
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2743   43]
 [ 320  116]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11287199705839157
difference in average predicted and observed risk = -0.022448002941608425
number samples = 3222
accuracy = 0.887337
precision class 0 = 0.895527
precision class 1 = 0.72956
recall class 0 = 0.984566
recall class 1 = 0.266055
false negative rate = 0.733945
false positive rate = 0.015434
positive prediction rate = 0.049348
AUC of ROC = 0.854592
AUC of PRC = 0.556677
min(+P, Se) = 0.498901

-------------------------------

Epoch 00067: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch67.state
Epoch 68/100
 - 814s - loss: 0.2644 - val_loss: 0.2811

==>predicting on train



confusion matrix:
[[6973   63]
 [ 872  440]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13339099287986755
difference in average predicted and observed risk = -0.023772007120132443
number samples = 8348
accuracy = 0.887997
precision class 0 = 0.888846
precision class 1 = 0.874752
recall class 0 = 0.991046
recall class 1 = 0.335366
false negative rate = 0.664634
false positive rate = 0.008954
positive prediction rate = 0.060254
AUC of ROC = 0.904615
AUC of PRC = 0.699793
min(+P, Se) = 0.621951

-------------------------------

confusion matrix:
[[3956   46]
 [ 264  207]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10821899771690369
difference in average predicted and observed risk = 0.002920997716903684
number samples = 4473
accuracy = 0.930695
precision class 0 = 0.937441
precision class 1 = 0.818182
recall class 0 = 0.988506
recall class 1 = 0.43949
false negative rate = 0.56051
false positive rate = 0.011494
positive prediction rate = 0.056562
AUC of ROC = 0.926382
AUC of PRC = 0.711594
min(+P, Se) = 0.632696

-------------------------------

confusion matrix:
[[1184   11]
 [  78   65]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11631300300359726
difference in average predicted and observed risk = 0.00943700300359726
number samples = 1338
accuracy = 0.933483
precision class 0 = 0.938193
precision class 1 = 0.855263
recall class 0 = 0.990795
recall class 1 = 0.454545
false negative rate = 0.545455
false positive rate = 0.009205
positive prediction rate = 0.056801
AUC of ROC = 0.930872
AUC of PRC = 0.706744
min(+P, Se) = 0.657343

-------------------------------

confusion matrix:
[[349   1]
 [ 20  19]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10543400049209595
difference in average predicted and observed risk = 0.005177000492095948
number samples = 389
accuracy = 0.946015
precision class 0 = 0.945799
precision class 1 = 0.95
recall class 0 = 0.997143
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.002857
positive prediction rate = 0.051414
AUC of ROC = 0.934872
AUC of PRC = 0.761573
min(+P, Se) = 0.731707

-------------------------------

confusion matrix:
[[109   2]
 [  6  16]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.17025400698184967
difference in average predicted and observed risk = 0.004840006981849665
number samples = 133
accuracy = 0.93985
precision class 0 = 0.947826
precision class 1 = 0.888889
recall class 0 = 0.981982
recall class 1 = 0.727273
false negative rate = 0.272727
false positive rate = 0.018018
positive prediction rate = 0.135338
AUC of ROC = 0.965192
AUC of PRC = 0.89254
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6916   70]
 [ 663  410]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11906599998474121
difference in average predicted and observed risk = -0.0140770000152588
number samples = 8059
accuracy = 0.909046
precision class 0 = 0.912521
precision class 1 = 0.854167
recall class 0 = 0.98998
recall class 1 = 0.382106
false negative rate = 0.617894
false positive rate = 0.01002
positive prediction rate = 0.059561
AUC of ROC = 0.918963
AUC of PRC = 0.713787
min(+P, Se) = 0.645911

-------------------------------

confusion matrix:
[[5655   53]
 [ 577  337]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12946900725364685
difference in average predicted and observed risk = -0.008555992746353158
number samples = 6622
accuracy = 0.904863
precision class 0 = 0.907413
precision class 1 = 0.864103
recall class 0 = 0.990715
recall class 1 = 0.368709
false negative rate = 0.631291
false positive rate = 0.009285
positive prediction rate = 0.058895
AUC of ROC = 0.910985
AUC of PRC = 0.693958
min(+P, Se) = 0.606987

-------------------------------

confusion matrix:
[[8971   75]
 [ 888  475]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11961200088262558
difference in average predicted and observed risk = -0.011331999117374425
number samples = 10409
accuracy = 0.907484
precision class 0 = 0.90993
precision class 1 = 0.863636
recall class 0 = 0.991709
recall class 1 = 0.348496
false negative rate = 0.651504
false positive rate = 0.008291
positive prediction rate = 0.052839
AUC of ROC = 0.913995
AUC of PRC = 0.691637
min(+P, Se) = 0.613353

-------------------------------

confusion matrix:
[[1619   22]
 [ 238  169]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1498109996318817
difference in average predicted and observed risk = -0.048919000368118276
number samples = 2048
accuracy = 0.873047
precision class 0 = 0.871836
precision class 1 = 0.884817
recall class 0 = 0.986594
recall class 1 = 0.415233
false negative rate = 0.584767
false positive rate = 0.013406
positive prediction rate = 0.093262
AUC of ROC = 0.923767
AUC of PRC = 0.78112
min(+P, Se) = 0.679707

-------------------------------

confusion matrix:
[[1268   14]
 [  67   59]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11442399770021439
difference in average predicted and observed risk = 0.024934997700214387
number samples = 1408
accuracy = 0.942472
precision class 0 = 0.949813
precision class 1 = 0.808219
recall class 0 = 0.98908
recall class 1 = 0.468254
false negative rate = 0.531746
false positive rate = 0.01092
positive prediction rate = 0.051847
AUC of ROC = 0.919279
AUC of PRC = 0.680421
min(+P, Se) = 0.626984

-------------------------------

confusion matrix:
[[287   9]
 [ 29  23]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1517540067434311
difference in average predicted and observed risk = 0.002329006743431089
number samples = 348
accuracy = 0.890805
precision class 0 = 0.908228
precision class 1 = 0.71875
recall class 0 = 0.969595
recall class 1 = 0.442308
false negative rate = 0.557692
false positive rate = 0.030405
positive prediction rate = 0.091954
AUC of ROC = 0.898454
AUC of PRC = 0.695325
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[426   3]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10922899842262268
difference in average predicted and observed risk = 0.025895998422622676
number samples = 468
accuracy = 0.955128
precision class 0 = 0.959459
precision class 1 = 0.875
recall class 0 = 0.993007
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.006993
positive prediction rate = 0.051282
AUC of ROC = 0.895165
AUC of PRC = 0.643497
min(+P, Se) = 0.564103

-------------------------------

confusion matrix:
[[12571   123]
 [ 1240   747]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12375800311565399
difference in average predicted and observed risk = -0.011586996884346001
number samples = 14681
accuracy = 0.907159
precision class 0 = 0.910217
precision class 1 = 0.858621
recall class 0 = 0.99031
recall class 1 = 0.375944
false negative rate = 0.624056
false positive rate = 0.00969
positive prediction rate = 0.05926
AUC of ROC = 0.915264
AUC of PRC = 0.704684
min(+P, Se) = 0.627767

-------------------------------

==>predicting on validation



confusion matrix:
[[1504   31]
 [ 196   82]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13523800671100616
difference in average predicted and observed risk = -0.018098993288993837
number samples = 1813
accuracy = 0.874793
precision class 0 = 0.884706
precision class 1 = 0.725664
recall class 0 = 0.979805
recall class 1 = 0.294964
false negative rate = 0.705036
false positive rate = 0.020195
positive prediction rate = 0.062328
AUC of ROC = 0.853284
AUC of PRC = 0.583595
min(+P, Se) = 0.521583

-------------------------------

confusion matrix:
[[891  16]
 [ 81  32]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10771399736404419
difference in average predicted and observed risk = -0.003070002635955804
number samples = 1020
accuracy = 0.904902
precision class 0 = 0.916667
precision class 1 = 0.666667
recall class 0 = 0.982359
recall class 1 = 0.283186
false negative rate = 0.716814
false positive rate = 0.017641
positive prediction rate = 0.047059
AUC of ROC = 0.849772
AUC of PRC = 0.498672
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[243   8]
 [ 17  17]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13440099358558655
difference in average predicted and observed risk = 0.015102993585586547
number samples = 285
accuracy = 0.912281
precision class 0 = 0.934615
precision class 1 = 0.68
recall class 0 = 0.968127
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.031873
positive prediction rate = 0.087719
AUC of ROC = 0.90157
AUC of PRC = 0.672615
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09266000241041183
difference in average predicted and observed risk = 0.0029160024104118304
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.806841
AUC of PRC = 0.407969
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19882899522781372
difference in average predicted and observed risk = 0.04498299522781371
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1494   35]
 [ 165   79]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12456800043582916
difference in average predicted and observed risk = -0.01305199956417083
number samples = 1773
accuracy = 0.887197
precision class 0 = 0.900542
precision class 1 = 0.692982
recall class 0 = 0.977109
recall class 1 = 0.32377
false negative rate = 0.67623
false positive rate = 0.022891
positive prediction rate = 0.064298
AUC of ROC = 0.857997
AUC of PRC = 0.561192
min(+P, Se) = 0.512295

-------------------------------

confusion matrix:
[[1234   23]
 [ 135   57]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12760299444198608
difference in average predicted and observed risk = -0.004902005558013928
number samples = 1449
accuracy = 0.890959
precision class 0 = 0.901388
precision class 1 = 0.7125
recall class 0 = 0.981702
recall class 1 = 0.296875
false negative rate = 0.703125
false positive rate = 0.018298
positive prediction rate = 0.05521
AUC of ROC = 0.859238
AUC of PRC = 0.573784
min(+P, Se) = 0.53125

-------------------------------

confusion matrix:
[[1942   36]
 [ 220   91]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12341299653053284
difference in average predicted and observed risk = -0.01245400346946715
number samples = 2289
accuracy = 0.888161
precision class 0 = 0.898242
precision class 1 = 0.716535
recall class 0 = 0.9818
recall class 1 = 0.292605
false negative rate = 0.707395
false positive rate = 0.0182
positive prediction rate = 0.055483
AUC of ROC = 0.855357
AUC of PRC = 0.559228
min(+P, Se) = 0.512658

-------------------------------

confusion matrix:
[[358  10]
 [ 54  27]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14359399676322937
difference in average predicted and observed risk = -0.036807003236770636
number samples = 449
accuracy = 0.857461
precision class 0 = 0.868932
precision class 1 = 0.72973
recall class 0 = 0.972826
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.027174
positive prediction rate = 0.082405
AUC of ROC = 0.858863
AUC of PRC = 0.630274
min(+P, Se) = 0.547619

-------------------------------

confusion matrix:
[[272   6]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11641799658536911
difference in average predicted and observed risk = 0.019014996585369107
number samples = 308
accuracy = 0.918831
precision class 0 = 0.934708
precision class 1 = 0.647059
recall class 0 = 0.978417
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.021583
positive prediction rate = 0.055195
AUC of ROC = 0.867386
AUC of PRC = 0.556999
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.1135609969496727
difference in average predicted and observed risk = 0.04139599694967269
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.887302
AUC of PRC = 0.283504
min(+P, Se) = 0.357143

-------------------------------

confusion matrix:
[[69  3]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15084800124168396
difference in average predicted and observed risk = 0.062240001241683954
number samples = 79
accuracy = 0.936709
precision class 0 = 0.971831
precision class 1 = 0.625
recall class 0 = 0.958333
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.041667
positive prediction rate = 0.101266
AUC of ROC = 0.892857
AUC of PRC = 0.787356
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2728   58]
 [ 300  136]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12593300640583038
difference in average predicted and observed risk = -0.009386993594169613
number samples = 3222
accuracy = 0.888889
precision class 0 = 0.900925
precision class 1 = 0.701031
recall class 0 = 0.979182
recall class 1 = 0.311927
false negative rate = 0.688073
false positive rate = 0.020818
positive prediction rate = 0.060211
AUC of ROC = 0.857886
AUC of PRC = 0.565589
min(+P, Se) = 0.520642

-------------------------------

Epoch 00068: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch68.state
Epoch 69/100
 - 814s - loss: 0.2614 - val_loss: 0.2826

==>predicting on train



confusion matrix:
[[6959   77]
 [ 841  471]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.14891399443149567
difference in average predicted and observed risk = -0.00824900556850433
number samples = 8348
accuracy = 0.890034
precision class 0 = 0.892179
precision class 1 = 0.859489
recall class 0 = 0.989056
recall class 1 = 0.358994
false negative rate = 0.641006
false positive rate = 0.010944
positive prediction rate = 0.065644
AUC of ROC = 0.905653
AUC of PRC = 0.703344
min(+P, Se) = 0.624622

-------------------------------

confusion matrix:
[[3954   48]
 [ 249  222]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.12058600038290024
difference in average predicted and observed risk = 0.015288000382900235
number samples = 4473
accuracy = 0.933602
precision class 0 = 0.940757
precision class 1 = 0.822222
recall class 0 = 0.988006
recall class 1 = 0.471338
false negative rate = 0.528662
false positive rate = 0.011994
positive prediction rate = 0.060362
AUC of ROC = 0.932418
AUC of PRC = 0.725376
min(+P, Se) = 0.648305

-------------------------------

confusion matrix:
[[1178   17]
 [  76   67]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.12940199673175812
difference in average predicted and observed risk = 0.02252599673175812
number samples = 1338
accuracy = 0.930493
precision class 0 = 0.939394
precision class 1 = 0.797619
recall class 0 = 0.985774
recall class 1 = 0.468531
false negative rate = 0.531469
false positive rate = 0.014226
positive prediction rate = 0.06278
AUC of ROC = 0.931954
AUC of PRC = 0.718953
min(+P, Se) = 0.671329

-------------------------------

confusion matrix:
[[347   3]
 [ 19  20]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.11810699850320816
difference in average predicted and observed risk = 0.01784999850320816
number samples = 389
accuracy = 0.943445
precision class 0 = 0.948087
precision class 1 = 0.869565
recall class 0 = 0.991429
recall class 1 = 0.512821
false negative rate = 0.487179
false positive rate = 0.008571
positive prediction rate = 0.059126
AUC of ROC = 0.938535
AUC of PRC = 0.742251
min(+P, Se) = 0.7

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.18271200358867645
difference in average predicted and observed risk = 0.017298003588676447
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.96724
AUC of PRC = 0.899601
min(+P, Se) = 0.863636

-------------------------------

confusion matrix:
[[6907   79]
 [ 637  436]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.13202700018882751
difference in average predicted and observed risk = -0.0011159998111724967
number samples = 8059
accuracy = 0.911155
precision class 0 = 0.915562
precision class 1 = 0.846602
recall class 0 = 0.988692
recall class 1 = 0.406337
false negative rate = 0.593663
false positive rate = 0.011308
positive prediction rate = 0.063904
AUC of ROC = 0.922869
AUC of PRC = 0.722115
min(+P, Se) = 0.642125

-------------------------------

confusion matrix:
[[5640   68]
 [ 555  359]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.14525599777698517
difference in average predicted and observed risk = 0.00723099777698516
number samples = 6622
accuracy = 0.90592
precision class 0 = 0.910412
precision class 1 = 0.840749
recall class 0 = 0.988087
recall class 1 = 0.392779
false negative rate = 0.607221
false positive rate = 0.011913
positive prediction rate = 0.064482
AUC of ROC = 0.912054
AUC of PRC = 0.697295
min(+P, Se) = 0.615974

-------------------------------

confusion matrix:
[[8954   92]
 [ 854  509]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.13437600433826447
difference in average predicted and observed risk = 0.0034320043382644605
number samples = 10409
accuracy = 0.909117
precision class 0 = 0.912928
precision class 1 = 0.846922
recall class 0 = 0.98983
recall class 1 = 0.373441
false negative rate = 0.626559
false positive rate = 0.01017
positive prediction rate = 0.057738
AUC of ROC = 0.917043
AUC of PRC = 0.698617
min(+P, Se) = 0.614087

-------------------------------

confusion matrix:
[[1614   27]
 [ 225  182]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1620350033044815
difference in average predicted and observed risk = -0.036694996695518484
number samples = 2048
accuracy = 0.876953
precision class 0 = 0.877651
precision class 1 = 0.870813
recall class 0 = 0.983547
recall class 1 = 0.447174
false negative rate = 0.552826
false positive rate = 0.016453
positive prediction rate = 0.102051
AUC of ROC = 0.926904
AUC of PRC = 0.786845
min(+P, Se) = 0.697789

-------------------------------

confusion matrix:
[[1268   14]
 [  67   59]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.12862899899482727
difference in average predicted and observed risk = 0.03913999899482727
number samples = 1408
accuracy = 0.942472
precision class 0 = 0.949813
precision class 1 = 0.808219
recall class 0 = 0.98908
recall class 1 = 0.468254
false negative rate = 0.531746
false positive rate = 0.01092
positive prediction rate = 0.051847
AUC of ROC = 0.919372
AUC of PRC = 0.681184
min(+P, Se) = 0.640625

-------------------------------

confusion matrix:
[[287   9]
 [ 28  24]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.16317600011825562
difference in average predicted and observed risk = 0.013751000118255613
number samples = 348
accuracy = 0.893678
precision class 0 = 0.911111
precision class 1 = 0.727273
recall class 0 = 0.969595
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.030405
positive prediction rate = 0.094828
AUC of ROC = 0.903521
AUC of PRC = 0.700741
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[424   5]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.12272299826145172
difference in average predicted and observed risk = 0.03938999826145172
number samples = 468
accuracy = 0.950855
precision class 0 = 0.959276
precision class 1 = 0.807692
recall class 0 = 0.988345
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.011655
positive prediction rate = 0.055556
AUC of ROC = 0.897795
AUC of PRC = 0.662185
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12547   147]
 [ 1192   795]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.13799400627613068
difference in average predicted and observed risk = 0.002649006276130683
number samples = 14681
accuracy = 0.908794
precision class 0 = 0.91324
precision class 1 = 0.843949
recall class 0 = 0.98842
recall class 1 = 0.400101
false negative rate = 0.599899
false positive rate = 0.01158
positive prediction rate = 0.064165
AUC of ROC = 0.917977
AUC of PRC = 0.710843
min(+P, Se) = 0.631605

-------------------------------

==>predicting on validation



confusion matrix:
[[1504   31]
 [ 190   88]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.150735005736351
difference in average predicted and observed risk = -0.002601994263648988
number samples = 1813
accuracy = 0.878103
precision class 0 = 0.887839
precision class 1 = 0.739496
recall class 0 = 0.979805
recall class 1 = 0.316547
false negative rate = 0.683453
false positive rate = 0.020195
positive prediction rate = 0.065637
AUC of ROC = 0.843583
AUC of PRC = 0.568462
min(+P, Se) = 0.510791

-------------------------------

confusion matrix:
[[887  20]
 [ 81  32]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.12200699746608734
difference in average predicted and observed risk = 0.011222997466087348
number samples = 1020
accuracy = 0.90098
precision class 0 = 0.916322
precision class 1 = 0.615385
recall class 0 = 0.977949
recall class 1 = 0.283186
false negative rate = 0.716814
false positive rate = 0.022051
positive prediction rate = 0.05098
AUC of ROC = 0.858251
AUC of PRC = 0.518927
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[244   7]
 [ 18  16]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1497350037097931
difference in average predicted and observed risk = 0.03043700370979309
number samples = 285
accuracy = 0.912281
precision class 0 = 0.931298
precision class 1 = 0.695652
recall class 0 = 0.972112
recall class 1 = 0.470588
false negative rate = 0.529412
false positive rate = 0.027888
positive prediction rate = 0.080702
AUC of ROC = 0.895243
AUC of PRC = 0.66753
min(+P, Se) = 0.611111

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10351599752902985
difference in average predicted and observed risk = 0.013771997529029842
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.828974
AUC of PRC = 0.421576
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.21574600040912628
difference in average predicted and observed risk = 0.06190000040912627
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1491   38]
 [ 163   81]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.14014899730682373
difference in average predicted and observed risk = 0.002528997306823738
number samples = 1773
accuracy = 0.886633
precision class 0 = 0.901451
precision class 1 = 0.680672
recall class 0 = 0.975147
recall class 1 = 0.331967
false negative rate = 0.668033
false positive rate = 0.024853
positive prediction rate = 0.067118
AUC of ROC = 0.854759
AUC of PRC = 0.5603
min(+P, Se) = 0.514286

-------------------------------

confusion matrix:
[[1234   23]
 [ 132   60]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.14189299941062927
difference in average predicted and observed risk = 0.00938799941062926
number samples = 1449
accuracy = 0.89303
precision class 0 = 0.903368
precision class 1 = 0.722892
recall class 0 = 0.981702
recall class 1 = 0.3125
false negative rate = 0.6875
false positive rate = 0.018298
positive prediction rate = 0.057281
AUC of ROC = 0.855671
AUC of PRC = 0.566462
min(+P, Se) = 0.526042

-------------------------------

confusion matrix:
[[1939   39]
 [ 215   96]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1391109973192215
difference in average predicted and observed risk = 0.003243997319221509
number samples = 2289
accuracy = 0.889035
precision class 0 = 0.900186
precision class 1 = 0.711111
recall class 0 = 0.980283
recall class 1 = 0.308682
false negative rate = 0.691318
false positive rate = 0.019717
positive prediction rate = 0.058978
AUC of ROC = 0.85116
AUC of PRC = 0.554955
min(+P, Se) = 0.514469

-------------------------------

confusion matrix:
[[357  11]
 [ 55  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.15551699697971344
difference in average predicted and observed risk = -0.024884003020286566
number samples = 449
accuracy = 0.853007
precision class 0 = 0.866505
precision class 1 = 0.702703
recall class 0 = 0.970109
recall class 1 = 0.320988
false negative rate = 0.679012
false positive rate = 0.029891
positive prediction rate = 0.082405
AUC of ROC = 0.857152
AUC of PRC = 0.623645
min(+P, Se) = 0.54878

-------------------------------

confusion matrix:
[[273   5]
 [ 18  12]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.13158899545669556
difference in average predicted and observed risk = 0.03418599545669555
number samples = 308
accuracy = 0.925325
precision class 0 = 0.938144
precision class 1 = 0.705882
recall class 0 = 0.982014
recall class 1 = 0.4
false negative rate = 0.6
false positive rate = 0.017986
positive prediction rate = 0.055195
AUC of ROC = 0.872782
AUC of PRC = 0.55249
min(+P, Se) = 0.548387

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.12866899371147156
difference in average predicted and observed risk = 0.05650399371147155
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.884127
AUC of PRC = 0.460812
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[70  2]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.16235199570655823
difference in average predicted and observed risk = 0.07374399570655822
number samples = 79
accuracy = 0.949367
precision class 0 = 0.972222
precision class 1 = 0.714286
recall class 0 = 0.972222
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.027778
positive prediction rate = 0.088608
AUC of ROC = 0.904762
AUC of PRC = 0.74
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2725   61]
 [ 295  141]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.14093400537967682
difference in average predicted and observed risk = 0.005614005379676823
number samples = 3222
accuracy = 0.88951
precision class 0 = 0.902318
precision class 1 = 0.69802
recall class 0 = 0.978105
recall class 1 = 0.323395
false negative rate = 0.676606
false positive rate = 0.021895
positive prediction rate = 0.062694
AUC of ROC = 0.854748
AUC of PRC = 0.563031
min(+P, Se) = 0.520642

-------------------------------

Epoch 00069: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch69.state
Epoch 70/100
 - 817s - loss: 0.2649 - val_loss: 0.2844

==>predicting on train



confusion matrix:
[[6959   77]
 [ 851  461]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12751799821853638
difference in average predicted and observed risk = -0.02964500178146362
number samples = 8348
accuracy = 0.888836
precision class 0 = 0.891037
precision class 1 = 0.856877
recall class 0 = 0.989056
recall class 1 = 0.351372
false negative rate = 0.648628
false positive rate = 0.010944
positive prediction rate = 0.064447
AUC of ROC = 0.903164
AUC of PRC = 0.702103
min(+P, Se) = 0.628049

-------------------------------

confusion matrix:
[[3956   46]
 [ 253  218]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10404500365257263
difference in average predicted and observed risk = -0.0012529963474273709
number samples = 4473
accuracy = 0.933154
precision class 0 = 0.939891
precision class 1 = 0.825758
recall class 0 = 0.988506
recall class 1 = 0.462845
false negative rate = 0.537155
false positive rate = 0.011494
positive prediction rate = 0.059021
AUC of ROC = 0.928912
AUC of PRC = 0.715983
min(+P, Se) = 0.613588

-------------------------------

confusion matrix:
[[1181   14]
 [  80   63]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.1119770035147667
difference in average predicted and observed risk = 0.005101003514766694
number samples = 1338
accuracy = 0.929746
precision class 0 = 0.936558
precision class 1 = 0.818182
recall class 0 = 0.988285
recall class 1 = 0.440559
false negative rate = 0.559441
false positive rate = 0.011715
positive prediction rate = 0.057549
AUC of ROC = 0.932838
AUC of PRC = 0.713489
min(+P, Se) = 0.65035

-------------------------------

confusion matrix:
[[347   3]
 [ 20  19]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10032200068235397
difference in average predicted and observed risk = 6.500068235397449e-05
number samples = 389
accuracy = 0.940874
precision class 0 = 0.945504
precision class 1 = 0.863636
recall class 0 = 0.991429
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.008571
positive prediction rate = 0.056555
AUC of ROC = 0.932454
AUC of PRC = 0.73018
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[109   2]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16416700184345245
difference in average predicted and observed risk = -0.0012469981565475519
number samples = 133
accuracy = 0.924812
precision class 0 = 0.931624
precision class 1 = 0.875
recall class 0 = 0.981982
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.018018
positive prediction rate = 0.120301
AUC of ROC = 0.959459
AUC of PRC = 0.884172
min(+P, Se) = 0.826087

-------------------------------

confusion matrix:
[[6913   73]
 [ 648  425]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11413700133562088
difference in average predicted and observed risk = -0.01900599866437913
number samples = 8059
accuracy = 0.910535
precision class 0 = 0.914297
precision class 1 = 0.853414
recall class 0 = 0.989551
recall class 1 = 0.396086
false negative rate = 0.603914
false positive rate = 0.010449
positive prediction rate = 0.061794
AUC of ROC = 0.921062
AUC of PRC = 0.718454
min(+P, Se) = 0.648749

-------------------------------

confusion matrix:
[[5639   69]
 [ 564  350]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12394600361585617
difference in average predicted and observed risk = -0.014078996384143838
number samples = 6622
accuracy = 0.90441
precision class 0 = 0.909076
precision class 1 = 0.835322
recall class 0 = 0.987912
recall class 1 = 0.382932
false negative rate = 0.617068
false positive rate = 0.012088
positive prediction rate = 0.063274
AUC of ROC = 0.907419
AUC of PRC = 0.691396
min(+P, Se) = 0.598468

-------------------------------

confusion matrix:
[[8959   87]
 [ 872  491]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11428199708461761
difference in average predicted and observed risk = -0.01666200291538239
number samples = 10409
accuracy = 0.907868
precision class 0 = 0.911301
precision class 1 = 0.849481
recall class 0 = 0.990382
recall class 1 = 0.360235
false negative rate = 0.639765
false positive rate = 0.009618
positive prediction rate = 0.055529
AUC of ROC = 0.913837
AUC of PRC = 0.695125
min(+P, Se) = 0.617582

-------------------------------

confusion matrix:
[[1617   24]
 [ 225  182]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14614099264144897
difference in average predicted and observed risk = -0.052589007358551015
number samples = 2048
accuracy = 0.878418
precision class 0 = 0.87785
precision class 1 = 0.883495
recall class 0 = 0.985375
recall class 1 = 0.447174
false negative rate = 0.552826
false positive rate = 0.014625
positive prediction rate = 0.100586
AUC of ROC = 0.923041
AUC of PRC = 0.778597
min(+P, Se) = 0.690418

-------------------------------

confusion matrix:
[[1266   16]
 [  68   58]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10845600068569183
difference in average predicted and observed risk = 0.018967000685691834
number samples = 1408
accuracy = 0.940341
precision class 0 = 0.949026
precision class 1 = 0.783784
recall class 0 = 0.98752
recall class 1 = 0.460317
false negative rate = 0.539683
false positive rate = 0.01248
positive prediction rate = 0.052557
AUC of ROC = 0.915676
AUC of PRC = 0.677073
min(+P, Se) = 0.626984

-------------------------------

confusion matrix:
[[285  11]
 [ 30  22]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14410300552845
difference in average predicted and observed risk = -0.00532199447154999
number samples = 348
accuracy = 0.882184
precision class 0 = 0.904762
precision class 1 = 0.666667
recall class 0 = 0.962838
recall class 1 = 0.423077
false negative rate = 0.576923
false positive rate = 0.037162
positive prediction rate = 0.094828
AUC of ROC = 0.900273
AUC of PRC = 0.67241
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[425   4]
 [ 17  22]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10445799678564072
difference in average predicted and observed risk = 0.021124996785640712
number samples = 468
accuracy = 0.955128
precision class 0 = 0.961538
precision class 1 = 0.846154
recall class 0 = 0.990676
recall class 1 = 0.564103
false negative rate = 0.435897
false positive rate = 0.009324
positive prediction rate = 0.055556
AUC of ROC = 0.910286
AUC of PRC = 0.679517
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12552   142]
 [ 1212   775]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11856099963188171
difference in average predicted and observed risk = -0.01678400036811828
number samples = 14681
accuracy = 0.907772
precision class 0 = 0.911944
precision class 1 = 0.845147
recall class 0 = 0.988814
recall class 1 = 0.390035
false negative rate = 0.609965
false positive rate = 0.011186
positive prediction rate = 0.062462
AUC of ROC = 0.915021
AUC of PRC = 0.706247
min(+P, Se) = 0.624373

-------------------------------

==>predicting on validation



confusion matrix:
[[1501   34]
 [ 191   87]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1301800012588501
difference in average predicted and observed risk = -0.023156998741149903
number samples = 1813
accuracy = 0.875896
precision class 0 = 0.887116
precision class 1 = 0.719008
recall class 0 = 0.97785
recall class 1 = 0.31295
false negative rate = 0.68705
false positive rate = 0.02215
positive prediction rate = 0.06674
AUC of ROC = 0.849837
AUC of PRC = 0.574283
min(+P, Se) = 0.519573

-------------------------------

confusion matrix:
[[889  18]
 [ 84  29]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10504800081253052
difference in average predicted and observed risk = -0.005735999187469476
number samples = 1020
accuracy = 0.9
precision class 0 = 0.913669
precision class 1 = 0.617021
recall class 0 = 0.980154
recall class 1 = 0.256637
false negative rate = 0.743363
false positive rate = 0.019846
positive prediction rate = 0.046078
AUC of ROC = 0.856114
AUC of PRC = 0.51644
min(+P, Se) = 0.486726

-------------------------------

confusion matrix:
[[244   7]
 [ 17  17]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1290069967508316
difference in average predicted and observed risk = 0.009708996750831603
number samples = 285
accuracy = 0.915789
precision class 0 = 0.934866
precision class 1 = 0.708333
recall class 0 = 0.972112
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.027888
positive prediction rate = 0.084211
AUC of ROC = 0.897
AUC of PRC = 0.662872
min(+P, Se) = 0.628571

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.0909539982676506
difference in average predicted and observed risk = 0.0012099982676506
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.806841
AUC of PRC = 0.416442
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1989700049161911
difference in average predicted and observed risk = 0.04512400491619109
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1493   36]
 [ 162   82]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.121069997549057
difference in average predicted and observed risk = -0.016550002450942985
number samples = 1773
accuracy = 0.888325
precision class 0 = 0.902115
precision class 1 = 0.694915
recall class 0 = 0.976455
recall class 1 = 0.336066
false negative rate = 0.663934
false positive rate = 0.023545
positive prediction rate = 0.066554
AUC of ROC = 0.859417
AUC of PRC = 0.570579
min(+P, Se) = 0.520492

-------------------------------

confusion matrix:
[[1231   26]
 [ 136   56]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12252900004386902
difference in average predicted and observed risk = -0.009975999956130993
number samples = 1449
accuracy = 0.888199
precision class 0 = 0.900512
precision class 1 = 0.682927
recall class 0 = 0.979316
recall class 1 = 0.291667
false negative rate = 0.708333
false positive rate = 0.020684
positive prediction rate = 0.056591
AUC of ROC = 0.85599
AUC of PRC = 0.559004
min(+P, Se) = 0.492537

-------------------------------

confusion matrix:
[[1936   42]
 [ 217   94]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11916500329971313
difference in average predicted and observed risk = -0.016701996700286853
number samples = 2289
accuracy = 0.88685
precision class 0 = 0.89921
precision class 1 = 0.691176
recall class 0 = 0.978766
recall class 1 = 0.302251
false negative rate = 0.697749
false positive rate = 0.021234
positive prediction rate = 0.059415
AUC of ROC = 0.854312
AUC of PRC = 0.559111
min(+P, Se) = 0.50625

-------------------------------

confusion matrix:
[[359   9]
 [ 53  28]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14159199595451355
difference in average predicted and observed risk = -0.038809004045486456
number samples = 449
accuracy = 0.861915
precision class 0 = 0.871359
precision class 1 = 0.756757
recall class 0 = 0.975543
recall class 1 = 0.345679
false negative rate = 0.654321
false positive rate = 0.024457
positive prediction rate = 0.082405
AUC of ROC = 0.856079
AUC of PRC = 0.630885
min(+P, Se) = 0.54878

-------------------------------

confusion matrix:
[[274   4]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10710799694061279
difference in average predicted and observed risk = 0.00970499694061279
number samples = 308
accuracy = 0.918831
precision class 0 = 0.928814
precision class 1 = 0.692308
recall class 0 = 0.985611
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.014388
positive prediction rate = 0.042208
AUC of ROC = 0.882854
AUC of PRC = 0.554059
min(+P, Se) = 0.513514

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11304900050163269
difference in average predicted and observed risk = 0.040884000501632684
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.892063
AUC of PRC = 0.409733
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[69  3]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15067000687122345
difference in average predicted and observed risk = 0.062062006871223444
number samples = 79
accuracy = 0.936709
precision class 0 = 0.971831
precision class 1 = 0.625
recall class 0 = 0.958333
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.041667
positive prediction rate = 0.101266
AUC of ROC = 0.902778
AUC of PRC = 0.72682
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2724   62]
 [ 298  138]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12172599881887436
difference in average predicted and observed risk = -0.013594001181125637
number samples = 3222
accuracy = 0.888268
precision class 0 = 0.90139
precision class 1 = 0.69
recall class 0 = 0.977746
recall class 1 = 0.316514
false negative rate = 0.683486
false positive rate = 0.022254
positive prediction rate = 0.062073
AUC of ROC = 0.857534
AUC of PRC = 0.565202
min(+P, Se) = 0.50783

-------------------------------

Epoch 00070: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch70.state
Epoch 71/100
 - 830s - loss: 0.2620 - val_loss: 0.2833

==>predicting on train



confusion matrix:
[[6933  103]
 [ 805  507]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.1450680047273636
difference in average predicted and observed risk = -0.01209499527263641
number samples = 8348
accuracy = 0.891231
precision class 0 = 0.895968
precision class 1 = 0.831148
recall class 0 = 0.985361
recall class 1 = 0.386433
false negative rate = 0.613567
false positive rate = 0.014639
positive prediction rate = 0.073071
AUC of ROC = 0.905529
AUC of PRC = 0.699427
min(+P, Se) = 0.624238

-------------------------------

confusion matrix:
[[3927   75]
 [ 231  240]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11733800172805786
difference in average predicted and observed risk = 0.012040001728057859
number samples = 4473
accuracy = 0.93159
precision class 0 = 0.944444
precision class 1 = 0.761905
recall class 0 = 0.981259
recall class 1 = 0.509554
false negative rate = 0.490446
false positive rate = 0.018741
positive prediction rate = 0.070423
AUC of ROC = 0.932963
AUC of PRC = 0.723888
min(+P, Se) = 0.641189

-------------------------------

confusion matrix:
[[1172   23]
 [  72   71]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.1272599995136261
difference in average predicted and observed risk = 0.0203839995136261
number samples = 1338
accuracy = 0.928999
precision class 0 = 0.942122
precision class 1 = 0.755319
recall class 0 = 0.980753
recall class 1 = 0.496504
false negative rate = 0.503497
false positive rate = 0.019247
positive prediction rate = 0.070254
AUC of ROC = 0.930725
AUC of PRC = 0.711057
min(+P, Se) = 0.657534

-------------------------------

confusion matrix:
[[347   3]
 [ 17  22]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.11338099837303162
difference in average predicted and observed risk = 0.013123998373031617
number samples = 389
accuracy = 0.948586
precision class 0 = 0.953297
precision class 1 = 0.88
recall class 0 = 0.991429
recall class 1 = 0.564103
false negative rate = 0.435897
false positive rate = 0.008571
positive prediction rate = 0.064267
AUC of ROC = 0.938168
AUC of PRC = 0.730913
min(+P, Se) = 0.74359

-------------------------------

confusion matrix:
[[107   4]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.17873600125312805
difference in average predicted and observed risk = 0.013322001253128046
number samples = 133
accuracy = 0.917293
precision class 0 = 0.938596
precision class 1 = 0.789474
recall class 0 = 0.963964
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.036036
positive prediction rate = 0.142857
AUC of ROC = 0.957002
AUC of PRC = 0.878146
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[6877  109]
 [ 605  468]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12871100008487701
difference in average predicted and observed risk = -0.004431999915122997
number samples = 8059
accuracy = 0.911403
precision class 0 = 0.919139
precision class 1 = 0.811092
recall class 0 = 0.984397
recall class 1 = 0.43616
false negative rate = 0.56384
false positive rate = 0.015603
positive prediction rate = 0.071597
AUC of ROC = 0.923128
AUC of PRC = 0.717948
min(+P, Se) = 0.643454

-------------------------------

confusion matrix:
[[5609   99]
 [ 527  387]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.14146000146865845
difference in average predicted and observed risk = 0.0034350014686584385
number samples = 6622
accuracy = 0.905467
precision class 0 = 0.914113
precision class 1 = 0.796296
recall class 0 = 0.982656
recall class 1 = 0.423414
false negative rate = 0.576586
false positive rate = 0.017344
positive prediction rate = 0.073392
AUC of ROC = 0.911549
AUC of PRC = 0.693676
min(+P, Se) = 0.616393

-------------------------------

confusion matrix:
[[8909  137]
 [ 818  545]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.1300780028104782
difference in average predicted and observed risk = -0.0008659971895217944
number samples = 10409
accuracy = 0.908252
precision class 0 = 0.915904
precision class 1 = 0.79912
recall class 0 = 0.984855
recall class 1 = 0.399853
false negative rate = 0.600147
false positive rate = 0.015145
positive prediction rate = 0.06552
AUC of ROC = 0.917118
AUC of PRC = 0.693881
min(+P, Se) = 0.616288

-------------------------------

confusion matrix:
[[1608   33]
 [ 208  199]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1624779999256134
difference in average predicted and observed risk = -0.03625200007438659
number samples = 2048
accuracy = 0.882324
precision class 0 = 0.885463
precision class 1 = 0.857759
recall class 0 = 0.97989
recall class 1 = 0.488943
false negative rate = 0.511056
false positive rate = 0.02011
positive prediction rate = 0.113281
AUC of ROC = 0.924808
AUC of PRC = 0.782705
min(+P, Se) = 0.692875

-------------------------------

confusion matrix:
[[1260   22]
 [  62   64]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.12495700269937515
difference in average predicted and observed risk = 0.035468002699375153
number samples = 1408
accuracy = 0.940341
precision class 0 = 0.953101
precision class 1 = 0.744186
recall class 0 = 0.982839
recall class 1 = 0.507937
false negative rate = 0.492063
false positive rate = 0.017161
positive prediction rate = 0.06108
AUC of ROC = 0.919514
AUC of PRC = 0.674499
min(+P, Se) = 0.622222

-------------------------------

confusion matrix:
[[286  10]
 [ 26  26]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.15949200093746185
difference in average predicted and observed risk = 0.01006700093746185
number samples = 348
accuracy = 0.896552
precision class 0 = 0.916667
precision class 1 = 0.722222
recall class 0 = 0.966216
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.033784
positive prediction rate = 0.103448
AUC of ROC = 0.903391
AUC of PRC = 0.69728
min(+P, Se) = 0.62963

-------------------------------

confusion matrix:
[[423   6]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11934000253677368
difference in average predicted and observed risk = 0.03600700253677368
number samples = 468
accuracy = 0.948718
precision class 0 = 0.959184
precision class 1 = 0.777778
recall class 0 = 0.986014
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.013986
positive prediction rate = 0.057692
AUC of ROC = 0.914052
AUC of PRC = 0.682943
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[12486   208]
 [ 1132   855]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.13446199893951416
difference in average predicted and observed risk = -0.0008830010604858329
number samples = 14681
accuracy = 0.908726
precision class 0 = 0.916875
precision class 1 = 0.804327
recall class 0 = 0.983614
recall class 1 = 0.430297
false negative rate = 0.569703
false positive rate = 0.016386
positive prediction rate = 0.072407
AUC of ROC = 0.917932
AUC of PRC = 0.706944
min(+P, Se) = 0.629592

-------------------------------

==>predicting on validation



confusion matrix:
[[1489   46]
 [ 181   97]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1479559987783432
difference in average predicted and observed risk = -0.0053810012216568
number samples = 1813
accuracy = 0.874793
precision class 0 = 0.891617
precision class 1 = 0.678322
recall class 0 = 0.970033
recall class 1 = 0.348921
false negative rate = 0.651079
false positive rate = 0.029967
positive prediction rate = 0.078875
AUC of ROC = 0.847084
AUC of PRC = 0.572762
min(+P, Se) = 0.510791

-------------------------------

confusion matrix:
[[884  23]
 [ 75  38]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11896900087594986
difference in average predicted and observed risk = 0.008185000875949866
number samples = 1020
accuracy = 0.903922
precision class 0 = 0.921794
precision class 1 = 0.622951
recall class 0 = 0.974642
recall class 1 = 0.336283
false negative rate = 0.663717
false positive rate = 0.025358
positive prediction rate = 0.059804
AUC of ROC = 0.861266
AUC of PRC = 0.52396
min(+P, Se) = 0.482456

-------------------------------

confusion matrix:
[[239  12]
 [ 18  16]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1478009968996048
difference in average predicted and observed risk = 0.028502996899604796
number samples = 285
accuracy = 0.894737
precision class 0 = 0.929961
precision class 1 = 0.571429
recall class 0 = 0.952191
recall class 1 = 0.470588
false negative rate = 0.529412
false positive rate = 0.047809
positive prediction rate = 0.098246
AUC of ROC = 0.887392
AUC of PRC = 0.628037
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.1035190001130104
difference in average predicted and observed risk = 0.013775000113010402
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.812877
AUC of PRC = 0.417529
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.2062309980392456
difference in average predicted and observed risk = 0.052384998039245595
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1478   51]
 [ 154   90]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.13767200708389282
difference in average predicted and observed risk = 5.200708389282993e-05
number samples = 1773
accuracy = 0.884377
precision class 0 = 0.905637
precision class 1 = 0.638298
recall class 0 = 0.966645
recall class 1 = 0.368852
false negative rate = 0.631148
false positive rate = 0.033355
positive prediction rate = 0.079526
AUC of ROC = 0.863529
AUC of PRC = 0.567605
min(+P, Se) = 0.520492

-------------------------------

confusion matrix:
[[1224   33]
 [ 126   66]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.13875800371170044
difference in average predicted and observed risk = 0.006253003711700428
number samples = 1449
accuracy = 0.890269
precision class 0 = 0.906667
precision class 1 = 0.666667
recall class 0 = 0.973747
recall class 1 = 0.34375
false negative rate = 0.65625
false positive rate = 0.026253
positive prediction rate = 0.068323
AUC of ROC = 0.850023
AUC of PRC = 0.55675
min(+P, Se) = 0.510417

-------------------------------

confusion matrix:
[[1923   55]
 [ 205  106]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.13623200356960297
difference in average predicted and observed risk = 0.00036500356960297853
number samples = 2289
accuracy = 0.886413
precision class 0 = 0.903665
precision class 1 = 0.658385
recall class 0 = 0.972194
recall class 1 = 0.340836
false negative rate = 0.659164
false positive rate = 0.027806
positive prediction rate = 0.070336
AUC of ROC = 0.853688
AUC of PRC = 0.555815
min(+P, Se) = 0.506329

-------------------------------

confusion matrix:
[[352  16]
 [ 50  31]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.15591000020503998
difference in average predicted and observed risk = -0.024490999794960028
number samples = 449
accuracy = 0.853007
precision class 0 = 0.875622
precision class 1 = 0.659574
recall class 0 = 0.956522
recall class 1 = 0.382716
false negative rate = 0.617284
false positive rate = 0.043478
positive prediction rate = 0.104677
AUC of ROC = 0.858561
AUC of PRC = 0.634283
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[272   6]
 [ 18  12]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.12331400066614151
difference in average predicted and observed risk = 0.025911000666141507
number samples = 308
accuracy = 0.922078
precision class 0 = 0.937931
precision class 1 = 0.666667
recall class 0 = 0.978417
recall class 1 = 0.4
false negative rate = 0.6
false positive rate = 0.021583
positive prediction rate = 0.058442
AUC of ROC = 0.880935
AUC of PRC = 0.541061
min(+P, Se) = 0.516129

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.12636099755764008
difference in average predicted and observed risk = 0.05419599755764007
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.9
AUC of PRC = 0.385279
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[69  3]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.16552700102329254
difference in average predicted and observed risk = 0.07691900102329254
number samples = 79
accuracy = 0.936709
precision class 0 = 0.971831
precision class 1 = 0.625
recall class 0 = 0.958333
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.041667
positive prediction rate = 0.101266
AUC of ROC = 0.916667
AUC of PRC = 0.767101
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2702   84]
 [ 280  156]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.13816000521183014
difference in average predicted and observed risk = 0.0028400052118301433
number samples = 3222
accuracy = 0.887027
precision class 0 = 0.906103
precision class 1 = 0.65
recall class 0 = 0.969849
recall class 1 = 0.357798
false negative rate = 0.642202
false positive rate = 0.030151
positive prediction rate = 0.074488
AUC of ROC = 0.857331
AUC of PRC = 0.562633
min(+P, Se) = 0.514874

-------------------------------

Epoch 00071: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch71.state
Epoch 72/100
 - 813s - loss: 0.2643 - val_loss: 0.2827

==>predicting on train



confusion matrix:
[[6979   57]
 [ 875  437]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13025100529193878
difference in average predicted and observed risk = -0.026911994708061215
number samples = 8348
accuracy = 0.888357
precision class 0 = 0.888592
precision class 1 = 0.884615
recall class 0 = 0.991899
recall class 1 = 0.333079
false negative rate = 0.666921
false positive rate = 0.008101
positive prediction rate = 0.059176
AUC of ROC = 0.906542
AUC of PRC = 0.711711
min(+P, Se) = 0.630617

-------------------------------

confusion matrix:
[[3956   46]
 [ 253  218]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10774099826812744
difference in average predicted and observed risk = 0.0024429982681274387
number samples = 4473
accuracy = 0.933154
precision class 0 = 0.939891
precision class 1 = 0.825758
recall class 0 = 0.988506
recall class 1 = 0.462845
false negative rate = 0.537155
false positive rate = 0.011494
positive prediction rate = 0.059021
AUC of ROC = 0.929449
AUC of PRC = 0.720252
min(+P, Se) = 0.629237

-------------------------------

confusion matrix:
[[1181   14]
 [  79   64]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11649499833583832
difference in average predicted and observed risk = 0.009618998335838319
number samples = 1338
accuracy = 0.930493
precision class 0 = 0.937302
precision class 1 = 0.820513
recall class 0 = 0.988285
recall class 1 = 0.447552
false negative rate = 0.552448
false positive rate = 0.011715
positive prediction rate = 0.058296
AUC of ROC = 0.931264
AUC of PRC = 0.719014
min(+P, Se) = 0.65035

-------------------------------

confusion matrix:
[[348   2]
 [ 21  18]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10250899940729141
difference in average predicted and observed risk = 0.0022519994072914135
number samples = 389
accuracy = 0.940874
precision class 0 = 0.943089
precision class 1 = 0.9
recall class 0 = 0.994286
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.005714
positive prediction rate = 0.051414
AUC of ROC = 0.926447
AUC of PRC = 0.704941
min(+P, Se) = 0.675

-------------------------------

confusion matrix:
[[109   2]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16747799515724182
difference in average predicted and observed risk = 0.002063995157241816
number samples = 133
accuracy = 0.917293
precision class 0 = 0.923729
precision class 1 = 0.866667
recall class 0 = 0.981982
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.018018
positive prediction rate = 0.112782
AUC of ROC = 0.961097
AUC of PRC = 0.879831
min(+P, Se) = 0.826087

-------------------------------

confusion matrix:
[[6919   67]
 [ 653  420]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11704400181770325
difference in average predicted and observed risk = -0.016098998182296764
number samples = 8059
accuracy = 0.910659
precision class 0 = 0.913761
precision class 1 = 0.862423
recall class 0 = 0.990409
recall class 1 = 0.391426
false negative rate = 0.608574
false positive rate = 0.009591
positive prediction rate = 0.060429
AUC of ROC = 0.921648
AUC of PRC = 0.723563
min(+P, Se) = 0.647717

-------------------------------

confusion matrix:
[[5654   54]
 [ 584  330]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12745900452136993
difference in average predicted and observed risk = -0.010565995478630075
number samples = 6622
accuracy = 0.903654
precision class 0 = 0.90638
precision class 1 = 0.859375
recall class 0 = 0.99054
recall class 1 = 0.36105
false negative rate = 0.63895
false positive rate = 0.00946
positive prediction rate = 0.057989
AUC of ROC = 0.911186
AUC of PRC = 0.700344
min(+P, Se) = 0.616393

-------------------------------

confusion matrix:
[[8974   72]
 [ 884  479]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11746899783611298
difference in average predicted and observed risk = -0.013475002163887029
number samples = 10409
accuracy = 0.908156
precision class 0 = 0.910327
precision class 1 = 0.869328
recall class 0 = 0.992041
recall class 1 = 0.351431
false negative rate = 0.648569
false positive rate = 0.007959
positive prediction rate = 0.052935
AUC of ROC = 0.91577
AUC of PRC = 0.701578
min(+P, Se) = 0.623624

-------------------------------

confusion matrix:
[[1618   23]
 [ 235  172]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14834100008010864
difference in average predicted and observed risk = -0.05038899991989135
number samples = 2048
accuracy = 0.874023
precision class 0 = 0.873179
precision class 1 = 0.882051
recall class 0 = 0.985984
recall class 1 = 0.422604
false negative rate = 0.577396
false positive rate = 0.014016
positive prediction rate = 0.095215
AUC of ROC = 0.925186
AUC of PRC = 0.782597
min(+P, Se) = 0.692875

-------------------------------

confusion matrix:
[[1270   12]
 [  69   57]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11301299929618835
difference in average predicted and observed risk = 0.023523999296188355
number samples = 1408
accuracy = 0.942472
precision class 0 = 0.948469
precision class 1 = 0.826087
recall class 0 = 0.99064
recall class 1 = 0.452381
false negative rate = 0.547619
false positive rate = 0.00936
positive prediction rate = 0.049006
AUC of ROC = 0.918722
AUC of PRC = 0.689219
min(+P, Se) = 0.619048

-------------------------------

confusion matrix:
[[287   9]
 [ 29  23]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14900800585746765
difference in average predicted and observed risk = -0.0004169941425323509
number samples = 348
accuracy = 0.890805
precision class 0 = 0.908228
precision class 1 = 0.71875
recall class 0 = 0.969595
recall class 1 = 0.442308
false negative rate = 0.557692
false positive rate = 0.030405
positive prediction rate = 0.091954
AUC of ROC = 0.892477
AUC of PRC = 0.703883
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[424   5]
 [ 20  19]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.1063620001077652
difference in average predicted and observed risk = 0.023029000107765193
number samples = 468
accuracy = 0.946581
precision class 0 = 0.954955
precision class 1 = 0.791667
recall class 0 = 0.988345
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.011655
positive prediction rate = 0.051282
AUC of ROC = 0.909509
AUC of PRC = 0.673375
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[12573   121]
 [ 1237   750]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12174099683761597
difference in average predicted and observed risk = -0.013604003162384026
number samples = 14681
accuracy = 0.907499
precision class 0 = 0.910427
precision class 1 = 0.861079
recall class 0 = 0.990468
recall class 1 = 0.377453
false negative rate = 0.622547
false positive rate = 0.009532
positive prediction rate = 0.059328
AUC of ROC = 0.916911
AUC of PRC = 0.712997
min(+P, Se) = 0.633484

-------------------------------

==>predicting on validation



confusion matrix:
[[1502   33]
 [ 200   78]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13234800100326538
difference in average predicted and observed risk = -0.02098899899673462
number samples = 1813
accuracy = 0.871484
precision class 0 = 0.882491
precision class 1 = 0.702703
recall class 0 = 0.978502
recall class 1 = 0.280576
false negative rate = 0.719424
false positive rate = 0.021498
positive prediction rate = 0.061224
AUC of ROC = 0.854433
AUC of PRC = 0.580809
min(+P, Se) = 0.532374

-------------------------------

confusion matrix:
[[889  18]
 [ 85  28]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10730200260877609
difference in average predicted and observed risk = -0.003481997391223901
number samples = 1020
accuracy = 0.89902
precision class 0 = 0.912731
precision class 1 = 0.608696
recall class 0 = 0.980154
recall class 1 = 0.247788
false negative rate = 0.752212
false positive rate = 0.019846
positive prediction rate = 0.045098
AUC of ROC = 0.851489
AUC of PRC = 0.507632
min(+P, Se) = 0.478261

-------------------------------

confusion matrix:
[[246   5]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12712399661540985
difference in average predicted and observed risk = 0.00782599661540985
number samples = 285
accuracy = 0.915789
precision class 0 = 0.928302
precision class 1 = 0.75
recall class 0 = 0.98008
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.01992
positive prediction rate = 0.070175
AUC of ROC = 0.883173
AUC of PRC = 0.654109
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09318999946117401
difference in average predicted and observed risk = 0.003445999461174007
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.770624
AUC of PRC = 0.420782
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18448400497436523
difference in average predicted and observed risk = 0.030638004974365224
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1494   35]
 [ 175   69]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12216400355100632
difference in average predicted and observed risk = -0.015455996448993675
number samples = 1773
accuracy = 0.881557
precision class 0 = 0.895147
precision class 1 = 0.663462
recall class 0 = 0.977109
recall class 1 = 0.282787
false negative rate = 0.717213
false positive rate = 0.022891
positive prediction rate = 0.058658
AUC of ROC = 0.856512
AUC of PRC = 0.557239
min(+P, Se) = 0.518367

-------------------------------

confusion matrix:
[[1233   24]
 [ 135   57]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12497799843549728
difference in average predicted and observed risk = -0.007527001564502728
number samples = 1449
accuracy = 0.890269
precision class 0 = 0.901316
precision class 1 = 0.703704
recall class 0 = 0.980907
recall class 1 = 0.296875
false negative rate = 0.703125
false positive rate = 0.019093
positive prediction rate = 0.055901
AUC of ROC = 0.859793
AUC of PRC = 0.574664
min(+P, Se) = 0.53125

-------------------------------

confusion matrix:
[[1938   40]
 [ 225   86]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12105699628591537
difference in average predicted and observed risk = -0.014810003714084613
number samples = 2289
accuracy = 0.884229
precision class 0 = 0.895978
precision class 1 = 0.68254
recall class 0 = 0.979778
recall class 1 = 0.276527
false negative rate = 0.723473
false positive rate = 0.020222
positive prediction rate = 0.055046
AUC of ROC = 0.857227
AUC of PRC = 0.557654
min(+P, Se) = 0.514469

-------------------------------

confusion matrix:
[[359   9]
 [ 58  23]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14039300382137299
difference in average predicted and observed risk = -0.04000799617862702
number samples = 449
accuracy = 0.85078
precision class 0 = 0.860911
precision class 1 = 0.71875
recall class 0 = 0.975543
recall class 1 = 0.283951
false negative rate = 0.716049
false positive rate = 0.024457
positive prediction rate = 0.071269
AUC of ROC = 0.853462
AUC of PRC = 0.628988
min(+P, Se) = 0.580247

-------------------------------

confusion matrix:
[[274   4]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11123400181531906
difference in average predicted and observed risk = 0.013831001815319058
number samples = 308
accuracy = 0.925325
precision class 0 = 0.935154
precision class 1 = 0.733333
recall class 0 = 0.985611
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.014388
positive prediction rate = 0.048701
AUC of ROC = 0.869305
AUC of PRC = 0.5401
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11834099888801575
difference in average predicted and observed risk = 0.04617599888801574
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.88254
AUC of PRC = 0.432688
min(+P, Se) = 0.384615

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14955399930477142
difference in average predicted and observed risk = 0.06094599930477142
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.890873
AUC of PRC = 0.748909
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2727   59]
 [ 310  126]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12342999875545502
difference in average predicted and observed risk = -0.011890001244544979
number samples = 3222
accuracy = 0.885475
precision class 0 = 0.897926
precision class 1 = 0.681081
recall class 0 = 0.978823
recall class 1 = 0.288991
false negative rate = 0.711009
false positive rate = 0.021177
positive prediction rate = 0.057418
AUC of ROC = 0.85748
AUC of PRC = 0.56456
min(+P, Se) = 0.519187

-------------------------------

Epoch 00072: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch72.state
Epoch 73/100
 - 823s - loss: 0.2611 - val_loss: 0.2843

==>predicting on train



confusion matrix:
[[6971   65]
 [ 840  472]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.1351899951696396
difference in average predicted and observed risk = -0.02197300483036041
number samples = 8348
accuracy = 0.891591
precision class 0 = 0.892459
precision class 1 = 0.878957
recall class 0 = 0.990762
recall class 1 = 0.359756
false negative rate = 0.640244
false positive rate = 0.009238
positive prediction rate = 0.064327
AUC of ROC = 0.907686
AUC of PRC = 0.712181
min(+P, Se) = 0.63214

-------------------------------

confusion matrix:
[[3959   43]
 [ 241  230]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.1105709969997406
difference in average predicted and observed risk = 0.005272996999740598
number samples = 4473
accuracy = 0.936508
precision class 0 = 0.942619
precision class 1 = 0.842491
recall class 0 = 0.989255
recall class 1 = 0.488323
false negative rate = 0.511677
false positive rate = 0.010745
positive prediction rate = 0.061033
AUC of ROC = 0.926021
AUC of PRC = 0.717838
min(+P, Se) = 0.632696

-------------------------------

confusion matrix:
[[1181   14]
 [  77   66]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.12028100341558456
difference in average predicted and observed risk = 0.013405003415584565
number samples = 1338
accuracy = 0.931988
precision class 0 = 0.938792
precision class 1 = 0.825
recall class 0 = 0.988285
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.011715
positive prediction rate = 0.059791
AUC of ROC = 0.93141
AUC of PRC = 0.726291
min(+P, Se) = 0.664384

-------------------------------

confusion matrix:
[[347   3]
 [ 18  21]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10761400312185287
difference in average predicted and observed risk = 0.007357003121852876
number samples = 389
accuracy = 0.946015
precision class 0 = 0.950685
precision class 1 = 0.875
recall class 0 = 0.991429
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.008571
positive prediction rate = 0.061697
AUC of ROC = 0.932015
AUC of PRC = 0.740657
min(+P, Se) = 0.652174

-------------------------------

confusion matrix:
[[108   3]
 [  9  13]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.17162799835205078
difference in average predicted and observed risk = 0.006213998352050776
number samples = 133
accuracy = 0.909774
precision class 0 = 0.923077
precision class 1 = 0.8125
recall class 0 = 0.972973
recall class 1 = 0.590909
false negative rate = 0.409091
false positive rate = 0.027027
positive prediction rate = 0.120301
AUC of ROC = 0.962326
AUC of PRC = 0.884205
min(+P, Se) = 0.826087

-------------------------------

confusion matrix:
[[6916   70]
 [ 621  452]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.121799997985363
difference in average predicted and observed risk = -0.011343002014637005
number samples = 8059
accuracy = 0.914257
precision class 0 = 0.917606
precision class 1 = 0.8659
recall class 0 = 0.98998
recall class 1 = 0.421249
false negative rate = 0.578751
false positive rate = 0.01002
positive prediction rate = 0.064772
AUC of ROC = 0.92125
AUC of PRC = 0.724568
min(+P, Se) = 0.647114

-------------------------------

confusion matrix:
[[5650   58]
 [ 564  350]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.1309559941291809
difference in average predicted and observed risk = -0.007069005870819101
number samples = 6622
accuracy = 0.906071
precision class 0 = 0.909237
precision class 1 = 0.857843
recall class 0 = 0.989839
recall class 1 = 0.382932
false negative rate = 0.617068
false positive rate = 0.010161
positive prediction rate = 0.061613
AUC of ROC = 0.910945
AUC of PRC = 0.701334
min(+P, Se) = 0.612691

-------------------------------

confusion matrix:
[[8965   81]
 [ 849  514]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.12192899733781815
difference in average predicted and observed risk = -0.009015002662181859
number samples = 10409
accuracy = 0.910654
precision class 0 = 0.913491
precision class 1 = 0.863866
recall class 0 = 0.991046
recall class 1 = 0.377109
false negative rate = 0.622891
false positive rate = 0.008954
positive prediction rate = 0.057162
AUC of ROC = 0.91514
AUC of PRC = 0.701796
min(+P, Se) = 0.620513

-------------------------------

confusion matrix:
[[1621   20]
 [ 223  184]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.15190699696540833
difference in average predicted and observed risk = -0.046823003034591665
number samples = 2048
accuracy = 0.881348
precision class 0 = 0.879067
precision class 1 = 0.901961
recall class 0 = 0.987812
recall class 1 = 0.452088
false negative rate = 0.547912
false positive rate = 0.012188
positive prediction rate = 0.099609
AUC of ROC = 0.924951
AUC of PRC = 0.786577
min(+P, Se) = 0.682464

-------------------------------

confusion matrix:
[[1270   12]
 [  69   57]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.1153310015797615
difference in average predicted and observed risk = 0.025842001579761506
number samples = 1408
accuracy = 0.942472
precision class 0 = 0.948469
precision class 1 = 0.826087
recall class 0 = 0.99064
recall class 1 = 0.452381
false negative rate = 0.547619
false positive rate = 0.00936
positive prediction rate = 0.049006
AUC of ROC = 0.92326
AUC of PRC = 0.692597
min(+P, Se) = 0.629921

-------------------------------

confusion matrix:
[[287   9]
 [ 26  26]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1547120064496994
difference in average predicted and observed risk = 0.0052870064496994
number samples = 348
accuracy = 0.899425
precision class 0 = 0.916933
precision class 1 = 0.742857
recall class 0 = 0.969595
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.030405
positive prediction rate = 0.100575
AUC of ROC = 0.893321
AUC of PRC = 0.694259
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[423   6]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11171899735927582
difference in average predicted and observed risk = 0.028385997359275814
number samples = 468
accuracy = 0.948718
precision class 0 = 0.959184
precision class 1 = 0.777778
recall class 0 = 0.986014
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.013986
positive prediction rate = 0.057692
AUC of ROC = 0.899886
AUC of PRC = 0.659603
min(+P, Se) = 0.589744

-------------------------------

confusion matrix:
[[12566   128]
 [ 1185   802]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12592999637126923
difference in average predicted and observed risk = -0.009415003628730767
number samples = 14681
accuracy = 0.910565
precision class 0 = 0.913824
precision class 1 = 0.862366
recall class 0 = 0.989917
recall class 1 = 0.403624
false negative rate = 0.596376
false positive rate = 0.010084
positive prediction rate = 0.063347
AUC of ROC = 0.916608
AUC of PRC = 0.714166
min(+P, Se) = 0.631156

-------------------------------

==>predicting on validation



confusion matrix:
[[1501   34]
 [ 194   84]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13823600113391876
difference in average predicted and observed risk = -0.015100998866081239
number samples = 1813
accuracy = 0.874242
precision class 0 = 0.885546
precision class 1 = 0.711864
recall class 0 = 0.97785
recall class 1 = 0.302158
false negative rate = 0.697842
false positive rate = 0.02215
positive prediction rate = 0.065085
AUC of ROC = 0.85103
AUC of PRC = 0.573763
min(+P, Se) = 0.521583

-------------------------------

confusion matrix:
[[890  17]
 [ 82  31]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11222600191831589
difference in average predicted and observed risk = 0.0014420019183158939
number samples = 1020
accuracy = 0.902941
precision class 0 = 0.915638
precision class 1 = 0.645833
recall class 0 = 0.981257
recall class 1 = 0.274336
false negative rate = 0.725664
false positive rate = 0.018743
positive prediction rate = 0.047059
AUC of ROC = 0.848045
AUC of PRC = 0.501349
min(+P, Se) = 0.486957

-------------------------------

confusion matrix:
[[243   8]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13284899294376373
difference in average predicted and observed risk = 0.013550992943763732
number samples = 285
accuracy = 0.905263
precision class 0 = 0.927481
precision class 1 = 0.652174
recall class 0 = 0.968127
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.031873
positive prediction rate = 0.080702
AUC of ROC = 0.896649
AUC of PRC = 0.650767
min(+P, Se) = 0.631579

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09627299755811691
difference in average predicted and observed risk = 0.0065289975581169085
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.770624
AUC of PRC = 0.420026
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1886570006608963
difference in average predicted and observed risk = 0.03481100066089629
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1495   34]
 [ 167   77]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12749400734901428
difference in average predicted and observed risk = -0.01012599265098571
number samples = 1773
accuracy = 0.886633
precision class 0 = 0.899519
precision class 1 = 0.693694
recall class 0 = 0.977763
recall class 1 = 0.315574
false negative rate = 0.684426
false positive rate = 0.022237
positive prediction rate = 0.062606
AUC of ROC = 0.857043
AUC of PRC = 0.555127
min(+P, Se) = 0.520492

-------------------------------

confusion matrix:
[[1229   28]
 [ 134   58]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.13065600395202637
difference in average predicted and observed risk = -0.0018489960479736445
number samples = 1449
accuracy = 0.888199
precision class 0 = 0.901687
precision class 1 = 0.674419
recall class 0 = 0.977725
recall class 1 = 0.302083
false negative rate = 0.697917
false positive rate = 0.022275
positive prediction rate = 0.059351
AUC of ROC = 0.853877
AUC of PRC = 0.560478
min(+P, Se) = 0.515625

-------------------------------

confusion matrix:
[[1934   44]
 [ 218   93]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12708500027656555
difference in average predicted and observed risk = -0.008781999723434436
number samples = 2289
accuracy = 0.88554
precision class 0 = 0.898699
precision class 1 = 0.678832
recall class 0 = 0.977755
recall class 1 = 0.299035
false negative rate = 0.700965
false positive rate = 0.022245
positive prediction rate = 0.059851
AUC of ROC = 0.855172
AUC of PRC = 0.546798
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[360   8]
 [ 57  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14495199918746948
difference in average predicted and observed risk = -0.03544900081253052
number samples = 449
accuracy = 0.855234
precision class 0 = 0.863309
precision class 1 = 0.75
recall class 0 = 0.978261
recall class 1 = 0.296296
false negative rate = 0.703704
false positive rate = 0.021739
positive prediction rate = 0.071269
AUC of ROC = 0.848094
AUC of PRC = 0.626079
min(+P, Se) = 0.560976

-------------------------------

confusion matrix:
[[273   5]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11510200053453445
difference in average predicted and observed risk = 0.01769900053453445
number samples = 308
accuracy = 0.922078
precision class 0 = 0.934932
precision class 1 = 0.6875
recall class 0 = 0.982014
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.017986
positive prediction rate = 0.051948
AUC of ROC = 0.871343
AUC of PRC = 0.562866
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.1186629980802536
difference in average predicted and observed risk = 0.046497998080253594
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.87619
AUC of PRC = 0.420543
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[71  1]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15728099644184113
difference in average predicted and observed risk = 0.06867299644184112
number samples = 79
accuracy = 0.962025
precision class 0 = 0.972603
precision class 1 = 0.833333
recall class 0 = 0.986111
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.013889
positive prediction rate = 0.075949
AUC of ROC = 0.896825
AUC of PRC = 0.78798
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2724   62]
 [ 301  135]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12891599535942078
difference in average predicted and observed risk = -0.0064040046405792195
number samples = 3222
accuracy = 0.887337
precision class 0 = 0.900496
precision class 1 = 0.685279
recall class 0 = 0.977746
recall class 1 = 0.309633
false negative rate = 0.690367
false positive rate = 0.022254
positive prediction rate = 0.061142
AUC of ROC = 0.855314
AUC of PRC = 0.558053
min(+P, Se) = 0.516055

-------------------------------

Epoch 00073: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch73.state
Epoch 74/100
 - 817s - loss: 0.2634 - val_loss: 0.2874

==>predicting on train



confusion matrix:
[[6990   46]
 [ 924  388]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12264300137758255
difference in average predicted and observed risk = -0.03451999862241745
number samples = 8348
accuracy = 0.883805
precision class 0 = 0.883245
precision class 1 = 0.894009
recall class 0 = 0.993462
recall class 1 = 0.295732
false negative rate = 0.704268
false positive rate = 0.006538
positive prediction rate = 0.051989
AUC of ROC = 0.907086
AUC of PRC = 0.710637
min(+P, Se) = 0.633384

-------------------------------

confusion matrix:
[[3974   28]
 [ 269  202]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10125000029802322
difference in average predicted and observed risk = -0.004047999701976779
number samples = 4473
accuracy = 0.933602
precision class 0 = 0.936601
precision class 1 = 0.878261
recall class 0 = 0.993003
recall class 1 = 0.428875
false negative rate = 0.571125
false positive rate = 0.006997
positive prediction rate = 0.05142
AUC of ROC = 0.931635
AUC of PRC = 0.724973
min(+P, Se) = 0.628692

-------------------------------

confusion matrix:
[[1182   13]
 [  82   61]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10765299946069717
difference in average predicted and observed risk = 0.0007769994606971753
number samples = 1338
accuracy = 0.928999
precision class 0 = 0.935127
precision class 1 = 0.824324
recall class 0 = 0.989121
recall class 1 = 0.426573
false negative rate = 0.573427
false positive rate = 0.010879
positive prediction rate = 0.055306
AUC of ROC = 0.934675
AUC of PRC = 0.722283
min(+P, Se) = 0.636364

-------------------------------

confusion matrix:
[[349   1]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09606900066137314
difference in average predicted and observed risk = -0.0041879993386268605
number samples = 389
accuracy = 0.940874
precision class 0 = 0.940701
precision class 1 = 0.944444
recall class 0 = 0.997143
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.002857
positive prediction rate = 0.046272
AUC of ROC = 0.941538
AUC of PRC = 0.73653
min(+P, Se) = 0.644444

-------------------------------

confusion matrix:
[[110   1]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.15607599914073944
difference in average predicted and observed risk = -0.009338000859260565
number samples = 133
accuracy = 0.932331
precision class 0 = 0.932203
precision class 1 = 0.933333
recall class 0 = 0.990991
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.009009
positive prediction rate = 0.112782
AUC of ROC = 0.956183
AUC of PRC = 0.869496
min(+P, Se) = 0.772727

-------------------------------

confusion matrix:
[[6940   46]
 [ 692  381]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11044500023126602
difference in average predicted and observed risk = -0.02269799976873399
number samples = 8059
accuracy = 0.908425
precision class 0 = 0.909329
precision class 1 = 0.892272
recall class 0 = 0.993415
recall class 1 = 0.355079
false negative rate = 0.644921
false positive rate = 0.006585
positive prediction rate = 0.052984
AUC of ROC = 0.922172
AUC of PRC = 0.723308
min(+P, Se) = 0.647717

-------------------------------

confusion matrix:
[[5665   43]
 [ 613  301]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11911799758672714
difference in average predicted and observed risk = -0.018907002413272866
number samples = 6622
accuracy = 0.900936
precision class 0 = 0.902357
precision class 1 = 0.875
recall class 0 = 0.992467
recall class 1 = 0.329322
false negative rate = 0.670678
false positive rate = 0.007533
positive prediction rate = 0.051948
AUC of ROC = 0.914379
AUC of PRC = 0.702639
min(+P, Se) = 0.623773

-------------------------------

confusion matrix:
[[8991   55]
 [ 930  433]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11059600114822388
difference in average predicted and observed risk = -0.020347998851776128
number samples = 10409
accuracy = 0.90537
precision class 0 = 0.906259
precision class 1 = 0.887295
recall class 0 = 0.99392
recall class 1 = 0.317682
false negative rate = 0.682318
false positive rate = 0.00608
positive prediction rate = 0.046883
AUC of ROC = 0.916529
AUC of PRC = 0.700081
min(+P, Se) = 0.623178

-------------------------------

confusion matrix:
[[1625   16]
 [ 252  155]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.13904400169849396
difference in average predicted and observed risk = -0.05968599830150603
number samples = 2048
accuracy = 0.869141
precision class 0 = 0.865743
precision class 1 = 0.906433
recall class 0 = 0.99025
recall class 1 = 0.380835
false negative rate = 0.619165
false positive rate = 0.00975
positive prediction rate = 0.083496
AUC of ROC = 0.928159
AUC of PRC = 0.790162
min(+P, Se) = 0.700246

-------------------------------

confusion matrix:
[[1272   10]
 [  72   54]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10462900251150131
difference in average predicted and observed risk = 0.015140002511501313
number samples = 1408
accuracy = 0.941761
precision class 0 = 0.946429
precision class 1 = 0.84375
recall class 0 = 0.9922
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.0078
positive prediction rate = 0.045455
AUC of ROC = 0.92144
AUC of PRC = 0.68874
min(+P, Se) = 0.619048

-------------------------------

confusion matrix:
[[291   5]
 [ 31  21]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1411290019750595
difference in average predicted and observed risk = -0.008295998024940493
number samples = 348
accuracy = 0.896552
precision class 0 = 0.903727
precision class 1 = 0.807692
recall class 0 = 0.983108
recall class 1 = 0.403846
false negative rate = 0.596154
false positive rate = 0.016892
positive prediction rate = 0.074713
AUC of ROC = 0.897739
AUC of PRC = 0.702887
min(+P, Se) = 0.634615

-------------------------------

confusion matrix:
[[426   3]
 [ 20  19]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.09934499859809875
difference in average predicted and observed risk = 0.01601199859809875
number samples = 468
accuracy = 0.950855
precision class 0 = 0.955157
precision class 1 = 0.863636
recall class 0 = 0.993007
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.006993
positive prediction rate = 0.047009
AUC of ROC = 0.911063
AUC of PRC = 0.677562
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[12605    89]
 [ 1305   682]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11435700207948685
difference in average predicted and observed risk = -0.020987997920513146
number samples = 14681
accuracy = 0.905047
precision class 0 = 0.906183
precision class 1 = 0.884565
recall class 0 = 0.992989
recall class 1 = 0.343231
false negative rate = 0.656769
false positive rate = 0.007011
positive prediction rate = 0.052517
AUC of ROC = 0.918513
AUC of PRC = 0.714076
min(+P, Se) = 0.636135

-------------------------------

==>predicting on validation



confusion matrix:
[[1511   24]
 [ 206   72]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12361399829387665
difference in average predicted and observed risk = -0.029723001706123353
number samples = 1813
accuracy = 0.873138
precision class 0 = 0.880023
precision class 1 = 0.75
recall class 0 = 0.984365
recall class 1 = 0.258993
false negative rate = 0.741007
false positive rate = 0.015635
positive prediction rate = 0.052951
AUC of ROC = 0.842697
AUC of PRC = 0.573106
min(+P, Se) = 0.519713

-------------------------------

confusion matrix:
[[894  13]
 [ 88  25]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10070300102233887
difference in average predicted and observed risk = -0.010080998977661126
number samples = 1020
accuracy = 0.90098
precision class 0 = 0.910387
precision class 1 = 0.657895
recall class 0 = 0.985667
recall class 1 = 0.221239
false negative rate = 0.778761
false positive rate = 0.014333
positive prediction rate = 0.037255
AUC of ROC = 0.85306
AUC of PRC = 0.499854
min(+P, Se) = 0.513274

-------------------------------

confusion matrix:
[[246   5]
 [ 21  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12306199967861176
difference in average predicted and observed risk = 0.003763999678611754
number samples = 285
accuracy = 0.908772
precision class 0 = 0.921348
precision class 1 = 0.722222
recall class 0 = 0.98008
recall class 1 = 0.382353
false negative rate = 0.617647
false positive rate = 0.01992
positive prediction rate = 0.063158
AUC of ROC = 0.889501
AUC of PRC = 0.658238
min(+P, Se) = 0.617647

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08465299755334854
difference in average predicted and observed risk = -0.005091002446651463
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.814889
AUC of PRC = 0.423234
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18068300187587738
difference in average predicted and observed risk = 0.02683700187587737
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1500   29]
 [ 177   67]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11515399813652039
difference in average predicted and observed risk = -0.022466001863479607
number samples = 1773
accuracy = 0.883813
precision class 0 = 0.894454
precision class 1 = 0.697917
recall class 0 = 0.981033
recall class 1 = 0.27459
false negative rate = 0.72541
false positive rate = 0.018967
positive prediction rate = 0.054146
AUC of ROC = 0.855885
AUC of PRC = 0.566134
min(+P, Se) = 0.52459

-------------------------------

confusion matrix:
[[1241   16]
 [ 145   47]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11665499955415726
difference in average predicted and observed risk = -0.015850000445842755
number samples = 1449
accuracy = 0.888889
precision class 0 = 0.895382
precision class 1 = 0.746032
recall class 0 = 0.987271
recall class 1 = 0.244792
false negative rate = 0.755208
false positive rate = 0.012729
positive prediction rate = 0.043478
AUC of ROC = 0.848378
AUC of PRC = 0.55019
min(+P, Se) = 0.512953

-------------------------------

confusion matrix:
[[1946   32]
 [ 235   76]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11371699720621109
difference in average predicted and observed risk = -0.022150002793788898
number samples = 2289
accuracy = 0.883355
precision class 0 = 0.892251
precision class 1 = 0.703704
recall class 0 = 0.983822
recall class 1 = 0.244373
false negative rate = 0.755627
false positive rate = 0.016178
positive prediction rate = 0.047182
AUC of ROC = 0.850149
AUC of PRC = 0.548564
min(+P, Se) = 0.508039

-------------------------------

confusion matrix:
[[363   5]
 [ 58  23]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13152700662612915
difference in average predicted and observed risk = -0.048873993373870855
number samples = 449
accuracy = 0.859688
precision class 0 = 0.862233
precision class 1 = 0.821429
recall class 0 = 0.986413
recall class 1 = 0.283951
false negative rate = 0.716049
false positive rate = 0.013587
positive prediction rate = 0.062361
AUC of ROC = 0.850007
AUC of PRC = 0.629851
min(+P, Se) = 0.573171

-------------------------------

confusion matrix:
[[274   4]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10354200005531311
difference in average predicted and observed risk = 0.006139000055313107
number samples = 308
accuracy = 0.918831
precision class 0 = 0.928814
precision class 1 = 0.692308
recall class 0 = 0.985611
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.014388
positive prediction rate = 0.042208
AUC of ROC = 0.872422
AUC of PRC = 0.546093
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10947299748659134
difference in average predicted and observed risk = 0.03730799748659133
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.879365
AUC of PRC = 0.410756
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1435209959745407
difference in average predicted and observed risk = 0.054912995974540704
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.89881
AUC of PRC = 0.757803
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2741   45]
 [ 322  114]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.1158289983868599
difference in average predicted and observed risk = -0.019491001613140102
number samples = 3222
accuracy = 0.886096
precision class 0 = 0.894874
precision class 1 = 0.716981
recall class 0 = 0.983848
recall class 1 = 0.261468
false negative rate = 0.738532
false positive rate = 0.016152
positive prediction rate = 0.049348
AUC of ROC = 0.852259
AUC of PRC = 0.558874
min(+P, Se) = 0.522936

-------------------------------

Epoch 00074: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch74.state
Epoch 75/100
 - 808s - loss: 0.2569 - val_loss: 0.2835

==>predicting on train



confusion matrix:
[[6935  101]
 [ 796  516]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.1476230025291443
difference in average predicted and observed risk = -0.00953999747085571
number samples = 8348
accuracy = 0.892549
precision class 0 = 0.897038
precision class 1 = 0.836305
recall class 0 = 0.985645
recall class 1 = 0.393293
false negative rate = 0.606707
false positive rate = 0.014355
positive prediction rate = 0.07391
AUC of ROC = 0.906648
AUC of PRC = 0.708576
min(+P, Se) = 0.631098

-------------------------------

confusion matrix:
[[3941   61]
 [ 232  239]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11493200063705444
difference in average predicted and observed risk = 0.00963400063705444
number samples = 4473
accuracy = 0.934496
precision class 0 = 0.944404
precision class 1 = 0.796667
recall class 0 = 0.984758
recall class 1 = 0.507431
false negative rate = 0.492569
false positive rate = 0.015242
positive prediction rate = 0.067069
AUC of ROC = 0.930456
AUC of PRC = 0.725467
min(+P, Se) = 0.637712

-------------------------------

confusion matrix:
[[1178   17]
 [  72   71]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.12245699763298035
difference in average predicted and observed risk = 0.015580997632980348
number samples = 1338
accuracy = 0.933483
precision class 0 = 0.9424
precision class 1 = 0.806818
recall class 0 = 0.985774
recall class 1 = 0.496504
false negative rate = 0.503497
false positive rate = 0.014226
positive prediction rate = 0.06577
AUC of ROC = 0.931983
AUC of PRC = 0.712222
min(+P, Se) = 0.618056

-------------------------------

confusion matrix:
[[348   2]
 [ 18  21]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10973100364208221
difference in average predicted and observed risk = 0.009474003642082215
number samples = 389
accuracy = 0.948586
precision class 0 = 0.95082
precision class 1 = 0.913043
recall class 0 = 0.994286
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.005714
positive prediction rate = 0.059126
AUC of ROC = 0.939194
AUC of PRC = 0.732901
min(+P, Se) = 0.644444

-------------------------------

confusion matrix:
[[108   3]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16964100301265717
difference in average predicted and observed risk = 0.00422700301265716
number samples = 133
accuracy = 0.917293
precision class 0 = 0.931035
precision class 1 = 0.823529
recall class 0 = 0.972973
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.027027
positive prediction rate = 0.12782
AUC of ROC = 0.955364
AUC of PRC = 0.870818
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6887   99]
 [ 592  481]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12910300493240356
difference in average predicted and observed risk = -0.004039995067596447
number samples = 8059
accuracy = 0.914257
precision class 0 = 0.920845
precision class 1 = 0.82931
recall class 0 = 0.985829
recall class 1 = 0.448276
false negative rate = 0.551724
false positive rate = 0.014171
positive prediction rate = 0.071969
AUC of ROC = 0.922856
AUC of PRC = 0.725808
min(+P, Se) = 0.641193

-------------------------------

confusion matrix:
[[5623   85]
 [ 534  380]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.14121100306510925
difference in average predicted and observed risk = 0.003186003065109244
number samples = 6622
accuracy = 0.906524
precision class 0 = 0.913269
precision class 1 = 0.817204
recall class 0 = 0.985109
recall class 1 = 0.415755
false negative rate = 0.584245
false positive rate = 0.014891
positive prediction rate = 0.07022
AUC of ROC = 0.912385
AUC of PRC = 0.699697
min(+P, Se) = 0.613115

-------------------------------

confusion matrix:
[[8922  124]
 [ 803  560]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.13103100657463074
difference in average predicted and observed risk = 8.700657463073247e-05
number samples = 10409
accuracy = 0.910942
precision class 0 = 0.917429
precision class 1 = 0.818713
recall class 0 = 0.986292
recall class 1 = 0.410858
false negative rate = 0.589142
false positive rate = 0.013708
positive prediction rate = 0.065712
AUC of ROC = 0.91541
AUC of PRC = 0.698494
min(+P, Se) = 0.61482

-------------------------------

confusion matrix:
[[1618   23]
 [ 214  193]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.16164599359035492
difference in average predicted and observed risk = -0.03708400640964507
number samples = 2048
accuracy = 0.884277
precision class 0 = 0.883188
precision class 1 = 0.893519
recall class 0 = 0.985984
recall class 1 = 0.474201
false negative rate = 0.525798
false positive rate = 0.014016
positive prediction rate = 0.105469
AUC of ROC = 0.929843
AUC of PRC = 0.798538
min(+P, Se) = 0.700246

-------------------------------

confusion matrix:
[[1262   20]
 [  64   62]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.1209769994020462
difference in average predicted and observed risk = 0.031487999402046205
number samples = 1408
accuracy = 0.940341
precision class 0 = 0.951735
precision class 1 = 0.756098
recall class 0 = 0.984399
recall class 1 = 0.492063
false negative rate = 0.507937
false positive rate = 0.015601
positive prediction rate = 0.058239
AUC of ROC = 0.920858
AUC of PRC = 0.673777
min(+P, Se) = 0.595238

-------------------------------

confusion matrix:
[[285  11]
 [ 27  25]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.15994299948215485
difference in average predicted and observed risk = 0.010517999482154844
number samples = 348
accuracy = 0.890805
precision class 0 = 0.913462
precision class 1 = 0.694444
recall class 0 = 0.962838
recall class 1 = 0.480769
false negative rate = 0.519231
false positive rate = 0.037162
positive prediction rate = 0.103448
AUC of ROC = 0.897934
AUC of PRC = 0.691813
min(+P, Se) = 0.641509

-------------------------------

confusion matrix:
[[423   6]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11666300147771835
difference in average predicted and observed risk = 0.03333000147771835
number samples = 468
accuracy = 0.948718
precision class 0 = 0.959184
precision class 1 = 0.777778
recall class 0 = 0.986014
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.013986
positive prediction rate = 0.057692
AUC of ROC = 0.913992
AUC of PRC = 0.700687
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[12510   184]
 [ 1126   861]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.13456499576568604
difference in average predicted and observed risk = -0.0007800042343139579
number samples = 14681
accuracy = 0.910769
precision class 0 = 0.917424
precision class 1 = 0.823923
recall class 0 = 0.985505
recall class 1 = 0.433317
false negative rate = 0.566683
false positive rate = 0.014495
positive prediction rate = 0.07118
AUC of ROC = 0.918065
AUC of PRC = 0.713999
min(+P, Se) = 0.629089

-------------------------------

==>predicting on validation



confusion matrix:
[[1495   40]
 [ 183   95]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.14896300435066223
difference in average predicted and observed risk = -0.00437399564933777
number samples = 1813
accuracy = 0.876999
precision class 0 = 0.890942
precision class 1 = 0.703704
recall class 0 = 0.973941
recall class 1 = 0.341727
false negative rate = 0.658273
false positive rate = 0.026059
positive prediction rate = 0.074462
AUC of ROC = 0.847292
AUC of PRC = 0.572357
min(+P, Se) = 0.523297

-------------------------------

confusion matrix:
[[885  22]
 [ 74  39]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11568199843168259
difference in average predicted and observed risk = 0.004897998431682593
number samples = 1020
accuracy = 0.905882
precision class 0 = 0.922836
precision class 1 = 0.639344
recall class 0 = 0.975744
recall class 1 = 0.345133
false negative rate = 0.654867
false positive rate = 0.024256
positive prediction rate = 0.059804
AUC of ROC = 0.855138
AUC of PRC = 0.508385
min(+P, Se) = 0.495575

-------------------------------

confusion matrix:
[[244   7]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13573500514030457
difference in average predicted and observed risk = 0.016437005140304564
number samples = 285
accuracy = 0.908772
precision class 0 = 0.927757
precision class 1 = 0.681818
recall class 0 = 0.972112
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.027888
positive prediction rate = 0.077193
AUC of ROC = 0.890673
AUC of PRC = 0.64231
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09693200141191483
difference in average predicted and observed risk = 0.007188001411914821
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.830986
AUC of PRC = 0.445137
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[20  2]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19970199465751648
difference in average predicted and observed risk = 0.04585599465751647
number samples = 26
accuracy = 0.923077
precision class 0 = 1.0
precision class 1 = 0.666667
recall class 0 = 0.909091
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.090909
positive prediction rate = 0.230769
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1488   41]
 [ 159   85]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.13375599682331085
difference in average predicted and observed risk = -0.0038640031766891403
number samples = 1773
accuracy = 0.887197
precision class 0 = 0.903461
precision class 1 = 0.674603
recall class 0 = 0.973185
recall class 1 = 0.348361
false negative rate = 0.651639
false positive rate = 0.026815
positive prediction rate = 0.071066
AUC of ROC = 0.859594
AUC of PRC = 0.565265
min(+P, Se) = 0.517928

-------------------------------

confusion matrix:
[[1225   32]
 [ 123   69]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.13965000212192535
difference in average predicted and observed risk = 0.007145002121925342
number samples = 1449
accuracy = 0.89303
precision class 0 = 0.908754
precision class 1 = 0.683168
recall class 0 = 0.974543
recall class 1 = 0.359375
false negative rate = 0.640625
false positive rate = 0.025457
positive prediction rate = 0.069703
AUC of ROC = 0.852899
AUC of PRC = 0.558954
min(+P, Se) = 0.520833

-------------------------------

confusion matrix:
[[1928   50]
 [ 204  107]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.13545000553131104
difference in average predicted and observed risk = -0.0004169944686889526
number samples = 2289
accuracy = 0.889035
precision class 0 = 0.904315
precision class 1 = 0.681529
recall class 0 = 0.974722
recall class 1 = 0.344051
false negative rate = 0.655949
false positive rate = 0.025278
positive prediction rate = 0.068589
AUC of ROC = 0.852535
AUC of PRC = 0.552031
min(+P, Se) = 0.504823

-------------------------------

confusion matrix:
[[356  12]
 [ 51  30]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.15352599322795868
difference in average predicted and observed risk = -0.026875006772041327
number samples = 449
accuracy = 0.859688
precision class 0 = 0.874693
precision class 1 = 0.714286
recall class 0 = 0.967391
recall class 1 = 0.37037
false negative rate = 0.62963
false positive rate = 0.032609
positive prediction rate = 0.093541
AUC of ROC = 0.858998
AUC of PRC = 0.642751
min(+P, Se) = 0.566265

-------------------------------

confusion matrix:
[[274   4]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11455199867486954
difference in average predicted and observed risk = 0.017148998674869534
number samples = 308
accuracy = 0.922078
precision class 0 = 0.931973
precision class 1 = 0.714286
recall class 0 = 0.985611
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.014388
positive prediction rate = 0.045455
AUC of ROC = 0.871463
AUC of PRC = 0.520654
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.12280900031328201
difference in average predicted and observed risk = 0.050644000313282006
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.887302
AUC of PRC = 0.477509
min(+P, Se) = 0.357143

-------------------------------

confusion matrix:
[[69  3]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.16871599853038788
difference in average predicted and observed risk = 0.08010799853038787
number samples = 79
accuracy = 0.936709
precision class 0 = 0.971831
precision class 1 = 0.625
recall class 0 = 0.958333
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.041667
positive prediction rate = 0.101266
AUC of ROC = 0.902778
AUC of PRC = 0.780705
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2713   73]
 [ 282  154]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.1364070028066635
difference in average predicted and observed risk = 0.0010870028066635173
number samples = 3222
accuracy = 0.88982
precision class 0 = 0.905843
precision class 1 = 0.678414
recall class 0 = 0.973798
recall class 1 = 0.353211
false negative rate = 0.646789
false positive rate = 0.026202
positive prediction rate = 0.070453
AUC of ROC = 0.856265
AUC of PRC = 0.56174
min(+P, Se) = 0.516055

-------------------------------

Epoch 00075: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch75.state
Epoch 76/100
 - 811s - loss: 0.2590 - val_loss: 0.2863

==>predicting on train



confusion matrix:
[[6974   62]
 [ 888  424]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.1255670040845871
difference in average predicted and observed risk = -0.0315959959154129
number samples = 8348
accuracy = 0.8862
precision class 0 = 0.887052
precision class 1 = 0.872428
recall class 0 = 0.991188
recall class 1 = 0.323171
false negative rate = 0.676829
false positive rate = 0.008812
positive prediction rate = 0.058218
AUC of ROC = 0.908434
AUC of PRC = 0.710418
min(+P, Se) = 0.631098

-------------------------------

confusion matrix:
[[3960   42]
 [ 258  213]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10355299711227417
difference in average predicted and observed risk = -0.0017450028877258328
number samples = 4473
accuracy = 0.932931
precision class 0 = 0.938834
precision class 1 = 0.835294
recall class 0 = 0.989505
recall class 1 = 0.452229
false negative rate = 0.547771
false positive rate = 0.010495
positive prediction rate = 0.057009
AUC of ROC = 0.929387
AUC of PRC = 0.71818
min(+P, Se) = 0.630573

-------------------------------

confusion matrix:
[[1183   12]
 [  77   66]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11153200268745422
difference in average predicted and observed risk = 0.004656002687454225
number samples = 1338
accuracy = 0.933483
precision class 0 = 0.938889
precision class 1 = 0.846154
recall class 0 = 0.989958
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.010042
positive prediction rate = 0.058296
AUC of ROC = 0.934687
AUC of PRC = 0.724464
min(+P, Se) = 0.636364

-------------------------------

confusion matrix:
[[349   1]
 [ 20  19]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09859299659729004
difference in average predicted and observed risk = -0.0016640034027099598
number samples = 389
accuracy = 0.946015
precision class 0 = 0.945799
precision class 1 = 0.95
recall class 0 = 0.997143
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.002857
positive prediction rate = 0.051414
AUC of ROC = 0.931355
AUC of PRC = 0.746143
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[108   3]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16441400349140167
difference in average predicted and observed risk = -0.0009999965085983331
number samples = 133
accuracy = 0.924812
precision class 0 = 0.93913
precision class 1 = 0.833333
recall class 0 = 0.972973
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.027027
positive prediction rate = 0.135338
AUC of ROC = 0.963145
AUC of PRC = 0.881897
min(+P, Se) = 0.782609

-------------------------------

confusion matrix:
[[6922   64]
 [ 666  407]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11336900293827057
difference in average predicted and observed risk = -0.019773997061729442
number samples = 8059
accuracy = 0.909418
precision class 0 = 0.91223
precision class 1 = 0.864119
recall class 0 = 0.990839
recall class 1 = 0.37931
false negative rate = 0.62069
false positive rate = 0.009161
positive prediction rate = 0.058444
AUC of ROC = 0.922573
AUC of PRC = 0.721804
min(+P, Se) = 0.643057

-------------------------------

confusion matrix:
[[5652   56]
 [ 584  330]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.1219019964337349
difference in average predicted and observed risk = -0.016123003566265115
number samples = 6622
accuracy = 0.903352
precision class 0 = 0.90635
precision class 1 = 0.854922
recall class 0 = 0.990189
recall class 1 = 0.36105
false negative rate = 0.63895
false positive rate = 0.009811
positive prediction rate = 0.058291
AUC of ROC = 0.913279
AUC of PRC = 0.702516
min(+P, Se) = 0.617486

-------------------------------

confusion matrix:
[[8963   83]
 [ 903  460]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11297500133514404
difference in average predicted and observed risk = -0.017968998664855962
number samples = 10409
accuracy = 0.905274
precision class 0 = 0.908474
precision class 1 = 0.847145
recall class 0 = 0.990825
recall class 1 = 0.337491
false negative rate = 0.662509
false positive rate = 0.009175
positive prediction rate = 0.052166
AUC of ROC = 0.916274
AUC of PRC = 0.697154
min(+P, Se) = 0.618768

-------------------------------

confusion matrix:
[[1622   19]
 [ 232  175]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.145564004778862
difference in average predicted and observed risk = -0.05316599522113799
number samples = 2048
accuracy = 0.877441
precision class 0 = 0.874865
precision class 1 = 0.902062
recall class 0 = 0.988422
recall class 1 = 0.429975
false negative rate = 0.570025
false positive rate = 0.011578
positive prediction rate = 0.094727
AUC of ROC = 0.928292
AUC of PRC = 0.790162
min(+P, Se) = 0.695864

-------------------------------

confusion matrix:
[[1273    9]
 [  68   58]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10551299899816513
difference in average predicted and observed risk = 0.01602399899816513
number samples = 1408
accuracy = 0.945312
precision class 0 = 0.949292
precision class 1 = 0.865672
recall class 0 = 0.99298
recall class 1 = 0.460317
false negative rate = 0.539683
false positive rate = 0.00702
positive prediction rate = 0.047585
AUC of ROC = 0.918022
AUC of PRC = 0.681425
min(+P, Se) = 0.611111

-------------------------------

confusion matrix:
[[291   5]
 [ 28  24]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14413300156593323
difference in average predicted and observed risk = -0.005291998434066775
number samples = 348
accuracy = 0.905172
precision class 0 = 0.912226
precision class 1 = 0.827586
recall class 0 = 0.983108
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.016892
positive prediction rate = 0.083333
AUC of ROC = 0.903067
AUC of PRC = 0.718789
min(+P, Se) = 0.641509

-------------------------------

confusion matrix:
[[425   4]
 [ 19  20]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10274600237607956
difference in average predicted and observed risk = 0.019413002376079555
number samples = 468
accuracy = 0.950855
precision class 0 = 0.957207
precision class 1 = 0.833333
recall class 0 = 0.990676
recall class 1 = 0.512821
false negative rate = 0.487179
false positive rate = 0.009324
positive prediction rate = 0.051282
AUC of ROC = 0.91184
AUC of PRC = 0.682765
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12574   120]
 [ 1250   737]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.1172180026769638
difference in average predicted and observed risk = -0.018126997323036187
number samples = 14681
accuracy = 0.906682
precision class 0 = 0.909578
precision class 1 = 0.859977
recall class 0 = 0.990547
recall class 1 = 0.370911
false negative rate = 0.629089
false positive rate = 0.009453
positive prediction rate = 0.058375
AUC of ROC = 0.918356
AUC of PRC = 0.712802
min(+P, Se) = 0.631102

-------------------------------

==>predicting on validation



confusion matrix:
[[1506   29]
 [ 206   72]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1265529990196228
difference in average predicted and observed risk = -0.0267840009803772
number samples = 1813
accuracy = 0.870381
precision class 0 = 0.879673
precision class 1 = 0.712871
recall class 0 = 0.981107
recall class 1 = 0.258993
false negative rate = 0.741007
false positive rate = 0.018893
positive prediction rate = 0.055709
AUC of ROC = 0.848708
AUC of PRC = 0.57241
min(+P, Se) = 0.514388

-------------------------------

confusion matrix:
[[889  18]
 [ 85  28]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10263100266456604
difference in average predicted and observed risk = -0.008152997335433954
number samples = 1020
accuracy = 0.89902
precision class 0 = 0.912731
precision class 1 = 0.608696
recall class 0 = 0.980154
recall class 1 = 0.247788
false negative rate = 0.752212
false positive rate = 0.019846
positive prediction rate = 0.045098
AUC of ROC = 0.851626
AUC of PRC = 0.497014
min(+P, Se) = 0.486726

-------------------------------

confusion matrix:
[[243   8]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12501999735832214
difference in average predicted and observed risk = 0.005721997358322142
number samples = 285
accuracy = 0.901754
precision class 0 = 0.923954
precision class 1 = 0.636364
recall class 0 = 0.968127
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.031873
positive prediction rate = 0.077193
AUC of ROC = 0.891141
AUC of PRC = 0.638098
min(+P, Se) = 0.621622

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09150800108909607
difference in average predicted and observed risk = 0.001764001089096065
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.816901
AUC of PRC = 0.423449
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.190994992852211
difference in average predicted and observed risk = 0.03714899285221099
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1496   33]
 [ 171   73]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11784200370311737
difference in average predicted and observed risk = -0.01977799629688262
number samples = 1773
accuracy = 0.884941
precision class 0 = 0.897421
precision class 1 = 0.688679
recall class 0 = 0.978417
recall class 1 = 0.29918
false negative rate = 0.70082
false positive rate = 0.021583
positive prediction rate = 0.059786
AUC of ROC = 0.857801
AUC of PRC = 0.55838
min(+P, Se) = 0.52459

-------------------------------

confusion matrix:
[[1232   25]
 [ 146   46]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11934000253677368
difference in average predicted and observed risk = -0.01316499746322633
number samples = 1449
accuracy = 0.881988
precision class 0 = 0.894049
precision class 1 = 0.647887
recall class 0 = 0.980111
recall class 1 = 0.239583
false negative rate = 0.760417
false positive rate = 0.019889
positive prediction rate = 0.048999
AUC of ROC = 0.852808
AUC of PRC = 0.548486
min(+P, Se) = 0.505208

-------------------------------

confusion matrix:
[[1937   41]
 [ 230   81]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1164809986948967
difference in average predicted and observed risk = -0.01938600130510329
number samples = 2289
accuracy = 0.881608
precision class 0 = 0.893862
precision class 1 = 0.663934
recall class 0 = 0.979272
recall class 1 = 0.26045
false negative rate = 0.73955
false positive rate = 0.020728
positive prediction rate = 0.053298
AUC of ROC = 0.851949
AUC of PRC = 0.544766
min(+P, Se) = 0.498392

-------------------------------

confusion matrix:
[[360   8]
 [ 57  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13624300062656403
difference in average predicted and observed risk = -0.04415799937343598
number samples = 449
accuracy = 0.855234
precision class 0 = 0.863309
precision class 1 = 0.75
recall class 0 = 0.978261
recall class 1 = 0.296296
false negative rate = 0.703704
false positive rate = 0.021739
positive prediction rate = 0.071269
AUC of ROC = 0.861178
AUC of PRC = 0.639943
min(+P, Se) = 0.567901

-------------------------------

confusion matrix:
[[274   4]
 [ 22   8]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10241299867630005
difference in average predicted and observed risk = 0.005009998676300045
number samples = 308
accuracy = 0.915584
precision class 0 = 0.925676
precision class 1 = 0.666667
recall class 0 = 0.985611
recall class 1 = 0.266667
false negative rate = 0.733333
false positive rate = 0.014388
positive prediction rate = 0.038961
AUC of ROC = 0.866547
AUC of PRC = 0.52316
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11142700165510178
difference in average predicted and observed risk = 0.03926200165510177
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.898413
AUC of PRC = 0.406389
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14820100367069244
difference in average predicted and observed risk = 0.05959300367069244
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.894841
AUC of PRC = 0.769953
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2728   58]
 [ 317  119]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.1185159981250763
difference in average predicted and observed risk = -0.016804001874923702
number samples = 3222
accuracy = 0.883613
precision class 0 = 0.895895
precision class 1 = 0.672316
recall class 0 = 0.979182
recall class 1 = 0.272936
false negative rate = 0.727064
false positive rate = 0.020818
positive prediction rate = 0.054935
AUC of ROC = 0.855445
AUC of PRC = 0.555618
min(+P, Se) = 0.514874

-------------------------------

Epoch 00076: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch76.state
Epoch 77/100
 - 823s - loss: 0.2586 - val_loss: 0.2869

==>predicting on train



confusion matrix:
[[6980   56]
 [ 864  448]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12745599448680878
difference in average predicted and observed risk = -0.02970700551319122
number samples = 8348
accuracy = 0.889794
precision class 0 = 0.889852
precision class 1 = 0.888889
recall class 0 = 0.992041
recall class 1 = 0.341463
false negative rate = 0.658537
false positive rate = 0.007959
positive prediction rate = 0.060374
AUC of ROC = 0.906838
AUC of PRC = 0.714235
min(+P, Se) = 0.629573

-------------------------------

confusion matrix:
[[3951   51]
 [ 244  227]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10454300045967102
difference in average predicted and observed risk = -0.0007549995403289822
number samples = 4473
accuracy = 0.934049
precision class 0 = 0.941836
precision class 1 = 0.816547
recall class 0 = 0.987256
recall class 1 = 0.481953
false negative rate = 0.518047
false positive rate = 0.012744
positive prediction rate = 0.062151
AUC of ROC = 0.93169
AUC of PRC = 0.724703
min(+P, Se) = 0.628151

-------------------------------

confusion matrix:
[[1182   13]
 [  75   68]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11133100092411041
difference in average predicted and observed risk = 0.004455000924110414
number samples = 1338
accuracy = 0.93423
precision class 0 = 0.940334
precision class 1 = 0.839506
recall class 0 = 0.989121
recall class 1 = 0.475524
false negative rate = 0.524476
false positive rate = 0.010879
positive prediction rate = 0.060538
AUC of ROC = 0.93313
AUC of PRC = 0.725207
min(+P, Se) = 0.65035

-------------------------------

confusion matrix:
[[349   1]
 [ 20  19]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09858600050210953
difference in average predicted and observed risk = -0.0016709994978904713
number samples = 389
accuracy = 0.946015
precision class 0 = 0.945799
precision class 1 = 0.95
recall class 0 = 0.997143
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.002857
positive prediction rate = 0.051414
AUC of ROC = 0.934432
AUC of PRC = 0.719224
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[108   3]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1649399995803833
difference in average predicted and observed risk = -0.0004740004196167047
number samples = 133
accuracy = 0.924812
precision class 0 = 0.93913
precision class 1 = 0.833333
recall class 0 = 0.972973
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.027027
positive prediction rate = 0.135338
AUC of ROC = 0.968878
AUC of PRC = 0.886614
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[6917   69]
 [ 637  436]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11528199911117554
difference in average predicted and observed risk = -0.017861000888824474
number samples = 8059
accuracy = 0.912396
precision class 0 = 0.915674
precision class 1 = 0.863366
recall class 0 = 0.990123
recall class 1 = 0.406337
false negative rate = 0.593663
false positive rate = 0.009877
positive prediction rate = 0.062663
AUC of ROC = 0.923354
AUC of PRC = 0.727688
min(+P, Se) = 0.646182

-------------------------------

confusion matrix:
[[5653   55]
 [ 573  341]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.1225930005311966
difference in average predicted and observed risk = -0.015431999468803415
number samples = 6622
accuracy = 0.905165
precision class 0 = 0.907967
precision class 1 = 0.861111
recall class 0 = 0.990364
recall class 1 = 0.373085
false negative rate = 0.626915
false positive rate = 0.009636
positive prediction rate = 0.059801
AUC of ROC = 0.911943
AUC of PRC = 0.703924
min(+P, Se) = 0.618162

-------------------------------

confusion matrix:
[[8963   83]
 [ 866  497]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11476200073957443
difference in average predicted and observed risk = -0.016181999260425572
number samples = 10409
accuracy = 0.908829
precision class 0 = 0.911893
precision class 1 = 0.856897
recall class 0 = 0.990825
recall class 1 = 0.364637
false negative rate = 0.635363
false positive rate = 0.009175
positive prediction rate = 0.055721
AUC of ROC = 0.916601
AUC of PRC = 0.702648
min(+P, Se) = 0.622434

-------------------------------

confusion matrix:
[[1619   22]
 [ 231  176]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14500699937343597
difference in average predicted and observed risk = -0.053723000626564016
number samples = 2048
accuracy = 0.876465
precision class 0 = 0.875135
precision class 1 = 0.888889
recall class 0 = 0.986594
recall class 1 = 0.432432
false negative rate = 0.567568
false positive rate = 0.013406
positive prediction rate = 0.09668
AUC of ROC = 0.92831
AUC of PRC = 0.790013
min(+P, Se) = 0.686275

-------------------------------

confusion matrix:
[[1274    8]
 [  68   58]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10686200112104416
difference in average predicted and observed risk = 0.01737300112104416
number samples = 1408
accuracy = 0.946023
precision class 0 = 0.949329
precision class 1 = 0.878788
recall class 0 = 0.99376
recall class 1 = 0.460317
false negative rate = 0.539683
false positive rate = 0.00624
positive prediction rate = 0.046875
AUC of ROC = 0.919935
AUC of PRC = 0.691327
min(+P, Se) = 0.619048

-------------------------------

confusion matrix:
[[290   6]
 [ 27  25]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1451909989118576
difference in average predicted and observed risk = -0.004234001088142397
number samples = 348
accuracy = 0.905172
precision class 0 = 0.914827
precision class 1 = 0.806452
recall class 0 = 0.97973
recall class 1 = 0.480769
false negative rate = 0.519231
false positive rate = 0.02027
positive prediction rate = 0.08908
AUC of ROC = 0.894815
AUC of PRC = 0.720935
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[424   5]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10330499708652496
difference in average predicted and observed risk = 0.01997199708652496
number samples = 468
accuracy = 0.950855
precision class 0 = 0.959276
precision class 1 = 0.807692
recall class 0 = 0.988345
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.011655
positive prediction rate = 0.055556
AUC of ROC = 0.910286
AUC of PRC = 0.691462
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12570   124]
 [ 1210   777]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11857999861240387
difference in average predicted and observed risk = -0.016765001387596123
number samples = 14681
accuracy = 0.909134
precision class 0 = 0.912192
precision class 1 = 0.862375
recall class 0 = 0.990232
recall class 1 = 0.391042
false negative rate = 0.608958
false positive rate = 0.009768
positive prediction rate = 0.061372
AUC of ROC = 0.918259
AUC of PRC = 0.716831
min(+P, Se) = 0.633619

-------------------------------

==>predicting on validation



confusion matrix:
[[1502   33]
 [ 199   79]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1296830028295517
difference in average predicted and observed risk = -0.023653997170448304
number samples = 1813
accuracy = 0.872035
precision class 0 = 0.88301
precision class 1 = 0.705357
recall class 0 = 0.978502
recall class 1 = 0.284173
false negative rate = 0.715827
false positive rate = 0.021498
positive prediction rate = 0.061776
AUC of ROC = 0.844654
AUC of PRC = 0.568995
min(+P, Se) = 0.52518

-------------------------------

confusion matrix:
[[886  21]
 [ 82  31]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10515099763870239
difference in average predicted and observed risk = -0.005633002361297601
number samples = 1020
accuracy = 0.89902
precision class 0 = 0.915289
precision class 1 = 0.596154
recall class 0 = 0.976847
recall class 1 = 0.274336
false negative rate = 0.725664
false positive rate = 0.023153
positive prediction rate = 0.05098
AUC of ROC = 0.853763
AUC of PRC = 0.510572
min(+P, Se) = 0.486726

-------------------------------

confusion matrix:
[[244   7]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12529100477695465
difference in average predicted and observed risk = 0.00599300477695465
number samples = 285
accuracy = 0.908772
precision class 0 = 0.927757
precision class 1 = 0.681818
recall class 0 = 0.972112
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.027888
positive prediction rate = 0.077193
AUC of ROC = 0.883525
AUC of PRC = 0.623349
min(+P, Se) = 0.628571

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08699800074100494
difference in average predicted and observed risk = -0.0027459992589950605
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.82495
AUC of PRC = 0.432758
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19523300230503082
difference in average predicted and observed risk = 0.04138700230503081
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1492   37]
 [ 165   79]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12126599997282028
difference in average predicted and observed risk = -0.01635400002717971
number samples = 1773
accuracy = 0.886069
precision class 0 = 0.900422
precision class 1 = 0.681035
recall class 0 = 0.975801
recall class 1 = 0.32377
false negative rate = 0.67623
false positive rate = 0.024199
positive prediction rate = 0.065426
AUC of ROC = 0.852706
AUC of PRC = 0.556785
min(+P, Se) = 0.530612

-------------------------------

confusion matrix:
[[1230   27]
 [ 141   51]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12072800099849701
difference in average predicted and observed risk = -0.011776999001503002
number samples = 1449
accuracy = 0.884058
precision class 0 = 0.897155
precision class 1 = 0.653846
recall class 0 = 0.97852
recall class 1 = 0.265625
false negative rate = 0.734375
false positive rate = 0.02148
positive prediction rate = 0.05383
AUC of ROC = 0.855675
AUC of PRC = 0.557535
min(+P, Se) = 0.525773

-------------------------------

confusion matrix:
[[1934   44]
 [ 223   88]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1188800036907196
difference in average predicted and observed risk = -0.016986996309280383
number samples = 2289
accuracy = 0.883355
precision class 0 = 0.896616
precision class 1 = 0.666667
recall class 0 = 0.977755
recall class 1 = 0.282958
false negative rate = 0.717042
false positive rate = 0.022245
positive prediction rate = 0.057667
AUC of ROC = 0.849351
AUC of PRC = 0.544095
min(+P, Se) = 0.5209

-------------------------------

confusion matrix:
[[357  11]
 [ 54  27]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13817299902439117
difference in average predicted and observed risk = -0.04222800097560883
number samples = 449
accuracy = 0.855234
precision class 0 = 0.868613
precision class 1 = 0.710526
recall class 0 = 0.970109
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.029891
positive prediction rate = 0.084633
AUC of ROC = 0.861614
AUC of PRC = 0.647092
min(+P, Se) = 0.585366

-------------------------------

confusion matrix:
[[274   4]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10830900073051453
difference in average predicted and observed risk = 0.010906000730514523
number samples = 308
accuracy = 0.918831
precision class 0 = 0.928814
precision class 1 = 0.692308
recall class 0 = 0.985611
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.014388
positive prediction rate = 0.042208
AUC of ROC = 0.873141
AUC of PRC = 0.557206
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11273299902677536
difference in average predicted and observed risk = 0.04056799902677535
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.895238
AUC of PRC = 0.277863
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1454239934682846
difference in average predicted and observed risk = 0.0568159934682846
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.878968
AUC of PRC = 0.760083
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2722   64]
 [ 306  130]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.1210239976644516
difference in average predicted and observed risk = -0.014296002335548397
number samples = 3222
accuracy = 0.885164
precision class 0 = 0.898943
precision class 1 = 0.670103
recall class 0 = 0.977028
recall class 1 = 0.298165
false negative rate = 0.701835
false positive rate = 0.022972
positive prediction rate = 0.060211
AUC of ROC = 0.85377
AUC of PRC = 0.557484
min(+P, Se) = 0.527523

-------------------------------

Epoch 00077: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch77.state
Epoch 78/100
 - 818s - loss: 0.2581 - val_loss: 0.2832

==>predicting on train



confusion matrix:
[[6967   69]
 [ 849  463]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.14492100477218628
difference in average predicted and observed risk = -0.012241995227813718
number samples = 8348
accuracy = 0.890034
precision class 0 = 0.891377
precision class 1 = 0.870301
recall class 0 = 0.990193
recall class 1 = 0.352896
false negative rate = 0.647104
false positive rate = 0.009807
positive prediction rate = 0.063728
AUC of ROC = 0.910639
AUC of PRC = 0.717191
min(+P, Se) = 0.63186

-------------------------------

confusion matrix:
[[3951   51]
 [ 245  226]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11744599789381027
difference in average predicted and observed risk = 0.01214799789381027
number samples = 4473
accuracy = 0.933825
precision class 0 = 0.941611
precision class 1 = 0.815884
recall class 0 = 0.987256
recall class 1 = 0.47983
false negative rate = 0.52017
false positive rate = 0.012744
positive prediction rate = 0.061927
AUC of ROC = 0.932449
AUC of PRC = 0.728256
min(+P, Se) = 0.636943

-------------------------------

confusion matrix:
[[1182   13]
 [  74   69]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.12561500072479248
difference in average predicted and observed risk = 0.01873900072479248
number samples = 1338
accuracy = 0.934978
precision class 0 = 0.941083
precision class 1 = 0.841463
recall class 0 = 0.989121
recall class 1 = 0.482517
false negative rate = 0.517483
false positive rate = 0.010879
positive prediction rate = 0.061285
AUC of ROC = 0.934137
AUC of PRC = 0.727361
min(+P, Se) = 0.657343

-------------------------------

confusion matrix:
[[347   3]
 [ 19  20]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.1160539984703064
difference in average predicted and observed risk = 0.015796998470306398
number samples = 389
accuracy = 0.943445
precision class 0 = 0.948087
precision class 1 = 0.869565
recall class 0 = 0.991429
recall class 1 = 0.512821
false negative rate = 0.487179
false positive rate = 0.008571
positive prediction rate = 0.059126
AUC of ROC = 0.940733
AUC of PRC = 0.743086
min(+P, Se) = 0.74359

-------------------------------

confusion matrix:
[[108   3]
 [  6  16]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.18124300241470337
difference in average predicted and observed risk = 0.015829002414703364
number samples = 133
accuracy = 0.932331
precision class 0 = 0.947368
precision class 1 = 0.842105
recall class 0 = 0.972973
recall class 1 = 0.727273
false negative rate = 0.272727
false positive rate = 0.027027
positive prediction rate = 0.142857
AUC of ROC = 0.965192
AUC of PRC = 0.885253
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[6914   72]
 [ 628  445]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12982599437236786
difference in average predicted and observed risk = -0.0033170056276321525
number samples = 8059
accuracy = 0.913141
precision class 0 = 0.916733
precision class 1 = 0.860735
recall class 0 = 0.989694
recall class 1 = 0.414725
false negative rate = 0.585275
false positive rate = 0.010306
positive prediction rate = 0.064152
AUC of ROC = 0.925294
AUC of PRC = 0.729601
min(+P, Se) = 0.652377

-------------------------------

confusion matrix:
[[5641   67]
 [ 565  349]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.13986599445343018
difference in average predicted and observed risk = 0.001840994453430167
number samples = 6622
accuracy = 0.904561
precision class 0 = 0.908959
precision class 1 = 0.838942
recall class 0 = 0.988262
recall class 1 = 0.381838
false negative rate = 0.618162
false positive rate = 0.011738
positive prediction rate = 0.062821
AUC of ROC = 0.915622
AUC of PRC = 0.710608
min(+P, Se) = 0.628009

-------------------------------

confusion matrix:
[[8957   89]
 [ 858  505]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.1302729994058609
difference in average predicted and observed risk = -0.000671000594139104
number samples = 10409
accuracy = 0.909021
precision class 0 = 0.912583
precision class 1 = 0.850168
recall class 0 = 0.990161
recall class 1 = 0.370506
false negative rate = 0.629494
false positive rate = 0.009839
positive prediction rate = 0.057066
AUC of ROC = 0.920488
AUC of PRC = 0.710326
min(+P, Se) = 0.634164

-------------------------------

confusion matrix:
[[1618   23]
 [ 223  184]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.16099600493907928
difference in average predicted and observed risk = -0.037733995060920705
number samples = 2048
accuracy = 0.879883
precision class 0 = 0.87887
precision class 1 = 0.888889
recall class 0 = 0.985984
recall class 1 = 0.452088
false negative rate = 0.547912
false positive rate = 0.014016
positive prediction rate = 0.101074
AUC of ROC = 0.927497
AUC of PRC = 0.787697
min(+P, Se) = 0.687961

-------------------------------

confusion matrix:
[[1269   13]
 [  68   58]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.12391600012779236
difference in average predicted and observed risk = 0.03442700012779236
number samples = 1408
accuracy = 0.942472
precision class 0 = 0.94914
precision class 1 = 0.816901
recall class 0 = 0.98986
recall class 1 = 0.460317
false negative rate = 0.539683
false positive rate = 0.01014
positive prediction rate = 0.050426
AUC of ROC = 0.922282
AUC of PRC = 0.682281
min(+P, Se) = 0.637795

-------------------------------

confusion matrix:
[[286  10]
 [ 26  26]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.16322100162506104
difference in average predicted and observed risk = 0.013796001625061033
number samples = 348
accuracy = 0.896552
precision class 0 = 0.916667
precision class 1 = 0.722222
recall class 0 = 0.966216
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.033784
positive prediction rate = 0.103448
AUC of ROC = 0.898973
AUC of PRC = 0.720081
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[425   4]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11847499758005142
difference in average predicted and observed risk = 0.03514199758005142
number samples = 468
accuracy = 0.952991
precision class 0 = 0.959368
precision class 1 = 0.84
recall class 0 = 0.990676
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.009324
positive prediction rate = 0.053419
AUC of ROC = 0.905684
AUC of PRC = 0.678206
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12555   139]
 [ 1193   794]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.13435399532318115
difference in average predicted and observed risk = -0.0009910046768188407
number samples = 14681
accuracy = 0.90927
precision class 0 = 0.913224
precision class 1 = 0.851018
recall class 0 = 0.98905
recall class 1 = 0.399597
false negative rate = 0.600403
false positive rate = 0.01095
positive prediction rate = 0.063552
AUC of ROC = 0.920914
AUC of PRC = 0.720782
min(+P, Se) = 0.642174

-------------------------------

==>predicting on validation



confusion matrix:
[[1502   33]
 [ 195   83]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.14728200435638428
difference in average predicted and observed risk = -0.006054995643615724
number samples = 1813
accuracy = 0.874242
precision class 0 = 0.885091
precision class 1 = 0.715517
recall class 0 = 0.978502
recall class 1 = 0.298561
false negative rate = 0.701439
false positive rate = 0.021498
positive prediction rate = 0.063982
AUC of ROC = 0.846338
AUC of PRC = 0.568093
min(+P, Se) = 0.514388

-------------------------------

confusion matrix:
[[886  21]
 [ 82  31]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11862099915742874
difference in average predicted and observed risk = 0.007836999157428748
number samples = 1020
accuracy = 0.89902
precision class 0 = 0.915289
precision class 1 = 0.596154
recall class 0 = 0.976847
recall class 1 = 0.274336
false negative rate = 0.725664
false positive rate = 0.023153
positive prediction rate = 0.05098
AUC of ROC = 0.857558
AUC of PRC = 0.51467
min(+P, Se) = 0.486726

-------------------------------

confusion matrix:
[[242   9]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1440970003604889
difference in average predicted and observed risk = 0.02479900036048889
number samples = 285
accuracy = 0.901754
precision class 0 = 0.927203
precision class 1 = 0.625
recall class 0 = 0.964143
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.035857
positive prediction rate = 0.084211
AUC of ROC = 0.885282
AUC of PRC = 0.597496
min(+P, Se) = 0.617647

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09995800256729126
difference in average predicted and observed risk = 0.010214002567291255
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.812877
AUC of PRC = 0.431779
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1976349949836731
difference in average predicted and observed risk = 0.043788994983673085
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1490   39]
 [ 165   79]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.13689300417900085
difference in average predicted and observed risk = -0.0007269958209991378
number samples = 1773
accuracy = 0.884941
precision class 0 = 0.900302
precision class 1 = 0.669492
recall class 0 = 0.974493
recall class 1 = 0.32377
false negative rate = 0.67623
false positive rate = 0.025507
positive prediction rate = 0.066554
AUC of ROC = 0.855011
AUC of PRC = 0.55452
min(+P, Se) = 0.510204

-------------------------------

confusion matrix:
[[1230   27]
 [ 137   55]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.13754799962043762
difference in average predicted and observed risk = 0.00504299962043761
number samples = 1449
accuracy = 0.886818
precision class 0 = 0.899781
precision class 1 = 0.670732
recall class 0 = 0.97852
recall class 1 = 0.286458
false negative rate = 0.713542
false positive rate = 0.02148
positive prediction rate = 0.056591
AUC of ROC = 0.857941
AUC of PRC = 0.558324
min(+P, Se) = 0.530612

-------------------------------

confusion matrix:
[[1933   45]
 [ 223   88]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.13495199382305145
difference in average predicted and observed risk = -0.0009150061769485351
number samples = 2289
accuracy = 0.882918
precision class 0 = 0.896568
precision class 1 = 0.661654
recall class 0 = 0.97725
recall class 1 = 0.282958
false negative rate = 0.717042
false positive rate = 0.02275
positive prediction rate = 0.058104
AUC of ROC = 0.850868
AUC of PRC = 0.544607
min(+P, Se) = 0.50641

-------------------------------

confusion matrix:
[[357  11]
 [ 51  30]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.15495599806308746
difference in average predicted and observed risk = -0.025445001936912542
number samples = 449
accuracy = 0.861915
precision class 0 = 0.875
precision class 1 = 0.731707
recall class 0 = 0.970109
recall class 1 = 0.37037
false negative rate = 0.62963
false positive rate = 0.029891
positive prediction rate = 0.091314
AUC of ROC = 0.862923
AUC of PRC = 0.653357
min(+P, Se) = 0.580247

-------------------------------

confusion matrix:
[[272   6]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.12417200207710266
difference in average predicted and observed risk = 0.026769002077102658
number samples = 308
accuracy = 0.915584
precision class 0 = 0.931507
precision class 1 = 0.625
recall class 0 = 0.978417
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.021583
positive prediction rate = 0.051948
AUC of ROC = 0.884412
AUC of PRC = 0.521902
min(+P, Se) = 0.566667

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.12783299386501312
difference in average predicted and observed risk = 0.055667993865013116
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.885714
AUC of PRC = 0.37049
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.16319499909877777
difference in average predicted and observed risk = 0.07458699909877776
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.884921
AUC of PRC = 0.747988
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2720   66]
 [ 302  134]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.13718800246715546
difference in average predicted and observed risk = 0.0018680024671554607
number samples = 3222
accuracy = 0.885785
precision class 0 = 0.900066
precision class 1 = 0.67
recall class 0 = 0.97631
recall class 1 = 0.307339
false negative rate = 0.692661
false positive rate = 0.02369
positive prediction rate = 0.062073
AUC of ROC = 0.855711
AUC of PRC = 0.556081
min(+P, Se) = 0.524027

-------------------------------

Epoch 00078: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch78.state
Epoch 79/100
 - 819s - loss: 0.2589 - val_loss: 0.2850

==>predicting on train



confusion matrix:
[[6984   52]
 [ 898  414]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12376900017261505
difference in average predicted and observed risk = -0.033393999827384946
number samples = 8348
accuracy = 0.8862
precision class 0 = 0.88607
precision class 1 = 0.888412
recall class 0 = 0.992609
recall class 1 = 0.315549
false negative rate = 0.684451
false positive rate = 0.007391
positive prediction rate = 0.055822
AUC of ROC = 0.908965
AUC of PRC = 0.714388
min(+P, Se) = 0.630137

-------------------------------

confusion matrix:
[[3966   36]
 [ 266  205]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10335200279951096
difference in average predicted and observed risk = -0.001945997200489047
number samples = 4473
accuracy = 0.932484
precision class 0 = 0.937146
precision class 1 = 0.850622
recall class 0 = 0.991005
recall class 1 = 0.435244
false negative rate = 0.564756
false positive rate = 0.008996
positive prediction rate = 0.053879
AUC of ROC = 0.929451
AUC of PRC = 0.719332
min(+P, Se) = 0.62845

-------------------------------

confusion matrix:
[[1182   13]
 [  82   61]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11027900129556656
difference in average predicted and observed risk = 0.00340300129556656
number samples = 1338
accuracy = 0.928999
precision class 0 = 0.935127
precision class 1 = 0.824324
recall class 0 = 0.989121
recall class 1 = 0.426573
false negative rate = 0.573427
false positive rate = 0.010879
positive prediction rate = 0.055306
AUC of ROC = 0.930913
AUC of PRC = 0.714584
min(+P, Se) = 0.643357

-------------------------------

confusion matrix:
[[349   1]
 [ 24  15]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.0973220020532608
difference in average predicted and observed risk = -0.0029349979467391957
number samples = 389
accuracy = 0.935733
precision class 0 = 0.935657
precision class 1 = 0.9375
recall class 0 = 0.997143
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.002857
positive prediction rate = 0.041131
AUC of ROC = 0.929011
AUC of PRC = 0.716081
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1691029965877533
difference in average predicted and observed risk = 0.0036889965877532904
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.966011
AUC of PRC = 0.90214
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6929   57]
 [ 684  389]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11202800273895264
difference in average predicted and observed risk = -0.021114997261047375
number samples = 8059
accuracy = 0.908053
precision class 0 = 0.910154
precision class 1 = 0.872197
recall class 0 = 0.991841
recall class 1 = 0.362535
false negative rate = 0.637465
false positive rate = 0.008159
positive prediction rate = 0.055342
AUC of ROC = 0.921939
AUC of PRC = 0.7232
min(+P, Se) = 0.647114

-------------------------------

confusion matrix:
[[5661   47]
 [ 593  321]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12089700251817703
difference in average predicted and observed risk = -0.017127997481822976
number samples = 6622
accuracy = 0.903352
precision class 0 = 0.905181
precision class 1 = 0.872283
recall class 0 = 0.991766
recall class 1 = 0.351204
false negative rate = 0.648796
false positive rate = 0.008234
positive prediction rate = 0.055572
AUC of ROC = 0.913789
AUC of PRC = 0.704384
min(+P, Se) = 0.621444

-------------------------------

confusion matrix:
[[8983   63]
 [ 918  445]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.1115489974617958
difference in average predicted and observed risk = -0.019395002538204198
number samples = 10409
accuracy = 0.905755
precision class 0 = 0.907282
precision class 1 = 0.875984
recall class 0 = 0.993036
recall class 1 = 0.326486
false negative rate = 0.673514
false positive rate = 0.006964
positive prediction rate = 0.048804
AUC of ROC = 0.917026
AUC of PRC = 0.70105
min(+P, Se) = 0.625825

-------------------------------

confusion matrix:
[[1620   21]
 [ 243  164]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14384299516677856
difference in average predicted and observed risk = -0.054887004833221426
number samples = 2048
accuracy = 0.871094
precision class 0 = 0.869565
precision class 1 = 0.886486
recall class 0 = 0.987203
recall class 1 = 0.402948
false negative rate = 0.597052
false positive rate = 0.012797
positive prediction rate = 0.090332
AUC of ROC = 0.925267
AUC of PRC = 0.783475
min(+P, Se) = 0.690418

-------------------------------

confusion matrix:
[[1274    8]
 [  69   57]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.1059809997677803
difference in average predicted and observed risk = 0.016491999767780305
number samples = 1408
accuracy = 0.945312
precision class 0 = 0.948622
precision class 1 = 0.876923
recall class 0 = 0.99376
recall class 1 = 0.452381
false negative rate = 0.547619
false positive rate = 0.00624
positive prediction rate = 0.046165
AUC of ROC = 0.921768
AUC of PRC = 0.696899
min(+P, Se) = 0.626984

-------------------------------

confusion matrix:
[[287   9]
 [ 29  23]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14544500410556793
difference in average predicted and observed risk = -0.00397999589443207
number samples = 348
accuracy = 0.890805
precision class 0 = 0.908228
precision class 1 = 0.71875
recall class 0 = 0.969595
recall class 1 = 0.442308
false negative rate = 0.557692
false positive rate = 0.030405
positive prediction rate = 0.091954
AUC of ROC = 0.898909
AUC of PRC = 0.718246
min(+P, Se) = 0.654545

-------------------------------

confusion matrix:
[[426   3]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10230299830436707
difference in average predicted and observed risk = 0.01896999830436706
number samples = 468
accuracy = 0.955128
precision class 0 = 0.959459
precision class 1 = 0.875
recall class 0 = 0.993007
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.006993
positive prediction rate = 0.051282
AUC of ROC = 0.907836
AUC of PRC = 0.69173
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12590   104]
 [ 1277   710]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11602900177240372
difference in average predicted and observed risk = -0.019315998227596276
number samples = 14681
accuracy = 0.905933
precision class 0 = 0.907911
precision class 1 = 0.872236
recall class 0 = 0.991807
recall class 1 = 0.357323
false negative rate = 0.642677
false positive rate = 0.008193
positive prediction rate = 0.055446
AUC of ROC = 0.918197
AUC of PRC = 0.714708
min(+P, Se) = 0.634809

-------------------------------

==>predicting on validation



confusion matrix:
[[1506   29]
 [ 203   75]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1258690059185028
difference in average predicted and observed risk = -0.027467994081497193
number samples = 1813
accuracy = 0.872035
precision class 0 = 0.881217
precision class 1 = 0.721154
recall class 0 = 0.981107
recall class 1 = 0.269784
false negative rate = 0.730216
false positive rate = 0.018893
positive prediction rate = 0.057363
AUC of ROC = 0.850999
AUC of PRC = 0.57473
min(+P, Se) = 0.519713

-------------------------------

confusion matrix:
[[893  14]
 [ 84  29]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.1040090024471283
difference in average predicted and observed risk = -0.006774997552871698
number samples = 1020
accuracy = 0.903922
precision class 0 = 0.914023
precision class 1 = 0.674419
recall class 0 = 0.984564
recall class 1 = 0.256637
false negative rate = 0.743363
false positive rate = 0.015436
positive prediction rate = 0.042157
AUC of ROC = 0.850728
AUC of PRC = 0.504813
min(+P, Se) = 0.495726

-------------------------------

confusion matrix:
[[243   8]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1274770051240921
difference in average predicted and observed risk = 0.0081790051240921
number samples = 285
accuracy = 0.905263
precision class 0 = 0.927481
precision class 1 = 0.652174
recall class 0 = 0.968127
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.031873
positive prediction rate = 0.080702
AUC of ROC = 0.898406
AUC of PRC = 0.627932
min(+P, Se) = 0.621622

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08667299896478653
difference in average predicted and observed risk = -0.003071001035213475
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.806841
AUC of PRC = 0.417184
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19577200710773468
difference in average predicted and observed risk = 0.04192600710773467
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1495   34]
 [ 170   74]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11842700093984604
difference in average predicted and observed risk = -0.019192999060153954
number samples = 1773
accuracy = 0.884941
precision class 0 = 0.897898
precision class 1 = 0.685185
recall class 0 = 0.977763
recall class 1 = 0.303279
false negative rate = 0.696721
false positive rate = 0.022237
positive prediction rate = 0.060914
AUC of ROC = 0.854703
AUC of PRC = 0.556986
min(+P, Se) = 0.506073

-------------------------------

confusion matrix:
[[1237   20]
 [ 142   50]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11904700100421906
difference in average predicted and observed risk = -0.013457998995780956
number samples = 1449
accuracy = 0.888199
precision class 0 = 0.897027
precision class 1 = 0.714286
recall class 0 = 0.984089
recall class 1 = 0.260417
false negative rate = 0.739583
false positive rate = 0.015911
positive prediction rate = 0.048309
AUC of ROC = 0.860369
AUC of PRC = 0.564559
min(+P, Se) = 0.526042

-------------------------------

confusion matrix:
[[1941   37]
 [ 226   85]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11582300066947937
difference in average predicted and observed risk = -0.020043999330520618
number samples = 2289
accuracy = 0.885103
precision class 0 = 0.895708
precision class 1 = 0.696721
recall class 0 = 0.981294
recall class 1 = 0.273312
false negative rate = 0.726688
false positive rate = 0.018706
positive prediction rate = 0.053298
AUC of ROC = 0.852246
AUC of PRC = 0.548082
min(+P, Se) = 0.507987

-------------------------------

confusion matrix:
[[359   9]
 [ 57  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13988399505615234
difference in average predicted and observed risk = -0.04051700494384766
number samples = 449
accuracy = 0.853007
precision class 0 = 0.862981
precision class 1 = 0.727273
recall class 0 = 0.975543
recall class 1 = 0.296296
false negative rate = 0.703704
false positive rate = 0.024457
positive prediction rate = 0.073497
AUC of ROC = 0.861916
AUC of PRC = 0.643168
min(+P, Se) = 0.580247

-------------------------------

confusion matrix:
[[274   4]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10353899747133255
difference in average predicted and observed risk = 0.006135997471332547
number samples = 308
accuracy = 0.918831
precision class 0 = 0.928814
precision class 1 = 0.692308
recall class 0 = 0.985611
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.014388
positive prediction rate = 0.042208
AUC of ROC = 0.886211
AUC of PRC = 0.544972
min(+P, Se) = 0.566667

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11338300257921219
difference in average predicted and observed risk = 0.04121800257921218
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.885714
AUC of PRC = 0.382827
min(+P, Se) = 0.357143

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14754199981689453
difference in average predicted and observed risk = 0.058933999816894525
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.880952
AUC of PRC = 0.747427
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2732   54]
 [ 312  124]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11870600283145905
difference in average predicted and observed risk = -0.01661399716854095
number samples = 3222
accuracy = 0.886406
precision class 0 = 0.897503
precision class 1 = 0.696629
recall class 0 = 0.980617
recall class 1 = 0.284404
false negative rate = 0.715596
false positive rate = 0.019383
positive prediction rate = 0.055245
AUC of ROC = 0.85673
AUC of PRC = 0.559694
min(+P, Se) = 0.514806

-------------------------------

Epoch 00079: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch79.state
Epoch 80/100
 - 808s - loss: 0.2582 - val_loss: 0.2879

==>predicting on train



confusion matrix:
[[6970   66]
 [ 865  447]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12114299833774567
difference in average predicted and observed risk = -0.03602000166225433
number samples = 8348
accuracy = 0.888476
precision class 0 = 0.889598
precision class 1 = 0.871345
recall class 0 = 0.99062
recall class 1 = 0.340701
false negative rate = 0.659299
false positive rate = 0.00938
positive prediction rate = 0.061452
AUC of ROC = 0.907995
AUC of PRC = 0.710022
min(+P, Se) = 0.62757

-------------------------------

confusion matrix:
[[3956   46]
 [ 252  219]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10019099712371826
difference in average predicted and observed risk = -0.005107002876281741
number samples = 4473
accuracy = 0.933378
precision class 0 = 0.940114
precision class 1 = 0.826415
recall class 0 = 0.988506
recall class 1 = 0.464968
false negative rate = 0.535032
false positive rate = 0.011494
positive prediction rate = 0.059244
AUC of ROC = 0.932006
AUC of PRC = 0.725295
min(+P, Se) = 0.636364

-------------------------------

confusion matrix:
[[1184   11]
 [  76   67]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10749399662017822
difference in average predicted and observed risk = 0.0006179966201782239
number samples = 1338
accuracy = 0.934978
precision class 0 = 0.939683
precision class 1 = 0.858974
recall class 0 = 0.990795
recall class 1 = 0.468531
false negative rate = 0.531469
false positive rate = 0.009205
positive prediction rate = 0.058296
AUC of ROC = 0.933388
AUC of PRC = 0.71823
min(+P, Se) = 0.652778

-------------------------------

confusion matrix:
[[348   2]
 [ 19  20]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09673800319433212
difference in average predicted and observed risk = -0.003518996805667876
number samples = 389
accuracy = 0.946015
precision class 0 = 0.948229
precision class 1 = 0.909091
recall class 0 = 0.994286
recall class 1 = 0.512821
false negative rate = 0.487179
false positive rate = 0.005714
positive prediction rate = 0.056555
AUC of ROC = 0.92989
AUC of PRC = 0.741056
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[109   2]
 [  6  16]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16294899582862854
difference in average predicted and observed risk = -0.0024650041713714654
number samples = 133
accuracy = 0.93985
precision class 0 = 0.947826
precision class 1 = 0.888889
recall class 0 = 0.981982
recall class 1 = 0.727273
false negative rate = 0.272727
false positive rate = 0.018018
positive prediction rate = 0.135338
AUC of ROC = 0.96724
AUC of PRC = 0.897647
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6911   75]
 [ 643  430]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1101899966597557
difference in average predicted and observed risk = -0.022953003340244305
number samples = 8059
accuracy = 0.910907
precision class 0 = 0.91488
precision class 1 = 0.851485
recall class 0 = 0.989264
recall class 1 = 0.400746
false negative rate = 0.599254
false positive rate = 0.010736
positive prediction rate = 0.062663
AUC of ROC = 0.923326
AUC of PRC = 0.72509
min(+P, Se) = 0.642125

-------------------------------

confusion matrix:
[[5656   52]
 [ 575  339]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11696799844503403
difference in average predicted and observed risk = -0.02105700155496598
number samples = 6622
accuracy = 0.905316
precision class 0 = 0.907719
precision class 1 = 0.867008
recall class 0 = 0.99089
recall class 1 = 0.370897
false negative rate = 0.629103
false positive rate = 0.00911
positive prediction rate = 0.059046
AUC of ROC = 0.913354
AUC of PRC = 0.702526
min(+P, Se) = 0.613786

-------------------------------

confusion matrix:
[[8964   82]
 [ 878  485]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10858999937772751
difference in average predicted and observed risk = -0.022354000622272496
number samples = 10409
accuracy = 0.907772
precision class 0 = 0.910791
precision class 1 = 0.855379
recall class 0 = 0.990935
recall class 1 = 0.355833
false negative rate = 0.644167
false positive rate = 0.009065
positive prediction rate = 0.054472
AUC of ROC = 0.917508
AUC of PRC = 0.701017
min(+P, Se) = 0.618489

-------------------------------

confusion matrix:
[[1620   21]
 [ 224  183]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14393199980258942
difference in average predicted and observed risk = -0.054798000197410573
number samples = 2048
accuracy = 0.880371
precision class 0 = 0.878525
precision class 1 = 0.897059
recall class 0 = 0.987203
recall class 1 = 0.449631
false negative rate = 0.550369
false positive rate = 0.012797
positive prediction rate = 0.099609
AUC of ROC = 0.928407
AUC of PRC = 0.788623
min(+P, Se) = 0.685504

-------------------------------

confusion matrix:
[[1269   13]
 [  69   57]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10263899713754654
difference in average predicted and observed risk = 0.01314999713754654
number samples = 1408
accuracy = 0.941761
precision class 0 = 0.94843
precision class 1 = 0.814286
recall class 0 = 0.98986
recall class 1 = 0.452381
false negative rate = 0.547619
false positive rate = 0.01014
positive prediction rate = 0.049716
AUC of ROC = 0.917979
AUC of PRC = 0.694494
min(+P, Se) = 0.626984

-------------------------------

confusion matrix:
[[288   8]
 [ 29  23]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.13794000446796417
difference in average predicted and observed risk = -0.01148499553203583
number samples = 348
accuracy = 0.893678
precision class 0 = 0.908517
precision class 1 = 0.741935
recall class 0 = 0.972973
recall class 1 = 0.442308
false negative rate = 0.557692
false positive rate = 0.027027
positive prediction rate = 0.08908
AUC of ROC = 0.893386
AUC of PRC = 0.706528
min(+P, Se) = 0.654545

-------------------------------

confusion matrix:
[[426   3]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.09612800180912018
difference in average predicted and observed risk = 0.012795001809120174
number samples = 468
accuracy = 0.955128
precision class 0 = 0.959459
precision class 1 = 0.875
recall class 0 = 0.993007
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.006993
positive prediction rate = 0.051282
AUC of ROC = 0.907298
AUC of PRC = 0.681064
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12567   127]
 [ 1218   769]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11324699968099594
difference in average predicted and observed risk = -0.022098000319004052
number samples = 14681
accuracy = 0.908385
precision class 0 = 0.911643
precision class 1 = 0.858259
recall class 0 = 0.989995
recall class 1 = 0.387016
false negative rate = 0.612984
false positive rate = 0.010005
positive prediction rate = 0.061031
AUC of ROC = 0.918851
AUC of PRC = 0.714906
min(+P, Se) = 0.629089

-------------------------------

==>predicting on validation



confusion matrix:
[[1497   38]
 [ 196   82]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12394999712705612
difference in average predicted and observed risk = -0.02938700287294388
number samples = 1813
accuracy = 0.870932
precision class 0 = 0.884229
precision class 1 = 0.683333
recall class 0 = 0.975244
recall class 1 = 0.294964
false negative rate = 0.705036
false positive rate = 0.024756
positive prediction rate = 0.066189
AUC of ROC = 0.850299
AUC of PRC = 0.569883
min(+P, Se) = 0.528369

-------------------------------

confusion matrix:
[[890  17]
 [ 78  35]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10192500054836273
difference in average predicted and observed risk = -0.008858999451637262
number samples = 1020
accuracy = 0.906863
precision class 0 = 0.919421
precision class 1 = 0.673077
recall class 0 = 0.981257
recall class 1 = 0.309735
false negative rate = 0.690265
false positive rate = 0.018743
positive prediction rate = 0.05098
AUC of ROC = 0.856563
AUC of PRC = 0.523812
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[243   8]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12087900191545486
difference in average predicted and observed risk = 0.0015810019154548632
number samples = 285
accuracy = 0.901754
precision class 0 = 0.923954
precision class 1 = 0.636364
recall class 0 = 0.968127
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.031873
positive prediction rate = 0.077193
AUC of ROC = 0.892665
AUC of PRC = 0.618055
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08336599916219711
difference in average predicted and observed risk = -0.006378000837802891
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.816901
AUC of PRC = 0.439782
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[20  2]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1878580003976822
difference in average predicted and observed risk = 0.03401200039768218
number samples = 26
accuracy = 0.923077
precision class 0 = 1.0
precision class 1 = 0.666667
recall class 0 = 0.909091
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.090909
positive prediction rate = 0.230769
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1488   41]
 [ 162   82]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11692500114440918
difference in average predicted and observed risk = -0.020694998855590813
number samples = 1773
accuracy = 0.885505
precision class 0 = 0.901818
precision class 1 = 0.666667
recall class 0 = 0.973185
recall class 1 = 0.336066
false negative rate = 0.663934
false positive rate = 0.026815
positive prediction rate = 0.069374
AUC of ROC = 0.85775
AUC of PRC = 0.556928
min(+P, Se) = 0.520492

-------------------------------

confusion matrix:
[[1231   26]
 [ 138   54]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11539900302886963
difference in average predicted and observed risk = -0.017105996971130383
number samples = 1449
accuracy = 0.886818
precision class 0 = 0.899197
precision class 1 = 0.675
recall class 0 = 0.979316
recall class 1 = 0.28125
false negative rate = 0.71875
false positive rate = 0.020684
positive prediction rate = 0.05521
AUC of ROC = 0.858455
AUC of PRC = 0.564496
min(+P, Se) = 0.520833

-------------------------------

confusion matrix:
[[1933   45]
 [ 218   93]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11378400027751923
difference in average predicted and observed risk = -0.02208299972248076
number samples = 2289
accuracy = 0.885103
precision class 0 = 0.898652
precision class 1 = 0.673913
recall class 0 = 0.97725
recall class 1 = 0.299035
false negative rate = 0.700965
false positive rate = 0.02275
positive prediction rate = 0.060288
AUC of ROC = 0.853321
AUC of PRC = 0.548554
min(+P, Se) = 0.506329

-------------------------------

confusion matrix:
[[358  10]
 [ 54  27]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13611599802970886
difference in average predicted and observed risk = -0.044285001970291143
number samples = 449
accuracy = 0.857461
precision class 0 = 0.868932
precision class 1 = 0.72973
recall class 0 = 0.972826
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.027174
positive prediction rate = 0.082405
AUC of ROC = 0.85997
AUC of PRC = 0.654425
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[273   5]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10197699815034866
difference in average predicted and observed risk = 0.00457399815034866
number samples = 308
accuracy = 0.918831
precision class 0 = 0.931741
precision class 1 = 0.666667
recall class 0 = 0.982014
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.017986
positive prediction rate = 0.048701
AUC of ROC = 0.892806
AUC of PRC = 0.534399
min(+P, Se) = 0.53125

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10682699829339981
difference in average predicted and observed risk = 0.034661998293399804
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.888889
AUC of PRC = 0.383509
min(+P, Se) = 0.352941

-------------------------------

confusion matrix:
[[69  3]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1415420025587082
difference in average predicted and observed risk = 0.052934002558708185
number samples = 79
accuracy = 0.924051
precision class 0 = 0.958333
precision class 1 = 0.571429
recall class 0 = 0.958333
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.041667
positive prediction rate = 0.088608
AUC of ROC = 0.876984
AUC of PRC = 0.737098
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[2719   67]
 [ 300  136]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11623899638652802
difference in average predicted and observed risk = -0.01908100361347198
number samples = 3222
accuracy = 0.886096
precision class 0 = 0.900629
precision class 1 = 0.669951
recall class 0 = 0.975951
recall class 1 = 0.311927
false negative rate = 0.688073
false positive rate = 0.024049
positive prediction rate = 0.063004
AUC of ROC = 0.857776
AUC of PRC = 0.559833
min(+P, Se) = 0.520642

-------------------------------

Epoch 00080: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch80.state
Epoch 81/100
 - 813s - loss: 0.2593 - val_loss: 0.2868

==>predicting on train



confusion matrix:
[[6982   54]
 [ 868  444]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12567399442195892
difference in average predicted and observed risk = -0.031489005578041074
number samples = 8348
accuracy = 0.889554
precision class 0 = 0.889427
precision class 1 = 0.891566
recall class 0 = 0.992325
recall class 1 = 0.338415
false negative rate = 0.661585
false positive rate = 0.007675
positive prediction rate = 0.059655
AUC of ROC = 0.910539
AUC of PRC = 0.716991
min(+P, Se) = 0.636433

-------------------------------

confusion matrix:
[[3964   38]
 [ 247  224]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10249300301074982
difference in average predicted and observed risk = -0.002804996989250186
number samples = 4473
accuracy = 0.936284
precision class 0 = 0.941344
precision class 1 = 0.854962
recall class 0 = 0.990505
recall class 1 = 0.475584
false negative rate = 0.524416
false positive rate = 0.009495
positive prediction rate = 0.058574
AUC of ROC = 0.934054
AUC of PRC = 0.737081
min(+P, Se) = 0.639066

-------------------------------

confusion matrix:
[[1182   13]
 [  70   73]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10852000117301941
difference in average predicted and observed risk = 0.0016440011730194104
number samples = 1338
accuracy = 0.937967
precision class 0 = 0.944089
precision class 1 = 0.848837
recall class 0 = 0.989121
recall class 1 = 0.51049
false negative rate = 0.48951
false positive rate = 0.010879
positive prediction rate = 0.064275
AUC of ROC = 0.937356
AUC of PRC = 0.734253
min(+P, Se) = 0.657343

-------------------------------

confusion matrix:
[[347   3]
 [ 19  20]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09845399856567383
difference in average predicted and observed risk = -0.0018030014343261708
number samples = 389
accuracy = 0.943445
precision class 0 = 0.948087
precision class 1 = 0.869565
recall class 0 = 0.991429
recall class 1 = 0.512821
false negative rate = 0.487179
false positive rate = 0.008571
positive prediction rate = 0.059126
AUC of ROC = 0.937656
AUC of PRC = 0.745147
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16283300518989563
difference in average predicted and observed risk = -0.0025809948101043756
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.963964
AUC of PRC = 0.892493
min(+P, Se) = 0.782609

-------------------------------

confusion matrix:
[[6926   60]
 [ 641  432]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1124889999628067
difference in average predicted and observed risk = -0.02065400003719331
number samples = 8059
accuracy = 0.913016
precision class 0 = 0.91529
precision class 1 = 0.878049
recall class 0 = 0.991411
recall class 1 = 0.402609
false negative rate = 0.59739
false positive rate = 0.008589
positive prediction rate = 0.06105
AUC of ROC = 0.926371
AUC of PRC = 0.734612
min(+P, Se) = 0.653308

-------------------------------

confusion matrix:
[[5658   50]
 [ 570  344]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12174200266599655
difference in average predicted and observed risk = -0.016282997334003457
number samples = 6622
accuracy = 0.906373
precision class 0 = 0.908478
precision class 1 = 0.873096
recall class 0 = 0.99124
recall class 1 = 0.376368
false negative rate = 0.623632
false positive rate = 0.00876
positive prediction rate = 0.059499
AUC of ROC = 0.915818
AUC of PRC = 0.710045
min(+P, Se) = 0.625821

-------------------------------

confusion matrix:
[[8973   73]
 [ 869  494]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11251699924468994
difference in average predicted and observed risk = -0.018427000755310063
number samples = 10409
accuracy = 0.909501
precision class 0 = 0.911705
precision class 1 = 0.871252
recall class 0 = 0.99193
recall class 1 = 0.362436
false negative rate = 0.637564
false positive rate = 0.00807
positive prediction rate = 0.054472
AUC of ROC = 0.919854
AUC of PRC = 0.706505
min(+P, Se) = 0.627465

-------------------------------

confusion matrix:
[[1622   19]
 [ 231  176]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14483599364757538
difference in average predicted and observed risk = -0.05389400635242461
number samples = 2048
accuracy = 0.87793
precision class 0 = 0.875337
precision class 1 = 0.902564
recall class 0 = 0.988422
recall class 1 = 0.432432
false negative rate = 0.567568
false positive rate = 0.011578
positive prediction rate = 0.095215
AUC of ROC = 0.930925
AUC of PRC = 0.797924
min(+P, Se) = 0.704156

-------------------------------

confusion matrix:
[[1275    7]
 [  65   61]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10608399659395218
difference in average predicted and observed risk = 0.01659499659395218
number samples = 1408
accuracy = 0.948864
precision class 0 = 0.951493
precision class 1 = 0.897059
recall class 0 = 0.99454
recall class 1 = 0.484127
false negative rate = 0.515873
false positive rate = 0.00546
positive prediction rate = 0.048295
AUC of ROC = 0.92295
AUC of PRC = 0.720556
min(+P, Se) = 0.619048

-------------------------------

confusion matrix:
[[289   7]
 [ 29  23]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14079099893569946
difference in average predicted and observed risk = -0.00863400106430054
number samples = 348
accuracy = 0.896552
precision class 0 = 0.908805
precision class 1 = 0.766667
recall class 0 = 0.976351
recall class 1 = 0.442308
false negative rate = 0.557692
false positive rate = 0.023649
positive prediction rate = 0.086207
AUC of ROC = 0.905275
AUC of PRC = 0.726199
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[425   4]
 [ 17  22]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.09946999698877335
difference in average predicted and observed risk = 0.01613699698877334
number samples = 468
accuracy = 0.955128
precision class 0 = 0.961538
precision class 1 = 0.846154
recall class 0 = 0.990676
recall class 1 = 0.564103
false negative rate = 0.435897
false positive rate = 0.009324
positive prediction rate = 0.055556
AUC of ROC = 0.915785
AUC of PRC = 0.70352
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12584   110]
 [ 1211   776]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11666300147771835
difference in average predicted and observed risk = -0.01868199852228164
number samples = 14681
accuracy = 0.91002
precision class 0 = 0.912215
precision class 1 = 0.875847
recall class 0 = 0.991334
recall class 1 = 0.390539
false negative rate = 0.609461
false positive rate = 0.008666
positive prediction rate = 0.06035
AUC of ROC = 0.921612
AUC of PRC = 0.723374
min(+P, Se) = 0.639839

-------------------------------

==>predicting on validation



confusion matrix:
[[1502   33]
 [ 194   84]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12868399918079376
difference in average predicted and observed risk = -0.02465300081920624
number samples = 1813
accuracy = 0.874793
precision class 0 = 0.885613
precision class 1 = 0.717949
recall class 0 = 0.978502
recall class 1 = 0.302158
false negative rate = 0.697842
false positive rate = 0.021498
positive prediction rate = 0.064534
AUC of ROC = 0.846889
AUC of PRC = 0.578504
min(+P, Se) = 0.528777

-------------------------------

confusion matrix:
[[887  20]
 [ 81  32]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10466399788856506
difference in average predicted and observed risk = -0.00612000211143493
number samples = 1020
accuracy = 0.90098
precision class 0 = 0.916322
precision class 1 = 0.615385
recall class 0 = 0.977949
recall class 1 = 0.283186
false negative rate = 0.716814
false positive rate = 0.022051
positive prediction rate = 0.05098
AUC of ROC = 0.853138
AUC of PRC = 0.509197
min(+P, Se) = 0.517544

-------------------------------

confusion matrix:
[[242   9]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12589600682258606
difference in average predicted and observed risk = 0.006598006822586058
number samples = 285
accuracy = 0.898246
precision class 0 = 0.923664
precision class 1 = 0.608696
recall class 0 = 0.964143
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.035857
positive prediction rate = 0.080702
AUC of ROC = 0.889384
AUC of PRC = 0.625639
min(+P, Se) = 0.617647

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08444400131702423
difference in average predicted and observed risk = -0.005299998682975773
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.820926
AUC of PRC = 0.414985
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[20  2]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.191771000623703
difference in average predicted and observed risk = 0.03792500062370299
number samples = 26
accuracy = 0.884615
precision class 0 = 0.952381
precision class 1 = 0.6
recall class 0 = 0.909091
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.090909
positive prediction rate = 0.192308
AUC of ROC = 0.943182
AUC of PRC = 0.54375
min(+P, Se) = 0.75

-------------------------------

confusion matrix:
[[1491   38]
 [ 165   79]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12033899873495102
difference in average predicted and observed risk = -0.017281001265048973
number samples = 1773
accuracy = 0.885505
precision class 0 = 0.900362
precision class 1 = 0.675214
recall class 0 = 0.975147
recall class 1 = 0.32377
false negative rate = 0.67623
false positive rate = 0.024853
positive prediction rate = 0.06599
AUC of ROC = 0.854292
AUC of PRC = 0.561477
min(+P, Se) = 0.510204

-------------------------------

confusion matrix:
[[1229   28]
 [ 137   55]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12018799781799316
difference in average predicted and observed risk = -0.012317002182006848
number samples = 1449
accuracy = 0.886128
precision class 0 = 0.899707
precision class 1 = 0.662651
recall class 0 = 0.977725
recall class 1 = 0.286458
false negative rate = 0.713542
false positive rate = 0.022275
positive prediction rate = 0.057281
AUC of ROC = 0.857473
AUC of PRC = 0.565301
min(+P, Se) = 0.536458

-------------------------------

confusion matrix:
[[1933   45]
 [ 219   92]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11852800101041794
difference in average predicted and observed risk = -0.01733899898958205
number samples = 2289
accuracy = 0.884666
precision class 0 = 0.898234
precision class 1 = 0.671533
recall class 0 = 0.97725
recall class 1 = 0.29582
false negative rate = 0.70418
false positive rate = 0.02275
positive prediction rate = 0.059851
AUC of ROC = 0.849032
AUC of PRC = 0.55007
min(+P, Se) = 0.507937

-------------------------------

confusion matrix:
[[356  12]
 [ 56  25]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1380700021982193
difference in average predicted and observed risk = -0.042330997801780706
number samples = 449
accuracy = 0.848552
precision class 0 = 0.864078
precision class 1 = 0.675676
recall class 0 = 0.967391
recall class 1 = 0.308642
false negative rate = 0.691358
false positive rate = 0.032609
positive prediction rate = 0.082405
AUC of ROC = 0.862218
AUC of PRC = 0.643706
min(+P, Se) = 0.567901

-------------------------------

confusion matrix:
[[274   4]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10433399677276611
difference in average predicted and observed risk = 0.00693099677276611
number samples = 308
accuracy = 0.925325
precision class 0 = 0.935154
precision class 1 = 0.733333
recall class 0 = 0.985611
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.014388
positive prediction rate = 0.048701
AUC of ROC = 0.892566
AUC of PRC = 0.558346
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11031199991703033
difference in average predicted and observed risk = 0.03814699991703033
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.880952
AUC of PRC = 0.383696
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14398600161075592
difference in average predicted and observed risk = 0.055378001610755914
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.890873
AUC of PRC = 0.769328
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2720   66]
 [ 302  134]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.1202709972858429
difference in average predicted and observed risk = -0.0150490027141571
number samples = 3222
accuracy = 0.885785
precision class 0 = 0.900066
precision class 1 = 0.67
recall class 0 = 0.97631
recall class 1 = 0.307339
false negative rate = 0.692661
false positive rate = 0.02369
positive prediction rate = 0.062073
AUC of ROC = 0.855078
AUC of PRC = 0.562685
min(+P, Se) = 0.518349

-------------------------------

Epoch 00081: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch81.state
Epoch 82/100
 - 813s - loss: 0.2556 - val_loss: 0.2875

==>predicting on train



confusion matrix:
[[6963   73]
 [ 844  468]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.1315460056066513
difference in average predicted and observed risk = -0.02561699439334869
number samples = 8348
accuracy = 0.890153
precision class 0 = 0.891892
precision class 1 = 0.865065
recall class 0 = 0.989625
recall class 1 = 0.356707
false negative rate = 0.643293
false positive rate = 0.010375
positive prediction rate = 0.064806
AUC of ROC = 0.911803
AUC of PRC = 0.716228
min(+P, Se) = 0.634981

-------------------------------

confusion matrix:
[[3954   48]
 [ 247  224]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10709100216627121
difference in average predicted and observed risk = 0.001793002166271207
number samples = 4473
accuracy = 0.934049
precision class 0 = 0.941204
precision class 1 = 0.823529
recall class 0 = 0.988006
recall class 1 = 0.475584
false negative rate = 0.524416
false positive rate = 0.011994
positive prediction rate = 0.060809
AUC of ROC = 0.934696
AUC of PRC = 0.732449
min(+P, Se) = 0.651805

-------------------------------

confusion matrix:
[[1180   15]
 [  75   68]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11493100225925446
difference in average predicted and observed risk = 0.008055002259254457
number samples = 1338
accuracy = 0.932735
precision class 0 = 0.940239
precision class 1 = 0.819277
recall class 0 = 0.987448
recall class 1 = 0.475524
false negative rate = 0.524476
false positive rate = 0.012552
positive prediction rate = 0.062033
AUC of ROC = 0.938069
AUC of PRC = 0.719534
min(+P, Se) = 0.657343

-------------------------------

confusion matrix:
[[348   2]
 [ 17  22]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.1031470000743866
difference in average predicted and observed risk = 0.002890000074386598
number samples = 389
accuracy = 0.951157
precision class 0 = 0.953425
precision class 1 = 0.916667
recall class 0 = 0.994286
recall class 1 = 0.564103
false negative rate = 0.435897
false positive rate = 0.005714
positive prediction rate = 0.061697
AUC of ROC = 0.942784
AUC of PRC = 0.774716
min(+P, Se) = 0.74359

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16522599756717682
difference in average predicted and observed risk = -0.00018800243282318663
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.963964
AUC of PRC = 0.888358
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6911   75]
 [ 633  440]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11702600121498108
difference in average predicted and observed risk = -0.016116998785018932
number samples = 8059
accuracy = 0.912148
precision class 0 = 0.916092
precision class 1 = 0.854369
recall class 0 = 0.989264
recall class 1 = 0.410065
false negative rate = 0.589935
false positive rate = 0.010736
positive prediction rate = 0.063904
AUC of ROC = 0.926818
AUC of PRC = 0.730427
min(+P, Se) = 0.653668

-------------------------------

confusion matrix:
[[5643   65]
 [ 557  357]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12834900617599487
difference in average predicted and observed risk = -0.009675993824005136
number samples = 6622
accuracy = 0.906071
precision class 0 = 0.910161
precision class 1 = 0.845972
recall class 0 = 0.988612
recall class 1 = 0.390591
false negative rate = 0.609409
false positive rate = 0.011388
positive prediction rate = 0.063727
AUC of ROC = 0.917796
AUC of PRC = 0.711509
min(+P, Se) = 0.62035

-------------------------------

confusion matrix:
[[8958   88]
 [ 853  510]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11763700097799301
difference in average predicted and observed risk = -0.013306999022006993
number samples = 10409
accuracy = 0.909597
precision class 0 = 0.913057
precision class 1 = 0.852843
recall class 0 = 0.990272
recall class 1 = 0.374175
false negative rate = 0.625825
false positive rate = 0.009728
positive prediction rate = 0.05745
AUC of ROC = 0.920878
AUC of PRC = 0.70568
min(+P, Se) = 0.619222

-------------------------------

confusion matrix:
[[1618   23]
 [ 225  182]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1509840041399002
difference in average predicted and observed risk = -0.04774599586009978
number samples = 2048
accuracy = 0.878906
precision class 0 = 0.877916
precision class 1 = 0.887805
recall class 0 = 0.985984
recall class 1 = 0.447174
false negative rate = 0.552826
false positive rate = 0.014016
positive prediction rate = 0.100098
AUC of ROC = 0.933378
AUC of PRC = 0.801483
min(+P, Se) = 0.712531

-------------------------------

confusion matrix:
[[1263   19]
 [  68   58]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11183500289916992
difference in average predicted and observed risk = 0.022346002899169923
number samples = 1408
accuracy = 0.93821
precision class 0 = 0.948911
precision class 1 = 0.753247
recall class 0 = 0.985179
recall class 1 = 0.460317
false negative rate = 0.539683
false positive rate = 0.014821
positive prediction rate = 0.054688
AUC of ROC = 0.920759
AUC of PRC = 0.690385
min(+P, Se) = 0.626984

-------------------------------

confusion matrix:
[[289   7]
 [ 26  26]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14895200729370117
difference in average predicted and observed risk = -0.0004729927062988304
number samples = 348
accuracy = 0.905172
precision class 0 = 0.91746
precision class 1 = 0.787879
recall class 0 = 0.976351
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.023649
positive prediction rate = 0.094828
AUC of ROC = 0.908784
AUC of PRC = 0.724825
min(+P, Se) = 0.634615

-------------------------------

confusion matrix:
[[426   3]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10694099962711334
difference in average predicted and observed risk = 0.023607999627113338
number samples = 468
accuracy = 0.955128
precision class 0 = 0.959459
precision class 1 = 0.875
recall class 0 = 0.993007
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.006993
positive prediction rate = 0.051282
AUC of ROC = 0.910047
AUC of PRC = 0.69566
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[12554   140]
 [ 1190   797]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.1221340000629425
difference in average predicted and observed risk = -0.013210999937057488
number samples = 14681
accuracy = 0.909407
precision class 0 = 0.913417
precision class 1 = 0.850587
recall class 0 = 0.988971
recall class 1 = 0.401107
false negative rate = 0.598893
false positive rate = 0.011029
positive prediction rate = 0.063824
AUC of ROC = 0.922621
AUC of PRC = 0.721596
min(+P, Se) = 0.635678

-------------------------------

==>predicting on validation



confusion matrix:
[[1498   37]
 [ 191   87]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13461999595165253
difference in average predicted and observed risk = -0.018717004048347474
number samples = 1813
accuracy = 0.874242
precision class 0 = 0.886915
precision class 1 = 0.701613
recall class 0 = 0.975896
recall class 1 = 0.31295
false negative rate = 0.68705
false positive rate = 0.024104
positive prediction rate = 0.068395
AUC of ROC = 0.847604
AUC of PRC = 0.570675
min(+P, Se) = 0.510791

-------------------------------

confusion matrix:
[[888  19]
 [ 79  34]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10944599658250809
difference in average predicted and observed risk = -0.0013380034174919064
number samples = 1020
accuracy = 0.903922
precision class 0 = 0.918304
precision class 1 = 0.641509
recall class 0 = 0.979052
recall class 1 = 0.300885
false negative rate = 0.699115
false positive rate = 0.020948
positive prediction rate = 0.051961
AUC of ROC = 0.847187
AUC of PRC = 0.501668
min(+P, Se) = 0.504425

-------------------------------

confusion matrix:
[[242   9]
 [ 21  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12698400020599365
difference in average predicted and observed risk = 0.007686000205993651
number samples = 285
accuracy = 0.894737
precision class 0 = 0.920152
precision class 1 = 0.590909
recall class 0 = 0.964143
recall class 1 = 0.382353
false negative rate = 0.617647
false positive rate = 0.035857
positive prediction rate = 0.077193
AUC of ROC = 0.880947
AUC of PRC = 0.606354
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09233199805021286
difference in average predicted and observed risk = 0.0025879980502128558
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.818913
AUC of PRC = 0.427849
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[20  2]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.2022940069437027
difference in average predicted and observed risk = 0.04844800694370269
number samples = 26
accuracy = 0.884615
precision class 0 = 0.952381
precision class 1 = 0.6
recall class 0 = 0.909091
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.090909
positive prediction rate = 0.192308
AUC of ROC = 0.954545
AUC of PRC = 0.73125
min(+P, Se) = 0.75

-------------------------------

confusion matrix:
[[1488   41]
 [ 165   79]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1241220012307167
difference in average predicted and observed risk = -0.013497998769283287
number samples = 1773
accuracy = 0.883813
precision class 0 = 0.900181
precision class 1 = 0.658333
recall class 0 = 0.973185
recall class 1 = 0.32377
false negative rate = 0.67623
false positive rate = 0.026815
positive prediction rate = 0.067682
AUC of ROC = 0.851893
AUC of PRC = 0.55478
min(+P, Se) = 0.508197

-------------------------------

confusion matrix:
[[1229   28]
 [ 133   59]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12717999517917633
difference in average predicted and observed risk = -0.005325004820823681
number samples = 1449
accuracy = 0.888889
precision class 0 = 0.902349
precision class 1 = 0.678161
recall class 0 = 0.977725
recall class 1 = 0.307292
false negative rate = 0.692708
false positive rate = 0.022275
positive prediction rate = 0.060041
AUC of ROC = 0.85531
AUC of PRC = 0.556001
min(+P, Se) = 0.535354

-------------------------------

confusion matrix:
[[1933   45]
 [ 218   93]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12345000356435776
difference in average predicted and observed risk = -0.01241699643564223
number samples = 2289
accuracy = 0.885103
precision class 0 = 0.898652
precision class 1 = 0.673913
recall class 0 = 0.97725
recall class 1 = 0.299035
false negative rate = 0.700965
false positive rate = 0.02275
positive prediction rate = 0.060288
AUC of ROC = 0.847018
AUC of PRC = 0.53824
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[356  12]
 [ 54  27]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14189200103282928
difference in average predicted and observed risk = -0.03850899896717072
number samples = 449
accuracy = 0.853007
precision class 0 = 0.868293
precision class 1 = 0.692308
recall class 0 = 0.967391
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.032609
positive prediction rate = 0.08686
AUC of ROC = 0.855609
AUC of PRC = 0.63584
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[274   4]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.109825998544693
difference in average predicted and observed risk = 0.01242299854469299
number samples = 308
accuracy = 0.925325
precision class 0 = 0.935154
precision class 1 = 0.733333
recall class 0 = 0.985611
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.014388
positive prediction rate = 0.048701
AUC of ROC = 0.893885
AUC of PRC = 0.581103
min(+P, Se) = 0.566667

-------------------------------

confusion matrix:
[[85  5]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11729399859905243
difference in average predicted and observed risk = 0.04512899859905242
number samples = 97
accuracy = 0.896907
precision class 0 = 0.944444
precision class 1 = 0.285714
recall class 0 = 0.944444
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.055556
positive prediction rate = 0.072165
AUC of ROC = 0.884127
AUC of PRC = 0.367855
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[69  3]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.16282600164413452
difference in average predicted and observed risk = 0.07421800164413452
number samples = 79
accuracy = 0.936709
precision class 0 = 0.971831
precision class 1 = 0.625
recall class 0 = 0.958333
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.041667
positive prediction rate = 0.101266
AUC of ROC = 0.89881
AUC of PRC = 0.770626
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2717   69]
 [ 298  138]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.1254979968070984
difference in average predicted and observed risk = -0.009822003192901607
number samples = 3222
accuracy = 0.886096
precision class 0 = 0.901161
precision class 1 = 0.666667
recall class 0 = 0.975233
recall class 1 = 0.316514
false negative rate = 0.683486
false positive rate = 0.024767
positive prediction rate = 0.064246
AUC of ROC = 0.852687
AUC of PRC = 0.554607
min(+P, Se) = 0.522936

-------------------------------

Epoch 00082: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch82.state
Epoch 83/100
 - 816s - loss: 0.2591 - val_loss: 0.2882

==>predicting on train



confusion matrix:
[[6984   52]
 [ 856  456]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12751999497413635
difference in average predicted and observed risk = -0.029643005025863645
number samples = 8348
accuracy = 0.891231
precision class 0 = 0.890816
precision class 1 = 0.897638
recall class 0 = 0.992609
recall class 1 = 0.347561
false negative rate = 0.652439
false positive rate = 0.007391
positive prediction rate = 0.060853
AUC of ROC = 0.911192
AUC of PRC = 0.722729
min(+P, Se) = 0.635948

-------------------------------

confusion matrix:
[[3962   40]
 [ 247  224]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.1036200001835823
difference in average predicted and observed risk = -0.0016779998164176968
number samples = 4473
accuracy = 0.935837
precision class 0 = 0.941316
precision class 1 = 0.848485
recall class 0 = 0.990005
recall class 1 = 0.475584
false negative rate = 0.524416
false positive rate = 0.009995
positive prediction rate = 0.059021
AUC of ROC = 0.933862
AUC of PRC = 0.738274
min(+P, Se) = 0.653928

-------------------------------

confusion matrix:
[[1180   15]
 [  79   64]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11158499866724014
difference in average predicted and observed risk = 0.004708998667240144
number samples = 1338
accuracy = 0.929746
precision class 0 = 0.937252
precision class 1 = 0.810127
recall class 0 = 0.987448
recall class 1 = 0.447552
false negative rate = 0.552448
false positive rate = 0.012552
positive prediction rate = 0.059043
AUC of ROC = 0.939925
AUC of PRC = 0.72839
min(+P, Se) = 0.65035

-------------------------------

confusion matrix:
[[348   2]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09711600095033646
difference in average predicted and observed risk = -0.0031409990496635426
number samples = 389
accuracy = 0.938303
precision class 0 = 0.940541
precision class 1 = 0.894737
recall class 0 = 0.994286
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.005714
positive prediction rate = 0.048843
AUC of ROC = 0.932454
AUC of PRC = 0.743969
min(+P, Se) = 0.682927

-------------------------------

confusion matrix:
[[109   2]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16135600209236145
difference in average predicted and observed risk = -0.004057997907638555
number samples = 133
accuracy = 0.924812
precision class 0 = 0.931624
precision class 1 = 0.875
recall class 0 = 0.981982
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.018018
positive prediction rate = 0.120301
AUC of ROC = 0.965192
AUC of PRC = 0.883746
min(+P, Se) = 0.772727

-------------------------------

confusion matrix:
[[6923   63]
 [ 639  434]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1142989993095398
difference in average predicted and observed risk = -0.018844000690460216
number samples = 8059
accuracy = 0.912892
precision class 0 = 0.915499
precision class 1 = 0.873239
recall class 0 = 0.990982
recall class 1 = 0.404473
false negative rate = 0.595527
false positive rate = 0.009018
positive prediction rate = 0.06167
AUC of ROC = 0.926576
AUC of PRC = 0.738439
min(+P, Se) = 0.6589

-------------------------------

confusion matrix:
[[5660   48]
 [ 573  341]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12314099818468094
difference in average predicted and observed risk = -0.01488400181531907
number samples = 6622
accuracy = 0.906222
precision class 0 = 0.90807
precision class 1 = 0.876607
recall class 0 = 0.991591
recall class 1 = 0.373085
false negative rate = 0.626915
false positive rate = 0.008409
positive prediction rate = 0.058744
AUC of ROC = 0.916515
AUC of PRC = 0.712579
min(+P, Se) = 0.626915

-------------------------------

confusion matrix:
[[8969   77]
 [ 871  492]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11411300301551819
difference in average predicted and observed risk = -0.016830996984481816
number samples = 10409
accuracy = 0.908925
precision class 0 = 0.911484
precision class 1 = 0.864675
recall class 0 = 0.991488
recall class 1 = 0.360968
false negative rate = 0.639032
false positive rate = 0.008512
positive prediction rate = 0.054664
AUC of ROC = 0.920077
AUC of PRC = 0.711578
min(+P, Se) = 0.632428

-------------------------------

confusion matrix:
[[1625   16]
 [ 229  178]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.146139994263649
difference in average predicted and observed risk = -0.052590005736351
number samples = 2048
accuracy = 0.880371
precision class 0 = 0.876483
precision class 1 = 0.917526
recall class 0 = 0.99025
recall class 1 = 0.437346
false negative rate = 0.562654
false positive rate = 0.00975
positive prediction rate = 0.094727
AUC of ROC = 0.930701
AUC of PRC = 0.799989
min(+P, Se) = 0.702703

-------------------------------

confusion matrix:
[[1273    9]
 [  68   58]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10774300247430801
difference in average predicted and observed risk = 0.018254002474308015
number samples = 1408
accuracy = 0.945312
precision class 0 = 0.949292
precision class 1 = 0.865672
recall class 0 = 0.99298
recall class 1 = 0.460317
false negative rate = 0.539683
false positive rate = 0.00702
positive prediction rate = 0.047585
AUC of ROC = 0.927538
AUC of PRC = 0.705584
min(+P, Se) = 0.619048

-------------------------------

confusion matrix:
[[290   6]
 [ 26  26]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14541399478912354
difference in average predicted and observed risk = -0.004011005210876467
number samples = 348
accuracy = 0.908046
precision class 0 = 0.917722
precision class 1 = 0.8125
recall class 0 = 0.97973
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.02027
positive prediction rate = 0.091954
AUC of ROC = 0.909369
AUC of PRC = 0.734426
min(+P, Se) = 0.679245

-------------------------------

confusion matrix:
[[426   3]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10078100115060806
difference in average predicted and observed risk = 0.01744800115060806
number samples = 468
accuracy = 0.955128
precision class 0 = 0.959459
precision class 1 = 0.875
recall class 0 = 0.993007
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.006993
positive prediction rate = 0.051282
AUC of ROC = 0.915247
AUC of PRC = 0.700059
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[12583   111]
 [ 1212   775]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11828699707984924
difference in average predicted and observed risk = -0.01705800292015075
number samples = 14681
accuracy = 0.909883
precision class 0 = 0.912142
precision class 1 = 0.874718
recall class 0 = 0.991256
recall class 1 = 0.390035
false negative rate = 0.609965
false positive rate = 0.008744
positive prediction rate = 0.06035
AUC of ROC = 0.922033
AUC of PRC = 0.726765
min(+P, Se) = 0.643684

-------------------------------

==>predicting on validation



confusion matrix:
[[1503   32]
 [ 199   79]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12942999601364136
difference in average predicted and observed risk = -0.023907003986358644
number samples = 1813
accuracy = 0.872587
precision class 0 = 0.883079
precision class 1 = 0.711712
recall class 0 = 0.979153
recall class 1 = 0.284173
false negative rate = 0.715827
false positive rate = 0.020847
positive prediction rate = 0.061224
AUC of ROC = 0.845987
AUC of PRC = 0.572371
min(+P, Se) = 0.521583

-------------------------------

confusion matrix:
[[890  17]
 [ 84  29]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10499999672174454
difference in average predicted and observed risk = -0.005784003278255456
number samples = 1020
accuracy = 0.90098
precision class 0 = 0.913758
precision class 1 = 0.630435
recall class 0 = 0.981257
recall class 1 = 0.256637
false negative rate = 0.743363
false positive rate = 0.018743
positive prediction rate = 0.045098
AUC of ROC = 0.850484
AUC of PRC = 0.503911
min(+P, Se) = 0.504425

-------------------------------

confusion matrix:
[[243   8]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.122250996530056
difference in average predicted and observed risk = 0.0029529965300559985
number samples = 285
accuracy = 0.905263
precision class 0 = 0.927481
precision class 1 = 0.652174
recall class 0 = 0.968127
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.031873
positive prediction rate = 0.080702
AUC of ROC = 0.881884
AUC of PRC = 0.627088
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08613499999046326
difference in average predicted and observed risk = -0.0036090000095367475
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.82495
AUC of PRC = 0.432758
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[20  2]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19903099536895752
difference in average predicted and observed risk = 0.04518499536895751
number samples = 26
accuracy = 0.923077
precision class 0 = 1.0
precision class 1 = 0.666667
recall class 0 = 0.909091
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.090909
positive prediction rate = 0.230769
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1491   38]
 [ 168   76]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12076900154352188
difference in average predicted and observed risk = -0.01685099845647811
number samples = 1773
accuracy = 0.883813
precision class 0 = 0.898734
precision class 1 = 0.666667
recall class 0 = 0.975147
recall class 1 = 0.311475
false negative rate = 0.688525
false positive rate = 0.024853
positive prediction rate = 0.064298
AUC of ROC = 0.852352
AUC of PRC = 0.559003
min(+P, Se) = 0.516393

-------------------------------

confusion matrix:
[[1234   23]
 [ 140   52]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12033700197935104
difference in average predicted and observed risk = -0.012167998020648968
number samples = 1449
accuracy = 0.887509
precision class 0 = 0.898108
precision class 1 = 0.693333
recall class 0 = 0.981702
recall class 1 = 0.270833
false negative rate = 0.729167
false positive rate = 0.018298
positive prediction rate = 0.05176
AUC of ROC = 0.855795
AUC of PRC = 0.557299
min(+P, Se) = 0.523316

-------------------------------

confusion matrix:
[[1939   39]
 [ 224   87]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11813200265169144
difference in average predicted and observed risk = -0.01773499734830855
number samples = 2289
accuracy = 0.885103
precision class 0 = 0.89644
precision class 1 = 0.690476
recall class 0 = 0.980283
recall class 1 = 0.279743
false negative rate = 0.720257
false positive rate = 0.019717
positive prediction rate = 0.055046
AUC of ROC = 0.849053
AUC of PRC = 0.546986
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[356  12]
 [ 57  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13822400569915771
difference in average predicted and observed risk = -0.04217699430084229
number samples = 449
accuracy = 0.846325
precision class 0 = 0.861985
precision class 1 = 0.666667
recall class 0 = 0.967391
recall class 1 = 0.296296
false negative rate = 0.703704
false positive rate = 0.032609
positive prediction rate = 0.080178
AUC of ROC = 0.851617
AUC of PRC = 0.623533
min(+P, Se) = 0.574713

-------------------------------

confusion matrix:
[[274   4]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10883399844169617
difference in average predicted and observed risk = 0.011430998441696164
number samples = 308
accuracy = 0.925325
precision class 0 = 0.935154
precision class 1 = 0.733333
recall class 0 = 0.985611
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.014388
positive prediction rate = 0.048701
AUC of ROC = 0.888249
AUC of PRC = 0.562217
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11054699867963791
difference in average predicted and observed risk = 0.0383819986796379
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.896825
AUC of PRC = 0.400911
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1491129994392395
difference in average predicted and observed risk = 0.060504999439239496
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.894841
AUC of PRC = 0.769953
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2725   61]
 [ 308  128]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12057500332593918
difference in average predicted and observed risk = -0.014744996674060817
number samples = 3222
accuracy = 0.885475
precision class 0 = 0.89845
precision class 1 = 0.677249
recall class 0 = 0.978105
recall class 1 = 0.293578
false negative rate = 0.706422
false positive rate = 0.021895
positive prediction rate = 0.058659
AUC of ROC = 0.853226
AUC of PRC = 0.557567
min(+P, Se) = 0.518349

-------------------------------

Epoch 00083: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch83.state
Epoch 84/100
 - 822s - loss: 0.2546 - val_loss: 0.2860

==>predicting on train



confusion matrix:
[[6969   67]
 [ 825  487]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13629600405693054
difference in average predicted and observed risk = -0.020866995943069455
number samples = 8348
accuracy = 0.893148
precision class 0 = 0.894149
precision class 1 = 0.879061
recall class 0 = 0.990478
recall class 1 = 0.371189
false negative rate = 0.628811
false positive rate = 0.009522
positive prediction rate = 0.066363
AUC of ROC = 0.911122
AUC of PRC = 0.721275
min(+P, Se) = 0.634909

-------------------------------

confusion matrix:
[[3946   56]
 [ 234  237]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11336199939250946
difference in average predicted and observed risk = 0.008063999392509458
number samples = 4473
accuracy = 0.935167
precision class 0 = 0.944019
precision class 1 = 0.808874
recall class 0 = 0.986007
recall class 1 = 0.503185
false negative rate = 0.496815
false positive rate = 0.013993
positive prediction rate = 0.065504
AUC of ROC = 0.932734
AUC of PRC = 0.731091
min(+P, Se) = 0.636555

-------------------------------

confusion matrix:
[[1178   17]
 [  72   71]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.1201929971575737
difference in average predicted and observed risk = 0.013316997157573701
number samples = 1338
accuracy = 0.933483
precision class 0 = 0.9424
precision class 1 = 0.806818
recall class 0 = 0.985774
recall class 1 = 0.496504
false negative rate = 0.503497
false positive rate = 0.014226
positive prediction rate = 0.06577
AUC of ROC = 0.936846
AUC of PRC = 0.719293
min(+P, Se) = 0.657343

-------------------------------

confusion matrix:
[[347   3]
 [ 17  22]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10766199976205826
difference in average predicted and observed risk = 0.007404999762058259
number samples = 389
accuracy = 0.948586
precision class 0 = 0.953297
precision class 1 = 0.88
recall class 0 = 0.991429
recall class 1 = 0.564103
false negative rate = 0.435897
false positive rate = 0.008571
positive prediction rate = 0.064267
AUC of ROC = 0.941465
AUC of PRC = 0.710574
min(+P, Se) = 0.675

-------------------------------

confusion matrix:
[[108   3]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1821330040693283
difference in average predicted and observed risk = 0.016719004069328303
number samples = 133
accuracy = 0.917293
precision class 0 = 0.931035
precision class 1 = 0.823529
recall class 0 = 0.972973
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.027027
positive prediction rate = 0.12782
AUC of ROC = 0.961097
AUC of PRC = 0.882627
min(+P, Se) = 0.782609

-------------------------------

confusion matrix:
[[6911   75]
 [ 610  463]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12383700162172318
difference in average predicted and observed risk = -0.009305998378276836
number samples = 8059
accuracy = 0.915002
precision class 0 = 0.918894
precision class 1 = 0.860595
recall class 0 = 0.989264
recall class 1 = 0.4315
false negative rate = 0.5685
false positive rate = 0.010736
positive prediction rate = 0.066758
AUC of ROC = 0.92567
AUC of PRC = 0.7345
min(+P, Se) = 0.649302

-------------------------------

confusion matrix:
[[5637   71]
 [ 546  368]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.13195300102233887
difference in average predicted and observed risk = -0.006071998977661142
number samples = 6622
accuracy = 0.906826
precision class 0 = 0.911693
precision class 1 = 0.838269
recall class 0 = 0.987561
recall class 1 = 0.402626
false negative rate = 0.597374
false positive rate = 0.012439
positive prediction rate = 0.066294
AUC of ROC = 0.915645
AUC of PRC = 0.706572
min(+P, Se) = 0.628009

-------------------------------

confusion matrix:
[[8950   96]
 [ 836  527]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.1227559968829155
difference in average predicted and observed risk = -0.008188003117084508
number samples = 10409
accuracy = 0.910462
precision class 0 = 0.914572
precision class 1 = 0.845907
recall class 0 = 0.989388
recall class 1 = 0.386647
false negative rate = 0.613353
false positive rate = 0.010612
positive prediction rate = 0.059852
AUC of ROC = 0.919685
AUC of PRC = 0.710034
min(+P, Se) = 0.62876

-------------------------------

confusion matrix:
[[1618   23]
 [ 212  195]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.15857499837875366
difference in average predicted and observed risk = -0.04015500162124633
number samples = 2048
accuracy = 0.885254
precision class 0 = 0.884153
precision class 1 = 0.894495
recall class 0 = 0.985984
recall class 1 = 0.479115
false negative rate = 0.520885
false positive rate = 0.014016
positive prediction rate = 0.106445
AUC of ROC = 0.928717
AUC of PRC = 0.79197
min(+P, Se) = 0.687961

-------------------------------

confusion matrix:
[[1266   16]
 [  64   62]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11675000190734863
difference in average predicted and observed risk = 0.027261001907348634
number samples = 1408
accuracy = 0.943182
precision class 0 = 0.95188
precision class 1 = 0.794872
recall class 0 = 0.98752
recall class 1 = 0.492063
false negative rate = 0.507937
false positive rate = 0.01248
positive prediction rate = 0.055398
AUC of ROC = 0.924089
AUC of PRC = 0.689833
min(+P, Se) = 0.603175

-------------------------------

confusion matrix:
[[289   7]
 [ 26  26]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.15404300391674042
difference in average predicted and observed risk = 0.004618003916740415
number samples = 348
accuracy = 0.905172
precision class 0 = 0.91746
precision class 1 = 0.787879
recall class 0 = 0.976351
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.023649
positive prediction rate = 0.094828
AUC of ROC = 0.90651
AUC of PRC = 0.720566
min(+P, Se) = 0.634615

-------------------------------

confusion matrix:
[[425   4]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10954999923706055
difference in average predicted and observed risk = 0.026216999237060543
number samples = 468
accuracy = 0.952991
precision class 0 = 0.959368
precision class 1 = 0.84
recall class 0 = 0.990676
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.009324
positive prediction rate = 0.053419
AUC of ROC = 0.912737
AUC of PRC = 0.68926
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12548   146]
 [ 1156   831]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12749700248241425
difference in average predicted and observed risk = -0.007847997517585747
number samples = 14681
accuracy = 0.911314
precision class 0 = 0.915645
precision class 1 = 0.850563
recall class 0 = 0.988499
recall class 1 = 0.418218
false negative rate = 0.581782
false positive rate = 0.011501
positive prediction rate = 0.066549
AUC of ROC = 0.921101
AUC of PRC = 0.721834
min(+P, Se) = 0.639558

-------------------------------

==>predicting on validation



confusion matrix:
[[1495   40]
 [ 194   84]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1390479952096939
difference in average predicted and observed risk = -0.014289004790306092
number samples = 1813
accuracy = 0.870932
precision class 0 = 0.885139
precision class 1 = 0.677419
recall class 0 = 0.973941
recall class 1 = 0.302158
false negative rate = 0.697842
false positive rate = 0.026059
positive prediction rate = 0.068395
AUC of ROC = 0.847114
AUC of PRC = 0.574923
min(+P, Se) = 0.521583

-------------------------------

confusion matrix:
[[882  25]
 [ 76  37]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.1165120005607605
difference in average predicted and observed risk = 0.0057280005607605045
number samples = 1020
accuracy = 0.90098
precision class 0 = 0.920668
precision class 1 = 0.596774
recall class 0 = 0.972437
recall class 1 = 0.327434
false negative rate = 0.672566
false positive rate = 0.027563
positive prediction rate = 0.060784
AUC of ROC = 0.853011
AUC of PRC = 0.502871
min(+P, Se) = 0.508772

-------------------------------

confusion matrix:
[[243   8]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13497400283813477
difference in average predicted and observed risk = 0.015676002838134764
number samples = 285
accuracy = 0.905263
precision class 0 = 0.927481
precision class 1 = 0.652174
recall class 0 = 0.968127
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.031873
positive prediction rate = 0.080702
AUC of ROC = 0.890321
AUC of PRC = 0.613284
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.0979899987578392
difference in average predicted and observed risk = 0.008245998757839199
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.814889
AUC of PRC = 0.388497
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19998499751091003
difference in average predicted and observed risk = 0.046138997510910024
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1486   43]
 [ 161   83]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1315550059080124
difference in average predicted and observed risk = -0.006064994091987602
number samples = 1773
accuracy = 0.884941
precision class 0 = 0.902247
precision class 1 = 0.65873
recall class 0 = 0.971877
recall class 1 = 0.340164
false negative rate = 0.659836
false positive rate = 0.028123
positive prediction rate = 0.071066
AUC of ROC = 0.852944
AUC of PRC = 0.559368
min(+P, Se) = 0.522267

-------------------------------

confusion matrix:
[[1224   33]
 [ 134   58]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.13043400645256042
difference in average predicted and observed risk = -0.002070993547439587
number samples = 1449
accuracy = 0.884748
precision class 0 = 0.901325
precision class 1 = 0.637363
recall class 0 = 0.973747
recall class 1 = 0.302083
false negative rate = 0.697917
false positive rate = 0.026253
positive prediction rate = 0.062802
AUC of ROC = 0.857626
AUC of PRC = 0.552735
min(+P, Se) = 0.520833

-------------------------------

confusion matrix:
[[1925   53]
 [ 213   98]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.129038006067276
difference in average predicted and observed risk = -0.006828993932723987
number samples = 2289
accuracy = 0.883792
precision class 0 = 0.900374
precision class 1 = 0.649007
recall class 0 = 0.973205
recall class 1 = 0.315113
false negative rate = 0.684887
false positive rate = 0.026795
positive prediction rate = 0.065968
AUC of ROC = 0.849523
AUC of PRC = 0.54423
min(+P, Se) = 0.517685

-------------------------------

confusion matrix:
[[355  13]
 [ 55  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.15068699419498444
difference in average predicted and observed risk = -0.02971400580501557
number samples = 449
accuracy = 0.848552
precision class 0 = 0.865854
precision class 1 = 0.666667
recall class 0 = 0.964674
recall class 1 = 0.320988
false negative rate = 0.679012
false positive rate = 0.035326
positive prediction rate = 0.08686
AUC of ROC = 0.860105
AUC of PRC = 0.637364
min(+P, Se) = 0.567901

-------------------------------

confusion matrix:
[[274   4]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11558900028467178
difference in average predicted and observed risk = 0.01818600028467178
number samples = 308
accuracy = 0.925325
precision class 0 = 0.935154
precision class 1 = 0.733333
recall class 0 = 0.985611
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.014388
positive prediction rate = 0.048701
AUC of ROC = 0.880935
AUC of PRC = 0.53661
min(+P, Se) = 0.566667

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11612000316381454
difference in average predicted and observed risk = 0.04395500316381454
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.87619
AUC of PRC = 0.357891
min(+P, Se) = 0.307692

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1563899964094162
difference in average predicted and observed risk = 0.06778199640941619
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.896825
AUC of PRC = 0.779675
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2710   76]
 [ 295  141]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.13105100393295288
difference in average predicted and observed risk = -0.004268996067047115
number samples = 3222
accuracy = 0.884854
precision class 0 = 0.90183
precision class 1 = 0.64977
recall class 0 = 0.972721
recall class 1 = 0.323395
false negative rate = 0.676606
false positive rate = 0.027279
positive prediction rate = 0.067349
AUC of ROC = 0.854485
AUC of PRC = 0.557079
min(+P, Se) = 0.522936

-------------------------------

Epoch 00084: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch84.state
Epoch 85/100
 - 819s - loss: 0.2593 - val_loss: 0.2831

==>predicting on train



confusion matrix:
[[6968   68]
 [ 825  487]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.14565099775791168
difference in average predicted and observed risk = -0.011512002242088315
number samples = 8348
accuracy = 0.893028
precision class 0 = 0.894136
precision class 1 = 0.877477
recall class 0 = 0.990335
recall class 1 = 0.371189
false negative rate = 0.628811
false positive rate = 0.009665
positive prediction rate = 0.066483
AUC of ROC = 0.913299
AUC of PRC = 0.724338
min(+P, Se) = 0.641768

-------------------------------

confusion matrix:
[[3954   48]
 [ 238  233]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.11811800301074982
difference in average predicted and observed risk = 0.012820003010749814
number samples = 4473
accuracy = 0.936061
precision class 0 = 0.943225
precision class 1 = 0.829181
recall class 0 = 0.988006
recall class 1 = 0.494692
false negative rate = 0.505308
false positive rate = 0.011994
positive prediction rate = 0.062821
AUC of ROC = 0.934718
AUC of PRC = 0.738
min(+P, Se) = 0.644068

-------------------------------

confusion matrix:
[[1179   16]
 [  75   68]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.12701299786567688
difference in average predicted and observed risk = 0.02013699786567688
number samples = 1338
accuracy = 0.931988
precision class 0 = 0.940191
precision class 1 = 0.809524
recall class 0 = 0.986611
recall class 1 = 0.475524
false negative rate = 0.524476
false positive rate = 0.013389
positive prediction rate = 0.06278
AUC of ROC = 0.937221
AUC of PRC = 0.710297
min(+P, Se) = 0.629371

-------------------------------

confusion matrix:
[[347   3]
 [ 19  20]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.11354299634695053
difference in average predicted and observed risk = 0.013285996346950532
number samples = 389
accuracy = 0.943445
precision class 0 = 0.948087
precision class 1 = 0.869565
recall class 0 = 0.991429
recall class 1 = 0.512821
false negative rate = 0.487179
false positive rate = 0.008571
positive prediction rate = 0.059126
AUC of ROC = 0.936703
AUC of PRC = 0.710657
min(+P, Se) = 0.717949

-------------------------------

confusion matrix:
[[109   2]
 [  6  16]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1864289939403534
difference in average predicted and observed risk = 0.021014993940353388
number samples = 133
accuracy = 0.93985
precision class 0 = 0.947826
precision class 1 = 0.888889
recall class 0 = 0.981982
recall class 1 = 0.727273
false negative rate = 0.272727
false positive rate = 0.018018
positive prediction rate = 0.135338
AUC of ROC = 0.966421
AUC of PRC = 0.897558
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6916   70]
 [ 619  454]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1299699991941452
difference in average predicted and observed risk = -0.0031730008058548087
number samples = 8059
accuracy = 0.914506
precision class 0 = 0.91785
precision class 1 = 0.866412
recall class 0 = 0.98998
recall class 1 = 0.423113
false negative rate = 0.576887
false positive rate = 0.01002
positive prediction rate = 0.06502
AUC of ROC = 0.927767
AUC of PRC = 0.738105
min(+P, Se) = 0.662942

-------------------------------

confusion matrix:
[[5641   67]
 [ 544  370]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.14130400121212006
difference in average predicted and observed risk = 0.0032790012121200474
number samples = 6622
accuracy = 0.907732
precision class 0 = 0.912045
precision class 1 = 0.846682
recall class 0 = 0.988262
recall class 1 = 0.404814
false negative rate = 0.595186
false positive rate = 0.011738
positive prediction rate = 0.065992
AUC of ROC = 0.917701
AUC of PRC = 0.71261
min(+P, Se) = 0.625821

-------------------------------

confusion matrix:
[[8959   87]
 [ 838  525]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.13063199818134308
difference in average predicted and observed risk = -0.0003120018186569262
number samples = 10409
accuracy = 0.911135
precision class 0 = 0.914464
precision class 1 = 0.857843
recall class 0 = 0.990382
recall class 1 = 0.38518
false negative rate = 0.61482
false positive rate = 0.009618
positive prediction rate = 0.058795
AUC of ROC = 0.921716
AUC of PRC = 0.71409
min(+P, Se) = 0.630499

-------------------------------

confusion matrix:
[[1619   22]
 [ 217  190]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.16328200697898865
difference in average predicted and observed risk = -0.03544799302101134
number samples = 2048
accuracy = 0.883301
precision class 0 = 0.881808
precision class 1 = 0.896226
recall class 0 = 0.986594
recall class 1 = 0.46683
false negative rate = 0.53317
false positive rate = 0.013406
positive prediction rate = 0.103516
AUC of ROC = 0.931746
AUC of PRC = 0.798069
min(+P, Se) = 0.709756

-------------------------------

confusion matrix:
[[1267   15]
 [  63   63]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.1251329928636551
difference in average predicted and observed risk = 0.03564399286365509
number samples = 1408
accuracy = 0.944602
precision class 0 = 0.952632
precision class 1 = 0.807692
recall class 0 = 0.9883
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0117
positive prediction rate = 0.055398
AUC of ROC = 0.926231
AUC of PRC = 0.696847
min(+P, Se) = 0.629921

-------------------------------

confusion matrix:
[[286  10]
 [ 26  26]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.16617700457572937
difference in average predicted and observed risk = 0.016752004575729368
number samples = 348
accuracy = 0.896552
precision class 0 = 0.916667
precision class 1 = 0.722222
recall class 0 = 0.966216
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.033784
positive prediction rate = 0.103448
AUC of ROC = 0.90677
AUC of PRC = 0.726845
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[426   3]
 [ 19  20]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.11746899783611298
difference in average predicted and observed risk = 0.03413599783611297
number samples = 468
accuracy = 0.952991
precision class 0 = 0.957303
precision class 1 = 0.869565
recall class 0 = 0.993007
recall class 1 = 0.512821
false negative rate = 0.487179
false positive rate = 0.006993
positive prediction rate = 0.049145
AUC of ROC = 0.911781
AUC of PRC = 0.67458
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[12557   137]
 [ 1163   824]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.13508200645446777
difference in average predicted and observed risk = -0.00026299354553221965
number samples = 14681
accuracy = 0.91145
precision class 0 = 0.915233
precision class 1 = 0.85744
recall class 0 = 0.989208
recall class 1 = 0.414696
false negative rate = 0.585304
false positive rate = 0.010793
positive prediction rate = 0.065459
AUC of ROC = 0.923192
AUC of PRC = 0.726337
min(+P, Se) = 0.64469

-------------------------------

==>predicting on validation



confusion matrix:
[[1499   36]
 [ 190   88]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.14815500378608704
difference in average predicted and observed risk = -0.005181996213912965
number samples = 1813
accuracy = 0.875345
precision class 0 = 0.887507
precision class 1 = 0.709677
recall class 0 = 0.976547
recall class 1 = 0.316547
false negative rate = 0.683453
false positive rate = 0.023453
positive prediction rate = 0.068395
AUC of ROC = 0.84897
AUC of PRC = 0.577044
min(+P, Se) = 0.532374

-------------------------------

confusion matrix:
[[886  21]
 [ 78  35]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.12031000107526779
difference in average predicted and observed risk = 0.009526001075267798
number samples = 1020
accuracy = 0.902941
precision class 0 = 0.919087
precision class 1 = 0.625
recall class 0 = 0.976847
recall class 1 = 0.309735
false negative rate = 0.690265
false positive rate = 0.023153
positive prediction rate = 0.054902
AUC of ROC = 0.849675
AUC of PRC = 0.505262
min(+P, Se) = 0.522124

-------------------------------

confusion matrix:
[[245   6]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13936300575733185
difference in average predicted and observed risk = 0.020065005757331847
number samples = 285
accuracy = 0.912281
precision class 0 = 0.92803
precision class 1 = 0.714286
recall class 0 = 0.976096
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.023904
positive prediction rate = 0.073684
AUC of ROC = 0.88329
AUC of PRC = 0.628588
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.1077129989862442
difference in average predicted and observed risk = 0.017968998986244197
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.794769
AUC of PRC = 0.394565
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.2067680060863495
difference in average predicted and observed risk = 0.05292200608634948
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1492   37]
 [ 160   84]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.13658200204372406
difference in average predicted and observed risk = -0.0010379979562759323
number samples = 1773
accuracy = 0.888889
precision class 0 = 0.903148
precision class 1 = 0.694215
recall class 0 = 0.975801
recall class 1 = 0.344262
false negative rate = 0.655738
false positive rate = 0.024199
positive prediction rate = 0.068246
AUC of ROC = 0.853445
AUC of PRC = 0.562276
min(+P, Se) = 0.526104

-------------------------------

confusion matrix:
[[1228   29]
 [ 133   59]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.13985900580883026
difference in average predicted and observed risk = 0.00735400580883025
number samples = 1449
accuracy = 0.888199
precision class 0 = 0.902278
precision class 1 = 0.670455
recall class 0 = 0.976929
recall class 1 = 0.307292
false negative rate = 0.692708
false positive rate = 0.023071
positive prediction rate = 0.060732
AUC of ROC = 0.8564
AUC of PRC = 0.559615
min(+P, Se) = 0.546875

-------------------------------

confusion matrix:
[[1933   45]
 [ 210  101]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.13614100217819214
difference in average predicted and observed risk = 0.0002740021781921509
number samples = 2289
accuracy = 0.888598
precision class 0 = 0.902007
precision class 1 = 0.691781
recall class 0 = 0.97725
recall class 1 = 0.324759
false negative rate = 0.675241
false positive rate = 0.02275
positive prediction rate = 0.063783
AUC of ROC = 0.849407
AUC of PRC = 0.552772
min(+P, Se) = 0.522293

-------------------------------

confusion matrix:
[[357  11]
 [ 54  27]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.15625299513339996
difference in average predicted and observed risk = -0.024148004866600042
number samples = 449
accuracy = 0.855234
precision class 0 = 0.868613
precision class 1 = 0.710526
recall class 0 = 0.970109
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.029891
positive prediction rate = 0.084633
AUC of ROC = 0.85826
AUC of PRC = 0.635876
min(+P, Se) = 0.560976

-------------------------------

confusion matrix:
[[274   4]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.12067800015211105
difference in average predicted and observed risk = 0.02327500015211105
number samples = 308
accuracy = 0.918831
precision class 0 = 0.928814
precision class 1 = 0.692308
recall class 0 = 0.985611
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.014388
positive prediction rate = 0.042208
AUC of ROC = 0.87518
AUC of PRC = 0.530448
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.12930800020694733
difference in average predicted and observed risk = 0.05714300020694732
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.893651
AUC of PRC = 0.399823
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.16863000392913818
difference in average predicted and observed risk = 0.08002200392913818
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.904762
AUC of PRC = 0.758963
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2720   66]
 [ 293  143]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.13805599510669708
difference in average predicted and observed risk = 0.0027359951066970867
number samples = 3222
accuracy = 0.888579
precision class 0 = 0.902755
precision class 1 = 0.684211
recall class 0 = 0.97631
recall class 1 = 0.327982
false negative rate = 0.672018
false positive rate = 0.02369
positive prediction rate = 0.064867
AUC of ROC = 0.854084
AUC of PRC = 0.561695
min(+P, Se) = 0.53211

-------------------------------

Epoch 00085: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch85.state
Epoch 86/100
 - 813s - loss: 0.2562 - val_loss: 0.2835

==>predicting on train



confusion matrix:
[[6988   48]
 [ 864  448]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13285399973392487
difference in average predicted and observed risk = -0.02430900026607513
number samples = 8348
accuracy = 0.890752
precision class 0 = 0.889964
precision class 1 = 0.903226
recall class 0 = 0.993178
recall class 1 = 0.341463
false negative rate = 0.658537
false positive rate = 0.006822
positive prediction rate = 0.059415
AUC of ROC = 0.91354
AUC of PRC = 0.725487
min(+P, Se) = 0.644817

-------------------------------

confusion matrix:
[[3961   41]
 [ 249  222]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10967300087213516
difference in average predicted and observed risk = 0.00437500087213516
number samples = 4473
accuracy = 0.935167
precision class 0 = 0.940855
precision class 1 = 0.844106
recall class 0 = 0.989755
recall class 1 = 0.471338
false negative rate = 0.528662
false positive rate = 0.010245
positive prediction rate = 0.058797
AUC of ROC = 0.934778
AUC of PRC = 0.735524
min(+P, Se) = 0.648305

-------------------------------

confusion matrix:
[[1183   12]
 [  80   63]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11787299811840057
difference in average predicted and observed risk = 0.010996998118400575
number samples = 1338
accuracy = 0.931241
precision class 0 = 0.936659
precision class 1 = 0.84
recall class 0 = 0.989958
recall class 1 = 0.440559
false negative rate = 0.559441
false positive rate = 0.010042
positive prediction rate = 0.056054
AUC of ROC = 0.937701
AUC of PRC = 0.724278
min(+P, Se) = 0.648276

-------------------------------

confusion matrix:
[[348   2]
 [ 20  19]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10541500151157379
difference in average predicted and observed risk = 0.005158001511573793
number samples = 389
accuracy = 0.943445
precision class 0 = 0.945652
precision class 1 = 0.904762
recall class 0 = 0.994286
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.005714
positive prediction rate = 0.053985
AUC of ROC = 0.935238
AUC of PRC = 0.732861
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.17148800194263458
difference in average predicted and observed risk = 0.006074001942634577
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.963554
AUC of PRC = 0.899789
min(+P, Se) = 0.791667

-------------------------------

confusion matrix:
[[6926   60]
 [ 651  422]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1193159967660904
difference in average predicted and observed risk = -0.013827003233909618
number samples = 8059
accuracy = 0.911776
precision class 0 = 0.914082
precision class 1 = 0.875519
recall class 0 = 0.991411
recall class 1 = 0.39329
false negative rate = 0.60671
false positive rate = 0.008589
positive prediction rate = 0.059809
AUC of ROC = 0.928702
AUC of PRC = 0.738443
min(+P, Se) = 0.660764

-------------------------------

confusion matrix:
[[5663   45]
 [ 569  345]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.1298079937696457
difference in average predicted and observed risk = -0.008217006230354318
number samples = 6622
accuracy = 0.907279
precision class 0 = 0.908697
precision class 1 = 0.884615
recall class 0 = 0.992116
recall class 1 = 0.377462
false negative rate = 0.622538
false positive rate = 0.007884
positive prediction rate = 0.058895
AUC of ROC = 0.916619
AUC of PRC = 0.71468
min(+P, Se) = 0.624454

-------------------------------

confusion matrix:
[[8980   66]
 [ 877  486]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11965999752283096
difference in average predicted and observed risk = -0.011284002477169042
number samples = 10409
accuracy = 0.909405
precision class 0 = 0.911028
precision class 1 = 0.880435
recall class 0 = 0.992704
recall class 1 = 0.356566
false negative rate = 0.643434
false positive rate = 0.007296
positive prediction rate = 0.053031
AUC of ROC = 0.921729
AUC of PRC = 0.71543
min(+P, Se) = 0.635363

-------------------------------

confusion matrix:
[[1623   18]
 [ 226  181]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.15156100690364838
difference in average predicted and observed risk = -0.047168993096351614
number samples = 2048
accuracy = 0.880859
precision class 0 = 0.877772
precision class 1 = 0.909548
recall class 0 = 0.989031
recall class 1 = 0.444717
false negative rate = 0.555283
false positive rate = 0.010969
positive prediction rate = 0.097168
AUC of ROC = 0.932539
AUC of PRC = 0.800225
min(+P, Se) = 0.70516

-------------------------------

confusion matrix:
[[1274    8]
 [  68   58]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11450199782848358
difference in average predicted and observed risk = 0.025012997828483582
number samples = 1408
accuracy = 0.946023
precision class 0 = 0.949329
precision class 1 = 0.878788
recall class 0 = 0.99376
recall class 1 = 0.460317
false negative rate = 0.539683
false positive rate = 0.00624
positive prediction rate = 0.046875
AUC of ROC = 0.924157
AUC of PRC = 0.691842
min(+P, Se) = 0.620155

-------------------------------

confusion matrix:
[[287   9]
 [ 30  22]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.15304900705814362
difference in average predicted and observed risk = 0.0036240070581436135
number samples = 348
accuracy = 0.887931
precision class 0 = 0.905363
precision class 1 = 0.709677
recall class 0 = 0.969595
recall class 1 = 0.423077
false negative rate = 0.576923
false positive rate = 0.030405
positive prediction rate = 0.08908
AUC of ROC = 0.903521
AUC of PRC = 0.715452
min(+P, Se) = 0.673077

-------------------------------

confusion matrix:
[[425   4]
 [ 19  20]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10842300206422806
difference in average predicted and observed risk = 0.025090002064228054
number samples = 468
accuracy = 0.950855
precision class 0 = 0.957207
precision class 1 = 0.833333
recall class 0 = 0.990676
recall class 1 = 0.512821
false negative rate = 0.487179
false positive rate = 0.009324
positive prediction rate = 0.051282
AUC of ROC = 0.914709
AUC of PRC = 0.689969
min(+P, Se) = 0.589744

-------------------------------

confusion matrix:
[[12589   105]
 [ 1220   767]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12404900044202805
difference in average predicted and observed risk = -0.011295999557971947
number samples = 14681
accuracy = 0.909747
precision class 0 = 0.911652
precision class 1 = 0.879587
recall class 0 = 0.991728
recall class 1 = 0.386009
false negative rate = 0.613991
false positive rate = 0.008272
positive prediction rate = 0.059396
AUC of ROC = 0.923302
AUC of PRC = 0.727458
min(+P, Se) = 0.644935

-------------------------------

==>predicting on validation



confusion matrix:
[[1502   33]
 [ 199   79]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1346289962530136
difference in average predicted and observed risk = -0.01870800374698639
number samples = 1813
accuracy = 0.872035
precision class 0 = 0.88301
precision class 1 = 0.705357
recall class 0 = 0.978502
recall class 1 = 0.284173
false negative rate = 0.715827
false positive rate = 0.021498
positive prediction rate = 0.061776
AUC of ROC = 0.851332
AUC of PRC = 0.580219
min(+P, Se) = 0.529617

-------------------------------

confusion matrix:
[[889  18]
 [ 79  34]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11109700053930283
difference in average predicted and observed risk = 0.00031300053930283234
number samples = 1020
accuracy = 0.904902
precision class 0 = 0.918388
precision class 1 = 0.653846
recall class 0 = 0.980154
recall class 1 = 0.300885
false negative rate = 0.699115
false positive rate = 0.019846
positive prediction rate = 0.05098
AUC of ROC = 0.851597
AUC of PRC = 0.518323
min(+P, Se) = 0.513274

-------------------------------

confusion matrix:
[[243   8]
 [ 19  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13143500685691833
difference in average predicted and observed risk = 0.012137006856918334
number samples = 285
accuracy = 0.905263
precision class 0 = 0.927481
precision class 1 = 0.652174
recall class 0 = 0.968127
recall class 1 = 0.441176
false negative rate = 0.558824
false positive rate = 0.031873
positive prediction rate = 0.080702
AUC of ROC = 0.880361
AUC of PRC = 0.623043
min(+P, Se) = 0.617647

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.0996209979057312
difference in average predicted and observed risk = 0.009876997905731197
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.77666
AUC of PRC = 0.384936
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[20  2]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.20156699419021606
difference in average predicted and observed risk = 0.047720994190216054
number samples = 26
accuracy = 0.923077
precision class 0 = 1.0
precision class 1 = 0.666667
recall class 0 = 0.909091
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.090909
positive prediction rate = 0.230769
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1495   34]
 [ 165   79]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1259399950504303
difference in average predicted and observed risk = -0.011680004949569694
number samples = 1773
accuracy = 0.887761
precision class 0 = 0.900602
precision class 1 = 0.699115
recall class 0 = 0.977763
recall class 1 = 0.32377
false negative rate = 0.67623
false positive rate = 0.022237
positive prediction rate = 0.063734
AUC of ROC = 0.854099
AUC of PRC = 0.566146
min(+P, Se) = 0.520492

-------------------------------

confusion matrix:
[[1228   29]
 [ 138   54]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.1273850053548813
difference in average predicted and observed risk = -0.005119994645118725
number samples = 1449
accuracy = 0.884748
precision class 0 = 0.898975
precision class 1 = 0.650602
recall class 0 = 0.976929
recall class 1 = 0.28125
false negative rate = 0.71875
false positive rate = 0.023071
positive prediction rate = 0.057281
AUC of ROC = 0.857755
AUC of PRC = 0.557534
min(+P, Se) = 0.526042

-------------------------------

confusion matrix:
[[1935   43]
 [ 220   91]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12432000041007996
difference in average predicted and observed risk = -0.011546999589920032
number samples = 2289
accuracy = 0.885103
precision class 0 = 0.897912
precision class 1 = 0.679105
recall class 0 = 0.978261
recall class 1 = 0.292605
false negative rate = 0.707395
false positive rate = 0.021739
positive prediction rate = 0.058541
AUC of ROC = 0.852283
AUC of PRC = 0.553443
min(+P, Se) = 0.511254

-------------------------------

confusion matrix:
[[357  11]
 [ 55  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1437149941921234
difference in average predicted and observed risk = -0.03668600580787659
number samples = 449
accuracy = 0.853007
precision class 0 = 0.866505
precision class 1 = 0.702703
recall class 0 = 0.970109
recall class 1 = 0.320988
false negative rate = 0.679012
false positive rate = 0.029891
positive prediction rate = 0.082405
AUC of ROC = 0.856716
AUC of PRC = 0.642203
min(+P, Se) = 0.573171

-------------------------------

confusion matrix:
[[274   4]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11324600130319595
difference in average predicted and observed risk = 0.01584300130319595
number samples = 308
accuracy = 0.922078
precision class 0 = 0.931973
precision class 1 = 0.714286
recall class 0 = 0.985611
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.014388
positive prediction rate = 0.045455
AUC of ROC = 0.877098
AUC of PRC = 0.549165
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.12149599939584732
difference in average predicted and observed risk = 0.049330999395847314
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.887302
AUC of PRC = 0.291406
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15329399704933167
difference in average predicted and observed risk = 0.06468599704933166
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.884921
AUC of PRC = 0.760883
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2723   63]
 [ 303  133]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12658999860286713
difference in average predicted and observed risk = -0.00873000139713287
number samples = 3222
accuracy = 0.886406
precision class 0 = 0.899868
precision class 1 = 0.678571
recall class 0 = 0.977387
recall class 1 = 0.305046
false negative rate = 0.694954
false positive rate = 0.022613
positive prediction rate = 0.060832
AUC of ROC = 0.85527
AUC of PRC = 0.563728
min(+P, Se) = 0.527523

-------------------------------

Epoch 00086: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch86.state
Epoch 87/100
 - 811s - loss: 0.2573 - val_loss: 0.2822

==>predicting on train



confusion matrix:
[[6986   50]
 [ 844  468]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13614299893379211
difference in average predicted and observed risk = -0.021020001066207883
number samples = 8348
accuracy = 0.892908
precision class 0 = 0.892209
precision class 1 = 0.903475
recall class 0 = 0.992894
recall class 1 = 0.356707
false negative rate = 0.643293
false positive rate = 0.007106
positive prediction rate = 0.062051
AUC of ROC = 0.9144
AUC of PRC = 0.734828
min(+P, Se) = 0.644055

-------------------------------

confusion matrix:
[[3968   34]
 [ 254  217]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10943999886512756
difference in average predicted and observed risk = 0.004141998865127561
number samples = 4473
accuracy = 0.935614
precision class 0 = 0.939839
precision class 1 = 0.864542
recall class 0 = 0.991504
recall class 1 = 0.460722
false negative rate = 0.539278
false positive rate = 0.008496
positive prediction rate = 0.056114
AUC of ROC = 0.938043
AUC of PRC = 0.746599
min(+P, Se) = 0.649682

-------------------------------

confusion matrix:
[[1183   12]
 [  82   61]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11761800199747086
difference in average predicted and observed risk = 0.010742001997470857
number samples = 1338
accuracy = 0.929746
precision class 0 = 0.935178
precision class 1 = 0.835616
recall class 0 = 0.989958
recall class 1 = 0.426573
false negative rate = 0.573427
false positive rate = 0.010042
positive prediction rate = 0.054559
AUC of ROC = 0.936226
AUC of PRC = 0.725666
min(+P, Se) = 0.62585

-------------------------------

confusion matrix:
[[347   3]
 [ 20  19]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10539200156927109
difference in average predicted and observed risk = 0.005135001569271089
number samples = 389
accuracy = 0.940874
precision class 0 = 0.945504
precision class 1 = 0.863636
recall class 0 = 0.991429
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.008571
positive prediction rate = 0.056555
AUC of ROC = 0.936703
AUC of PRC = 0.721829
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16862399876117706
difference in average predicted and observed risk = 0.0032099987611770575
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.968878
AUC of PRC = 0.905563
min(+P, Se) = 0.869565

-------------------------------

confusion matrix:
[[6929   57]
 [ 636  437]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12084399908781052
difference in average predicted and observed risk = -0.012299000912189495
number samples = 8059
accuracy = 0.914009
precision class 0 = 0.915929
precision class 1 = 0.884615
recall class 0 = 0.991841
recall class 1 = 0.407269
false negative rate = 0.592731
false positive rate = 0.008159
positive prediction rate = 0.061298
AUC of ROC = 0.930111
AUC of PRC = 0.748812
min(+P, Se) = 0.667288

-------------------------------

confusion matrix:
[[5664   44]
 [ 571  343]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.1318269968032837
difference in average predicted and observed risk = -0.006198003196716317
number samples = 6622
accuracy = 0.907128
precision class 0 = 0.90842
precision class 1 = 0.886305
recall class 0 = 0.992292
recall class 1 = 0.375274
false negative rate = 0.624726
false positive rate = 0.007708
positive prediction rate = 0.058442
AUC of ROC = 0.918142
AUC of PRC = 0.721629
min(+P, Se) = 0.623094

-------------------------------

confusion matrix:
[[8979   67]
 [ 862  501]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.1220719963312149
difference in average predicted and observed risk = -0.0088720036687851
number samples = 10409
accuracy = 0.91075
precision class 0 = 0.912407
precision class 1 = 0.882042
recall class 0 = 0.992593
recall class 1 = 0.367572
false negative rate = 0.632428
false positive rate = 0.007407
positive prediction rate = 0.054568
AUC of ROC = 0.923285
AUC of PRC = 0.725396
min(+P, Se) = 0.640614

-------------------------------

confusion matrix:
[[1624   17]
 [ 228  179]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.15044599771499634
difference in average predicted and observed risk = -0.04828400228500365
number samples = 2048
accuracy = 0.880371
precision class 0 = 0.87689
precision class 1 = 0.913265
recall class 0 = 0.98964
recall class 1 = 0.439803
false negative rate = 0.560197
false positive rate = 0.01036
positive prediction rate = 0.095703
AUC of ROC = 0.934242
AUC of PRC = 0.804325
min(+P, Se) = 0.710462

-------------------------------

confusion matrix:
[[1274    8]
 [  73   53]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11581599712371826
difference in average predicted and observed risk = 0.026326997123718263
number samples = 1408
accuracy = 0.942472
precision class 0 = 0.945805
precision class 1 = 0.868852
recall class 0 = 0.99376
recall class 1 = 0.420635
false negative rate = 0.579365
false positive rate = 0.00624
positive prediction rate = 0.043324
AUC of ROC = 0.926423
AUC of PRC = 0.705276
min(+P, Se) = 0.626984

-------------------------------

confusion matrix:
[[290   6]
 [ 27  25]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1545110046863556
difference in average predicted and observed risk = 0.0050860046863555886
number samples = 348
accuracy = 0.905172
precision class 0 = 0.914827
precision class 1 = 0.806452
recall class 0 = 0.97973
recall class 1 = 0.480769
false negative rate = 0.519231
false positive rate = 0.02027
positive prediction rate = 0.08908
AUC of ROC = 0.901507
AUC of PRC = 0.731382
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[426   3]
 [ 17  22]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.1094990000128746
difference in average predicted and observed risk = 0.0261660000128746
number samples = 468
accuracy = 0.957265
precision class 0 = 0.961625
precision class 1 = 0.88
recall class 0 = 0.993007
recall class 1 = 0.564103
false negative rate = 0.435897
false positive rate = 0.006993
positive prediction rate = 0.053419
AUC of ROC = 0.920328
AUC of PRC = 0.718447
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[12593   101]
 [ 1207   780]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12579800188541412
difference in average predicted and observed risk = -0.00954699811458587
number samples = 14681
accuracy = 0.910905
precision class 0 = 0.912536
precision class 1 = 0.885358
recall class 0 = 0.992043
recall class 1 = 0.392552
false negative rate = 0.607448
false positive rate = 0.007957
positive prediction rate = 0.06001
AUC of ROC = 0.924803
AUC of PRC = 0.736695
min(+P, Se) = 0.646881

-------------------------------

==>predicting on validation



confusion matrix:
[[1508   27]
 [ 199   79]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13779999315738678
difference in average predicted and observed risk = -0.015537006842613221
number samples = 1813
accuracy = 0.875345
precision class 0 = 0.883421
precision class 1 = 0.745283
recall class 0 = 0.98241
recall class 1 = 0.284173
false negative rate = 0.715827
false positive rate = 0.01759
positive prediction rate = 0.058467
AUC of ROC = 0.849223
AUC of PRC = 0.574086
min(+P, Se) = 0.529825

-------------------------------

confusion matrix:
[[890  17]
 [ 81  32]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.11138100177049637
difference in average predicted and observed risk = 0.0005970017704963748
number samples = 1020
accuracy = 0.903922
precision class 0 = 0.916581
precision class 1 = 0.653061
recall class 0 = 0.981257
recall class 1 = 0.283186
false negative rate = 0.716814
false positive rate = 0.018743
positive prediction rate = 0.048039
AUC of ROC = 0.862027
AUC of PRC = 0.524153
min(+P, Se) = 0.522124

-------------------------------

confusion matrix:
[[246   5]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12934599816799164
difference in average predicted and observed risk = 0.010047998167991637
number samples = 285
accuracy = 0.912281
precision class 0 = 0.924812
precision class 1 = 0.736842
recall class 0 = 0.98008
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.01992
positive prediction rate = 0.066667
AUC of ROC = 0.876963
AUC of PRC = 0.618835
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.10097800195217133
difference in average predicted and observed risk = 0.011234001952171321
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.810865
AUC of PRC = 0.418267
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[20  2]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18403500318527222
difference in average predicted and observed risk = 0.030189003185272206
number samples = 26
accuracy = 0.884615
precision class 0 = 0.952381
precision class 1 = 0.6
recall class 0 = 0.909091
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.090909
positive prediction rate = 0.192308
AUC of ROC = 0.943182
AUC of PRC = 0.54375
min(+P, Se) = 0.75

-------------------------------

confusion matrix:
[[1499   30]
 [ 173   71]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12613900005817413
difference in average predicted and observed risk = -0.011480999941825859
number samples = 1773
accuracy = 0.885505
precision class 0 = 0.896531
precision class 1 = 0.70297
recall class 0 = 0.980379
recall class 1 = 0.290984
false negative rate = 0.709016
false positive rate = 0.019621
positive prediction rate = 0.056966
AUC of ROC = 0.85682
AUC of PRC = 0.561379
min(+P, Se) = 0.520492

-------------------------------

confusion matrix:
[[1234   23]
 [ 134   58]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.13065500557422638
difference in average predicted and observed risk = -0.0018499944257736323
number samples = 1449
accuracy = 0.891649
precision class 0 = 0.902047
precision class 1 = 0.716049
recall class 0 = 0.981702
recall class 1 = 0.302083
false negative rate = 0.697917
false positive rate = 0.018298
positive prediction rate = 0.055901
AUC of ROC = 0.858596
AUC of PRC = 0.563382
min(+P, Se) = 0.538071

-------------------------------

confusion matrix:
[[1942   36]
 [ 226   85]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1266549974679947
difference in average predicted and observed risk = -0.009212002532005298
number samples = 2289
accuracy = 0.88554
precision class 0 = 0.895756
precision class 1 = 0.702479
recall class 0 = 0.9818
recall class 1 = 0.273312
false negative rate = 0.726688
false positive rate = 0.0182
positive prediction rate = 0.052862
AUC of ROC = 0.853051
AUC of PRC = 0.550586
min(+P, Se) = 0.524116

-------------------------------

confusion matrix:
[[360   8]
 [ 55  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14073100686073303
difference in average predicted and observed risk = -0.039669993139266974
number samples = 449
accuracy = 0.859688
precision class 0 = 0.86747
precision class 1 = 0.764706
recall class 0 = 0.978261
recall class 1 = 0.320988
false negative rate = 0.679012
false positive rate = 0.021739
positive prediction rate = 0.075724
AUC of ROC = 0.857186
AUC of PRC = 0.6415
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[275   3]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11690399795770645
difference in average predicted and observed risk = 0.019500997957706448
number samples = 308
accuracy = 0.928571
precision class 0 = 0.935374
precision class 1 = 0.785714
recall class 0 = 0.989209
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.010791
positive prediction rate = 0.045455
AUC of ROC = 0.889089
AUC of PRC = 0.553552
min(+P, Se) = 0.566667

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11957599967718124
difference in average predicted and observed risk = 0.04741099967718124
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.901587
AUC of PRC = 0.398253
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[70  2]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15515999495983124
difference in average predicted and observed risk = 0.06655199495983123
number samples = 79
accuracy = 0.949367
precision class 0 = 0.972222
precision class 1 = 0.714286
recall class 0 = 0.972222
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.027778
positive prediction rate = 0.088608
AUC of ROC = 0.89881
AUC of PRC = 0.770626
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2733   53]
 [ 307  129]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12816999852657318
difference in average predicted and observed risk = -0.007150001473426815
number samples = 3222
accuracy = 0.888268
precision class 0 = 0.899013
precision class 1 = 0.708791
recall class 0 = 0.980976
recall class 1 = 0.295872
false negative rate = 0.704128
false positive rate = 0.019024
positive prediction rate = 0.056487
AUC of ROC = 0.856959
AUC of PRC = 0.560909
min(+P, Se) = 0.533181

-------------------------------

Epoch 00087: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch87.state
Epoch 88/100
 - 811s - loss: 0.2531 - val_loss: 0.2905

==>predicting on train



confusion matrix:
[[6973   63]
 [ 820  492]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13252300024032593
difference in average predicted and observed risk = -0.02463999975967407
number samples = 8348
accuracy = 0.894226
precision class 0 = 0.894777
precision class 1 = 0.886486
recall class 0 = 0.991046
recall class 1 = 0.375
false negative rate = 0.625
false positive rate = 0.008954
positive prediction rate = 0.066483
AUC of ROC = 0.915766
AUC of PRC = 0.734855
min(+P, Se) = 0.646341

-------------------------------

confusion matrix:
[[3958   44]
 [ 247  224]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10635499656200409
difference in average predicted and observed risk = 0.0010569965620040866
number samples = 4473
accuracy = 0.934943
precision class 0 = 0.94126
precision class 1 = 0.835821
recall class 0 = 0.989006
recall class 1 = 0.475584
false negative rate = 0.524416
false positive rate = 0.010995
positive prediction rate = 0.059915
AUC of ROC = 0.936398
AUC of PRC = 0.744603
min(+P, Se) = 0.651805

-------------------------------

confusion matrix:
[[1182   13]
 [  76   67]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11426600068807602
difference in average predicted and observed risk = 0.0073900006880760205
number samples = 1338
accuracy = 0.933483
precision class 0 = 0.939587
precision class 1 = 0.8375
recall class 0 = 0.989121
recall class 1 = 0.468531
false negative rate = 0.531469
false positive rate = 0.010879
positive prediction rate = 0.059791
AUC of ROC = 0.935454
AUC of PRC = 0.72403
min(+P, Se) = 0.636364

-------------------------------

confusion matrix:
[[347   3]
 [ 21  18]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10028199851512909
difference in average predicted and observed risk = 2.499851512909046e-05
number samples = 389
accuracy = 0.938303
precision class 0 = 0.942935
precision class 1 = 0.857143
recall class 0 = 0.991429
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.008571
positive prediction rate = 0.053985
AUC of ROC = 0.937289
AUC of PRC = 0.73336
min(+P, Se) = 0.7

-------------------------------

confusion matrix:
[[109   2]
 [  6  16]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.17475299537181854
difference in average predicted and observed risk = 0.009338995371818537
number samples = 133
accuracy = 0.93985
precision class 0 = 0.947826
precision class 1 = 0.888889
recall class 0 = 0.981982
recall class 1 = 0.727273
false negative rate = 0.272727
false positive rate = 0.018018
positive prediction rate = 0.135338
AUC of ROC = 0.970106
AUC of PRC = 0.904468
min(+P, Se) = 0.869565

-------------------------------

confusion matrix:
[[6914   72]
 [ 620  453]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11782199889421463
difference in average predicted and observed risk = -0.015321001105785381
number samples = 8059
accuracy = 0.914133
precision class 0 = 0.917706
precision class 1 = 0.862857
recall class 0 = 0.989694
recall class 1 = 0.422181
false negative rate = 0.577819
false positive rate = 0.010306
positive prediction rate = 0.065145
AUC of ROC = 0.928547
AUC of PRC = 0.741697
min(+P, Se) = 0.665424

-------------------------------

confusion matrix:
[[5655   53]
 [ 550  364]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12800300121307373
difference in average predicted and observed risk = -0.010021998786926278
number samples = 6622
accuracy = 0.90894
precision class 0 = 0.911362
precision class 1 = 0.872902
recall class 0 = 0.990715
recall class 1 = 0.398249
false negative rate = 0.601751
false positive rate = 0.009285
positive prediction rate = 0.062972
AUC of ROC = 0.921108
AUC of PRC = 0.729398
min(+P, Se) = 0.637856

-------------------------------

confusion matrix:
[[8970   76]
 [ 840  523]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11783599853515625
difference in average predicted and observed risk = -0.013108001464843755
number samples = 10409
accuracy = 0.911999
precision class 0 = 0.914373
precision class 1 = 0.873122
recall class 0 = 0.991598
recall class 1 = 0.383712
false negative rate = 0.616288
false positive rate = 0.008402
positive prediction rate = 0.057546
AUC of ROC = 0.923887
AUC of PRC = 0.725427
min(+P, Se) = 0.63783

-------------------------------

confusion matrix:
[[1615   26]
 [ 219  188]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1524440050125122
difference in average predicted and observed risk = -0.04628599498748778
number samples = 2048
accuracy = 0.880371
precision class 0 = 0.880589
precision class 1 = 0.878505
recall class 0 = 0.984156
recall class 1 = 0.461916
false negative rate = 0.538084
false positive rate = 0.015844
positive prediction rate = 0.104492
AUC of ROC = 0.933505
AUC of PRC = 0.802748
min(+P, Se) = 0.714988

-------------------------------

confusion matrix:
[[1272   10]
 [  66   60]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11202099919319153
difference in average predicted and observed risk = 0.02253199919319153
number samples = 1408
accuracy = 0.946023
precision class 0 = 0.950673
precision class 1 = 0.857143
recall class 0 = 0.9922
recall class 1 = 0.47619
false negative rate = 0.52381
false positive rate = 0.0078
positive prediction rate = 0.049716
AUC of ROC = 0.926423
AUC of PRC = 0.714519
min(+P, Se) = 0.634921

-------------------------------

confusion matrix:
[[286  10]
 [ 27  25]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.15053099393844604
difference in average predicted and observed risk = 0.0011059939384460427
number samples = 348
accuracy = 0.893678
precision class 0 = 0.913738
precision class 1 = 0.714286
recall class 0 = 0.966216
recall class 1 = 0.480769
false negative rate = 0.519231
false positive rate = 0.033784
positive prediction rate = 0.100575
AUC of ROC = 0.906575
AUC of PRC = 0.721033
min(+P, Se) = 0.679245

-------------------------------

confusion matrix:
[[426   3]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10319899767637253
difference in average predicted and observed risk = 0.019865997676372524
number samples = 468
accuracy = 0.955128
precision class 0 = 0.959459
precision class 1 = 0.875
recall class 0 = 0.993007
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.006993
positive prediction rate = 0.051282
AUC of ROC = 0.913633
AUC of PRC = 0.690476
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12569   125]
 [ 1170   817]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.1224140003323555
difference in average predicted and observed risk = -0.012930999667644494
number samples = 14681
accuracy = 0.911791
precision class 0 = 0.914841
precision class 1 = 0.867304
recall class 0 = 0.990153
recall class 1 = 0.411173
false negative rate = 0.588827
false positive rate = 0.009847
positive prediction rate = 0.064165
AUC of ROC = 0.925119
AUC of PRC = 0.736263
min(+P, Se) = 0.653421

-------------------------------

==>predicting on validation



confusion matrix:
[[1498   37]
 [ 195   83]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13402600586414337
difference in average predicted and observed risk = -0.01931099413585663
number samples = 1813
accuracy = 0.872035
precision class 0 = 0.88482
precision class 1 = 0.691667
recall class 0 = 0.975896
recall class 1 = 0.298561
false negative rate = 0.701439
false positive rate = 0.024104
positive prediction rate = 0.066189
AUC of ROC = 0.844487
AUC of PRC = 0.56456
min(+P, Se) = 0.528777

-------------------------------

confusion matrix:
[[886  21]
 [ 81  32]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10809300094842911
difference in average predicted and observed risk = -0.002690999051570886
number samples = 1020
accuracy = 0.9
precision class 0 = 0.916236
precision class 1 = 0.603774
recall class 0 = 0.976847
recall class 1 = 0.283186
false negative rate = 0.716814
false positive rate = 0.023153
positive prediction rate = 0.051961
AUC of ROC = 0.85389
AUC of PRC = 0.516465
min(+P, Se) = 0.513274

-------------------------------

confusion matrix:
[[242   9]
 [ 21  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1285800039768219
difference in average predicted and observed risk = 0.009282003976821898
number samples = 285
accuracy = 0.894737
precision class 0 = 0.920152
precision class 1 = 0.590909
recall class 0 = 0.964143
recall class 1 = 0.382353
false negative rate = 0.617647
false positive rate = 0.035857
positive prediction rate = 0.077193
AUC of ROC = 0.877314
AUC of PRC = 0.587268
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09469900280237198
difference in average predicted and observed risk = 0.0049550028023719744
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.804829
AUC of PRC = 0.424739
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1831739991903305
difference in average predicted and observed risk = 0.029327999190330495
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1491   38]
 [ 167   77]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.124160997569561
difference in average predicted and observed risk = -0.013459002430438988
number samples = 1773
accuracy = 0.884377
precision class 0 = 0.899276
precision class 1 = 0.669565
recall class 0 = 0.975147
recall class 1 = 0.315574
false negative rate = 0.684426
false positive rate = 0.024853
positive prediction rate = 0.064862
AUC of ROC = 0.849068
AUC of PRC = 0.545639
min(+P, Se) = 0.516393

-------------------------------

confusion matrix:
[[1225   32]
 [ 136   56]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.1255359947681427
difference in average predicted and observed risk = -0.0069690052318573115
number samples = 1449
accuracy = 0.884058
precision class 0 = 0.900073
precision class 1 = 0.636364
recall class 0 = 0.974543
recall class 1 = 0.291667
false negative rate = 0.708333
false positive rate = 0.025457
positive prediction rate = 0.060732
AUC of ROC = 0.857266
AUC of PRC = 0.560276
min(+P, Se) = 0.545918

-------------------------------

confusion matrix:
[[1931   47]
 [ 219   92]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.12241300195455551
difference in average predicted and observed risk = -0.013453998045444476
number samples = 2289
accuracy = 0.883792
precision class 0 = 0.89814
precision class 1 = 0.66187
recall class 0 = 0.976239
recall class 1 = 0.29582
false negative rate = 0.70418
false positive rate = 0.023761
positive prediction rate = 0.060725
AUC of ROC = 0.847677
AUC of PRC = 0.542669
min(+P, Se) = 0.514469

-------------------------------

confusion matrix:
[[356  12]
 [ 56  25]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14219699800014496
difference in average predicted and observed risk = -0.03820400199985505
number samples = 449
accuracy = 0.848552
precision class 0 = 0.864078
precision class 1 = 0.675676
recall class 0 = 0.967391
recall class 1 = 0.308642
false negative rate = 0.691358
false positive rate = 0.032609
positive prediction rate = 0.082405
AUC of ROC = 0.856045
AUC of PRC = 0.628469
min(+P, Se) = 0.578313

-------------------------------

confusion matrix:
[[273   5]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11110600084066391
difference in average predicted and observed risk = 0.013703000840663906
number samples = 308
accuracy = 0.918831
precision class 0 = 0.931741
precision class 1 = 0.666667
recall class 0 = 0.982014
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.017986
positive prediction rate = 0.048701
AUC of ROC = 0.876379
AUC of PRC = 0.526502
min(+P, Se) = 0.566667

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11868400126695633
difference in average predicted and observed risk = 0.04651900126695632
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.901587
AUC of PRC = 0.400618
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.155116006731987
difference in average predicted and observed risk = 0.066508006731987
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.904762
AUC of PRC = 0.768282
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2716   70]
 [ 303  133]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12477900087833405
difference in average predicted and observed risk = -0.01054099912166595
number samples = 3222
accuracy = 0.884233
precision class 0 = 0.899636
precision class 1 = 0.655172
recall class 0 = 0.974874
recall class 1 = 0.305046
false negative rate = 0.694954
false positive rate = 0.025126
positive prediction rate = 0.063004
AUC of ROC = 0.852119
AUC of PRC = 0.552372
min(+P, Se) = 0.527523

-------------------------------

Epoch 00088: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch88.state
Epoch 89/100
 - 812s - loss: 0.2557 - val_loss: 0.2906

==>predicting on train



confusion matrix:
[[6990   46]
 [ 876  436]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12172000110149384
difference in average predicted and observed risk = -0.03544299889850616
number samples = 8348
accuracy = 0.889554
precision class 0 = 0.888635
precision class 1 = 0.904564
recall class 0 = 0.993462
recall class 1 = 0.332317
false negative rate = 0.667683
false positive rate = 0.006538
positive prediction rate = 0.057738
AUC of ROC = 0.914423
AUC of PRC = 0.729446
min(+P, Se) = 0.650152

-------------------------------

confusion matrix:
[[3964   38]
 [ 261  210]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.09931500256061554
difference in average predicted and observed risk = -0.005982997439384463
number samples = 4473
accuracy = 0.933154
precision class 0 = 0.938225
precision class 1 = 0.846774
recall class 0 = 0.990505
recall class 1 = 0.44586
false negative rate = 0.55414
false positive rate = 0.009495
positive prediction rate = 0.055444
AUC of ROC = 0.934759
AUC of PRC = 0.737803
min(+P, Se) = 0.648536

-------------------------------

confusion matrix:
[[1182   13]
 [  81   62]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10823699831962585
difference in average predicted and observed risk = 0.0013609983196258557
number samples = 1338
accuracy = 0.929746
precision class 0 = 0.935867
precision class 1 = 0.826667
recall class 0 = 0.989121
recall class 1 = 0.433566
false negative rate = 0.566434
false positive rate = 0.010879
positive prediction rate = 0.056054
AUC of ROC = 0.937104
AUC of PRC = 0.722145
min(+P, Se) = 0.629371

-------------------------------

confusion matrix:
[[348   2]
 [ 25  14]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09218200296163559
difference in average predicted and observed risk = -0.00807499703836441
number samples = 389
accuracy = 0.930591
precision class 0 = 0.932976
precision class 1 = 0.875
recall class 0 = 0.994286
recall class 1 = 0.358974
false negative rate = 0.641026
false positive rate = 0.005714
positive prediction rate = 0.041131
AUC of ROC = 0.929304
AUC of PRC = 0.738782
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1687619984149933
difference in average predicted and observed risk = 0.0033479984149932807
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.969697
AUC of PRC = 0.904712
min(+P, Se) = 0.869565

-------------------------------

confusion matrix:
[[6927   59]
 [ 673  400]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.10937199741601944
difference in average predicted and observed risk = -0.02377100258398057
number samples = 8059
accuracy = 0.90917
precision class 0 = 0.911447
precision class 1 = 0.87146
recall class 0 = 0.991555
recall class 1 = 0.372787
false negative rate = 0.627213
false positive rate = 0.008445
positive prediction rate = 0.056955
AUC of ROC = 0.927265
AUC of PRC = 0.735702
min(+P, Se) = 0.664492

-------------------------------

confusion matrix:
[[5666   42]
 [ 577  337]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11809899657964706
difference in average predicted and observed risk = -0.019926003420352945
number samples = 6622
accuracy = 0.906524
precision class 0 = 0.907577
precision class 1 = 0.889182
recall class 0 = 0.992642
recall class 1 = 0.368709
false negative rate = 0.631291
false positive rate = 0.007358
positive prediction rate = 0.057233
AUC of ROC = 0.919176
AUC of PRC = 0.723346
min(+P, Se) = 0.628415

-------------------------------

confusion matrix:
[[8985   61]
 [ 892  471]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10866300016641617
difference in average predicted and observed risk = -0.022280999833583837
number samples = 10409
accuracy = 0.908445
precision class 0 = 0.909689
precision class 1 = 0.885338
recall class 0 = 0.993257
recall class 1 = 0.345561
false negative rate = 0.654439
false positive rate = 0.006743
positive prediction rate = 0.05111
AUC of ROC = 0.922329
AUC of PRC = 0.717034
min(+P, Se) = 0.638298

-------------------------------

confusion matrix:
[[1621   20]
 [ 237  170]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14250700175762177
difference in average predicted and observed risk = -0.056222998242378225
number samples = 2048
accuracy = 0.874512
precision class 0 = 0.872443
precision class 1 = 0.894737
recall class 0 = 0.987812
recall class 1 = 0.41769
false negative rate = 0.58231
false positive rate = 0.012188
positive prediction rate = 0.092773
AUC of ROC = 0.932141
AUC of PRC = 0.801108
min(+P, Se) = 0.703431

-------------------------------

confusion matrix:
[[1276    6]
 [  72   54]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10307899862527847
difference in average predicted and observed risk = 0.013589998625278474
number samples = 1408
accuracy = 0.944602
precision class 0 = 0.946588
precision class 1 = 0.9
recall class 0 = 0.99532
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.00468
positive prediction rate = 0.042614
AUC of ROC = 0.924814
AUC of PRC = 0.717079
min(+P, Se) = 0.648438

-------------------------------

confusion matrix:
[[287   9]
 [ 29  23]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14366699755191803
difference in average predicted and observed risk = -0.0057580024480819725
number samples = 348
accuracy = 0.890805
precision class 0 = 0.908228
precision class 1 = 0.71875
recall class 0 = 0.969595
recall class 1 = 0.442308
false negative rate = 0.557692
false positive rate = 0.030405
positive prediction rate = 0.091954
AUC of ROC = 0.904886
AUC of PRC = 0.725588
min(+P, Se) = 0.679245

-------------------------------

confusion matrix:
[[424   5]
 [ 20  19]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.09705600142478943
difference in average predicted and observed risk = 0.013723001424789424
number samples = 468
accuracy = 0.946581
precision class 0 = 0.954955
precision class 1 = 0.791667
recall class 0 = 0.988345
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.011655
positive prediction rate = 0.051282
AUC of ROC = 0.91459
AUC of PRC = 0.679544
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[12593   101]
 [ 1250   737]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11330799758434296
difference in average predicted and observed risk = -0.022037002415657037
number samples = 14681
accuracy = 0.907976
precision class 0 = 0.909702
precision class 1 = 0.879475
recall class 0 = 0.992043
recall class 1 = 0.370911
false negative rate = 0.629089
false positive rate = 0.007957
positive prediction rate = 0.057081
AUC of ROC = 0.923576
AUC of PRC = 0.730103
min(+P, Se) = 0.648213

-------------------------------

==>predicting on validation



confusion matrix:
[[1504   31]
 [ 199   79]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12314099818468094
difference in average predicted and observed risk = -0.030196001815319062
number samples = 1813
accuracy = 0.873138
precision class 0 = 0.883147
precision class 1 = 0.718182
recall class 0 = 0.979805
recall class 1 = 0.284173
false negative rate = 0.715827
false positive rate = 0.020195
positive prediction rate = 0.060673
AUC of ROC = 0.851234
AUC of PRC = 0.573491
min(+P, Se) = 0.517857

-------------------------------

confusion matrix:
[[886  21]
 [ 82  31]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10052900016307831
difference in average predicted and observed risk = -0.010254999836921685
number samples = 1020
accuracy = 0.89902
precision class 0 = 0.915289
precision class 1 = 0.596154
recall class 0 = 0.976847
recall class 1 = 0.274336
false negative rate = 0.725664
false positive rate = 0.023153
positive prediction rate = 0.05098
AUC of ROC = 0.851441
AUC of PRC = 0.500651
min(+P, Se) = 0.482456

-------------------------------

confusion matrix:
[[243   8]
 [ 22  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12010099738836288
difference in average predicted and observed risk = 0.0008029973883628833
number samples = 285
accuracy = 0.894737
precision class 0 = 0.916981
precision class 1 = 0.6
recall class 0 = 0.968127
recall class 1 = 0.352941
false negative rate = 0.647059
false positive rate = 0.031873
positive prediction rate = 0.070175
AUC of ROC = 0.873213
AUC of PRC = 0.588266
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08795200288295746
difference in average predicted and observed risk = -0.0017919971170425458
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.794769
AUC of PRC = 0.391892
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18514899909496307
difference in average predicted and observed risk = 0.03130299909496306
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1495   34]
 [ 170   74]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11595399677753448
difference in average predicted and observed risk = -0.021666003222465507
number samples = 1773
accuracy = 0.884941
precision class 0 = 0.897898
precision class 1 = 0.685185
recall class 0 = 0.977763
recall class 1 = 0.303279
false negative rate = 0.696721
false positive rate = 0.022237
positive prediction rate = 0.060914
AUC of ROC = 0.850336
AUC of PRC = 0.548763
min(+P, Se) = 0.504098

-------------------------------

confusion matrix:
[[1228   29]
 [ 139   53]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11463800072669983
difference in average predicted and observed risk = -0.017866999273300183
number samples = 1449
accuracy = 0.884058
precision class 0 = 0.898317
precision class 1 = 0.646341
recall class 0 = 0.976929
recall class 1 = 0.276042
false negative rate = 0.723958
false positive rate = 0.023071
positive prediction rate = 0.056591
AUC of ROC = 0.862097
AUC of PRC = 0.557832
min(+P, Se) = 0.533679

-------------------------------

confusion matrix:
[[1938   40]
 [ 223   88]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11290500313043594
difference in average predicted and observed risk = -0.022961996869564044
number samples = 2289
accuracy = 0.885103
precision class 0 = 0.896807
precision class 1 = 0.6875
recall class 0 = 0.979778
recall class 1 = 0.282958
false negative rate = 0.717042
false positive rate = 0.020222
positive prediction rate = 0.05592
AUC of ROC = 0.849952
AUC of PRC = 0.546095
min(+P, Se) = 0.511254

-------------------------------

confusion matrix:
[[357  11]
 [ 57  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13301199674606323
difference in average predicted and observed risk = -0.04738900325393677
number samples = 449
accuracy = 0.848552
precision class 0 = 0.862319
precision class 1 = 0.685714
recall class 0 = 0.970109
recall class 1 = 0.296296
false negative rate = 0.703704
false positive rate = 0.029891
positive prediction rate = 0.077951
AUC of ROC = 0.857119
AUC of PRC = 0.622916
min(+P, Se) = 0.527473

-------------------------------

confusion matrix:
[[272   6]
 [ 21   9]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.1003429964184761
difference in average predicted and observed risk = 0.0029399964184761013
number samples = 308
accuracy = 0.912338
precision class 0 = 0.928328
precision class 1 = 0.6
recall class 0 = 0.978417
recall class 1 = 0.3
false negative rate = 0.7
false positive rate = 0.021583
positive prediction rate = 0.048701
AUC of ROC = 0.88705
AUC of PRC = 0.517913
min(+P, Se) = 0.514286

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11170200258493423
difference in average predicted and observed risk = 0.03953700258493423
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.901587
AUC of PRC = 0.418098
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14928700029850006
difference in average predicted and observed risk = 0.060679000298500055
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.918651
AUC of PRC = 0.762337
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2723   63]
 [ 309  127]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.1153620034456253
difference in average predicted and observed risk = -0.01995799655437469
number samples = 3222
accuracy = 0.884544
precision class 0 = 0.898087
precision class 1 = 0.668421
recall class 0 = 0.977387
recall class 1 = 0.291284
false negative rate = 0.708716
false positive rate = 0.022613
positive prediction rate = 0.05897
AUC of ROC = 0.854983
AUC of PRC = 0.553365
min(+P, Se) = 0.518349

-------------------------------

Epoch 00089: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch89.state
Epoch 90/100
 - 818s - loss: 0.2532 - val_loss: 0.2890

==>predicting on train



confusion matrix:
[[6975   61]
 [ 817  495]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12932999432086945
difference in average predicted and observed risk = -0.02783300567913055
number samples = 8348
accuracy = 0.894825
precision class 0 = 0.895149
precision class 1 = 0.890288
recall class 0 = 0.99133
recall class 1 = 0.377287
false negative rate = 0.622713
false positive rate = 0.00867
positive prediction rate = 0.066603
AUC of ROC = 0.916498
AUC of PRC = 0.732794
min(+P, Se) = 0.644817

-------------------------------

confusion matrix:
[[3962   40]
 [ 242  229]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10488999634981155
difference in average predicted and observed risk = -0.00040800365018844875
number samples = 4473
accuracy = 0.936955
precision class 0 = 0.942436
precision class 1 = 0.851301
recall class 0 = 0.990005
recall class 1 = 0.4862
false negative rate = 0.5138
false positive rate = 0.009995
positive prediction rate = 0.060139
AUC of ROC = 0.936872
AUC of PRC = 0.746714
min(+P, Se) = 0.653277

-------------------------------

confusion matrix:
[[1178   17]
 [  84   59]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.1128930002450943
difference in average predicted and observed risk = 0.0060170002450943005
number samples = 1338
accuracy = 0.924514
precision class 0 = 0.933439
precision class 1 = 0.776316
recall class 0 = 0.985774
recall class 1 = 0.412587
false negative rate = 0.587413
false positive rate = 0.014226
positive prediction rate = 0.056801
AUC of ROC = 0.94003
AUC of PRC = 0.717476
min(+P, Se) = 0.643357

-------------------------------

confusion matrix:
[[348   2]
 [ 21  18]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09898500144481659
difference in average predicted and observed risk = -0.0012719985551834095
number samples = 389
accuracy = 0.940874
precision class 0 = 0.943089
precision class 1 = 0.9
recall class 0 = 0.994286
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.005714
positive prediction rate = 0.051414
AUC of ROC = 0.940806
AUC of PRC = 0.739575
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[108   3]
 [  6  16]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1718980073928833
difference in average predicted and observed risk = 0.006484007392883295
number samples = 133
accuracy = 0.932331
precision class 0 = 0.947368
precision class 1 = 0.842105
recall class 0 = 0.972973
recall class 1 = 0.727273
false negative rate = 0.272727
false positive rate = 0.027027
positive prediction rate = 0.142857
AUC of ROC = 0.965192
AUC of PRC = 0.88128
min(+P, Se) = 0.791667

-------------------------------

confusion matrix:
[[6916   70]
 [ 615  458]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11591800302267075
difference in average predicted and observed risk = -0.017224996977329265
number samples = 8059
accuracy = 0.915002
precision class 0 = 0.918338
precision class 1 = 0.867424
recall class 0 = 0.98998
recall class 1 = 0.426841
false negative rate = 0.573159
false positive rate = 0.01002
positive prediction rate = 0.065517
AUC of ROC = 0.930543
AUC of PRC = 0.746028
min(+P, Se) = 0.664492

-------------------------------

confusion matrix:
[[5655   53]
 [ 555  359]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12489599734544754
difference in average predicted and observed risk = -0.013129002654552469
number samples = 6622
accuracy = 0.908185
precision class 0 = 0.910628
precision class 1 = 0.871359
recall class 0 = 0.990715
recall class 1 = 0.392779
false negative rate = 0.607221
false positive rate = 0.009285
positive prediction rate = 0.062217
AUC of ROC = 0.92048
AUC of PRC = 0.721322
min(+P, Se) = 0.623362

-------------------------------

confusion matrix:
[[8977   69]
 [ 833  530]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11529900133609772
difference in average predicted and observed risk = -0.015644998663902288
number samples = 10409
accuracy = 0.913344
precision class 0 = 0.915087
precision class 1 = 0.884808
recall class 0 = 0.992372
recall class 1 = 0.388848
false negative rate = 0.611152
false positive rate = 0.007628
positive prediction rate = 0.057546
AUC of ROC = 0.924767
AUC of PRC = 0.724851
min(+P, Se) = 0.636097

-------------------------------

confusion matrix:
[[1617   24]
 [ 221  186]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14906999468803406
difference in average predicted and observed risk = -0.04966000531196593
number samples = 2048
accuracy = 0.880371
precision class 0 = 0.879761
precision class 1 = 0.885714
recall class 0 = 0.985375
recall class 1 = 0.457002
false negative rate = 0.542998
false positive rate = 0.014625
positive prediction rate = 0.102539
AUC of ROC = 0.934288
AUC of PRC = 0.801214
min(+P, Se) = 0.705882

-------------------------------

confusion matrix:
[[1267   15]
 [  69   57]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11061699688434601
difference in average predicted and observed risk = 0.02112799688434601
number samples = 1408
accuracy = 0.940341
precision class 0 = 0.948353
precision class 1 = 0.791667
recall class 0 = 0.9883
recall class 1 = 0.452381
false negative rate = 0.547619
false positive rate = 0.0117
positive prediction rate = 0.051136
AUC of ROC = 0.92825
AUC of PRC = 0.710834
min(+P, Se) = 0.661417

-------------------------------

confusion matrix:
[[286  10]
 [ 27  25]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14986899495124817
difference in average predicted and observed risk = 0.0004439949512481667
number samples = 348
accuracy = 0.893678
precision class 0 = 0.913738
precision class 1 = 0.714286
recall class 0 = 0.966216
recall class 1 = 0.480769
false negative rate = 0.519231
false positive rate = 0.033784
positive prediction rate = 0.100575
AUC of ROC = 0.90573
AUC of PRC = 0.719431
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[424   5]
 [ 20  19]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10234499722719193
difference in average predicted and observed risk = 0.01901199722719192
number samples = 468
accuracy = 0.946581
precision class 0 = 0.954955
precision class 1 = 0.791667
recall class 0 = 0.988345
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.011655
positive prediction rate = 0.051282
AUC of ROC = 0.915068
AUC of PRC = 0.688603
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12571   123]
 [ 1170   817]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11996699869632721
difference in average predicted and observed risk = -0.015378001303672784
number samples = 14681
accuracy = 0.911927
precision class 0 = 0.914853
precision class 1 = 0.869149
recall class 0 = 0.99031
recall class 1 = 0.411173
false negative rate = 0.588827
false positive rate = 0.00969
positive prediction rate = 0.064028
AUC of ROC = 0.925999
AUC of PRC = 0.734866
min(+P, Se) = 0.646556

-------------------------------

==>predicting on validation



confusion matrix:
[[1497   38]
 [ 197   81]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.130854994058609
difference in average predicted and observed risk = -0.022482005941390992
number samples = 1813
accuracy = 0.870381
precision class 0 = 0.883707
precision class 1 = 0.680672
recall class 0 = 0.975244
recall class 1 = 0.291367
false negative rate = 0.708633
false positive rate = 0.024756
positive prediction rate = 0.065637
AUC of ROC = 0.84804
AUC of PRC = 0.569145
min(+P, Se) = 0.530035

-------------------------------

confusion matrix:
[[882  25]
 [ 81  32]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10642199963331223
difference in average predicted and observed risk = -0.004362000366687768
number samples = 1020
accuracy = 0.896078
precision class 0 = 0.915888
precision class 1 = 0.561404
recall class 0 = 0.972437
recall class 1 = 0.283186
false negative rate = 0.716814
false positive rate = 0.027563
positive prediction rate = 0.055882
AUC of ROC = 0.856173
AUC of PRC = 0.495761
min(+P, Se) = 0.517544

-------------------------------

confusion matrix:
[[242   9]
 [ 23  11]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12248300015926361
difference in average predicted and observed risk = 0.0031850001592636096
number samples = 285
accuracy = 0.887719
precision class 0 = 0.913208
precision class 1 = 0.55
recall class 0 = 0.964143
recall class 1 = 0.323529
false negative rate = 0.676471
false positive rate = 0.035857
positive prediction rate = 0.070175
AUC of ROC = 0.879072
AUC of PRC = 0.568877
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.09521099925041199
difference in average predicted and observed risk = 0.005466999250411983
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.802817
AUC of PRC = 0.374964
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.16913600265979767
difference in average predicted and observed risk = 0.015290002659797658
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1486   43]
 [ 171   73]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12131600081920624
difference in average predicted and observed risk = -0.016303999180793755
number samples = 1773
accuracy = 0.879301
precision class 0 = 0.896801
precision class 1 = 0.62931
recall class 0 = 0.971877
recall class 1 = 0.29918
false negative rate = 0.70082
false positive rate = 0.028123
positive prediction rate = 0.065426
AUC of ROC = 0.853488
AUC of PRC = 0.547444
min(+P, Se) = 0.512295

-------------------------------

confusion matrix:
[[1225   32]
 [ 137   55]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12245000153779984
difference in average predicted and observed risk = -0.010054998462200176
number samples = 1449
accuracy = 0.883368
precision class 0 = 0.899413
precision class 1 = 0.632184
recall class 0 = 0.974543
recall class 1 = 0.286458
false negative rate = 0.713542
false positive rate = 0.025457
positive prediction rate = 0.060041
AUC of ROC = 0.857668
AUC of PRC = 0.549812
min(+P, Se) = 0.541667

-------------------------------

confusion matrix:
[[1928   50]
 [ 224   87]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11911000311374664
difference in average predicted and observed risk = -0.016756996886253345
number samples = 2289
accuracy = 0.880297
precision class 0 = 0.895911
precision class 1 = 0.635036
recall class 0 = 0.974722
recall class 1 = 0.279743
false negative rate = 0.720257
false positive rate = 0.025278
positive prediction rate = 0.059851
AUC of ROC = 0.851648
AUC of PRC = 0.542353
min(+P, Se) = 0.524116

-------------------------------

confusion matrix:
[[355  13]
 [ 56  25]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1396239995956421
difference in average predicted and observed risk = -0.040777000404357916
number samples = 449
accuracy = 0.846325
precision class 0 = 0.863747
precision class 1 = 0.657895
recall class 0 = 0.964674
recall class 1 = 0.308642
false negative rate = 0.691358
false positive rate = 0.035326
positive prediction rate = 0.084633
AUC of ROC = 0.854402
AUC of PRC = 0.619379
min(+P, Se) = 0.54321

-------------------------------

confusion matrix:
[[272   6]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10868600010871887
difference in average predicted and observed risk = 0.011283000108718869
number samples = 308
accuracy = 0.915584
precision class 0 = 0.931507
precision class 1 = 0.625
recall class 0 = 0.978417
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.021583
positive prediction rate = 0.051948
AUC of ROC = 0.88705
AUC of PRC = 0.530049
min(+P, Se) = 0.566667

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11562199890613556
difference in average predicted and observed risk = 0.04345699890613555
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.877778
AUC of PRC = 0.366381
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15820099413394928
difference in average predicted and observed risk = 0.06959299413394927
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.894841
AUC of PRC = 0.733754
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[2711   75]
 [ 308  128]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12182600051164627
difference in average predicted and observed risk = -0.013493999488353725
number samples = 3222
accuracy = 0.88113
precision class 0 = 0.897979
precision class 1 = 0.630542
recall class 0 = 0.97308
recall class 1 = 0.293578
false negative rate = 0.706422
false positive rate = 0.02692
positive prediction rate = 0.063004
AUC of ROC = 0.855006
AUC of PRC = 0.548557
min(+P, Se) = 0.529817

-------------------------------

Epoch 00090: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch90.state
Epoch 91/100
 - 819s - loss: 0.2570 - val_loss: 0.2873

==>predicting on train



confusion matrix:
[[6999   37]
 [ 886  426]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12755200266838074
difference in average predicted and observed risk = -0.02961099733161926
number samples = 8348
accuracy = 0.889435
precision class 0 = 0.887635
precision class 1 = 0.920086
recall class 0 = 0.994741
recall class 1 = 0.324695
false negative rate = 0.675305
false positive rate = 0.005259
positive prediction rate = 0.055462
AUC of ROC = 0.916799
AUC of PRC = 0.735531
min(+P, Se) = 0.645358

-------------------------------

confusion matrix:
[[3980   22]
 [ 263  208]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10338699817657471
difference in average predicted and observed risk = -0.0019110018234252957
number samples = 4473
accuracy = 0.936284
precision class 0 = 0.938016
precision class 1 = 0.904348
recall class 0 = 0.994503
recall class 1 = 0.441614
false negative rate = 0.558386
false positive rate = 0.005497
positive prediction rate = 0.05142
AUC of ROC = 0.937509
AUC of PRC = 0.751332
min(+P, Se) = 0.658898

-------------------------------

confusion matrix:
[[1186    9]
 [  86   57]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11034400016069412
difference in average predicted and observed risk = 0.0034680001606941235
number samples = 1338
accuracy = 0.928999
precision class 0 = 0.93239
precision class 1 = 0.863636
recall class 0 = 0.992469
recall class 1 = 0.398601
false negative rate = 0.601399
false positive rate = 0.007531
positive prediction rate = 0.049327
AUC of ROC = 0.938602
AUC of PRC = 0.720657
min(+P, Se) = 0.629371

-------------------------------

confusion matrix:
[[349   1]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09700000286102295
difference in average predicted and observed risk = -0.0032569971389770497
number samples = 389
accuracy = 0.940874
precision class 0 = 0.940701
precision class 1 = 0.944444
recall class 0 = 0.997143
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.002857
positive prediction rate = 0.046272
AUC of ROC = 0.941026
AUC of PRC = 0.753634
min(+P, Se) = 0.725

-------------------------------

confusion matrix:
[[110   1]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.1633860021829605
difference in average predicted and observed risk = -0.0020279978170394952
number samples = 133
accuracy = 0.932331
precision class 0 = 0.932203
precision class 1 = 0.933333
recall class 0 = 0.990991
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.009009
positive prediction rate = 0.112782
AUC of ROC = 0.971335
AUC of PRC = 0.905662
min(+P, Se) = 0.863636

-------------------------------

confusion matrix:
[[6940   46]
 [ 670  403]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11403600126504898
difference in average predicted and observed risk = -0.01910699873495103
number samples = 8059
accuracy = 0.911155
precision class 0 = 0.911958
precision class 1 = 0.89755
recall class 0 = 0.993415
recall class 1 = 0.375582
false negative rate = 0.624418
false positive rate = 0.006585
positive prediction rate = 0.055714
AUC of ROC = 0.930502
AUC of PRC = 0.747233
min(+P, Se) = 0.66822

-------------------------------

confusion matrix:
[[5684   24]
 [ 595  319]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12312699854373932
difference in average predicted and observed risk = -0.01489800145626069
number samples = 6622
accuracy = 0.906524
precision class 0 = 0.90524
precision class 1 = 0.930029
recall class 0 = 0.995795
recall class 1 = 0.349015
false negative rate = 0.650985
false positive rate = 0.004205
positive prediction rate = 0.051797
AUC of ROC = 0.921631
AUC of PRC = 0.728689
min(+P, Se) = 0.625821

-------------------------------

confusion matrix:
[[9008   38]
 [ 900  463]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11385399848222733
difference in average predicted and observed risk = -0.01709000151777268
number samples = 10409
accuracy = 0.909886
precision class 0 = 0.909164
precision class 1 = 0.924152
recall class 0 = 0.995799
recall class 1 = 0.339692
false negative rate = 0.660308
false positive rate = 0.004201
positive prediction rate = 0.048131
AUC of ROC = 0.925443
AUC of PRC = 0.727159
min(+P, Se) = 0.634164

-------------------------------

confusion matrix:
[[1624   17]
 [ 241  166]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14569999277591705
difference in average predicted and observed risk = -0.05303000722408294
number samples = 2048
accuracy = 0.874023
precision class 0 = 0.870777
precision class 1 = 0.907104
recall class 0 = 0.98964
recall class 1 = 0.407862
false negative rate = 0.592138
false positive rate = 0.01036
positive prediction rate = 0.089355
AUC of ROC = 0.933393
AUC of PRC = 0.805083
min(+P, Se) = 0.706311

-------------------------------

confusion matrix:
[[1274    8]
 [  73   53]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10909800231456757
difference in average predicted and observed risk = 0.019609002314567567
number samples = 1408
accuracy = 0.942472
precision class 0 = 0.945805
precision class 1 = 0.868852
recall class 0 = 0.99376
recall class 1 = 0.420635
false negative rate = 0.579365
false positive rate = 0.00624
positive prediction rate = 0.043324
AUC of ROC = 0.928757
AUC of PRC = 0.713363
min(+P, Se) = 0.650794

-------------------------------

confusion matrix:
[[292   4]
 [ 30  22]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14566899836063385
difference in average predicted and observed risk = -0.003756001639366152
number samples = 348
accuracy = 0.902299
precision class 0 = 0.906832
precision class 1 = 0.846154
recall class 0 = 0.986486
recall class 1 = 0.423077
false negative rate = 0.576923
false positive rate = 0.013514
positive prediction rate = 0.074713
AUC of ROC = 0.908849
AUC of PRC = 0.744129
min(+P, Se) = 0.673077

-------------------------------

confusion matrix:
[[426   3]
 [ 21  18]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.09947899729013443
difference in average predicted and observed risk = 0.016145997290134426
number samples = 468
accuracy = 0.948718
precision class 0 = 0.95302
precision class 1 = 0.857143
recall class 0 = 0.993007
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.006993
positive prediction rate = 0.044872
AUC of ROC = 0.915307
AUC of PRC = 0.690767
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12624    70]
 [ 1265   722]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11813600361347198
difference in average predicted and observed risk = -0.017208996386528008
number samples = 14681
accuracy = 0.909066
precision class 0 = 0.908921
precision class 1 = 0.911616
recall class 0 = 0.994486
recall class 1 = 0.363362
false negative rate = 0.636638
false positive rate = 0.005514
positive prediction rate = 0.053947
AUC of ROC = 0.926517
AUC of PRC = 0.738797
min(+P, Se) = 0.648241

-------------------------------

==>predicting on validation



confusion matrix:
[[1512   23]
 [ 205   73]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12853099405765533
difference in average predicted and observed risk = -0.024806005942344667
number samples = 1813
accuracy = 0.874242
precision class 0 = 0.880606
precision class 1 = 0.760417
recall class 0 = 0.985016
recall class 1 = 0.26259
false negative rate = 0.73741
false positive rate = 0.014984
positive prediction rate = 0.052951
AUC of ROC = 0.848729
AUC of PRC = 0.563706
min(+P, Se) = 0.517986

-------------------------------

confusion matrix:
[[890  17]
 [ 85  28]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10212100297212601
difference in average predicted and observed risk = -0.008662997027873987
number samples = 1020
accuracy = 0.9
precision class 0 = 0.912821
precision class 1 = 0.622222
recall class 0 = 0.981257
recall class 1 = 0.247788
false negative rate = 0.752212
false positive rate = 0.018743
positive prediction rate = 0.044118
AUC of ROC = 0.850504
AUC of PRC = 0.49131
min(+P, Se) = 0.495575

-------------------------------

confusion matrix:
[[246   5]
 [ 22  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1213190034031868
difference in average predicted and observed risk = 0.002021003403186797
number samples = 285
accuracy = 0.905263
precision class 0 = 0.91791
precision class 1 = 0.705882
recall class 0 = 0.98008
recall class 1 = 0.352941
false negative rate = 0.647059
false positive rate = 0.01992
positive prediction rate = 0.059649
AUC of ROC = 0.889384
AUC of PRC = 0.592108
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08841600269079208
difference in average predicted and observed risk = -0.0013279973092079206
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.814889
AUC of PRC = 0.396548
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[21  1]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1688620001077652
difference in average predicted and observed risk = 0.015016000107765187
number samples = 26
accuracy = 0.884615
precision class 0 = 0.913043
precision class 1 = 0.666667
recall class 0 = 0.954545
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.045455
positive prediction rate = 0.115385
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1503   26]
 [ 178   66]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11758299916982651
difference in average predicted and observed risk = -0.020037000830173485
number samples = 1773
accuracy = 0.884941
precision class 0 = 0.894111
precision class 1 = 0.717391
recall class 0 = 0.982995
recall class 1 = 0.270492
false negative rate = 0.729508
false positive rate = 0.017005
positive prediction rate = 0.051889
AUC of ROC = 0.853523
AUC of PRC = 0.542895
min(+P, Se) = 0.508197

-------------------------------

confusion matrix:
[[1235   22]
 [ 142   50]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12048199772834778
difference in average predicted and observed risk = -0.012023002271652233
number samples = 1449
accuracy = 0.886818
precision class 0 = 0.896877
precision class 1 = 0.694444
recall class 0 = 0.982498
recall class 1 = 0.260417
false negative rate = 0.739583
false positive rate = 0.017502
positive prediction rate = 0.049689
AUC of ROC = 0.858244
AUC of PRC = 0.54873
min(+P, Se) = 0.526042

-------------------------------

confusion matrix:
[[1946   32]
 [ 237   74]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11595799773931503
difference in average predicted and observed risk = -0.019909002260684955
number samples = 2289
accuracy = 0.882481
precision class 0 = 0.891434
precision class 1 = 0.698113
recall class 0 = 0.983822
recall class 1 = 0.237942
false negative rate = 0.762058
false positive rate = 0.016178
positive prediction rate = 0.046308
AUC of ROC = 0.851563
AUC of PRC = 0.537929
min(+P, Se) = 0.514469

-------------------------------

confusion matrix:
[[361   7]
 [ 57  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.134784996509552
difference in average predicted and observed risk = -0.045616003490448004
number samples = 449
accuracy = 0.857461
precision class 0 = 0.863636
precision class 1 = 0.774194
recall class 0 = 0.980978
recall class 1 = 0.296296
false negative rate = 0.703704
false positive rate = 0.019022
positive prediction rate = 0.069042
AUC of ROC = 0.852992
AUC of PRC = 0.617915
min(+P, Se) = 0.54321

-------------------------------

confusion matrix:
[[274   4]
 [ 18  12]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10957799851894379
difference in average predicted and observed risk = 0.012174998518943783
number samples = 308
accuracy = 0.928571
precision class 0 = 0.938356
precision class 1 = 0.75
recall class 0 = 0.985611
recall class 1 = 0.4
false negative rate = 0.6
false positive rate = 0.014388
positive prediction rate = 0.051948
AUC of ROC = 0.88801
AUC of PRC = 0.526949
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11721999943256378
difference in average predicted and observed risk = 0.045054999432563775
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.87619
AUC of PRC = 0.366744
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15172000229358673
difference in average predicted and observed risk = 0.06311200229358672
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.906746
AUC of PRC = 0.781463
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2738   48]
 [ 320  116]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11888699978590012
difference in average predicted and observed risk = -0.01643300021409988
number samples = 3222
accuracy = 0.885785
precision class 0 = 0.895356
precision class 1 = 0.707317
recall class 0 = 0.982771
recall class 1 = 0.266055
false negative rate = 0.733945
false positive rate = 0.017229
positive prediction rate = 0.0509
AUC of ROC = 0.85514
AUC of PRC = 0.546121
min(+P, Se) = 0.512586

-------------------------------

Epoch 00091: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch91.state
Epoch 92/100
 - 819s - loss: 0.2572 - val_loss: 0.2928

==>predicting on train



confusion matrix:
[[6991   45]
 [ 893  419]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12082599848508835
difference in average predicted and observed risk = -0.03633700151491165
number samples = 8348
accuracy = 0.887638
precision class 0 = 0.886733
precision class 1 = 0.903017
recall class 0 = 0.993604
recall class 1 = 0.31936
false negative rate = 0.68064
false positive rate = 0.006396
positive prediction rate = 0.055582
AUC of ROC = 0.914039
AUC of PRC = 0.724651
min(+P, Se) = 0.643293

-------------------------------

confusion matrix:
[[3971   31]
 [ 256  215]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10029900074005127
difference in average predicted and observed risk = -0.004998999259948733
number samples = 4473
accuracy = 0.935837
precision class 0 = 0.939437
precision class 1 = 0.873984
recall class 0 = 0.992254
recall class 1 = 0.456476
false negative rate = 0.543524
false positive rate = 0.007746
positive prediction rate = 0.054997
AUC of ROC = 0.933809
AUC of PRC = 0.739247
min(+P, Se) = 0.651805

-------------------------------

confusion matrix:
[[1180   15]
 [  85   58]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10776899755001068
difference in average predicted and observed risk = 0.0008929975500106824
number samples = 1338
accuracy = 0.925262
precision class 0 = 0.932806
precision class 1 = 0.794521
recall class 0 = 0.987448
recall class 1 = 0.405594
false negative rate = 0.594406
false positive rate = 0.012552
positive prediction rate = 0.054559
AUC of ROC = 0.934945
AUC of PRC = 0.713193
min(+P, Se) = 0.620915

-------------------------------

confusion matrix:
[[348   2]
 [ 24  15]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09401799738407135
difference in average predicted and observed risk = -0.006239002615928649
number samples = 389
accuracy = 0.933162
precision class 0 = 0.935484
precision class 1 = 0.882353
recall class 0 = 0.994286
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.005714
positive prediction rate = 0.043702
AUC of ROC = 0.938022
AUC of PRC = 0.754628
min(+P, Se) = 0.74359

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16641800105571747
difference in average predicted and observed risk = 0.0010040010557174628
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.959459
AUC of PRC = 0.891135
min(+P, Se) = 0.826087

-------------------------------

confusion matrix:
[[6929   57]
 [ 671  402]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.10988400131464005
difference in average predicted and observed risk = -0.023258998685359966
number samples = 8059
accuracy = 0.909666
precision class 0 = 0.911711
precision class 1 = 0.875817
recall class 0 = 0.991841
recall class 1 = 0.374651
false negative rate = 0.625349
false positive rate = 0.008159
positive prediction rate = 0.056955
AUC of ROC = 0.926498
AUC of PRC = 0.733455
min(+P, Se) = 0.666356

-------------------------------

confusion matrix:
[[5670   38]
 [ 594  320]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11697900295257568
difference in average predicted and observed risk = -0.021045997047424325
number samples = 6622
accuracy = 0.904561
precision class 0 = 0.905172
precision class 1 = 0.893855
recall class 0 = 0.993343
recall class 1 = 0.350109
false negative rate = 0.649891
false positive rate = 0.006657
positive prediction rate = 0.054062
AUC of ROC = 0.918775
AUC of PRC = 0.717808
min(+P, Se) = 0.629508

-------------------------------

confusion matrix:
[[8994   52]
 [ 902  461]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10831499844789505
difference in average predicted and observed risk = -0.022629001552104955
number samples = 10409
accuracy = 0.908349
precision class 0 = 0.908852
precision class 1 = 0.898636
recall class 0 = 0.994252
recall class 1 = 0.338225
false negative rate = 0.661775
false positive rate = 0.005748
positive prediction rate = 0.049284
AUC of ROC = 0.922293
AUC of PRC = 0.715138
min(+P, Se) = 0.638298

-------------------------------

confusion matrix:
[[1622   19]
 [ 241  166]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14196400344371796
difference in average predicted and observed risk = -0.05676599655628203
number samples = 2048
accuracy = 0.873047
precision class 0 = 0.870639
precision class 1 = 0.897297
recall class 0 = 0.988422
recall class 1 = 0.407862
false negative rate = 0.592138
false positive rate = 0.011578
positive prediction rate = 0.090332
AUC of ROC = 0.929846
AUC of PRC = 0.796078
min(+P, Se) = 0.705882

-------------------------------

confusion matrix:
[[1268   14]
 [  72   54]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10508300364017487
difference in average predicted and observed risk = 0.015594003640174867
number samples = 1408
accuracy = 0.93892
precision class 0 = 0.946269
precision class 1 = 0.794118
recall class 0 = 0.98908
recall class 1 = 0.428571
false negative rate = 0.571429
false positive rate = 0.01092
positive prediction rate = 0.048295
AUC of ROC = 0.925154
AUC of PRC = 0.705027
min(+P, Se) = 0.645669

-------------------------------

confusion matrix:
[[290   6]
 [ 29  23]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1402440071105957
difference in average predicted and observed risk = -0.0091809928894043
number samples = 348
accuracy = 0.899425
precision class 0 = 0.909091
precision class 1 = 0.793103
recall class 0 = 0.97973
recall class 1 = 0.442308
false negative rate = 0.557692
false positive rate = 0.02027
positive prediction rate = 0.083333
AUC of ROC = 0.903067
AUC of PRC = 0.725713
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[425   4]
 [ 21  18]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.09666399657726288
difference in average predicted and observed risk = 0.013330996577262874
number samples = 468
accuracy = 0.946581
precision class 0 = 0.952915
precision class 1 = 0.818182
recall class 0 = 0.990676
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.009324
positive prediction rate = 0.047009
AUC of ROC = 0.907896
AUC of PRC = 0.664654
min(+P, Se) = 0.589744

-------------------------------

confusion matrix:
[[12599    95]
 [ 1265   722]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11308400332927704
difference in average predicted and observed risk = -0.022260996670722955
number samples = 14681
accuracy = 0.907363
precision class 0 = 0.908756
precision class 1 = 0.883721
recall class 0 = 0.992516
recall class 1 = 0.363362
false negative rate = 0.636638
false positive rate = 0.007484
positive prediction rate = 0.05565
AUC of ROC = 0.922974
AUC of PRC = 0.726319
min(+P, Se) = 0.648717

-------------------------------

==>predicting on validation



confusion matrix:
[[1506   29]
 [ 202   76]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12198399752378464
difference in average predicted and observed risk = -0.031353002476215364
number samples = 1813
accuracy = 0.872587
precision class 0 = 0.881733
precision class 1 = 0.72381
recall class 0 = 0.981107
recall class 1 = 0.273381
false negative rate = 0.726619
false positive rate = 0.018893
positive prediction rate = 0.057915
AUC of ROC = 0.846955
AUC of PRC = 0.565296
min(+P, Se) = 0.510791

-------------------------------

confusion matrix:
[[887  20]
 [ 86  27]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10013999789953232
difference in average predicted and observed risk = -0.010644002100467675
number samples = 1020
accuracy = 0.896078
precision class 0 = 0.911614
precision class 1 = 0.574468
recall class 0 = 0.977949
recall class 1 = 0.238938
false negative rate = 0.761062
false positive rate = 0.022051
positive prediction rate = 0.046078
AUC of ROC = 0.844933
AUC of PRC = 0.473425
min(+P, Se) = 0.491228

-------------------------------

confusion matrix:
[[244   7]
 [ 23  11]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1215599998831749
difference in average predicted and observed risk = 0.002261999883174895
number samples = 285
accuracy = 0.894737
precision class 0 = 0.913858
precision class 1 = 0.611111
recall class 0 = 0.972112
recall class 1 = 0.323529
false negative rate = 0.676471
false positive rate = 0.027888
positive prediction rate = 0.063158
AUC of ROC = 0.894305
AUC of PRC = 0.599438
min(+P, Se) = 0.567568

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08504100143909454
difference in average predicted and observed risk = -0.004702998560905461
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.806841
AUC of PRC = 0.427155
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.1739709973335266
difference in average predicted and observed risk = 0.0201249973335266
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1493   36]
 [ 178   66]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11547599732875824
difference in average predicted and observed risk = -0.022144002671241753
number samples = 1773
accuracy = 0.879301
precision class 0 = 0.893477
precision class 1 = 0.647059
recall class 0 = 0.976455
recall class 1 = 0.270492
false negative rate = 0.729508
false positive rate = 0.023545
positive prediction rate = 0.05753
AUC of ROC = 0.848993
AUC of PRC = 0.537242
min(+P, Se) = 0.506024

-------------------------------

confusion matrix:
[[1234   23]
 [ 140   52]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11343199759721756
difference in average predicted and observed risk = -0.019073002402782452
number samples = 1449
accuracy = 0.887509
precision class 0 = 0.898108
precision class 1 = 0.693333
recall class 0 = 0.981702
recall class 1 = 0.270833
false negative rate = 0.729167
false positive rate = 0.018298
positive prediction rate = 0.05176
AUC of ROC = 0.857158
AUC of PRC = 0.55188
min(+P, Se) = 0.515306

-------------------------------

confusion matrix:
[[1939   39]
 [ 236   75]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1111380010843277
difference in average predicted and observed risk = -0.02472899891567229
number samples = 2289
accuracy = 0.87986
precision class 0 = 0.891494
precision class 1 = 0.657895
recall class 0 = 0.980283
recall class 1 = 0.241158
false negative rate = 0.758842
false positive rate = 0.019717
positive prediction rate = 0.049803
AUC of ROC = 0.849712
AUC of PRC = 0.532093
min(+P, Se) = 0.511254

-------------------------------

confusion matrix:
[[357  11]
 [ 55  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13446199893951416
difference in average predicted and observed risk = -0.045939001060485846
number samples = 449
accuracy = 0.853007
precision class 0 = 0.866505
precision class 1 = 0.702703
recall class 0 = 0.970109
recall class 1 = 0.320988
false negative rate = 0.679012
false positive rate = 0.029891
positive prediction rate = 0.082405
AUC of ROC = 0.849973
AUC of PRC = 0.62225
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[274   4]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10252200067043304
difference in average predicted and observed risk = 0.005119000670433041
number samples = 308
accuracy = 0.925325
precision class 0 = 0.935154
precision class 1 = 0.733333
recall class 0 = 0.985611
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.014388
positive prediction rate = 0.048701
AUC of ROC = 0.878657
AUC of PRC = 0.526809
min(+P, Se) = 0.566667

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11486099660396576
difference in average predicted and observed risk = 0.04269599660396575
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.888889
AUC of PRC = 0.388719
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14702199399471283
difference in average predicted and observed risk = 0.05841399399471282
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.902778
AUC of PRC = 0.792679
min(+P, Se) = 0.75

-------------------------------

confusion matrix:
[[2727   59]
 [ 318  118]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11455599963665009
difference in average predicted and observed risk = -0.02076400036334991
number samples = 3222
accuracy = 0.882992
precision class 0 = 0.895567
precision class 1 = 0.666667
recall class 0 = 0.978823
recall class 1 = 0.270642
false negative rate = 0.729358
false positive rate = 0.021177
positive prediction rate = 0.054935
AUC of ROC = 0.852343
AUC of PRC = 0.543488
min(+P, Se) = 0.513761

-------------------------------

Epoch 00092: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch92.state
Epoch 93/100
 - 811s - loss: 0.2544 - val_loss: 0.2924

==>predicting on train



confusion matrix:
[[6993   43]
 [ 873  439]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12352000176906586
difference in average predicted and observed risk = -0.03364299823093414
number samples = 8348
accuracy = 0.890273
precision class 0 = 0.889016
precision class 1 = 0.910788
recall class 0 = 0.993889
recall class 1 = 0.334604
false negative rate = 0.665396
false positive rate = 0.006111
positive prediction rate = 0.057738
AUC of ROC = 0.914916
AUC of PRC = 0.732938
min(+P, Se) = 0.64253

-------------------------------

confusion matrix:
[[3976   26]
 [ 259  212]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.09742599725723267
difference in average predicted and observed risk = -0.007872002742767337
number samples = 4473
accuracy = 0.936284
precision class 0 = 0.938843
precision class 1 = 0.890756
recall class 0 = 0.993503
recall class 1 = 0.450106
false negative rate = 0.549894
false positive rate = 0.006497
positive prediction rate = 0.053208
AUC of ROC = 0.941503
AUC of PRC = 0.761915
min(+P, Se) = 0.658174

-------------------------------

confusion matrix:
[[1185   10]
 [  78   65]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10309600085020065
difference in average predicted and observed risk = -0.0037799991497993457
number samples = 1338
accuracy = 0.93423
precision class 0 = 0.938242
precision class 1 = 0.866667
recall class 0 = 0.991632
recall class 1 = 0.454545
false negative rate = 0.545455
false positive rate = 0.008368
positive prediction rate = 0.056054
AUC of ROC = 0.941446
AUC of PRC = 0.737932
min(+P, Se) = 0.643357

-------------------------------

confusion matrix:
[[348   2]
 [ 19  20]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09168899804353714
difference in average predicted and observed risk = -0.008568001956462859
number samples = 389
accuracy = 0.946015
precision class 0 = 0.948229
precision class 1 = 0.909091
recall class 0 = 0.994286
recall class 1 = 0.512821
false negative rate = 0.487179
false positive rate = 0.005714
positive prediction rate = 0.056555
AUC of ROC = 0.931502
AUC of PRC = 0.75591
min(+P, Se) = 0.717949

-------------------------------

confusion matrix:
[[109   2]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.15373200178146362
difference in average predicted and observed risk = -0.011681998218536382
number samples = 133
accuracy = 0.924812
precision class 0 = 0.931624
precision class 1 = 0.875
recall class 0 = 0.981982
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.018018
positive prediction rate = 0.120301
AUC of ROC = 0.964373
AUC of PRC = 0.896871
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6939   47]
 [ 649  424]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1091269999742508
difference in average predicted and observed risk = -0.024016000025749218
number samples = 8059
accuracy = 0.913637
precision class 0 = 0.91447
precision class 1 = 0.900212
recall class 0 = 0.993272
recall class 1 = 0.395154
false negative rate = 0.604846
false positive rate = 0.006728
positive prediction rate = 0.058444
AUC of ROC = 0.930865
AUC of PRC = 0.752541
min(+P, Se) = 0.664492

-------------------------------

confusion matrix:
[[5672   36]
 [ 588  326]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11801999807357788
difference in average predicted and observed risk = -0.020005001926422128
number samples = 6622
accuracy = 0.905769
precision class 0 = 0.90607
precision class 1 = 0.900553
recall class 0 = 0.993693
recall class 1 = 0.356674
false negative rate = 0.643326
false positive rate = 0.006307
positive prediction rate = 0.054666
AUC of ROC = 0.921752
AUC of PRC = 0.728037
min(+P, Se) = 0.629103

-------------------------------

confusion matrix:
[[8997   49]
 [ 881  482]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10944099724292755
difference in average predicted and observed risk = -0.021503002757072454
number samples = 10409
accuracy = 0.910654
precision class 0 = 0.910812
precision class 1 = 0.907721
recall class 0 = 0.994583
recall class 1 = 0.353632
false negative rate = 0.646368
false positive rate = 0.005417
positive prediction rate = 0.051014
AUC of ROC = 0.925582
AUC of PRC = 0.730021
min(+P, Se) = 0.637363

-------------------------------

confusion matrix:
[[1623   18]
 [ 237  170]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.13977399468421936
difference in average predicted and observed risk = -0.05895600531578063
number samples = 2048
accuracy = 0.875488
precision class 0 = 0.872581
precision class 1 = 0.904255
recall class 0 = 0.989031
recall class 1 = 0.41769
false negative rate = 0.58231
false positive rate = 0.010969
positive prediction rate = 0.091797
AUC of ROC = 0.934737
AUC of PRC = 0.808206
min(+P, Se) = 0.703614

-------------------------------

confusion matrix:
[[1274    8]
 [  70   56]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10175999999046326
difference in average predicted and observed risk = 0.012270999990463258
number samples = 1408
accuracy = 0.944602
precision class 0 = 0.947917
precision class 1 = 0.875
recall class 0 = 0.99376
recall class 1 = 0.444444
false negative rate = 0.555556
false positive rate = 0.00624
positive prediction rate = 0.045455
AUC of ROC = 0.924913
AUC of PRC = 0.717544
min(+P, Se) = 0.634921

-------------------------------

confusion matrix:
[[290   6]
 [ 29  23]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.13866500556468964
difference in average predicted and observed risk = -0.010759994435310366
number samples = 348
accuracy = 0.899425
precision class 0 = 0.909091
precision class 1 = 0.793103
recall class 0 = 0.97973
recall class 1 = 0.442308
false negative rate = 0.557692
false positive rate = 0.02027
positive prediction rate = 0.083333
AUC of ROC = 0.910408
AUC of PRC = 0.739205
min(+P, Se) = 0.711538

-------------------------------

confusion matrix:
[[427   2]
 [ 20  19]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.09405399858951569
difference in average predicted and observed risk = 0.010720998589515682
number samples = 468
accuracy = 0.952991
precision class 0 = 0.955257
precision class 1 = 0.904762
recall class 0 = 0.995338
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.004662
positive prediction rate = 0.044872
AUC of ROC = 0.917698
AUC of PRC = 0.697195
min(+P, Se) = 0.641026

-------------------------------

confusion matrix:
[[12611    83]
 [ 1237   750]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11313799768686295
difference in average predicted and observed risk = -0.022207002313137048
number samples = 14681
accuracy = 0.910088
precision class 0 = 0.910673
precision class 1 = 0.90036
recall class 0 = 0.993461
recall class 1 = 0.377453
false negative rate = 0.622547
false positive rate = 0.006539
positive prediction rate = 0.05674
AUC of ROC = 0.926708
AUC of PRC = 0.741451
min(+P, Se) = 0.648744

-------------------------------

==>predicting on validation



confusion matrix:
[[1501   34]
 [ 203   75]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12386500090360641
difference in average predicted and observed risk = -0.029471999096393586
number samples = 1813
accuracy = 0.869277
precision class 0 = 0.880869
precision class 1 = 0.688073
recall class 0 = 0.97785
recall class 1 = 0.269784
false negative rate = 0.730216
false positive rate = 0.02215
positive prediction rate = 0.060121
AUC of ROC = 0.840442
AUC of PRC = 0.560301
min(+P, Se) = 0.517986

-------------------------------

confusion matrix:
[[891  16]
 [ 86  27]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.09697099775075912
difference in average predicted and observed risk = -0.013813002249240869
number samples = 1020
accuracy = 0.9
precision class 0 = 0.911975
precision class 1 = 0.627907
recall class 0 = 0.982359
recall class 1 = 0.238938
false negative rate = 0.761062
false positive rate = 0.017641
positive prediction rate = 0.042157
AUC of ROC = 0.848172
AUC of PRC = 0.502196
min(+P, Se) = 0.486726

-------------------------------

confusion matrix:
[[246   5]
 [ 21  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.11593099683523178
difference in average predicted and observed risk = -0.0033670031647682203
number samples = 285
accuracy = 0.908772
precision class 0 = 0.921348
precision class 1 = 0.722222
recall class 0 = 0.98008
recall class 1 = 0.382353
false negative rate = 0.617647
false positive rate = 0.01992
positive prediction rate = 0.063158
AUC of ROC = 0.894071
AUC of PRC = 0.624405
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[70  1]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.07993999868631363
difference in average predicted and observed risk = -0.009804001313686375
number samples = 78
accuracy = 0.910256
precision class 0 = 0.921053
precision class 1 = 0.5
recall class 0 = 0.985915
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.014085
positive prediction rate = 0.025641
AUC of ROC = 0.83501
AUC of PRC = 0.471544
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.15893100202083588
difference in average predicted and observed risk = 0.005085002020835866
number samples = 26
accuracy = 0.884615
precision class 0 = 0.913043
precision class 1 = 0.666667
recall class 0 = 0.954545
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.045455
positive prediction rate = 0.115385
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1494   35]
 [ 178   66]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1131260022521019
difference in average predicted and observed risk = -0.024493997747898094
number samples = 1773
accuracy = 0.879865
precision class 0 = 0.893541
precision class 1 = 0.653465
recall class 0 = 0.977109
recall class 1 = 0.270492
false negative rate = 0.729508
false positive rate = 0.022891
positive prediction rate = 0.056966
AUC of ROC = 0.848412
AUC of PRC = 0.54433
min(+P, Se) = 0.504032

-------------------------------

confusion matrix:
[[1235   22]
 [ 140   52]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11477799713611603
difference in average predicted and observed risk = -0.017727002863883984
number samples = 1449
accuracy = 0.888199
precision class 0 = 0.898182
precision class 1 = 0.702703
recall class 0 = 0.982498
recall class 1 = 0.270833
false negative rate = 0.729167
false positive rate = 0.017502
positive prediction rate = 0.05107
AUC of ROC = 0.854469
AUC of PRC = 0.559401
min(+P, Se) = 0.53125

-------------------------------

confusion matrix:
[[1940   38]
 [ 233   78]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11174999922513962
difference in average predicted and observed risk = -0.02411700077486037
number samples = 2289
accuracy = 0.881608
precision class 0 = 0.892775
precision class 1 = 0.672414
recall class 0 = 0.980789
recall class 1 = 0.250804
false negative rate = 0.749196
false positive rate = 0.019211
positive prediction rate = 0.050677
AUC of ROC = 0.846051
AUC of PRC = 0.54044
min(+P, Se) = 0.509494

-------------------------------

confusion matrix:
[[359   9]
 [ 59  22]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.12821799516677856
difference in average predicted and observed risk = -0.05218300483322144
number samples = 449
accuracy = 0.848552
precision class 0 = 0.858852
precision class 1 = 0.709677
recall class 0 = 0.975543
recall class 1 = 0.271605
false negative rate = 0.728395
false positive rate = 0.024457
positive prediction rate = 0.069042
AUC of ROC = 0.851114
AUC of PRC = 0.613944
min(+P, Se) = 0.559524

-------------------------------

confusion matrix:
[[274   4]
 [ 18  12]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10439000278711319
difference in average predicted and observed risk = 0.006987002787113186
number samples = 308
accuracy = 0.928571
precision class 0 = 0.938356
precision class 1 = 0.75
recall class 0 = 0.985611
recall class 1 = 0.4
false negative rate = 0.6
false positive rate = 0.014388
positive prediction rate = 0.051948
AUC of ROC = 0.880336
AUC of PRC = 0.561574
min(+P, Se) = 0.548387

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10833299905061722
difference in average predicted and observed risk = 0.03616799905061721
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.906349
AUC of PRC = 0.406915
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.13746799528598785
difference in average predicted and observed risk = 0.04885999528598785
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.906746
AUC of PRC = 0.729904
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2729   57]
 [ 318  118]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11386899650096893
difference in average predicted and observed risk = -0.021451003499031063
number samples = 3222
accuracy = 0.883613
precision class 0 = 0.895635
precision class 1 = 0.674286
recall class 0 = 0.979541
recall class 1 = 0.270642
false negative rate = 0.729358
false positive rate = 0.020459
positive prediction rate = 0.054314
AUC of ROC = 0.850689
AUC of PRC = 0.550537
min(+P, Se) = 0.511468

-------------------------------

Epoch 00093: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch93.state
Epoch 94/100
 - 815s - loss: 0.2543 - val_loss: 0.2863

==>predicting on train



confusion matrix:
[[6988   48]
 [ 887  425]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12945599853992462
difference in average predicted and observed risk = -0.027707001460075376
number samples = 8348
accuracy = 0.887997
precision class 0 = 0.887365
precision class 1 = 0.89852
recall class 0 = 0.993178
recall class 1 = 0.323933
false negative rate = 0.676067
false positive rate = 0.006822
positive prediction rate = 0.05666
AUC of ROC = 0.915544
AUC of PRC = 0.728995
min(+P, Se) = 0.646341

-------------------------------

confusion matrix:
[[3975   27]
 [ 271  200]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10406400263309479
difference in average predicted and observed risk = -0.0012339973669052151
number samples = 4473
accuracy = 0.933378
precision class 0 = 0.936175
precision class 1 = 0.881057
recall class 0 = 0.993253
recall class 1 = 0.424628
false negative rate = 0.575372
false positive rate = 0.006747
positive prediction rate = 0.050749
AUC of ROC = 0.935608
AUC of PRC = 0.742017
min(+P, Se) = 0.647558

-------------------------------

confusion matrix:
[[1184   11]
 [  84   59]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11004699766635895
difference in average predicted and observed risk = 0.003170997666358949
number samples = 1338
accuracy = 0.928999
precision class 0 = 0.933754
precision class 1 = 0.842857
recall class 0 = 0.990795
recall class 1 = 0.412587
false negative rate = 0.587413
false positive rate = 0.009205
positive prediction rate = 0.052317
AUC of ROC = 0.939316
AUC of PRC = 0.715921
min(+P, Se) = 0.631944

-------------------------------

confusion matrix:
[[348   2]
 [ 21  18]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09838300198316574
difference in average predicted and observed risk = -0.001873998016834258
number samples = 389
accuracy = 0.940874
precision class 0 = 0.943089
precision class 1 = 0.9
recall class 0 = 0.994286
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.005714
positive prediction rate = 0.051414
AUC of ROC = 0.933553
AUC of PRC = 0.721313
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[109   2]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16651999950408936
difference in average predicted and observed risk = 0.00110599950408935
number samples = 133
accuracy = 0.924812
precision class 0 = 0.931624
precision class 1 = 0.875
recall class 0 = 0.981982
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.018018
positive prediction rate = 0.120301
AUC of ROC = 0.957002
AUC of PRC = 0.869744
min(+P, Se) = 0.782609

-------------------------------

confusion matrix:
[[6933   53]
 [ 672  401]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1154559999704361
difference in average predicted and observed risk = -0.017687000029563915
number samples = 8059
accuracy = 0.910038
precision class 0 = 0.911637
precision class 1 = 0.88326
recall class 0 = 0.992413
recall class 1 = 0.373719
false negative rate = 0.626281
false positive rate = 0.007587
positive prediction rate = 0.056335
AUC of ROC = 0.92867
AUC of PRC = 0.740528
min(+P, Se) = 0.660781

-------------------------------

confusion matrix:
[[5671   37]
 [ 599  315]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.1243399977684021
difference in average predicted and observed risk = -0.01368500223159791
number samples = 6622
accuracy = 0.903957
precision class 0 = 0.904466
precision class 1 = 0.894886
recall class 0 = 0.993518
recall class 1 = 0.344639
false negative rate = 0.655361
false positive rate = 0.006482
positive prediction rate = 0.053156
AUC of ROC = 0.9204
AUC of PRC = 0.7189
min(+P, Se) = 0.627729

-------------------------------

confusion matrix:
[[8994   52]
 [ 910  453]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11534400284290314
difference in average predicted and observed risk = -0.015599997157096868
number samples = 10409
accuracy = 0.90758
precision class 0 = 0.908118
precision class 1 = 0.89703
recall class 0 = 0.994252
recall class 1 = 0.332355
false negative rate = 0.667645
false positive rate = 0.005748
positive prediction rate = 0.048516
AUC of ROC = 0.923155
AUC of PRC = 0.719002
min(+P, Se) = 0.632967

-------------------------------

confusion matrix:
[[1622   19]
 [ 242  165]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14722000062465668
difference in average predicted and observed risk = -0.05150999937534331
number samples = 2048
accuracy = 0.872559
precision class 0 = 0.870172
precision class 1 = 0.896739
recall class 0 = 0.988422
recall class 1 = 0.405405
false negative rate = 0.594595
false positive rate = 0.011578
positive prediction rate = 0.089844
AUC of ROC = 0.932983
AUC of PRC = 0.798185
min(+P, Se) = 0.710784

-------------------------------

confusion matrix:
[[1273    9]
 [  70   56]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10824000090360641
difference in average predicted and observed risk = 0.018751000903606416
number samples = 1408
accuracy = 0.943892
precision class 0 = 0.947878
precision class 1 = 0.861538
recall class 0 = 0.99298
recall class 1 = 0.444444
false negative rate = 0.555556
false positive rate = 0.00702
positive prediction rate = 0.046165
AUC of ROC = 0.930905
AUC of PRC = 0.713778
min(+P, Se) = 0.65873

-------------------------------

confusion matrix:
[[290   6]
 [ 29  23]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14606599509716034
difference in average predicted and observed risk = -0.003359004902839663
number samples = 348
accuracy = 0.899425
precision class 0 = 0.909091
precision class 1 = 0.793103
recall class 0 = 0.97973
recall class 1 = 0.442308
false negative rate = 0.557692
false positive rate = 0.02027
positive prediction rate = 0.083333
AUC of ROC = 0.903651
AUC of PRC = 0.713502
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[425   4]
 [ 20  19]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10360399633646011
difference in average predicted and observed risk = 0.02027099633646011
number samples = 468
accuracy = 0.948718
precision class 0 = 0.955056
precision class 1 = 0.826087
recall class 0 = 0.990676
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.009324
positive prediction rate = 0.049145
AUC of ROC = 0.90945
AUC of PRC = 0.670561
min(+P, Se) = 0.547619

-------------------------------

confusion matrix:
[[12604    90]
 [ 1271   716]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.1194629967212677
difference in average predicted and observed risk = -0.015882003278732293
number samples = 14681
accuracy = 0.907295
precision class 0 = 0.908396
precision class 1 = 0.888337
recall class 0 = 0.99291
recall class 1 = 0.360342
false negative rate = 0.639658
false positive rate = 0.00709
positive prediction rate = 0.054901
AUC of ROC = 0.924911
AUC of PRC = 0.730603
min(+P, Se) = 0.645194

-------------------------------

==>predicting on validation



confusion matrix:
[[1503   32]
 [ 206   72]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13075199723243713
difference in average predicted and observed risk = -0.022585002767562867
number samples = 1813
accuracy = 0.868726
precision class 0 = 0.879462
precision class 1 = 0.692308
recall class 0 = 0.979153
recall class 1 = 0.258993
false negative rate = 0.741007
false positive rate = 0.020847
positive prediction rate = 0.057363
AUC of ROC = 0.843967
AUC of PRC = 0.566131
min(+P, Se) = 0.517857

-------------------------------

confusion matrix:
[[890  17]
 [ 86  27]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10455600172281265
difference in average predicted and observed risk = -0.006227998277187341
number samples = 1020
accuracy = 0.89902
precision class 0 = 0.911885
precision class 1 = 0.613636
recall class 0 = 0.981257
recall class 1 = 0.238938
false negative rate = 0.761062
false positive rate = 0.018743
positive prediction rate = 0.043137
AUC of ROC = 0.850914
AUC of PRC = 0.497004
min(+P, Se) = 0.504425

-------------------------------

confusion matrix:
[[246   5]
 [ 21  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12200000137090683
difference in average predicted and observed risk = 0.0027020013709068286
number samples = 285
accuracy = 0.908772
precision class 0 = 0.921348
precision class 1 = 0.722222
recall class 0 = 0.98008
recall class 1 = 0.382353
false negative rate = 0.617647
false positive rate = 0.01992
positive prediction rate = 0.063158
AUC of ROC = 0.896883
AUC of PRC = 0.631118
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[70  1]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08788000047206879
difference in average predicted and observed risk = -0.0018639995279312177
number samples = 78
accuracy = 0.910256
precision class 0 = 0.921053
precision class 1 = 0.5
recall class 0 = 0.985915
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.014085
positive prediction rate = 0.025641
AUC of ROC = 0.818913
AUC of PRC = 0.442294
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17229899764060974
difference in average predicted and observed risk = 0.01845299764060973
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1494   35]
 [ 176   68]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11993599683046341
difference in average predicted and observed risk = -0.017684003169536583
number samples = 1773
accuracy = 0.880993
precision class 0 = 0.894611
precision class 1 = 0.660194
recall class 0 = 0.977109
recall class 1 = 0.278689
false negative rate = 0.721311
false positive rate = 0.022891
positive prediction rate = 0.058094
AUC of ROC = 0.8534
AUC of PRC = 0.553129
min(+P, Se) = 0.52459

-------------------------------

confusion matrix:
[[1236   21]
 [ 144   48]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12226200103759766
difference in average predicted and observed risk = -0.010242998962402355
number samples = 1449
accuracy = 0.886128
precision class 0 = 0.895652
precision class 1 = 0.695652
recall class 0 = 0.983294
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.016706
positive prediction rate = 0.047619
AUC of ROC = 0.854643
AUC of PRC = 0.559624
min(+P, Se) = 0.53125

-------------------------------

confusion matrix:
[[1941   37]
 [ 237   74]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11857900023460388
difference in average predicted and observed risk = -0.017287999765396106
number samples = 2289
accuracy = 0.880297
precision class 0 = 0.891185
precision class 1 = 0.666667
recall class 0 = 0.981294
recall class 1 = 0.237942
false negative rate = 0.762058
false positive rate = 0.018706
positive prediction rate = 0.048493
AUC of ROC = 0.849014
AUC of PRC = 0.542778
min(+P, Se) = 0.516026

-------------------------------

confusion matrix:
[[358  10]
 [ 56  25]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13976499438285828
difference in average predicted and observed risk = -0.04063600561714173
number samples = 449
accuracy = 0.853007
precision class 0 = 0.864734
precision class 1 = 0.714286
recall class 0 = 0.972826
recall class 1 = 0.308642
false negative rate = 0.691358
false positive rate = 0.027174
positive prediction rate = 0.077951
AUC of ROC = 0.856481
AUC of PRC = 0.624772
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[275   3]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10494200140237808
difference in average predicted and observed risk = 0.007539001402378079
number samples = 308
accuracy = 0.928571
precision class 0 = 0.935374
precision class 1 = 0.785714
recall class 0 = 0.989209
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.010791
positive prediction rate = 0.045455
AUC of ROC = 0.873501
AUC of PRC = 0.569525
min(+P, Se) = 0.5625

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11214099824428558
difference in average predicted and observed risk = 0.03997599824428558
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.9
AUC of PRC = 0.41031
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[69  3]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15725299715995789
difference in average predicted and observed risk = 0.06864499715995788
number samples = 79
accuracy = 0.924051
precision class 0 = 0.958333
precision class 1 = 0.571429
recall class 0 = 0.958333
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.041667
positive prediction rate = 0.088608
AUC of ROC = 0.886905
AUC of PRC = 0.765289
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2730   56]
 [ 320  116]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12098199874162674
difference in average predicted and observed risk = -0.014338001258373256
number samples = 3222
accuracy = 0.883302
precision class 0 = 0.895082
precision class 1 = 0.674419
recall class 0 = 0.9799
recall class 1 = 0.266055
false negative rate = 0.733945
false positive rate = 0.020101
positive prediction rate = 0.053383
AUC of ROC = 0.853484
AUC of PRC = 0.55539
min(+P, Se) = 0.52381

-------------------------------

Epoch 00094: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch94.state
Epoch 95/100
 - 816s - loss: 0.2552 - val_loss: 0.2867

==>predicting on train



confusion matrix:
[[7000   36]
 [ 903  409]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12262500077486038
difference in average predicted and observed risk = -0.034537999225139615
number samples = 8348
accuracy = 0.887518
precision class 0 = 0.88574
precision class 1 = 0.919101
recall class 0 = 0.994883
recall class 1 = 0.311738
false negative rate = 0.688262
false positive rate = 0.005117
positive prediction rate = 0.053306
AUC of ROC = 0.917819
AUC of PRC = 0.736766
min(+P, Se) = 0.647372

-------------------------------

confusion matrix:
[[3980   22]
 [ 267  204]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.09911499917507172
difference in average predicted and observed risk = -0.006183000824928286
number samples = 4473
accuracy = 0.93539
precision class 0 = 0.937132
precision class 1 = 0.902655
recall class 0 = 0.994503
recall class 1 = 0.433121
false negative rate = 0.566879
false positive rate = 0.005497
positive prediction rate = 0.050525
AUC of ROC = 0.93886
AUC of PRC = 0.74912
min(+P, Se) = 0.658174

-------------------------------

confusion matrix:
[[1186    9]
 [  84   59]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10518699884414673
difference in average predicted and observed risk = -0.0016890011558532703
number samples = 1338
accuracy = 0.930493
precision class 0 = 0.933858
precision class 1 = 0.867647
recall class 0 = 0.992469
recall class 1 = 0.412587
false negative rate = 0.587413
false positive rate = 0.007531
positive prediction rate = 0.050822
AUC of ROC = 0.944062
AUC of PRC = 0.735624
min(+P, Se) = 0.642384

-------------------------------

confusion matrix:
[[349   1]
 [ 22  17]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.0953499972820282
difference in average predicted and observed risk = -0.004907002717971801
number samples = 389
accuracy = 0.940874
precision class 0 = 0.940701
precision class 1 = 0.944444
recall class 0 = 0.997143
recall class 1 = 0.435897
false negative rate = 0.564103
false positive rate = 0.002857
positive prediction rate = 0.046272
AUC of ROC = 0.938462
AUC of PRC = 0.748175
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[110   1]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.15712900459766388
difference in average predicted and observed risk = -0.008284995402336126
number samples = 133
accuracy = 0.932331
precision class 0 = 0.932203
precision class 1 = 0.933333
recall class 0 = 0.990991
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.009009
positive prediction rate = 0.112782
AUC of ROC = 0.968059
AUC of PRC = 0.901055
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6946   40]
 [ 693  380]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.10925900191068649
difference in average predicted and observed risk = -0.02388399808931352
number samples = 8059
accuracy = 0.909046
precision class 0 = 0.909281
precision class 1 = 0.904762
recall class 0 = 0.994274
recall class 1 = 0.354147
false negative rate = 0.645853
false positive rate = 0.005726
positive prediction rate = 0.052116
AUC of ROC = 0.932112
AUC of PRC = 0.750121
min(+P, Se) = 0.667598

-------------------------------

confusion matrix:
[[5679   29]
 [ 591  323]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.1185780018568039
difference in average predicted and observed risk = -0.019446998143196115
number samples = 6622
accuracy = 0.906373
precision class 0 = 0.905742
precision class 1 = 0.917614
recall class 0 = 0.994919
recall class 1 = 0.353392
false negative rate = 0.646608
false positive rate = 0.005081
positive prediction rate = 0.053156
AUC of ROC = 0.922517
AUC of PRC = 0.727648
min(+P, Se) = 0.630435

-------------------------------

confusion matrix:
[[9005   41]
 [ 918  445]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10943999886512756
difference in average predicted and observed risk = -0.02150400113487244
number samples = 10409
accuracy = 0.907868
precision class 0 = 0.907488
precision class 1 = 0.915638
recall class 0 = 0.995468
recall class 1 = 0.326486
false negative rate = 0.673514
false positive rate = 0.004532
positive prediction rate = 0.04669
AUC of ROC = 0.926492
AUC of PRC = 0.727866
min(+P, Se) = 0.638828

-------------------------------

confusion matrix:
[[1627   14]
 [ 243  164]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14009399712085724
difference in average predicted and observed risk = -0.05863600287914275
number samples = 2048
accuracy = 0.874512
precision class 0 = 0.870053
precision class 1 = 0.921348
recall class 0 = 0.991469
recall class 1 = 0.402948
false negative rate = 0.597052
false positive rate = 0.008531
positive prediction rate = 0.086914
AUC of ROC = 0.93525
AUC of PRC = 0.807131
min(+P, Se) = 0.722359

-------------------------------

confusion matrix:
[[1275    7]
 [  73   53]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10327199846506119
difference in average predicted and observed risk = 0.013782998465061189
number samples = 1408
accuracy = 0.943182
precision class 0 = 0.945846
precision class 1 = 0.883333
recall class 0 = 0.99454
recall class 1 = 0.420635
false negative rate = 0.579365
false positive rate = 0.00546
positive prediction rate = 0.042614
AUC of ROC = 0.929624
AUC of PRC = 0.715939
min(+P, Se) = 0.634921

-------------------------------

confusion matrix:
[[292   4]
 [ 30  22]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.139164000749588
difference in average predicted and observed risk = -0.01026099925041199
number samples = 348
accuracy = 0.902299
precision class 0 = 0.906832
precision class 1 = 0.846154
recall class 0 = 0.986486
recall class 1 = 0.423077
false negative rate = 0.576923
false positive rate = 0.013514
positive prediction rate = 0.074713
AUC of ROC = 0.911058
AUC of PRC = 0.743705
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[426   3]
 [ 20  19]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.0979359969496727
difference in average predicted and observed risk = 0.014602996949672695
number samples = 468
accuracy = 0.950855
precision class 0 = 0.955157
precision class 1 = 0.863636
recall class 0 = 0.993007
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.006993
positive prediction rate = 0.047009
AUC of ROC = 0.921045
AUC of PRC = 0.701538
min(+P, Se) = 0.609756

-------------------------------

confusion matrix:
[[12625    69]
 [ 1284   703]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11346200108528137
difference in average predicted and observed risk = -0.02188299891471862
number samples = 14681
accuracy = 0.90784
precision class 0 = 0.907686
precision class 1 = 0.910622
recall class 0 = 0.994564
recall class 1 = 0.3538
false negative rate = 0.6462
false positive rate = 0.005436
positive prediction rate = 0.052585
AUC of ROC = 0.927809
AUC of PRC = 0.740026
min(+P, Se) = 0.650226

-------------------------------

==>predicting on validation



confusion matrix:
[[1508   27]
 [ 205   73]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.12479999661445618
difference in average predicted and observed risk = -0.028537003385543824
number samples = 1813
accuracy = 0.872035
precision class 0 = 0.880327
precision class 1 = 0.73
recall class 0 = 0.98241
recall class 1 = 0.26259
false negative rate = 0.73741
false positive rate = 0.01759
positive prediction rate = 0.055157
AUC of ROC = 0.847878
AUC of PRC = 0.572198
min(+P, Se) = 0.521429

-------------------------------

confusion matrix:
[[893  14]
 [ 86  27]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.09981799870729446
difference in average predicted and observed risk = -0.01096600129270553
number samples = 1020
accuracy = 0.901961
precision class 0 = 0.912155
precision class 1 = 0.658537
recall class 0 = 0.984564
recall class 1 = 0.238938
false negative rate = 0.761062
false positive rate = 0.015436
positive prediction rate = 0.040196
AUC of ROC = 0.850192
AUC of PRC = 0.499341
min(+P, Se) = 0.477876

-------------------------------

confusion matrix:
[[245   6]
 [ 21  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12116199731826782
difference in average predicted and observed risk = 0.001863997318267821
number samples = 285
accuracy = 0.905263
precision class 0 = 0.921053
precision class 1 = 0.684211
recall class 0 = 0.976096
recall class 1 = 0.382353
false negative rate = 0.617647
false positive rate = 0.023904
positive prediction rate = 0.066667
AUC of ROC = 0.894774
AUC of PRC = 0.633916
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08497100323438644
difference in average predicted and observed risk = -0.00477299676561356
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.808853
AUC of PRC = 0.406506
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17031699419021606
difference in average predicted and observed risk = 0.016470994190216054
number samples = 26
accuracy = 0.884615
precision class 0 = 0.913043
precision class 1 = 0.666667
recall class 0 = 0.954545
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.045455
positive prediction rate = 0.115385
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1498   31]
 [ 178   66]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11531800031661987
difference in average predicted and observed risk = -0.02230199968338012
number samples = 1773
accuracy = 0.882121
precision class 0 = 0.893795
precision class 1 = 0.680412
recall class 0 = 0.979725
recall class 1 = 0.270492
false negative rate = 0.729508
false positive rate = 0.020275
positive prediction rate = 0.05471
AUC of ROC = 0.854102
AUC of PRC = 0.546891
min(+P, Se) = 0.522449

-------------------------------

confusion matrix:
[[1238   19]
 [ 142   50]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.11677400022745132
difference in average predicted and observed risk = -0.015730999772548687
number samples = 1449
accuracy = 0.888889
precision class 0 = 0.897101
precision class 1 = 0.724638
recall class 0 = 0.984885
recall class 1 = 0.260417
false negative rate = 0.739583
false positive rate = 0.015115
positive prediction rate = 0.047619
AUC of ROC = 0.856835
AUC of PRC = 0.570117
min(+P, Se) = 0.526042

-------------------------------

confusion matrix:
[[1947   31]
 [ 233   78]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11318299919366837
difference in average predicted and observed risk = -0.022684000806331622
number samples = 2289
accuracy = 0.884666
precision class 0 = 0.893119
precision class 1 = 0.715596
recall class 0 = 0.984328
recall class 1 = 0.250804
false negative rate = 0.749196
false positive rate = 0.015672
positive prediction rate = 0.047619
AUC of ROC = 0.849478
AUC of PRC = 0.546825
min(+P, Se) = 0.519108

-------------------------------

confusion matrix:
[[358  10]
 [ 59  22]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13486400246620178
difference in average predicted and observed risk = -0.045536997533798224
number samples = 449
accuracy = 0.846325
precision class 0 = 0.858513
precision class 1 = 0.6875
recall class 0 = 0.972826
recall class 1 = 0.271605
false negative rate = 0.728395
false positive rate = 0.027174
positive prediction rate = 0.071269
AUC of ROC = 0.856314
AUC of PRC = 0.606649
min(+P, Se) = 0.541176

-------------------------------

confusion matrix:
[[274   4]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.1024240031838417
difference in average predicted and observed risk = 0.005021003183841702
number samples = 308
accuracy = 0.922078
precision class 0 = 0.931973
precision class 1 = 0.714286
recall class 0 = 0.985611
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.014388
positive prediction rate = 0.045455
AUC of ROC = 0.892566
AUC of PRC = 0.598239
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10656899958848953
difference in average predicted and observed risk = 0.034403999588489526
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.906349
AUC of PRC = 0.332461
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15381699800491333
difference in average predicted and observed risk = 0.06520899800491332
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.904762
AUC of PRC = 0.768282
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2736   50]
 [ 320  116]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11597300320863724
difference in average predicted and observed risk = -0.01934699679136276
number samples = 3222
accuracy = 0.885164
precision class 0 = 0.895288
precision class 1 = 0.698795
recall class 0 = 0.982053
recall class 1 = 0.266055
false negative rate = 0.733945
false positive rate = 0.017947
positive prediction rate = 0.051521
AUC of ROC = 0.854897
AUC of PRC = 0.55657
min(+P, Se) = 0.519362

-------------------------------

Epoch 00095: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch95.state
Epoch 96/100
 - 823s - loss: 0.2542 - val_loss: 0.2867

==>predicting on train



confusion matrix:
[[6986   50]
 [ 868  444]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12936699390411377
difference in average predicted and observed risk = -0.027796006095886228
number samples = 8348
accuracy = 0.890034
precision class 0 = 0.889483
precision class 1 = 0.898785
recall class 0 = 0.992894
recall class 1 = 0.338415
false negative rate = 0.661585
false positive rate = 0.007106
positive prediction rate = 0.059176
AUC of ROC = 0.915702
AUC of PRC = 0.73257
min(+P, Se) = 0.650152

-------------------------------

confusion matrix:
[[3977   25]
 [ 258  213]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10336200147867203
difference in average predicted and observed risk = -0.0019359985213279751
number samples = 4473
accuracy = 0.936732
precision class 0 = 0.939079
precision class 1 = 0.894958
recall class 0 = 0.993753
recall class 1 = 0.452229
false negative rate = 0.547771
false positive rate = 0.006247
positive prediction rate = 0.053208
AUC of ROC = 0.939569
AUC of PRC = 0.755382
min(+P, Se) = 0.649682

-------------------------------

confusion matrix:
[[1185   10]
 [  78   65]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10967899858951569
difference in average predicted and observed risk = 0.0028029985895156873
number samples = 1338
accuracy = 0.93423
precision class 0 = 0.938242
precision class 1 = 0.866667
recall class 0 = 0.991632
recall class 1 = 0.454545
false negative rate = 0.545455
false positive rate = 0.008368
positive prediction rate = 0.056054
AUC of ROC = 0.941288
AUC of PRC = 0.735467
min(+P, Se) = 0.65035

-------------------------------

confusion matrix:
[[349   1]
 [ 20  19]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09760099649429321
difference in average predicted and observed risk = -0.002656003505706786
number samples = 389
accuracy = 0.946015
precision class 0 = 0.945799
precision class 1 = 0.95
recall class 0 = 0.997143
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.002857
positive prediction rate = 0.051414
AUC of ROC = 0.931868
AUC of PRC = 0.737367
min(+P, Se) = 0.717949

-------------------------------

confusion matrix:
[[109   2]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.15928199887275696
difference in average predicted and observed risk = -0.0061320011272430475
number samples = 133
accuracy = 0.932331
precision class 0 = 0.939655
precision class 1 = 0.882353
recall class 0 = 0.981982
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.018018
positive prediction rate = 0.12782
AUC of ROC = 0.966421
AUC of PRC = 0.889122
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[6935   51]
 [ 658  415]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.1148030012845993
difference in average predicted and observed risk = -0.018339998715400707
number samples = 8059
accuracy = 0.912024
precision class 0 = 0.913341
precision class 1 = 0.890558
recall class 0 = 0.9927
recall class 1 = 0.386766
false negative rate = 0.613234
false positive rate = 0.0073
positive prediction rate = 0.057824
AUC of ROC = 0.930916
AUC of PRC = 0.750064
min(+P, Se) = 0.667288

-------------------------------

confusion matrix:
[[5671   37]
 [ 573  341]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.12428200244903564
difference in average predicted and observed risk = -0.013742997550964364
number samples = 6622
accuracy = 0.907883
precision class 0 = 0.908232
precision class 1 = 0.902116
recall class 0 = 0.993518
recall class 1 = 0.373085
false negative rate = 0.626915
false positive rate = 0.006482
positive prediction rate = 0.057082
AUC of ROC = 0.920977
AUC of PRC = 0.726437
min(+P, Se) = 0.639344

-------------------------------

confusion matrix:
[[8993   53]
 [ 880  483]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11503800004720688
difference in average predicted and observed risk = -0.015905999952793126
number samples = 10409
accuracy = 0.910366
precision class 0 = 0.910868
precision class 1 = 0.901119
recall class 0 = 0.994141
recall class 1 = 0.354365
false negative rate = 0.645635
false positive rate = 0.005859
positive prediction rate = 0.051494
AUC of ROC = 0.925146
AUC of PRC = 0.726836
min(+P, Se) = 0.642491

-------------------------------

confusion matrix:
[[1624   17]
 [ 231  176]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1467519998550415
difference in average predicted and observed risk = -0.051978000144958486
number samples = 2048
accuracy = 0.878906
precision class 0 = 0.875472
precision class 1 = 0.911917
recall class 0 = 0.98964
recall class 1 = 0.432432
false negative rate = 0.567568
false positive rate = 0.01036
positive prediction rate = 0.094238
AUC of ROC = 0.935351
AUC of PRC = 0.807536
min(+P, Se) = 0.710074

-------------------------------

confusion matrix:
[[1272   10]
 [  70   56]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10834000259637833
difference in average predicted and observed risk = 0.018851002596378327
number samples = 1408
accuracy = 0.943182
precision class 0 = 0.947839
precision class 1 = 0.848485
recall class 0 = 0.9922
recall class 1 = 0.444444
false negative rate = 0.555556
false positive rate = 0.0078
positive prediction rate = 0.046875
AUC of ROC = 0.926727
AUC of PRC = 0.715478
min(+P, Se) = 0.626984

-------------------------------

confusion matrix:
[[290   6]
 [ 30  22]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.14531399309635162
difference in average predicted and observed risk = -0.004111006903648379
number samples = 348
accuracy = 0.896552
precision class 0 = 0.90625
precision class 1 = 0.785714
recall class 0 = 0.97973
recall class 1 = 0.423077
false negative rate = 0.576923
false positive rate = 0.02027
positive prediction rate = 0.08046
AUC of ROC = 0.90573
AUC of PRC = 0.730172
min(+P, Se) = 0.673077

-------------------------------

confusion matrix:
[[427   2]
 [ 20  19]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10064800083637238
difference in average predicted and observed risk = 0.01731500083637237
number samples = 468
accuracy = 0.952991
precision class 0 = 0.955257
precision class 1 = 0.904762
recall class 0 = 0.995338
recall class 1 = 0.487179
false negative rate = 0.512821
false positive rate = 0.004662
positive prediction rate = 0.044872
AUC of ROC = 0.92224
AUC of PRC = 0.730629
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[12606    88]
 [ 1231   756]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11907900124788284
difference in average predicted and observed risk = -0.01626599875211715
number samples = 14681
accuracy = 0.910156
precision class 0 = 0.911036
precision class 1 = 0.895735
recall class 0 = 0.993068
recall class 1 = 0.380473
false negative rate = 0.619527
false positive rate = 0.006932
positive prediction rate = 0.057489
AUC of ROC = 0.926495
AUC of PRC = 0.739331
min(+P, Se) = 0.653769

-------------------------------

==>predicting on validation



confusion matrix:
[[1503   32]
 [ 201   77]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13167500495910645
difference in average predicted and observed risk = -0.021661995040893556
number samples = 1813
accuracy = 0.871484
precision class 0 = 0.882042
precision class 1 = 0.706422
recall class 0 = 0.979153
recall class 1 = 0.276978
false negative rate = 0.723022
false positive rate = 0.020847
positive prediction rate = 0.060121
AUC of ROC = 0.84687
AUC of PRC = 0.567455
min(+P, Se) = 0.510791

-------------------------------

confusion matrix:
[[893  14]
 [ 85  28]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10186199843883514
difference in average predicted and observed risk = -0.00892200156116485
number samples = 1020
accuracy = 0.902941
precision class 0 = 0.913088
precision class 1 = 0.666667
recall class 0 = 0.984564
recall class 1 = 0.247788
false negative rate = 0.752212
false positive rate = 0.015436
positive prediction rate = 0.041176
AUC of ROC = 0.85147
AUC of PRC = 0.512981
min(+P, Se) = 0.474576

-------------------------------

confusion matrix:
[[245   6]
 [ 22  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1235629990696907
difference in average predicted and observed risk = 0.004264999069690703
number samples = 285
accuracy = 0.901754
precision class 0 = 0.917603
precision class 1 = 0.666667
recall class 0 = 0.976096
recall class 1 = 0.352941
false negative rate = 0.647059
false positive rate = 0.023904
positive prediction rate = 0.063158
AUC of ROC = 0.888446
AUC of PRC = 0.619462
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[70  1]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08764199912548065
difference in average predicted and observed risk = -0.0021020008745193525
number samples = 78
accuracy = 0.910256
precision class 0 = 0.921053
precision class 1 = 0.5
recall class 0 = 0.985915
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.014085
positive prediction rate = 0.025641
AUC of ROC = 0.82495
AUC of PRC = 0.438458
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17560899257659912
difference in average predicted and observed risk = 0.02176299257659911
number samples = 26
accuracy = 0.884615
precision class 0 = 0.913043
precision class 1 = 0.666667
recall class 0 = 0.954545
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.045455
positive prediction rate = 0.115385
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1498   31]
 [ 175   69]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11941000074148178
difference in average predicted and observed risk = -0.01820999925851821
number samples = 1773
accuracy = 0.883813
precision class 0 = 0.895397
precision class 1 = 0.69
recall class 0 = 0.979725
recall class 1 = 0.282787
false negative rate = 0.717213
false positive rate = 0.020275
positive prediction rate = 0.056402
AUC of ROC = 0.855399
AUC of PRC = 0.556771
min(+P, Se) = 0.506122

-------------------------------

confusion matrix:
[[1234   23]
 [ 141   51]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12251999974250793
difference in average predicted and observed risk = -0.009985000257492077
number samples = 1449
accuracy = 0.886818
precision class 0 = 0.897455
precision class 1 = 0.689189
recall class 0 = 0.981702
recall class 1 = 0.265625
false negative rate = 0.734375
false positive rate = 0.018298
positive prediction rate = 0.05107
AUC of ROC = 0.854254
AUC of PRC = 0.557807
min(+P, Se) = 0.515625

-------------------------------

confusion matrix:
[[1942   36]
 [ 232   79]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11852400004863739
difference in average predicted and observed risk = -0.017342999951362598
number samples = 2289
accuracy = 0.882918
precision class 0 = 0.893284
precision class 1 = 0.686957
recall class 0 = 0.9818
recall class 1 = 0.254019
false negative rate = 0.745981
false positive rate = 0.0182
positive prediction rate = 0.05024
AUC of ROC = 0.850484
AUC of PRC = 0.542801
min(+P, Se) = 0.492013

-------------------------------

confusion matrix:
[[360   8]
 [ 57  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13808999955654144
difference in average predicted and observed risk = -0.04231100044345856
number samples = 449
accuracy = 0.855234
precision class 0 = 0.863309
precision class 1 = 0.75
recall class 0 = 0.978261
recall class 1 = 0.296296
false negative rate = 0.703704
false positive rate = 0.021739
positive prediction rate = 0.071269
AUC of ROC = 0.854167
AUC of PRC = 0.625572
min(+P, Se) = 0.567901

-------------------------------

confusion matrix:
[[274   4]
 [ 19  11]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10624399781227112
difference in average predicted and observed risk = 0.008840997812271115
number samples = 308
accuracy = 0.925325
precision class 0 = 0.935154
precision class 1 = 0.733333
recall class 0 = 0.985611
recall class 1 = 0.366667
false negative rate = 0.633333
false positive rate = 0.014388
positive prediction rate = 0.048701
AUC of ROC = 0.876978
AUC of PRC = 0.588465
min(+P, Se) = 0.566667

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11266399919986725
difference in average predicted and observed risk = 0.04049899919986724
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.912698
AUC of PRC = 0.323356
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15554499626159668
difference in average predicted and observed risk = 0.06693699626159667
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.902778
AUC of PRC = 0.763876
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2732   54]
 [ 316  120]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12080799788236618
difference in average predicted and observed risk = -0.014512002117633815
number samples = 3222
accuracy = 0.885164
precision class 0 = 0.896325
precision class 1 = 0.689655
recall class 0 = 0.980617
recall class 1 = 0.275229
false negative rate = 0.724771
false positive rate = 0.019383
positive prediction rate = 0.054004
AUC of ROC = 0.854699
AUC of PRC = 0.557103
min(+P, Se) = 0.513761

-------------------------------

Epoch 00096: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch96.state
Epoch 97/100
 - 827s - loss: 0.2525 - val_loss: 0.2840

==>predicting on train



confusion matrix:
[[6979   57]
 [ 829  483]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.13546299934387207
difference in average predicted and observed risk = -0.021700000656127927
number samples = 8348
accuracy = 0.893867
precision class 0 = 0.893827
precision class 1 = 0.894444
recall class 0 = 0.991899
recall class 1 = 0.36814
false negative rate = 0.63186
false positive rate = 0.008101
positive prediction rate = 0.064686
AUC of ROC = 0.919659
AUC of PRC = 0.743148
min(+P, Se) = 0.657012

-------------------------------

confusion matrix:
[[3970   32]
 [ 238  233]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10927700251340866
difference in average predicted and observed risk = 0.003979002513408658
number samples = 4473
accuracy = 0.939638
precision class 0 = 0.943441
precision class 1 = 0.879245
recall class 0 = 0.992004
recall class 1 = 0.494692
false negative rate = 0.505308
false positive rate = 0.007996
positive prediction rate = 0.059244
AUC of ROC = 0.941539
AUC of PRC = 0.759336
min(+P, Se) = 0.658174

-------------------------------

confusion matrix:
[[1181   14]
 [  74   69]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.11627399921417236
difference in average predicted and observed risk = 0.009397999214172365
number samples = 1338
accuracy = 0.93423
precision class 0 = 0.941036
precision class 1 = 0.831325
recall class 0 = 0.988285
recall class 1 = 0.482517
false negative rate = 0.517483
false positive rate = 0.011715
positive prediction rate = 0.062033
AUC of ROC = 0.944196
AUC of PRC = 0.739318
min(+P, Se) = 0.659722

-------------------------------

confusion matrix:
[[349   1]
 [ 19  20]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.10572200268507004
difference in average predicted and observed risk = 0.005465002685070039
number samples = 389
accuracy = 0.948586
precision class 0 = 0.94837
precision class 1 = 0.952381
recall class 0 = 0.997143
recall class 1 = 0.512821
false negative rate = 0.487179
false positive rate = 0.002857
positive prediction rate = 0.053985
AUC of ROC = 0.947619
AUC of PRC = 0.751697
min(+P, Se) = 0.717949

-------------------------------

confusion matrix:
[[108   3]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.17319700121879578
difference in average predicted and observed risk = 0.007783001218795771
number samples = 133
accuracy = 0.924812
precision class 0 = 0.93913
precision class 1 = 0.833333
recall class 0 = 0.972973
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.027027
positive prediction rate = 0.135338
AUC of ROC = 0.97502
AUC of PRC = 0.916016
min(+P, Se) = 0.826087

-------------------------------

confusion matrix:
[[6923   63]
 [ 623  450]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.12140099704265594
difference in average predicted and observed risk = -0.011742002957344067
number samples = 8059
accuracy = 0.914878
precision class 0 = 0.91744
precision class 1 = 0.877193
recall class 0 = 0.990982
recall class 1 = 0.419385
false negative rate = 0.580615
false positive rate = 0.009018
positive prediction rate = 0.063656
AUC of ROC = 0.934359
AUC of PRC = 0.757774
min(+P, Se) = 0.676909

-------------------------------

confusion matrix:
[[5664   44]
 [ 544  370]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.13002100586891174
difference in average predicted and observed risk = -0.008003994131088266
number samples = 6622
accuracy = 0.911205
precision class 0 = 0.912371
precision class 1 = 0.89372
recall class 0 = 0.992292
recall class 1 = 0.404814
false negative rate = 0.595186
false positive rate = 0.007708
positive prediction rate = 0.062519
AUC of ROC = 0.924392
AUC of PRC = 0.734643
min(+P, Se) = 0.645514

-------------------------------

confusion matrix:
[[8976   70]
 [ 834  529]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.12130200117826462
difference in average predicted and observed risk = -0.009641998821735387
number samples = 10409
accuracy = 0.913152
precision class 0 = 0.914985
precision class 1 = 0.883139
recall class 0 = 0.992262
recall class 1 = 0.388114
false negative rate = 0.611886
false positive rate = 0.007738
positive prediction rate = 0.057546
AUC of ROC = 0.928786
AUC of PRC = 0.735285
min(+P, Se) = 0.653705

-------------------------------

confusion matrix:
[[1624   17]
 [ 219  188]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1526699960231781
difference in average predicted and observed risk = -0.04606000397682189
number samples = 2048
accuracy = 0.884766
precision class 0 = 0.881172
precision class 1 = 0.917073
recall class 0 = 0.98964
recall class 1 = 0.461916
false negative rate = 0.538084
false positive rate = 0.01036
positive prediction rate = 0.100098
AUC of ROC = 0.936227
AUC of PRC = 0.80994
min(+P, Se) = 0.720588

-------------------------------

confusion matrix:
[[1272   10]
 [  67   59]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.11355400085449219
difference in average predicted and observed risk = 0.02406500085449219
number samples = 1408
accuracy = 0.945312
precision class 0 = 0.949963
precision class 1 = 0.855072
recall class 0 = 0.9922
recall class 1 = 0.468254
false negative rate = 0.531746
false positive rate = 0.0078
positive prediction rate = 0.049006
AUC of ROC = 0.932806
AUC of PRC = 0.730208
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[289   7]
 [ 28  24]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1551789939403534
difference in average predicted and observed risk = 0.005753993940353391
number samples = 348
accuracy = 0.899425
precision class 0 = 0.911672
precision class 1 = 0.774194
recall class 0 = 0.976351
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.023649
positive prediction rate = 0.08908
AUC of ROC = 0.913527
AUC of PRC = 0.740962
min(+P, Se) = 0.648148

-------------------------------

confusion matrix:
[[426   3]
 [ 19  20]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10724499821662903
difference in average predicted and observed risk = 0.023911998216629024
number samples = 468
accuracy = 0.952991
precision class 0 = 0.957303
precision class 1 = 0.869565
recall class 0 = 0.993007
recall class 1 = 0.512821
false negative rate = 0.487179
false positive rate = 0.006993
positive prediction rate = 0.049145
AUC of ROC = 0.925587
AUC of PRC = 0.728814
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[12587   107]
 [ 1167   820]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.12528899312019348
difference in average predicted and observed risk = -0.010056006879806512
number samples = 14681
accuracy = 0.913221
precision class 0 = 0.915152
precision class 1 = 0.884574
recall class 0 = 0.991571
recall class 1 = 0.412682
false negative rate = 0.587318
false positive rate = 0.008429
positive prediction rate = 0.063143
AUC of ROC = 0.929881
AUC of PRC = 0.747129
min(+P, Se) = 0.662142

-------------------------------

==>predicting on validation



confusion matrix:
[[1496   39]
 [ 190   88]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.138947993516922
difference in average predicted and observed risk = -0.014389006483078004
number samples = 1813
accuracy = 0.87369
precision class 0 = 0.887307
precision class 1 = 0.692913
recall class 0 = 0.974593
recall class 1 = 0.316547
false negative rate = 0.683453
false positive rate = 0.025407
positive prediction rate = 0.07005
AUC of ROC = 0.847742
AUC of PRC = 0.565976
min(+P, Se) = 0.519435

-------------------------------

confusion matrix:
[[884  23]
 [ 82  31]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10896799713373184
difference in average predicted and observed risk = -0.0018160028662681515
number samples = 1020
accuracy = 0.897059
precision class 0 = 0.915114
precision class 1 = 0.574074
recall class 0 = 0.974642
recall class 1 = 0.274336
false negative rate = 0.725664
false positive rate = 0.025358
positive prediction rate = 0.052941
AUC of ROC = 0.856456
AUC of PRC = 0.519627
min(+P, Se) = 0.530973

-------------------------------

confusion matrix:
[[244   7]
 [ 17  17]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.13169099390506744
difference in average predicted and observed risk = 0.012392993905067443
number samples = 285
accuracy = 0.915789
precision class 0 = 0.934866
precision class 1 = 0.708333
recall class 0 = 0.972112
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.027888
positive prediction rate = 0.084211
AUC of ROC = 0.896063
AUC of PRC = 0.63594
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.0910940021276474
difference in average predicted and observed risk = 0.0013500021276473956
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.853119
AUC of PRC = 0.454571
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.19166000187397003
difference in average predicted and observed risk = 0.03781400187397002
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1487   42]
 [ 169   75]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12655900418758392
difference in average predicted and observed risk = -0.011060995812416069
number samples = 1773
accuracy = 0.880993
precision class 0 = 0.897947
precision class 1 = 0.641026
recall class 0 = 0.972531
recall class 1 = 0.307377
false negative rate = 0.692623
false positive rate = 0.027469
positive prediction rate = 0.06599
AUC of ROC = 0.853673
AUC of PRC = 0.544733
min(+P, Se) = 0.516393

-------------------------------

confusion matrix:
[[1227   30]
 [ 127   65]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12994499504566193
difference in average predicted and observed risk = -0.0025600049543380854
number samples = 1449
accuracy = 0.891649
precision class 0 = 0.906204
precision class 1 = 0.684211
recall class 0 = 0.976134
recall class 1 = 0.338542
false negative rate = 0.661458
false positive rate = 0.023866
positive prediction rate = 0.065562
AUC of ROC = 0.863556
AUC of PRC = 0.576294
min(+P, Se) = 0.557292

-------------------------------

confusion matrix:
[[1928   50]
 [ 220   91]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1260640025138855
difference in average predicted and observed risk = -0.00980299748611449
number samples = 2289
accuracy = 0.882045
precision class 0 = 0.897579
precision class 1 = 0.64539
recall class 0 = 0.974722
recall class 1 = 0.292605
false negative rate = 0.707395
false positive rate = 0.025278
positive prediction rate = 0.061599
AUC of ROC = 0.850299
AUC of PRC = 0.544114
min(+P, Se) = 0.522436

-------------------------------

confusion matrix:
[[356  12]
 [ 51  30]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.14429299533367157
difference in average predicted and observed risk = -0.036108004666328436
number samples = 449
accuracy = 0.859688
precision class 0 = 0.874693
precision class 1 = 0.714286
recall class 0 = 0.967391
recall class 1 = 0.37037
false negative rate = 0.62963
false positive rate = 0.032609
positive prediction rate = 0.093541
AUC of ROC = 0.864835
AUC of PRC = 0.627846
min(+P, Se) = 0.567901

-------------------------------

confusion matrix:
[[274   4]
 [ 18  12]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.11502999812364578
difference in average predicted and observed risk = 0.01762699812364578
number samples = 308
accuracy = 0.928571
precision class 0 = 0.938356
precision class 1 = 0.75
recall class 0 = 0.985611
recall class 1 = 0.4
false negative rate = 0.6
false positive rate = 0.014388
positive prediction rate = 0.051948
AUC of ROC = 0.897242
AUC of PRC = 0.596345
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[86  4]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11778099834918976
difference in average predicted and observed risk = 0.04561599834918975
number samples = 97
accuracy = 0.907216
precision class 0 = 0.945055
precision class 1 = 0.333333
recall class 0 = 0.955556
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.044444
positive prediction rate = 0.061856
AUC of ROC = 0.898413
AUC of PRC = 0.297586
min(+P, Se) = 0.357143

-------------------------------

confusion matrix:
[[70  2]
 [ 2  5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.15794500708580017
difference in average predicted and observed risk = 0.06933700708580016
number samples = 79
accuracy = 0.949367
precision class 0 = 0.972222
precision class 1 = 0.714286
recall class 0 = 0.972222
recall class 1 = 0.714286
false negative rate = 0.285714
false positive rate = 0.027778
positive prediction rate = 0.088608
AUC of ROC = 0.900794
AUC of PRC = 0.798033
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2714   72]
 [ 296  140]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.1280820071697235
difference in average predicted and observed risk = -0.007237992830276485
number samples = 3222
accuracy = 0.885785
precision class 0 = 0.901661
precision class 1 = 0.660377
recall class 0 = 0.974156
recall class 1 = 0.321101
false negative rate = 0.678899
false positive rate = 0.025844
positive prediction rate = 0.065798
AUC of ROC = 0.85759
AUC of PRC = 0.5587
min(+P, Se) = 0.53211

-------------------------------

Epoch 00097: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch97.state
Epoch 98/100
 - 822s - loss: 0.2519 - val_loss: 0.2905

==>predicting on train



confusion matrix:
[[6985   51]
 [ 849  463]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12954699993133545
difference in average predicted and observed risk = -0.027616000068664548
number samples = 8348
accuracy = 0.89219
precision class 0 = 0.891626
precision class 1 = 0.900778
recall class 0 = 0.992752
recall class 1 = 0.352896
false negative rate = 0.647104
false positive rate = 0.007248
positive prediction rate = 0.061572
AUC of ROC = 0.918883
AUC of PRC = 0.740331
min(+P, Se) = 0.651677

-------------------------------

confusion matrix:
[[3965   37]
 [ 245  226]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.10409300029277802
difference in average predicted and observed risk = -0.0012049997072219876
number samples = 4473
accuracy = 0.936955
precision class 0 = 0.941805
precision class 1 = 0.859316
recall class 0 = 0.990755
recall class 1 = 0.47983
false negative rate = 0.52017
false positive rate = 0.009245
positive prediction rate = 0.058797
AUC of ROC = 0.941851
AUC of PRC = 0.75588
min(+P, Se) = 0.660377

-------------------------------

confusion matrix:
[[1184   11]
 [  78   65]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.109825000166893
difference in average predicted and observed risk = 0.0029490001668930066
number samples = 1338
accuracy = 0.933483
precision class 0 = 0.938193
precision class 1 = 0.855263
recall class 0 = 0.990795
recall class 1 = 0.454545
false negative rate = 0.545455
false positive rate = 0.009205
positive prediction rate = 0.056801
AUC of ROC = 0.942177
AUC of PRC = 0.726174
min(+P, Se) = 0.651007

-------------------------------

confusion matrix:
[[349   1]
 [ 21  18]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09744799882173538
difference in average predicted and observed risk = -0.002809001178264617
number samples = 389
accuracy = 0.943445
precision class 0 = 0.943243
precision class 1 = 0.947368
recall class 0 = 0.997143
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.002857
positive prediction rate = 0.048843
AUC of ROC = 0.946813
AUC of PRC = 0.763056
min(+P, Se) = 0.7

-------------------------------

confusion matrix:
[[110   1]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16982300579547882
difference in average predicted and observed risk = 0.004409005795478815
number samples = 133
accuracy = 0.93985
precision class 0 = 0.940171
precision class 1 = 0.9375
recall class 0 = 0.990991
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.009009
positive prediction rate = 0.120301
AUC of ROC = 0.968878
AUC of PRC = 0.904885
min(+P, Se) = 0.791667

-------------------------------

confusion matrix:
[[6930   56]
 [ 646  427]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.11522600054740906
difference in average predicted and observed risk = -0.017916999452590954
number samples = 8059
accuracy = 0.912892
precision class 0 = 0.914731
precision class 1 = 0.884058
recall class 0 = 0.991984
recall class 1 = 0.39795
false negative rate = 0.60205
false positive rate = 0.008016
positive prediction rate = 0.059933
AUC of ROC = 0.933968
AUC of PRC = 0.750638
min(+P, Se) = 0.669145

-------------------------------

confusion matrix:
[[5663   45]
 [ 554  360]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.124720998108387
difference in average predicted and observed risk = -0.013304001891613015
number samples = 6622
accuracy = 0.909544
precision class 0 = 0.91089
precision class 1 = 0.888889
recall class 0 = 0.992116
recall class 1 = 0.393873
false negative rate = 0.606127
false positive rate = 0.007884
positive prediction rate = 0.06116
AUC of ROC = 0.923383
AUC of PRC = 0.734529
min(+P, Se) = 0.645514

-------------------------------

confusion matrix:
[[8986   60]
 [ 858  505]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.11539400368928909
difference in average predicted and observed risk = -0.015549996310710912
number samples = 10409
accuracy = 0.911807
precision class 0 = 0.91284
precision class 1 = 0.893805
recall class 0 = 0.993367
recall class 1 = 0.370506
false negative rate = 0.629494
false positive rate = 0.006633
positive prediction rate = 0.05428
AUC of ROC = 0.927313
AUC of PRC = 0.730515
min(+P, Se) = 0.644167

-------------------------------

confusion matrix:
[[1622   19]
 [ 229  178]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.14749500155448914
difference in average predicted and observed risk = -0.051234998445510854
number samples = 2048
accuracy = 0.878906
precision class 0 = 0.876283
precision class 1 = 0.903553
recall class 0 = 0.988422
recall class 1 = 0.437346
false negative rate = 0.562654
false positive rate = 0.011578
positive prediction rate = 0.096191
AUC of ROC = 0.93722
AUC of PRC = 0.809124
min(+P, Se) = 0.710145

-------------------------------

confusion matrix:
[[1273    9]
 [  67   59]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.10746300220489502
difference in average predicted and observed risk = 0.01797400220489502
number samples = 1408
accuracy = 0.946023
precision class 0 = 0.95
precision class 1 = 0.867647
recall class 0 = 0.99298
recall class 1 = 0.468254
false negative rate = 0.531746
false positive rate = 0.00702
positive prediction rate = 0.048295
AUC of ROC = 0.934793
AUC of PRC = 0.738235
min(+P, Se) = 0.671875

-------------------------------

confusion matrix:
[[287   9]
 [ 28  24]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1502539962530136
difference in average predicted and observed risk = 0.0008289962530136086
number samples = 348
accuracy = 0.893678
precision class 0 = 0.911111
precision class 1 = 0.727273
recall class 0 = 0.969595
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.030405
positive prediction rate = 0.094828
AUC of ROC = 0.907484
AUC of PRC = 0.718453
min(+P, Se) = 0.637931

-------------------------------

confusion matrix:
[[425   4]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.10193999856710434
difference in average predicted and observed risk = 0.018606998567104335
number samples = 468
accuracy = 0.952991
precision class 0 = 0.959368
precision class 1 = 0.84
recall class 0 = 0.990676
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.009324
positive prediction rate = 0.053419
AUC of ROC = 0.922778
AUC of PRC = 0.706725
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[12593   101]
 [ 1200   787]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11950899660587311
difference in average predicted and observed risk = -0.015836003394126885
number samples = 14681
accuracy = 0.911382
precision class 0 = 0.912999
precision class 1 = 0.886261
recall class 0 = 0.992043
recall class 1 = 0.396074
false negative rate = 0.603926
false positive rate = 0.007957
positive prediction rate = 0.060486
AUC of ROC = 0.929186
AUC of PRC = 0.743104
min(+P, Se) = 0.657272

-------------------------------

==>predicting on validation



confusion matrix:
[[1504   31]
 [ 196   82]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.13245099782943726
difference in average predicted and observed risk = -0.020886002170562745
number samples = 1813
accuracy = 0.874793
precision class 0 = 0.884706
precision class 1 = 0.725664
recall class 0 = 0.979805
recall class 1 = 0.294964
false negative rate = 0.705036
false positive rate = 0.020195
positive prediction rate = 0.062328
AUC of ROC = 0.84156
AUC of PRC = 0.565479
min(+P, Se) = 0.514388

-------------------------------

confusion matrix:
[[890  17]
 [ 83  30]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.10399000346660614
difference in average predicted and observed risk = -0.0067939965333938535
number samples = 1020
accuracy = 0.901961
precision class 0 = 0.914697
precision class 1 = 0.638298
recall class 0 = 0.981257
recall class 1 = 0.265487
false negative rate = 0.734513
false positive rate = 0.018743
positive prediction rate = 0.046078
AUC of ROC = 0.850719
AUC of PRC = 0.501797
min(+P, Se) = 0.517544

-------------------------------

confusion matrix:
[[245   6]
 [ 21  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.12540100514888763
difference in average predicted and observed risk = 0.006103005148887633
number samples = 285
accuracy = 0.905263
precision class 0 = 0.921053
precision class 1 = 0.684211
recall class 0 = 0.976096
recall class 1 = 0.382353
false negative rate = 0.617647
false positive rate = 0.023904
positive prediction rate = 0.066667
AUC of ROC = 0.898172
AUC of PRC = 0.609209
min(+P, Se) = 0.542857

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08796600252389908
difference in average predicted and observed risk = -0.001777997476100926
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.832998
AUC of PRC = 0.41464
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.18873299658298492
difference in average predicted and observed risk = 0.034886996582984914
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.965909
AUC of PRC = 0.766667
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1496   33]
 [ 170   74]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.12146099656820297
difference in average predicted and observed risk = -0.01615900343179702
number samples = 1773
accuracy = 0.885505
precision class 0 = 0.897959
precision class 1 = 0.691589
recall class 0 = 0.978417
recall class 1 = 0.303279
false negative rate = 0.696721
false positive rate = 0.021583
positive prediction rate = 0.06035
AUC of ROC = 0.849446
AUC of PRC = 0.540339
min(+P, Se) = 0.510204

-------------------------------

confusion matrix:
[[1233   24]
 [ 136   56]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.12309200316667557
difference in average predicted and observed risk = -0.009412996833324444
number samples = 1449
accuracy = 0.889579
precision class 0 = 0.900657
precision class 1 = 0.7
recall class 0 = 0.980907
recall class 1 = 0.291667
false negative rate = 0.708333
false positive rate = 0.019093
positive prediction rate = 0.05521
AUC of ROC = 0.857353
AUC of PRC = 0.567112
min(+P, Se) = 0.541667

-------------------------------

confusion matrix:
[[1937   41]
 [ 224   87]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.11966399848461151
difference in average predicted and observed risk = -0.016203001515388477
number samples = 2289
accuracy = 0.884229
precision class 0 = 0.896344
precision class 1 = 0.679688
recall class 0 = 0.979272
recall class 1 = 0.279743
false negative rate = 0.720257
false positive rate = 0.020728
positive prediction rate = 0.05592
AUC of ROC = 0.846856
AUC of PRC = 0.538875
min(+P, Se) = 0.512821

-------------------------------

confusion matrix:
[[361   7]
 [ 56  25]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.13970699906349182
difference in average predicted and observed risk = -0.040694000936508185
number samples = 449
accuracy = 0.859688
precision class 0 = 0.865707
precision class 1 = 0.78125
recall class 0 = 0.980978
recall class 1 = 0.308642
false negative rate = 0.691358
false positive rate = 0.019022
positive prediction rate = 0.071269
AUC of ROC = 0.85675
AUC of PRC = 0.627201
min(+P, Se) = 0.573171

-------------------------------

confusion matrix:
[[274   4]
 [ 18  12]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10957899689674377
difference in average predicted and observed risk = 0.012175996896743771
number samples = 308
accuracy = 0.928571
precision class 0 = 0.938356
precision class 1 = 0.75
recall class 0 = 0.985611
recall class 1 = 0.4
false negative rate = 0.6
false positive rate = 0.014388
positive prediction rate = 0.051948
AUC of ROC = 0.885851
AUC of PRC = 0.559514
min(+P, Se) = 0.566667

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.11580099910497665
difference in average predicted and observed risk = 0.04363599910497665
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.901587
AUC of PRC = 0.295641
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1530199944972992
difference in average predicted and observed risk = 0.06441199449729919
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.900794
AUC of PRC = 0.76349
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[2729   57]
 [ 306  130]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.12219399958848953
difference in average predicted and observed risk = -0.013126000411510463
number samples = 3222
accuracy = 0.887337
precision class 0 = 0.899176
precision class 1 = 0.695187
recall class 0 = 0.979541
recall class 1 = 0.298165
false negative rate = 0.701835
false positive rate = 0.020459
positive prediction rate = 0.058038
AUC of ROC = 0.8524
AUC of PRC = 0.55179
min(+P, Se) = 0.521739

-------------------------------

Epoch 00098: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch98.state
Epoch 99/100
 - 820s - loss: 0.2563 - val_loss: 0.2874

==>predicting on train



confusion matrix:
[[6999   37]
 [ 929  383]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.12116300314664841
difference in average predicted and observed risk = -0.03599999685335159
number samples = 8348
accuracy = 0.884284
precision class 0 = 0.88282
precision class 1 = 0.911905
recall class 0 = 0.994741
recall class 1 = 0.291921
false negative rate = 0.708079
false positive rate = 0.005259
positive prediction rate = 0.050311
AUC of ROC = 0.916319
AUC of PRC = 0.72744
min(+P, Se) = 0.647104

-------------------------------

confusion matrix:
[[3982   20]
 [ 266  205]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.09998399764299393
difference in average predicted and observed risk = -0.005314002357006076
number samples = 4473
accuracy = 0.936061
precision class 0 = 0.937382
precision class 1 = 0.911111
recall class 0 = 0.995003
recall class 1 = 0.435244
false negative rate = 0.564756
false positive rate = 0.004998
positive prediction rate = 0.050302
AUC of ROC = 0.93721
AUC of PRC = 0.742871
min(+P, Se) = 0.643312

-------------------------------

confusion matrix:
[[1188    7]
 [  82   61]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10709399729967117
difference in average predicted and observed risk = 0.00021799729967117432
number samples = 1338
accuracy = 0.933483
precision class 0 = 0.935433
precision class 1 = 0.897059
recall class 0 = 0.994142
recall class 1 = 0.426573
false negative rate = 0.573427
false positive rate = 0.005858
positive prediction rate = 0.050822
AUC of ROC = 0.942833
AUC of PRC = 0.736676
min(+P, Se) = 0.652778

-------------------------------

confusion matrix:
[[349   1]
 [ 26  13]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.09257599711418152
difference in average predicted and observed risk = -0.00768100288581848
number samples = 389
accuracy = 0.930591
precision class 0 = 0.930667
precision class 1 = 0.928571
recall class 0 = 0.997143
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.002857
positive prediction rate = 0.03599
AUC of ROC = 0.929304
AUC of PRC = 0.717421
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[110   1]
 [  8  14]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.15723499655723572
difference in average predicted and observed risk = -0.008179003442764288
number samples = 133
accuracy = 0.932331
precision class 0 = 0.932203
precision class 1 = 0.933333
recall class 0 = 0.990991
recall class 1 = 0.636364
false negative rate = 0.363636
false positive rate = 0.009009
positive prediction rate = 0.112782
AUC of ROC = 0.969287
AUC of PRC = 0.903971
min(+P, Se) = 0.818182

-------------------------------

confusion matrix:
[[6945   41]
 [ 690  383]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.10999500006437302
difference in average predicted and observed risk = -0.023147999935626995
number samples = 8059
accuracy = 0.909294
precision class 0 = 0.909627
precision class 1 = 0.903302
recall class 0 = 0.994131
recall class 1 = 0.356943
false negative rate = 0.643057
false positive rate = 0.005869
positive prediction rate = 0.052612
AUC of ROC = 0.930449
AUC of PRC = 0.741043
min(+P, Se) = 0.655172

-------------------------------

confusion matrix:
[[5683   25]
 [ 621  293]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11665099859237671
difference in average predicted and observed risk = -0.0213740014076233
number samples = 6622
accuracy = 0.902446
precision class 0 = 0.901491
precision class 1 = 0.921384
recall class 0 = 0.99562
recall class 1 = 0.320569
false negative rate = 0.679431
false positive rate = 0.00438
positive prediction rate = 0.048022
AUC of ROC = 0.92018
AUC of PRC = 0.718143
min(+P, Se) = 0.633479

-------------------------------

confusion matrix:
[[9002   44]
 [ 936  427]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10884899646043777
difference in average predicted and observed risk = -0.02209500353956223
number samples = 10409
accuracy = 0.905851
precision class 0 = 0.905816
precision class 1 = 0.906582
recall class 0 = 0.995136
recall class 1 = 0.31328
false negative rate = 0.68672
false positive rate = 0.004864
positive prediction rate = 0.045249
AUC of ROC = 0.924258
AUC of PRC = 0.714912
min(+P, Se) = 0.632698

-------------------------------

confusion matrix:
[[1629   12]
 [ 250  157]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.1392199993133545
difference in average predicted and observed risk = -0.0595100006866455
number samples = 2048
accuracy = 0.87207
precision class 0 = 0.866951
precision class 1 = 0.928994
recall class 0 = 0.992687
recall class 1 = 0.385749
false negative rate = 0.614251
false positive rate = 0.007313
positive prediction rate = 0.08252
AUC of ROC = 0.932846
AUC of PRC = 0.800358
min(+P, Se) = 0.712531

-------------------------------

confusion matrix:
[[1277    5]
 [  73   53]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.1039000004529953
difference in average predicted and observed risk = 0.014411000452995301
number samples = 1408
accuracy = 0.944602
precision class 0 = 0.945926
precision class 1 = 0.913793
recall class 0 = 0.9961
recall class 1 = 0.420635
false negative rate = 0.579365
false positive rate = 0.0039
positive prediction rate = 0.041193
AUC of ROC = 0.93176
AUC of PRC = 0.73211
min(+P, Se) = 0.645669

-------------------------------

confusion matrix:
[[292   4]
 [ 31  21]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.1409199982881546
difference in average predicted and observed risk = -0.0085050017118454
number samples = 348
accuracy = 0.899425
precision class 0 = 0.904025
precision class 1 = 0.84
recall class 0 = 0.986486
recall class 1 = 0.403846
false negative rate = 0.596154
false positive rate = 0.013514
positive prediction rate = 0.071839
AUC of ROC = 0.90651
AUC of PRC = 0.726838
min(+P, Se) = 0.653846

-------------------------------

confusion matrix:
[[428   1]
 [ 21  18]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.09710600227117538
difference in average predicted and observed risk = 0.01377300227117538
number samples = 468
accuracy = 0.952991
precision class 0 = 0.953229
precision class 1 = 0.947368
recall class 0 = 0.997669
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.002331
positive prediction rate = 0.040598
AUC of ROC = 0.921224
AUC of PRC = 0.698892
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12628    66]
 [ 1311   676]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.11299700289964676
difference in average predicted and observed risk = -0.022347997100353234
number samples = 14681
accuracy = 0.906205
precision class 0 = 0.905947
precision class 1 = 0.911051
recall class 0 = 0.994801
recall class 1 = 0.340211
false negative rate = 0.659789
false positive rate = 0.005199
positive prediction rate = 0.050542
AUC of ROC = 0.925844
AUC of PRC = 0.73062
min(+P, Se) = 0.646378

-------------------------------

==>predicting on validation



confusion matrix:
[[1510   25]
 [ 207   71]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.1242469996213913
difference in average predicted and observed risk = -0.029090000378608705
number samples = 1813
accuracy = 0.872035
precision class 0 = 0.879441
precision class 1 = 0.739583
recall class 0 = 0.983713
recall class 1 = 0.255396
false negative rate = 0.744604
false positive rate = 0.016287
positive prediction rate = 0.052951
AUC of ROC = 0.849228
AUC of PRC = 0.567761
min(+P, Se) = 0.517986

-------------------------------

confusion matrix:
[[893  14]
 [ 88  25]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.099822998046875
difference in average predicted and observed risk = -0.010961001953124994
number samples = 1020
accuracy = 0.9
precision class 0 = 0.910296
precision class 1 = 0.641026
recall class 0 = 0.984564
recall class 1 = 0.221239
false negative rate = 0.778761
false positive rate = 0.015436
positive prediction rate = 0.038235
AUC of ROC = 0.849109
AUC of PRC = 0.492069
min(+P, Se) = 0.492063

-------------------------------

confusion matrix:
[[246   5]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.11956299841403961
difference in average predicted and observed risk = 0.00026499841403961055
number samples = 285
accuracy = 0.912281
precision class 0 = 0.924812
precision class 1 = 0.736842
recall class 0 = 0.98008
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.01992
positive prediction rate = 0.066667
AUC of ROC = 0.890555
AUC of PRC = 0.628593
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08670300245285034
difference in average predicted and observed risk = -0.0030409975471496625
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.788732
AUC of PRC = 0.395364
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[21  1]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17310099303722382
difference in average predicted and observed risk = 0.019254993037223805
number samples = 26
accuracy = 0.923077
precision class 0 = 0.954545
precision class 1 = 0.75
recall class 0 = 0.954545
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.045455
positive prediction rate = 0.153846
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1501   28]
 [ 178   66]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.11579400300979614
difference in average predicted and observed risk = -0.02182599699020385
number samples = 1773
accuracy = 0.883813
precision class 0 = 0.893984
precision class 1 = 0.702128
recall class 0 = 0.981687
recall class 1 = 0.270492
false negative rate = 0.729508
false positive rate = 0.018313
positive prediction rate = 0.053017
AUC of ROC = 0.851368
AUC of PRC = 0.53954
min(+P, Se) = 0.510121

-------------------------------

confusion matrix:
[[1238   19]
 [ 144   48]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.1153310015797615
difference in average predicted and observed risk = -0.017173998420238507
number samples = 1449
accuracy = 0.887509
precision class 0 = 0.895803
precision class 1 = 0.716418
recall class 0 = 0.984885
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.015115
positive prediction rate = 0.046239
AUC of ROC = 0.86032
AUC of PRC = 0.567848
min(+P, Se) = 0.523316

-------------------------------

confusion matrix:
[[1943   35]
 [ 237   74]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.1137320026755333
difference in average predicted and observed risk = -0.022134997324466693
number samples = 2289
accuracy = 0.881171
precision class 0 = 0.891284
precision class 1 = 0.678899
recall class 0 = 0.982305
recall class 1 = 0.237942
false negative rate = 0.762058
false positive rate = 0.017695
positive prediction rate = 0.047619
AUC of ROC = 0.85122
AUC of PRC = 0.539114
min(+P, Se) = 0.51746

-------------------------------

confusion matrix:
[[363   5]
 [ 57  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1290069967508316
difference in average predicted and observed risk = -0.0513940032491684
number samples = 449
accuracy = 0.861915
precision class 0 = 0.864286
precision class 1 = 0.827586
recall class 0 = 0.986413
recall class 1 = 0.296296
false negative rate = 0.703704
false positive rate = 0.013587
positive prediction rate = 0.064588
AUC of ROC = 0.855106
AUC of PRC = 0.630858
min(+P, Se) = 0.556818

-------------------------------

confusion matrix:
[[275   3]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.10540899634361267
difference in average predicted and observed risk = 0.008005996343612667
number samples = 308
accuracy = 0.925325
precision class 0 = 0.932203
precision class 1 = 0.769231
recall class 0 = 0.989209
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.010791
positive prediction rate = 0.042208
AUC of ROC = 0.890767
AUC of PRC = 0.581324
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10841300338506699
difference in average predicted and observed risk = 0.03624800338506698
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.895238
AUC of PRC = 0.291982
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[71  1]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.1415179967880249
difference in average predicted and observed risk = 0.052909996788024896
number samples = 79
accuracy = 0.949367
precision class 0 = 0.959459
precision class 1 = 0.8
recall class 0 = 0.986111
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.013889
positive prediction rate = 0.063291
AUC of ROC = 0.873016
AUC of PRC = 0.706205
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[2739   47]
 [ 322  114]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11558599770069122
difference in average predicted and observed risk = -0.019734002299308773
number samples = 3222
accuracy = 0.885475
precision class 0 = 0.894806
precision class 1 = 0.708075
recall class 0 = 0.98313
recall class 1 = 0.261468
false negative rate = 0.738532
false positive rate = 0.01687
positive prediction rate = 0.049969
AUC of ROC = 0.855134
AUC of PRC = 0.552337
min(+P, Se) = 0.516055

-------------------------------

Epoch 00099: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch99.state
Epoch 100/100
 - 824s - loss: 0.2538 - val_loss: 0.2936

==>predicting on train



confusion matrix:
[[6988   48]
 [ 877  435]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.157163
average predicted risk of IHM = 0.11720799654722214
difference in average predicted and observed risk = -0.03995500345277786
number samples = 8348
accuracy = 0.889195
precision class 0 = 0.888493
precision class 1 = 0.900621
recall class 0 = 0.993178
recall class 1 = 0.331555
false negative rate = 0.668445
false positive rate = 0.006822
positive prediction rate = 0.057858
AUC of ROC = 0.919626
AUC of PRC = 0.736973
min(+P, Se) = 0.653201

-------------------------------

confusion matrix:
[[3964   38]
 [ 256  215]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.105298
average predicted risk of IHM = 0.0972519963979721
difference in average predicted and observed risk = -0.008046003602027896
number samples = 4473
accuracy = 0.934272
precision class 0 = 0.939336
precision class 1 = 0.849802
recall class 0 = 0.990505
recall class 1 = 0.456476
false negative rate = 0.543524
false positive rate = 0.009495
positive prediction rate = 0.056562
AUC of ROC = 0.937083
AUC of PRC = 0.740334
min(+P, Se) = 0.650424

-------------------------------

confusion matrix:
[[1180   15]
 [  79   64]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.106876
average predicted risk of IHM = 0.10421700030565262
difference in average predicted and observed risk = -0.0026589996943473804
number samples = 1338
accuracy = 0.929746
precision class 0 = 0.937252
precision class 1 = 0.810127
recall class 0 = 0.987448
recall class 1 = 0.447552
false negative rate = 0.552448
false positive rate = 0.012552
positive prediction rate = 0.059043
AUC of ROC = 0.943283
AUC of PRC = 0.725857
min(+P, Se) = 0.645833

-------------------------------

confusion matrix:
[[348   2]
 [ 23  16]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.100257
average predicted risk of IHM = 0.08967900276184082
difference in average predicted and observed risk = -0.010577997238159179
number samples = 389
accuracy = 0.935733
precision class 0 = 0.938005
precision class 1 = 0.888889
recall class 0 = 0.994286
recall class 1 = 0.410256
false negative rate = 0.589744
false positive rate = 0.005714
positive prediction rate = 0.046272
AUC of ROC = 0.936923
AUC of PRC = 0.7294
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[110   1]
 [  7  15]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.165414
average predicted risk of IHM = 0.16271500289440155
difference in average predicted and observed risk = -0.002698997105598455
number samples = 133
accuracy = 0.93985
precision class 0 = 0.940171
precision class 1 = 0.9375
recall class 0 = 0.990991
recall class 1 = 0.681818
false negative rate = 0.318182
false positive rate = 0.009009
positive prediction rate = 0.120301
AUC of ROC = 0.964783
AUC of PRC = 0.903932
min(+P, Se) = 0.826087

-------------------------------

confusion matrix:
[[6927   59]
 [ 658  415]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.133143
average predicted risk of IHM = 0.10670199990272522
difference in average predicted and observed risk = -0.02644100009727479
number samples = 8059
accuracy = 0.911031
precision class 0 = 0.91325
precision class 1 = 0.875527
recall class 0 = 0.991555
recall class 1 = 0.386766
false negative rate = 0.613234
false positive rate = 0.008445
positive prediction rate = 0.058816
AUC of ROC = 0.931966
AUC of PRC = 0.742362
min(+P, Se) = 0.657968

-------------------------------

confusion matrix:
[[5663   45]
 [ 584  330]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.138025
average predicted risk of IHM = 0.11318500339984894
difference in average predicted and observed risk = -0.02483999660015107
number samples = 6622
accuracy = 0.905014
precision class 0 = 0.906515
precision class 1 = 0.88
recall class 0 = 0.992116
recall class 1 = 0.36105
false negative rate = 0.63895
false positive rate = 0.007884
positive prediction rate = 0.056629
AUC of ROC = 0.922546
AUC of PRC = 0.727395
min(+P, Se) = 0.645514

-------------------------------

confusion matrix:
[[8979   67]
 [ 882  481]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.130944
average predicted risk of IHM = 0.10517200082540512
difference in average predicted and observed risk = -0.025771999174594884
number samples = 10409
accuracy = 0.908829
precision class 0 = 0.910557
precision class 1 = 0.877737
recall class 0 = 0.992593
recall class 1 = 0.352898
false negative rate = 0.647102
false positive rate = 0.007407
positive prediction rate = 0.052647
AUC of ROC = 0.925806
AUC of PRC = 0.721612
min(+P, Se) = 0.638298

-------------------------------

confusion matrix:
[[1624   17]
 [ 240  167]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.19873
average predicted risk of IHM = 0.139847993850708
difference in average predicted and observed risk = -0.05888200614929198
number samples = 2048
accuracy = 0.874512
precision class 0 = 0.871245
precision class 1 = 0.907609
recall class 0 = 0.98964
recall class 1 = 0.410319
false negative rate = 0.589681
false positive rate = 0.01036
positive prediction rate = 0.089844
AUC of ROC = 0.935705
AUC of PRC = 0.805143
min(+P, Se) = 0.714988

-------------------------------

confusion matrix:
[[1273    9]
 [  74   52]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.089489
average predicted risk of IHM = 0.09717799723148346
difference in average predicted and observed risk = 0.00768899723148346
number samples = 1408
accuracy = 0.941051
precision class 0 = 0.945063
precision class 1 = 0.852459
recall class 0 = 0.99298
recall class 1 = 0.412698
false negative rate = 0.587302
false positive rate = 0.00702
positive prediction rate = 0.043324
AUC of ROC = 0.931859
AUC of PRC = 0.723357
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[289   7]
 [ 28  24]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.149425
average predicted risk of IHM = 0.13868500292301178
difference in average predicted and observed risk = -0.010739997076988222
number samples = 348
accuracy = 0.899425
precision class 0 = 0.911672
precision class 1 = 0.774194
recall class 0 = 0.976351
recall class 1 = 0.461538
false negative rate = 0.538462
false positive rate = 0.023649
positive prediction rate = 0.08908
AUC of ROC = 0.907549
AUC of PRC = 0.730593
min(+P, Se) = 0.660377

-------------------------------

confusion matrix:
[[425   4]
 [ 18  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.083333
average predicted risk of IHM = 0.09230200201272964
difference in average predicted and observed risk = 0.00896900201272964
number samples = 468
accuracy = 0.952991
precision class 0 = 0.959368
precision class 1 = 0.84
recall class 0 = 0.990676
recall class 1 = 0.538462
false negative rate = 0.461538
false positive rate = 0.009324
positive prediction rate = 0.053419
AUC of ROC = 0.925587
AUC of PRC = 0.685387
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[12590   104]
 [ 1242   745]]
prevalence of IHM = 0.135345
average predicted risk of IHM = 0.10962700098752975
difference in average predicted and observed risk = -0.02571799901247024
number samples = 14681
accuracy = 0.908317
precision class 0 = 0.910208
precision class 1 = 0.877503
recall class 0 = 0.991807
recall class 1 = 0.374937
false negative rate = 0.625063
false positive rate = 0.008193
positive prediction rate = 0.05783
AUC of ROC = 0.927745
AUC of PRC = 0.735444
min(+P, Se) = 0.65224

-------------------------------

==>predicting on validation



confusion matrix:
[[1505   30]
 [ 197   81]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.153337
average predicted risk of IHM = 0.11960399895906448
difference in average predicted and observed risk = -0.03373300104093552
number samples = 1813
accuracy = 0.874793
precision class 0 = 0.884254
precision class 1 = 0.72973
recall class 0 = 0.980456
recall class 1 = 0.291367
false negative rate = 0.708633
false positive rate = 0.019544
positive prediction rate = 0.061224
AUC of ROC = 0.851374
AUC of PRC = 0.568928
min(+P, Se) = 0.531915

-------------------------------

confusion matrix:
[[890  17]
 [ 84  29]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.110784
average predicted risk of IHM = 0.09661299735307693
difference in average predicted and observed risk = -0.014171002646923059
number samples = 1020
accuracy = 0.90098
precision class 0 = 0.913758
precision class 1 = 0.630435
recall class 0 = 0.981257
recall class 1 = 0.256637
false negative rate = 0.743363
false positive rate = 0.018743
positive prediction rate = 0.045098
AUC of ROC = 0.847274
AUC of PRC = 0.496632
min(+P, Se) = 0.495575

-------------------------------

confusion matrix:
[[244   7]
 [ 20  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.119298
average predicted risk of IHM = 0.1160769984126091
difference in average predicted and observed risk = -0.003221001587390901
number samples = 285
accuracy = 0.905263
precision class 0 = 0.924242
precision class 1 = 0.666667
recall class 0 = 0.972112
recall class 1 = 0.411765
false negative rate = 0.588235
false positive rate = 0.027888
positive prediction rate = 0.073684
AUC of ROC = 0.893954
AUC of PRC = 0.609134
min(+P, Se) = 0.558824

-------------------------------

confusion matrix:
[[69  2]
 [ 6  1]]

stratified metric for:
demographic variable: Insurance
value: Government

overall metrics:
prevalence of IHM = 0.089744
average predicted risk of IHM = 0.08777900040149689
difference in average predicted and observed risk = -0.001964999598503117
number samples = 78
accuracy = 0.897436
precision class 0 = 0.92
precision class 1 = 0.333333
recall class 0 = 0.971831
recall class 1 = 0.142857
false negative rate = 0.857143
false positive rate = 0.028169
positive prediction rate = 0.038462
AUC of ROC = 0.784708
AUC of PRC = 0.405551
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[21  1]
 [ 0  4]]

stratified metric for:
demographic variable: Insurance
value: Self Pay

overall metrics:
prevalence of IHM = 0.153846
average predicted risk of IHM = 0.17792199552059174
difference in average predicted and observed risk = 0.024075995520591725
number samples = 26
accuracy = 0.961538
precision class 0 = 1.0
precision class 1 = 0.8
recall class 0 = 0.954545
recall class 1 = 1.0
false negative rate = 0.0
false positive rate = 0.045455
positive prediction rate = 0.192308
AUC of ROC = 0.954545
AUC of PRC = 0.579167
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[1493   36]
 [ 168   76]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.13762
average predicted risk of IHM = 0.1132270023226738
difference in average predicted and observed risk = -0.024392997677326195
number samples = 1773
accuracy = 0.884941
precision class 0 = 0.898856
precision class 1 = 0.678571
recall class 0 = 0.976455
recall class 1 = 0.311475
false negative rate = 0.688525
false positive rate = 0.023545
positive prediction rate = 0.06317
AUC of ROC = 0.853076
AUC of PRC = 0.544004
min(+P, Se) = 0.520492

-------------------------------

confusion matrix:
[[1236   21]
 [ 139   53]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.132505
average predicted risk of IHM = 0.10986100137233734
difference in average predicted and observed risk = -0.02264399862766267
number samples = 1449
accuracy = 0.889579
precision class 0 = 0.898909
precision class 1 = 0.716216
recall class 0 = 0.983294
recall class 1 = 0.276042
false negative rate = 0.723958
false positive rate = 0.016706
positive prediction rate = 0.05107
AUC of ROC = 0.859487
AUC of PRC = 0.559365
min(+P, Se) = 0.520833

-------------------------------

confusion matrix:
[[1939   39]
 [ 222   89]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.135867
average predicted risk of IHM = 0.10897000133991241
difference in average predicted and observed risk = -0.026896998660087573
number samples = 2289
accuracy = 0.885976
precision class 0 = 0.89727
precision class 1 = 0.695312
recall class 0 = 0.980283
recall class 1 = 0.286174
false negative rate = 0.713826
false positive rate = 0.019717
positive prediction rate = 0.05592
AUC of ROC = 0.852836
AUC of PRC = 0.543497
min(+P, Se) = 0.524116

-------------------------------

confusion matrix:
[[359   9]
 [ 57  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.180401
average predicted risk of IHM = 0.1301259994506836
difference in average predicted and observed risk = -0.05027500054931641
number samples = 449
accuracy = 0.853007
precision class 0 = 0.862981
precision class 1 = 0.727273
recall class 0 = 0.975543
recall class 1 = 0.296296
false negative rate = 0.703704
false positive rate = 0.024457
positive prediction rate = 0.073497
AUC of ROC = 0.852691
AUC of PRC = 0.61403
min(+P, Se) = 0.54321

-------------------------------

confusion matrix:
[[274   4]
 [ 20  10]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.097403
average predicted risk of IHM = 0.09881900250911713
difference in average predicted and observed risk = 0.001416002509117123
number samples = 308
accuracy = 0.922078
precision class 0 = 0.931973
precision class 1 = 0.714286
recall class 0 = 0.985611
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.014388
positive prediction rate = 0.045455
AUC of ROC = 0.889089
AUC of PRC = 0.561565
min(+P, Se) = 0.548387

-------------------------------

confusion matrix:
[[87  3]
 [ 5  2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.072165
average predicted risk of IHM = 0.10767900198698044
difference in average predicted and observed risk = 0.03551400198698043
number samples = 97
accuracy = 0.917526
precision class 0 = 0.945652
precision class 1 = 0.4
recall class 0 = 0.966667
recall class 1 = 0.285714
false negative rate = 0.714286
false positive rate = 0.033333
positive prediction rate = 0.051546
AUC of ROC = 0.885714
AUC of PRC = 0.28058
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[70  2]
 [ 3  4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.088608
average predicted risk of IHM = 0.14179199934005737
difference in average predicted and observed risk = 0.05318399934005737
number samples = 79
accuracy = 0.936709
precision class 0 = 0.958904
precision class 1 = 0.666667
recall class 0 = 0.972222
recall class 1 = 0.571429
false negative rate = 0.428571
false positive rate = 0.027778
positive prediction rate = 0.075949
AUC of ROC = 0.882937
AUC of PRC = 0.737926
min(+P, Se) = 0.571429

-------------------------------

confusion matrix:
[[2729   57]
 [ 307  129]]
prevalence of IHM = 0.13532
average predicted risk of IHM = 0.11171399801969528
difference in average predicted and observed risk = -0.023606001980304714
number samples = 3222
accuracy = 0.887027
precision class 0 = 0.89888
precision class 1 = 0.693548
recall class 0 = 0.979541
recall class 1 = 0.295872
false negative rate = 0.704128
false positive rate = 0.020459
positive prediction rate = 0.057728
AUC of ROC = 0.855781
AUC of PRC = 0.551533
min(+P, Se) = 0.521739

-------------------------------

Epoch 00100: saving model to mimic3models/in_hospital_mortality/keras_states/2020-05-06_9-0/k_clstms.none.epoch100.state

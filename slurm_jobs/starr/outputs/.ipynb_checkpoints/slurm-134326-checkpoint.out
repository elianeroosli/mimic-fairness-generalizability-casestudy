TRAINING THE CHANNEL-WISE LSTM with augmented data
/share/pi/boussard/eroosli_work/benchmarking/models/ihm/main.py:10: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses
  import imp
Using TensorFlow backend.
2020-06-02 23:47:53.183097: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libnvinfer.so.6'; dlerror: libnvinfer.so.6: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /share/sw/open/oracle/18.5.0.0/lib/:
2020-06-02 23:47:53.189581: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libnvinfer_plugin.so.6'; dlerror: libnvinfer_plugin.so.6: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /share/sw/open/oracle/18.5.0.0/lib/:
2020-06-02 23:47:53.189602: W tensorflow/compiler/tf2tensorrt/utils/py_utils.cc:30] Cannot dlopen some TensorRT libraries. If you would like to use Nvidia GPU with TensorRT, please make sure the missing libraries mentioned above are installed properly.
normalizer state: /share/pi/boussard/eroosli_work/benchmarking/models/ihm/ihm_ts1.0.input_str_previous.start_time_zero.normalizer
==> using model models/keras_models/channel_wise_lstms.py
==> not used params in network class: dict_keys(['batch_size', 'beta_1', 'data', 'data_name', 'epochs', 'imputation', 'l1', 'l2', 'load_state', 'lr', 'mode', 'network', 'normalizer_state', 'optimizer', 'output_dir', 'prefix', 'save_every', 'small_part', 'target_repl_coef', 'timestep', 'verbose'])
==> excluded demographics: 
==> found 20 channels: ['Capillary refill rate', 'Diastolic blood pressure', 'Ethnicity', 'Fraction inspired oxygen', 'Gender', 'Glascow coma scale eye opening', 'Glascow coma scale motor response', 'Glascow coma scale total', 'Glascow coma scale verbal response', 'Glucose', 'Heart rate', 'Height', 'Insurance', 'Mean blood pressure', 'Oxygen saturation', 'Respiratory rate', 'Systolic blood pressure', 'Temperature', 'Weight', 'pH']
2020-06-02 23:47:58.612287: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /share/sw/open/oracle/18.5.0.0/lib/:
2020-06-02 23:47:58.612327: E tensorflow/stream_executor/cuda/cuda_driver.cc:351] failed call to cuInit: UNKNOWN ERROR (303)
2020-06-02 23:47:58.612350: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (slurm-compute-kvls7): /proc/driver/nvidia/version does not exist
2020-06-02 23:47:58.612541: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA
2020-06-02 23:47:58.642301: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100000000 Hz
2020-06-02 23:47:58.642525: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x5586f6ca6540 initialized for platform Host (this does not guarantee that XLA will be used). Devices:
2020-06-02 23:47:58.642557: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version
==> model.final_name: 2020-06-02_16-48.k_clstms.GEN_ETH_INS
==> compiling the model
Model: "network_1"
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
X (InputLayer)                  (None, None, 94)     0                                            
__________________________________________________________________________________________________
masking_1 (Masking)             (None, None, 94)     0           X[0][0]                          
__________________________________________________________________________________________________
slice_1 (Slice)                 (None, None, 3)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_2 (Slice)                 (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_3 (Slice)                 (None, None, 6)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_4 (Slice)                 (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_5 (Slice)                 (None, None, 5)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_6 (Slice)                 (None, None, 9)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_7 (Slice)                 (None, None, 13)     0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_8 (Slice)                 (None, None, 14)     0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_9 (Slice)                 (None, None, 13)     0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_10 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_11 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_12 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_13 (Slice)                (None, None, 7)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_14 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_15 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_16 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_17 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_18 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_19 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_20 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
bidirectional_1 (Bidirectional) (None, None, 8)      256         slice_1[0][0]                    
__________________________________________________________________________________________________
bidirectional_2 (Bidirectional) (None, None, 8)      224         slice_2[0][0]                    
__________________________________________________________________________________________________
bidirectional_3 (Bidirectional) (None, None, 8)      352         slice_3[0][0]                    
__________________________________________________________________________________________________
bidirectional_4 (Bidirectional) (None, None, 8)      224         slice_4[0][0]                    
__________________________________________________________________________________________________
bidirectional_5 (Bidirectional) (None, None, 8)      320         slice_5[0][0]                    
__________________________________________________________________________________________________
bidirectional_6 (Bidirectional) (None, None, 8)      448         slice_6[0][0]                    
__________________________________________________________________________________________________
bidirectional_7 (Bidirectional) (None, None, 8)      576         slice_7[0][0]                    
__________________________________________________________________________________________________
bidirectional_8 (Bidirectional) (None, None, 8)      608         slice_8[0][0]                    
__________________________________________________________________________________________________
bidirectional_9 (Bidirectional) (None, None, 8)      576         slice_9[0][0]                    
__________________________________________________________________________________________________
bidirectional_10 (Bidirectional (None, None, 8)      224         slice_10[0][0]                   
__________________________________________________________________________________________________
bidirectional_11 (Bidirectional (None, None, 8)      224         slice_11[0][0]                   
__________________________________________________________________________________________________
bidirectional_12 (Bidirectional (None, None, 8)      224         slice_12[0][0]                   
__________________________________________________________________________________________________
bidirectional_13 (Bidirectional (None, None, 8)      384         slice_13[0][0]                   
__________________________________________________________________________________________________
bidirectional_14 (Bidirectional (None, None, 8)      224         slice_14[0][0]                   
__________________________________________________________________________________________________
bidirectional_15 (Bidirectional (None, None, 8)      224         slice_15[0][0]                   
__________________________________________________________________________________________________
bidirectional_16 (Bidirectional (None, None, 8)      224         slice_16[0][0]                   
__________________________________________________________________________________________________
bidirectional_17 (Bidirectional (None, None, 8)      224         slice_17[0][0]                   
__________________________________________________________________________________________________
bidirectional_18 (Bidirectional (None, None, 8)      224         slice_18[0][0]                   
__________________________________________________________________________________________________
bidirectional_19 (Bidirectional (None, None, 8)      224         slice_19[0][0]                   
__________________________________________________________________________________________________
bidirectional_20 (Bidirectional (None, None, 8)      224         slice_20[0][0]                   
__________________________________________________________________________________________________
concatenate_1 (Concatenate)     (None, None, 160)    0           bidirectional_1[0][0]            
                                                                 bidirectional_2[0][0]            
                                                                 bidirectional_3[0][0]            
                                                                 bidirectional_4[0][0]            
                                                                 bidirectional_5[0][0]            
                                                                 bidirectional_6[0][0]            
                                                                 bidirectional_7[0][0]            
                                                                 bidirectional_8[0][0]            
                                                                 bidirectional_9[0][0]            
                                                                 bidirectional_10[0][0]           
                                                                 bidirectional_11[0][0]           
                                                                 bidirectional_12[0][0]           
                                                                 bidirectional_13[0][0]           
                                                                 bidirectional_14[0][0]           
                                                                 bidirectional_15[0][0]           
                                                                 bidirectional_16[0][0]           
                                                                 bidirectional_17[0][0]           
                                                                 bidirectional_18[0][0]           
                                                                 bidirectional_19[0][0]           
                                                                 bidirectional_20[0][0]           
__________________________________________________________________________________________________
lstm_21 (LSTM)                  (None, 32)           24704       concatenate_1[0][0]              
__________________________________________________________________________________________________
dropout_1 (Dropout)             (None, 32)           0           lstm_21[0][0]                    
__________________________________________________________________________________________________
dense_1 (Dense)                 (None, 1)            33          dropout_1[0][0]                  
==================================================================================================
Total params: 30,945
Trainable params: 30,945
Non-trainable params: 0
__________________________________________________________________________________________________
==> training
Train on 4628 samples, validate on 817 samples
Epoch 1/100
 - 308s - loss: 0.3214 - val_loss: 0.2772

==>predicting on train



confusion matrix:
[[2155    0]
 [ 255    0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.0697380006313324
difference in average predicted and observed risk = -0.0360709993686676
number samples = 2410
accuracy = 0.894191
precision class 0 = 0.894191
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.729745
AUC of PRC = 0.348771
min(+P, Se) = 0.371094

-------------------------------

confusion matrix:
[[1179    0]
 [ 118    0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.07277999818325043
difference in average predicted and observed risk = -0.018199001816749577
number samples = 1297
accuracy = 0.909021
precision class 0 = 0.909021
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.75827
AUC of PRC = 0.26581
min(+P, Se) = 0.323308

-------------------------------

confusion matrix:
[[656   0]
 [ 74   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.0854789987206459
difference in average predicted and observed risk = -0.015891001279354097
number samples = 730
accuracy = 0.89863
precision class 0 = 0.89863
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.698583
AUC of PRC = 0.283678
min(+P, Se) = 0.337838

-------------------------------

confusion matrix:
[[167   0]
 [ 24   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.08228199928998947
difference in average predicted and observed risk = -0.043372000710010516
number samples = 191
accuracy = 0.874346
precision class 0 = 0.874346
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.83009
AUC of PRC = 0.591308
min(+P, Se) = 0.541667

-------------------------------

confusion matrix:
[[2474    0]
 [ 255    0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07110399752855301
difference in average predicted and observed risk = -0.022337002471446987
number samples = 2729
accuracy = 0.906559
precision class 0 = 0.906559
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.716541
AUC of PRC = 0.287657
min(+P, Se) = 0.335938

-------------------------------

confusion matrix:
[[1683    0]
 [ 216    0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.07716500014066696
difference in average predicted and observed risk = -0.036578999859333036
number samples = 1899
accuracy = 0.886256
precision class 0 = 0.886256
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.75998
AUC of PRC = 0.353661
min(+P, Se) = 0.391892

-------------------------------

confusion matrix:
[[549   0]
 [ 77   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.07846699655056
difference in average predicted and observed risk = -0.044536003449440004
number samples = 626
accuracy = 0.876997
precision class 0 = 0.876997
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.722778
AUC of PRC = 0.288825
min(+P, Se) = 0.345679

-------------------------------

confusion matrix:
[[2249    0]
 [ 208    0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.06453400105237961
difference in average predicted and observed risk = -0.020121998947620387
number samples = 2457
accuracy = 0.915344
precision class 0 = 0.915344
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.71392
AUC of PRC = 0.259622
min(+P, Se) = 0.298077

-------------------------------

confusion matrix:
[[223   0]
 [ 25   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.07698900252580643
difference in average predicted and observed risk = -0.02381699747419358
number samples = 248
accuracy = 0.899194
precision class 0 = 0.899194
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.669596
AUC of PRC = 0.189661
min(+P, Se) = 0.30303

-------------------------------

confusion matrix:
[[481   0]
 [ 82   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.0920419991016388
difference in average predicted and observed risk = -0.053606000898361206
number samples = 563
accuracy = 0.854352
precision class 0 = 0.854352
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.78855
AUC of PRC = 0.514209
min(+P, Se) = 0.488095

-------------------------------

confusion matrix:
[[655   0]
 [ 79   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.08445200324058533
difference in average predicted and observed risk = -0.023176996759414675
number samples = 734
accuracy = 0.892371
precision class 0 = 0.892371
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.767456
AUC of PRC = 0.353238
min(+P, Se) = 0.367089

-------------------------------

confusion matrix:
[[4157    0]
 [ 471    0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.07359100133180618
difference in average predicted and observed risk = -0.02818099866819382
number samples = 4628
accuracy = 0.898228
precision class 0 = 0.898228
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.736608
AUC of PRC = 0.314327
min(+P, Se) = 0.359833

-------------------------------

==>predicting on validation



confusion matrix:
[[218   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.07351700216531754
difference in average predicted and observed risk = -0.006651997834682469
number samples = 237
accuracy = 0.919831
precision class 0 = 0.919831
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.840657
AUC of PRC = 0.385873
min(+P, Se) = 0.47619

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.07117900252342224
difference in average predicted and observed risk = -0.03761699747657776
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.730368
AUC of PRC = 0.37947
min(+P, Se) = 0.387755

-------------------------------

confusion matrix:
[[105   0]
 [ 13   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.08941599726676941
difference in average predicted and observed risk = -0.020753002733230594
number samples = 118
accuracy = 0.889831
precision class 0 = 0.889831
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.884249
AUC of PRC = 0.648658
min(+P, Se) = 0.538462

-------------------------------

confusion matrix:
[[26  0]
 [ 4  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.0905269980430603
difference in average predicted and observed risk = -0.042806001956939704
number samples = 30
accuracy = 0.866667
precision class 0 = 0.866667
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.980769
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[300   0]
 [ 39   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.07938399910926819
difference in average predicted and observed risk = -0.035660000890731805
number samples = 339
accuracy = 0.884956
precision class 0 = 0.884956
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.762735
AUC of PRC = 0.34797
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[434   0]
 [ 44   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.07223600149154663
difference in average predicted and observed risk = -0.019813998508453376
number samples = 478
accuracy = 0.90795
precision class 0 = 0.90795
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.811845
AUC of PRC = 0.481815
min(+P, Se) = 0.478261

-------------------------------

confusion matrix:
[[388   0]
 [ 38   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.06661800295114517
difference in average predicted and observed risk = -0.02258399704885483
number samples = 426
accuracy = 0.910798
precision class 0 = 0.910798
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.77089
AUC of PRC = 0.40092
min(+P, Se) = 0.414634

-------------------------------

confusion matrix:
[[90  0]
 [12  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.08951299637556076
difference in average predicted and observed risk = -0.02813400362443924
number samples = 102
accuracy = 0.882353
precision class 0 = 0.882353
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.927778
AUC of PRC = 0.680621
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.07502300292253494
difference in average predicted and observed risk = -0.013686997077465055
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.711987
AUC of PRC = 0.210363
min(+P, Se) = 0.384615

-------------------------------

confusion matrix:
[[108   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.08608199656009674
difference in average predicted and observed risk = -0.06352400343990325
number samples = 127
accuracy = 0.850394
precision class 0 = 0.850394
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.761209
AUC of PRC = 0.467914
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.09724300354719162
difference in average predicted and observed risk = 0.018296003547191617
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.933333
AUC of PRC = 0.582341
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[734   0]
 [ 83   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.07520200312137604
difference in average predicted and observed risk = -0.026388996878623963
number samples = 817
accuracy = 0.898409
precision class 0 = 0.898409
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.791767
AUC of PRC = 0.43077
min(+P, Se) = 0.470588

-------------------------------

Epoch 00001: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch1.state
Epoch 2/100
 - 294s - loss: 0.3019 - val_loss: 0.2808

==>predicting on train



confusion matrix:
[[2155    0]
 [ 255    0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.06143900007009506
difference in average predicted and observed risk = -0.04436999992990494
number samples = 2410
accuracy = 0.894191
precision class 0 = 0.894191
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.735311
AUC of PRC = 0.358439
min(+P, Se) = 0.368627

-------------------------------

confusion matrix:
[[1179    0]
 [ 118    0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.06381300091743469
difference in average predicted and observed risk = -0.027165999082565312
number samples = 1297
accuracy = 0.909021
precision class 0 = 0.909021
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.763912
AUC of PRC = 0.274543
min(+P, Se) = 0.330579

-------------------------------

confusion matrix:
[[656   0]
 [ 74   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.07340200245380402
difference in average predicted and observed risk = -0.027967997546195986
number samples = 730
accuracy = 0.89863
precision class 0 = 0.89863
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.712941
AUC of PRC = 0.312326
min(+P, Se) = 0.346667

-------------------------------

confusion matrix:
[[167   0]
 [ 24   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.07135199755430222
difference in average predicted and observed risk = -0.05430200244569777
number samples = 191
accuracy = 0.874346
precision class 0 = 0.874346
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.837575
AUC of PRC = 0.60457
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[2474    0]
 [ 255    0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.06111700087785721
difference in average predicted and observed risk = -0.03232399912214279
number samples = 2729
accuracy = 0.906559
precision class 0 = 0.906559
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.722677
AUC of PRC = 0.295983
min(+P, Se) = 0.341176

-------------------------------

confusion matrix:
[[1683    0]
 [ 216    0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.06911899894475937
difference in average predicted and observed risk = -0.04462500105524063
number samples = 1899
accuracy = 0.886256
precision class 0 = 0.886256
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.771302
AUC of PRC = 0.371786
min(+P, Se) = 0.40367

-------------------------------

confusion matrix:
[[549   0]
 [ 77   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.067781001329422
difference in average predicted and observed risk = -0.055221998670578004
number samples = 626
accuracy = 0.876997
precision class 0 = 0.876997
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.732028
AUC of PRC = 0.30128
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[2249    0]
 [ 208    0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.05730000138282776
difference in average predicted and observed risk = -0.027355998617172236
number samples = 2457
accuracy = 0.915344
precision class 0 = 0.915344
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.718826
AUC of PRC = 0.267829
min(+P, Se) = 0.302326

-------------------------------

confusion matrix:
[[223   0]
 [ 25   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.0662899985909462
difference in average predicted and observed risk = -0.03451600140905381
number samples = 248
accuracy = 0.899194
precision class 0 = 0.899194
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.672108
AUC of PRC = 0.190253
min(+P, Se) = 0.296296

-------------------------------

confusion matrix:
[[481   0]
 [ 82   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.08118099719285965
difference in average predicted and observed risk = -0.06446700280714035
number samples = 563
accuracy = 0.854352
precision class 0 = 0.854352
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.794382
AUC of PRC = 0.538596
min(+P, Se) = 0.523256

-------------------------------

confusion matrix:
[[655   0]
 [ 79   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.07177399843931198
difference in average predicted and observed risk = -0.03585500156068802
number samples = 734
accuracy = 0.892371
precision class 0 = 0.892371
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.774838
AUC of PRC = 0.37132
min(+P, Se) = 0.382716

-------------------------------

confusion matrix:
[[4157    0]
 [ 471    0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.06440000236034393
difference in average predicted and observed risk = -0.03737199763965607
number samples = 4628
accuracy = 0.898228
precision class 0 = 0.898228
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.744219
AUC of PRC = 0.330359
min(+P, Se) = 0.367432

-------------------------------

==>predicting on validation



confusion matrix:
[[218   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.06466999650001526
difference in average predicted and observed risk = -0.015499003499984745
number samples = 237
accuracy = 0.919831
precision class 0 = 0.919831
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.851762
AUC of PRC = 0.364106
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.06156599894165993
difference in average predicted and observed risk = -0.047230001058340076
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.732468
AUC of PRC = 0.387557
min(+P, Se) = 0.387755

-------------------------------

confusion matrix:
[[105   0]
 [ 13   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.0780780017375946
difference in average predicted and observed risk = -0.0320909982624054
number samples = 118
accuracy = 0.889831
precision class 0 = 0.889831
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.887912
AUC of PRC = 0.649186
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 4  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.08115000277757645
difference in average predicted and observed risk = -0.05218299722242356
number samples = 30
accuracy = 0.866667
precision class 0 = 0.866667
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.980769
AUC of PRC = 0.870833
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[300   0]
 [ 39   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.07052399963140488
difference in average predicted and observed risk = -0.04452000036859512
number samples = 339
accuracy = 0.884956
precision class 0 = 0.884956
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.76265
AUC of PRC = 0.350391
min(+P, Se) = 0.435897

-------------------------------

confusion matrix:
[[434   0]
 [ 44   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.062056999653577805
difference in average predicted and observed risk = -0.029993000346422202
number samples = 478
accuracy = 0.90795
precision class 0 = 0.90795
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.817396
AUC of PRC = 0.514622
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[388   0]
 [ 38   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.05859199911355972
difference in average predicted and observed risk = -0.03061000088644028
number samples = 426
accuracy = 0.910798
precision class 0 = 0.910798
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.781877
AUC of PRC = 0.417557
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[90  0]
 [12  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.07872699946165085
difference in average predicted and observed risk = -0.03892000053834915
number samples = 102
accuracy = 0.882353
precision class 0 = 0.882353
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.925926
AUC of PRC = 0.681915
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.06367199867963791
difference in average predicted and observed risk = -0.025038001320362088
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.724859
AUC of PRC = 0.210416
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[108   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.07438100129365921
difference in average predicted and observed risk = -0.07522499870634078
number samples = 127
accuracy = 0.850394
precision class 0 = 0.850394
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.764133
AUC of PRC = 0.457495
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.08524300158023834
difference in average predicted and observed risk = 0.006296001580238339
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.92381
AUC of PRC = 0.551786
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[734   0]
 [ 83   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.06556999683380127
difference in average predicted and observed risk = -0.03602100316619873
number samples = 817
accuracy = 0.898409
precision class 0 = 0.898409
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.796264
AUC of PRC = 0.43207
min(+P, Se) = 0.470588

-------------------------------

Epoch 00002: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch2.state
Epoch 3/100
 - 293s - loss: 0.3014 - val_loss: 0.2700

==>predicting on train



confusion matrix:
[[2154    1]
 [ 252    3]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.06982800364494324
difference in average predicted and observed risk = -0.03598099635505676
number samples = 2410
accuracy = 0.895021
precision class 0 = 0.895262
precision class 1 = 0.75
recall class 0 = 0.999536
recall class 1 = 0.011765
false negative rate = 0.988235
false positive rate = 0.000464
positive prediction rate = 0.00166
AUC of ROC = 0.739404
AUC of PRC = 0.35883
min(+P, Se) = 0.364706

-------------------------------

confusion matrix:
[[1176    3]
 [ 118    0]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.07370699942111969
difference in average predicted and observed risk = -0.017272000578880314
number samples = 1297
accuracy = 0.906708
precision class 0 = 0.90881
precision class 1 = 0.0
recall class 0 = 0.997455
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.002545
positive prediction rate = 0.002313
AUC of ROC = 0.77215
AUC of PRC = 0.280806
min(+P, Se) = 0.336134

-------------------------------

confusion matrix:
[[655   1]
 [ 73   1]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.08274000138044357
difference in average predicted and observed risk = -0.01862999861955643
number samples = 730
accuracy = 0.89863
precision class 0 = 0.899725
precision class 1 = 0.5
recall class 0 = 0.998476
recall class 1 = 0.013514
false negative rate = 0.986486
false positive rate = 0.001524
positive prediction rate = 0.00274
AUC of ROC = 0.722994
AUC of PRC = 0.324447
min(+P, Se) = 0.391892

-------------------------------

confusion matrix:
[[167   0]
 [ 21   3]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.07927999645471573
difference in average predicted and observed risk = -0.04637400354528426
number samples = 191
accuracy = 0.890052
precision class 0 = 0.888298
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.125
false negative rate = 0.875
false positive rate = 0.0
positive prediction rate = 0.015707
AUC of ROC = 0.851048
AUC of PRC = 0.635499
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[2472    2]
 [ 253    2]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.0703829973936081
difference in average predicted and observed risk = -0.023058002606391903
number samples = 2729
accuracy = 0.906559
precision class 0 = 0.907156
precision class 1 = 0.5
recall class 0 = 0.999192
recall class 1 = 0.007843
false negative rate = 0.992157
false positive rate = 0.000808
positive prediction rate = 0.001466
AUC of ROC = 0.728827
AUC of PRC = 0.299615
min(+P, Se) = 0.34902

-------------------------------

confusion matrix:
[[1680    3]
 [ 211    5]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.07759500294923782
difference in average predicted and observed risk = -0.036148997050762174
number samples = 1899
accuracy = 0.887309
precision class 0 = 0.888419
precision class 1 = 0.625
recall class 0 = 0.998217
recall class 1 = 0.023148
false negative rate = 0.976852
false positive rate = 0.001783
positive prediction rate = 0.004213
AUC of ROC = 0.776474
AUC of PRC = 0.376461
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[548   1]
 [ 77   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.07747499644756317
difference in average predicted and observed risk = -0.04552800355243683
number samples = 626
accuracy = 0.875399
precision class 0 = 0.8768
precision class 1 = 0.0
recall class 0 = 0.998178
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.001821
positive prediction rate = 0.001597
AUC of ROC = 0.739243
AUC of PRC = 0.307672
min(+P, Se) = 0.350649

-------------------------------

confusion matrix:
[[2248    1]
 [ 207    1]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.06419800221920013
difference in average predicted and observed risk = -0.02045799778079986
number samples = 2457
accuracy = 0.915344
precision class 0 = 0.915682
precision class 1 = 0.5
recall class 0 = 0.999555
recall class 1 = 0.004808
false negative rate = 0.995192
false positive rate = 0.000445
positive prediction rate = 0.000814
AUC of ROC = 0.72693
AUC of PRC = 0.271217
min(+P, Se) = 0.307692

-------------------------------

confusion matrix:
[[222   1]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.07273700088262558
difference in average predicted and observed risk = -0.028068999117374427
number samples = 248
accuracy = 0.895161
precision class 0 = 0.898785
precision class 1 = 0.0
recall class 0 = 0.995516
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.004484
positive prediction rate = 0.004032
AUC of ROC = 0.680359
AUC of PRC = 0.189584
min(+P, Se) = 0.307692

-------------------------------

confusion matrix:
[[480   1]
 [ 79   3]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.0953880026936531
difference in average predicted and observed risk = -0.05025999730634689
number samples = 563
accuracy = 0.857904
precision class 0 = 0.858676
precision class 1 = 0.75
recall class 0 = 0.997921
recall class 1 = 0.036585
false negative rate = 0.963415
false positive rate = 0.002079
positive prediction rate = 0.007105
AUC of ROC = 0.798996
AUC of PRC = 0.5449
min(+P, Se) = 0.538462

-------------------------------

confusion matrix:
[[654   1]
 [ 76   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.08372099697589874
difference in average predicted and observed risk = -0.02390800302410126
number samples = 734
accuracy = 0.895095
precision class 0 = 0.89589
precision class 1 = 0.75
recall class 0 = 0.998473
recall class 1 = 0.037975
false negative rate = 0.962025
false positive rate = 0.001527
positive prediction rate = 0.00545
AUC of ROC = 0.779418
AUC of PRC = 0.375689
min(+P, Se) = 0.395062

-------------------------------

confusion matrix:
[[4152    5]
 [ 464    7]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.07334200292825699
difference in average predicted and observed risk = -0.028429997071743013
number samples = 4628
accuracy = 0.89866
precision class 0 = 0.89948
precision class 1 = 0.583333
recall class 0 = 0.998797
recall class 1 = 0.014862
false negative rate = 0.985138
false positive rate = 0.001203
positive prediction rate = 0.002593
AUC of ROC = 0.750375
AUC of PRC = 0.335463
min(+P, Se) = 0.377919

-------------------------------

==>predicting on validation



confusion matrix:
[[217   1]
 [ 18   1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.07433900237083435
difference in average predicted and observed risk = -0.0058299976291656536
number samples = 237
accuracy = 0.919831
precision class 0 = 0.923404
precision class 1 = 0.5
recall class 0 = 0.995413
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.004587
positive prediction rate = 0.008439
AUC of ROC = 0.850072
AUC of PRC = 0.357963
min(+P, Se) = 0.478261

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.06987699866294861
difference in average predicted and observed risk = -0.038919001337051395
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.736225
AUC of PRC = 0.393171
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[105   0]
 [ 11   2]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.09211999922990799
difference in average predicted and observed risk = -0.018049000770092014
number samples = 118
accuracy = 0.90678
precision class 0 = 0.905172
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.153846
false negative rate = 0.846154
false positive rate = 0.0
positive prediction rate = 0.016949
AUC of ROC = 0.887912
AUC of PRC = 0.666084
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[26  0]
 [ 4  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.0947439968585968
difference in average predicted and observed risk = -0.038589003141403205
number samples = 30
accuracy = 0.866667
precision class 0 = 0.866667
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[299   1]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.08045899868011475
difference in average predicted and observed risk = -0.03458500131988525
number samples = 339
accuracy = 0.884956
precision class 0 = 0.88724
precision class 1 = 0.5
recall class 0 = 0.996667
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.003333
positive prediction rate = 0.0059
AUC of ROC = 0.764786
AUC of PRC = 0.356075
min(+P, Se) = 0.418605

-------------------------------

confusion matrix:
[[434   0]
 [ 42   2]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.07163599878549576
difference in average predicted and observed risk = -0.02041400121450425
number samples = 478
accuracy = 0.912134
precision class 0 = 0.911765
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.045455
false negative rate = 0.954545
false positive rate = 0.0
positive prediction rate = 0.004184
AUC of ROC = 0.821848
AUC of PRC = 0.51961
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 38   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.06636299937963486
difference in average predicted and observed risk = -0.022839000620365146
number samples = 426
accuracy = 0.910798
precision class 0 = 0.910798
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.785404
AUC of PRC = 0.426313
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[90  0]
 [10  2]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.09207399934530258
difference in average predicted and observed risk = -0.02557300065469742
number samples = 102
accuracy = 0.901961
precision class 0 = 0.9
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.019608
AUC of ROC = 0.925
AUC of PRC = 0.686053
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.07210800051689148
difference in average predicted and observed risk = -0.016601999483108518
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.733709
AUC of PRC = 0.212537
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[107   1]
 [ 18   1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.08725500106811523
difference in average predicted and observed risk = -0.062350998931884755
number samples = 127
accuracy = 0.850394
precision class 0 = 0.856
precision class 1 = 0.5
recall class 0 = 0.990741
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.009259
positive prediction rate = 0.015748
AUC of ROC = 0.769981
AUC of PRC = 0.50144
min(+P, Se) = 0.47619

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.10085199773311615
difference in average predicted and observed risk = 0.021904997733116147
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.92381
AUC of PRC = 0.551786
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[733   1]
 [ 80   3]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.07529699802398682
difference in average predicted and observed risk = -0.026294001976013184
number samples = 817
accuracy = 0.900857
precision class 0 = 0.901599
precision class 1 = 0.75
recall class 0 = 0.998638
recall class 1 = 0.036145
false negative rate = 0.963855
false positive rate = 0.001362
positive prediction rate = 0.004896
AUC of ROC = 0.799498
AUC of PRC = 0.442805
min(+P, Se) = 0.488095

-------------------------------

Epoch 00003: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch3.state
Epoch 4/100
 - 297s - loss: 0.2978 - val_loss: 0.2688

==>predicting on train



confusion matrix:
[[2154    1]
 [ 243   12]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.07849399745464325
difference in average predicted and observed risk = -0.02731500254535675
number samples = 2410
accuracy = 0.898755
precision class 0 = 0.898623
precision class 1 = 0.923077
recall class 0 = 0.999536
recall class 1 = 0.047059
false negative rate = 0.952941
false positive rate = 0.000464
positive prediction rate = 0.005394
AUC of ROC = 0.743796
AUC of PRC = 0.361411
min(+P, Se) = 0.367188

-------------------------------

confusion matrix:
[[1169   10]
 [ 111    7]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08220499753952026
difference in average predicted and observed risk = -0.00877400246047974
number samples = 1297
accuracy = 0.906708
precision class 0 = 0.913281
precision class 1 = 0.411765
recall class 0 = 0.991518
recall class 1 = 0.059322
false negative rate = 0.940678
false positive rate = 0.008482
positive prediction rate = 0.013107
AUC of ROC = 0.776743
AUC of PRC = 0.282015
min(+P, Se) = 0.336134

-------------------------------

confusion matrix:
[[654   2]
 [ 64  10]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.08995799720287323
difference in average predicted and observed risk = -0.011412002797126772
number samples = 730
accuracy = 0.909589
precision class 0 = 0.910864
precision class 1 = 0.833333
recall class 0 = 0.996951
recall class 1 = 0.135135
false negative rate = 0.864865
false positive rate = 0.003049
positive prediction rate = 0.016438
AUC of ROC = 0.738649
AUC of PRC = 0.341823
min(+P, Se) = 0.379747

-------------------------------

confusion matrix:
[[166   1]
 [ 20   4]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.08775000274181366
difference in average predicted and observed risk = -0.03790399725818633
number samples = 191
accuracy = 0.890052
precision class 0 = 0.892473
precision class 1 = 0.8
recall class 0 = 0.994012
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.005988
positive prediction rate = 0.026178
AUC of ROC = 0.856038
AUC of PRC = 0.645903
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[2465    9]
 [ 239   16]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07999899983406067
difference in average predicted and observed risk = -0.013442000165939327
number samples = 2729
accuracy = 0.909124
precision class 0 = 0.911612
precision class 1 = 0.64
recall class 0 = 0.996362
recall class 1 = 0.062745
false negative rate = 0.937255
false positive rate = 0.003638
positive prediction rate = 0.009161
AUC of ROC = 0.73539
AUC of PRC = 0.30414
min(+P, Se) = 0.34902

-------------------------------

confusion matrix:
[[1678    5]
 [ 199   17]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.08420400321483612
difference in average predicted and observed risk = -0.029539996785163877
number samples = 1899
accuracy = 0.892575
precision class 0 = 0.89398
precision class 1 = 0.772727
recall class 0 = 0.997029
recall class 1 = 0.078704
false negative rate = 0.921296
false positive rate = 0.002971
positive prediction rate = 0.011585
AUC of ROC = 0.781991
AUC of PRC = 0.39186
min(+P, Se) = 0.41704

-------------------------------

confusion matrix:
[[545   4]
 [ 74   3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.0903099998831749
difference in average predicted and observed risk = -0.032693000116825105
number samples = 626
accuracy = 0.875399
precision class 0 = 0.880452
precision class 1 = 0.428571
recall class 0 = 0.992714
recall class 1 = 0.038961
false negative rate = 0.961039
false positive rate = 0.007286
positive prediction rate = 0.011182
AUC of ROC = 0.741963
AUC of PRC = 0.314568
min(+P, Se) = 0.350649

-------------------------------

confusion matrix:
[[2247    2]
 [ 201    7]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07163699716329575
difference in average predicted and observed risk = -0.01301900283670425
number samples = 2457
accuracy = 0.917379
precision class 0 = 0.917892
precision class 1 = 0.777778
recall class 0 = 0.999111
recall class 1 = 0.033654
false negative rate = 0.966346
false positive rate = 0.000889
positive prediction rate = 0.003663
AUC of ROC = 0.73505
AUC of PRC = 0.275139
min(+P, Se) = 0.293839

-------------------------------

confusion matrix:
[[220   3]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.0848499983549118
difference in average predicted and observed risk = -0.015956001645088203
number samples = 248
accuracy = 0.887097
precision class 0 = 0.897959
precision class 1 = 0.0
recall class 0 = 0.986547
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.013453
positive prediction rate = 0.012097
AUC of ROC = 0.683229
AUC of PRC = 0.196517
min(+P, Se) = 0.307692

-------------------------------

confusion matrix:
[[478   3]
 [ 68  14]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.10331899672746658
difference in average predicted and observed risk = -0.042329003272533416
number samples = 563
accuracy = 0.87389
precision class 0 = 0.875458
precision class 1 = 0.823529
recall class 0 = 0.993763
recall class 1 = 0.170732
false negative rate = 0.829268
false positive rate = 0.006237
positive prediction rate = 0.030195
AUC of ROC = 0.801683
AUC of PRC = 0.535579
min(+P, Se) = 0.528736

-------------------------------

confusion matrix:
[[653   2]
 [ 70   9]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09054800122976303
difference in average predicted and observed risk = -0.01708099877023697
number samples = 734
accuracy = 0.901907
precision class 0 = 0.903181
precision class 1 = 0.818182
recall class 0 = 0.996947
recall class 1 = 0.113924
false negative rate = 0.886076
false positive rate = 0.003053
positive prediction rate = 0.014986
AUC of ROC = 0.783496
AUC of PRC = 0.394695
min(+P, Se) = 0.405063

-------------------------------

confusion matrix:
[[4143   14]
 [ 438   33]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08172400295734406
difference in average predicted and observed risk = -0.020047997042655946
number samples = 4628
accuracy = 0.902334
precision class 0 = 0.904388
precision class 1 = 0.702128
recall class 0 = 0.996632
recall class 1 = 0.070064
false negative rate = 0.929936
false positive rate = 0.003368
positive prediction rate = 0.010156
AUC of ROC = 0.757232
AUC of PRC = 0.34167
min(+P, Se) = 0.375

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 17   2]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08231200277805328
difference in average predicted and observed risk = 0.0021430027780532795
number samples = 237
accuracy = 0.919831
precision class 0 = 0.927039
precision class 1 = 0.5
recall class 0 = 0.990826
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.009174
positive prediction rate = 0.016878
AUC of ROC = 0.845244
AUC of PRC = 0.400862
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[385   0]
 [ 45   2]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.07820399850606918
difference in average predicted and observed risk = -0.03059200149393082
number samples = 432
accuracy = 0.895833
precision class 0 = 0.895349
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.042553
false negative rate = 0.957447
false positive rate = 0.0
positive prediction rate = 0.00463
AUC of ROC = 0.742747
AUC of PRC = 0.406241
min(+P, Se) = 0.387755

-------------------------------

confusion matrix:
[[105   0]
 [ 11   2]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.09850700199604034
difference in average predicted and observed risk = -0.011661998003959659
number samples = 118
accuracy = 0.90678
precision class 0 = 0.905172
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.153846
false negative rate = 0.846154
false positive rate = 0.0
positive prediction rate = 0.016949
AUC of ROC = 0.89011
AUC of PRC = 0.677209
min(+P, Se) = 0.6875

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.1028980016708374
difference in average predicted and observed risk = -0.030434998329162605
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[299   1]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.08601800352334976
difference in average predicted and observed risk = -0.02902599647665023
number samples = 339
accuracy = 0.884956
precision class 0 = 0.88724
precision class 1 = 0.5
recall class 0 = 0.996667
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.003333
positive prediction rate = 0.0059
AUC of ROC = 0.772735
AUC of PRC = 0.365235
min(+P, Se) = 0.439024

-------------------------------

confusion matrix:
[[433   1]
 [ 37   7]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08126000314950943
difference in average predicted and observed risk = -0.010789996850490577
number samples = 478
accuracy = 0.920502
precision class 0 = 0.921277
precision class 1 = 0.875
recall class 0 = 0.997696
recall class 1 = 0.159091
false negative rate = 0.840909
false positive rate = 0.002304
positive prediction rate = 0.016736
AUC of ROC = 0.820643
AUC of PRC = 0.526954
min(+P, Se) = 0.521739

-------------------------------

confusion matrix:
[[388   0]
 [ 35   3]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.07319000363349915
difference in average predicted and observed risk = -0.016011996366500858
number samples = 426
accuracy = 0.91784
precision class 0 = 0.917258
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.078947
false negative rate = 0.921053
false positive rate = 0.0
positive prediction rate = 0.007042
AUC of ROC = 0.789135
AUC of PRC = 0.420388
min(+P, Se) = 0.447368

-------------------------------

confusion matrix:
[[90  0]
 [10  2]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.09914000332355499
difference in average predicted and observed risk = -0.01850699667644501
number samples = 102
accuracy = 0.901961
precision class 0 = 0.9
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.019608
AUC of ROC = 0.925
AUC of PRC = 0.687461
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.08410900086164474
difference in average predicted and observed risk = -0.004600999138355252
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.746581
AUC of PRC = 0.2254
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[107   1]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09499400109052658
difference in average predicted and observed risk = -0.05461199890947341
number samples = 127
accuracy = 0.866142
precision class 0 = 0.869919
precision class 1 = 0.75
recall class 0 = 0.990741
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009259
positive prediction rate = 0.031496
AUC of ROC = 0.77193
AUC of PRC = 0.508499
min(+P, Se) = 0.478261

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.1109900027513504
difference in average predicted and observed risk = 0.0320430027513504
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.92381
AUC of PRC = 0.551786
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[732   2]
 [ 75   8]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.083235003054142
difference in average predicted and observed risk = -0.018355996945858002
number samples = 817
accuracy = 0.905753
precision class 0 = 0.907063
precision class 1 = 0.8
recall class 0 = 0.997275
recall class 1 = 0.096386
false negative rate = 0.903614
false positive rate = 0.002725
positive prediction rate = 0.01224
AUC of ROC = 0.801254
AUC of PRC = 0.452374
min(+P, Se) = 0.470588

-------------------------------

Epoch 00004: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch4.state
Epoch 5/100
 - 296s - loss: 0.2915 - val_loss: 0.2617

==>predicting on train



confusion matrix:
[[2142   13]
 [ 221   34]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.09289000183343887
difference in average predicted and observed risk = -0.012918998166561127
number samples = 2410
accuracy = 0.902905
precision class 0 = 0.906475
precision class 1 = 0.723404
recall class 0 = 0.993968
recall class 1 = 0.133333
false negative rate = 0.866667
false positive rate = 0.006032
positive prediction rate = 0.019502
AUC of ROC = 0.753871
AUC of PRC = 0.372462
min(+P, Se) = 0.378906

-------------------------------

confusion matrix:
[[1162   17]
 [ 100   18]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.09665600210428238
difference in average predicted and observed risk = 0.005677002104282375
number samples = 1297
accuracy = 0.909792
precision class 0 = 0.920761
precision class 1 = 0.514286
recall class 0 = 0.985581
recall class 1 = 0.152542
false negative rate = 0.847458
false positive rate = 0.014419
positive prediction rate = 0.026985
AUC of ROC = 0.78043
AUC of PRC = 0.298763
min(+P, Se) = 0.340741

-------------------------------

confusion matrix:
[[646  10]
 [ 63  11]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.10332100093364716
difference in average predicted and observed risk = 0.001951000933647154
number samples = 730
accuracy = 0.9
precision class 0 = 0.911142
precision class 1 = 0.52381
recall class 0 = 0.984756
recall class 1 = 0.148649
false negative rate = 0.851351
false positive rate = 0.015244
positive prediction rate = 0.028767
AUC of ROC = 0.738464
AUC of PRC = 0.351129
min(+P, Se) = 0.405405

-------------------------------

confusion matrix:
[[166   1]
 [ 16   8]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.09980999678373337
difference in average predicted and observed risk = -0.02584400321626662
number samples = 191
accuracy = 0.910995
precision class 0 = 0.912088
precision class 1 = 0.888889
recall class 0 = 0.994012
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.005988
positive prediction rate = 0.04712
AUC of ROC = 0.859032
AUC of PRC = 0.669354
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[2450   24]
 [ 221   34]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.09140799939632416
difference in average predicted and observed risk = -0.0020330006036758386
number samples = 2729
accuracy = 0.910224
precision class 0 = 0.917259
precision class 1 = 0.586207
recall class 0 = 0.990299
recall class 1 = 0.133333
false negative rate = 0.866667
false positive rate = 0.009701
positive prediction rate = 0.021253
AUC of ROC = 0.741947
AUC of PRC = 0.321431
min(+P, Se) = 0.352941

-------------------------------

confusion matrix:
[[1666   17]
 [ 179   37]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.10229700058698654
difference in average predicted and observed risk = -0.011446999413013456
number samples = 1899
accuracy = 0.896788
precision class 0 = 0.902981
precision class 1 = 0.685185
recall class 0 = 0.989899
recall class 1 = 0.171296
false negative rate = 0.828704
false positive rate = 0.010101
positive prediction rate = 0.028436
AUC of ROC = 0.790115
AUC of PRC = 0.391124
min(+P, Se) = 0.402778

-------------------------------

confusion matrix:
[[539  10]
 [ 69   8]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.1049479991197586
difference in average predicted and observed risk = -0.018055000880241395
number samples = 626
accuracy = 0.873802
precision class 0 = 0.886513
precision class 1 = 0.444444
recall class 0 = 0.981785
recall class 1 = 0.103896
false negative rate = 0.896104
false positive rate = 0.018215
positive prediction rate = 0.028754
AUC of ROC = 0.751307
AUC of PRC = 0.335995
min(+P, Se) = 0.369048

-------------------------------

confusion matrix:
[[2240    9]
 [ 191   17]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08429200202226639
difference in average predicted and observed risk = -0.0003639979777336072
number samples = 2457
accuracy = 0.9186
precision class 0 = 0.921431
precision class 1 = 0.653846
recall class 0 = 0.995998
recall class 1 = 0.081731
false negative rate = 0.918269
false positive rate = 0.004002
positive prediction rate = 0.010582
AUC of ROC = 0.74093
AUC of PRC = 0.282013
min(+P, Se) = 0.307692

-------------------------------

confusion matrix:
[[216   7]
 [ 22   3]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.09950599819421768
difference in average predicted and observed risk = -0.0013000018057823248
number samples = 248
accuracy = 0.883065
precision class 0 = 0.907563
precision class 1 = 0.3
recall class 0 = 0.96861
recall class 1 = 0.12
false negative rate = 0.88
false positive rate = 0.03139
positive prediction rate = 0.040323
AUC of ROC = 0.691659
AUC of PRC = 0.206874
min(+P, Se) = 0.296296

-------------------------------

confusion matrix:
[[473   8]
 [ 55  27]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12274300307035446
difference in average predicted and observed risk = -0.022904996929645538
number samples = 563
accuracy = 0.888099
precision class 0 = 0.895833
precision class 1 = 0.771429
recall class 0 = 0.983368
recall class 1 = 0.329268
false negative rate = 0.670732
false positive rate = 0.016632
positive prediction rate = 0.062167
AUC of ROC = 0.811977
AUC of PRC = 0.570616
min(+P, Se) = 0.54878

-------------------------------

confusion matrix:
[[648   7]
 [ 63  16]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.10508300364017487
difference in average predicted and observed risk = -0.0025459963598251367
number samples = 734
accuracy = 0.904632
precision class 0 = 0.911392
precision class 1 = 0.695652
recall class 0 = 0.989313
recall class 1 = 0.202532
false negative rate = 0.797468
false positive rate = 0.010687
positive prediction rate = 0.031335
AUC of ROC = 0.790473
AUC of PRC = 0.386155
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[4116   41]
 [ 400   71]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09587600082159042
difference in average predicted and observed risk = -0.005895999178409578
number samples = 4628
accuracy = 0.90471
precision class 0 = 0.911426
precision class 1 = 0.633929
recall class 0 = 0.990137
recall class 1 = 0.150743
false negative rate = 0.849257
false positive rate = 0.009863
positive prediction rate = 0.024201
AUC of ROC = 0.764153
AUC of PRC = 0.354587
min(+P, Se) = 0.375796

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.09684400260448456
difference in average predicted and observed risk = 0.016675002604484554
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.871077
AUC of PRC = 0.415781
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[385   0]
 [ 43   4]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.09362900257110596
difference in average predicted and observed risk = -0.015166997428894047
number samples = 432
accuracy = 0.900463
precision class 0 = 0.899533
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.085106
false negative rate = 0.914894
false positive rate = 0.0
positive prediction rate = 0.009259
AUC of ROC = 0.755236
AUC of PRC = 0.410001
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[105   0]
 [  9   4]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.1161860004067421
difference in average predicted and observed risk = 0.006017000406742093
number samples = 118
accuracy = 0.923729
precision class 0 = 0.921053
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.0
positive prediction rate = 0.033898
AUC of ROC = 0.89011
AUC of PRC = 0.664003
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.1176069974899292
difference in average predicted and observed risk = -0.015726002510070808
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[298   2]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.10672000050544739
difference in average predicted and observed risk = -0.008323999494552606
number samples = 339
accuracy = 0.887906
precision class 0 = 0.892216
precision class 1 = 0.6
recall class 0 = 0.993333
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.006667
positive prediction rate = 0.014749
AUC of ROC = 0.794359
AUC of PRC = 0.374404
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[433   1]
 [ 33  11]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.0930119976401329
difference in average predicted and observed risk = 0.0009619976401328972
number samples = 478
accuracy = 0.92887
precision class 0 = 0.929185
precision class 1 = 0.916667
recall class 0 = 0.997696
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.002304
positive prediction rate = 0.025105
AUC of ROC = 0.830226
AUC of PRC = 0.532032
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 33   5]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08704899996519089
difference in average predicted and observed risk = -0.002153000034809116
number samples = 426
accuracy = 0.922535
precision class 0 = 0.921615
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.131579
false negative rate = 0.868421
false positive rate = 0.0
positive prediction rate = 0.011737
AUC of ROC = 0.812466
AUC of PRC = 0.434199
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.11847399920225143
difference in average predicted and observed risk = 0.0008269992022514328
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.930556
AUC of PRC = 0.688017
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.09778299927711487
difference in average predicted and observed risk = 0.009072999277114871
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.756235
AUC of PRC = 0.224926
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[107   1]
 [ 15   4]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.11164399981498718
difference in average predicted and observed risk = -0.037962000185012806
number samples = 127
accuracy = 0.874016
precision class 0 = 0.877049
precision class 1 = 0.8
recall class 0 = 0.990741
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.009259
positive prediction rate = 0.03937
AUC of ROC = 0.787524
AUC of PRC = 0.535443
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[34  1]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.13596899807453156
difference in average predicted and observed risk = 0.05702199807453155
number samples = 38
accuracy = 0.921053
precision class 0 = 0.944444
precision class 1 = 0.5
recall class 0 = 0.971429
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.028571
positive prediction rate = 0.052632
AUC of ROC = 0.933333
AUC of PRC = 0.582341
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[731   3]
 [ 69  14]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09870000183582306
difference in average predicted and observed risk = -0.0028909981641769417
number samples = 817
accuracy = 0.911873
precision class 0 = 0.91375
precision class 1 = 0.823529
recall class 0 = 0.995913
recall class 1 = 0.168675
false negative rate = 0.831325
false positive rate = 0.004087
positive prediction rate = 0.020808
AUC of ROC = 0.816126
AUC of PRC = 0.460476
min(+P, Se) = 0.47619

-------------------------------

Epoch 00005: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch5.state
Epoch 6/100
 - 294s - loss: 0.2940 - val_loss: 0.2592

==>predicting on train



confusion matrix:
[[2143   12]
 [ 222   33]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.07923100143671036
difference in average predicted and observed risk = -0.026577998563289643
number samples = 2410
accuracy = 0.902905
precision class 0 = 0.906131
precision class 1 = 0.733333
recall class 0 = 0.994432
recall class 1 = 0.129412
false negative rate = 0.870588
false positive rate = 0.005568
positive prediction rate = 0.018672
AUC of ROC = 0.76012
AUC of PRC = 0.370504
min(+P, Se) = 0.378906

-------------------------------

confusion matrix:
[[1162   17]
 [  98   20]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08425699919462204
difference in average predicted and observed risk = -0.0067220008053779645
number samples = 1297
accuracy = 0.911334
precision class 0 = 0.922222
precision class 1 = 0.540541
recall class 0 = 0.985581
recall class 1 = 0.169492
false negative rate = 0.830508
false positive rate = 0.014419
positive prediction rate = 0.028527
AUC of ROC = 0.786439
AUC of PRC = 0.306485
min(+P, Se) = 0.347458

-------------------------------

confusion matrix:
[[644  12]
 [ 62  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09373699873685837
difference in average predicted and observed risk = -0.007633001263141634
number samples = 730
accuracy = 0.89863
precision class 0 = 0.912181
precision class 1 = 0.5
recall class 0 = 0.981707
recall class 1 = 0.162162
false negative rate = 0.837838
false positive rate = 0.018293
positive prediction rate = 0.032877
AUC of ROC = 0.747157
AUC of PRC = 0.359031
min(+P, Se) = 0.405405

-------------------------------

confusion matrix:
[[166   1]
 [ 16   8]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.0901539996266365
difference in average predicted and observed risk = -0.03550000037336348
number samples = 191
accuracy = 0.910995
precision class 0 = 0.912088
precision class 1 = 0.888889
recall class 0 = 0.994012
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.005988
positive prediction rate = 0.04712
AUC of ROC = 0.870509
AUC of PRC = 0.680272
min(+P, Se) = 0.64

-------------------------------

confusion matrix:
[[2450   24]
 [ 222   33]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07908999919891357
difference in average predicted and observed risk = -0.014351000801086422
number samples = 2729
accuracy = 0.909857
precision class 0 = 0.916916
precision class 1 = 0.578947
recall class 0 = 0.990299
recall class 1 = 0.129412
false negative rate = 0.870588
false positive rate = 0.009701
positive prediction rate = 0.020887
AUC of ROC = 0.753101
AUC of PRC = 0.327697
min(+P, Se) = 0.352941

-------------------------------

confusion matrix:
[[1665   18]
 [ 176   40]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.0895410031080246
difference in average predicted and observed risk = -0.0242029968919754
number samples = 1899
accuracy = 0.897841
precision class 0 = 0.9044
precision class 1 = 0.689655
recall class 0 = 0.989305
recall class 1 = 0.185185
false negative rate = 0.814815
false positive rate = 0.010695
positive prediction rate = 0.030542
AUC of ROC = 0.790118
AUC of PRC = 0.392605
min(+P, Se) = 0.405983

-------------------------------

confusion matrix:
[[539  10]
 [ 68   9]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.0906049981713295
difference in average predicted and observed risk = -0.0323980018286705
number samples = 626
accuracy = 0.875399
precision class 0 = 0.887974
precision class 1 = 0.473684
recall class 0 = 0.981785
recall class 1 = 0.116883
false negative rate = 0.883117
false positive rate = 0.018215
positive prediction rate = 0.030351
AUC of ROC = 0.752206
AUC of PRC = 0.34392
min(+P, Se) = 0.379747

-------------------------------

confusion matrix:
[[2239   10]
 [ 186   22]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07186199724674225
difference in average predicted and observed risk = -0.012794002753257747
number samples = 2457
accuracy = 0.920228
precision class 0 = 0.923299
precision class 1 = 0.6875
recall class 0 = 0.995554
recall class 1 = 0.105769
false negative rate = 0.894231
false positive rate = 0.004446
positive prediction rate = 0.013024
AUC of ROC = 0.753794
AUC of PRC = 0.287425
min(+P, Se) = 0.307692

-------------------------------

confusion matrix:
[[216   7]
 [ 23   2]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.08307000249624252
difference in average predicted and observed risk = -0.017735997503757484
number samples = 248
accuracy = 0.879032
precision class 0 = 0.903766
precision class 1 = 0.222222
recall class 0 = 0.96861
recall class 1 = 0.08
false negative rate = 0.92
false positive rate = 0.03139
positive prediction rate = 0.03629
AUC of ROC = 0.699731
AUC of PRC = 0.203007
min(+P, Se) = 0.307692

-------------------------------

confusion matrix:
[[473   8]
 [ 57  25]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.11316700279712677
difference in average predicted and observed risk = -0.03248099720287323
number samples = 563
accuracy = 0.884547
precision class 0 = 0.892453
precision class 1 = 0.757576
recall class 0 = 0.983368
recall class 1 = 0.304878
false negative rate = 0.695122
false positive rate = 0.016632
positive prediction rate = 0.058615
AUC of ROC = 0.814183
AUC of PRC = 0.563933
min(+P, Se) = 0.560976

-------------------------------

confusion matrix:
[[648   7]
 [ 64  15]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09302099794149399
difference in average predicted and observed risk = -0.014608002058506014
number samples = 734
accuracy = 0.90327
precision class 0 = 0.910112
precision class 1 = 0.681818
recall class 0 = 0.989313
recall class 1 = 0.189873
false negative rate = 0.810127
false positive rate = 0.010687
positive prediction rate = 0.029973
AUC of ROC = 0.790917
AUC of PRC = 0.406393
min(+P, Se) = 0.417722

-------------------------------

confusion matrix:
[[4115   42]
 [ 398   73]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08337800204753876
difference in average predicted and observed risk = -0.018393997952461244
number samples = 4628
accuracy = 0.904927
precision class 0 = 0.91181
precision class 1 = 0.634783
recall class 0 = 0.989897
recall class 1 = 0.154989
false negative rate = 0.845011
false positive rate = 0.010103
positive prediction rate = 0.024849
AUC of ROC = 0.770484
AUC of PRC = 0.35868
min(+P, Se) = 0.379237

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08355899900197983
difference in average predicted and observed risk = 0.0033899990019798237
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.858764
AUC of PRC = 0.343968
min(+P, Se) = 0.478261

-------------------------------

confusion matrix:
[[385   0]
 [ 42   5]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.08004599809646606
difference in average predicted and observed risk = -0.02875000190353394
number samples = 432
accuracy = 0.902778
precision class 0 = 0.901639
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.106383
false negative rate = 0.893617
false positive rate = 0.0
positive prediction rate = 0.011574
AUC of ROC = 0.753413
AUC of PRC = 0.409383
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[104   1]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.11191000044345856
difference in average predicted and observed risk = 0.001741000443458554
number samples = 118
accuracy = 0.923729
precision class 0 = 0.928571
precision class 1 = 0.833333
recall class 0 = 0.990476
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.009524
positive prediction rate = 0.050847
AUC of ROC = 0.885714
AUC of PRC = 0.669697
min(+P, Se) = 0.5625

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11131799966096878
difference in average predicted and observed risk = -0.022015000339031227
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[297   3]
 [ 35   4]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.09598600119352341
difference in average predicted and observed risk = -0.019057998806476587
number samples = 339
accuracy = 0.887906
precision class 0 = 0.894578
precision class 1 = 0.571429
recall class 0 = 0.99
recall class 1 = 0.102564
false negative rate = 0.897436
false positive rate = 0.01
positive prediction rate = 0.020649
AUC of ROC = 0.786154
AUC of PRC = 0.37599
min(+P, Se) = 0.44186

-------------------------------

confusion matrix:
[[433   1]
 [ 32  12]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08031100034713745
difference in average predicted and observed risk = -0.011738999652862556
number samples = 478
accuracy = 0.930962
precision class 0 = 0.931183
precision class 1 = 0.923077
recall class 0 = 0.997696
recall class 1 = 0.272727
false negative rate = 0.727273
false positive rate = 0.002304
positive prediction rate = 0.027197
AUC of ROC = 0.827241
AUC of PRC = 0.526017
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 33   5]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.07515499740839005
difference in average predicted and observed risk = -0.014047002591609958
number samples = 426
accuracy = 0.922535
precision class 0 = 0.921615
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.131579
false negative rate = 0.868421
false positive rate = 0.0
positive prediction rate = 0.011737
AUC of ROC = 0.802292
AUC of PRC = 0.422968
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.10784800350666046
difference in average predicted and observed risk = -0.00979899649333954
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.935185
AUC of PRC = 0.717841
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.08410000056028366
difference in average predicted and observed risk = -0.004609999439716336
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.762671
AUC of PRC = 0.238291
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[106   2]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09996499866247177
difference in average predicted and observed risk = -0.04964100133752822
number samples = 127
accuracy = 0.88189
precision class 0 = 0.890756
precision class 1 = 0.75
recall class 0 = 0.981481
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.018519
positive prediction rate = 0.062992
AUC of ROC = 0.77924
AUC of PRC = 0.556595
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[34  1]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.1259939968585968
difference in average predicted and observed risk = 0.0470469968585968
number samples = 38
accuracy = 0.921053
precision class 0 = 0.944444
precision class 1 = 0.5
recall class 0 = 0.971429
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.028571
positive prediction rate = 0.052632
AUC of ROC = 0.914286
AUC of PRC = 0.319444
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[730   4]
 [ 67  16]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.0868149995803833
difference in average predicted and observed risk = -0.0147760004196167
number samples = 817
accuracy = 0.913097
precision class 0 = 0.915935
precision class 1 = 0.8
recall class 0 = 0.99455
recall class 1 = 0.192771
false negative rate = 0.807229
false positive rate = 0.00545
positive prediction rate = 0.02448
AUC of ROC = 0.810364
AUC of PRC = 0.456753
min(+P, Se) = 0.488095

-------------------------------

Epoch 00006: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch6.state
Epoch 7/100
 - 296s - loss: 0.2974 - val_loss: 0.2642

==>predicting on train



confusion matrix:
[[2145   10]
 [ 227   28]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.10391300171613693
difference in average predicted and observed risk = -0.001895998283863068
number samples = 2410
accuracy = 0.90166
precision class 0 = 0.9043
precision class 1 = 0.736842
recall class 0 = 0.99536
recall class 1 = 0.109804
false negative rate = 0.890196
false positive rate = 0.00464
positive prediction rate = 0.015768
AUC of ROC = 0.760621
AUC of PRC = 0.36654
min(+P, Se) = 0.381323

-------------------------------

confusion matrix:
[[1162   17]
 [  99   19]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.10659799724817276
difference in average predicted and observed risk = 0.015618997248172756
number samples = 1297
accuracy = 0.910563
precision class 0 = 0.921491
precision class 1 = 0.527778
recall class 0 = 0.985581
recall class 1 = 0.161017
false negative rate = 0.838983
false positive rate = 0.014419
positive prediction rate = 0.027756
AUC of ROC = 0.789343
AUC of PRC = 0.304645
min(+P, Se) = 0.355932

-------------------------------

confusion matrix:
[[648   8]
 [ 61  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.11547499895095825
difference in average predicted and observed risk = 0.01410499895095825
number samples = 730
accuracy = 0.905479
precision class 0 = 0.913963
precision class 1 = 0.619048
recall class 0 = 0.987805
recall class 1 = 0.175676
false negative rate = 0.824324
false positive rate = 0.012195
positive prediction rate = 0.028767
AUC of ROC = 0.746704
AUC of PRC = 0.368858
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[166   1]
 [ 17   7]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.1105400025844574
difference in average predicted and observed risk = -0.01511399741554259
number samples = 191
accuracy = 0.905759
precision class 0 = 0.907104
precision class 1 = 0.875
recall class 0 = 0.994012
recall class 1 = 0.291667
false negative rate = 0.708333
false positive rate = 0.005988
positive prediction rate = 0.041885
AUC of ROC = 0.863523
AUC of PRC = 0.676586
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2453   21]
 [ 225   30]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.10144399851560593
difference in average predicted and observed risk = 0.00800299851560593
number samples = 2729
accuracy = 0.909857
precision class 0 = 0.915982
precision class 1 = 0.588235
recall class 0 = 0.991512
recall class 1 = 0.117647
false negative rate = 0.882353
false positive rate = 0.008488
positive prediction rate = 0.018688
AUC of ROC = 0.756195
AUC of PRC = 0.324038
min(+P, Se) = 0.353846

-------------------------------

confusion matrix:
[[1668   15]
 [ 179   37]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.1144070029258728
difference in average predicted and observed risk = 0.0006630029258728048
number samples = 1899
accuracy = 0.897841
precision class 0 = 0.903086
precision class 1 = 0.711538
recall class 0 = 0.991087
recall class 1 = 0.171296
false negative rate = 0.828704
false positive rate = 0.008913
positive prediction rate = 0.027383
AUC of ROC = 0.792305
AUC of PRC = 0.392229
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[542   7]
 [ 69   8]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.11681199818849564
difference in average predicted and observed risk = -0.006191001811504365
number samples = 626
accuracy = 0.878594
precision class 0 = 0.88707
precision class 1 = 0.533333
recall class 0 = 0.98725
recall class 1 = 0.103896
false negative rate = 0.896104
false positive rate = 0.01275
positive prediction rate = 0.023962
AUC of ROC = 0.759161
AUC of PRC = 0.337475
min(+P, Se) = 0.383721

-------------------------------

confusion matrix:
[[2241    8]
 [ 189   19]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.09494800120592117
difference in average predicted and observed risk = 0.010292001205921178
number samples = 2457
accuracy = 0.919821
precision class 0 = 0.922222
precision class 1 = 0.703704
recall class 0 = 0.996443
recall class 1 = 0.091346
false negative rate = 0.908654
false positive rate = 0.003557
positive prediction rate = 0.010989
AUC of ROC = 0.751757
AUC of PRC = 0.296022
min(+P, Se) = 0.317308

-------------------------------

confusion matrix:
[[217   6]
 [ 23   2]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.10812799632549286
difference in average predicted and observed risk = 0.007321996325492852
number samples = 248
accuracy = 0.883065
precision class 0 = 0.904167
precision class 1 = 0.25
recall class 0 = 0.973094
recall class 1 = 0.08
false negative rate = 0.92
false positive rate = 0.026906
positive prediction rate = 0.032258
AUC of ROC = 0.706368
AUC of PRC = 0.202141
min(+P, Se) = 0.32

-------------------------------

confusion matrix:
[[474   7]
 [ 59  23]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.13298299908638
difference in average predicted and observed risk = -0.012665000913619995
number samples = 563
accuracy = 0.882771
precision class 0 = 0.889306
precision class 1 = 0.766667
recall class 0 = 0.985447
recall class 1 = 0.280488
false negative rate = 0.719512
false positive rate = 0.014553
positive prediction rate = 0.053286
AUC of ROC = 0.812256
AUC of PRC = 0.547098
min(+P, Se) = 0.54878

-------------------------------

confusion matrix:
[[647   8]
 [ 64  15]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.11716900020837784
difference in average predicted and observed risk = 0.009540000208377836
number samples = 734
accuracy = 0.901907
precision class 0 = 0.909986
precision class 1 = 0.652174
recall class 0 = 0.987786
recall class 1 = 0.189873
false negative rate = 0.810127
false positive rate = 0.012214
positive prediction rate = 0.031335
AUC of ROC = 0.793816
AUC of PRC = 0.392273
min(+P, Se) = 0.426829

-------------------------------

confusion matrix:
[[4121   36]
 [ 404   67]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.10676299780607224
difference in average predicted and observed risk = 0.004990997806072234
number samples = 4628
accuracy = 0.904927
precision class 0 = 0.910718
precision class 1 = 0.650485
recall class 0 = 0.99134
recall class 1 = 0.142251
false negative rate = 0.857749
false positive rate = 0.00866
positive prediction rate = 0.022256
AUC of ROC = 0.771477
AUC of PRC = 0.356635
min(+P, Se) = 0.386412

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.10504300147294998
difference in average predicted and observed risk = 0.024874001472949978
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.854177
AUC of PRC = 0.343812
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[385   0]
 [ 42   5]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.1046380028128624
difference in average predicted and observed risk = -0.004157997187137608
number samples = 432
accuracy = 0.902778
precision class 0 = 0.901639
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.106383
false negative rate = 0.893617
false positive rate = 0.0
positive prediction rate = 0.011574
AUC of ROC = 0.756728
AUC of PRC = 0.409226
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[104   1]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.1304440051317215
difference in average predicted and observed risk = 0.020275005131721494
number samples = 118
accuracy = 0.923729
precision class 0 = 0.928571
precision class 1 = 0.833333
recall class 0 = 0.990476
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.009524
positive prediction rate = 0.050847
AUC of ROC = 0.891575
AUC of PRC = 0.678999
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.12793000042438507
difference in average predicted and observed risk = -0.005402999575614936
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[297   3]
 [ 35   4]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.11913099884986877
difference in average predicted and observed risk = 0.004086998849868781
number samples = 339
accuracy = 0.887906
precision class 0 = 0.894578
precision class 1 = 0.571429
recall class 0 = 0.99
recall class 1 = 0.102564
false negative rate = 0.897436
false positive rate = 0.01
positive prediction rate = 0.020649
AUC of ROC = 0.777094
AUC of PRC = 0.368593
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[433   1]
 [ 32  12]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.1023930013179779
difference in average predicted and observed risk = 0.010343001317977898
number samples = 478
accuracy = 0.930962
precision class 0 = 0.931183
precision class 1 = 0.923077
recall class 0 = 0.997696
recall class 1 = 0.272727
false negative rate = 0.727273
false positive rate = 0.002304
positive prediction rate = 0.027197
AUC of ROC = 0.838081
AUC of PRC = 0.533751
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 33   5]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.09741400182247162
difference in average predicted and observed risk = 0.008212001822471615
number samples = 426
accuracy = 0.922535
precision class 0 = 0.921615
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.131579
false negative rate = 0.868421
false positive rate = 0.0
positive prediction rate = 0.011737
AUC of ROC = 0.809957
AUC of PRC = 0.424812
min(+P, Se) = 0.425

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.1269879937171936
difference in average predicted and observed risk = 0.009340993717193602
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.934259
AUC of PRC = 0.718474
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.11145299673080444
difference in average predicted and observed risk = 0.022742996730804446
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.765889
AUC of PRC = 0.239742
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[106   2]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.12250799685716629
difference in average predicted and observed risk = -0.0270980031428337
number samples = 127
accuracy = 0.88189
precision class 0 = 0.890756
precision class 1 = 0.75
recall class 0 = 0.981481
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.018519
positive prediction rate = 0.062992
AUC of ROC = 0.769006
AUC of PRC = 0.548955
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[34  1]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.1447259932756424
difference in average predicted and observed risk = 0.06577899327564239
number samples = 38
accuracy = 0.921053
precision class 0 = 0.944444
precision class 1 = 0.5
recall class 0 = 0.971429
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.028571
positive prediction rate = 0.052632
AUC of ROC = 0.933333
AUC of PRC = 0.582341
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[730   4]
 [ 67  16]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.10933800041675568
difference in average predicted and observed risk = 0.0077470004167556755
number samples = 817
accuracy = 0.913097
precision class 0 = 0.915935
precision class 1 = 0.8
recall class 0 = 0.99455
recall class 1 = 0.192771
false negative rate = 0.807229
false positive rate = 0.00545
positive prediction rate = 0.02448
AUC of ROC = 0.812646
AUC of PRC = 0.460813
min(+P, Se) = 0.494118

-------------------------------

Epoch 00007: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch7.state
Epoch 8/100
 - 296s - loss: 0.2875 - val_loss: 0.2593

==>predicting on train



confusion matrix:
[[2146    9]
 [ 227   28]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.09984900057315826
difference in average predicted and observed risk = -0.005959999426841736
number samples = 2410
accuracy = 0.902075
precision class 0 = 0.904341
precision class 1 = 0.756757
recall class 0 = 0.995824
recall class 1 = 0.109804
false negative rate = 0.890196
false positive rate = 0.004176
positive prediction rate = 0.015353
AUC of ROC = 0.763236
AUC of PRC = 0.373849
min(+P, Se) = 0.385214

-------------------------------

confusion matrix:
[[1162   17]
 [ 100   18]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.10132399946451187
difference in average predicted and observed risk = 0.010344999464511867
number samples = 1297
accuracy = 0.909792
precision class 0 = 0.920761
precision class 1 = 0.514286
recall class 0 = 0.985581
recall class 1 = 0.152542
false negative rate = 0.847458
false positive rate = 0.014419
positive prediction rate = 0.026985
AUC of ROC = 0.790975
AUC of PRC = 0.30969
min(+P, Se) = 0.347458

-------------------------------

confusion matrix:
[[648   8]
 [ 61  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.11382099986076355
difference in average predicted and observed risk = 0.012450999860763548
number samples = 730
accuracy = 0.905479
precision class 0 = 0.913963
precision class 1 = 0.619048
recall class 0 = 0.987805
recall class 1 = 0.175676
false negative rate = 0.824324
false positive rate = 0.012195
positive prediction rate = 0.028767
AUC of ROC = 0.754429
AUC of PRC = 0.379351
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[166   1]
 [ 17   7]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.10760500282049179
difference in average predicted and observed risk = -0.018048997179508197
number samples = 191
accuracy = 0.905759
precision class 0 = 0.907104
precision class 1 = 0.875
recall class 0 = 0.994012
recall class 1 = 0.291667
false negative rate = 0.708333
false positive rate = 0.005988
positive prediction rate = 0.041885
AUC of ROC = 0.872754
AUC of PRC = 0.697852
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2453   21]
 [ 223   32]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.09760300070047379
difference in average predicted and observed risk = 0.004162000700473789
number samples = 2729
accuracy = 0.91059
precision class 0 = 0.916667
precision class 1 = 0.603774
recall class 0 = 0.991512
recall class 1 = 0.12549
false negative rate = 0.87451
false positive rate = 0.008488
positive prediction rate = 0.019421
AUC of ROC = 0.758844
AUC of PRC = 0.33371
min(+P, Se) = 0.359375

-------------------------------

confusion matrix:
[[1669   14]
 [ 182   34]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.11023499816656113
difference in average predicted and observed risk = -0.003509001833438871
number samples = 1899
accuracy = 0.896788
precision class 0 = 0.901675
precision class 1 = 0.708333
recall class 0 = 0.991682
recall class 1 = 0.157407
false negative rate = 0.842593
false positive rate = 0.008318
positive prediction rate = 0.025276
AUC of ROC = 0.793812
AUC of PRC = 0.402898
min(+P, Se) = 0.420091

-------------------------------

confusion matrix:
[[541   8]
 [ 70   7]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.11683099716901779
difference in average predicted and observed risk = -0.0061720028309822095
number samples = 626
accuracy = 0.875399
precision class 0 = 0.885434
precision class 1 = 0.466667
recall class 0 = 0.985428
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.014572
positive prediction rate = 0.023962
AUC of ROC = 0.75767
AUC of PRC = 0.337828
min(+P, Se) = 0.362745

-------------------------------

confusion matrix:
[[2242    7]
 [ 190   18]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08816800266504288
difference in average predicted and observed risk = 0.003512002665042882
number samples = 2457
accuracy = 0.919821
precision class 0 = 0.921875
precision class 1 = 0.72
recall class 0 = 0.996888
recall class 1 = 0.086538
false negative rate = 0.913462
false positive rate = 0.003112
positive prediction rate = 0.010175
AUC of ROC = 0.75552
AUC of PRC = 0.301206
min(+P, Se) = 0.322115

-------------------------------

confusion matrix:
[[217   6]
 [ 23   2]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.10595700144767761
difference in average predicted and observed risk = 0.005151001447677606
number samples = 248
accuracy = 0.883065
precision class 0 = 0.904167
precision class 1 = 0.25
recall class 0 = 0.973094
recall class 1 = 0.08
false negative rate = 0.92
false positive rate = 0.026906
positive prediction rate = 0.032258
AUC of ROC = 0.723049
AUC of PRC = 0.213507
min(+P, Se) = 0.32

-------------------------------

confusion matrix:
[[472   9]
 [ 58  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.13375499844551086
difference in average predicted and observed risk = -0.011893001554489135
number samples = 563
accuracy = 0.880995
precision class 0 = 0.890566
precision class 1 = 0.727273
recall class 0 = 0.981289
recall class 1 = 0.292683
false negative rate = 0.707317
false positive rate = 0.018711
positive prediction rate = 0.058615
AUC of ROC = 0.815298
AUC of PRC = 0.555719
min(+P, Se) = 0.554217

-------------------------------

confusion matrix:
[[650   5]
 [ 64  15]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.11491700261831284
difference in average predicted and observed risk = 0.007288002618312833
number samples = 734
accuracy = 0.905995
precision class 0 = 0.910364
precision class 1 = 0.75
recall class 0 = 0.992366
recall class 1 = 0.189873
false negative rate = 0.810127
false positive rate = 0.007634
positive prediction rate = 0.027248
AUC of ROC = 0.795401
AUC of PRC = 0.406537
min(+P, Se) = 0.443038

-------------------------------

confusion matrix:
[[4122   35]
 [ 405   66]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.10278599709272385
difference in average predicted and observed risk = 0.001013997092723845
number samples = 4628
accuracy = 0.904927
precision class 0 = 0.910537
precision class 1 = 0.653465
recall class 0 = 0.99158
recall class 1 = 0.140127
false negative rate = 0.859873
false positive rate = 0.00842
positive prediction rate = 0.021824
AUC of ROC = 0.774811
AUC of PRC = 0.365854
min(+P, Se) = 0.384289

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.09850099682807922
difference in average predicted and observed risk = 0.01833199682807922
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.853694
AUC of PRC = 0.360773
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[385   0]
 [ 42   5]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.10371299833059311
difference in average predicted and observed risk = -0.005083001669406895
number samples = 432
accuracy = 0.902778
precision class 0 = 0.901639
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.106383
false negative rate = 0.893617
false positive rate = 0.0
positive prediction rate = 0.011574
AUC of ROC = 0.764686
AUC of PRC = 0.407151
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[105   0]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.13371700048446655
difference in average predicted and observed risk = 0.02354800048446655
number samples = 118
accuracy = 0.932203
precision class 0 = 0.929204
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.0
positive prediction rate = 0.042373
AUC of ROC = 0.890842
AUC of PRC = 0.689332
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.12984199821949005
difference in average predicted and observed risk = -0.003491001780509956
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[298   2]
 [ 35   4]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.11746899783611298
difference in average predicted and observed risk = 0.0024249978361129826
number samples = 339
accuracy = 0.890855
precision class 0 = 0.894895
precision class 1 = 0.666667
recall class 0 = 0.993333
recall class 1 = 0.102564
false negative rate = 0.897436
false positive rate = 0.006667
positive prediction rate = 0.017699
AUC of ROC = 0.784786
AUC of PRC = 0.371524
min(+P, Se) = 0.452381

-------------------------------

confusion matrix:
[[433   1]
 [ 32  12]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.10041999816894531
difference in average predicted and observed risk = 0.008369998168945306
number samples = 478
accuracy = 0.930962
precision class 0 = 0.931183
precision class 1 = 0.923077
recall class 0 = 0.997696
recall class 1 = 0.272727
false negative rate = 0.727273
false positive rate = 0.002304
positive prediction rate = 0.027197
AUC of ROC = 0.836929
AUC of PRC = 0.537438
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[388   0]
 [ 33   5]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.09178999811410904
difference in average predicted and observed risk = 0.002587998114109036
number samples = 426
accuracy = 0.922535
precision class 0 = 0.921615
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.131579
false negative rate = 0.868421
false positive rate = 0.0
positive prediction rate = 0.011737
AUC of ROC = 0.815315
AUC of PRC = 0.41984
min(+P, Se) = 0.435897

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.12971200048923492
difference in average predicted and observed risk = 0.012065000489234923
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.937963
AUC of PRC = 0.750097
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.1145780012011528
difference in average predicted and observed risk = 0.025868001201152804
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.776348
AUC of PRC = 0.25156
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[107   1]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.12166299670934677
difference in average predicted and observed risk = -0.027943003290653218
number samples = 127
accuracy = 0.889764
precision class 0 = 0.891667
precision class 1 = 0.857143
recall class 0 = 0.990741
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.009259
positive prediction rate = 0.055118
AUC of ROC = 0.766569
AUC of PRC = 0.560861
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[34  1]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.15344299376010895
difference in average predicted and observed risk = 0.07449599376010894
number samples = 38
accuracy = 0.921053
precision class 0 = 0.944444
precision class 1 = 0.5
recall class 0 = 0.971429
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.028571
positive prediction rate = 0.052632
AUC of ROC = 0.92381
AUC of PRC = 0.551786
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[731   3]
 [ 67  16]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.10749399662017822
difference in average predicted and observed risk = 0.005902996620178222
number samples = 817
accuracy = 0.914321
precision class 0 = 0.91604
precision class 1 = 0.842105
recall class 0 = 0.995913
recall class 1 = 0.192771
false negative rate = 0.807229
false positive rate = 0.004087
positive prediction rate = 0.023256
AUC of ROC = 0.815075
AUC of PRC = 0.465857
min(+P, Se) = 0.506024

-------------------------------

Epoch 00008: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch8.state
Epoch 9/100
 - 299s - loss: 0.2947 - val_loss: 0.2724

==>predicting on train



confusion matrix:
[[2153    2]
 [ 249    6]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.12911400198936462
difference in average predicted and observed risk = 0.023305001989364624
number samples = 2410
accuracy = 0.895851
precision class 0 = 0.896336
precision class 1 = 0.75
recall class 0 = 0.999072
recall class 1 = 0.023529
false negative rate = 0.976471
false positive rate = 0.000928
positive prediction rate = 0.00332
AUC of ROC = 0.770584
AUC of PRC = 0.380818
min(+P, Se) = 0.385214

-------------------------------

confusion matrix:
[[1175    4]
 [ 115    3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.12936599552631378
difference in average predicted and observed risk = 0.03838699552631378
number samples = 1297
accuracy = 0.90825
precision class 0 = 0.910853
precision class 1 = 0.428571
recall class 0 = 0.996607
recall class 1 = 0.025424
false negative rate = 0.974576
false positive rate = 0.003393
positive prediction rate = 0.005397
AUC of ROC = 0.789034
AUC of PRC = 0.320161
min(+P, Se) = 0.364407

-------------------------------

confusion matrix:
[[654   2]
 [ 72   2]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.14092299342155457
difference in average predicted and observed risk = 0.039552993421554564
number samples = 730
accuracy = 0.89863
precision class 0 = 0.900826
precision class 1 = 0.5
recall class 0 = 0.996951
recall class 1 = 0.027027
false negative rate = 0.972973
false positive rate = 0.003049
positive prediction rate = 0.005479
AUC of ROC = 0.751318
AUC of PRC = 0.363449
min(+P, Se) = 0.423077

-------------------------------

confusion matrix:
[[167   0]
 [ 20   4]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.13583600521087646
difference in average predicted and observed risk = 0.010182005210876477
number samples = 191
accuracy = 0.895288
precision class 0 = 0.893048
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.020942
AUC of ROC = 0.865768
AUC of PRC = 0.699234
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2472    2]
 [ 248    7]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.1250319927930832
difference in average predicted and observed risk = 0.031590992793083195
number samples = 2729
accuracy = 0.908391
precision class 0 = 0.908824
precision class 1 = 0.777778
recall class 0 = 0.999192
recall class 1 = 0.027451
false negative rate = 0.972549
false positive rate = 0.000808
positive prediction rate = 0.003298
AUC of ROC = 0.761853
AUC of PRC = 0.34361
min(+P, Se) = 0.364706

-------------------------------

confusion matrix:
[[1677    6]
 [ 208    8]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.14036700129508972
difference in average predicted and observed risk = 0.026623001295089724
number samples = 1899
accuracy = 0.887309
precision class 0 = 0.889655
precision class 1 = 0.571429
recall class 0 = 0.996435
recall class 1 = 0.037037
false negative rate = 0.962963
false positive rate = 0.003565
positive prediction rate = 0.007372
AUC of ROC = 0.798959
AUC of PRC = 0.398732
min(+P, Se) = 0.419214

-------------------------------

confusion matrix:
[[548   1]
 [ 76   1]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.14302699267864227
difference in average predicted and observed risk = 0.02002399267864227
number samples = 626
accuracy = 0.876997
precision class 0 = 0.878205
precision class 1 = 0.5
recall class 0 = 0.998178
recall class 1 = 0.012987
false negative rate = 0.987013
false positive rate = 0.001821
positive prediction rate = 0.003195
AUC of ROC = 0.764105
AUC of PRC = 0.354734
min(+P, Se) = 0.376623

-------------------------------

confusion matrix:
[[2247    2]
 [ 204    4]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.12000399827957153
difference in average predicted and observed risk = 0.03534799827957154
number samples = 2457
accuracy = 0.916158
precision class 0 = 0.916769
precision class 1 = 0.666667
recall class 0 = 0.999111
recall class 1 = 0.019231
false negative rate = 0.980769
false positive rate = 0.000889
positive prediction rate = 0.002442
AUC of ROC = 0.75608
AUC of PRC = 0.304634
min(+P, Se) = 0.319635

-------------------------------

confusion matrix:
[[221   2]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.1355690062046051
difference in average predicted and observed risk = 0.034763006204605096
number samples = 248
accuracy = 0.891129
precision class 0 = 0.898374
precision class 1 = 0.0
recall class 0 = 0.991031
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.008969
positive prediction rate = 0.008065
AUC of ROC = 0.725561
AUC of PRC = 0.21227
min(+P, Se) = 0.32

-------------------------------

confusion matrix:
[[479   2]
 [ 77   5]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.15665900707244873
difference in average predicted and observed risk = 0.01101100707244873
number samples = 563
accuracy = 0.85968
precision class 0 = 0.861511
precision class 1 = 0.714286
recall class 0 = 0.995842
recall class 1 = 0.060976
false negative rate = 0.939024
false positive rate = 0.004158
positive prediction rate = 0.012433
AUC of ROC = 0.821231
AUC of PRC = 0.558539
min(+P, Se) = 0.554217

-------------------------------

confusion matrix:
[[654   1]
 [ 74   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.138372004032135
difference in average predicted and observed risk = 0.030743004032135007
number samples = 734
accuracy = 0.89782
precision class 0 = 0.898352
precision class 1 = 0.833333
recall class 0 = 0.998473
recall class 1 = 0.063291
false negative rate = 0.936709
false positive rate = 0.001527
positive prediction rate = 0.008174
AUC of ROC = 0.796947
AUC of PRC = 0.410311
min(+P, Se) = 0.423529

-------------------------------

confusion matrix:
[[4149    8]
 [ 456   15]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.13132500648498535
difference in average predicted and observed risk = 0.02955300648498535
number samples = 4628
accuracy = 0.899741
precision class 0 = 0.900977
precision class 1 = 0.652174
recall class 0 = 0.998076
recall class 1 = 0.031847
false negative rate = 0.968153
false positive rate = 0.001924
positive prediction rate = 0.00497
AUC of ROC = 0.777749
AUC of PRC = 0.369021
min(+P, Se) = 0.396186

-------------------------------

==>predicting on validation



confusion matrix:
[[217   1]
 [ 19   0]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.12640100717544556
difference in average predicted and observed risk = 0.04623200717544555
number samples = 237
accuracy = 0.915612
precision class 0 = 0.919492
precision class 1 = 0.0
recall class 0 = 0.995413
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.004587
positive prediction rate = 0.004219
AUC of ROC = 0.864075
AUC of PRC = 0.349309
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[385   0]
 [ 46   1]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.13265399634838104
difference in average predicted and observed risk = 0.02385799634838104
number samples = 432
accuracy = 0.893519
precision class 0 = 0.893271
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.021277
false negative rate = 0.978723
false positive rate = 0.0
positive prediction rate = 0.002315
AUC of ROC = 0.763913
AUC of PRC = 0.424374
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[105   0]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.15626899898052216
difference in average predicted and observed risk = 0.04609999898052215
number samples = 118
accuracy = 0.915254
precision class 0 = 0.913043
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.0
positive prediction rate = 0.025424
AUC of ROC = 0.90696
AUC of PRC = 0.69404
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.15739500522613525
difference in average predicted and observed risk = 0.024062005226135247
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[300   0]
 [ 37   2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.14612899720668793
difference in average predicted and observed risk = 0.031084997206687934
number samples = 339
accuracy = 0.890855
precision class 0 = 0.890208
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.051282
false negative rate = 0.948718
false positive rate = 0.0
positive prediction rate = 0.0059
AUC of ROC = 0.794359
AUC of PRC = 0.379602
min(+P, Se) = 0.465116

-------------------------------

confusion matrix:
[[433   1]
 [ 40   4]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.12737999856472015
difference in average predicted and observed risk = 0.03532999856472015
number samples = 478
accuracy = 0.914226
precision class 0 = 0.915433
precision class 1 = 0.8
recall class 0 = 0.997696
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.002304
positive prediction rate = 0.01046
AUC of ROC = 0.842742
AUC of PRC = 0.540268
min(+P, Se) = 0.522727

-------------------------------

confusion matrix:
[[388   0]
 [ 37   1]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.12229300290346146
difference in average predicted and observed risk = 0.03309100290346145
number samples = 426
accuracy = 0.913146
precision class 0 = 0.912941
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.026316
false negative rate = 0.973684
false positive rate = 0.0
positive prediction rate = 0.002347
AUC of ROC = 0.825895
AUC of PRC = 0.438623
min(+P, Se) = 0.425

-------------------------------

confusion matrix:
[[90  0]
 [11  1]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.15296100080013275
difference in average predicted and observed risk = 0.03531400080013275
number samples = 102
accuracy = 0.892157
precision class 0 = 0.891089
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.009804
AUC of ROC = 0.942593
AUC of PRC = 0.751016
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.1421860009431839
difference in average predicted and observed risk = 0.0534760009431839
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.771521
AUC of PRC = 0.239909
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[108   0]
 [ 15   4]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.14507900178432465
difference in average predicted and observed risk = -0.004526998215675343
number samples = 127
accuracy = 0.88189
precision class 0 = 0.878049
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.0
positive prediction rate = 0.031496
AUC of ROC = 0.785088
AUC of PRC = 0.587723
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.1755319982767105
difference in average predicted and observed risk = 0.09658499827671051
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.895238
AUC of PRC = 0.268849
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[733   1]
 [ 77   6]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.13515900075435638
difference in average predicted and observed risk = 0.033568000754356384
number samples = 817
accuracy = 0.904529
precision class 0 = 0.904938
precision class 1 = 0.857143
recall class 0 = 0.998638
recall class 1 = 0.072289
false negative rate = 0.927711
false positive rate = 0.001362
positive prediction rate = 0.008568
AUC of ROC = 0.82279
AUC of PRC = 0.470588
min(+P, Se) = 0.506024

-------------------------------

Epoch 00009: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch9.state
Epoch 10/100
 - 297s - loss: 0.2885 - val_loss: 0.2596

==>predicting on train



confusion matrix:
[[2142   13]
 [ 224   31]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.0949459969997406
difference in average predicted and observed risk = -0.0108630030002594
number samples = 2410
accuracy = 0.90166
precision class 0 = 0.905325
precision class 1 = 0.704545
recall class 0 = 0.993968
recall class 1 = 0.121569
false negative rate = 0.878431
false positive rate = 0.006032
positive prediction rate = 0.018257
AUC of ROC = 0.769574
AUC of PRC = 0.373226
min(+P, Se) = 0.381323

-------------------------------

confusion matrix:
[[1165   14]
 [ 107   11]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.09201300144195557
difference in average predicted and observed risk = 0.001034001441955562
number samples = 1297
accuracy = 0.906708
precision class 0 = 0.915881
precision class 1 = 0.44
recall class 0 = 0.988126
recall class 1 = 0.09322
false negative rate = 0.90678
false positive rate = 0.011874
positive prediction rate = 0.019275
AUC of ROC = 0.790623
AUC of PRC = 0.310441
min(+P, Se) = 0.352941

-------------------------------

confusion matrix:
[[646  10]
 [ 62  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.10541799664497375
difference in average predicted and observed risk = 0.004047996644973753
number samples = 730
accuracy = 0.90137
precision class 0 = 0.912429
precision class 1 = 0.545455
recall class 0 = 0.984756
recall class 1 = 0.162162
false negative rate = 0.837838
false positive rate = 0.015244
positive prediction rate = 0.030137
AUC of ROC = 0.759291
AUC of PRC = 0.389082
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[166   1]
 [ 15   9]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.10327800363302231
difference in average predicted and observed risk = -0.02237599636697768
number samples = 191
accuracy = 0.91623
precision class 0 = 0.917127
precision class 1 = 0.9
recall class 0 = 0.994012
recall class 1 = 0.375
false negative rate = 0.625
false positive rate = 0.005988
positive prediction rate = 0.052356
AUC of ROC = 0.872505
AUC of PRC = 0.680041
min(+P, Se) = 0.64

-------------------------------

confusion matrix:
[[2451   23]
 [ 228   27]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.09172999858856201
difference in average predicted and observed risk = -0.0017110014114379846
number samples = 2729
accuracy = 0.908025
precision class 0 = 0.914894
precision class 1 = 0.54
recall class 0 = 0.990703
recall class 1 = 0.105882
false negative rate = 0.894118
false positive rate = 0.009297
positive prediction rate = 0.018322
AUC of ROC = 0.765958
AUC of PRC = 0.331957
min(+P, Se) = 0.352941

-------------------------------

confusion matrix:
[[1668   15]
 [ 180   36]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.10242799669504166
difference in average predicted and observed risk = -0.011316003304958341
number samples = 1899
accuracy = 0.897314
precision class 0 = 0.902597
precision class 1 = 0.705882
recall class 0 = 0.991087
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.008913
positive prediction rate = 0.026856
AUC of ROC = 0.795402
AUC of PRC = 0.420615
min(+P, Se) = 0.422222

-------------------------------

confusion matrix:
[[543   6]
 [ 73   4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.10608299821615219
difference in average predicted and observed risk = -0.01692000178384781
number samples = 626
accuracy = 0.873802
precision class 0 = 0.881494
precision class 1 = 0.4
recall class 0 = 0.989071
recall class 1 = 0.051948
false negative rate = 0.948052
false positive rate = 0.010929
positive prediction rate = 0.015974
AUC of ROC = 0.760864
AUC of PRC = 0.336944
min(+P, Se) = 0.383721

-------------------------------

confusion matrix:
[[2239   10]
 [ 192   16]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08328799903392792
difference in average predicted and observed risk = -0.0013680009660720777
number samples = 2457
accuracy = 0.917786
precision class 0 = 0.92102
precision class 1 = 0.615385
recall class 0 = 0.995554
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.004446
positive prediction rate = 0.010582
AUC of ROC = 0.760919
AUC of PRC = 0.303076
min(+P, Se) = 0.302885

-------------------------------

confusion matrix:
[[218   5]
 [ 24   1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.09775000065565109
difference in average predicted and observed risk = -0.003055999344348914
number samples = 248
accuracy = 0.883065
precision class 0 = 0.900826
precision class 1 = 0.166667
recall class 0 = 0.977578
recall class 1 = 0.04
false negative rate = 0.96
false positive rate = 0.022422
positive prediction rate = 0.024194
AUC of ROC = 0.726278
AUC of PRC = 0.209393
min(+P, Se) = 0.305556

-------------------------------

confusion matrix:
[[474   7]
 [ 58  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12436500191688538
difference in average predicted and observed risk = -0.021282998083114624
number samples = 563
accuracy = 0.884547
precision class 0 = 0.890977
precision class 1 = 0.774194
recall class 0 = 0.985447
recall class 1 = 0.292683
false negative rate = 0.707317
false positive rate = 0.014553
positive prediction rate = 0.055062
AUC of ROC = 0.820648
AUC of PRC = 0.572717
min(+P, Se) = 0.542169

-------------------------------

confusion matrix:
[[645  10]
 [ 61  18]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.10835900157690048
difference in average predicted and observed risk = 0.0007300015769004797
number samples = 734
accuracy = 0.90327
precision class 0 = 0.913598
precision class 1 = 0.642857
recall class 0 = 0.984733
recall class 1 = 0.227848
false negative rate = 0.772152
false positive rate = 0.015267
positive prediction rate = 0.038147
AUC of ROC = 0.802338
AUC of PRC = 0.414814
min(+P, Se) = 0.4625

-------------------------------

confusion matrix:
[[4119   38]
 [ 408   63]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09611999988555908
difference in average predicted and observed risk = -0.005652000114440919
number samples = 4628
accuracy = 0.90363
precision class 0 = 0.909874
precision class 1 = 0.623762
recall class 0 = 0.990859
recall class 1 = 0.133758
false negative rate = 0.866242
false positive rate = 0.009141
positive prediction rate = 0.021824
AUC of ROC = 0.779434
AUC of PRC = 0.374683
min(+P, Se) = 0.380042

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.0908690020442009
difference in average predicted and observed risk = 0.010700002044200893
number samples = 237
accuracy = 0.92827
precision class 0 = 0.935065
precision class 1 = 0.666667
recall class 0 = 0.990826
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.009174
positive prediction rate = 0.025316
AUC of ROC = 0.863351
AUC of PRC = 0.362584
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[385   0]
 [ 42   5]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.0949610024690628
difference in average predicted and observed risk = -0.013834997530937199
number samples = 432
accuracy = 0.902778
precision class 0 = 0.901639
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.106383
false negative rate = 0.893617
false positive rate = 0.0
positive prediction rate = 0.011574
AUC of ROC = 0.771373
AUC of PRC = 0.416494
min(+P, Se) = 0.431373

-------------------------------

confusion matrix:
[[104   1]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.1206900030374527
difference in average predicted and observed risk = 0.010521003037452695
number samples = 118
accuracy = 0.923729
precision class 0 = 0.928571
precision class 1 = 0.833333
recall class 0 = 0.990476
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.009524
positive prediction rate = 0.050847
AUC of ROC = 0.901099
AUC of PRC = 0.670873
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.12260100245475769
difference in average predicted and observed risk = -0.010731997545242317
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[298   2]
 [ 35   4]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.10602899640798569
difference in average predicted and observed risk = -0.009015003592014306
number samples = 339
accuracy = 0.890855
precision class 0 = 0.894895
precision class 1 = 0.666667
recall class 0 = 0.993333
recall class 1 = 0.102564
false negative rate = 0.897436
false positive rate = 0.006667
positive prediction rate = 0.017699
AUC of ROC = 0.770598
AUC of PRC = 0.360384
min(+P, Se) = 0.465116

-------------------------------

confusion matrix:
[[433   1]
 [ 32  12]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.09316900372505188
difference in average predicted and observed risk = 0.001119003725051873
number samples = 478
accuracy = 0.930962
precision class 0 = 0.931183
precision class 1 = 0.923077
recall class 0 = 0.997696
recall class 1 = 0.272727
false negative rate = 0.727273
false positive rate = 0.002304
positive prediction rate = 0.027197
AUC of ROC = 0.862694
AUC of PRC = 0.563196
min(+P, Se) = 0.568182

-------------------------------

confusion matrix:
[[388   0]
 [ 33   5]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08511699736118317
difference in average predicted and observed risk = -0.004085002638816837
number samples = 426
accuracy = 0.922535
precision class 0 = 0.921615
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.131579
false negative rate = 0.868421
false positive rate = 0.0
positive prediction rate = 0.011737
AUC of ROC = 0.83105
AUC of PRC = 0.446797
min(+P, Se) = 0.425

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.11891300231218338
difference in average predicted and observed risk = 0.0012660023121833786
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.924074
AUC of PRC = 0.704202
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.10123100131750107
difference in average predicted and observed risk = 0.012521001317501071
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.765084
AUC of PRC = 0.231473
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[106   2]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.11398100107908249
difference in average predicted and observed risk = -0.0356249989209175
number samples = 127
accuracy = 0.88189
precision class 0 = 0.890756
precision class 1 = 0.75
recall class 0 = 0.981481
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.018519
positive prediction rate = 0.062992
AUC of ROC = 0.786062
AUC of PRC = 0.566513
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.13319499790668488
difference in average predicted and observed risk = 0.05424799790668487
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.914286
AUC of PRC = 0.538889
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[731   3]
 [ 67  16]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09850499778985977
difference in average predicted and observed risk = -0.003086002210140229
number samples = 817
accuracy = 0.914321
precision class 0 = 0.91604
precision class 1 = 0.842105
recall class 0 = 0.995913
recall class 1 = 0.192771
false negative rate = 0.807229
false positive rate = 0.004087
positive prediction rate = 0.023256
AUC of ROC = 0.825039
AUC of PRC = 0.473402
min(+P, Se) = 0.506024

-------------------------------

Epoch 00010: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch10.state
Epoch 11/100
 - 296s - loss: 0.2858 - val_loss: 0.2620

==>predicting on train



confusion matrix:
[[2148    7]
 [ 231   24]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.08345499634742737
difference in average predicted and observed risk = -0.022354003652572632
number samples = 2410
accuracy = 0.901245
precision class 0 = 0.9029
precision class 1 = 0.774194
recall class 0 = 0.996752
recall class 1 = 0.094118
false negative rate = 0.905882
false positive rate = 0.003248
positive prediction rate = 0.012863
AUC of ROC = 0.77331
AUC of PRC = 0.375563
min(+P, Se) = 0.384615

-------------------------------

confusion matrix:
[[1174    5]
 [ 110    8]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.0810139998793602
difference in average predicted and observed risk = -0.009965000120639805
number samples = 1297
accuracy = 0.911334
precision class 0 = 0.91433
precision class 1 = 0.615385
recall class 0 = 0.995759
recall class 1 = 0.067797
false negative rate = 0.932203
false positive rate = 0.004241
positive prediction rate = 0.010023
AUC of ROC = 0.791435
AUC of PRC = 0.313315
min(+P, Se) = 0.372881

-------------------------------

confusion matrix:
[[655   1]
 [ 68   6]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09025900065898895
difference in average predicted and observed risk = -0.01111099934101105
number samples = 730
accuracy = 0.905479
precision class 0 = 0.905947
precision class 1 = 0.857143
recall class 0 = 0.998476
recall class 1 = 0.081081
false negative rate = 0.918919
false positive rate = 0.001524
positive prediction rate = 0.009589
AUC of ROC = 0.766624
AUC of PRC = 0.376062
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[166   1]
 [ 17   7]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.0946279987692833
difference in average predicted and observed risk = -0.031026001230716693
number samples = 191
accuracy = 0.905759
precision class 0 = 0.907104
precision class 1 = 0.875
recall class 0 = 0.994012
recall class 1 = 0.291667
false negative rate = 0.708333
false positive rate = 0.005988
positive prediction rate = 0.041885
AUC of ROC = 0.879242
AUC of PRC = 0.691309
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2468    6]
 [ 239   16]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07995399832725525
difference in average predicted and observed risk = -0.013487001672744747
number samples = 2729
accuracy = 0.910224
precision class 0 = 0.91171
precision class 1 = 0.727273
recall class 0 = 0.997575
recall class 1 = 0.062745
false negative rate = 0.937255
false positive rate = 0.002425
positive prediction rate = 0.008062
AUC of ROC = 0.775272
AUC of PRC = 0.341814
min(+P, Se) = 0.360784

-------------------------------

confusion matrix:
[[1675    8]
 [ 187   29]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.0905579999089241
difference in average predicted and observed risk = -0.023186000091075895
number samples = 1899
accuracy = 0.897314
precision class 0 = 0.89957
precision class 1 = 0.783784
recall class 0 = 0.995247
recall class 1 = 0.134259
false negative rate = 0.865741
false positive rate = 0.004753
positive prediction rate = 0.019484
AUC of ROC = 0.792737
AUC of PRC = 0.41581
min(+P, Se) = 0.425926

-------------------------------

confusion matrix:
[[547   2]
 [ 74   3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.09502699971199036
difference in average predicted and observed risk = -0.027976000288009645
number samples = 626
accuracy = 0.878594
precision class 0 = 0.880837
precision class 1 = 0.6
recall class 0 = 0.996357
recall class 1 = 0.038961
false negative rate = 0.961039
false positive rate = 0.003643
positive prediction rate = 0.007987
AUC of ROC = 0.76498
AUC of PRC = 0.34575
min(+P, Se) = 0.395062

-------------------------------

confusion matrix:
[[2248    1]
 [ 198   10]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07297699898481369
difference in average predicted and observed risk = -0.011679001015186305
number samples = 2457
accuracy = 0.919007
precision class 0 = 0.919052
precision class 1 = 0.909091
recall class 0 = 0.999555
recall class 1 = 0.048077
false negative rate = 0.951923
false positive rate = 0.000445
positive prediction rate = 0.004477
AUC of ROC = 0.766633
AUC of PRC = 0.312173
min(+P, Se) = 0.328571

-------------------------------

confusion matrix:
[[219   4]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.08771400153636932
difference in average predicted and observed risk = -0.013091998463630683
number samples = 248
accuracy = 0.883065
precision class 0 = 0.897541
precision class 1 = 0.0
recall class 0 = 0.982063
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.017937
positive prediction rate = 0.016129
AUC of ROC = 0.72861
AUC of PRC = 0.212102
min(+P, Se) = 0.305556

-------------------------------

confusion matrix:
[[479   2]
 [ 61  21]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.10867500305175781
difference in average predicted and observed risk = -0.03697299694824219
number samples = 563
accuracy = 0.888099
precision class 0 = 0.887037
precision class 1 = 0.913043
recall class 0 = 0.995842
recall class 1 = 0.256098
false negative rate = 0.743902
false positive rate = 0.004158
positive prediction rate = 0.040853
AUC of ROC = 0.822042
AUC of PRC = 0.555116
min(+P, Se) = 0.52439

-------------------------------

confusion matrix:
[[650   5]
 [ 68  11]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09323900192975998
difference in average predicted and observed risk = -0.014389998070240023
number samples = 734
accuracy = 0.900545
precision class 0 = 0.905292
precision class 1 = 0.6875
recall class 0 = 0.992366
recall class 1 = 0.139241
false negative rate = 0.860759
false positive rate = 0.007634
positive prediction rate = 0.021798
AUC of ROC = 0.804097
AUC of PRC = 0.415547
min(+P, Se) = 0.43038

-------------------------------

confusion matrix:
[[4143   14]
 [ 426   45]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08430500328540802
difference in average predicted and observed risk = -0.01746699671459198
number samples = 4628
accuracy = 0.904927
precision class 0 = 0.906763
precision class 1 = 0.762712
recall class 0 = 0.996632
recall class 1 = 0.095541
false negative rate = 0.904459
false positive rate = 0.003368
positive prediction rate = 0.012748
AUC of ROC = 0.783253
AUC of PRC = 0.37665
min(+P, Se) = 0.390658

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 18   1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08047600090503693
difference in average predicted and observed risk = 0.0003070009050369221
number samples = 237
accuracy = 0.915612
precision class 0 = 0.923077
precision class 1 = 0.333333
recall class 0 = 0.990826
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.009174
positive prediction rate = 0.012658
AUC of ROC = 0.843795
AUC of PRC = 0.342188
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[385   0]
 [ 45   2]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.08228799700737
difference in average predicted and observed risk = -0.02650800299263001
number samples = 432
accuracy = 0.895833
precision class 0 = 0.895349
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.042553
false negative rate = 0.957447
false positive rate = 0.0
positive prediction rate = 0.00463
AUC of ROC = 0.774468
AUC of PRC = 0.432298
min(+P, Se) = 0.44898

-------------------------------

confusion matrix:
[[105   0]
 [ 11   2]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10344699770212173
difference in average predicted and observed risk = -0.006722002297878268
number samples = 118
accuracy = 0.90678
precision class 0 = 0.905172
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.153846
false negative rate = 0.846154
false positive rate = 0.0
positive prediction rate = 0.016949
AUC of ROC = 0.893773
AUC of PRC = 0.639696
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11312299966812134
difference in average predicted and observed risk = -0.02021000033187867
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[299   1]
 [ 37   2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.0923440009355545
difference in average predicted and observed risk = -0.02269999906444549
number samples = 339
accuracy = 0.887906
precision class 0 = 0.889881
precision class 1 = 0.666667
recall class 0 = 0.996667
recall class 1 = 0.051282
false negative rate = 0.948718
false positive rate = 0.003333
positive prediction rate = 0.00885
AUC of ROC = 0.763675
AUC of PRC = 0.370899
min(+P, Se) = 0.439024

-------------------------------

confusion matrix:
[[433   1]
 [ 39   5]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08141600340604782
difference in average predicted and observed risk = -0.010633996593952186
number samples = 478
accuracy = 0.916318
precision class 0 = 0.917373
precision class 1 = 0.833333
recall class 0 = 0.997696
recall class 1 = 0.113636
false negative rate = 0.886364
false positive rate = 0.002304
positive prediction rate = 0.012552
AUC of ROC = 0.859028
AUC of PRC = 0.55842
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 36   2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.07429900020360947
difference in average predicted and observed risk = -0.014902999796390537
number samples = 426
accuracy = 0.915493
precision class 0 = 0.915094
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004695
AUC of ROC = 0.825827
AUC of PRC = 0.447739
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[90  0]
 [10  2]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.10169299691915512
difference in average predicted and observed risk = -0.01595400308084488
number samples = 102
accuracy = 0.901961
precision class 0 = 0.9
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.019608
AUC of ROC = 0.92963
AUC of PRC = 0.727287
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.08887100219726562
difference in average predicted and observed risk = 0.0001610021972656278
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.763475
AUC of PRC = 0.244473
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[107   1]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10106600075960159
difference in average predicted and observed risk = -0.048539999240398396
number samples = 127
accuracy = 0.866142
precision class 0 = 0.869919
precision class 1 = 0.75
recall class 0 = 0.990741
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009259
positive prediction rate = 0.031496
AUC of ROC = 0.780214
AUC of PRC = 0.565988
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.1142750009894371
difference in average predicted and observed risk = 0.0353280009894371
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.92381
AUC of PRC = 0.549206
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[732   2]
 [ 76   7]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.08595100045204163
difference in average predicted and observed risk = -0.015639999547958375
number samples = 817
accuracy = 0.904529
precision class 0 = 0.905941
precision class 1 = 0.777778
recall class 0 = 0.997275
recall class 1 = 0.084337
false negative rate = 0.915663
false positive rate = 0.002725
positive prediction rate = 0.011016
AUC of ROC = 0.819967
AUC of PRC = 0.474495
min(+P, Se) = 0.506024

-------------------------------

Epoch 00011: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch11.state
Epoch 12/100
 - 298s - loss: 0.2901 - val_loss: 0.2623

==>predicting on train



confusion matrix:
[[2148    7]
 [ 229   26]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.08826400339603424
difference in average predicted and observed risk = -0.01754499660396576
number samples = 2410
accuracy = 0.902075
precision class 0 = 0.90366
precision class 1 = 0.787879
recall class 0 = 0.996752
recall class 1 = 0.101961
false negative rate = 0.898039
false positive rate = 0.003248
positive prediction rate = 0.013693
AUC of ROC = 0.766957
AUC of PRC = 0.377383
min(+P, Se) = 0.388235

-------------------------------

confusion matrix:
[[1175    4]
 [ 111    7]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08439599722623825
difference in average predicted and observed risk = -0.006583002773761754
number samples = 1297
accuracy = 0.911334
precision class 0 = 0.913686
precision class 1 = 0.636364
recall class 0 = 0.996607
recall class 1 = 0.059322
false negative rate = 0.940678
false positive rate = 0.003393
positive prediction rate = 0.008481
AUC of ROC = 0.789278
AUC of PRC = 0.316876
min(+P, Se) = 0.364407

-------------------------------

confusion matrix:
[[654   2]
 [ 68   6]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09404700249433517
difference in average predicted and observed risk = -0.007322997505664827
number samples = 730
accuracy = 0.90411
precision class 0 = 0.905817
precision class 1 = 0.75
recall class 0 = 0.996951
recall class 1 = 0.081081
false negative rate = 0.918919
false positive rate = 0.003049
positive prediction rate = 0.010959
AUC of ROC = 0.766439
AUC of PRC = 0.386574
min(+P, Se) = 0.415584

-------------------------------

confusion matrix:
[[166   1]
 [ 16   8]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.09969700127840042
difference in average predicted and observed risk = -0.025956998721599567
number samples = 191
accuracy = 0.910995
precision class 0 = 0.912088
precision class 1 = 0.888889
recall class 0 = 0.994012
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.005988
positive prediction rate = 0.04712
AUC of ROC = 0.87999
AUC of PRC = 0.694225
min(+P, Se) = 0.64

-------------------------------

confusion matrix:
[[2467    7]
 [ 238   17]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08341299742460251
difference in average predicted and observed risk = -0.010028002575397488
number samples = 2729
accuracy = 0.910224
precision class 0 = 0.912015
precision class 1 = 0.708333
recall class 0 = 0.997171
recall class 1 = 0.066667
false negative rate = 0.933333
false positive rate = 0.002829
positive prediction rate = 0.008794
AUC of ROC = 0.768425
AUC of PRC = 0.336847
min(+P, Se) = 0.360784

-------------------------------

confusion matrix:
[[1676    7]
 [ 186   30]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.09596599638462067
difference in average predicted and observed risk = -0.01777800361537933
number samples = 1899
accuracy = 0.898368
precision class 0 = 0.900107
precision class 1 = 0.810811
recall class 0 = 0.995841
recall class 1 = 0.138889
false negative rate = 0.861111
false positive rate = 0.004159
positive prediction rate = 0.019484
AUC of ROC = 0.794255
AUC of PRC = 0.433682
min(+P, Se) = 0.430556

-------------------------------

confusion matrix:
[[547   2]
 [ 75   2]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.09772200137376785
difference in average predicted and observed risk = -0.02528099862623215
number samples = 626
accuracy = 0.876997
precision class 0 = 0.879421
precision class 1 = 0.5
recall class 0 = 0.996357
recall class 1 = 0.025974
false negative rate = 0.974026
false positive rate = 0.003643
positive prediction rate = 0.00639
AUC of ROC = 0.759326
AUC of PRC = 0.356525
min(+P, Se) = 0.402439

-------------------------------

confusion matrix:
[[2249    0]
 [ 197   11]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07634100317955017
difference in average predicted and observed risk = -0.008314996820449824
number samples = 2457
accuracy = 0.919821
precision class 0 = 0.91946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052885
false negative rate = 0.947115
false positive rate = 0.0
positive prediction rate = 0.004477
AUC of ROC = 0.763423
AUC of PRC = 0.320447
min(+P, Se) = 0.321101

-------------------------------

confusion matrix:
[[221   2]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.09059300273656845
difference in average predicted and observed risk = -0.010212997263431556
number samples = 248
accuracy = 0.891129
precision class 0 = 0.898374
precision class 1 = 0.0
recall class 0 = 0.991031
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.008969
positive prediction rate = 0.008065
AUC of ROC = 0.718386
AUC of PRC = 0.215549
min(+P, Se) = 0.323529

-------------------------------

confusion matrix:
[[477   4]
 [ 58  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.11835800111293793
difference in average predicted and observed risk = -0.027289998887062072
number samples = 563
accuracy = 0.889876
precision class 0 = 0.891589
precision class 1 = 0.857143
recall class 0 = 0.991684
recall class 1 = 0.292683
false negative rate = 0.707317
false positive rate = 0.008316
positive prediction rate = 0.049734
AUC of ROC = 0.819811
AUC of PRC = 0.572194
min(+P, Se) = 0.53012

-------------------------------

confusion matrix:
[[649   6]
 [ 69  10]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.098130002617836
difference in average predicted and observed risk = -0.009498997382164004
number samples = 734
accuracy = 0.89782
precision class 0 = 0.9039
precision class 1 = 0.625
recall class 0 = 0.99084
recall class 1 = 0.126582
false negative rate = 0.873418
false positive rate = 0.00916
positive prediction rate = 0.021798
AUC of ROC = 0.800483
AUC of PRC = 0.416368
min(+P, Se) = 0.43038

-------------------------------

confusion matrix:
[[4143   14]
 [ 424   47]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08856400102376938
difference in average predicted and observed risk = -0.013207998976230623
number samples = 4628
accuracy = 0.905359
precision class 0 = 0.90716
precision class 1 = 0.770492
recall class 0 = 0.996632
recall class 1 = 0.099788
false negative rate = 0.900212
false positive rate = 0.003368
positive prediction rate = 0.013181
AUC of ROC = 0.779545
AUC of PRC = 0.383372
min(+P, Se) = 0.394068

-------------------------------

==>predicting on validation



confusion matrix:
[[217   1]
 [ 18   1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08367100358009338
difference in average predicted and observed risk = 0.0035020035800933796
number samples = 237
accuracy = 0.919831
precision class 0 = 0.923404
precision class 1 = 0.5
recall class 0 = 0.995413
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.004587
positive prediction rate = 0.008439
AUC of ROC = 0.821825
AUC of PRC = 0.341355
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[385   0]
 [ 45   2]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.08726400136947632
difference in average predicted and observed risk = -0.021531998630523685
number samples = 432
accuracy = 0.895833
precision class 0 = 0.895349
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.042553
false negative rate = 0.957447
false positive rate = 0.0
positive prediction rate = 0.00463
AUC of ROC = 0.771926
AUC of PRC = 0.417391
min(+P, Se) = 0.44

-------------------------------

confusion matrix:
[[105   0]
 [ 11   2]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10758599638938904
difference in average predicted and observed risk = -0.002583003610610965
number samples = 118
accuracy = 0.90678
precision class 0 = 0.905172
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.153846
false negative rate = 0.846154
false positive rate = 0.0
positive prediction rate = 0.016949
AUC of ROC = 0.903297
AUC of PRC = 0.664044
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11470799893140793
difference in average predicted and observed risk = -0.01862500106859208
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[299   1]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.09778200089931488
difference in average predicted and observed risk = -0.017261999100685113
number samples = 339
accuracy = 0.884956
precision class 0 = 0.88724
precision class 1 = 0.5
recall class 0 = 0.996667
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.003333
positive prediction rate = 0.0059
AUC of ROC = 0.764701
AUC of PRC = 0.357407
min(+P, Se) = 0.452381

-------------------------------

confusion matrix:
[[434   0]
 [ 38   6]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08476199954748154
difference in average predicted and observed risk = -0.00728800045251847
number samples = 478
accuracy = 0.920502
precision class 0 = 0.919492
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.136364
false negative rate = 0.863636
false positive rate = 0.0
positive prediction rate = 0.012552
AUC of ROC = 0.854472
AUC of PRC = 0.564162
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 37   1]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.0773560032248497
difference in average predicted and observed risk = -0.011845996775150303
number samples = 426
accuracy = 0.913146
precision class 0 = 0.912941
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.026316
false negative rate = 0.973684
false positive rate = 0.0
positive prediction rate = 0.002347
AUC of ROC = 0.826031
AUC of PRC = 0.448187
min(+P, Se) = 0.447368

-------------------------------

confusion matrix:
[[90  0]
 [ 9  3]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.11296699941158295
difference in average predicted and observed risk = -0.004680000588417055
number samples = 102
accuracy = 0.911765
precision class 0 = 0.909091
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.029412
AUC of ROC = 0.92963
AUC of PRC = 0.715885
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.09234199672937393
difference in average predicted and observed risk = 0.0036319967293739347
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.760257
AUC of PRC = 0.228427
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[107   1]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10407400131225586
difference in average predicted and observed risk = -0.04553199868774413
number samples = 127
accuracy = 0.866142
precision class 0 = 0.869919
precision class 1 = 0.75
recall class 0 = 0.990741
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009259
positive prediction rate = 0.031496
AUC of ROC = 0.769006
AUC of PRC = 0.529514
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.1189500018954277
difference in average predicted and observed risk = 0.0400030018954277
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.92381
AUC of PRC = 0.549206
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[733   1]
 [ 76   7]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09016499668359756
difference in average predicted and observed risk = -0.011426003316402436
number samples = 817
accuracy = 0.905753
precision class 0 = 0.906057
precision class 1 = 0.875
recall class 0 = 0.998638
recall class 1 = 0.084337
false negative rate = 0.915663
false positive rate = 0.001362
positive prediction rate = 0.009792
AUC of ROC = 0.817094
AUC of PRC = 0.468997
min(+P, Se) = 0.506024

-------------------------------

Epoch 00012: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch12.state
Epoch 13/100
 - 299s - loss: 0.2858 - val_loss: 0.2599

==>predicting on train



confusion matrix:
[[2129   26]
 [ 201   54]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.11592700332403183
difference in average predicted and observed risk = 0.01011800332403183
number samples = 2410
accuracy = 0.905809
precision class 0 = 0.913734
precision class 1 = 0.675
recall class 0 = 0.987935
recall class 1 = 0.211765
false negative rate = 0.788235
false positive rate = 0.012065
positive prediction rate = 0.033195
AUC of ROC = 0.781653
AUC of PRC = 0.386981
min(+P, Se) = 0.389105

-------------------------------

confusion matrix:
[[1158   21]
 [  94   24]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.10901600122451782
difference in average predicted and observed risk = 0.018037001224517818
number samples = 1297
accuracy = 0.911334
precision class 0 = 0.92492
precision class 1 = 0.533333
recall class 0 = 0.982188
recall class 1 = 0.20339
false negative rate = 0.79661
false positive rate = 0.017812
positive prediction rate = 0.034695
AUC of ROC = 0.78843
AUC of PRC = 0.317928
min(+P, Se) = 0.355932

-------------------------------

confusion matrix:
[[639  17]
 [ 59  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.12101499736309052
difference in average predicted and observed risk = 0.019644997363090513
number samples = 730
accuracy = 0.89589
precision class 0 = 0.915473
precision class 1 = 0.46875
recall class 0 = 0.974085
recall class 1 = 0.202703
false negative rate = 0.797297
false positive rate = 0.025915
positive prediction rate = 0.043836
AUC of ROC = 0.774823
AUC of PRC = 0.387713
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[165   2]
 [ 13  11]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.12926100194454193
difference in average predicted and observed risk = 0.0036070019445419432
number samples = 191
accuracy = 0.921466
precision class 0 = 0.926966
precision class 1 = 0.846154
recall class 0 = 0.988024
recall class 1 = 0.458333
false negative rate = 0.541667
false positive rate = 0.011976
positive prediction rate = 0.068063
AUC of ROC = 0.901447
AUC of PRC = 0.707777
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2437   37]
 [ 200   55]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.11015100032091141
difference in average predicted and observed risk = 0.01671000032091141
number samples = 2729
accuracy = 0.913155
precision class 0 = 0.924156
precision class 1 = 0.597826
recall class 0 = 0.985044
recall class 1 = 0.215686
false negative rate = 0.784314
false positive rate = 0.014956
positive prediction rate = 0.033712
AUC of ROC = 0.785052
AUC of PRC = 0.360148
min(+P, Se) = 0.368627

-------------------------------

confusion matrix:
[[1654   29]
 [ 167   49]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.12280400097370148
difference in average predicted and observed risk = 0.00906000097370148
number samples = 1899
accuracy = 0.896788
precision class 0 = 0.908292
precision class 1 = 0.628205
recall class 0 = 0.982769
recall class 1 = 0.226852
false negative rate = 0.773148
false positive rate = 0.017231
positive prediction rate = 0.041074
AUC of ROC = 0.793413
AUC of PRC = 0.429972
min(+P, Se) = 0.43578

-------------------------------

confusion matrix:
[[538  11]
 [ 62  15]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.1286430060863495
difference in average predicted and observed risk = 0.005640006086349486
number samples = 626
accuracy = 0.883387
precision class 0 = 0.896667
precision class 1 = 0.576923
recall class 0 = 0.979964
recall class 1 = 0.194805
false negative rate = 0.805195
false positive rate = 0.020036
positive prediction rate = 0.041534
AUC of ROC = 0.776761
AUC of PRC = 0.375743
min(+P, Se) = 0.402597

-------------------------------

confusion matrix:
[[2229   20]
 [ 176   32]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.09933699667453766
difference in average predicted and observed risk = 0.014680996674537664
number samples = 2457
accuracy = 0.920228
precision class 0 = 0.926819
precision class 1 = 0.615385
recall class 0 = 0.991107
recall class 1 = 0.153846
false negative rate = 0.846154
false positive rate = 0.008893
positive prediction rate = 0.021164
AUC of ROC = 0.772929
AUC of PRC = 0.326324
min(+P, Se) = 0.322275

-------------------------------

confusion matrix:
[[217   6]
 [ 22   3]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.11647500097751617
difference in average predicted and observed risk = 0.015669000977516168
number samples = 248
accuracy = 0.887097
precision class 0 = 0.90795
precision class 1 = 0.333333
recall class 0 = 0.973094
recall class 1 = 0.12
false negative rate = 0.88
false positive rate = 0.026906
positive prediction rate = 0.03629
AUC of ROC = 0.746906
AUC of PRC = 0.222993
min(+P, Se) = 0.294118

-------------------------------

confusion matrix:
[[469  12]
 [ 48  34]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.1533849984407425
difference in average predicted and observed risk = 0.007736998440742493
number samples = 563
accuracy = 0.893428
precision class 0 = 0.907157
precision class 1 = 0.73913
recall class 0 = 0.975052
recall class 1 = 0.414634
false negative rate = 0.585366
false positive rate = 0.024948
positive prediction rate = 0.081705
AUC of ROC = 0.826682
AUC of PRC = 0.571301
min(+P, Se) = 0.52439

-------------------------------

confusion matrix:
[[638  17]
 [ 59  20]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.12801800668239594
difference in average predicted and observed risk = 0.020389006682395933
number samples = 734
accuracy = 0.896458
precision class 0 = 0.915352
precision class 1 = 0.540541
recall class 0 = 0.974046
recall class 1 = 0.253165
false negative rate = 0.746835
false positive rate = 0.025954
positive prediction rate = 0.050409
AUC of ROC = 0.808233
AUC of PRC = 0.430989
min(+P, Se) = 0.443038

-------------------------------

confusion matrix:
[[4091   66]
 [ 367  104]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.11534299701452255
difference in average predicted and observed risk = 0.013570997014522551
number samples = 4628
accuracy = 0.906439
precision class 0 = 0.917676
precision class 1 = 0.611765
recall class 0 = 0.984123
recall class 1 = 0.220807
false negative rate = 0.779193
false positive rate = 0.015877
positive prediction rate = 0.036733
AUC of ROC = 0.789215
AUC of PRC = 0.393496
min(+P, Se) = 0.397089

-------------------------------

==>predicting on validation



confusion matrix:
[[214   4]
 [ 14   5]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.10515300184488297
difference in average predicted and observed risk = 0.02498400184488296
number samples = 237
accuracy = 0.924051
precision class 0 = 0.938596
precision class 1 = 0.555556
recall class 0 = 0.981651
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.018349
positive prediction rate = 0.037975
AUC of ROC = 0.792854
AUC of PRC = 0.39439
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[384   1]
 [ 41   6]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.12012799829244614
difference in average predicted and observed risk = 0.011331998292446133
number samples = 432
accuracy = 0.902778
precision class 0 = 0.903529
precision class 1 = 0.857143
recall class 0 = 0.997403
recall class 1 = 0.12766
false negative rate = 0.87234
false positive rate = 0.002597
positive prediction rate = 0.016204
AUC of ROC = 0.774081
AUC of PRC = 0.423569
min(+P, Se) = 0.425532

-------------------------------

confusion matrix:
[[104   1]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.14226000010967255
difference in average predicted and observed risk = 0.03209100010967254
number samples = 118
accuracy = 0.923729
precision class 0 = 0.928571
precision class 1 = 0.833333
recall class 0 = 0.990476
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.009524
positive prediction rate = 0.050847
AUC of ROC = 0.908425
AUC of PRC = 0.703134
min(+P, Se) = 0.647059

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.1498119980096817
difference in average predicted and observed risk = 0.016478998009681695
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[295   5]
 [ 34   5]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.12976500391960144
difference in average predicted and observed risk = 0.014721003919601447
number samples = 339
accuracy = 0.884956
precision class 0 = 0.896657
precision class 1 = 0.5
recall class 0 = 0.983333
recall class 1 = 0.128205
false negative rate = 0.871795
false positive rate = 0.016667
positive prediction rate = 0.029499
AUC of ROC = 0.756923
AUC of PRC = 0.35079
min(+P, Se) = 0.44186

-------------------------------

confusion matrix:
[[433   1]
 [ 31  13]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.11319500207901001
difference in average predicted and observed risk = 0.021145002079010003
number samples = 478
accuracy = 0.933054
precision class 0 = 0.93319
precision class 1 = 0.928571
recall class 0 = 0.997696
recall class 1 = 0.295455
false negative rate = 0.704545
false positive rate = 0.002304
positive prediction rate = 0.029289
AUC of ROC = 0.851749
AUC of PRC = 0.582201
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[387   1]
 [ 32   6]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.10278300195932388
difference in average predicted and observed risk = 0.01358100195932388
number samples = 426
accuracy = 0.922535
precision class 0 = 0.923628
precision class 1 = 0.857143
recall class 0 = 0.997423
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.002577
positive prediction rate = 0.016432
AUC of ROC = 0.821419
AUC of PRC = 0.44524
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[89  1]
 [ 7  5]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.1488949954509735
difference in average predicted and observed risk = 0.03124799545097351
number samples = 102
accuracy = 0.921569
precision class 0 = 0.927083
precision class 1 = 0.833333
recall class 0 = 0.988889
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.011111
positive prediction rate = 0.058824
AUC of ROC = 0.917593
AUC of PRC = 0.694572
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.12499699741601944
difference in average predicted and observed risk = 0.03628699741601944
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.749799
AUC of PRC = 0.23667
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[106   2]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.1363150030374527
difference in average predicted and observed risk = -0.013290996962547291
number samples = 127
accuracy = 0.88189
precision class 0 = 0.890756
precision class 1 = 0.75
recall class 0 = 0.981481
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.018519
positive prediction rate = 0.062992
AUC of ROC = 0.76462
AUC of PRC = 0.590019
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[34  1]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.1661369949579239
difference in average predicted and observed risk = 0.08718999495792389
number samples = 38
accuracy = 0.921053
precision class 0 = 0.944444
precision class 1 = 0.5
recall class 0 = 0.971429
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.028571
positive prediction rate = 0.052632
AUC of ROC = 0.92381
AUC of PRC = 0.551786
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[728   6]
 [ 65  18]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.12007000297307968
difference in average predicted and observed risk = 0.01847900297307968
number samples = 817
accuracy = 0.913097
precision class 0 = 0.918033
precision class 1 = 0.75
recall class 0 = 0.991826
recall class 1 = 0.216867
false negative rate = 0.783133
false positive rate = 0.008174
positive prediction rate = 0.029376
AUC of ROC = 0.812137
AUC of PRC = 0.487379
min(+P, Se) = 0.5

-------------------------------

Epoch 00013: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch13.state
Epoch 14/100
 - 296s - loss: 0.2867 - val_loss: 0.2610

==>predicting on train



confusion matrix:
[[2144   11]
 [ 218   37]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.09363800287246704
difference in average predicted and observed risk = -0.01217099712753296
number samples = 2410
accuracy = 0.904979
precision class 0 = 0.907705
precision class 1 = 0.770833
recall class 0 = 0.994896
recall class 1 = 0.145098
false negative rate = 0.854902
false positive rate = 0.005104
positive prediction rate = 0.019917
AUC of ROC = 0.759611
AUC of PRC = 0.378533
min(+P, Se) = 0.402344

-------------------------------

confusion matrix:
[[1171    8]
 [ 109    9]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08880999684333801
difference in average predicted and observed risk = -0.0021690031566619916
number samples = 1297
accuracy = 0.909792
precision class 0 = 0.914844
precision class 1 = 0.529412
recall class 0 = 0.993215
recall class 1 = 0.076271
false negative rate = 0.923729
false positive rate = 0.006785
positive prediction rate = 0.013107
AUC of ROC = 0.784488
AUC of PRC = 0.31088
min(+P, Se) = 0.358333

-------------------------------

confusion matrix:
[[652   4]
 [ 66   8]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09556400030851364
difference in average predicted and observed risk = -0.00580599969148636
number samples = 730
accuracy = 0.90411
precision class 0 = 0.908078
precision class 1 = 0.666667
recall class 0 = 0.993902
recall class 1 = 0.108108
false negative rate = 0.891892
false positive rate = 0.006098
positive prediction rate = 0.016438
AUC of ROC = 0.76065
AUC of PRC = 0.382814
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[166   1]
 [ 14  10]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.1067190021276474
difference in average predicted and observed risk = -0.018934997872352588
number samples = 191
accuracy = 0.921466
precision class 0 = 0.922222
precision class 1 = 0.909091
recall class 0 = 0.994012
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.005988
positive prediction rate = 0.057592
AUC of ROC = 0.846307
AUC of PRC = 0.681715
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2460   14]
 [ 229   26]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08873900026082993
difference in average predicted and observed risk = -0.004701999739170071
number samples = 2729
accuracy = 0.910956
precision class 0 = 0.914838
precision class 1 = 0.65
recall class 0 = 0.994341
recall class 1 = 0.101961
false negative rate = 0.898039
false positive rate = 0.005659
positive prediction rate = 0.014657
AUC of ROC = 0.758262
AUC of PRC = 0.344242
min(+P, Se) = 0.361538

-------------------------------

confusion matrix:
[[1673   10]
 [ 178   38]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.09943699836730957
difference in average predicted and observed risk = -0.014307001632690428
number samples = 1899
accuracy = 0.901
precision class 0 = 0.903836
precision class 1 = 0.791667
recall class 0 = 0.994058
recall class 1 = 0.175926
false negative rate = 0.824074
false positive rate = 0.005942
positive prediction rate = 0.025276
AUC of ROC = 0.78874
AUC of PRC = 0.429353
min(+P, Se) = 0.43318

-------------------------------

confusion matrix:
[[547   2]
 [ 72   5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.10731799900531769
difference in average predicted and observed risk = -0.015685000994682313
number samples = 626
accuracy = 0.881789
precision class 0 = 0.883683
precision class 1 = 0.714286
recall class 0 = 0.996357
recall class 1 = 0.064935
false negative rate = 0.935065
false positive rate = 0.003643
positive prediction rate = 0.011182
AUC of ROC = 0.75301
AUC of PRC = 0.364588
min(+P, Se) = 0.404762

-------------------------------

confusion matrix:
[[2247    2]
 [ 192   16]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08045600354671478
difference in average predicted and observed risk = -0.004199996453285212
number samples = 2457
accuracy = 0.921042
precision class 0 = 0.921279
precision class 1 = 0.888889
recall class 0 = 0.999111
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.000889
positive prediction rate = 0.007326
AUC of ROC = 0.755402
AUC of PRC = 0.324098
min(+P, Se) = 0.331731

-------------------------------

confusion matrix:
[[218   5]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.0954819992184639
difference in average predicted and observed risk = -0.005324000781536109
number samples = 248
accuracy = 0.879032
precision class 0 = 0.897119
precision class 1 = 0.0
recall class 0 = 0.977578
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.022422
positive prediction rate = 0.020161
AUC of ROC = 0.702601
AUC of PRC = 0.205924
min(+P, Se) = 0.28125

-------------------------------

confusion matrix:
[[474   7]
 [ 54  28]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12572899460792542
difference in average predicted and observed risk = -0.019919005392074585
number samples = 563
accuracy = 0.891652
precision class 0 = 0.897727
precision class 1 = 0.8
recall class 0 = 0.985447
recall class 1 = 0.341463
false negative rate = 0.658537
false positive rate = 0.014553
positive prediction rate = 0.062167
AUC of ROC = 0.809999
AUC of PRC = 0.568761
min(+P, Se) = 0.536585

-------------------------------

confusion matrix:
[[647   8]
 [ 64  15]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09764699637889862
difference in average predicted and observed risk = -0.009982003621101382
number samples = 734
accuracy = 0.901907
precision class 0 = 0.909986
precision class 1 = 0.652174
recall class 0 = 0.987786
recall class 1 = 0.189873
false negative rate = 0.810127
false positive rate = 0.012214
positive prediction rate = 0.031335
AUC of ROC = 0.794937
AUC of PRC = 0.415749
min(+P, Se) = 0.43038

-------------------------------

confusion matrix:
[[4133   24]
 [ 407   64]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.093129001557827
difference in average predicted and observed risk = -0.008642998442173006
number samples = 4628
accuracy = 0.906871
precision class 0 = 0.910352
precision class 1 = 0.727273
recall class 0 = 0.994227
recall class 1 = 0.135881
false negative rate = 0.864119
false positive rate = 0.005773
positive prediction rate = 0.019015
AUC of ROC = 0.772217
AUC of PRC = 0.385018
min(+P, Se) = 0.401274

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 18   1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08694099634885788
difference in average predicted and observed risk = 0.0067719963488578755
number samples = 237
accuracy = 0.915612
precision class 0 = 0.923077
precision class 1 = 0.333333
recall class 0 = 0.990826
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.009174
positive prediction rate = 0.012658
AUC of ROC = 0.824481
AUC of PRC = 0.374528
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[385   0]
 [ 42   5]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.09348399937152863
difference in average predicted and observed risk = -0.015312000628471378
number samples = 432
accuracy = 0.902778
precision class 0 = 0.901639
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.106383
false negative rate = 0.893617
false positive rate = 0.0
positive prediction rate = 0.011574
AUC of ROC = 0.761702
AUC of PRC = 0.41528
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[105   0]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10952699929475784
difference in average predicted and observed risk = -0.00064200070524216
number samples = 118
accuracy = 0.932203
precision class 0 = 0.929204
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.0
positive prediction rate = 0.042373
AUC of ROC = 0.904762
AUC of PRC = 0.705882
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.12144900113344193
difference in average predicted and observed risk = -0.011883998866558082
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[299   1]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.10309799760580063
difference in average predicted and observed risk = -0.011946002394199365
number samples = 339
accuracy = 0.890855
precision class 0 = 0.892537
precision class 1 = 0.75
recall class 0 = 0.996667
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.003333
positive prediction rate = 0.011799
AUC of ROC = 0.763162
AUC of PRC = 0.361515
min(+P, Se) = 0.425532

-------------------------------

confusion matrix:
[[433   1]
 [ 34  10]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.089137002825737
difference in average predicted and observed risk = -0.0029129971742630073
number samples = 478
accuracy = 0.926778
precision class 0 = 0.927195
precision class 1 = 0.909091
recall class 0 = 0.997696
recall class 1 = 0.227273
false negative rate = 0.772727
false positive rate = 0.002304
positive prediction rate = 0.023013
AUC of ROC = 0.843056
AUC of PRC = 0.564297
min(+P, Se) = 0.533333

-------------------------------

confusion matrix:
[[388   0]
 [ 35   3]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.0814019963145256
difference in average predicted and observed risk = -0.007800003685474399
number samples = 426
accuracy = 0.91784
precision class 0 = 0.917258
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.078947
false negative rate = 0.921053
false positive rate = 0.0
positive prediction rate = 0.007042
AUC of ROC = 0.819452
AUC of PRC = 0.438855
min(+P, Se) = 0.414634

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.11615700274705887
difference in average predicted and observed risk = -0.0014899972529411332
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.931481
AUC of PRC = 0.706281
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.10219299793243408
difference in average predicted and observed risk = 0.013482997932434085
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.761866
AUC of PRC = 0.247699
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[107   1]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10510800033807755
difference in average predicted and observed risk = -0.044497999661922444
number samples = 127
accuracy = 0.889764
precision class 0 = 0.891667
precision class 1 = 0.857143
recall class 0 = 0.990741
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.009259
positive prediction rate = 0.055118
AUC of ROC = 0.77924
AUC of PRC = 0.603564
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.13189299404621124
difference in average predicted and observed risk = 0.05294599404621124
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.92381
AUC of PRC = 0.551786
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[732   2]
 [ 70  13]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.094930000603199
difference in average predicted and observed risk = -0.006660999396800996
number samples = 817
accuracy = 0.911873
precision class 0 = 0.912718
precision class 1 = 0.866667
recall class 0 = 0.997275
recall class 1 = 0.156627
false negative rate = 0.843373
false positive rate = 0.002725
positive prediction rate = 0.01836
AUC of ROC = 0.811103
AUC of PRC = 0.480454
min(+P, Se) = 0.481928

-------------------------------

Epoch 00014: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch14.state
Epoch 15/100
 - 298s - loss: 0.2879 - val_loss: 0.2589

==>predicting on train



confusion matrix:
[[2144   11]
 [ 224   31]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.0930280014872551
difference in average predicted and observed risk = -0.012780998512744904
number samples = 2410
accuracy = 0.90249
precision class 0 = 0.905405
precision class 1 = 0.738095
recall class 0 = 0.994896
recall class 1 = 0.121569
false negative rate = 0.878431
false positive rate = 0.005104
positive prediction rate = 0.017427
AUC of ROC = 0.776221
AUC of PRC = 0.387184
min(+P, Se) = 0.39313

-------------------------------

confusion matrix:
[[1174    5]
 [ 109    9]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08638100326061249
difference in average predicted and observed risk = -0.0045979967393875165
number samples = 1297
accuracy = 0.912105
precision class 0 = 0.915043
precision class 1 = 0.642857
recall class 0 = 0.995759
recall class 1 = 0.076271
false negative rate = 0.923729
false positive rate = 0.004241
positive prediction rate = 0.010794
AUC of ROC = 0.799025
AUC of PRC = 0.329981
min(+P, Se) = 0.373016

-------------------------------

confusion matrix:
[[653   3]
 [ 67   7]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09474299848079681
difference in average predicted and observed risk = -0.006627001519203188
number samples = 730
accuracy = 0.90411
precision class 0 = 0.906944
precision class 1 = 0.7
recall class 0 = 0.995427
recall class 1 = 0.094595
false negative rate = 0.905405
false positive rate = 0.004573
positive prediction rate = 0.013699
AUC of ROC = 0.772886
AUC of PRC = 0.366069
min(+P, Se) = 0.418919

-------------------------------

confusion matrix:
[[166   1]
 [ 15   9]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.10782299935817719
difference in average predicted and observed risk = -0.017831000641822803
number samples = 191
accuracy = 0.91623
precision class 0 = 0.917127
precision class 1 = 0.9
recall class 0 = 0.994012
recall class 1 = 0.375
false negative rate = 0.625
false positive rate = 0.005988
positive prediction rate = 0.052356
AUC of ROC = 0.866018
AUC of PRC = 0.701207
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[2464   10]
 [ 235   20]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.087288998067379
difference in average predicted and observed risk = -0.0061520019326209985
number samples = 2729
accuracy = 0.910224
precision class 0 = 0.912931
precision class 1 = 0.666667
recall class 0 = 0.995958
recall class 1 = 0.078431
false negative rate = 0.921569
false positive rate = 0.004042
positive prediction rate = 0.010993
AUC of ROC = 0.775797
AUC of PRC = 0.35712
min(+P, Se) = 0.368627

-------------------------------

confusion matrix:
[[1673   10]
 [ 180   36]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.0988830029964447
difference in average predicted and observed risk = -0.014860997003555296
number samples = 1899
accuracy = 0.899947
precision class 0 = 0.90286
precision class 1 = 0.782609
recall class 0 = 0.994058
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.005942
positive prediction rate = 0.024223
AUC of ROC = 0.799556
AUC of PRC = 0.436883
min(+P, Se) = 0.445415

-------------------------------

confusion matrix:
[[547   2]
 [ 73   4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.10762400180101395
difference in average predicted and observed risk = -0.015378998198986055
number samples = 626
accuracy = 0.880192
precision class 0 = 0.882258
precision class 1 = 0.666667
recall class 0 = 0.996357
recall class 1 = 0.051948
false negative rate = 0.948052
false positive rate = 0.003643
positive prediction rate = 0.009585
AUC of ROC = 0.778819
AUC of PRC = 0.366104
min(+P, Se) = 0.409091

-------------------------------

confusion matrix:
[[2246    3]
 [ 194   14]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07964000105857849
difference in average predicted and observed risk = -0.005015998941421504
number samples = 2457
accuracy = 0.919821
precision class 0 = 0.920492
precision class 1 = 0.823529
recall class 0 = 0.998666
recall class 1 = 0.067308
false negative rate = 0.932692
false positive rate = 0.001334
positive prediction rate = 0.006919
AUC of ROC = 0.768145
AUC of PRC = 0.325919
min(+P, Se) = 0.330275

-------------------------------

confusion matrix:
[[218   5]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.09487500041723251
difference in average predicted and observed risk = -0.005930999582767493
number samples = 248
accuracy = 0.879032
precision class 0 = 0.897119
precision class 1 = 0.0
recall class 0 = 0.977578
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.022422
positive prediction rate = 0.020161
AUC of ROC = 0.728789
AUC of PRC = 0.214528
min(+P, Se) = 0.285714

-------------------------------

confusion matrix:
[[477   4]
 [ 56  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12131000310182571
difference in average predicted and observed risk = -0.024337996898174286
number samples = 563
accuracy = 0.893428
precision class 0 = 0.894934
precision class 1 = 0.866667
recall class 0 = 0.991684
recall class 1 = 0.317073
false negative rate = 0.682927
false positive rate = 0.008316
positive prediction rate = 0.053286
AUC of ROC = 0.824274
AUC of PRC = 0.579047
min(+P, Se) = 0.54878

-------------------------------

confusion matrix:
[[649   6]
 [ 67  12]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09688500314950943
difference in average predicted and observed risk = -0.010743996850490573
number samples = 734
accuracy = 0.900545
precision class 0 = 0.906425
precision class 1 = 0.666667
recall class 0 = 0.99084
recall class 1 = 0.151899
false negative rate = 0.848101
false positive rate = 0.00916
positive prediction rate = 0.024523
AUC of ROC = 0.80887
AUC of PRC = 0.424679
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[4137   20]
 [ 415   56]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09204600006341934
difference in average predicted and observed risk = -0.00972599993658066
number samples = 4628
accuracy = 0.906007
precision class 0 = 0.908831
precision class 1 = 0.736842
recall class 0 = 0.995189
recall class 1 = 0.118896
false negative rate = 0.881104
false positive rate = 0.004811
positive prediction rate = 0.016422
AUC of ROC = 0.78704
AUC of PRC = 0.394293
min(+P, Se) = 0.41189

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 18   1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08508899807929993
difference in average predicted and observed risk = 0.004919998079299923
number samples = 237
accuracy = 0.915612
precision class 0 = 0.923077
precision class 1 = 0.333333
recall class 0 = 0.990826
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.009174
positive prediction rate = 0.012658
AUC of ROC = 0.852728
AUC of PRC = 0.340679
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[385   0]
 [ 43   4]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.09171299636363983
difference in average predicted and observed risk = -0.017083003636360172
number samples = 432
accuracy = 0.900463
precision class 0 = 0.899533
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.085106
false negative rate = 0.914894
false positive rate = 0.0
positive prediction rate = 0.009259
AUC of ROC = 0.776844
AUC of PRC = 0.432187
min(+P, Se) = 0.42

-------------------------------

confusion matrix:
[[105   0]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.1078609973192215
difference in average predicted and observed risk = -0.0023080026807785065
number samples = 118
accuracy = 0.915254
precision class 0 = 0.913043
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.0
positive prediction rate = 0.025424
AUC of ROC = 0.898901
AUC of PRC = 0.704941
min(+P, Se) = 0.647059

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.12574100494384766
difference in average predicted and observed risk = -0.007591995056152351
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[299   1]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.10072600096464157
difference in average predicted and observed risk = -0.014317999035358422
number samples = 339
accuracy = 0.890855
precision class 0 = 0.892537
precision class 1 = 0.75
recall class 0 = 0.996667
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.003333
positive prediction rate = 0.011799
AUC of ROC = 0.776667
AUC of PRC = 0.372073
min(+P, Se) = 0.435897

-------------------------------

confusion matrix:
[[433   1]
 [ 37   7]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.0881590023636818
difference in average predicted and observed risk = -0.0038909976363182136
number samples = 478
accuracy = 0.920502
precision class 0 = 0.921277
precision class 1 = 0.875
recall class 0 = 0.997696
recall class 1 = 0.159091
false negative rate = 0.840909
false positive rate = 0.002304
positive prediction rate = 0.016736
AUC of ROC = 0.85641
AUC of PRC = 0.575718
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 36   2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08015699684619904
difference in average predicted and observed risk = -0.009045003153800968
number samples = 426
accuracy = 0.915493
precision class 0 = 0.915094
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004695
AUC of ROC = 0.838239
AUC of PRC = 0.460978
min(+P, Se) = 0.404762

-------------------------------

confusion matrix:
[[90  0]
 [ 9  3]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.1104699969291687
difference in average predicted and observed risk = -0.0071770030708313
number samples = 102
accuracy = 0.911765
precision class 0 = 0.909091
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.029412
AUC of ROC = 0.923148
AUC of PRC = 0.719541
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.10282900184392929
difference in average predicted and observed risk = 0.014119001843929294
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.765889
AUC of PRC = 0.26781
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[107   1]
 [ 14   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10485299676656723
difference in average predicted and observed risk = -0.04475300323343276
number samples = 127
accuracy = 0.88189
precision class 0 = 0.884298
precision class 1 = 0.833333
recall class 0 = 0.990741
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.009259
positive prediction rate = 0.047244
AUC of ROC = 0.785575
AUC of PRC = 0.582355
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.12641599774360657
difference in average predicted and observed risk = 0.047468997743606564
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.904762
AUC of PRC = 0.518849
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[732   2]
 [ 73  10]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09337300062179565
difference in average predicted and observed risk = -0.008217999378204346
number samples = 817
accuracy = 0.908201
precision class 0 = 0.909317
precision class 1 = 0.833333
recall class 0 = 0.997275
recall class 1 = 0.120482
false negative rate = 0.879518
false positive rate = 0.002725
positive prediction rate = 0.014688
AUC of ROC = 0.823972
AUC of PRC = 0.484913
min(+P, Se) = 0.483146

-------------------------------

Epoch 00015: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch15.state
Epoch 16/100
 - 299s - loss: 0.2812 - val_loss: 0.2639

==>predicting on train



confusion matrix:
[[2152    3]
 [ 241   14]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.09956400096416473
difference in average predicted and observed risk = -0.006244999035835266
number samples = 2410
accuracy = 0.898755
precision class 0 = 0.89929
precision class 1 = 0.823529
recall class 0 = 0.998608
recall class 1 = 0.054902
false negative rate = 0.945098
false positive rate = 0.001392
positive prediction rate = 0.007054
AUC of ROC = 0.789041
AUC of PRC = 0.397683
min(+P, Se) = 0.390625

-------------------------------

confusion matrix:
[[1177    2]
 [ 116    2]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.09386400133371353
difference in average predicted and observed risk = 0.002885001333713527
number samples = 1297
accuracy = 0.909021
precision class 0 = 0.910286
precision class 1 = 0.5
recall class 0 = 0.998304
recall class 1 = 0.016949
false negative rate = 0.983051
false positive rate = 0.001696
positive prediction rate = 0.003084
AUC of ROC = 0.797854
AUC of PRC = 0.327832
min(+P, Se) = 0.368

-------------------------------

confusion matrix:
[[655   1]
 [ 71   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.10157100111246109
difference in average predicted and observed risk = 0.00020100111246108832
number samples = 730
accuracy = 0.90137
precision class 0 = 0.902204
precision class 1 = 0.75
recall class 0 = 0.998476
recall class 1 = 0.040541
false negative rate = 0.959459
false positive rate = 0.001524
positive prediction rate = 0.005479
AUC of ROC = 0.77231
AUC of PRC = 0.374787
min(+P, Se) = 0.407895

-------------------------------

confusion matrix:
[[166   1]
 [ 17   7]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.11242300271987915
difference in average predicted and observed risk = -0.013230997280120838
number samples = 191
accuracy = 0.905759
precision class 0 = 0.907104
precision class 1 = 0.875
recall class 0 = 0.994012
recall class 1 = 0.291667
false negative rate = 0.708333
false positive rate = 0.005988
positive prediction rate = 0.041885
AUC of ROC = 0.880739
AUC of PRC = 0.698206
min(+P, Se) = 0.708333

-------------------------------

confusion matrix:
[[2472    2]
 [ 246    9]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.09415200352668762
difference in average predicted and observed risk = 0.0007110035266876258
number samples = 2729
accuracy = 0.909124
precision class 0 = 0.909492
precision class 1 = 0.818182
recall class 0 = 0.999192
recall class 1 = 0.035294
false negative rate = 0.964706
false positive rate = 0.000808
positive prediction rate = 0.004031
AUC of ROC = 0.785425
AUC of PRC = 0.358269
min(+P, Se) = 0.375969

-------------------------------

confusion matrix:
[[1678    5]
 [ 199   17]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.10551299899816513
difference in average predicted and observed risk = -0.008231001001834867
number samples = 1899
accuracy = 0.892575
precision class 0 = 0.89398
precision class 1 = 0.772727
recall class 0 = 0.997029
recall class 1 = 0.078704
false negative rate = 0.921296
false positive rate = 0.002971
positive prediction rate = 0.011585
AUC of ROC = 0.803864
AUC of PRC = 0.442987
min(+P, Se) = 0.435185

-------------------------------

confusion matrix:
[[548   1]
 [ 77   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.11498399823904037
difference in average predicted and observed risk = -0.008019001760959626
number samples = 626
accuracy = 0.875399
precision class 0 = 0.8768
precision class 1 = 0.0
recall class 0 = 0.998178
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.001821
positive prediction rate = 0.001597
AUC of ROC = 0.789345
AUC of PRC = 0.375046
min(+P, Se) = 0.435897

-------------------------------

confusion matrix:
[[2249    0]
 [ 204    4]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.086837999522686
difference in average predicted and observed risk = 0.0021819995226860095
number samples = 2457
accuracy = 0.916972
precision class 0 = 0.916837
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.019231
false negative rate = 0.980769
false positive rate = 0.0
positive prediction rate = 0.001628
AUC of ROC = 0.775454
AUC of PRC = 0.328041
min(+P, Se) = 0.341232

-------------------------------

confusion matrix:
[[221   2]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.10534700006246567
difference in average predicted and observed risk = 0.004541000062465661
number samples = 248
accuracy = 0.891129
precision class 0 = 0.898374
precision class 1 = 0.0
recall class 0 = 0.991031
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.008969
positive prediction rate = 0.008065
AUC of ROC = 0.763946
AUC of PRC = 0.216584
min(+P, Se) = 0.275862

-------------------------------

confusion matrix:
[[479   2]
 [ 66  16]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12393199652433395
difference in average predicted and observed risk = -0.021716003475666046
number samples = 563
accuracy = 0.879218
precision class 0 = 0.878899
precision class 1 = 0.888889
recall class 0 = 0.995842
recall class 1 = 0.195122
false negative rate = 0.804878
false positive rate = 0.004158
positive prediction rate = 0.031972
AUC of ROC = 0.823057
AUC of PRC = 0.58562
min(+P, Se) = 0.536585

-------------------------------

confusion matrix:
[[653   2]
 [ 73   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.1036359965801239
difference in average predicted and observed risk = -0.003993003419876101
number samples = 734
accuracy = 0.89782
precision class 0 = 0.899449
precision class 1 = 0.75
recall class 0 = 0.996947
recall class 1 = 0.075949
false negative rate = 0.924051
false positive rate = 0.003053
positive prediction rate = 0.010899
AUC of ROC = 0.818823
AUC of PRC = 0.437999
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[4150    7]
 [ 445   26]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09881400316953659
difference in average predicted and observed risk = -0.0029579968304634108
number samples = 4628
accuracy = 0.902334
precision class 0 = 0.903156
precision class 1 = 0.787879
recall class 0 = 0.998316
recall class 1 = 0.055202
false negative rate = 0.944798
false positive rate = 0.001684
positive prediction rate = 0.007131
AUC of ROC = 0.794261
AUC of PRC = 0.396352
min(+P, Se) = 0.400424

-------------------------------

==>predicting on validation



confusion matrix:
[[218   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.09150400012731552
difference in average predicted and observed risk = 0.011335000127315517
number samples = 237
accuracy = 0.919831
precision class 0 = 0.919831
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.875181
AUC of PRC = 0.333495
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[385   0]
 [ 46   1]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.09923800081014633
difference in average predicted and observed risk = -0.009557999189853672
number samples = 432
accuracy = 0.893519
precision class 0 = 0.893271
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.021277
false negative rate = 0.978723
false positive rate = 0.0
positive prediction rate = 0.002315
AUC of ROC = 0.778944
AUC of PRC = 0.45476
min(+P, Se) = 0.415094

-------------------------------

confusion matrix:
[[105   0]
 [ 11   2]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.11282899975776672
difference in average predicted and observed risk = 0.0026599997577667206
number samples = 118
accuracy = 0.90678
precision class 0 = 0.905172
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.153846
false negative rate = 0.846154
false positive rate = 0.0
positive prediction rate = 0.016949
AUC of ROC = 0.899634
AUC of PRC = 0.697118
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.13132500648498535
difference in average predicted and observed risk = -0.0020079935150146555
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[300   0]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.1058880016207695
difference in average predicted and observed risk = -0.009155998379230493
number samples = 339
accuracy = 0.887906
precision class 0 = 0.887574
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.0
positive prediction rate = 0.00295
AUC of ROC = 0.779487
AUC of PRC = 0.352761
min(+P, Se) = 0.395833

-------------------------------

confusion matrix:
[[434   0]
 [ 40   4]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.0960559993982315
difference in average predicted and observed risk = 0.0040059993982314995
number samples = 478
accuracy = 0.916318
precision class 0 = 0.915612
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.0
positive prediction rate = 0.008368
AUC of ROC = 0.865888
AUC of PRC = 0.591356
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[388   0]
 [ 37   1]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08709699660539627
difference in average predicted and observed risk = -0.0021050033946037328
number samples = 426
accuracy = 0.913146
precision class 0 = 0.912941
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.026316
false negative rate = 0.973684
false positive rate = 0.0
positive prediction rate = 0.002347
AUC of ROC = 0.850922
AUC of PRC = 0.497007
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[90  0]
 [11  1]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.11594100296497345
difference in average predicted and observed risk = -0.0017059970350265519
number samples = 102
accuracy = 0.892157
precision class 0 = 0.891089
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.009804
AUC of ROC = 0.911111
AUC of PRC = 0.715296
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.11181700229644775
difference in average predicted and observed risk = 0.023107002296447757
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.779566
AUC of PRC = 0.248578
min(+P, Se) = 0.384615

-------------------------------

confusion matrix:
[[108   0]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.1120389997959137
difference in average predicted and observed risk = -0.03756700020408629
number samples = 127
accuracy = 0.874016
precision class 0 = 0.870968
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.0
positive prediction rate = 0.023622
AUC of ROC = 0.79922
AUC of PRC = 0.597825
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.12597300112247467
difference in average predicted and observed risk = 0.04702600112247467
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.87619
AUC of PRC = 0.245767
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[734   0]
 [ 78   5]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.10013599693775177
difference in average predicted and observed risk = -0.0014550030622482307
number samples = 817
accuracy = 0.904529
precision class 0 = 0.903941
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.060241
false negative rate = 0.939759
false positive rate = 0.0
positive prediction rate = 0.00612
AUC of ROC = 0.831851
AUC of PRC = 0.485986
min(+P, Se) = 0.488095

-------------------------------

Epoch 00016: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch16.state
Epoch 17/100
 - 301s - loss: 0.2856 - val_loss: 0.2530

==>predicting on train



confusion matrix:
[[2141   14]
 [ 219   36]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.09704700112342834
difference in average predicted and observed risk = -0.008761998876571656
number samples = 2410
accuracy = 0.903319
precision class 0 = 0.907203
precision class 1 = 0.72
recall class 0 = 0.993503
recall class 1 = 0.141176
false negative rate = 0.858824
false positive rate = 0.006497
positive prediction rate = 0.020747
AUC of ROC = 0.786557
AUC of PRC = 0.396341
min(+P, Se) = 0.396078

-------------------------------

confusion matrix:
[[1172    7]
 [ 107   11]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08941099792718887
difference in average predicted and observed risk = -0.001568002072811131
number samples = 1297
accuracy = 0.912105
precision class 0 = 0.916341
precision class 1 = 0.611111
recall class 0 = 0.994063
recall class 1 = 0.09322
false negative rate = 0.90678
false positive rate = 0.005937
positive prediction rate = 0.013878
AUC of ROC = 0.798407
AUC of PRC = 0.329634
min(+P, Se) = 0.372881

-------------------------------

confusion matrix:
[[647   9]
 [ 63  11]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.10441400110721588
difference in average predicted and observed risk = 0.0030440011072158796
number samples = 730
accuracy = 0.90137
precision class 0 = 0.911268
precision class 1 = 0.55
recall class 0 = 0.986281
recall class 1 = 0.148649
false negative rate = 0.851351
false positive rate = 0.01372
positive prediction rate = 0.027397
AUC of ROC = 0.772886
AUC of PRC = 0.394028
min(+P, Se) = 0.418919

-------------------------------

confusion matrix:
[[166   1]
 [ 14  10]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.11607799679040909
difference in average predicted and observed risk = -0.0095760032095909
number samples = 191
accuracy = 0.921466
precision class 0 = 0.922222
precision class 1 = 0.909091
recall class 0 = 0.994012
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.005988
positive prediction rate = 0.057592
AUC of ROC = 0.88024
AUC of PRC = 0.676931
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2459   15]
 [ 227   28]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.09022200107574463
difference in average predicted and observed risk = -0.0032189989242553674
number samples = 2729
accuracy = 0.911323
precision class 0 = 0.915488
precision class 1 = 0.651163
recall class 0 = 0.993937
recall class 1 = 0.109804
false negative rate = 0.890196
false positive rate = 0.006063
positive prediction rate = 0.015757
AUC of ROC = 0.782646
AUC of PRC = 0.353257
min(+P, Se) = 0.380392

-------------------------------

confusion matrix:
[[1667   16]
 [ 176   40]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.1063850000500679
difference in average predicted and observed risk = -0.007358999949932096
number samples = 1899
accuracy = 0.898894
precision class 0 = 0.904504
precision class 1 = 0.714286
recall class 0 = 0.990493
recall class 1 = 0.185185
false negative rate = 0.814815
false positive rate = 0.009507
positive prediction rate = 0.029489
AUC of ROC = 0.805963
AUC of PRC = 0.450422
min(+P, Se) = 0.453704

-------------------------------

confusion matrix:
[[544   5]
 [ 72   5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.11686299741268158
difference in average predicted and observed risk = -0.006140002587318422
number samples = 626
accuracy = 0.876997
precision class 0 = 0.883117
precision class 1 = 0.5
recall class 0 = 0.990893
recall class 1 = 0.064935
false negative rate = 0.935065
false positive rate = 0.009107
positive prediction rate = 0.015974
AUC of ROC = 0.776287
AUC of PRC = 0.388663
min(+P, Se) = 0.414634

-------------------------------

confusion matrix:
[[2243    6]
 [ 191   17]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08050300180912018
difference in average predicted and observed risk = -0.004152998190879817
number samples = 2457
accuracy = 0.919821
precision class 0 = 0.921528
precision class 1 = 0.73913
recall class 0 = 0.997332
recall class 1 = 0.081731
false negative rate = 0.918269
false positive rate = 0.002668
positive prediction rate = 0.009361
AUC of ROC = 0.778079
AUC of PRC = 0.334196
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[218   5]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.10052800178527832
difference in average predicted and observed risk = -0.0002779982147216864
number samples = 248
accuracy = 0.879032
precision class 0 = 0.897119
precision class 1 = 0.0
recall class 0 = 0.977578
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.022422
positive prediction rate = 0.020161
AUC of ROC = 0.750135
AUC of PRC = 0.218187
min(+P, Se) = 0.290323

-------------------------------

confusion matrix:
[[475   6]
 [ 54  28]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.13148799538612366
difference in average predicted and observed risk = -0.014160004613876342
number samples = 563
accuracy = 0.893428
precision class 0 = 0.897921
precision class 1 = 0.823529
recall class 0 = 0.987526
recall class 1 = 0.341463
false negative rate = 0.658537
false positive rate = 0.012474
positive prediction rate = 0.060391
AUC of ROC = 0.829218
AUC of PRC = 0.593797
min(+P, Se) = 0.53012

-------------------------------

confusion matrix:
[[646   9]
 [ 61  18]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.10671699792146683
difference in average predicted and observed risk = -0.000912002078533175
number samples = 734
accuracy = 0.904632
precision class 0 = 0.91372
precision class 1 = 0.666667
recall class 0 = 0.98626
recall class 1 = 0.227848
false negative rate = 0.772152
false positive rate = 0.01374
positive prediction rate = 0.036785
AUC of ROC = 0.814069
AUC of PRC = 0.428663
min(+P, Se) = 0.432099

-------------------------------

confusion matrix:
[[4126   31]
 [ 403   68]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09685400128364563
difference in average predicted and observed risk = -0.0049179987163543715
number samples = 4628
accuracy = 0.906223
precision class 0 = 0.911018
precision class 1 = 0.686869
recall class 0 = 0.992543
recall class 1 = 0.144374
false negative rate = 0.855626
false positive rate = 0.007457
positive prediction rate = 0.021392
AUC of ROC = 0.793453
AUC of PRC = 0.39964
min(+P, Se) = 0.409766

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 18   1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08597800135612488
difference in average predicted and observed risk = 0.005809001356124874
number samples = 237
accuracy = 0.915612
precision class 0 = 0.923077
precision class 1 = 0.333333
recall class 0 = 0.990826
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.009174
positive prediction rate = 0.012658
AUC of ROC = 0.885804
AUC of PRC = 0.392304
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[385   0]
 [ 43   4]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.09811200201511383
difference in average predicted and observed risk = -0.010683997984886173
number samples = 432
accuracy = 0.900463
precision class 0 = 0.899533
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.085106
false negative rate = 0.914894
false positive rate = 0.0
positive prediction rate = 0.009259
AUC of ROC = 0.783697
AUC of PRC = 0.444846
min(+P, Se) = 0.4375

-------------------------------

confusion matrix:
[[104   1]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.12226299941539764
difference in average predicted and observed risk = 0.012093999415397641
number samples = 118
accuracy = 0.923729
precision class 0 = 0.928571
precision class 1 = 0.833333
recall class 0 = 0.990476
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.009524
positive prediction rate = 0.050847
AUC of ROC = 0.903297
AUC of PRC = 0.666674
min(+P, Se) = 0.647059

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.13825899362564087
difference in average predicted and observed risk = 0.004925993625640862
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[298   2]
 [ 37   2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.11005300283432007
difference in average predicted and observed risk = -0.004990997165679925
number samples = 339
accuracy = 0.884956
precision class 0 = 0.889552
precision class 1 = 0.5
recall class 0 = 0.993333
recall class 1 = 0.051282
false negative rate = 0.948718
false positive rate = 0.006667
positive prediction rate = 0.011799
AUC of ROC = 0.788974
AUC of PRC = 0.354703
min(+P, Se) = 0.4375

-------------------------------

confusion matrix:
[[433   1]
 [ 34  10]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.09211000055074692
difference in average predicted and observed risk = 6.000055074691091e-05
number samples = 478
accuracy = 0.926778
precision class 0 = 0.927195
precision class 1 = 0.909091
recall class 0 = 0.997696
recall class 1 = 0.227273
false negative rate = 0.772727
false positive rate = 0.002304
positive prediction rate = 0.023013
AUC of ROC = 0.867459
AUC of PRC = 0.597273
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 35   3]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08105099946260452
difference in average predicted and observed risk = -0.00815100053739548
number samples = 426
accuracy = 0.91784
precision class 0 = 0.917258
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.078947
false negative rate = 0.921053
false positive rate = 0.0
positive prediction rate = 0.007042
AUC of ROC = 0.852279
AUC of PRC = 0.479391
min(+P, Se) = 0.394737

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.12377999722957611
difference in average predicted and observed risk = 0.006132997229576109
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.924074
AUC of PRC = 0.722493
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.11448799818754196
difference in average predicted and observed risk = 0.025777998187541964
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.794047
AUC of PRC = 0.254416
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[106   2]
 [ 14   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.11492600291967392
difference in average predicted and observed risk = -0.03467999708032607
number samples = 127
accuracy = 0.874016
precision class 0 = 0.883333
precision class 1 = 0.714286
recall class 0 = 0.981481
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.018519
positive prediction rate = 0.055118
AUC of ROC = 0.792398
AUC of PRC = 0.58988
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.14187200367450714
difference in average predicted and observed risk = 0.06292500367450714
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.904762
AUC of PRC = 0.518849
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[731   3]
 [ 71  12]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09955500066280365
difference in average predicted and observed risk = -0.002035999337196351
number samples = 817
accuracy = 0.909425
precision class 0 = 0.911471
precision class 1 = 0.8
recall class 0 = 0.995913
recall class 1 = 0.144578
false negative rate = 0.855422
false positive rate = 0.004087
positive prediction rate = 0.01836
AUC of ROC = 0.836939
AUC of PRC = 0.492651
min(+P, Se) = 0.505882

-------------------------------

Epoch 00017: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch17.state
Epoch 18/100
 - 299s - loss: 0.2813 - val_loss: 0.2524

==>predicting on train



confusion matrix:
[[2138   17]
 [ 217   38]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.08925999701023102
difference in average predicted and observed risk = -0.016549002989768982
number samples = 2410
accuracy = 0.902905
precision class 0 = 0.907856
precision class 1 = 0.690909
recall class 0 = 0.992111
recall class 1 = 0.14902
false negative rate = 0.85098
false positive rate = 0.007889
positive prediction rate = 0.022822
AUC of ROC = 0.786761
AUC of PRC = 0.396807
min(+P, Se) = 0.392157

-------------------------------

confusion matrix:
[[1162   17]
 [ 104   14]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08209700137376785
difference in average predicted and observed risk = -0.008881998626232152
number samples = 1297
accuracy = 0.906708
precision class 0 = 0.917852
precision class 1 = 0.451613
recall class 0 = 0.985581
recall class 1 = 0.118644
false negative rate = 0.881356
false positive rate = 0.014419
positive prediction rate = 0.023901
AUC of ROC = 0.794209
AUC of PRC = 0.319482
min(+P, Se) = 0.381356

-------------------------------

confusion matrix:
[[644  12]
 [ 62  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09529899805784225
difference in average predicted and observed risk = -0.006071001942157747
number samples = 730
accuracy = 0.89863
precision class 0 = 0.912181
precision class 1 = 0.5
recall class 0 = 0.981707
recall class 1 = 0.162162
false negative rate = 0.837838
false positive rate = 0.018293
positive prediction rate = 0.032877
AUC of ROC = 0.780611
AUC of PRC = 0.403761
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[166   1]
 [ 14  10]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.10991600155830383
difference in average predicted and observed risk = -0.015737998441696155
number samples = 191
accuracy = 0.921466
precision class 0 = 0.922222
precision class 1 = 0.909091
recall class 0 = 0.994012
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.005988
positive prediction rate = 0.057592
AUC of ROC = 0.884481
AUC of PRC = 0.670093
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[2449   25]
 [ 223   32]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08236700296401978
difference in average predicted and observed risk = -0.011073997035980221
number samples = 2729
accuracy = 0.909124
precision class 0 = 0.916542
precision class 1 = 0.561404
recall class 0 = 0.989895
recall class 1 = 0.12549
false negative rate = 0.87451
false positive rate = 0.010105
positive prediction rate = 0.020887
AUC of ROC = 0.784469
AUC of PRC = 0.350344
min(+P, Se) = 0.376471

-------------------------------

confusion matrix:
[[1661   22]
 [ 174   42]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.09867200255393982
difference in average predicted and observed risk = -0.015071997446060179
number samples = 1899
accuracy = 0.896788
precision class 0 = 0.905177
precision class 1 = 0.65625
recall class 0 = 0.986928
recall class 1 = 0.194444
false negative rate = 0.805556
false positive rate = 0.013072
positive prediction rate = 0.033702
AUC of ROC = 0.803613
AUC of PRC = 0.44763
min(+P, Se) = 0.449074

-------------------------------

confusion matrix:
[[541   8]
 [ 69   8]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.11097200214862823
difference in average predicted and observed risk = -0.012030997851371766
number samples = 626
accuracy = 0.876997
precision class 0 = 0.886885
precision class 1 = 0.5
recall class 0 = 0.985428
recall class 1 = 0.103896
false negative rate = 0.896104
false positive rate = 0.014572
positive prediction rate = 0.025559
AUC of ROC = 0.772597
AUC of PRC = 0.371917
min(+P, Se) = 0.409091

-------------------------------

confusion matrix:
[[2237   12]
 [ 190   18]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07238300144672394
difference in average predicted and observed risk = -0.012272998553276057
number samples = 2457
accuracy = 0.917786
precision class 0 = 0.921714
precision class 1 = 0.6
recall class 0 = 0.994664
recall class 1 = 0.086538
false negative rate = 0.913462
false positive rate = 0.005336
positive prediction rate = 0.01221
AUC of ROC = 0.780479
AUC of PRC = 0.333991
min(+P, Se) = 0.334928

-------------------------------

confusion matrix:
[[217   6]
 [ 23   2]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.09741000086069107
difference in average predicted and observed risk = -0.003395999139308936
number samples = 248
accuracy = 0.883065
precision class 0 = 0.904167
precision class 1 = 0.25
recall class 0 = 0.973094
recall class 1 = 0.08
false negative rate = 0.92
false positive rate = 0.026906
positive prediction rate = 0.032258
AUC of ROC = 0.731659
AUC of PRC = 0.214002
min(+P, Se) = 0.3

-------------------------------

confusion matrix:
[[471  10]
 [ 54  28]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12239699810743332
difference in average predicted and observed risk = -0.02325100189256668
number samples = 563
accuracy = 0.886323
precision class 0 = 0.897143
precision class 1 = 0.736842
recall class 0 = 0.97921
recall class 1 = 0.341463
false negative rate = 0.658537
false positive rate = 0.02079
positive prediction rate = 0.067496
AUC of ROC = 0.831094
AUC of PRC = 0.585632
min(+P, Se) = 0.52439

-------------------------------

confusion matrix:
[[644  11]
 [ 61  18]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09778899699449539
difference in average predicted and observed risk = -0.00984000300550461
number samples = 734
accuracy = 0.901907
precision class 0 = 0.913475
precision class 1 = 0.62069
recall class 0 = 0.983206
recall class 1 = 0.227848
false negative rate = 0.772152
false positive rate = 0.016794
positive prediction rate = 0.03951
AUC of ROC = 0.816871
AUC of PRC = 0.434025
min(+P, Se) = 0.455696

-------------------------------

confusion matrix:
[[4110   47]
 [ 397   74]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08905799686908722
difference in average predicted and observed risk = -0.012714003130912782
number samples = 4628
accuracy = 0.904062
precision class 0 = 0.911915
precision class 1 = 0.61157
recall class 0 = 0.988694
recall class 1 = 0.157113
false negative rate = 0.842887
false positive rate = 0.011306
positive prediction rate = 0.026145
AUC of ROC = 0.793668
AUC of PRC = 0.397318
min(+P, Se) = 0.409766

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08011700212955475
difference in average predicted and observed risk = -5.199787044525561e-05
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.869387
AUC of PRC = 0.388305
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[385   0]
 [ 44   3]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.08870600163936615
difference in average predicted and observed risk = -0.020089998360633854
number samples = 432
accuracy = 0.898148
precision class 0 = 0.897436
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.06383
false negative rate = 0.93617
false positive rate = 0.0
positive prediction rate = 0.006944
AUC of ROC = 0.78331
AUC of PRC = 0.4451
min(+P, Se) = 0.446809

-------------------------------

confusion matrix:
[[104   1]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.11285500228404999
difference in average predicted and observed risk = 0.0026860022840499848
number samples = 118
accuracy = 0.923729
precision class 0 = 0.928571
precision class 1 = 0.833333
recall class 0 = 0.990476
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.009524
positive prediction rate = 0.050847
AUC of ROC = 0.902564
AUC of PRC = 0.613691
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.12932099401950836
difference in average predicted and observed risk = -0.004012005980491645
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[297   3]
 [ 37   2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.100832000374794
difference in average predicted and observed risk = -0.014211999625205987
number samples = 339
accuracy = 0.882006
precision class 0 = 0.889222
precision class 1 = 0.4
recall class 0 = 0.99
recall class 1 = 0.051282
false negative rate = 0.948718
false positive rate = 0.01
positive prediction rate = 0.014749
AUC of ROC = 0.784444
AUC of PRC = 0.355922
min(+P, Se) = 0.435897

-------------------------------

confusion matrix:
[[433   1]
 [ 32  12]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08435799926519394
difference in average predicted and observed risk = -0.007692000734806068
number samples = 478
accuracy = 0.930962
precision class 0 = 0.931183
precision class 1 = 0.923077
recall class 0 = 0.997696
recall class 1 = 0.272727
false negative rate = 0.727273
false positive rate = 0.002304
positive prediction rate = 0.027197
AUC of ROC = 0.862065
AUC of PRC = 0.592028
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 34   4]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.07242400199174881
difference in average predicted and observed risk = -0.016777998008251194
number samples = 426
accuracy = 0.920188
precision class 0 = 0.919431
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.0
positive prediction rate = 0.00939
AUC of ROC = 0.844004
AUC of PRC = 0.46674
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[89  1]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.11343900114297867
difference in average predicted and observed risk = -0.004207998857021333
number samples = 102
accuracy = 0.911765
precision class 0 = 0.917526
precision class 1 = 0.8
recall class 0 = 0.988889
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.011111
positive prediction rate = 0.04902
AUC of ROC = 0.926852
AUC of PRC = 0.715391
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.10661300271749496
difference in average predicted and observed risk = 0.017903002717494967
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.802092
AUC of PRC = 0.267299
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[106   2]
 [ 14   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10764499753713608
difference in average predicted and observed risk = -0.04196100246286391
number samples = 127
accuracy = 0.874016
precision class 0 = 0.883333
precision class 1 = 0.714286
recall class 0 = 0.981481
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.018519
positive prediction rate = 0.055118
AUC of ROC = 0.790448
AUC of PRC = 0.555527
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.13660000264644623
difference in average predicted and observed risk = 0.057653002646446225
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.904762
AUC of PRC = 0.518849
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[730   4]
 [ 69  14]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09119399636983871
difference in average predicted and observed risk = -0.010397003630161286
number samples = 817
accuracy = 0.910649
precision class 0 = 0.913642
precision class 1 = 0.777778
recall class 0 = 0.99455
recall class 1 = 0.168675
false negative rate = 0.831325
false positive rate = 0.00545
positive prediction rate = 0.022032
AUC of ROC = 0.831965
AUC of PRC = 0.481367
min(+P, Se) = 0.511905

-------------------------------

Epoch 00018: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch18.state
Epoch 19/100
 - 298s - loss: 0.2815 - val_loss: 0.2555

==>predicting on train



confusion matrix:
[[2131   24]
 [ 199   56]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.12464000284671783
difference in average predicted and observed risk = 0.018831002846717834
number samples = 2410
accuracy = 0.907469
precision class 0 = 0.914592
precision class 1 = 0.7
recall class 0 = 0.988863
recall class 1 = 0.219608
false negative rate = 0.780392
false positive rate = 0.011137
positive prediction rate = 0.033195
AUC of ROC = 0.796559
AUC of PRC = 0.398203
min(+P, Se) = 0.397112

-------------------------------

confusion matrix:
[[1154   25]
 [  94   24]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.11306600272655487
difference in average predicted and observed risk = 0.022087002726554866
number samples = 1297
accuracy = 0.90825
precision class 0 = 0.924679
precision class 1 = 0.489796
recall class 0 = 0.978796
recall class 1 = 0.20339
false negative rate = 0.79661
false positive rate = 0.021204
positive prediction rate = 0.037779
AUC of ROC = 0.811166
AUC of PRC = 0.332957
min(+P, Se) = 0.372881

-------------------------------

confusion matrix:
[[639  17]
 [ 57  17]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.13131700456142426
difference in average predicted and observed risk = 0.029947004561424254
number samples = 730
accuracy = 0.89863
precision class 0 = 0.918103
precision class 1 = 0.5
recall class 0 = 0.974085
recall class 1 = 0.22973
false negative rate = 0.77027
false positive rate = 0.025915
positive prediction rate = 0.046575
AUC of ROC = 0.777707
AUC of PRC = 0.411959
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[165   2]
 [ 14  10]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.14741399884223938
difference in average predicted and observed risk = 0.021759998842239392
number samples = 191
accuracy = 0.91623
precision class 0 = 0.921788
precision class 1 = 0.833333
recall class 0 = 0.988024
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.011976
positive prediction rate = 0.062827
AUC of ROC = 0.869261
AUC of PRC = 0.688
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2433   41]
 [ 199   56]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.1150289997458458
difference in average predicted and observed risk = 0.0215879997458458
number samples = 2729
accuracy = 0.912056
precision class 0 = 0.924392
precision class 1 = 0.57732
recall class 0 = 0.983428
recall class 1 = 0.219608
false negative rate = 0.780392
false positive rate = 0.016572
positive prediction rate = 0.035544
AUC of ROC = 0.793929
AUC of PRC = 0.352976
min(+P, Se) = 0.376923

-------------------------------

confusion matrix:
[[1656   27]
 [ 165   51]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.13540500402450562
difference in average predicted and observed risk = 0.021661004024505617
number samples = 1899
accuracy = 0.898894
precision class 0 = 0.90939
precision class 1 = 0.653846
recall class 0 = 0.983957
recall class 1 = 0.236111
false negative rate = 0.763889
false positive rate = 0.016043
positive prediction rate = 0.041074
AUC of ROC = 0.812336
AUC of PRC = 0.451373
min(+P, Se) = 0.45045

-------------------------------

confusion matrix:
[[537  12]
 [ 61  16]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.1460449993610382
difference in average predicted and observed risk = 0.023041999361038207
number samples = 626
accuracy = 0.883387
precision class 0 = 0.897993
precision class 1 = 0.571429
recall class 0 = 0.978142
recall class 1 = 0.207792
false negative rate = 0.792208
false positive rate = 0.021858
positive prediction rate = 0.044728
AUC of ROC = 0.797625
AUC of PRC = 0.382259
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[2226   23]
 [ 173   35]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.10457099974155426
difference in average predicted and observed risk = 0.019914999741554265
number samples = 2457
accuracy = 0.920228
precision class 0 = 0.927887
precision class 1 = 0.603448
recall class 0 = 0.989773
recall class 1 = 0.168269
false negative rate = 0.831731
false positive rate = 0.010227
positive prediction rate = 0.023606
AUC of ROC = 0.789223
AUC of PRC = 0.346167
min(+P, Se) = 0.346154

-------------------------------

confusion matrix:
[[216   7]
 [ 21   4]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.12979799509048462
difference in average predicted and observed risk = 0.028991995090484612
number samples = 248
accuracy = 0.887097
precision class 0 = 0.911392
precision class 1 = 0.363636
recall class 0 = 0.96861
recall class 1 = 0.16
false negative rate = 0.84
false positive rate = 0.03139
positive prediction rate = 0.044355
AUC of ROC = 0.738475
AUC of PRC = 0.227227
min(+P, Se) = 0.321429

-------------------------------

confusion matrix:
[[471  10]
 [ 49  33]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.16351500153541565
difference in average predicted and observed risk = 0.01786700153541565
number samples = 563
accuracy = 0.895204
precision class 0 = 0.905769
precision class 1 = 0.767442
recall class 0 = 0.97921
recall class 1 = 0.402439
false negative rate = 0.597561
false positive rate = 0.02079
positive prediction rate = 0.076377
AUC of ROC = 0.829192
AUC of PRC = 0.573834
min(+P, Se) = 0.536585

-------------------------------

confusion matrix:
[[639  16]
 [ 60  19]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.13411900401115417
difference in average predicted and observed risk = 0.026490004011154172
number samples = 734
accuracy = 0.896458
precision class 0 = 0.914163
precision class 1 = 0.542857
recall class 0 = 0.975573
recall class 1 = 0.240506
false negative rate = 0.759494
false positive rate = 0.024427
positive prediction rate = 0.047684
AUC of ROC = 0.81432
AUC of PRC = 0.416086
min(+P, Se) = 0.443038

-------------------------------

confusion matrix:
[[4089   68]
 [ 364  107]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.12338999658823013
difference in average predicted and observed risk = 0.02161799658823013
number samples = 4628
accuracy = 0.906655
precision class 0 = 0.918257
precision class 1 = 0.611429
recall class 0 = 0.983642
recall class 1 = 0.227176
false negative rate = 0.772824
false positive rate = 0.016358
positive prediction rate = 0.037813
AUC of ROC = 0.80187
AUC of PRC = 0.399436
min(+P, Se) = 0.411017

-------------------------------

==>predicting on validation



confusion matrix:
[[214   4]
 [ 14   5]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.11053100228309631
difference in average predicted and observed risk = 0.03036200228309631
number samples = 237
accuracy = 0.924051
precision class 0 = 0.938596
precision class 1 = 0.555556
recall class 0 = 0.981651
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.018349
positive prediction rate = 0.037975
AUC of ROC = 0.882424
AUC of PRC = 0.422554
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[384   1]
 [ 41   6]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.12338600307703018
difference in average predicted and observed risk = 0.014590003077030178
number samples = 432
accuracy = 0.902778
precision class 0 = 0.903529
precision class 1 = 0.857143
recall class 0 = 0.997403
recall class 1 = 0.12766
false negative rate = 0.87234
false positive rate = 0.002597
positive prediction rate = 0.016204
AUC of ROC = 0.778889
AUC of PRC = 0.425868
min(+P, Se) = 0.446809

-------------------------------

confusion matrix:
[[102   3]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.14776499569416046
difference in average predicted and observed risk = 0.03759599569416046
number samples = 118
accuracy = 0.90678
precision class 0 = 0.927273
precision class 1 = 0.625
recall class 0 = 0.971429
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.028571
positive prediction rate = 0.067797
AUC of ROC = 0.895238
AUC of PRC = 0.648947
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.1675810068845749
difference in average predicted and observed risk = 0.03424800688457488
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[295   5]
 [ 34   5]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.1380079984664917
difference in average predicted and observed risk = 0.022963998466491706
number samples = 339
accuracy = 0.884956
precision class 0 = 0.896657
precision class 1 = 0.5
recall class 0 = 0.983333
recall class 1 = 0.128205
false negative rate = 0.871795
false positive rate = 0.016667
positive prediction rate = 0.029499
AUC of ROC = 0.78735
AUC of PRC = 0.356077
min(+P, Se) = 0.431818

-------------------------------

confusion matrix:
[[431   3]
 [ 31  13]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.11543499678373337
difference in average predicted and observed risk = 0.02338499678373336
number samples = 478
accuracy = 0.92887
precision class 0 = 0.9329
precision class 1 = 0.8125
recall class 0 = 0.993088
recall class 1 = 0.295455
false negative rate = 0.704545
false positive rate = 0.006912
positive prediction rate = 0.033473
AUC of ROC = 0.860128
AUC of PRC = 0.588331
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[386   2]
 [ 32   6]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.10387399792671204
difference in average predicted and observed risk = 0.014671997926712033
number samples = 426
accuracy = 0.920188
precision class 0 = 0.923445
precision class 1 = 0.75
recall class 0 = 0.994845
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.005155
positive prediction rate = 0.018779
AUC of ROC = 0.846378
AUC of PRC = 0.462896
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[88  2]
 [ 7  5]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.15149900317192078
difference in average predicted and observed risk = 0.033852003171920775
number samples = 102
accuracy = 0.911765
precision class 0 = 0.926316
precision class 1 = 0.714286
recall class 0 = 0.977778
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.022222
positive prediction rate = 0.068627
AUC of ROC = 0.918519
AUC of PRC = 0.73737
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[111   2]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.14165599644184113
difference in average predicted and observed risk = 0.05294599644184113
number samples = 124
accuracy = 0.895161
precision class 0 = 0.909836
precision class 1 = 0.0
recall class 0 = 0.982301
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.017699
positive prediction rate = 0.016129
AUC of ROC = 0.777957
AUC of PRC = 0.229509
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[106   2]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.14248999953269958
difference in average predicted and observed risk = -0.007116000467300404
number samples = 127
accuracy = 0.88189
precision class 0 = 0.890756
precision class 1 = 0.75
recall class 0 = 0.981481
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.018519
positive prediction rate = 0.062992
AUC of ROC = 0.789474
AUC of PRC = 0.563878
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.17362099885940552
difference in average predicted and observed risk = 0.09467399885940551
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.904762
AUC of PRC = 0.518849
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[726   8]
 [ 65  18]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.12480100244283676
difference in average predicted and observed risk = 0.02321000244283676
number samples = 817
accuracy = 0.910649
precision class 0 = 0.917826
precision class 1 = 0.692308
recall class 0 = 0.989101
recall class 1 = 0.216867
false negative rate = 0.783133
false positive rate = 0.010899
positive prediction rate = 0.031824
AUC of ROC = 0.832294
AUC of PRC = 0.481987
min(+P, Se) = 0.506024

-------------------------------

Epoch 00019: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch19.state
Epoch 20/100
 - 299s - loss: 0.2818 - val_loss: 0.2581

==>predicting on train



confusion matrix:
[[2151    4]
 [ 238   17]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.08954399824142456
difference in average predicted and observed risk = -0.01626500175857544
number samples = 2410
accuracy = 0.899585
precision class 0 = 0.900377
precision class 1 = 0.809524
recall class 0 = 0.998144
recall class 1 = 0.066667
false negative rate = 0.933333
false positive rate = 0.001856
positive prediction rate = 0.008714
AUC of ROC = 0.773583
AUC of PRC = 0.394316
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[1178    1]
 [ 118    0]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08018399775028229
difference in average predicted and observed risk = -0.010795002249717717
number samples = 1297
accuracy = 0.90825
precision class 0 = 0.908951
precision class 1 = 0.0
recall class 0 = 0.999152
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.000848
positive prediction rate = 0.000771
AUC of ROC = 0.788768
AUC of PRC = 0.321396
min(+P, Se) = 0.361345

-------------------------------

confusion matrix:
[[656   0]
 [ 70   4]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09300699830055237
difference in average predicted and observed risk = -0.008363001699447634
number samples = 730
accuracy = 0.90411
precision class 0 = 0.903581
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.054054
false negative rate = 0.945946
false positive rate = 0.0
positive prediction rate = 0.005479
AUC of ROC = 0.769261
AUC of PRC = 0.387398
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[166   1]
 [ 15   9]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.10725700110197067
difference in average predicted and observed risk = -0.018396998898029315
number samples = 191
accuracy = 0.91623
precision class 0 = 0.917127
precision class 1 = 0.9
recall class 0 = 0.994012
recall class 1 = 0.375
false negative rate = 0.625
false positive rate = 0.005988
positive prediction rate = 0.052356
AUC of ROC = 0.842066
AUC of PRC = 0.699028
min(+P, Se) = 0.68

-------------------------------

confusion matrix:
[[2471    3]
 [ 246    9]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08318399637937546
difference in average predicted and observed risk = -0.010257003620624539
number samples = 2729
accuracy = 0.908758
precision class 0 = 0.909459
precision class 1 = 0.75
recall class 0 = 0.998787
recall class 1 = 0.035294
false negative rate = 0.964706
false positive rate = 0.001213
positive prediction rate = 0.004397
AUC of ROC = 0.765389
AUC of PRC = 0.349117
min(+P, Se) = 0.374517

-------------------------------

confusion matrix:
[[1680    3]
 [ 195   21]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.0954039990901947
difference in average predicted and observed risk = -0.018340000909805296
number samples = 1899
accuracy = 0.895735
precision class 0 = 0.896
precision class 1 = 0.875
recall class 0 = 0.998217
recall class 1 = 0.097222
false negative rate = 0.902778
false positive rate = 0.001783
positive prediction rate = 0.012638
AUC of ROC = 0.799055
AUC of PRC = 0.45013
min(+P, Se) = 0.458333

-------------------------------

confusion matrix:
[[549   0]
 [ 77   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.10557100176811218
difference in average predicted and observed risk = -0.01743199823188782
number samples = 626
accuracy = 0.876997
precision class 0 = 0.876997
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.767014
AUC of PRC = 0.38018
min(+P, Se) = 0.402597

-------------------------------

confusion matrix:
[[2249    0]
 [ 201    7]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07460600137710571
difference in average predicted and observed risk = -0.010049998622894282
number samples = 2457
accuracy = 0.918193
precision class 0 = 0.917959
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.033654
false negative rate = 0.966346
false positive rate = 0.0
positive prediction rate = 0.002849
AUC of ROC = 0.764701
AUC of PRC = 0.32509
min(+P, Se) = 0.331754

-------------------------------

confusion matrix:
[[222   1]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.09333600103855133
difference in average predicted and observed risk = -0.007469998961448676
number samples = 248
accuracy = 0.895161
precision class 0 = 0.898785
precision class 1 = 0.0
recall class 0 = 0.995516
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.004484
positive prediction rate = 0.004032
AUC of ROC = 0.719821
AUC of PRC = 0.215573
min(+P, Se) = 0.28

-------------------------------

confusion matrix:
[[479   2]
 [ 64  18]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.11720400303602219
difference in average predicted and observed risk = -0.028443996963977813
number samples = 563
accuracy = 0.882771
precision class 0 = 0.882136
precision class 1 = 0.9
recall class 0 = 0.995842
recall class 1 = 0.219512
false negative rate = 0.780488
false positive rate = 0.004158
positive prediction rate = 0.035524
AUC of ROC = 0.813397
AUC of PRC = 0.584795
min(+P, Se) = 0.52439

-------------------------------

confusion matrix:
[[652   3]
 [ 74   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09489600360393524
difference in average predicted and observed risk = -0.01273299639606476
number samples = 734
accuracy = 0.895095
precision class 0 = 0.898072
precision class 1 = 0.625
recall class 0 = 0.99542
recall class 1 = 0.063291
false negative rate = 0.936709
false positive rate = 0.00458
positive prediction rate = 0.010899
AUC of ROC = 0.803227
AUC of PRC = 0.434077
min(+P, Se) = 0.475

-------------------------------

confusion matrix:
[[4151    6]
 [ 441   30]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08819799870252609
difference in average predicted and observed risk = -0.013574001297473909
number samples = 4628
accuracy = 0.903414
precision class 0 = 0.903963
precision class 1 = 0.833333
recall class 0 = 0.998557
recall class 1 = 0.063694
false negative rate = 0.936306
false positive rate = 0.001443
positive prediction rate = 0.007779
AUC of ROC = 0.781032
AUC of PRC = 0.396856
min(+P, Se) = 0.411017

-------------------------------

==>predicting on validation



confusion matrix:
[[218   0]
 [ 19   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.07847800105810165
difference in average predicted and observed risk = -0.00169099894189835
number samples = 237
accuracy = 0.919831
precision class 0 = 0.919831
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.846451
AUC of PRC = 0.407672
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[385   0]
 [ 46   1]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.08912999927997589
difference in average predicted and observed risk = -0.019666000720024113
number samples = 432
accuracy = 0.893519
precision class 0 = 0.893271
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.021277
false negative rate = 0.978723
false positive rate = 0.0
positive prediction rate = 0.002315
AUC of ROC = 0.778944
AUC of PRC = 0.439851
min(+P, Se) = 0.415094

-------------------------------

confusion matrix:
[[105   0]
 [ 12   1]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10441800206899643
difference in average predicted and observed risk = -0.005750997931003574
number samples = 118
accuracy = 0.898305
precision class 0 = 0.897436
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.0
positive prediction rate = 0.008475
AUC of ROC = 0.906227
AUC of PRC = 0.617147
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.12369400262832642
difference in average predicted and observed risk = -0.009638997371673591
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[300   0]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.09704700112342834
difference in average predicted and observed risk = -0.01799699887657165
number samples = 339
accuracy = 0.887906
precision class 0 = 0.887574
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.0
positive prediction rate = 0.00295
AUC of ROC = 0.788205
AUC of PRC = 0.365184
min(+P, Se) = 0.439024

-------------------------------

confusion matrix:
[[434   0]
 [ 41   3]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08417599648237228
difference in average predicted and observed risk = -0.007874003517627723
number samples = 478
accuracy = 0.914226
precision class 0 = 0.913684
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.068182
false negative rate = 0.931818
false positive rate = 0.0
positive prediction rate = 0.006276
AUC of ROC = 0.85154
AUC of PRC = 0.583935
min(+P, Se) = 0.522727

-------------------------------

confusion matrix:
[[388   0]
 [ 37   1]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.0750579982995987
difference in average predicted and observed risk = -0.01414400170040131
number samples = 426
accuracy = 0.913146
precision class 0 = 0.912941
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.026316
false negative rate = 0.973684
false positive rate = 0.0
positive prediction rate = 0.002347
AUC of ROC = 0.835391
AUC of PRC = 0.470974
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[90  0]
 [11  1]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.10913000255823135
difference in average predicted and observed risk = -0.008516997441768648
number samples = 102
accuracy = 0.892157
precision class 0 = 0.891089
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.009804
AUC of ROC = 0.942593
AUC of PRC = 0.732883
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.10050699859857559
difference in average predicted and observed risk = 0.011796998598575595
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.78037
AUC of PRC = 0.246522
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[108   0]
 [ 17   2]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10070999711751938
difference in average predicted and observed risk = -0.04889600288248061
number samples = 127
accuracy = 0.866142
precision class 0 = 0.864
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.0
positive prediction rate = 0.015748
AUC of ROC = 0.77729
AUC of PRC = 0.554097
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.12569500505924225
difference in average predicted and observed risk = 0.046748005059242245
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.92381
AUC of PRC = 0.551786
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[734   0]
 [ 79   4]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.08951699733734131
difference in average predicted and observed risk = -0.012074002662658692
number samples = 817
accuracy = 0.903305
precision class 0 = 0.902829
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.048193
false negative rate = 0.951807
false positive rate = 0.0
positive prediction rate = 0.004896
AUC of ROC = 0.826253
AUC of PRC = 0.486868
min(+P, Se) = 0.488095

-------------------------------

Epoch 00020: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch20.state
Epoch 21/100
 - 299s - loss: 0.2855 - val_loss: 0.2538

==>predicting on train



confusion matrix:
[[2135   20]
 [ 207   48]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.08501400053501129
difference in average predicted and observed risk = -0.02079499946498871
number samples = 2410
accuracy = 0.905809
precision class 0 = 0.911614
precision class 1 = 0.705882
recall class 0 = 0.990719
recall class 1 = 0.188235
false negative rate = 0.811765
false positive rate = 0.009281
positive prediction rate = 0.028216
AUC of ROC = 0.777402
AUC of PRC = 0.397845
min(+P, Se) = 0.398438

-------------------------------

confusion matrix:
[[1164   15]
 [ 106   12]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08368600159883499
difference in average predicted and observed risk = -0.007292998401165013
number samples = 1297
accuracy = 0.906708
precision class 0 = 0.916535
precision class 1 = 0.444444
recall class 0 = 0.987277
recall class 1 = 0.101695
false negative rate = 0.898305
false positive rate = 0.012723
positive prediction rate = 0.020817
AUC of ROC = 0.785821
AUC of PRC = 0.322305
min(+P, Se) = 0.355932

-------------------------------

confusion matrix:
[[643  13]
 [ 61  13]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09153299778699875
difference in average predicted and observed risk = -0.009837002213001253
number samples = 730
accuracy = 0.89863
precision class 0 = 0.913352
precision class 1 = 0.5
recall class 0 = 0.980183
recall class 1 = 0.175676
false negative rate = 0.824324
false positive rate = 0.019817
positive prediction rate = 0.035616
AUC of ROC = 0.774658
AUC of PRC = 0.39284
min(+P, Se) = 0.459459

-------------------------------

confusion matrix:
[[165   2]
 [ 14  10]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.10113699734210968
difference in average predicted and observed risk = -0.024517002657890308
number samples = 191
accuracy = 0.91623
precision class 0 = 0.921788
precision class 1 = 0.833333
recall class 0 = 0.988024
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.011976
positive prediction rate = 0.062827
AUC of ROC = 0.845808
AUC of PRC = 0.699327
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2449   25]
 [ 218   37]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08235099911689758
difference in average predicted and observed risk = -0.011090000883102413
number samples = 2729
accuracy = 0.910956
precision class 0 = 0.91826
precision class 1 = 0.596774
recall class 0 = 0.989895
recall class 1 = 0.145098
false negative rate = 0.854902
false positive rate = 0.010105
positive prediction rate = 0.022719
AUC of ROC = 0.76832
AUC of PRC = 0.351004
min(+P, Se) = 0.376471

-------------------------------

confusion matrix:
[[1658   25]
 [ 170   46]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.09206199645996094
difference in average predicted and observed risk = -0.02168200354003906
number samples = 1899
accuracy = 0.897314
precision class 0 = 0.907002
precision class 1 = 0.647887
recall class 0 = 0.985146
recall class 1 = 0.212963
false negative rate = 0.787037
false positive rate = 0.014854
positive prediction rate = 0.037388
AUC of ROC = 0.8007
AUC of PRC = 0.452547
min(+P, Se) = 0.441964

-------------------------------

confusion matrix:
[[542   7]
 [ 69   8]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.10251600295305252
difference in average predicted and observed risk = -0.02048699704694748
number samples = 626
accuracy = 0.878594
precision class 0 = 0.88707
precision class 1 = 0.533333
recall class 0 = 0.98725
recall class 1 = 0.103896
false negative rate = 0.896104
false positive rate = 0.01275
positive prediction rate = 0.023962
AUC of ROC = 0.768599
AUC of PRC = 0.386485
min(+P, Se) = 0.393939

-------------------------------

confusion matrix:
[[2233   16]
 [ 184   24]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07231699675321579
difference in average predicted and observed risk = -0.012339003246784205
number samples = 2457
accuracy = 0.9186
precision class 0 = 0.923873
precision class 1 = 0.6
recall class 0 = 0.992886
recall class 1 = 0.115385
false negative rate = 0.884615
false positive rate = 0.007114
positive prediction rate = 0.01628
AUC of ROC = 0.76785
AUC of PRC = 0.333149
min(+P, Se) = 0.327014

-------------------------------

confusion matrix:
[[217   6]
 [ 22   3]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.09160000085830688
difference in average predicted and observed risk = -0.009205999141693122
number samples = 248
accuracy = 0.887097
precision class 0 = 0.90795
precision class 1 = 0.333333
recall class 0 = 0.973094
recall class 1 = 0.12
false negative rate = 0.88
false positive rate = 0.026906
positive prediction rate = 0.03629
AUC of ROC = 0.715157
AUC of PRC = 0.212757
min(+P, Se) = 0.277778

-------------------------------

confusion matrix:
[[471  10]
 [ 52  30]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.11976300179958344
difference in average predicted and observed risk = -0.025884998200416565
number samples = 563
accuracy = 0.889876
precision class 0 = 0.900574
precision class 1 = 0.75
recall class 0 = 0.97921
recall class 1 = 0.365854
false negative rate = 0.634146
false positive rate = 0.02079
positive prediction rate = 0.071048
AUC of ROC = 0.822271
AUC of PRC = 0.593746
min(+P, Se) = 0.52439

-------------------------------

confusion matrix:
[[644  11]
 [ 61  18]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09204299747943878
difference in average predicted and observed risk = -0.01558600252056122
number samples = 734
accuracy = 0.901907
precision class 0 = 0.913475
precision class 1 = 0.62069
recall class 0 = 0.983206
recall class 1 = 0.227848
false negative rate = 0.772152
false positive rate = 0.016794
positive prediction rate = 0.03951
AUC of ROC = 0.797236
AUC of PRC = 0.422922
min(+P, Se) = 0.453488

-------------------------------

confusion matrix:
[[4107   50]
 [ 388   83]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08633600175380707
difference in average predicted and observed risk = -0.015435998246192933
number samples = 4628
accuracy = 0.905359
precision class 0 = 0.913682
precision class 1 = 0.62406
recall class 0 = 0.987972
recall class 1 = 0.176221
false negative rate = 0.823779
false positive rate = 0.012028
positive prediction rate = 0.028738
AUC of ROC = 0.783487
AUC of PRC = 0.399355
min(+P, Se) = 0.407173

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 16   3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08139900118112564
difference in average predicted and observed risk = 0.0012300011811256367
number samples = 237
accuracy = 0.919831
precision class 0 = 0.930736
precision class 1 = 0.5
recall class 0 = 0.986239
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.013761
positive prediction rate = 0.025316
AUC of ROC = 0.84114
AUC of PRC = 0.379123
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[385   0]
 [ 42   5]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.08318600058555603
difference in average predicted and observed risk = -0.025609999414443974
number samples = 432
accuracy = 0.902778
precision class 0 = 0.901639
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.106383
false negative rate = 0.893617
false positive rate = 0.0
positive prediction rate = 0.011574
AUC of ROC = 0.790274
AUC of PRC = 0.434157
min(+P, Se) = 0.446809

-------------------------------

confusion matrix:
[[104   1]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10464999824762344
difference in average predicted and observed risk = -0.005519001752376559
number samples = 118
accuracy = 0.923729
precision class 0 = 0.928571
precision class 1 = 0.833333
recall class 0 = 0.990476
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.009524
positive prediction rate = 0.050847
AUC of ROC = 0.907692
AUC of PRC = 0.609881
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11617399752140045
difference in average predicted and observed risk = -0.017159002478599555
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[297   3]
 [ 35   4]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.09405200183391571
difference in average predicted and observed risk = -0.020991998166084283
number samples = 339
accuracy = 0.887906
precision class 0 = 0.894578
precision class 1 = 0.571429
recall class 0 = 0.99
recall class 1 = 0.102564
false negative rate = 0.897436
false positive rate = 0.01
positive prediction rate = 0.020649
AUC of ROC = 0.798889
AUC of PRC = 0.356172
min(+P, Se) = 0.463415

-------------------------------

confusion matrix:
[[433   1]
 [ 33  11]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08196300268173218
difference in average predicted and observed risk = -0.010086997318267829
number samples = 478
accuracy = 0.92887
precision class 0 = 0.929185
precision class 1 = 0.916667
recall class 0 = 0.997696
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.002304
positive prediction rate = 0.025105
AUC of ROC = 0.855467
AUC of PRC = 0.58846
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 33   5]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.07276300340890884
difference in average predicted and observed risk = -0.01643899659109116
number samples = 426
accuracy = 0.922535
precision class 0 = 0.921615
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.131579
false negative rate = 0.868421
false positive rate = 0.0
positive prediction rate = 0.011737
AUC of ROC = 0.838985
AUC of PRC = 0.46395
min(+P, Se) = 0.475

-------------------------------

confusion matrix:
[[89  1]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.1077049970626831
difference in average predicted and observed risk = -0.009942002937316896
number samples = 102
accuracy = 0.911765
precision class 0 = 0.917526
precision class 1 = 0.8
recall class 0 = 0.988889
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.011111
positive prediction rate = 0.04902
AUC of ROC = 0.948148
AUC of PRC = 0.737782
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.09452000260353088
difference in average predicted and observed risk = 0.005810002603530887
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.791633
AUC of PRC = 0.235089
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[106   2]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09829799830913544
difference in average predicted and observed risk = -0.05130800169086455
number samples = 127
accuracy = 0.88189
precision class 0 = 0.890756
precision class 1 = 0.75
recall class 0 = 0.981481
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.018519
positive prediction rate = 0.062992
AUC of ROC = 0.787037
AUC of PRC = 0.567558
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.1282840073108673
difference in average predicted and observed risk = 0.049337007310867306
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.914286
AUC of PRC = 0.532341
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[730   4]
 [ 68  15]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.08697900176048279
difference in average predicted and observed risk = -0.014611998239517213
number samples = 817
accuracy = 0.911873
precision class 0 = 0.914787
precision class 1 = 0.789474
recall class 0 = 0.99455
recall class 1 = 0.180723
false negative rate = 0.819277
false positive rate = 0.00545
positive prediction rate = 0.023256
AUC of ROC = 0.832031
AUC of PRC = 0.480612
min(+P, Se) = 0.506024

-------------------------------

Epoch 00021: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch21.state
Epoch 22/100
 - 296s - loss: 0.2843 - val_loss: 0.2531

==>predicting on train



confusion matrix:
[[2130   25]
 [ 203   52]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.1081790030002594
difference in average predicted and observed risk = 0.002370003000259399
number samples = 2410
accuracy = 0.905394
precision class 0 = 0.912988
precision class 1 = 0.675325
recall class 0 = 0.988399
recall class 1 = 0.203922
false negative rate = 0.796078
false positive rate = 0.011601
positive prediction rate = 0.03195
AUC of ROC = 0.7779
AUC of PRC = 0.396257
min(+P, Se) = 0.391473

-------------------------------

confusion matrix:
[[1163   16]
 [ 100   18]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.09951800107955933
difference in average predicted and observed risk = 0.008539001079559322
number samples = 1297
accuracy = 0.910563
precision class 0 = 0.920823
precision class 1 = 0.529412
recall class 0 = 0.986429
recall class 1 = 0.152542
false negative rate = 0.847458
false positive rate = 0.013571
positive prediction rate = 0.026214
AUC of ROC = 0.785663
AUC of PRC = 0.331608
min(+P, Se) = 0.365854

-------------------------------

confusion matrix:
[[640  16]
 [ 58  16]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.1107499971985817
difference in average predicted and observed risk = 0.009379997198581694
number samples = 730
accuracy = 0.89863
precision class 0 = 0.916905
precision class 1 = 0.5
recall class 0 = 0.97561
recall class 1 = 0.216216
false negative rate = 0.783784
false positive rate = 0.02439
positive prediction rate = 0.043836
AUC of ROC = 0.773813
AUC of PRC = 0.399545
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[165   2]
 [ 13  11]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.13123199343681335
difference in average predicted and observed risk = 0.005577993436813367
number samples = 191
accuracy = 0.921466
precision class 0 = 0.926966
precision class 1 = 0.846154
recall class 0 = 0.988024
recall class 1 = 0.458333
false negative rate = 0.541667
false positive rate = 0.011976
positive prediction rate = 0.068063
AUC of ROC = 0.847555
AUC of PRC = 0.703741
min(+P, Se) = 0.708333

-------------------------------

confusion matrix:
[[2444   30]
 [ 207   48]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.1013140007853508
difference in average predicted and observed risk = 0.007873000785350803
number samples = 2729
accuracy = 0.913155
precision class 0 = 0.921916
precision class 1 = 0.615385
recall class 0 = 0.987874
recall class 1 = 0.188235
false negative rate = 0.811765
false positive rate = 0.012126
positive prediction rate = 0.028582
AUC of ROC = 0.765864
AUC of PRC = 0.349814
min(+P, Se) = 0.359073

-------------------------------

confusion matrix:
[[1654   29]
 [ 167   49]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.11543600261211395
difference in average predicted and observed risk = 0.0016920026121139548
number samples = 1899
accuracy = 0.896788
precision class 0 = 0.908292
precision class 1 = 0.628205
recall class 0 = 0.982769
recall class 1 = 0.226852
false negative rate = 0.773148
false positive rate = 0.017231
positive prediction rate = 0.041074
AUC of ROC = 0.803421
AUC of PRC = 0.461719
min(+P, Se) = 0.454128

-------------------------------

confusion matrix:
[[539  10]
 [ 65  12]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.12273900210857391
difference in average predicted and observed risk = -0.00026399789142608765
number samples = 626
accuracy = 0.880192
precision class 0 = 0.892384
precision class 1 = 0.545455
recall class 0 = 0.981785
recall class 1 = 0.155844
false negative rate = 0.844156
false positive rate = 0.018215
positive prediction rate = 0.035144
AUC of ROC = 0.769356
AUC of PRC = 0.38835
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[2229   20]
 [ 178   30]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.09259399771690369
difference in average predicted and observed risk = 0.007937997716903691
number samples = 2457
accuracy = 0.919414
precision class 0 = 0.926049
precision class 1 = 0.6
recall class 0 = 0.991107
recall class 1 = 0.144231
false negative rate = 0.855769
false positive rate = 0.008893
positive prediction rate = 0.02035
AUC of ROC = 0.767737
AUC of PRC = 0.333514
min(+P, Se) = 0.330144

-------------------------------

confusion matrix:
[[217   6]
 [ 22   3]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.111115001142025
difference in average predicted and observed risk = 0.010309001142024987
number samples = 248
accuracy = 0.887097
precision class 0 = 0.90795
precision class 1 = 0.333333
recall class 0 = 0.973094
recall class 1 = 0.12
false negative rate = 0.88
false positive rate = 0.026906
positive prediction rate = 0.03629
AUC of ROC = 0.721794
AUC of PRC = 0.214704
min(+P, Se) = 0.28

-------------------------------

confusion matrix:
[[470  11]
 [ 50  32]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.14201900362968445
difference in average predicted and observed risk = -0.0036289963703155514
number samples = 563
accuracy = 0.891652
precision class 0 = 0.903846
precision class 1 = 0.744186
recall class 0 = 0.977131
recall class 1 = 0.390244
false negative rate = 0.609756
false positive rate = 0.022869
positive prediction rate = 0.076377
AUC of ROC = 0.820395
AUC of PRC = 0.597842
min(+P, Se) = 0.527473

-------------------------------

confusion matrix:
[[643  12]
 [ 59  20]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.11423499882221222
difference in average predicted and observed risk = 0.006605998822212217
number samples = 734
accuracy = 0.90327
precision class 0 = 0.915954
precision class 1 = 0.625
recall class 0 = 0.981679
recall class 1 = 0.253165
false negative rate = 0.746835
false positive rate = 0.018321
positive prediction rate = 0.043597
AUC of ROC = 0.794048
AUC of PRC = 0.423829
min(+P, Se) = 0.436782

-------------------------------

confusion matrix:
[[4098   59]
 [ 374   97]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.10710900276899338
difference in average predicted and observed risk = 0.005337002768993376
number samples = 4628
accuracy = 0.906439
precision class 0 = 0.916369
precision class 1 = 0.621795
recall class 0 = 0.985807
recall class 1 = 0.205945
false negative rate = 0.794055
false positive rate = 0.014193
positive prediction rate = 0.033708
AUC of ROC = 0.783283
AUC of PRC = 0.402727
min(+P, Se) = 0.407643

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.09695199877023697
difference in average predicted and observed risk = 0.016782998770236965
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.851038
AUC of PRC = 0.412436
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[384   1]
 [ 41   6]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.10777200013399124
difference in average predicted and observed risk = -0.0010239998660087624
number samples = 432
accuracy = 0.902778
precision class 0 = 0.903529
precision class 1 = 0.857143
recall class 0 = 0.997403
recall class 1 = 0.12766
false negative rate = 0.87234
false positive rate = 0.002597
positive prediction rate = 0.016204
AUC of ROC = 0.783863
AUC of PRC = 0.438024
min(+P, Se) = 0.425532

-------------------------------

confusion matrix:
[[103   2]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.12597499787807465
difference in average predicted and observed risk = 0.015805997878074643
number samples = 118
accuracy = 0.915254
precision class 0 = 0.927928
precision class 1 = 0.714286
recall class 0 = 0.980952
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.019048
positive prediction rate = 0.059322
AUC of ROC = 0.913553
AUC of PRC = 0.550434
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.15514299273490906
difference in average predicted and observed risk = 0.02180999273490905
number samples = 30
accuracy = 0.966667
precision class 0 = 0.962963
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.0
positive prediction rate = 0.1
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[295   5]
 [ 35   4]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.11744199693202972
difference in average predicted and observed risk = 0.0023979969320297306
number samples = 339
accuracy = 0.882006
precision class 0 = 0.893939
precision class 1 = 0.444444
recall class 0 = 0.983333
recall class 1 = 0.102564
false negative rate = 0.897436
false positive rate = 0.016667
positive prediction rate = 0.026549
AUC of ROC = 0.805385
AUC of PRC = 0.361138
min(+P, Se) = 0.475

-------------------------------

confusion matrix:
[[433   1]
 [ 30  14]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.10301599651575089
difference in average predicted and observed risk = 0.010965996515750878
number samples = 478
accuracy = 0.935146
precision class 0 = 0.935205
precision class 1 = 0.933333
recall class 0 = 0.997696
recall class 1 = 0.318182
false negative rate = 0.681818
false positive rate = 0.002304
positive prediction rate = 0.031381
AUC of ROC = 0.850388
AUC of PRC = 0.582662
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[387   1]
 [ 31   7]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.09337799996137619
difference in average predicted and observed risk = 0.004175999961376187
number samples = 426
accuracy = 0.924883
precision class 0 = 0.925837
precision class 1 = 0.875
recall class 0 = 0.997423
recall class 1 = 0.184211
false negative rate = 0.815789
false positive rate = 0.002577
positive prediction rate = 0.018779
AUC of ROC = 0.831389
AUC of PRC = 0.46212
min(+P, Se) = 0.425

-------------------------------

confusion matrix:
[[89  1]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.13055600225925446
difference in average predicted and observed risk = 0.012909002259254454
number samples = 102
accuracy = 0.911765
precision class 0 = 0.917526
precision class 1 = 0.8
recall class 0 = 0.988889
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.011111
positive prediction rate = 0.04902
AUC of ROC = 0.940741
AUC of PRC = 0.719897
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[111   2]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.11755300313234329
difference in average predicted and observed risk = 0.028843003132343295
number samples = 124
accuracy = 0.895161
precision class 0 = 0.909836
precision class 1 = 0.0
recall class 0 = 0.982301
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.017699
positive prediction rate = 0.016129
AUC of ROC = 0.804505
AUC of PRC = 0.271437
min(+P, Se) = 0.357143

-------------------------------

confusion matrix:
[[106   2]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.12300500273704529
difference in average predicted and observed risk = -0.0266009972629547
number samples = 127
accuracy = 0.88189
precision class 0 = 0.890756
precision class 1 = 0.75
recall class 0 = 0.981481
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.018519
positive prediction rate = 0.062992
AUC of ROC = 0.79922
AUC of PRC = 0.579999
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.15160800516605377
difference in average predicted and observed risk = 0.07266100516605377
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.914286
AUC of PRC = 0.538889
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[728   6]
 [ 65  18]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.1090020015835762
difference in average predicted and observed risk = 0.007411001583576202
number samples = 817
accuracy = 0.913097
precision class 0 = 0.918033
precision class 1 = 0.75
recall class 0 = 0.991826
recall class 1 = 0.216867
false negative rate = 0.783133
false positive rate = 0.008174
positive prediction rate = 0.029376
AUC of ROC = 0.832803
AUC of PRC = 0.491215
min(+P, Se) = 0.481928

-------------------------------

Epoch 00022: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch22.state
Epoch 23/100
 - 302s - loss: 0.2854 - val_loss: 0.2656

==>predicting on train



confusion matrix:
[[2135   20]
 [ 210   45]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.13221000134944916
difference in average predicted and observed risk = 0.026401001349449157
number samples = 2410
accuracy = 0.904564
precision class 0 = 0.910448
precision class 1 = 0.692308
recall class 0 = 0.990719
recall class 1 = 0.176471
false negative rate = 0.823529
false positive rate = 0.009281
positive prediction rate = 0.026971
AUC of ROC = 0.774764
AUC of PRC = 0.396546
min(+P, Se) = 0.396078

-------------------------------

confusion matrix:
[[1166   13]
 [ 101   17]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.12545600533485413
difference in average predicted and observed risk = 0.03447700533485412
number samples = 1297
accuracy = 0.912105
precision class 0 = 0.920284
precision class 1 = 0.566667
recall class 0 = 0.988974
recall class 1 = 0.144068
false negative rate = 0.855932
false positive rate = 0.011026
positive prediction rate = 0.02313
AUC of ROC = 0.786051
AUC of PRC = 0.342138
min(+P, Se) = 0.393443

-------------------------------

confusion matrix:
[[644  12]
 [ 59  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.13586899638175964
difference in average predicted and observed risk = 0.03449899638175964
number samples = 730
accuracy = 0.90274
precision class 0 = 0.916074
precision class 1 = 0.555556
recall class 0 = 0.981707
recall class 1 = 0.202703
false negative rate = 0.797297
false positive rate = 0.018293
positive prediction rate = 0.036986
AUC of ROC = 0.778181
AUC of PRC = 0.405324
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[166   1]
 [ 14  10]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.14449800550937653
difference in average predicted and observed risk = 0.018844005509376538
number samples = 191
accuracy = 0.921466
precision class 0 = 0.922222
precision class 1 = 0.909091
recall class 0 = 0.994012
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.005988
positive prediction rate = 0.057592
AUC of ROC = 0.840569
AUC of PRC = 0.692749
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2452   22]
 [ 213   42]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.1270429939031601
difference in average predicted and observed risk = 0.0336019939031601
number samples = 2729
accuracy = 0.913888
precision class 0 = 0.920075
precision class 1 = 0.65625
recall class 0 = 0.991108
recall class 1 = 0.164706
false negative rate = 0.835294
false positive rate = 0.008892
positive prediction rate = 0.023452
AUC of ROC = 0.767754
AUC of PRC = 0.349254
min(+P, Se) = 0.380392

-------------------------------

confusion matrix:
[[1659   24]
 [ 171   45]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.13766400516033173
difference in average predicted and observed risk = 0.023920005160331728
number samples = 1899
accuracy = 0.897314
precision class 0 = 0.906557
precision class 1 = 0.652174
recall class 0 = 0.98574
recall class 1 = 0.208333
false negative rate = 0.791667
false positive rate = 0.01426
positive prediction rate = 0.036335
AUC of ROC = 0.800117
AUC of PRC = 0.461114
min(+P, Se) = 0.456221

-------------------------------

confusion matrix:
[[542   7]
 [ 69   8]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.15356600284576416
difference in average predicted and observed risk = 0.03056300284576416
number samples = 626
accuracy = 0.878594
precision class 0 = 0.88707
precision class 1 = 0.533333
recall class 0 = 0.98725
recall class 1 = 0.103896
false negative rate = 0.896104
false positive rate = 0.01275
positive prediction rate = 0.023962
AUC of ROC = 0.766305
AUC of PRC = 0.383853
min(+P, Se) = 0.420455

-------------------------------

confusion matrix:
[[2233   16]
 [ 178   30]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.11608400195837021
difference in average predicted and observed risk = 0.031428001958370214
number samples = 2457
accuracy = 0.921042
precision class 0 = 0.926172
precision class 1 = 0.652174
recall class 0 = 0.992886
recall class 1 = 0.144231
false negative rate = 0.855769
false positive rate = 0.007114
positive prediction rate = 0.018722
AUC of ROC = 0.76943
AUC of PRC = 0.338119
min(+P, Se) = 0.336493

-------------------------------

confusion matrix:
[[218   5]
 [ 24   1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.14047999680042267
difference in average predicted and observed risk = 0.03967399680042266
number samples = 248
accuracy = 0.883065
precision class 0 = 0.900826
precision class 1 = 0.166667
recall class 0 = 0.977578
recall class 1 = 0.04
false negative rate = 0.96
false positive rate = 0.022422
positive prediction rate = 0.024194
AUC of ROC = 0.698475
AUC of PRC = 0.205548
min(+P, Se) = 0.28

-------------------------------

confusion matrix:
[[473   8]
 [ 52  30]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.1615840047597885
difference in average predicted and observed risk = 0.015936004759788513
number samples = 563
accuracy = 0.893428
precision class 0 = 0.900952
precision class 1 = 0.789474
recall class 0 = 0.983368
recall class 1 = 0.365854
false negative rate = 0.634146
false positive rate = 0.016632
positive prediction rate = 0.067496
AUC of ROC = 0.821434
AUC of PRC = 0.601051
min(+P, Se) = 0.539326

-------------------------------

confusion matrix:
[[645  10]
 [ 61  18]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.13755199313163757
difference in average predicted and observed risk = 0.02992299313163757
number samples = 734
accuracy = 0.90327
precision class 0 = 0.913598
precision class 1 = 0.642857
recall class 0 = 0.984733
recall class 1 = 0.227848
false negative rate = 0.772152
false positive rate = 0.015267
positive prediction rate = 0.038147
AUC of ROC = 0.797507
AUC of PRC = 0.423525
min(+P, Se) = 0.455696

-------------------------------

confusion matrix:
[[4111   46]
 [ 384   87]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.13140100240707397
difference in average predicted and observed risk = 0.029629002407073973
number samples = 4628
accuracy = 0.907087
precision class 0 = 0.914572
precision class 1 = 0.654135
recall class 0 = 0.988934
recall class 1 = 0.184713
false negative rate = 0.815287
false positive rate = 0.011066
positive prediction rate = 0.028738
AUC of ROC = 0.782928
AUC of PRC = 0.402905
min(+P, Se) = 0.414226

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 16   3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.12360899895429611
difference in average predicted and observed risk = 0.04343999895429611
number samples = 237
accuracy = 0.919831
precision class 0 = 0.930736
precision class 1 = 0.5
recall class 0 = 0.986239
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.013761
positive prediction rate = 0.025316
AUC of ROC = 0.835587
AUC of PRC = 0.399941
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[385   0]
 [ 42   5]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.13168899714946747
difference in average predicted and observed risk = 0.022892997149467464
number samples = 432
accuracy = 0.902778
precision class 0 = 0.901639
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.106383
false negative rate = 0.893617
false positive rate = 0.0
positive prediction rate = 0.011574
AUC of ROC = 0.776126
AUC of PRC = 0.448341
min(+P, Se) = 0.425532

-------------------------------

confusion matrix:
[[104   1]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.14977100491523743
difference in average predicted and observed risk = 0.039602004915237424
number samples = 118
accuracy = 0.923729
precision class 0 = 0.928571
precision class 1 = 0.833333
recall class 0 = 0.990476
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.009524
positive prediction rate = 0.050847
AUC of ROC = 0.915018
AUC of PRC = 0.619794
min(+P, Se) = 0.647059

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.16609199345111847
difference in average predicted and observed risk = 0.03275899345111846
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[297   3]
 [ 35   4]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.13997900485992432
difference in average predicted and observed risk = 0.024935004859924323
number samples = 339
accuracy = 0.887906
precision class 0 = 0.894578
precision class 1 = 0.571429
recall class 0 = 0.99
recall class 1 = 0.102564
false negative rate = 0.897436
false positive rate = 0.01
positive prediction rate = 0.020649
AUC of ROC = 0.791795
AUC of PRC = 0.379085
min(+P, Se) = 0.431818

-------------------------------

confusion matrix:
[[433   1]
 [ 33  11]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.12842699885368347
difference in average predicted and observed risk = 0.036376998853683465
number samples = 478
accuracy = 0.92887
precision class 0 = 0.929185
precision class 1 = 0.916667
recall class 0 = 0.997696
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.002304
positive prediction rate = 0.025105
AUC of ROC = 0.847822
AUC of PRC = 0.581489
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 33   5]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.11676999926567078
difference in average predicted and observed risk = 0.027567999265670773
number samples = 426
accuracy = 0.922535
precision class 0 = 0.921615
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.131579
false negative rate = 0.868421
false positive rate = 0.0
positive prediction rate = 0.011737
AUC of ROC = 0.825285
AUC of PRC = 0.460626
min(+P, Se) = 0.447368

-------------------------------

confusion matrix:
[[89  1]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.1494629979133606
difference in average predicted and observed risk = 0.031815997913360594
number samples = 102
accuracy = 0.911765
precision class 0 = 0.917526
precision class 1 = 0.8
recall class 0 = 0.988889
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.011111
positive prediction rate = 0.04902
AUC of ROC = 0.941667
AUC of PRC = 0.73482
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.14922399818897247
difference in average predicted and observed risk = 0.060513998188972476
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.798069
AUC of PRC = 0.285361
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[106   2]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.1465660035610199
difference in average predicted and observed risk = -0.0030399964389800915
number samples = 127
accuracy = 0.88189
precision class 0 = 0.890756
precision class 1 = 0.75
recall class 0 = 0.981481
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.018519
positive prediction rate = 0.062992
AUC of ROC = 0.789474
AUC of PRC = 0.566106
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.1772100031375885
difference in average predicted and observed risk = 0.0982630031375885
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.914286
AUC of PRC = 0.532341
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[730   4]
 [ 68  15]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.13322000205516815
difference in average predicted and observed risk = 0.03162900205516815
number samples = 817
accuracy = 0.911873
precision class 0 = 0.914787
precision class 1 = 0.789474
recall class 0 = 0.99455
recall class 1 = 0.180723
false negative rate = 0.819277
false positive rate = 0.00545
positive prediction rate = 0.023256
AUC of ROC = 0.825318
AUC of PRC = 0.493355
min(+P, Se) = 0.5

-------------------------------

Epoch 00023: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch23.state
Epoch 24/100
 - 300s - loss: 0.2823 - val_loss: 0.2534

==>predicting on train



confusion matrix:
[[2129   26]
 [ 204   51]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.10031399875879288
difference in average predicted and observed risk = -0.005495001241207123
number samples = 2410
accuracy = 0.904564
precision class 0 = 0.912559
precision class 1 = 0.662338
recall class 0 = 0.987935
recall class 1 = 0.2
false negative rate = 0.8
false positive rate = 0.012065
positive prediction rate = 0.03195
AUC of ROC = 0.769306
AUC of PRC = 0.392177
min(+P, Se) = 0.396887

-------------------------------

confusion matrix:
[[1157   22]
 [  96   22]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.09591499716043472
difference in average predicted and observed risk = 0.004935997160434719
number samples = 1297
accuracy = 0.909021
precision class 0 = 0.923384
precision class 1 = 0.5
recall class 0 = 0.98134
recall class 1 = 0.186441
false negative rate = 0.813559
false positive rate = 0.01866
positive prediction rate = 0.033924
AUC of ROC = 0.783507
AUC of PRC = 0.322341
min(+P, Se) = 0.372881

-------------------------------

confusion matrix:
[[638  18]
 [ 57  17]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.10781800001859665
difference in average predicted and observed risk = 0.006448000018596647
number samples = 730
accuracy = 0.89726
precision class 0 = 0.917986
precision class 1 = 0.485714
recall class 0 = 0.972561
recall class 1 = 0.22973
false negative rate = 0.77027
false positive rate = 0.027439
positive prediction rate = 0.047945
AUC of ROC = 0.77849
AUC of PRC = 0.408468
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[165   2]
 [ 13  11]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.12082599848508835
difference in average predicted and observed risk = -0.0048280015149116395
number samples = 191
accuracy = 0.921466
precision class 0 = 0.926966
precision class 1 = 0.846154
recall class 0 = 0.988024
recall class 1 = 0.458333
false negative rate = 0.541667
false positive rate = 0.011976
positive prediction rate = 0.068063
AUC of ROC = 0.840569
AUC of PRC = 0.70189
min(+P, Se) = 0.68

-------------------------------

confusion matrix:
[[2437   37]
 [ 203   52]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.0957150012254715
difference in average predicted and observed risk = 0.0022740012254715003
number samples = 2729
accuracy = 0.912056
precision class 0 = 0.923106
precision class 1 = 0.58427
recall class 0 = 0.985044
recall class 1 = 0.203922
false negative rate = 0.796078
false positive rate = 0.014956
positive prediction rate = 0.032613
AUC of ROC = 0.765766
AUC of PRC = 0.346979
min(+P, Se) = 0.368627

-------------------------------

confusion matrix:
[[1652   31]
 [ 167   49]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.10886500030755997
difference in average predicted and observed risk = -0.004878999692440031
number samples = 1899
accuracy = 0.895735
precision class 0 = 0.908191
precision class 1 = 0.6125
recall class 0 = 0.98158
recall class 1 = 0.226852
false negative rate = 0.773148
false positive rate = 0.018419
positive prediction rate = 0.042127
AUC of ROC = 0.795155
AUC of PRC = 0.456531
min(+P, Se) = 0.444954

-------------------------------

confusion matrix:
[[538  11]
 [ 64  13]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.12271899729967117
difference in average predicted and observed risk = -0.00028400270032882813
number samples = 626
accuracy = 0.880192
precision class 0 = 0.893688
precision class 1 = 0.541667
recall class 0 = 0.979964
recall class 1 = 0.168831
false negative rate = 0.831169
false positive rate = 0.020036
positive prediction rate = 0.038339
AUC of ROC = 0.765169
AUC of PRC = 0.382758
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[2225   24]
 [ 176   32]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08403299748897552
difference in average predicted and observed risk = -0.0006230025110244702
number samples = 2457
accuracy = 0.9186
precision class 0 = 0.926697
precision class 1 = 0.571429
recall class 0 = 0.989329
recall class 1 = 0.153846
false negative rate = 0.846154
false positive rate = 0.010671
positive prediction rate = 0.022792
AUC of ROC = 0.766845
AUC of PRC = 0.337444
min(+P, Se) = 0.317536

-------------------------------

confusion matrix:
[[217   6]
 [ 21   4]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.10977499932050705
difference in average predicted and observed risk = 0.008968999320507043
number samples = 248
accuracy = 0.891129
precision class 0 = 0.911765
precision class 1 = 0.4
recall class 0 = 0.973094
recall class 1 = 0.16
false negative rate = 0.84
false positive rate = 0.026906
positive prediction rate = 0.040323
AUC of ROC = 0.688969
AUC of PRC = 0.202799
min(+P, Se) = 0.28

-------------------------------

confusion matrix:
[[469  12]
 [ 50  32]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.13606899976730347
difference in average predicted and observed risk = -0.009579000232696533
number samples = 563
accuracy = 0.889876
precision class 0 = 0.903661
precision class 1 = 0.727273
recall class 0 = 0.975052
recall class 1 = 0.390244
false negative rate = 0.609756
false positive rate = 0.024948
positive prediction rate = 0.078153
AUC of ROC = 0.822119
AUC of PRC = 0.596279
min(+P, Se) = 0.52439

-------------------------------

confusion matrix:
[[640  15]
 [ 59  20]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.11011199653148651
difference in average predicted and observed risk = 0.002482996531486509
number samples = 734
accuracy = 0.899183
precision class 0 = 0.915594
precision class 1 = 0.571429
recall class 0 = 0.977099
recall class 1 = 0.253165
false negative rate = 0.746835
false positive rate = 0.022901
positive prediction rate = 0.047684
AUC of ROC = 0.791265
AUC of PRC = 0.404969
min(+P, Se) = 0.443038

-------------------------------

confusion matrix:
[[4089   68]
 [ 370  101]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.10111100226640701
difference in average predicted and observed risk = -0.0006609977335929884
number samples = 4628
accuracy = 0.905359
precision class 0 = 0.917022
precision class 1 = 0.597633
recall class 0 = 0.983642
recall class 1 = 0.214437
false negative rate = 0.785563
false positive rate = 0.016358
positive prediction rate = 0.036517
AUC of ROC = 0.77961
AUC of PRC = 0.398555
min(+P, Se) = 0.407643

-------------------------------

==>predicting on validation



confusion matrix:
[[214   4]
 [ 14   5]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.09413500130176544
difference in average predicted and observed risk = 0.013966001301765438
number samples = 237
accuracy = 0.924051
precision class 0 = 0.938596
precision class 1 = 0.555556
recall class 0 = 0.981651
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.018349
positive prediction rate = 0.037975
AUC of ROC = 0.831
AUC of PRC = 0.375504
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[384   1]
 [ 41   6]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.09799300134181976
difference in average predicted and observed risk = -0.01080299865818024
number samples = 432
accuracy = 0.902778
precision class 0 = 0.903529
precision class 1 = 0.857143
recall class 0 = 0.997403
recall class 1 = 0.12766
false negative rate = 0.87234
false positive rate = 0.002597
positive prediction rate = 0.016204
AUC of ROC = 0.78425
AUC of PRC = 0.433492
min(+P, Se) = 0.425532

-------------------------------

confusion matrix:
[[102   3]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.12358400225639343
difference in average predicted and observed risk = 0.01341500225639343
number samples = 118
accuracy = 0.90678
precision class 0 = 0.927273
precision class 1 = 0.625
recall class 0 = 0.971429
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.028571
positive prediction rate = 0.067797
AUC of ROC = 0.919414
AUC of PRC = 0.622649
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[26  0]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.13889800012111664
difference in average predicted and observed risk = 0.005565000121116631
number samples = 30
accuracy = 0.966667
precision class 0 = 0.962963
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.0
positive prediction rate = 0.1
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[295   5]
 [ 34   5]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.11056099832057953
difference in average predicted and observed risk = -0.004483001679420465
number samples = 339
accuracy = 0.884956
precision class 0 = 0.896657
precision class 1 = 0.5
recall class 0 = 0.983333
recall class 1 = 0.128205
false negative rate = 0.871795
false positive rate = 0.016667
positive prediction rate = 0.029499
AUC of ROC = 0.791026
AUC of PRC = 0.368785
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[431   3]
 [ 30  14]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.09605100005865097
difference in average predicted and observed risk = 0.004001000058650964
number samples = 478
accuracy = 0.930962
precision class 0 = 0.934924
precision class 1 = 0.823529
recall class 0 = 0.993088
recall class 1 = 0.318182
false negative rate = 0.681818
false positive rate = 0.006912
positive prediction rate = 0.035565
AUC of ROC = 0.855415
AUC of PRC = 0.567733
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[386   2]
 [ 31   7]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08423200249671936
difference in average predicted and observed risk = -0.004969997503280643
number samples = 426
accuracy = 0.922535
precision class 0 = 0.925659
precision class 1 = 0.777778
recall class 0 = 0.994845
recall class 1 = 0.184211
false negative rate = 0.815789
false positive rate = 0.005155
positive prediction rate = 0.021127
AUC of ROC = 0.836001
AUC of PRC = 0.452299
min(+P, Se) = 0.410256

-------------------------------

confusion matrix:
[[88  2]
 [ 7  5]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.1247830018401146
difference in average predicted and observed risk = 0.007136001840114592
number samples = 102
accuracy = 0.911765
precision class 0 = 0.926316
precision class 1 = 0.714286
recall class 0 = 0.977778
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.022222
positive prediction rate = 0.068627
AUC of ROC = 0.942593
AUC of PRC = 0.714328
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[111   2]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.11509700119495392
difference in average predicted and observed risk = 0.02638700119495392
number samples = 124
accuracy = 0.895161
precision class 0 = 0.909836
precision class 1 = 0.0
recall class 0 = 0.982301
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.017699
positive prediction rate = 0.016129
AUC of ROC = 0.793242
AUC of PRC = 0.262504
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[106   2]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.11697500199079514
difference in average predicted and observed risk = -0.032630998009204853
number samples = 127
accuracy = 0.88189
precision class 0 = 0.890756
precision class 1 = 0.75
recall class 0 = 0.981481
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.018519
positive prediction rate = 0.062992
AUC of ROC = 0.794347
AUC of PRC = 0.561346
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.14879900217056274
difference in average predicted and observed risk = 0.06985200217056274
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.92381
AUC of PRC = 0.549206
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[726   8]
 [ 64  19]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.10207200050354004
difference in average predicted and observed risk = 0.0004810005035400383
number samples = 817
accuracy = 0.911873
precision class 0 = 0.918987
precision class 1 = 0.703704
recall class 0 = 0.989101
recall class 1 = 0.228916
false negative rate = 0.771084
false positive rate = 0.010899
positive prediction rate = 0.033048
AUC of ROC = 0.828781
AUC of PRC = 0.476724
min(+P, Se) = 0.506024

-------------------------------

Epoch 00024: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch24.state
Epoch 25/100
 - 300s - loss: 0.2821 - val_loss: 0.2488

==>predicting on train



confusion matrix:
[[2126   29]
 [ 200   55]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.09567099809646606
difference in average predicted and observed risk = -0.010138001903533936
number samples = 2410
accuracy = 0.904979
precision class 0 = 0.914015
precision class 1 = 0.654762
recall class 0 = 0.986543
recall class 1 = 0.215686
false negative rate = 0.784314
false positive rate = 0.013457
positive prediction rate = 0.034855
AUC of ROC = 0.792057
AUC of PRC = 0.400406
min(+P, Se) = 0.407843

-------------------------------

confusion matrix:
[[1152   27]
 [  93   25]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.09222900122404099
difference in average predicted and observed risk = 0.0012500012240409808
number samples = 1297
accuracy = 0.907479
precision class 0 = 0.925301
precision class 1 = 0.480769
recall class 0 = 0.977099
recall class 1 = 0.211864
false negative rate = 0.788136
false positive rate = 0.022901
positive prediction rate = 0.040093
AUC of ROC = 0.7995
AUC of PRC = 0.326492
min(+P, Se) = 0.364407

-------------------------------

confusion matrix:
[[636  20]
 [ 55  19]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.10761100053787231
difference in average predicted and observed risk = 0.006241000537872313
number samples = 730
accuracy = 0.89726
precision class 0 = 0.920405
precision class 1 = 0.487179
recall class 0 = 0.969512
recall class 1 = 0.256757
false negative rate = 0.743243
false positive rate = 0.030488
positive prediction rate = 0.053425
AUC of ROC = 0.784834
AUC of PRC = 0.400827
min(+P, Se) = 0.426667

-------------------------------

confusion matrix:
[[165   2]
 [ 13  11]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.12191899865865707
difference in average predicted and observed risk = -0.003735001341342914
number samples = 191
accuracy = 0.921466
precision class 0 = 0.926966
precision class 1 = 0.846154
recall class 0 = 0.988024
recall class 1 = 0.458333
false negative rate = 0.541667
false positive rate = 0.011976
positive prediction rate = 0.068063
AUC of ROC = 0.856038
AUC of PRC = 0.692823
min(+P, Se) = 0.708333

-------------------------------

confusion matrix:
[[2428   46]
 [ 197   58]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.093470998108387
difference in average predicted and observed risk = 2.9998108386997124e-05
number samples = 2729
accuracy = 0.910956
precision class 0 = 0.924952
precision class 1 = 0.557692
recall class 0 = 0.981407
recall class 1 = 0.227451
false negative rate = 0.772549
false positive rate = 0.018593
positive prediction rate = 0.038109
AUC of ROC = 0.783909
AUC of PRC = 0.346037
min(+P, Se) = 0.368217

-------------------------------

confusion matrix:
[[1651   32]
 [ 164   52]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.10371199995279312
difference in average predicted and observed risk = -0.010032000047206877
number samples = 1899
accuracy = 0.896788
precision class 0 = 0.909642
precision class 1 = 0.619048
recall class 0 = 0.980986
recall class 1 = 0.240741
false negative rate = 0.759259
false positive rate = 0.019014
positive prediction rate = 0.044234
AUC of ROC = 0.811544
AUC of PRC = 0.463533
min(+P, Se) = 0.449782

-------------------------------

confusion matrix:
[[536  13]
 [ 60  17]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.11372999846935272
difference in average predicted and observed risk = -0.009273001530647279
number samples = 626
accuracy = 0.883387
precision class 0 = 0.899329
precision class 1 = 0.566667
recall class 0 = 0.976321
recall class 1 = 0.220779
false negative rate = 0.779221
false positive rate = 0.023679
positive prediction rate = 0.047923
AUC of ROC = 0.782154
AUC of PRC = 0.361315
min(+P, Se) = 0.406977

-------------------------------

confusion matrix:
[[2220   29]
 [ 173   35]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08091399818658829
difference in average predicted and observed risk = -0.003742001813411708
number samples = 2457
accuracy = 0.917786
precision class 0 = 0.927706
precision class 1 = 0.546875
recall class 0 = 0.987105
recall class 1 = 0.168269
false negative rate = 0.831731
false positive rate = 0.012895
positive prediction rate = 0.026048
AUC of ROC = 0.786651
AUC of PRC = 0.343382
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[215   8]
 [ 21   4]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.10624700039625168
difference in average predicted and observed risk = 0.005441000396251672
number samples = 248
accuracy = 0.883065
precision class 0 = 0.911017
precision class 1 = 0.333333
recall class 0 = 0.964126
recall class 1 = 0.16
false negative rate = 0.84
false positive rate = 0.035874
positive prediction rate = 0.048387
AUC of ROC = 0.736323
AUC of PRC = 0.218832
min(+P, Se) = 0.28

-------------------------------

confusion matrix:
[[470  11]
 [ 49  33]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.13513299822807312
difference in average predicted and observed risk = -0.01051500177192688
number samples = 563
accuracy = 0.893428
precision class 0 = 0.905588
precision class 1 = 0.75
recall class 0 = 0.977131
recall class 1 = 0.402439
false negative rate = 0.597561
false positive rate = 0.022869
positive prediction rate = 0.078153
AUC of ROC = 0.8369
AUC of PRC = 0.603325
min(+P, Se) = 0.52809

-------------------------------

confusion matrix:
[[638  17]
 [ 58  21]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.10844799876213074
difference in average predicted and observed risk = 0.0008189987621307349
number samples = 734
accuracy = 0.89782
precision class 0 = 0.916667
precision class 1 = 0.552632
recall class 0 = 0.974046
recall class 1 = 0.265823
false negative rate = 0.734177
false positive rate = 0.025954
positive prediction rate = 0.051771
AUC of ROC = 0.799459
AUC of PRC = 0.413874
min(+P, Se) = 0.426829

-------------------------------

confusion matrix:
[[4079   78]
 [ 361  110]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09767299890518188
difference in average predicted and observed risk = -0.004099001094818117
number samples = 4628
accuracy = 0.905143
precision class 0 = 0.918694
precision class 1 = 0.585106
recall class 0 = 0.981236
recall class 1 = 0.233546
false negative rate = 0.766454
false positive rate = 0.018764
positive prediction rate = 0.040622
AUC of ROC = 0.796913
AUC of PRC = 0.40013
min(+P, Se) = 0.406571

-------------------------------

==>predicting on validation



confusion matrix:
[[214   4]
 [ 14   5]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.09089799970388412
difference in average predicted and observed risk = 0.01072899970388412
number samples = 237
accuracy = 0.924051
precision class 0 = 0.938596
precision class 1 = 0.555556
recall class 0 = 0.981651
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.018349
positive prediction rate = 0.037975
AUC of ROC = 0.855384
AUC of PRC = 0.3907
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[384   1]
 [ 41   6]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.09285300225019455
difference in average predicted and observed risk = -0.015942997749805454
number samples = 432
accuracy = 0.902778
precision class 0 = 0.903529
precision class 1 = 0.857143
recall class 0 = 0.997403
recall class 1 = 0.12766
false negative rate = 0.87234
false positive rate = 0.002597
positive prediction rate = 0.016204
AUC of ROC = 0.790495
AUC of PRC = 0.445641
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[102   3]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.12429200112819672
difference in average predicted and observed risk = 0.014123001128196713
number samples = 118
accuracy = 0.90678
precision class 0 = 0.927273
precision class 1 = 0.625
recall class 0 = 0.971429
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.028571
positive prediction rate = 0.067797
AUC of ROC = 0.917216
AUC of PRC = 0.554831
min(+P, Se) = 0.647059

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.1404930055141449
difference in average predicted and observed risk = 0.00716000551414489
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[295   5]
 [ 34   5]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.10597100108861923
difference in average predicted and observed risk = -0.009072998911380761
number samples = 339
accuracy = 0.884956
precision class 0 = 0.896657
precision class 1 = 0.5
recall class 0 = 0.983333
recall class 1 = 0.128205
false negative rate = 0.871795
false positive rate = 0.016667
positive prediction rate = 0.029499
AUC of ROC = 0.812735
AUC of PRC = 0.359701
min(+P, Se) = 0.44186

-------------------------------

confusion matrix:
[[431   3]
 [ 31  13]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.0933310016989708
difference in average predicted and observed risk = 0.0012810016989707879
number samples = 478
accuracy = 0.92887
precision class 0 = 0.9329
precision class 1 = 0.8125
recall class 0 = 0.993088
recall class 1 = 0.295455
false negative rate = 0.704545
false positive rate = 0.006912
positive prediction rate = 0.033473
AUC of ROC = 0.856043
AUC of PRC = 0.578787
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[386   2]
 [ 32   6]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08152200281620026
difference in average predicted and observed risk = -0.007679997183799747
number samples = 426
accuracy = 0.920188
precision class 0 = 0.923445
precision class 1 = 0.75
recall class 0 = 0.994845
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.005155
positive prediction rate = 0.018779
AUC of ROC = 0.839528
AUC of PRC = 0.470572
min(+P, Se) = 0.447368

-------------------------------

confusion matrix:
[[88  2]
 [ 7  5]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.12383600324392319
difference in average predicted and observed risk = 0.006189003243923186
number samples = 102
accuracy = 0.911765
precision class 0 = 0.926316
precision class 1 = 0.714286
recall class 0 = 0.977778
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.022222
positive prediction rate = 0.068627
AUC of ROC = 0.946296
AUC of PRC = 0.734319
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[111   2]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.10400799661874771
difference in average predicted and observed risk = 0.015297996618747714
number samples = 124
accuracy = 0.895161
precision class 0 = 0.909836
precision class 1 = 0.0
recall class 0 = 0.982301
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.017699
positive prediction rate = 0.016129
AUC of ROC = 0.806919
AUC of PRC = 0.265334
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[106   2]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.11576300114393234
difference in average predicted and observed risk = -0.033842998856067646
number samples = 127
accuracy = 0.88189
precision class 0 = 0.890756
precision class 1 = 0.75
recall class 0 = 0.981481
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.018519
positive prediction rate = 0.062992
AUC of ROC = 0.796784
AUC of PRC = 0.540666
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.14679500460624695
difference in average predicted and observed risk = 0.06784800460624694
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.92381
AUC of PRC = 0.549206
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[726   8]
 [ 65  18]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09857600182294846
difference in average predicted and observed risk = -0.003014998177051545
number samples = 817
accuracy = 0.910649
precision class 0 = 0.917826
precision class 1 = 0.692308
recall class 0 = 0.989101
recall class 1 = 0.216867
false negative rate = 0.783133
false positive rate = 0.010899
positive prediction rate = 0.031824
AUC of ROC = 0.838974
AUC of PRC = 0.482861
min(+P, Se) = 0.493976

-------------------------------

Epoch 00025: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch25.state
Epoch 26/100
 - 295s - loss: 0.2807 - val_loss: 0.2478

==>predicting on train



confusion matrix:
[[2138   17]
 [ 214   41]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.0783739984035492
difference in average predicted and observed risk = -0.027435001596450806
number samples = 2410
accuracy = 0.904149
precision class 0 = 0.909014
precision class 1 = 0.706897
recall class 0 = 0.992111
recall class 1 = 0.160784
false negative rate = 0.839216
false positive rate = 0.007889
positive prediction rate = 0.024066
AUC of ROC = 0.799556
AUC of PRC = 0.407472
min(+P, Se) = 0.396947

-------------------------------

confusion matrix:
[[1163   16]
 [ 101   17]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.0748789981007576
difference in average predicted and observed risk = -0.016100001899242405
number samples = 1297
accuracy = 0.909792
precision class 0 = 0.920095
precision class 1 = 0.515152
recall class 0 = 0.986429
recall class 1 = 0.144068
false negative rate = 0.855932
false positive rate = 0.013571
positive prediction rate = 0.025443
AUC of ROC = 0.812301
AUC of PRC = 0.344845
min(+P, Se) = 0.389831

-------------------------------

confusion matrix:
[[643  13]
 [ 60  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.08795499801635742
difference in average predicted and observed risk = -0.01341500198364258
number samples = 730
accuracy = 0.9
precision class 0 = 0.914652
precision class 1 = 0.518519
recall class 0 = 0.980183
recall class 1 = 0.189189
false negative rate = 0.810811
false positive rate = 0.019817
positive prediction rate = 0.036986
AUC of ROC = 0.787821
AUC of PRC = 0.396564
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[165   2]
 [ 14  10]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.09922699630260468
difference in average predicted and observed risk = -0.026427003697395313
number samples = 191
accuracy = 0.91623
precision class 0 = 0.921788
precision class 1 = 0.833333
recall class 0 = 0.988024
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.011976
positive prediction rate = 0.062827
AUC of ROC = 0.871257
AUC of PRC = 0.675654
min(+P, Se) = 0.64

-------------------------------

confusion matrix:
[[2444   30]
 [ 216   39]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07592999935150146
difference in average predicted and observed risk = -0.01751100064849853
number samples = 2729
accuracy = 0.909857
precision class 0 = 0.918797
precision class 1 = 0.565217
recall class 0 = 0.987874
recall class 1 = 0.152941
false negative rate = 0.847059
false positive rate = 0.012126
positive prediction rate = 0.025284
AUC of ROC = 0.794845
AUC of PRC = 0.353333
min(+P, Se) = 0.372093

-------------------------------

confusion matrix:
[[1665   18]
 [ 173   43]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.08527900278568268
difference in average predicted and observed risk = -0.02846499721431732
number samples = 1899
accuracy = 0.899421
precision class 0 = 0.905876
precision class 1 = 0.704918
recall class 0 = 0.989305
recall class 1 = 0.199074
false negative rate = 0.800926
false positive rate = 0.010695
positive prediction rate = 0.032122
AUC of ROC = 0.817379
AUC of PRC = 0.469485
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[542   7]
 [ 69   8]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.09216400235891342
difference in average predicted and observed risk = -0.03083899764108658
number samples = 626
accuracy = 0.878594
precision class 0 = 0.88707
precision class 1 = 0.533333
recall class 0 = 0.98725
recall class 1 = 0.103896
false negative rate = 0.896104
false positive rate = 0.01275
positive prediction rate = 0.023962
AUC of ROC = 0.795543
AUC of PRC = 0.373845
min(+P, Se) = 0.421687

-------------------------------

confusion matrix:
[[2233   16]
 [ 184   24]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.06556499749422073
difference in average predicted and observed risk = -0.01909100250577926
number samples = 2457
accuracy = 0.9186
precision class 0 = 0.923873
precision class 1 = 0.6
recall class 0 = 0.992886
recall class 1 = 0.115385
false negative rate = 0.884615
false positive rate = 0.007114
positive prediction rate = 0.01628
AUC of ROC = 0.792876
AUC of PRC = 0.345752
min(+P, Se) = 0.336538

-------------------------------

confusion matrix:
[[218   5]
 [ 23   2]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.08667699992656708
difference in average predicted and observed risk = -0.014129000073432929
number samples = 248
accuracy = 0.887097
precision class 0 = 0.904564
precision class 1 = 0.285714
recall class 0 = 0.977578
recall class 1 = 0.08
false negative rate = 0.92
false positive rate = 0.022422
positive prediction rate = 0.028226
AUC of ROC = 0.749955
AUC of PRC = 0.218417
min(+P, Se) = 0.28125

-------------------------------

confusion matrix:
[[472   9]
 [ 53  29]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.11170300096273422
difference in average predicted and observed risk = -0.03394499903726578
number samples = 563
accuracy = 0.889876
precision class 0 = 0.899048
precision class 1 = 0.763158
recall class 0 = 0.981289
recall class 1 = 0.353659
false negative rate = 0.646341
false positive rate = 0.018711
positive prediction rate = 0.067496
AUC of ROC = 0.841641
AUC of PRC = 0.604556
min(+P, Se) = 0.547619

-------------------------------

confusion matrix:
[[644  11]
 [ 60  19]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.08990100026130676
difference in average predicted and observed risk = -0.01772799973869324
number samples = 734
accuracy = 0.90327
precision class 0 = 0.914773
precision class 1 = 0.633333
recall class 0 = 0.983206
recall class 1 = 0.240506
false negative rate = 0.759494
false positive rate = 0.016794
positive prediction rate = 0.040872
AUC of ROC = 0.814707
AUC of PRC = 0.423985
min(+P, Se) = 0.455696

-------------------------------

confusion matrix:
[[4109   48]
 [ 389   82]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.07976599782705307
difference in average predicted and observed risk = -0.02200600217294693
number samples = 4628
accuracy = 0.905575
precision class 0 = 0.913517
precision class 1 = 0.630769
recall class 0 = 0.988453
recall class 1 = 0.174098
false negative rate = 0.825902
false positive rate = 0.011547
positive prediction rate = 0.02809
AUC of ROC = 0.805515
AUC of PRC = 0.405825
min(+P, Se) = 0.408034

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.07361499965190887
difference in average predicted and observed risk = -0.00655400034809113
number samples = 237
accuracy = 0.92827
precision class 0 = 0.935065
precision class 1 = 0.666667
recall class 0 = 0.990826
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.009174
positive prediction rate = 0.025316
AUC of ROC = 0.884838
AUC of PRC = 0.427921
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[385   0]
 [ 43   4]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.0761450007557869
difference in average predicted and observed risk = -0.03265099924421311
number samples = 432
accuracy = 0.900463
precision class 0 = 0.899533
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.085106
false negative rate = 0.914894
false positive rate = 0.0
positive prediction rate = 0.009259
AUC of ROC = 0.798176
AUC of PRC = 0.477664
min(+P, Se) = 0.446809

-------------------------------

confusion matrix:
[[104   1]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10355299711227417
difference in average predicted and observed risk = -0.006616002887725833
number samples = 118
accuracy = 0.923729
precision class 0 = 0.928571
precision class 1 = 0.833333
recall class 0 = 0.990476
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.009524
positive prediction rate = 0.050847
AUC of ROC = 0.911355
AUC of PRC = 0.553412
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11617399752140045
difference in average predicted and observed risk = -0.017159002478599555
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[298   2]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.08705099672079086
difference in average predicted and observed risk = -0.02799300327920913
number samples = 339
accuracy = 0.887906
precision class 0 = 0.892216
precision class 1 = 0.6
recall class 0 = 0.993333
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.006667
positive prediction rate = 0.014749
AUC of ROC = 0.820085
AUC of PRC = 0.388831
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[433   1]
 [ 32  12]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.07643499970436096
difference in average predicted and observed risk = -0.015615000295639045
number samples = 478
accuracy = 0.930962
precision class 0 = 0.931183
precision class 1 = 0.923077
recall class 0 = 0.997696
recall class 1 = 0.272727
false negative rate = 0.727273
false positive rate = 0.002304
positive prediction rate = 0.027197
AUC of ROC = 0.868297
AUC of PRC = 0.593337
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 33   5]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.06631699949502945
difference in average predicted and observed risk = -0.022885000504970554
number samples = 426
accuracy = 0.922535
precision class 0 = 0.921615
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.131579
false negative rate = 0.868421
false positive rate = 0.0
positive prediction rate = 0.011737
AUC of ROC = 0.856416
AUC of PRC = 0.491771
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.10252200067043304
difference in average predicted and observed risk = -0.015124999329566957
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.944444
AUC of PRC = 0.745326
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.08353699743747711
difference in average predicted and observed risk = -0.005173002562522885
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.823813
AUC of PRC = 0.297103
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[106   2]
 [ 14   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09776400029659271
difference in average predicted and observed risk = -0.05184199970340728
number samples = 127
accuracy = 0.874016
precision class 0 = 0.883333
precision class 1 = 0.714286
recall class 0 = 0.981481
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.018519
positive prediction rate = 0.055118
AUC of ROC = 0.795322
AUC of PRC = 0.548961
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.12007900327444077
difference in average predicted and observed risk = 0.04113200327444076
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.914286
AUC of PRC = 0.532341
min(+P, Se) = 0.375

-------------------------------

confusion matrix:
[[731   3]
 [ 68  15]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.08083999902009964
difference in average predicted and observed risk = -0.02075100097990036
number samples = 817
accuracy = 0.913097
precision class 0 = 0.914894
precision class 1 = 0.833333
recall class 0 = 0.995913
recall class 1 = 0.180723
false negative rate = 0.819277
false positive rate = 0.004087
positive prediction rate = 0.022032
AUC of ROC = 0.849283
AUC of PRC = 0.503733
min(+P, Se) = 0.511905

-------------------------------

Epoch 00026: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch26.state
Epoch 27/100
 - 299s - loss: 0.2807 - val_loss: 0.2487

==>predicting on train



confusion matrix:
[[2137   18]
 [ 214   41]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.10683900117874146
difference in average predicted and observed risk = 0.0010300011787414548
number samples = 2410
accuracy = 0.903734
precision class 0 = 0.908975
precision class 1 = 0.694915
recall class 0 = 0.991647
recall class 1 = 0.160784
false negative rate = 0.839216
false positive rate = 0.008353
positive prediction rate = 0.024481
AUC of ROC = 0.804211
AUC of PRC = 0.415864
min(+P, Se) = 0.427481

-------------------------------

confusion matrix:
[[1166   13]
 [ 101   17]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.10143700242042542
difference in average predicted and observed risk = 0.01045800242042541
number samples = 1297
accuracy = 0.912105
precision class 0 = 0.920284
precision class 1 = 0.566667
recall class 0 = 0.988974
recall class 1 = 0.144068
false negative rate = 0.855932
false positive rate = 0.011026
positive prediction rate = 0.02313
AUC of ROC = 0.810361
AUC of PRC = 0.344339
min(+P, Se) = 0.387097

-------------------------------

confusion matrix:
[[643  13]
 [ 59  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.11523500084877014
difference in average predicted and observed risk = 0.01386500084877014
number samples = 730
accuracy = 0.90137
precision class 0 = 0.915954
precision class 1 = 0.535714
recall class 0 = 0.980183
recall class 1 = 0.202703
false negative rate = 0.797297
false positive rate = 0.019817
positive prediction rate = 0.038356
AUC of ROC = 0.794187
AUC of PRC = 0.402299
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[165   2]
 [ 14  10]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.12069699913263321
difference in average predicted and observed risk = -0.004957000867366779
number samples = 191
accuracy = 0.91623
precision class 0 = 0.921788
precision class 1 = 0.833333
recall class 0 = 0.988024
recall class 1 = 0.416667
false negative rate = 0.583333
false positive rate = 0.011976
positive prediction rate = 0.062827
AUC of ROC = 0.860279
AUC of PRC = 0.681579
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2447   27]
 [ 215   40]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.10250099748373032
difference in average predicted and observed risk = 0.00905999748373032
number samples = 2729
accuracy = 0.911323
precision class 0 = 0.919234
precision class 1 = 0.597015
recall class 0 = 0.989087
recall class 1 = 0.156863
false negative rate = 0.843137
false positive rate = 0.010914
positive prediction rate = 0.024551
AUC of ROC = 0.797562
AUC of PRC = 0.358373
min(+P, Se) = 0.371094

-------------------------------

confusion matrix:
[[1664   19]
 [ 173   43]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.11400400102138519
difference in average predicted and observed risk = 0.000260001021385195
number samples = 1899
accuracy = 0.898894
precision class 0 = 0.905825
precision class 1 = 0.693548
recall class 0 = 0.988711
recall class 1 = 0.199074
false negative rate = 0.800926
false positive rate = 0.011289
positive prediction rate = 0.032649
AUC of ROC = 0.818553
AUC of PRC = 0.473908
min(+P, Se) = 0.463303

-------------------------------

confusion matrix:
[[544   5]
 [ 71   6]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.12489499896764755
difference in average predicted and observed risk = 0.0018919989676475513
number samples = 626
accuracy = 0.878594
precision class 0 = 0.884553
precision class 1 = 0.545455
recall class 0 = 0.990893
recall class 1 = 0.077922
false negative rate = 0.922078
false positive rate = 0.009107
positive prediction rate = 0.017572
AUC of ROC = 0.816005
AUC of PRC = 0.405702
min(+P, Se) = 0.430233

-------------------------------

confusion matrix:
[[2233   16]
 [ 179   29]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.09181799739599228
difference in average predicted and observed risk = 0.007161997395992284
number samples = 2457
accuracy = 0.920635
precision class 0 = 0.925788
precision class 1 = 0.644444
recall class 0 = 0.992886
recall class 1 = 0.139423
false negative rate = 0.860577
false positive rate = 0.007114
positive prediction rate = 0.018315
AUC of ROC = 0.792716
AUC of PRC = 0.358209
min(+P, Se) = 0.349776

-------------------------------

confusion matrix:
[[218   5]
 [ 23   2]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.12149199843406677
difference in average predicted and observed risk = 0.020685998434066766
number samples = 248
accuracy = 0.887097
precision class 0 = 0.904564
precision class 1 = 0.285714
recall class 0 = 0.977578
recall class 1 = 0.08
false negative rate = 0.92
false positive rate = 0.022422
positive prediction rate = 0.028226
AUC of ROC = 0.74565
AUC of PRC = 0.226699
min(+P, Se) = 0.314286

-------------------------------

confusion matrix:
[[473   8]
 [ 54  28]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.14000500738620758
difference in average predicted and observed risk = -0.005642992613792419
number samples = 563
accuracy = 0.889876
precision class 0 = 0.897533
precision class 1 = 0.777778
recall class 0 = 0.983368
recall class 1 = 0.341463
false negative rate = 0.658537
false positive rate = 0.016632
positive prediction rate = 0.063943
AUC of ROC = 0.844252
AUC of PRC = 0.598156
min(+P, Se) = 0.534091

-------------------------------

confusion matrix:
[[643  12]
 [ 61  18]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.11374200135469437
difference in average predicted and observed risk = 0.006113001354694364
number samples = 734
accuracy = 0.900545
precision class 0 = 0.913352
precision class 1 = 0.6
recall class 0 = 0.981679
recall class 1 = 0.227848
false negative rate = 0.772152
false positive rate = 0.018321
positive prediction rate = 0.040872
AUC of ROC = 0.809412
AUC of PRC = 0.42391
min(+P, Se) = 0.455696

-------------------------------

confusion matrix:
[[4111   46]
 [ 388   83]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.10722099989652634
difference in average predicted and observed risk = 0.005448999896526335
number samples = 4628
accuracy = 0.906223
precision class 0 = 0.913759
precision class 1 = 0.643411
recall class 0 = 0.988934
recall class 1 = 0.176221
false negative rate = 0.823779
false positive rate = 0.011066
positive prediction rate = 0.027874
AUC of ROC = 0.807759
AUC of PRC = 0.412019
min(+P, Se) = 0.413136

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.09987500309944153
difference in average predicted and observed risk = 0.019706003099441524
number samples = 237
accuracy = 0.92827
precision class 0 = 0.935065
precision class 1 = 0.666667
recall class 0 = 0.990826
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.009174
positive prediction rate = 0.025316
AUC of ROC = 0.878078
AUC of PRC = 0.427887
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[385   0]
 [ 44   3]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.10410299897193909
difference in average predicted and observed risk = -0.004693001028060917
number samples = 432
accuracy = 0.898148
precision class 0 = 0.897436
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.06383
false negative rate = 0.93617
false positive rate = 0.0
positive prediction rate = 0.006944
AUC of ROC = 0.814921
AUC of PRC = 0.469556
min(+P, Se) = 0.458333

-------------------------------

confusion matrix:
[[104   1]
 [  9   4]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.1298159956932068
difference in average predicted and observed risk = 0.019646995693206784
number samples = 118
accuracy = 0.915254
precision class 0 = 0.920354
precision class 1 = 0.8
recall class 0 = 0.990476
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.009524
positive prediction rate = 0.042373
AUC of ROC = 0.910623
AUC of PRC = 0.567758
min(+P, Se) = 0.6875

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.13264100253582
difference in average predicted and observed risk = -0.0006919974641799997
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[297   3]
 [ 37   2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.11539699882268906
difference in average predicted and observed risk = 0.0003529988226890629
number samples = 339
accuracy = 0.882006
precision class 0 = 0.889222
precision class 1 = 0.4
recall class 0 = 0.99
recall class 1 = 0.051282
false negative rate = 0.948718
false positive rate = 0.01
positive prediction rate = 0.014749
AUC of ROC = 0.819744
AUC of PRC = 0.37515
min(+P, Se) = 0.434783

-------------------------------

confusion matrix:
[[434   0]
 [ 33  11]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.10213600099086761
difference in average predicted and observed risk = 0.010086000990867608
number samples = 478
accuracy = 0.930962
precision class 0 = 0.929336
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.023013
AUC of ROC = 0.880917
AUC of PRC = 0.608065
min(+P, Se) = 0.568182

-------------------------------

confusion matrix:
[[388   0]
 [ 34   4]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.09160500019788742
difference in average predicted and observed risk = 0.002403000197887417
number samples = 426
accuracy = 0.920188
precision class 0 = 0.919431
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.0
positive prediction rate = 0.00939
AUC of ROC = 0.872084
AUC of PRC = 0.499283
min(+P, Se) = 0.475

-------------------------------

confusion matrix:
[[89  1]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.12861000001430511
difference in average predicted and observed risk = 0.010963000014305113
number samples = 102
accuracy = 0.911765
precision class 0 = 0.917526
precision class 1 = 0.8
recall class 0 = 0.988889
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.011111
positive prediction rate = 0.04902
AUC of ROC = 0.933333
AUC of PRC = 0.73497
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[113   0]
 [ 11   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.11692100018262863
difference in average predicted and observed risk = 0.028211000182628634
number samples = 124
accuracy = 0.91129
precision class 0 = 0.91129
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.818986
AUC of PRC = 0.258103
min(+P, Se) = 0.416667

-------------------------------

confusion matrix:
[[106   2]
 [ 15   4]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.12188400328159332
difference in average predicted and observed risk = -0.027721996718406666
number samples = 127
accuracy = 0.866142
precision class 0 = 0.876033
precision class 1 = 0.666667
recall class 0 = 0.981481
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.018519
positive prediction rate = 0.047244
AUC of ROC = 0.812378
AUC of PRC = 0.561589
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.15318499505519867
difference in average predicted and observed risk = 0.07423799505519867
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.87619
AUC of PRC = 0.494192
min(+P, Se) = 0.333333

-------------------------------

confusion matrix:
[[731   3]
 [ 70  13]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.10763800144195557
difference in average predicted and observed risk = 0.006047001441955566
number samples = 817
accuracy = 0.910649
precision class 0 = 0.912609
precision class 1 = 0.8125
recall class 0 = 0.995913
recall class 1 = 0.156627
false negative rate = 0.843373
false positive rate = 0.004087
positive prediction rate = 0.019584
AUC of ROC = 0.855504
AUC of PRC = 0.49935
min(+P, Se) = 0.494624

-------------------------------

Epoch 00027: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch27.state
Epoch 28/100
 - 298s - loss: 0.2806 - val_loss: 0.2569

==>predicting on train



confusion matrix:
[[2132   23]
 [ 203   52]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.11657200008630753
difference in average predicted and observed risk = 0.010763000086307525
number samples = 2410
accuracy = 0.906224
precision class 0 = 0.913062
precision class 1 = 0.693333
recall class 0 = 0.989327
recall class 1 = 0.203922
false negative rate = 0.796078
false positive rate = 0.010673
positive prediction rate = 0.03112
AUC of ROC = 0.776694
AUC of PRC = 0.396111
min(+P, Se) = 0.396078

-------------------------------

confusion matrix:
[[1158   21]
 [  96   22]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.11147700250148773
difference in average predicted and observed risk = 0.020498002501487728
number samples = 1297
accuracy = 0.909792
precision class 0 = 0.923445
precision class 1 = 0.511628
recall class 0 = 0.982188
recall class 1 = 0.186441
false negative rate = 0.813559
false positive rate = 0.017812
positive prediction rate = 0.033153
AUC of ROC = 0.79004
AUC of PRC = 0.343962
min(+P, Se) = 0.364407

-------------------------------

confusion matrix:
[[638  18]
 [ 57  17]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.12480500340461731
difference in average predicted and observed risk = 0.023435003404617308
number samples = 730
accuracy = 0.89726
precision class 0 = 0.917986
precision class 1 = 0.485714
recall class 0 = 0.972561
recall class 1 = 0.22973
false negative rate = 0.77027
false positive rate = 0.027439
positive prediction rate = 0.047945
AUC of ROC = 0.765285
AUC of PRC = 0.401497
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[165   2]
 [ 13  11]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.13689200580120087
difference in average predicted and observed risk = 0.011238005801200879
number samples = 191
accuracy = 0.921466
precision class 0 = 0.926966
precision class 1 = 0.846154
recall class 0 = 0.988024
recall class 1 = 0.458333
false negative rate = 0.541667
false positive rate = 0.011976
positive prediction rate = 0.068063
AUC of ROC = 0.846058
AUC of PRC = 0.689788
min(+P, Se) = 0.708333

-------------------------------

confusion matrix:
[[2438   36]
 [ 203   52]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.10937800258398056
difference in average predicted and observed risk = 0.015937002583980564
number samples = 2729
accuracy = 0.912422
precision class 0 = 0.923135
precision class 1 = 0.590909
recall class 0 = 0.985449
recall class 1 = 0.203922
false negative rate = 0.796078
false positive rate = 0.014551
positive prediction rate = 0.032246
AUC of ROC = 0.765926
AUC of PRC = 0.347466
min(+P, Se) = 0.372549

-------------------------------

confusion matrix:
[[1655   28]
 [ 166   50]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.12863999605178833
difference in average predicted and observed risk = 0.014895996051788332
number samples = 1899
accuracy = 0.897841
precision class 0 = 0.908841
precision class 1 = 0.641026
recall class 0 = 0.983363
recall class 1 = 0.231481
false negative rate = 0.768519
false positive rate = 0.016637
positive prediction rate = 0.041074
AUC of ROC = 0.802271
AUC of PRC = 0.462488
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[538  11]
 [ 65  12]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.13598500192165375
difference in average predicted and observed risk = 0.012982001921653746
number samples = 626
accuracy = 0.878594
precision class 0 = 0.892206
precision class 1 = 0.521739
recall class 0 = 0.979964
recall class 1 = 0.155844
false negative rate = 0.844156
false positive rate = 0.020036
positive prediction rate = 0.036741
AUC of ROC = 0.762212
AUC of PRC = 0.379137
min(+P, Se) = 0.39

-------------------------------

confusion matrix:
[[2225   24]
 [ 175   33]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.1012519970536232
difference in average predicted and observed risk = 0.016595997053623204
number samples = 2457
accuracy = 0.919007
precision class 0 = 0.927083
precision class 1 = 0.578947
recall class 0 = 0.989329
recall class 1 = 0.158654
false negative rate = 0.841346
false positive rate = 0.010671
positive prediction rate = 0.023199
AUC of ROC = 0.768241
AUC of PRC = 0.341583
min(+P, Se) = 0.338095

-------------------------------

confusion matrix:
[[217   6]
 [ 21   4]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.12498600035905838
difference in average predicted and observed risk = 0.024180000359058373
number samples = 248
accuracy = 0.891129
precision class 0 = 0.911765
precision class 1 = 0.4
recall class 0 = 0.973094
recall class 1 = 0.16
false negative rate = 0.84
false positive rate = 0.026906
positive prediction rate = 0.040323
AUC of ROC = 0.708341
AUC of PRC = 0.208156
min(+P, Se) = 0.28

-------------------------------

confusion matrix:
[[471  10]
 [ 49  33]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.1535940021276474
difference in average predicted and observed risk = 0.0079460021276474
number samples = 563
accuracy = 0.895204
precision class 0 = 0.905769
precision class 1 = 0.767442
recall class 0 = 0.97921
recall class 1 = 0.402439
false negative rate = 0.597561
false positive rate = 0.02079
positive prediction rate = 0.076377
AUC of ROC = 0.82184
AUC of PRC = 0.595784
min(+P, Se) = 0.542169

-------------------------------

confusion matrix:
[[642  13]
 [ 59  20]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.12453199923038483
difference in average predicted and observed risk = 0.016902999230384824
number samples = 734
accuracy = 0.901907
precision class 0 = 0.915835
precision class 1 = 0.606061
recall class 0 = 0.980153
recall class 1 = 0.253165
false negative rate = 0.746835
false positive rate = 0.019847
positive prediction rate = 0.044959
AUC of ROC = 0.799807
AUC of PRC = 0.417594
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[4093   64]
 [ 369  102]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.11728200316429138
difference in average predicted and observed risk = 0.01551000316429138
number samples = 4628
accuracy = 0.906439
precision class 0 = 0.917302
precision class 1 = 0.614458
recall class 0 = 0.984604
recall class 1 = 0.216561
false negative rate = 0.78344
false positive rate = 0.015396
positive prediction rate = 0.035869
AUC of ROC = 0.783014
AUC of PRC = 0.400577
min(+P, Se) = 0.40552

-------------------------------

==>predicting on validation



confusion matrix:
[[214   4]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.10886400192975998
difference in average predicted and observed risk = 0.028695001929759975
number samples = 237
accuracy = 0.919831
precision class 0 = 0.934498
precision class 1 = 0.5
recall class 0 = 0.981651
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.018349
positive prediction rate = 0.033755
AUC of ROC = 0.84959
AUC of PRC = 0.413413
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[384   1]
 [ 41   6]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.11703799664974213
difference in average predicted and observed risk = 0.008241996649742123
number samples = 432
accuracy = 0.902778
precision class 0 = 0.903529
precision class 1 = 0.857143
recall class 0 = 0.997403
recall class 1 = 0.12766
false negative rate = 0.87234
false positive rate = 0.002597
positive prediction rate = 0.016204
AUC of ROC = 0.778171
AUC of PRC = 0.422769
min(+P, Se) = 0.425532

-------------------------------

confusion matrix:
[[103   2]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.142085000872612
difference in average predicted and observed risk = 0.031916000872611996
number samples = 118
accuracy = 0.915254
precision class 0 = 0.927928
precision class 1 = 0.714286
recall class 0 = 0.980952
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.019048
positive prediction rate = 0.059322
AUC of ROC = 0.90989
AUC of PRC = 0.561045
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[26  0]
 [ 1  3]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.15203100442886353
difference in average predicted and observed risk = 0.01869800442886352
number samples = 30
accuracy = 0.966667
precision class 0 = 0.962963
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.75
false negative rate = 0.25
false positive rate = 0.0
positive prediction rate = 0.1
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[295   5]
 [ 35   4]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.1330229938030243
difference in average predicted and observed risk = 0.0179789938030243
number samples = 339
accuracy = 0.882006
precision class 0 = 0.893939
precision class 1 = 0.444444
recall class 0 = 0.983333
recall class 1 = 0.102564
false negative rate = 0.897436
false positive rate = 0.016667
positive prediction rate = 0.026549
AUC of ROC = 0.794701
AUC of PRC = 0.343451
min(+P, Se) = 0.452381

-------------------------------

confusion matrix:
[[432   2]
 [ 30  14]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.11002799868583679
difference in average predicted and observed risk = 0.017977998685836785
number samples = 478
accuracy = 0.933054
precision class 0 = 0.935065
precision class 1 = 0.875
recall class 0 = 0.995392
recall class 1 = 0.318182
false negative rate = 0.681818
false positive rate = 0.004608
positive prediction rate = 0.033473
AUC of ROC = 0.849393
AUC of PRC = 0.578667
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[386   2]
 [ 31   7]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.10262700170278549
difference in average predicted and observed risk = 0.013425001702785488
number samples = 426
accuracy = 0.922535
precision class 0 = 0.925659
precision class 1 = 0.777778
recall class 0 = 0.994845
recall class 1 = 0.184211
false negative rate = 0.815789
false positive rate = 0.005155
positive prediction rate = 0.021127
AUC of ROC = 0.833017
AUC of PRC = 0.449413
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[89  1]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.14237700402736664
difference in average predicted and observed risk = 0.024730004027366637
number samples = 102
accuracy = 0.911765
precision class 0 = 0.917526
precision class 1 = 0.8
recall class 0 = 0.988889
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.011111
positive prediction rate = 0.04902
AUC of ROC = 0.943519
AUC of PRC = 0.730867
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[111   2]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.1305689960718155
difference in average predicted and observed risk = 0.041858996071815494
number samples = 124
accuracy = 0.895161
precision class 0 = 0.909836
precision class 1 = 0.0
recall class 0 = 0.982301
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.017699
positive prediction rate = 0.016129
AUC of ROC = 0.790829
AUC of PRC = 0.2664
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[106   2]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.13114400207996368
difference in average predicted and observed risk = -0.018461997920036305
number samples = 127
accuracy = 0.88189
precision class 0 = 0.890756
precision class 1 = 0.75
recall class 0 = 0.981481
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.018519
positive prediction rate = 0.062992
AUC of ROC = 0.783138
AUC of PRC = 0.526817
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.17370100319385529
difference in average predicted and observed risk = 0.09475400319385528
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.92381
AUC of PRC = 0.551786
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[727   7]
 [ 65  18]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.11956900358200073
difference in average predicted and observed risk = 0.01797800358200073
number samples = 817
accuracy = 0.911873
precision class 0 = 0.917929
precision class 1 = 0.72
recall class 0 = 0.990463
recall class 1 = 0.216867
false negative rate = 0.783133
false positive rate = 0.009537
positive prediction rate = 0.0306
AUC of ROC = 0.827944
AUC of PRC = 0.470951
min(+P, Se) = 0.506024

-------------------------------

Epoch 00028: saving model to models/outputs/starr/keras_states/2020-06-02_16-48/k_clstms.GEN_ETH_INS.epoch28.state

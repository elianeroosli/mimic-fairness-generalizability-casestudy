TRAINING THE CHANNEL-WISE LSTM with additional data on gender
/share/pi/boussard/eroosli_work/benchmarking/models/ihm/main.py:10: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses
  import imp
Using TensorFlow backend.
2020-06-01 17:11:28.025486: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libnvinfer.so.6'; dlerror: libnvinfer.so.6: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /share/sw/open/oracle/18.5.0.0/lib/:
2020-06-01 17:11:28.033094: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libnvinfer_plugin.so.6'; dlerror: libnvinfer_plugin.so.6: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /share/sw/open/oracle/18.5.0.0/lib/:
2020-06-01 17:11:28.033113: W tensorflow/compiler/tf2tensorrt/utils/py_utils.cc:30] Cannot dlopen some TensorRT libraries. If you would like to use Nvidia GPU with TensorRT, please make sure the missing libraries mentioned above are installed properly.
normalizer state: /share/pi/boussard/eroosli_work/benchmarking/models/ihm/ihm_ts1.0.input_str_previous.start_time_zero.normalizer
==> using model models/keras_models/channel_wise_lstms.py
81
==> not used params in network class: dict_keys(['batch_size', 'beta_1', 'data', 'data_name', 'epochs', 'imputation', 'l1', 'l2', 'load_state', 'lr', 'mode', 'network', 'normalizer_state', 'optimizer', 'output_dir', 'prefix', 'save_every', 'small_part', 'target_repl_coef', 'timestep', 'verbose'])
==> excluded demographics: ['Ethnicity', 'Insurance']
==> found 18 channels: ['Capillary refill rate', 'Diastolic blood pressure', 'Fraction inspired oxygen', 'Gender', 'Glascow coma scale eye opening', 'Glascow coma scale motor response', 'Glascow coma scale total', 'Glascow coma scale verbal response', 'Glucose', 'Heart rate', 'Height', 'Mean blood pressure', 'Oxygen saturation', 'Respiratory rate', 'Systolic blood pressure', 'Temperature', 'Weight', 'pH']
2020-06-01 17:11:33.226289: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /share/sw/open/oracle/18.5.0.0/lib/:
2020-06-01 17:11:33.226329: E tensorflow/stream_executor/cuda/cuda_driver.cc:351] failed call to cuInit: UNKNOWN ERROR (303)
2020-06-01 17:11:33.226351: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (slurm-compute-kvls7): /proc/driver/nvidia/version does not exist
2020-06-01 17:11:33.226516: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA
2020-06-01 17:11:33.250306: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100000000 Hz
2020-06-01 17:11:33.250575: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x56159cbae1c0 initialized for platform Host (this does not guarantee that XLA will be used). Devices:
2020-06-01 17:11:33.250600: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version
==> model.final_name: 2020-06-01_10-11.k_clstms.none
==> compiling the model
Model: "network_1"
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
X (InputLayer)                  (None, None, 81)     0                                            
__________________________________________________________________________________________________
masking_1 (Masking)             (None, None, 81)     0           X[0][0]                          
__________________________________________________________________________________________________
slice_1 (Slice)                 (None, None, 3)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_2 (Slice)                 (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_3 (Slice)                 (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_4 (Slice)                 (None, None, 5)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_5 (Slice)                 (None, None, 9)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_6 (Slice)                 (None, None, 13)     0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_7 (Slice)                 (None, None, 14)     0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_8 (Slice)                 (None, None, 13)     0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_9 (Slice)                 (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_10 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_11 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_12 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_13 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_14 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_15 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_16 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_17 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
slice_18 (Slice)                (None, None, 2)      0           masking_1[0][0]                  
__________________________________________________________________________________________________
bidirectional_1 (Bidirectional) (None, None, 8)      256         slice_1[0][0]                    
__________________________________________________________________________________________________
bidirectional_2 (Bidirectional) (None, None, 8)      224         slice_2[0][0]                    
__________________________________________________________________________________________________
bidirectional_3 (Bidirectional) (None, None, 8)      224         slice_3[0][0]                    
__________________________________________________________________________________________________
bidirectional_4 (Bidirectional) (None, None, 8)      320         slice_4[0][0]                    
__________________________________________________________________________________________________
bidirectional_5 (Bidirectional) (None, None, 8)      448         slice_5[0][0]                    
__________________________________________________________________________________________________
bidirectional_6 (Bidirectional) (None, None, 8)      576         slice_6[0][0]                    
__________________________________________________________________________________________________
bidirectional_7 (Bidirectional) (None, None, 8)      608         slice_7[0][0]                    
__________________________________________________________________________________________________
bidirectional_8 (Bidirectional) (None, None, 8)      576         slice_8[0][0]                    
__________________________________________________________________________________________________
bidirectional_9 (Bidirectional) (None, None, 8)      224         slice_9[0][0]                    
__________________________________________________________________________________________________
bidirectional_10 (Bidirectional (None, None, 8)      224         slice_10[0][0]                   
__________________________________________________________________________________________________
bidirectional_11 (Bidirectional (None, None, 8)      224         slice_11[0][0]                   
__________________________________________________________________________________________________
bidirectional_12 (Bidirectional (None, None, 8)      224         slice_12[0][0]                   
__________________________________________________________________________________________________
bidirectional_13 (Bidirectional (None, None, 8)      224         slice_13[0][0]                   
__________________________________________________________________________________________________
bidirectional_14 (Bidirectional (None, None, 8)      224         slice_14[0][0]                   
__________________________________________________________________________________________________
bidirectional_15 (Bidirectional (None, None, 8)      224         slice_15[0][0]                   
__________________________________________________________________________________________________
bidirectional_16 (Bidirectional (None, None, 8)      224         slice_16[0][0]                   
__________________________________________________________________________________________________
bidirectional_17 (Bidirectional (None, None, 8)      224         slice_17[0][0]                   
__________________________________________________________________________________________________
bidirectional_18 (Bidirectional (None, None, 8)      224         slice_18[0][0]                   
__________________________________________________________________________________________________
concatenate_1 (Concatenate)     (None, None, 144)    0           bidirectional_1[0][0]            
                                                                 bidirectional_2[0][0]            
                                                                 bidirectional_3[0][0]            
                                                                 bidirectional_4[0][0]            
                                                                 bidirectional_5[0][0]            
                                                                 bidirectional_6[0][0]            
                                                                 bidirectional_7[0][0]            
                                                                 bidirectional_8[0][0]            
                                                                 bidirectional_9[0][0]            
                                                                 bidirectional_10[0][0]           
                                                                 bidirectional_11[0][0]           
                                                                 bidirectional_12[0][0]           
                                                                 bidirectional_13[0][0]           
                                                                 bidirectional_14[0][0]           
                                                                 bidirectional_15[0][0]           
                                                                 bidirectional_16[0][0]           
                                                                 bidirectional_17[0][0]           
                                                                 bidirectional_18[0][0]           
__________________________________________________________________________________________________
lstm_19 (LSTM)                  (None, 32)           22656       concatenate_1[0][0]              
__________________________________________________________________________________________________
dropout_1 (Dropout)             (None, 32)           0           lstm_19[0][0]                    
__________________________________________________________________________________________________
dense_1 (Dense)                 (None, 1)            33          dropout_1[0][0]                  
==================================================================================================
Total params: 28,161
Trainable params: 28,161
Non-trainable params: 0
__________________________________________________________________________________________________
==> training
Train on 4628 samples, validate on 817 samples
Epoch 1/100
 - 268s - loss: 0.3142 - val_loss: 0.2718

==>predicting on train



confusion matrix:
[[2154    1]
 [ 248    7]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.08297999948263168
difference in average predicted and observed risk = -0.022829000517368317
number samples = 2410
accuracy = 0.89668
precision class 0 = 0.896753
precision class 1 = 0.875
recall class 0 = 0.999536
recall class 1 = 0.027451
false negative rate = 0.972549
false positive rate = 0.000464
positive prediction rate = 0.00332
AUC of ROC = 0.745446
AUC of PRC = 0.358819
min(+P, Se) = 0.377432

-------------------------------

confusion matrix:
[[1171    8]
 [ 114    4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08885499835014343
difference in average predicted and observed risk = -0.0021240016498565717
number samples = 1297
accuracy = 0.905937
precision class 0 = 0.911284
precision class 1 = 0.333333
recall class 0 = 0.993215
recall class 1 = 0.033898
false negative rate = 0.966102
false positive rate = 0.006785
positive prediction rate = 0.009252
AUC of ROC = 0.768656
AUC of PRC = 0.273614
min(+P, Se) = 0.330645

-------------------------------

confusion matrix:
[[654   2]
 [ 69   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09833300113677979
difference in average predicted and observed risk = -0.0030369988632202166
number samples = 730
accuracy = 0.90274
precision class 0 = 0.904564
precision class 1 = 0.714286
recall class 0 = 0.996951
recall class 1 = 0.067568
false negative rate = 0.932432
false positive rate = 0.003049
positive prediction rate = 0.009589
AUC of ROC = 0.72046
AUC of PRC = 0.309609
min(+P, Se) = 0.342105

-------------------------------

confusion matrix:
[[166   1]
 [ 20   4]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.09245499968528748
difference in average predicted and observed risk = -0.03319900031471251
number samples = 191
accuracy = 0.890052
precision class 0 = 0.892473
precision class 1 = 0.8
recall class 0 = 0.994012
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.005988
positive prediction rate = 0.026178
AUC of ROC = 0.858283
AUC of PRC = 0.607324
min(+P, Se) = 0.56

-------------------------------

confusion matrix:
[[2466    8]
 [ 245   10]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08510500192642212
difference in average predicted and observed risk = -0.008335998073577877
number samples = 2729
accuracy = 0.907292
precision class 0 = 0.909627
precision class 1 = 0.555556
recall class 0 = 0.996766
recall class 1 = 0.039216
false negative rate = 0.960784
false positive rate = 0.003234
positive prediction rate = 0.006596
AUC of ROC = 0.733135
AUC of PRC = 0.292166
min(+P, Se) = 0.345098

-------------------------------

confusion matrix:
[[1679    4]
 [ 206   10]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.09079399704933167
difference in average predicted and observed risk = -0.022950002950668333
number samples = 1899
accuracy = 0.889416
precision class 0 = 0.890716
precision class 1 = 0.714286
recall class 0 = 0.997623
recall class 1 = 0.046296
false negative rate = 0.953704
false positive rate = 0.002377
positive prediction rate = 0.007372
AUC of ROC = 0.778188
AUC of PRC = 0.375052
min(+P, Se) = 0.384259

-------------------------------

confusion matrix:
[[547   2]
 [ 76   1]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.08791100233793259
difference in average predicted and observed risk = -0.035091997662067415
number samples = 626
accuracy = 0.875399
precision class 0 = 0.87801
precision class 1 = 0.333333
recall class 0 = 0.996357
recall class 1 = 0.012987
false negative rate = 0.987013
false positive rate = 0.003643
positive prediction rate = 0.004792
AUC of ROC = 0.742602
AUC of PRC = 0.311462
min(+P, Se) = 0.372093

-------------------------------

confusion matrix:
[[2246    3]
 [ 201    7]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08004099875688553
difference in average predicted and observed risk = -0.004615001243114467
number samples = 2457
accuracy = 0.916972
precision class 0 = 0.917859
precision class 1 = 0.7
recall class 0 = 0.998666
recall class 1 = 0.033654
false negative rate = 0.966346
false positive rate = 0.001334
positive prediction rate = 0.00407
AUC of ROC = 0.73265
AUC of PRC = 0.271243
min(+P, Se) = 0.304348

-------------------------------

confusion matrix:
[[219   4]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.08692699670791626
difference in average predicted and observed risk = -0.013879003292083747
number samples = 248
accuracy = 0.883065
precision class 0 = 0.897541
precision class 1 = 0.0
recall class 0 = 0.982063
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.017937
positive prediction rate = 0.016129
AUC of ROC = 0.691121
AUC of PRC = 0.204069
min(+P, Se) = 0.296296

-------------------------------

confusion matrix:
[[480   1]
 [ 77   5]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.10692200064659119
difference in average predicted and observed risk = -0.03872599935340881
number samples = 563
accuracy = 0.861456
precision class 0 = 0.861759
precision class 1 = 0.833333
recall class 0 = 0.997921
recall class 1 = 0.060976
false negative rate = 0.939024
false positive rate = 0.002079
positive prediction rate = 0.010657
AUC of ROC = 0.806171
AUC of PRC = 0.508667
min(+P, Se) = 0.52439

-------------------------------

confusion matrix:
[[653   2]
 [ 72   7]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09703200310468674
difference in average predicted and observed risk = -0.010596996895313265
number samples = 734
accuracy = 0.899183
precision class 0 = 0.90069
precision class 1 = 0.777778
recall class 0 = 0.996947
recall class 1 = 0.088608
false negative rate = 0.911392
false positive rate = 0.003053
positive prediction rate = 0.012262
AUC of ROC = 0.772906
AUC of PRC = 0.37545
min(+P, Se) = 0.387755

-------------------------------

confusion matrix:
[[4145   12]
 [ 451   20]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08743900060653687
difference in average predicted and observed risk = -0.014332999393463136
number samples = 4628
accuracy = 0.899957
precision class 0 = 0.901871
precision class 1 = 0.625
recall class 0 = 0.997113
recall class 1 = 0.042463
false negative rate = 0.957537
false positive rate = 0.002887
positive prediction rate = 0.006914
AUC of ROC = 0.752704
AUC of PRC = 0.325401
min(+P, Se) = 0.363057

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 17   2]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.09013699740171432
difference in average predicted and observed risk = 0.00996799740171432
number samples = 237
accuracy = 0.919831
precision class 0 = 0.927039
precision class 1 = 0.5
recall class 0 = 0.990826
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.009174
positive prediction rate = 0.016878
AUC of ROC = 0.856832
AUC of PRC = 0.416829
min(+P, Se) = 0.458333

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.08402600139379501
difference in average predicted and observed risk = -0.02476999860620499
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.734457
AUC of PRC = 0.368923
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[105   0]
 [ 11   2]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10973600298166275
difference in average predicted and observed risk = -0.0004329970183372528
number samples = 118
accuracy = 0.90678
precision class 0 = 0.905172
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.153846
false negative rate = 0.846154
false positive rate = 0.0
positive prediction rate = 0.016949
AUC of ROC = 0.877656
AUC of PRC = 0.591124
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[26  0]
 [ 4  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.10064700245857239
difference in average predicted and observed risk = -0.03268599754142762
number samples = 30
accuracy = 0.866667
precision class 0 = 0.866667
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[299   1]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.09557300060987473
difference in average predicted and observed risk = -0.019470999390125268
number samples = 339
accuracy = 0.884956
precision class 0 = 0.88724
precision class 1 = 0.5
recall class 0 = 0.996667
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.003333
positive prediction rate = 0.0059
AUC of ROC = 0.776838
AUC of PRC = 0.361353
min(+P, Se) = 0.439024

-------------------------------

confusion matrix:
[[433   1]
 [ 41   3]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.0862559974193573
difference in average predicted and observed risk = -0.005794002580642707
number samples = 478
accuracy = 0.912134
precision class 0 = 0.913502
precision class 1 = 0.75
recall class 0 = 0.997696
recall class 1 = 0.068182
false negative rate = 0.931818
false positive rate = 0.002304
positive prediction rate = 0.008368
AUC of ROC = 0.807237
AUC of PRC = 0.483435
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[388   0]
 [ 37   1]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.0828310027718544
difference in average predicted and observed risk = -0.006370997228145603
number samples = 426
accuracy = 0.913146
precision class 0 = 0.912941
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.026316
false negative rate = 0.973684
false positive rate = 0.0
positive prediction rate = 0.002347
AUC of ROC = 0.78147
AUC of PRC = 0.408945
min(+P, Se) = 0.447368

-------------------------------

confusion matrix:
[[90  0]
 [10  2]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.10213299840688705
difference in average predicted and observed risk = -0.015514001593112947
number samples = 102
accuracy = 0.901961
precision class 0 = 0.9
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.019608
AUC of ROC = 0.926852
AUC of PRC = 0.663156
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.08540000021457672
difference in average predicted and observed risk = -0.003309999785423276
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.721641
AUC of PRC = 0.196689
min(+P, Se) = 0.307692

-------------------------------

confusion matrix:
[[107   1]
 [ 18   1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10036800056695938
difference in average predicted and observed risk = -0.04923799943304061
number samples = 127
accuracy = 0.850394
precision class 0 = 0.856
precision class 1 = 0.5
recall class 0 = 0.990741
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.009259
positive prediction rate = 0.015748
AUC of ROC = 0.769981
AUC of PRC = 0.491992
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.12078999727964401
difference in average predicted and observed risk = 0.04184299727964401
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.952381
AUC of PRC = 0.654762
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[732   2]
 [ 79   4]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09012199938297272
difference in average predicted and observed risk = -0.011469000617027283
number samples = 817
accuracy = 0.900857
precision class 0 = 0.902589
precision class 1 = 0.666667
recall class 0 = 0.997275
recall class 1 = 0.048193
false negative rate = 0.951807
false positive rate = 0.002725
positive prediction rate = 0.007344
AUC of ROC = 0.796363
AUC of PRC = 0.430826
min(+P, Se) = 0.481928

-------------------------------

Epoch 00001: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch1.state
Epoch 2/100
 - 258s - loss: 0.2996 - val_loss: 0.2732

==>predicting on train



confusion matrix:
[[2154    1]
 [ 252    3]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.08393900096416473
difference in average predicted and observed risk = -0.021869999035835266
number samples = 2410
accuracy = 0.895021
precision class 0 = 0.895262
precision class 1 = 0.75
recall class 0 = 0.999536
recall class 1 = 0.011765
false negative rate = 0.988235
false positive rate = 0.000464
positive prediction rate = 0.00166
AUC of ROC = 0.763845
AUC of PRC = 0.37522
min(+P, Se) = 0.388235

-------------------------------

confusion matrix:
[[1175    4]
 [ 117    1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08925899863243103
difference in average predicted and observed risk = -0.001720001367568974
number samples = 1297
accuracy = 0.906708
precision class 0 = 0.909443
precision class 1 = 0.2
recall class 0 = 0.996607
recall class 1 = 0.008475
false negative rate = 0.991525
false positive rate = 0.003393
positive prediction rate = 0.003855
AUC of ROC = 0.786856
AUC of PRC = 0.282636
min(+P, Se) = 0.355932

-------------------------------

confusion matrix:
[[655   1]
 [ 71   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09686999768018723
difference in average predicted and observed risk = -0.004500002319812776
number samples = 730
accuracy = 0.90137
precision class 0 = 0.902204
precision class 1 = 0.75
recall class 0 = 0.998476
recall class 1 = 0.040541
false negative rate = 0.959459
false positive rate = 0.001524
positive prediction rate = 0.005479
AUC of ROC = 0.737867
AUC of PRC = 0.325998
min(+P, Se) = 0.364865

-------------------------------

confusion matrix:
[[167   0]
 [ 23   1]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.09262599796056747
difference in average predicted and observed risk = -0.033028002039432514
number samples = 191
accuracy = 0.879581
precision class 0 = 0.878947
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.041667
false negative rate = 0.958333
false positive rate = 0.0
positive prediction rate = 0.005236
AUC of ROC = 0.860778
AUC of PRC = 0.617311
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[2471    3]
 [ 252    3]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08683899790048599
difference in average predicted and observed risk = -0.006602002099514004
number samples = 2729
accuracy = 0.906559
precision class 0 = 0.907455
precision class 1 = 0.5
recall class 0 = 0.998787
recall class 1 = 0.011765
false negative rate = 0.988235
false positive rate = 0.001213
positive prediction rate = 0.002199
AUC of ROC = 0.752004
AUC of PRC = 0.299452
min(+P, Se) = 0.352941

-------------------------------

confusion matrix:
[[1680    3]
 [ 211    5]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.08924899995326996
difference in average predicted and observed risk = -0.02449500004673004
number samples = 1899
accuracy = 0.887309
precision class 0 = 0.888419
precision class 1 = 0.625
recall class 0 = 0.998217
recall class 1 = 0.023148
false negative rate = 0.976852
false positive rate = 0.001783
positive prediction rate = 0.004213
AUC of ROC = 0.791933
AUC of PRC = 0.393362
min(+P, Se) = 0.408072

-------------------------------

confusion matrix:
[[548   1]
 [ 76   1]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.08822900056838989
difference in average predicted and observed risk = -0.03477399943161011
number samples = 626
accuracy = 0.876997
precision class 0 = 0.878205
precision class 1 = 0.5
recall class 0 = 0.998178
recall class 1 = 0.012987
false negative rate = 0.987013
false positive rate = 0.001821
positive prediction rate = 0.003195
AUC of ROC = 0.760107
AUC of PRC = 0.325606
min(+P, Se) = 0.365854

-------------------------------

confusion matrix:
[[2248    1]
 [ 206    2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08139699697494507
difference in average predicted and observed risk = -0.003259003025054927
number samples = 2457
accuracy = 0.915751
precision class 0 = 0.916055
precision class 1 = 0.666667
recall class 0 = 0.999555
recall class 1 = 0.009615
false negative rate = 0.990385
false positive rate = 0.000445
positive prediction rate = 0.001221
AUC of ROC = 0.754117
AUC of PRC = 0.285242
min(+P, Se) = 0.323944

-------------------------------

confusion matrix:
[[222   1]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.08791100233793259
difference in average predicted and observed risk = -0.01289499766206742
number samples = 248
accuracy = 0.895161
precision class 0 = 0.898785
precision class 1 = 0.0
recall class 0 = 0.995516
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.004484
positive prediction rate = 0.004032
AUC of ROC = 0.718924
AUC of PRC = 0.212029
min(+P, Se) = 0.27027

-------------------------------

confusion matrix:
[[480   1]
 [ 80   2]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.10442899912595749
difference in average predicted and observed risk = -0.04121900087404251
number samples = 563
accuracy = 0.856128
precision class 0 = 0.857143
precision class 1 = 0.666667
recall class 0 = 0.997921
recall class 1 = 0.02439
false negative rate = 0.97561
false positive rate = 0.002079
positive prediction rate = 0.005329
AUC of ROC = 0.817403
AUC of PRC = 0.514368
min(+P, Se) = 0.52439

-------------------------------

confusion matrix:
[[653   2]
 [ 76   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09625200182199478
difference in average predicted and observed risk = -0.011376998178005221
number samples = 734
accuracy = 0.893733
precision class 0 = 0.895748
precision class 1 = 0.6
recall class 0 = 0.996947
recall class 1 = 0.037975
false negative rate = 0.962025
false positive rate = 0.003053
positive prediction rate = 0.006812
AUC of ROC = 0.784713
AUC of PRC = 0.386454
min(+P, Se) = 0.395604

-------------------------------

confusion matrix:
[[4151    6]
 [ 463    8]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08782800287008286
difference in average predicted and observed risk = -0.013943997129917146
number samples = 4628
accuracy = 0.89866
precision class 0 = 0.899653
precision class 1 = 0.571429
recall class 0 = 0.998557
recall class 1 = 0.016985
false negative rate = 0.983015
false positive rate = 0.001443
positive prediction rate = 0.003025
AUC of ROC = 0.770243
AUC of PRC = 0.337711
min(+P, Se) = 0.377083

-------------------------------

==>predicting on validation



confusion matrix:
[[217   1]
 [ 18   1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08967500180006027
difference in average predicted and observed risk = 0.009506001800060268
number samples = 237
accuracy = 0.919831
precision class 0 = 0.923404
precision class 1 = 0.5
recall class 0 = 0.995413
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.004587
positive prediction rate = 0.008439
AUC of ROC = 0.859005
AUC of PRC = 0.420247
min(+P, Se) = 0.458333

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.08399699628353119
difference in average predicted and observed risk = -0.024799003716468815
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.750428
AUC of PRC = 0.39456
min(+P, Se) = 0.423077

-------------------------------

confusion matrix:
[[105   0]
 [ 11   2]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10537800192832947
difference in average predicted and observed risk = -0.004790998071670535
number samples = 118
accuracy = 0.90678
precision class 0 = 0.905172
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.153846
false negative rate = 0.846154
false positive rate = 0.0
positive prediction rate = 0.016949
AUC of ROC = 0.887912
AUC of PRC = 0.62515
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[26  0]
 [ 4  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.10302600264549255
difference in average predicted and observed risk = -0.030306997354507453
number samples = 30
accuracy = 0.866667
precision class 0 = 0.866667
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[300   0]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.09218200296163559
difference in average predicted and observed risk = -0.022861997038364404
number samples = 339
accuracy = 0.887906
precision class 0 = 0.887574
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.0
positive prediction rate = 0.00295
AUC of ROC = 0.792308
AUC of PRC = 0.379482
min(+P, Se) = 0.439024

-------------------------------

confusion matrix:
[[433   1]
 [ 42   2]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08748000115156174
difference in average predicted and observed risk = -0.00456999884843827
number samples = 478
accuracy = 0.910042
precision class 0 = 0.911579
precision class 1 = 0.666667
recall class 0 = 0.997696
recall class 1 = 0.045455
false negative rate = 0.954545
false positive rate = 0.002304
positive prediction rate = 0.006276
AUC of ROC = 0.819334
AUC of PRC = 0.50772
min(+P, Se) = 0.543478

-------------------------------

confusion matrix:
[[388   0]
 [ 37   1]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08313799649477005
difference in average predicted and observed risk = -0.0060640035052299535
number samples = 426
accuracy = 0.913146
precision class 0 = 0.912941
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.026316
false negative rate = 0.973684
false positive rate = 0.0
positive prediction rate = 0.002347
AUC of ROC = 0.795917
AUC of PRC = 0.43866
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[90  0]
 [11  1]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.10075999796390533
difference in average predicted and observed risk = -0.016887002036094667
number samples = 102
accuracy = 0.892157
precision class 0 = 0.891089
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.009804
AUC of ROC = 0.925926
AUC of PRC = 0.674125
min(+P, Se) = 0.647059

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.08460299670696259
difference in average predicted and observed risk = -0.004107003293037412
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.750603
AUC of PRC = 0.208285
min(+P, Se) = 0.3125

-------------------------------

confusion matrix:
[[108   0]
 [ 18   1]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09863799810409546
difference in average predicted and observed risk = -0.05096800189590453
number samples = 127
accuracy = 0.858268
precision class 0 = 0.857143
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.007874
AUC of ROC = 0.775341
AUC of PRC = 0.507157
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.11455100029706955
difference in average predicted and observed risk = 0.035604000297069546
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.952381
AUC of PRC = 0.654762
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[733   1]
 [ 80   3]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.08943100273609161
difference in average predicted and observed risk = -0.012159997263908387
number samples = 817
accuracy = 0.900857
precision class 0 = 0.901599
precision class 1 = 0.75
recall class 0 = 0.998638
recall class 1 = 0.036145
false negative rate = 0.963855
false positive rate = 0.001362
positive prediction rate = 0.004896
AUC of ROC = 0.809281
AUC of PRC = 0.451207
min(+P, Se) = 0.488095

-------------------------------

Epoch 00002: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch2.state
Epoch 3/100
 - 251s - loss: 0.2982 - val_loss: 0.2622

==>predicting on train



confusion matrix:
[[2150    5]
 [ 232   23]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.08105400204658508
difference in average predicted and observed risk = -0.024754997953414917
number samples = 2410
accuracy = 0.90166
precision class 0 = 0.902603
precision class 1 = 0.821429
recall class 0 = 0.99768
recall class 1 = 0.090196
false negative rate = 0.909804
false positive rate = 0.00232
positive prediction rate = 0.011618
AUC of ROC = 0.766904
AUC of PRC = 0.381981
min(+P, Se) = 0.390625

-------------------------------

confusion matrix:
[[1162   17]
 [ 104   14]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08798599988222122
difference in average predicted and observed risk = -0.0029930001177787824
number samples = 1297
accuracy = 0.906708
precision class 0 = 0.917852
precision class 1 = 0.451613
recall class 0 = 0.985581
recall class 1 = 0.118644
false negative rate = 0.881356
false positive rate = 0.014419
positive prediction rate = 0.023901
AUC of ROC = 0.791485
AUC of PRC = 0.291844
min(+P, Se) = 0.341667

-------------------------------

confusion matrix:
[[651   5]
 [ 64  10]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09780099987983704
difference in average predicted and observed risk = -0.0035690001201629656
number samples = 730
accuracy = 0.905479
precision class 0 = 0.910489
precision class 1 = 0.666667
recall class 0 = 0.992378
recall class 1 = 0.135135
false negative rate = 0.864865
false positive rate = 0.007622
positive prediction rate = 0.020548
AUC of ROC = 0.744974
AUC of PRC = 0.347389
min(+P, Se) = 0.381579

-------------------------------

confusion matrix:
[[166   1]
 [ 18   6]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.09225399792194366
difference in average predicted and observed risk = -0.03340000207805632
number samples = 191
accuracy = 0.900524
precision class 0 = 0.902174
precision class 1 = 0.857143
recall class 0 = 0.994012
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.005988
positive prediction rate = 0.036649
AUC of ROC = 0.869261
AUC of PRC = 0.623401
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[2454   20]
 [ 229   26]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08424299955368042
difference in average predicted and observed risk = -0.009198000446319576
number samples = 2729
accuracy = 0.908758
precision class 0 = 0.914648
precision class 1 = 0.565217
recall class 0 = 0.991916
recall class 1 = 0.101961
false negative rate = 0.898039
false positive rate = 0.008084
positive prediction rate = 0.016856
AUC of ROC = 0.757468
AUC of PRC = 0.309717
min(+P, Se) = 0.352941

-------------------------------

confusion matrix:
[[1675    8]
 [ 189   27]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.08877000212669373
difference in average predicted and observed risk = -0.024973997873306272
number samples = 1899
accuracy = 0.896261
precision class 0 = 0.898605
precision class 1 = 0.771429
recall class 0 = 0.995247
recall class 1 = 0.125
false negative rate = 0.875
false positive rate = 0.004753
positive prediction rate = 0.018431
AUC of ROC = 0.794858
AUC of PRC = 0.39635
min(+P, Se) = 0.414414

-------------------------------

confusion matrix:
[[545   4]
 [ 71   6]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.08711300045251846
difference in average predicted and observed risk = -0.03588999954748154
number samples = 626
accuracy = 0.880192
precision class 0 = 0.88474
precision class 1 = 0.6
recall class 0 = 0.992714
recall class 1 = 0.077922
false negative rate = 0.922078
false positive rate = 0.007286
positive prediction rate = 0.015974
AUC of ROC = 0.768528
AUC of PRC = 0.342237
min(+P, Se) = 0.4125

-------------------------------

confusion matrix:
[[2242    7]
 [ 191   17]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07753299921751022
difference in average predicted and observed risk = -0.007123000782489772
number samples = 2457
accuracy = 0.919414
precision class 0 = 0.921496
precision class 1 = 0.708333
recall class 0 = 0.996888
recall class 1 = 0.081731
false negative rate = 0.918269
false positive rate = 0.003112
positive prediction rate = 0.009768
AUC of ROC = 0.75677
AUC of PRC = 0.295372
min(+P, Se) = 0.336538

-------------------------------

confusion matrix:
[[218   5]
 [ 24   1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.08579400181770325
difference in average predicted and observed risk = -0.01501199818229676
number samples = 248
accuracy = 0.883065
precision class 0 = 0.900826
precision class 1 = 0.166667
recall class 0 = 0.977578
recall class 1 = 0.04
false negative rate = 0.96
false positive rate = 0.022422
positive prediction rate = 0.024194
AUC of ROC = 0.717309
AUC of PRC = 0.207954
min(+P, Se) = 0.259259

-------------------------------

confusion matrix:
[[475   6]
 [ 67  15]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.10796499997377396
difference in average predicted and observed risk = -0.03768300002622604
number samples = 563
accuracy = 0.870337
precision class 0 = 0.876384
precision class 1 = 0.714286
recall class 0 = 0.987526
recall class 1 = 0.182927
false negative rate = 0.817073
false positive rate = 0.012474
positive prediction rate = 0.0373
AUC of ROC = 0.821028
AUC of PRC = 0.524882
min(+P, Se) = 0.52439

-------------------------------

confusion matrix:
[[649   6]
 [ 65  14]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09724999964237213
difference in average predicted and observed risk = -0.010379000357627871
number samples = 734
accuracy = 0.90327
precision class 0 = 0.908964
precision class 1 = 0.7
recall class 0 = 0.99084
recall class 1 = 0.177215
false negative rate = 0.822785
false positive rate = 0.00916
positive prediction rate = 0.027248
AUC of ROC = 0.791729
AUC of PRC = 0.396469
min(+P, Se) = 0.407407

-------------------------------

confusion matrix:
[[4129   28]
 [ 418   53]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.0861010029911995
difference in average predicted and observed risk = -0.015670997008800508
number samples = 4628
accuracy = 0.90363
precision class 0 = 0.908071
precision class 1 = 0.654321
recall class 0 = 0.993264
recall class 1 = 0.112527
false negative rate = 0.887473
false positive rate = 0.006736
positive prediction rate = 0.017502
AUC of ROC = 0.774739
AUC of PRC = 0.3487
min(+P, Se) = 0.378543

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08786699920892715
difference in average predicted and observed risk = 0.00769799920892715
number samples = 237
accuracy = 0.92827
precision class 0 = 0.935065
precision class 1 = 0.666667
recall class 0 = 0.990826
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.009174
positive prediction rate = 0.025316
AUC of ROC = 0.866007
AUC of PRC = 0.402598
min(+P, Se) = 0.458333

-------------------------------

confusion matrix:
[[385   0]
 [ 45   2]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.0817520022392273
difference in average predicted and observed risk = -0.02704399776077271
number samples = 432
accuracy = 0.895833
precision class 0 = 0.895349
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.042553
false negative rate = 0.957447
false positive rate = 0.0
positive prediction rate = 0.00463
AUC of ROC = 0.762034
AUC of PRC = 0.409084
min(+P, Se) = 0.392157

-------------------------------

confusion matrix:
[[105   0]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10998900234699249
difference in average predicted and observed risk = -0.00017999765300751036
number samples = 118
accuracy = 0.932203
precision class 0 = 0.929204
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.0
positive prediction rate = 0.042373
AUC of ROC = 0.889377
AUC of PRC = 0.65093
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.10765399783849716
difference in average predicted and observed risk = -0.025679002161502845
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[299   1]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.09295699745416641
difference in average predicted and observed risk = -0.02208700254583358
number samples = 339
accuracy = 0.890855
precision class 0 = 0.892537
precision class 1 = 0.75
recall class 0 = 0.996667
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.003333
positive prediction rate = 0.011799
AUC of ROC = 0.798889
AUC of PRC = 0.382535
min(+P, Se) = 0.435897

-------------------------------

confusion matrix:
[[433   1]
 [ 34  10]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08543399721384048
difference in average predicted and observed risk = -0.006616002786159522
number samples = 478
accuracy = 0.926778
precision class 0 = 0.927195
precision class 1 = 0.909091
recall class 0 = 0.997696
recall class 1 = 0.227273
false negative rate = 0.772727
false positive rate = 0.002304
positive prediction rate = 0.023013
AUC of ROC = 0.829545
AUC of PRC = 0.517479
min(+P, Se) = 0.545455

-------------------------------

confusion matrix:
[[388   0]
 [ 35   3]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.080035001039505
difference in average predicted and observed risk = -0.009166998960494999
number samples = 426
accuracy = 0.91784
precision class 0 = 0.917258
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.078947
false negative rate = 0.921053
false positive rate = 0.0
positive prediction rate = 0.007042
AUC of ROC = 0.807786
AUC of PRC = 0.440009
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[90  0]
 [ 9  3]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.10216200351715088
difference in average predicted and observed risk = -0.015484996482849123
number samples = 102
accuracy = 0.911765
precision class 0 = 0.909091
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.029412
AUC of ROC = 0.926852
AUC of PRC = 0.679924
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 10   1]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.082225002348423
difference in average predicted and observed risk = -0.006484997651576993
number samples = 124
accuracy = 0.91129
precision class 0 = 0.918033
precision class 1 = 0.5
recall class 0 = 0.99115
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.00885
positive prediction rate = 0.016129
AUC of ROC = 0.766693
AUC of PRC = 0.217128
min(+P, Se) = 0.315789

-------------------------------

confusion matrix:
[[107   1]
 [ 14   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10177700221538544
difference in average predicted and observed risk = -0.04782899778461455
number samples = 127
accuracy = 0.88189
precision class 0 = 0.884298
precision class 1 = 0.833333
recall class 0 = 0.990741
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.009259
positive prediction rate = 0.047244
AUC of ROC = 0.784113
AUC of PRC = 0.525003
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.12402799725532532
difference in average predicted and observed risk = 0.045080997255325314
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.933333
AUC of PRC = 0.568651
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[732   2]
 [ 70  13]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.08855599910020828
difference in average predicted and observed risk = -0.013035000899791718
number samples = 817
accuracy = 0.911873
precision class 0 = 0.912718
precision class 1 = 0.866667
recall class 0 = 0.997275
recall class 1 = 0.156627
false negative rate = 0.843373
false positive rate = 0.002725
positive prediction rate = 0.01836
AUC of ROC = 0.817882
AUC of PRC = 0.45906
min(+P, Se) = 0.493976

-------------------------------

Epoch 00003: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch3.state
Epoch 4/100
 - 253s - loss: 0.2890 - val_loss: 0.2653

==>predicting on train



confusion matrix:
[[2142   13]
 [ 217   38]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.06247999891638756
difference in average predicted and observed risk = -0.04332900108361244
number samples = 2410
accuracy = 0.904564
precision class 0 = 0.908012
precision class 1 = 0.745098
recall class 0 = 0.993968
recall class 1 = 0.14902
false negative rate = 0.85098
false positive rate = 0.006032
positive prediction rate = 0.021162
AUC of ROC = 0.781795
AUC of PRC = 0.391916
min(+P, Se) = 0.403922

-------------------------------

confusion matrix:
[[1154   25]
 [  94   24]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.07150399684906006
difference in average predicted and observed risk = -0.019475003150939946
number samples = 1297
accuracy = 0.90825
precision class 0 = 0.924679
precision class 1 = 0.489796
recall class 0 = 0.978796
recall class 1 = 0.20339
false negative rate = 0.79661
false positive rate = 0.021204
positive prediction rate = 0.037779
AUC of ROC = 0.802964
AUC of PRC = 0.295858
min(+P, Se) = 0.361345

-------------------------------

confusion matrix:
[[641  15]
 [ 59  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.08059699833393097
difference in average predicted and observed risk = -0.020773001666069033
number samples = 730
accuracy = 0.89863
precision class 0 = 0.915714
precision class 1 = 0.5
recall class 0 = 0.977134
recall class 1 = 0.202703
false negative rate = 0.797297
false positive rate = 0.022866
positive prediction rate = 0.041096
AUC of ROC = 0.760115
AUC of PRC = 0.360433
min(+P, Se) = 0.385542

-------------------------------

confusion matrix:
[[165   2]
 [ 16   8]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.07583499699831009
difference in average predicted and observed risk = -0.0498190030016899
number samples = 191
accuracy = 0.905759
precision class 0 = 0.911602
precision class 1 = 0.8
recall class 0 = 0.988024
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.011976
positive prediction rate = 0.052356
AUC of ROC = 0.882984
AUC of PRC = 0.639104
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2437   37]
 [ 206   49]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.06817399710416794
difference in average predicted and observed risk = -0.025267002895832058
number samples = 2729
accuracy = 0.910956
precision class 0 = 0.922058
precision class 1 = 0.569767
recall class 0 = 0.985044
recall class 1 = 0.192157
false negative rate = 0.807843
false positive rate = 0.014956
positive prediction rate = 0.031513
AUC of ROC = 0.774822
AUC of PRC = 0.320354
min(+P, Se) = 0.372549

-------------------------------

confusion matrix:
[[1665   18]
 [ 180   36]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.06876800209283829
difference in average predicted and observed risk = -0.04497599790716171
number samples = 1899
accuracy = 0.895735
precision class 0 = 0.902439
precision class 1 = 0.666667
recall class 0 = 0.989305
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.010695
positive prediction rate = 0.028436
AUC of ROC = 0.805014
AUC of PRC = 0.405646
min(+P, Se) = 0.425926

-------------------------------

confusion matrix:
[[538  11]
 [ 67  10]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.06999800354242325
difference in average predicted and observed risk = -0.05300499645757675
number samples = 626
accuracy = 0.875399
precision class 0 = 0.889256
precision class 1 = 0.47619
recall class 0 = 0.979964
recall class 1 = 0.12987
false negative rate = 0.87013
false positive rate = 0.020036
positive prediction rate = 0.033546
AUC of ROC = 0.779457
AUC of PRC = 0.353538
min(+P, Se) = 0.415584

-------------------------------

confusion matrix:
[[2231   18]
 [ 181   27]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.058605000376701355
difference in average predicted and observed risk = -0.02605099962329864
number samples = 2457
accuracy = 0.919007
precision class 0 = 0.924959
precision class 1 = 0.6
recall class 0 = 0.991996
recall class 1 = 0.129808
false negative rate = 0.870192
false positive rate = 0.008004
positive prediction rate = 0.018315
AUC of ROC = 0.773827
AUC of PRC = 0.303437
min(+P, Se) = 0.331731

-------------------------------

confusion matrix:
[[217   6]
 [ 22   3]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.06901200115680695
difference in average predicted and observed risk = -0.03179399884319306
number samples = 248
accuracy = 0.887097
precision class 0 = 0.90795
precision class 1 = 0.333333
recall class 0 = 0.973094
recall class 1 = 0.12
false negative rate = 0.88
false positive rate = 0.026906
positive prediction rate = 0.03629
AUC of ROC = 0.732018
AUC of PRC = 0.214363
min(+P, Se) = 0.275

-------------------------------

confusion matrix:
[[473   8]
 [ 56  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.09336400032043457
difference in average predicted and observed risk = -0.05228399967956543
number samples = 563
accuracy = 0.886323
precision class 0 = 0.89414
precision class 1 = 0.764706
recall class 0 = 0.983368
recall class 1 = 0.317073
false negative rate = 0.682927
false positive rate = 0.016632
positive prediction rate = 0.060391
AUC of ROC = 0.83193
AUC of PRC = 0.515168
min(+P, Se) = 0.536585

-------------------------------

confusion matrix:
[[643  12]
 [ 60  19]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.08058299869298935
difference in average predicted and observed risk = -0.027046001307010653
number samples = 734
accuracy = 0.901907
precision class 0 = 0.914652
precision class 1 = 0.612903
recall class 0 = 0.981679
recall class 1 = 0.240506
false negative rate = 0.759494
false positive rate = 0.018321
positive prediction rate = 0.042234
AUC of ROC = 0.802222
AUC of PRC = 0.408533
min(+P, Se) = 0.423529

-------------------------------

confusion matrix:
[[4102   55]
 [ 386   85]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.0684180036187172
difference in average predicted and observed risk = -0.03335399638128281
number samples = 4628
accuracy = 0.90471
precision class 0 = 0.913993
precision class 1 = 0.607143
recall class 0 = 0.986769
recall class 1 = 0.180467
false negative rate = 0.819533
false positive rate = 0.013231
positive prediction rate = 0.030251
AUC of ROC = 0.788641
AUC of PRC = 0.35649
min(+P, Se) = 0.391121

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.07078800350427628
difference in average predicted and observed risk = -0.009380996495723729
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.869145
AUC of PRC = 0.412975
min(+P, Se) = 0.458333

-------------------------------

confusion matrix:
[[384   1]
 [ 42   5]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.060745999217033386
difference in average predicted and observed risk = -0.04805000078296662
number samples = 432
accuracy = 0.900463
precision class 0 = 0.901408
precision class 1 = 0.833333
recall class 0 = 0.997403
recall class 1 = 0.106383
false negative rate = 0.893617
false positive rate = 0.002597
positive prediction rate = 0.013889
AUC of ROC = 0.778447
AUC of PRC = 0.415014
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[103   2]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.09317699819803238
difference in average predicted and observed risk = -0.016992001801967624
number samples = 118
accuracy = 0.915254
precision class 0 = 0.927928
precision class 1 = 0.714286
recall class 0 = 0.980952
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.019048
positive prediction rate = 0.059322
AUC of ROC = 0.887912
AUC of PRC = 0.638254
min(+P, Se) = 0.588235

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.0925000011920929
difference in average predicted and observed risk = -0.04083299880790711
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[297   3]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.07074099779129028
difference in average predicted and observed risk = -0.04430300220870971
number samples = 339
accuracy = 0.884956
precision class 0 = 0.891892
precision class 1 = 0.5
recall class 0 = 0.99
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.01
positive prediction rate = 0.017699
AUC of ROC = 0.802308
AUC of PRC = 0.377694
min(+P, Se) = 0.431818

-------------------------------

confusion matrix:
[[431   3]
 [ 31  13]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.0686350017786026
difference in average predicted and observed risk = -0.023414998221397407
number samples = 478
accuracy = 0.92887
precision class 0 = 0.9329
precision class 1 = 0.8125
recall class 0 = 0.993088
recall class 1 = 0.295455
false negative rate = 0.704545
false positive rate = 0.006912
positive prediction rate = 0.033473
AUC of ROC = 0.842847
AUC of PRC = 0.531351
min(+P, Se) = 0.555556

-------------------------------

confusion matrix:
[[387   1]
 [ 32   6]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.06042400002479553
difference in average predicted and observed risk = -0.02877799997520447
number samples = 426
accuracy = 0.922535
precision class 0 = 0.923628
precision class 1 = 0.857143
recall class 0 = 0.997423
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.002577
positive prediction rate = 0.016432
AUC of ROC = 0.826099
AUC of PRC = 0.45873
min(+P, Se) = 0.447368

-------------------------------

confusion matrix:
[[89  1]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.08697699755430222
difference in average predicted and observed risk = -0.030670002445697786
number samples = 102
accuracy = 0.911765
precision class 0 = 0.917526
precision class 1 = 0.8
recall class 0 = 0.988889
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.011111
positive prediction rate = 0.04902
AUC of ROC = 0.923148
AUC of PRC = 0.673057
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.05990000069141388
difference in average predicted and observed risk = -0.028809999308586118
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.783588
AUC of PRC = 0.224809
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[106   2]
 [ 14   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.08546499907970428
difference in average predicted and observed risk = -0.0641410009202957
number samples = 127
accuracy = 0.874016
precision class 0 = 0.883333
precision class 1 = 0.714286
recall class 0 = 0.981481
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.018519
positive prediction rate = 0.055118
AUC of ROC = 0.787037
AUC of PRC = 0.545838
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[34  1]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.10249099880456924
difference in average predicted and observed risk = 0.02354399880456924
number samples = 38
accuracy = 0.921053
precision class 0 = 0.944444
precision class 1 = 0.5
recall class 0 = 0.971429
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.028571
positive prediction rate = 0.052632
AUC of ROC = 0.942857
AUC of PRC = 0.599206
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[728   6]
 [ 67  16]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.06950899958610535
difference in average predicted and observed risk = -0.032082000413894654
number samples = 817
accuracy = 0.910649
precision class 0 = 0.915723
precision class 1 = 0.727273
recall class 0 = 0.991826
recall class 1 = 0.192771
false negative rate = 0.807229
false positive rate = 0.008174
positive prediction rate = 0.026928
AUC of ROC = 0.826171
AUC of PRC = 0.465441
min(+P, Se) = 0.48913

-------------------------------

Epoch 00004: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch4.state
Epoch 5/100
 - 257s - loss: 0.2941 - val_loss: 0.2578

==>predicting on train



confusion matrix:
[[2152    3]
 [ 238   17]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.07624299824237823
difference in average predicted and observed risk = -0.029566001757621765
number samples = 2410
accuracy = 0.9
precision class 0 = 0.900418
precision class 1 = 0.85
recall class 0 = 0.998608
recall class 1 = 0.066667
false negative rate = 0.933333
false positive rate = 0.001392
positive prediction rate = 0.008299
AUC of ROC = 0.793665
AUC of PRC = 0.402236
min(+P, Se) = 0.388235

-------------------------------

confusion matrix:
[[1166   13]
 [ 108   10]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08194400370121002
difference in average predicted and observed risk = -0.009034996298789982
number samples = 1297
accuracy = 0.906708
precision class 0 = 0.915228
precision class 1 = 0.434783
recall class 0 = 0.988974
recall class 1 = 0.084746
false negative rate = 0.915254
false positive rate = 0.011026
positive prediction rate = 0.017733
AUC of ROC = 0.814472
AUC of PRC = 0.309456
min(+P, Se) = 0.372881

-------------------------------

confusion matrix:
[[654   2]
 [ 65   9]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.0914670005440712
difference in average predicted and observed risk = -0.009902999455928804
number samples = 730
accuracy = 0.908219
precision class 0 = 0.909597
precision class 1 = 0.818182
recall class 0 = 0.996951
recall class 1 = 0.121622
false negative rate = 0.878378
false positive rate = 0.003049
positive prediction rate = 0.015068
AUC of ROC = 0.766974
AUC of PRC = 0.364733
min(+P, Se) = 0.405405

-------------------------------

confusion matrix:
[[166   1]
 [ 20   4]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.08556900173425674
difference in average predicted and observed risk = -0.040084998265743244
number samples = 191
accuracy = 0.890052
precision class 0 = 0.892473
precision class 1 = 0.8
recall class 0 = 0.994012
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.005988
positive prediction rate = 0.026178
AUC of ROC = 0.881238
AUC of PRC = 0.685243
min(+P, Se) = 0.68

-------------------------------

confusion matrix:
[[2461   13]
 [ 233   22]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07897499948740005
difference in average predicted and observed risk = -0.014466000512599941
number samples = 2729
accuracy = 0.909857
precision class 0 = 0.913512
precision class 1 = 0.628571
recall class 0 = 0.994745
recall class 1 = 0.086275
false negative rate = 0.913725
false positive rate = 0.005255
positive prediction rate = 0.012825
AUC of ROC = 0.788248
AUC of PRC = 0.336187
min(+P, Se) = 0.380392

-------------------------------

confusion matrix:
[[1677    6]
 [ 198   18]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.08299999684095383
difference in average predicted and observed risk = -0.03074400315904617
number samples = 1899
accuracy = 0.892575
precision class 0 = 0.8944
precision class 1 = 0.75
recall class 0 = 0.996435
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.003565
positive prediction rate = 0.012638
AUC of ROC = 0.811093
AUC of PRC = 0.411946
min(+P, Se) = 0.435185

-------------------------------

confusion matrix:
[[547   2]
 [ 71   6]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.08242599666118622
difference in average predicted and observed risk = -0.04057700333881378
number samples = 626
accuracy = 0.883387
precision class 0 = 0.885113
precision class 1 = 0.75
recall class 0 = 0.996357
recall class 1 = 0.077922
false negative rate = 0.922078
false positive rate = 0.003643
positive prediction rate = 0.01278
AUC of ROC = 0.796821
AUC of PRC = 0.381218
min(+P, Se) = 0.417722

-------------------------------

confusion matrix:
[[2244    5]
 [ 197   11]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07246299833059311
difference in average predicted and observed risk = -0.012193001669406886
number samples = 2457
accuracy = 0.917786
precision class 0 = 0.919295
precision class 1 = 0.6875
recall class 0 = 0.997777
recall class 1 = 0.052885
false negative rate = 0.947115
false positive rate = 0.002223
positive prediction rate = 0.006512
AUC of ROC = 0.78515
AUC of PRC = 0.316002
min(+P, Se) = 0.339623

-------------------------------

confusion matrix:
[[219   4]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.07919500023126602
difference in average predicted and observed risk = -0.021610999768733985
number samples = 248
accuracy = 0.883065
precision class 0 = 0.897541
precision class 1 = 0.0
recall class 0 = 0.982063
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.017937
positive prediction rate = 0.016129
AUC of ROC = 0.743677
AUC of PRC = 0.214628
min(+P, Se) = 0.289474

-------------------------------

confusion matrix:
[[476   5]
 [ 71  11]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.10147300362586975
difference in average predicted and observed risk = -0.04417499637413025
number samples = 563
accuracy = 0.865009
precision class 0 = 0.870201
precision class 1 = 0.6875
recall class 0 = 0.989605
recall class 1 = 0.134146
false negative rate = 0.865854
false positive rate = 0.010395
positive prediction rate = 0.028419
AUC of ROC = 0.839334
AUC of PRC = 0.530795
min(+P, Se) = 0.536585

-------------------------------

confusion matrix:
[[652   3]
 [ 67  12]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09091699868440628
difference in average predicted and observed risk = -0.016712001315593722
number samples = 734
accuracy = 0.904632
precision class 0 = 0.906815
precision class 1 = 0.8
recall class 0 = 0.99542
recall class 1 = 0.151899
false negative rate = 0.848101
false positive rate = 0.00458
positive prediction rate = 0.020436
AUC of ROC = 0.803285
AUC of PRC = 0.42053
min(+P, Se) = 0.443038

-------------------------------

confusion matrix:
[[4138   19]
 [ 431   40]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08062700182199478
difference in average predicted and observed risk = -0.02114499817800522
number samples = 4628
accuracy = 0.902766
precision class 0 = 0.905669
precision class 1 = 0.677966
recall class 0 = 0.995429
recall class 1 = 0.084926
false negative rate = 0.915074
false positive rate = 0.004571
positive prediction rate = 0.012748
AUC of ROC = 0.798805
AUC of PRC = 0.37056
min(+P, Se) = 0.403397

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 16   3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08052399754524231
difference in average predicted and observed risk = 0.0003549975452423054
number samples = 237
accuracy = 0.924051
precision class 0 = 0.931035
precision class 1 = 0.6
recall class 0 = 0.990826
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009174
positive prediction rate = 0.021097
AUC of ROC = 0.877354
AUC of PRC = 0.410942
min(+P, Se) = 0.458333

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.07621300220489502
difference in average predicted and observed risk = -0.032582997795104984
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.79171
AUC of PRC = 0.440591
min(+P, Se) = 0.44

-------------------------------

confusion matrix:
[[105   0]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10306800156831741
difference in average predicted and observed risk = -0.00710099843168259
number samples = 118
accuracy = 0.915254
precision class 0 = 0.913043
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.0
positive prediction rate = 0.025424
AUC of ROC = 0.901832
AUC of PRC = 0.700916
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.10247199982404709
difference in average predicted and observed risk = -0.03086100017595292
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[299   1]
 [ 37   2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.08612500131130219
difference in average predicted and observed risk = -0.02891899868869781
number samples = 339
accuracy = 0.887906
precision class 0 = 0.889881
precision class 1 = 0.666667
recall class 0 = 0.996667
recall class 1 = 0.051282
false negative rate = 0.948718
false positive rate = 0.003333
positive prediction rate = 0.00885
AUC of ROC = 0.803846
AUC of PRC = 0.397539
min(+P, Se) = 0.415094

-------------------------------

confusion matrix:
[[433   1]
 [ 38   6]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.07959800213575363
difference in average predicted and observed risk = -0.012451997864246375
number samples = 478
accuracy = 0.91841
precision class 0 = 0.919321
precision class 1 = 0.857143
recall class 0 = 0.997696
recall class 1 = 0.136364
false negative rate = 0.863636
false positive rate = 0.002304
positive prediction rate = 0.014644
AUC of ROC = 0.85908
AUC of PRC = 0.550616
min(+P, Se) = 0.590909

-------------------------------

confusion matrix:
[[388   0]
 [ 36   2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.07409299910068512
difference in average predicted and observed risk = -0.015109000899314884
number samples = 426
accuracy = 0.915493
precision class 0 = 0.915094
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004695
AUC of ROC = 0.834645
AUC of PRC = 0.466271
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[90  0]
 [10  2]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.09584800153970718
difference in average predicted and observed risk = -0.021798998460292818
number samples = 102
accuracy = 0.901961
precision class 0 = 0.9
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.019608
AUC of ROC = 0.928704
AUC of PRC = 0.683282
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.07618299871683121
difference in average predicted and observed risk = -0.01252700128316879
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.809332
AUC of PRC = 0.244264
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[107   1]
 [ 15   4]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09613300114870071
difference in average predicted and observed risk = -0.053472998851299275
number samples = 127
accuracy = 0.874016
precision class 0 = 0.877049
precision class 1 = 0.8
recall class 0 = 0.990741
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.009259
positive prediction rate = 0.03937
AUC of ROC = 0.803119
AUC of PRC = 0.566486
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.1118139997124672
difference in average predicted and observed risk = 0.03286699971246719
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.942857
AUC of PRC = 0.591667
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[732   2]
 [ 75   8]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.08230700343847275
difference in average predicted and observed risk = -0.019283996561527253
number samples = 817
accuracy = 0.905753
precision class 0 = 0.907063
precision class 1 = 0.8
recall class 0 = 0.997275
recall class 1 = 0.096386
false negative rate = 0.903614
false positive rate = 0.002725
positive prediction rate = 0.01224
AUC of ROC = 0.836529
AUC of PRC = 0.481142
min(+P, Se) = 0.494382

-------------------------------

Epoch 00005: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch5.state
Epoch 6/100
 - 255s - loss: 0.2844 - val_loss: 0.2584

==>predicting on train



confusion matrix:
[[2153    2]
 [ 247    8]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.07426100224256516
difference in average predicted and observed risk = -0.031547997757434845
number samples = 2410
accuracy = 0.89668
precision class 0 = 0.897083
precision class 1 = 0.8
recall class 0 = 0.999072
recall class 1 = 0.031373
false negative rate = 0.968627
false positive rate = 0.000928
positive prediction rate = 0.004149
AUC of ROC = 0.799965
AUC of PRC = 0.412723
min(+P, Se) = 0.394737

-------------------------------

confusion matrix:
[[1172    7]
 [ 116    2]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.0791030004620552
difference in average predicted and observed risk = -0.011875999537944798
number samples = 1297
accuracy = 0.905166
precision class 0 = 0.909938
precision class 1 = 0.222222
recall class 0 = 0.994063
recall class 1 = 0.016949
false negative rate = 0.983051
false positive rate = 0.005937
positive prediction rate = 0.006939
AUC of ROC = 0.82207
AUC of PRC = 0.318743
min(+P, Se) = 0.381356

-------------------------------

confusion matrix:
[[655   1]
 [ 71   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.08703199774026871
difference in average predicted and observed risk = -0.014338002259731294
number samples = 730
accuracy = 0.90137
precision class 0 = 0.902204
precision class 1 = 0.75
recall class 0 = 0.998476
recall class 1 = 0.040541
false negative rate = 0.959459
false positive rate = 0.001524
positive prediction rate = 0.005479
AUC of ROC = 0.774782
AUC of PRC = 0.370115
min(+P, Se) = 0.405405

-------------------------------

confusion matrix:
[[167   0]
 [ 22   2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.08283200114965439
difference in average predicted and observed risk = -0.0428219988503456
number samples = 191
accuracy = 0.884817
precision class 0 = 0.883598
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.010471
AUC of ROC = 0.874501
AUC of PRC = 0.68942
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2469    5]
 [ 250    5]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07638700306415558
difference in average predicted and observed risk = -0.017053996935844418
number samples = 2729
accuracy = 0.906559
precision class 0 = 0.908054
precision class 1 = 0.5
recall class 0 = 0.997979
recall class 1 = 0.019608
false negative rate = 0.980392
false positive rate = 0.002021
positive prediction rate = 0.003664
AUC of ROC = 0.795112
AUC of PRC = 0.349697
min(+P, Se) = 0.380392

-------------------------------

confusion matrix:
[[1678    5]
 [ 206   10]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.08028499782085419
difference in average predicted and observed risk = -0.03345900217914581
number samples = 1899
accuracy = 0.888889
precision class 0 = 0.890658
precision class 1 = 0.666667
recall class 0 = 0.997029
recall class 1 = 0.046296
false negative rate = 0.953704
false positive rate = 0.002971
positive prediction rate = 0.007899
AUC of ROC = 0.816132
AUC of PRC = 0.420155
min(+P, Se) = 0.444444

-------------------------------

confusion matrix:
[[548   1]
 [ 75   2]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.07962200045585632
difference in average predicted and observed risk = -0.04338099954414368
number samples = 626
accuracy = 0.878594
precision class 0 = 0.879615
precision class 1 = 0.666667
recall class 0 = 0.998178
recall class 1 = 0.025974
false negative rate = 0.974026
false positive rate = 0.001821
positive prediction rate = 0.004792
AUC of ROC = 0.80096
AUC of PRC = 0.395953
min(+P, Se) = 0.4125

-------------------------------

confusion matrix:
[[2246    3]
 [ 205    3]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.0709799975156784
difference in average predicted and observed risk = -0.01367600248432159
number samples = 2457
accuracy = 0.915344
precision class 0 = 0.916361
precision class 1 = 0.5
recall class 0 = 0.998666
recall class 1 = 0.014423
false negative rate = 0.985577
false positive rate = 0.001334
positive prediction rate = 0.002442
AUC of ROC = 0.793248
AUC of PRC = 0.322668
min(+P, Se) = 0.346154

-------------------------------

confusion matrix:
[[221   2]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.07698799669742584
difference in average predicted and observed risk = -0.023818003302574164
number samples = 248
accuracy = 0.891129
precision class 0 = 0.898374
precision class 1 = 0.0
recall class 0 = 0.991031
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.008969
positive prediction rate = 0.008065
AUC of ROC = 0.743857
AUC of PRC = 0.216093
min(+P, Se) = 0.323529

-------------------------------

confusion matrix:
[[480   1]
 [ 78   4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.09590800106525421
difference in average predicted and observed risk = -0.04973999893474579
number samples = 563
accuracy = 0.85968
precision class 0 = 0.860215
precision class 1 = 0.8
recall class 0 = 0.997921
recall class 1 = 0.04878
false negative rate = 0.951219
false positive rate = 0.002079
positive prediction rate = 0.008881
AUC of ROC = 0.848461
AUC of PRC = 0.539904
min(+P, Se) = 0.54878

-------------------------------

confusion matrix:
[[652   3]
 [ 73   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.08663500100374222
difference in average predicted and observed risk = -0.020993998996257784
number samples = 734
accuracy = 0.896458
precision class 0 = 0.89931
precision class 1 = 0.666667
recall class 0 = 0.99542
recall class 1 = 0.075949
false negative rate = 0.924051
false positive rate = 0.00458
positive prediction rate = 0.012262
AUC of ROC = 0.806261
AUC of PRC = 0.422972
min(+P, Se) = 0.433735

-------------------------------

confusion matrix:
[[4147   10]
 [ 456   15]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.07798600196838379
difference in average predicted and observed risk = -0.023785998031616212
number samples = 4628
accuracy = 0.899309
precision class 0 = 0.900934
precision class 1 = 0.6
recall class 0 = 0.997594
recall class 1 = 0.031847
false negative rate = 0.968153
false positive rate = 0.002406
positive prediction rate = 0.005402
AUC of ROC = 0.804924
AUC of PRC = 0.379674
min(+P, Se) = 0.404211

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 17   2]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.07705900073051453
difference in average predicted and observed risk = -0.0031099992694854778
number samples = 237
accuracy = 0.919831
precision class 0 = 0.927039
precision class 1 = 0.5
recall class 0 = 0.990826
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.009174
positive prediction rate = 0.016878
AUC of ROC = 0.872767
AUC of PRC = 0.397897
min(+P, Se) = 0.47619

-------------------------------

confusion matrix:
[[385   0]
 [ 46   1]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.0752670019865036
difference in average predicted and observed risk = -0.0335289980134964
number samples = 432
accuracy = 0.893519
precision class 0 = 0.893271
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.021277
false negative rate = 0.978723
false positive rate = 0.0
positive prediction rate = 0.002315
AUC of ROC = 0.794142
AUC of PRC = 0.435459
min(+P, Se) = 0.403226

-------------------------------

confusion matrix:
[[105   0]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.09723500162363052
difference in average predicted and observed risk = -0.01293399837636948
number samples = 118
accuracy = 0.915254
precision class 0 = 0.913043
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.0
positive prediction rate = 0.025424
AUC of ROC = 0.915751
AUC of PRC = 0.762513
min(+P, Se) = 0.769231

-------------------------------

confusion matrix:
[[26  0]
 [ 3  1]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.10377699881792068
difference in average predicted and observed risk = -0.029556001182079322
number samples = 30
accuracy = 0.9
precision class 0 = 0.896552
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.033333
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[299   1]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.08261100202798843
difference in average predicted and observed risk = -0.03243299797201156
number samples = 339
accuracy = 0.890855
precision class 0 = 0.892537
precision class 1 = 0.75
recall class 0 = 0.996667
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.003333
positive prediction rate = 0.011799
AUC of ROC = 0.806325
AUC of PRC = 0.415321
min(+P, Se) = 0.409091

-------------------------------

confusion matrix:
[[433   1]
 [ 40   4]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.07815899699926376
difference in average predicted and observed risk = -0.013891003000736243
number samples = 478
accuracy = 0.914226
precision class 0 = 0.915433
precision class 1 = 0.8
recall class 0 = 0.997696
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.002304
positive prediction rate = 0.01046
AUC of ROC = 0.861961
AUC of PRC = 0.560191
min(+P, Se) = 0.568182

-------------------------------

confusion matrix:
[[388   0]
 [ 36   2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.07216700166463852
difference in average predicted and observed risk = -0.017034998335361484
number samples = 426
accuracy = 0.915493
precision class 0 = 0.915094
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004695
AUC of ROC = 0.837561
AUC of PRC = 0.471624
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[90  0]
 [11  1]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.09202899783849716
difference in average predicted and observed risk = -0.02561800216150284
number samples = 102
accuracy = 0.892157
precision class 0 = 0.891089
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.009804
AUC of ROC = 0.938889
AUC of PRC = 0.766474
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 10   1]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.07607799768447876
difference in average predicted and observed risk = -0.012632002315521237
number samples = 124
accuracy = 0.91129
precision class 0 = 0.918033
precision class 1 = 0.5
recall class 0 = 0.99115
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.00885
positive prediction rate = 0.016129
AUC of ROC = 0.804505
AUC of PRC = 0.254554
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[107   1]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09324000030755997
difference in average predicted and observed risk = -0.05636599969244002
number samples = 127
accuracy = 0.866142
precision class 0 = 0.869919
precision class 1 = 0.75
recall class 0 = 0.990741
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009259
positive prediction rate = 0.031496
AUC of ROC = 0.807992
AUC of PRC = 0.591992
min(+P, Se) = 0.526316

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.10420999675989151
difference in average predicted and observed risk = 0.025262996759891507
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.914286
AUC of PRC = 0.538889
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[732   2]
 [ 76   7]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.08000600337982178
difference in average predicted and observed risk = -0.021584996620178223
number samples = 817
accuracy = 0.904529
precision class 0 = 0.905941
precision class 1 = 0.777778
recall class 0 = 0.997275
recall class 1 = 0.084337
false negative rate = 0.915663
false positive rate = 0.002725
positive prediction rate = 0.011016
AUC of ROC = 0.839155
AUC of PRC = 0.494775
min(+P, Se) = 0.506024

-------------------------------

Epoch 00006: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch6.state
Epoch 7/100
 - 252s - loss: 0.2799 - val_loss: 0.2568

==>predicting on train



confusion matrix:
[[2154    1]
 [ 246    9]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.05777300149202347
difference in average predicted and observed risk = -0.04803599850797653
number samples = 2410
accuracy = 0.89751
precision class 0 = 0.8975
precision class 1 = 0.9
recall class 0 = 0.999536
recall class 1 = 0.035294
false negative rate = 0.964706
false positive rate = 0.000464
positive prediction rate = 0.004149
AUC of ROC = 0.837218
AUC of PRC = 0.442158
min(+P, Se) = 0.423221

-------------------------------

confusion matrix:
[[1173    6]
 [ 115    3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.06254900246858597
difference in average predicted and observed risk = -0.028429997531414036
number samples = 1297
accuracy = 0.906708
precision class 0 = 0.910714
precision class 1 = 0.333333
recall class 0 = 0.994911
recall class 1 = 0.025424
false negative rate = 0.974576
false positive rate = 0.005089
positive prediction rate = 0.006939
AUC of ROC = 0.853265
AUC of PRC = 0.339344
min(+P, Se) = 0.423077

-------------------------------

confusion matrix:
[[655   1]
 [ 71   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.07123800367116928
difference in average predicted and observed risk = -0.03013199632883072
number samples = 730
accuracy = 0.90137
precision class 0 = 0.902204
precision class 1 = 0.75
recall class 0 = 0.998476
recall class 1 = 0.040541
false negative rate = 0.959459
false positive rate = 0.001524
positive prediction rate = 0.005479
AUC of ROC = 0.797853
AUC of PRC = 0.398512
min(+P, Se) = 0.397436

-------------------------------

confusion matrix:
[[167   0]
 [ 23   1]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.06755000352859497
difference in average predicted and observed risk = -0.05810399647140502
number samples = 191
accuracy = 0.879581
precision class 0 = 0.878947
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.041667
false negative rate = 0.958333
false positive rate = 0.0
positive prediction rate = 0.005236
AUC of ROC = 0.901447
AUC of PRC = 0.660719
min(+P, Se) = 0.592593

-------------------------------

confusion matrix:
[[2470    4]
 [ 250    5]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.0594789981842041
difference in average predicted and observed risk = -0.033962001815795895
number samples = 2729
accuracy = 0.906926
precision class 0 = 0.908088
precision class 1 = 0.555556
recall class 0 = 0.998383
recall class 1 = 0.019608
false negative rate = 0.980392
false positive rate = 0.001617
positive prediction rate = 0.003298
AUC of ROC = 0.832668
AUC of PRC = 0.366211
min(+P, Se) = 0.406977

-------------------------------

confusion matrix:
[[1679    4]
 [ 205   11]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.06474199891090393
difference in average predicted and observed risk = -0.04900200108909607
number samples = 1899
accuracy = 0.889942
precision class 0 = 0.891189
precision class 1 = 0.733333
recall class 0 = 0.997623
recall class 1 = 0.050926
false negative rate = 0.949074
false positive rate = 0.002377
positive prediction rate = 0.007899
AUC of ROC = 0.844802
AUC of PRC = 0.450897
min(+P, Se) = 0.453704

-------------------------------

confusion matrix:
[[548   1]
 [ 75   2]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.06371700018644333
difference in average predicted and observed risk = -0.05928599981355667
number samples = 626
accuracy = 0.878594
precision class 0 = 0.879615
precision class 1 = 0.666667
recall class 0 = 0.998178
recall class 1 = 0.025974
false negative rate = 0.974026
false positive rate = 0.001821
positive prediction rate = 0.004792
AUC of ROC = 0.85104
AUC of PRC = 0.431789
min(+P, Se) = 0.443038

-------------------------------

confusion matrix:
[[2247    2]
 [ 205    3]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.055326998233795166
difference in average predicted and observed risk = -0.02932900176620483
number samples = 2457
accuracy = 0.915751
precision class 0 = 0.916395
precision class 1 = 0.6
recall class 0 = 0.999111
recall class 1 = 0.014423
false negative rate = 0.985577
false positive rate = 0.000889
positive prediction rate = 0.002035
AUC of ROC = 0.843869
AUC of PRC = 0.365804
min(+P, Se) = 0.380282

-------------------------------

confusion matrix:
[[221   2]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.06026099994778633
difference in average predicted and observed risk = -0.040545000052213676
number samples = 248
accuracy = 0.891129
precision class 0 = 0.898374
precision class 1 = 0.0
recall class 0 = 0.991031
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.008969
positive prediction rate = 0.008065
AUC of ROC = 0.701525
AUC of PRC = 0.212006
min(+P, Se) = 0.321429

-------------------------------

confusion matrix:
[[480   1]
 [ 78   4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.07615400105714798
difference in average predicted and observed risk = -0.06949399894285202
number samples = 563
accuracy = 0.85968
precision class 0 = 0.860215
precision class 1 = 0.8
recall class 0 = 0.997921
recall class 1 = 0.04878
false negative rate = 0.951219
false positive rate = 0.002079
positive prediction rate = 0.008881
AUC of ROC = 0.83766
AUC of PRC = 0.536662
min(+P, Se) = 0.512195

-------------------------------

confusion matrix:
[[653   2]
 [ 72   7]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.07032600045204163
difference in average predicted and observed risk = -0.037302999547958376
number samples = 734
accuracy = 0.899183
precision class 0 = 0.90069
precision class 1 = 0.777778
recall class 0 = 0.996947
recall class 1 = 0.088608
false negative rate = 0.911392
false positive rate = 0.003053
positive prediction rate = 0.012262
AUC of ROC = 0.843985
AUC of PRC = 0.435083
min(+P, Se) = 0.4625

-------------------------------

confusion matrix:
[[4149    8]
 [ 455   16]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.06163899973034859
difference in average predicted and observed risk = -0.040133000269651414
number samples = 4628
accuracy = 0.899957
precision class 0 = 0.901173
precision class 1 = 0.666667
recall class 0 = 0.998076
recall class 1 = 0.03397
false negative rate = 0.96603
false positive rate = 0.001924
positive prediction rate = 0.005186
AUC of ROC = 0.838163
AUC of PRC = 0.403008
min(+P, Se) = 0.428875

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 18   1]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.05976499989628792
difference in average predicted and observed risk = -0.020404000103712086
number samples = 237
accuracy = 0.915612
precision class 0 = 0.923077
precision class 1 = 0.333333
recall class 0 = 0.990826
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.009174
positive prediction rate = 0.012658
AUC of ROC = 0.903428
AUC of PRC = 0.395454
min(+P, Se) = 0.47619

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.05554300174117088
difference in average predicted and observed risk = -0.05325299825882912
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.842443
AUC of PRC = 0.528295
min(+P, Se) = 0.468085

-------------------------------

confusion matrix:
[[105   0]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.08081799745559692
difference in average predicted and observed risk = -0.02935100254440308
number samples = 118
accuracy = 0.915254
precision class 0 = 0.913043
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.0
positive prediction rate = 0.025424
AUC of ROC = 0.862271
AUC of PRC = 0.708686
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[26  0]
 [ 3  1]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.0883840024471283
difference in average predicted and observed risk = -0.04494899755287171
number samples = 30
accuracy = 0.9
precision class 0 = 0.896552
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.033333
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[299   1]
 [ 38   1]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.06398700177669525
difference in average predicted and observed risk = -0.05105699822330474
number samples = 339
accuracy = 0.884956
precision class 0 = 0.88724
precision class 1 = 0.5
recall class 0 = 0.996667
recall class 1 = 0.025641
false negative rate = 0.974359
false positive rate = 0.003333
positive prediction rate = 0.0059
AUC of ROC = 0.847692
AUC of PRC = 0.457765
min(+P, Se) = 0.44186

-------------------------------

confusion matrix:
[[433   1]
 [ 40   4]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.05994800105690956
difference in average predicted and observed risk = -0.032101998943090446
number samples = 478
accuracy = 0.914226
precision class 0 = 0.915433
precision class 1 = 0.8
recall class 0 = 0.997696
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.002304
positive prediction rate = 0.01046
AUC of ROC = 0.871963
AUC of PRC = 0.577051
min(+P, Se) = 0.590909

-------------------------------

confusion matrix:
[[388   0]
 [ 37   1]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.054120998829603195
difference in average predicted and observed risk = -0.03508100117039681
number samples = 426
accuracy = 0.913146
precision class 0 = 0.912941
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.026316
false negative rate = 0.973684
false positive rate = 0.0
positive prediction rate = 0.002347
AUC of ROC = 0.882732
AUC of PRC = 0.526101
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[90  0]
 [11  1]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.07102199643850327
difference in average predicted and observed risk = -0.046625003561496736
number samples = 102
accuracy = 0.892157
precision class 0 = 0.891089
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.009804
AUC of ROC = 0.821296
AUC of PRC = 0.680393
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.05911700055003166
difference in average predicted and observed risk = -0.029592999449968335
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.874497
AUC of PRC = 0.323019
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[107   1]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.07682300359010696
difference in average predicted and observed risk = -0.07278299640989302
number samples = 127
accuracy = 0.866142
precision class 0 = 0.869919
precision class 1 = 0.75
recall class 0 = 0.990741
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009259
positive prediction rate = 0.031496
AUC of ROC = 0.840156
AUC of PRC = 0.613184
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.07789500057697296
difference in average predicted and observed risk = -0.0010519994230270419
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.961905
AUC of PRC = 0.677778
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[732   2]
 [ 78   5]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.06162400171160698
difference in average predicted and observed risk = -0.03996699828839302
number samples = 817
accuracy = 0.902081
precision class 0 = 0.903704
precision class 1 = 0.714286
recall class 0 = 0.997275
recall class 1 = 0.060241
false negative rate = 0.939759
false positive rate = 0.002725
positive prediction rate = 0.008568
AUC of ROC = 0.863596
AUC of PRC = 0.532316
min(+P, Se) = 0.518072

-------------------------------

Epoch 00007: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch7.state
Epoch 8/100
 - 255s - loss: 0.2779 - val_loss: 0.2416

==>predicting on train



confusion matrix:
[[2149    6]
 [ 226   29]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.08624300360679626
difference in average predicted and observed risk = -0.019565996393203736
number samples = 2410
accuracy = 0.903734
precision class 0 = 0.904842
precision class 1 = 0.828571
recall class 0 = 0.997216
recall class 1 = 0.113725
false negative rate = 0.886275
false positive rate = 0.002784
positive prediction rate = 0.014523
AUC of ROC = 0.843936
AUC of PRC = 0.45191
min(+P, Se) = 0.419608

-------------------------------

confusion matrix:
[[1162   17]
 [  99   19]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.09177400171756744
difference in average predicted and observed risk = 0.0007950017175674395
number samples = 1297
accuracy = 0.910563
precision class 0 = 0.921491
precision class 1 = 0.527778
recall class 0 = 0.985581
recall class 1 = 0.161017
false negative rate = 0.838983
false positive rate = 0.014419
positive prediction rate = 0.027756
AUC of ROC = 0.846933
AUC of PRC = 0.343261
min(+P, Se) = 0.420168

-------------------------------

confusion matrix:
[[648   8]
 [ 59  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.10528499633073807
difference in average predicted and observed risk = 0.003914996330738066
number samples = 730
accuracy = 0.908219
precision class 0 = 0.916549
precision class 1 = 0.652174
recall class 0 = 0.987805
recall class 1 = 0.202703
false negative rate = 0.797297
false positive rate = 0.012195
positive prediction rate = 0.031507
AUC of ROC = 0.819998
AUC of PRC = 0.421473
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[166   1]
 [ 18   6]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.09742999821901321
difference in average predicted and observed risk = -0.028224001780986774
number samples = 191
accuracy = 0.900524
precision class 0 = 0.902174
precision class 1 = 0.857143
recall class 0 = 0.994012
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.005988
positive prediction rate = 0.036649
AUC of ROC = 0.92016
AUC of PRC = 0.723059
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2453   21]
 [ 219   36]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08648200333118439
difference in average predicted and observed risk = -0.006958996668815609
number samples = 2729
accuracy = 0.912056
precision class 0 = 0.918039
precision class 1 = 0.631579
recall class 0 = 0.991512
recall class 1 = 0.141176
false negative rate = 0.858824
false positive rate = 0.008488
positive prediction rate = 0.020887
AUC of ROC = 0.841268
AUC of PRC = 0.379413
min(+P, Se) = 0.407843

-------------------------------

confusion matrix:
[[1672   11]
 [ 183   33]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.09812299907207489
difference in average predicted and observed risk = -0.015621000927925108
number samples = 1899
accuracy = 0.897841
precision class 0 = 0.901348
precision class 1 = 0.75
recall class 0 = 0.993464
recall class 1 = 0.152778
false negative rate = 0.847222
false positive rate = 0.006536
positive prediction rate = 0.02317
AUC of ROC = 0.847445
AUC of PRC = 0.459798
min(+P, Se) = 0.449074

-------------------------------

confusion matrix:
[[545   4]
 [ 68   9]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.09437400102615356
difference in average predicted and observed risk = -0.028628998973846437
number samples = 626
accuracy = 0.884984
precision class 0 = 0.88907
precision class 1 = 0.692308
recall class 0 = 0.992714
recall class 1 = 0.116883
false negative rate = 0.883117
false positive rate = 0.007286
positive prediction rate = 0.020767
AUC of ROC = 0.857285
AUC of PRC = 0.441849
min(+P, Se) = 0.448718

-------------------------------

confusion matrix:
[[2240    9]
 [ 187   21]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.08173199743032455
difference in average predicted and observed risk = -0.0029240025696754407
number samples = 2457
accuracy = 0.920228
precision class 0 = 0.92295
precision class 1 = 0.7
recall class 0 = 0.995998
recall class 1 = 0.100962
false negative rate = 0.899038
false positive rate = 0.004002
positive prediction rate = 0.01221
AUC of ROC = 0.842291
AUC of PRC = 0.369884
min(+P, Se) = 0.354545

-------------------------------

confusion matrix:
[[219   4]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.08876000344753265
difference in average predicted and observed risk = -0.012045996552467353
number samples = 248
accuracy = 0.883065
precision class 0 = 0.897541
precision class 1 = 0.0
recall class 0 = 0.982063
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.017937
positive prediction rate = 0.016129
AUC of ROC = 0.710135
AUC of PRC = 0.222462
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[474   7]
 [ 60  22]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.11543399840593338
difference in average predicted and observed risk = -0.03021400159406662
number samples = 563
accuracy = 0.880995
precision class 0 = 0.88764
precision class 1 = 0.758621
recall class 0 = 0.985447
recall class 1 = 0.268293
false negative rate = 0.731707
false positive rate = 0.014553
positive prediction rate = 0.05151
AUC of ROC = 0.864662
AUC of PRC = 0.594793
min(+P, Se) = 0.573171

-------------------------------

confusion matrix:
[[647   8]
 [ 62  17]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.10279099643230438
difference in average predicted and observed risk = -0.00483800356769562
number samples = 734
accuracy = 0.904632
precision class 0 = 0.912553
precision class 1 = 0.68
recall class 0 = 0.987786
recall class 1 = 0.21519
false negative rate = 0.78481
false positive rate = 0.012214
positive prediction rate = 0.03406
AUC of ROC = 0.847753
AUC of PRC = 0.421593
min(+P, Se) = 0.453488

-------------------------------

confusion matrix:
[[4125   32]
 [ 402   69]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.09125900268554688
difference in average predicted and observed risk = -0.010512997314453126
number samples = 4628
accuracy = 0.906223
precision class 0 = 0.911199
precision class 1 = 0.683168
recall class 0 = 0.992302
recall class 1 = 0.146497
false negative rate = 0.853503
false positive rate = 0.007698
positive prediction rate = 0.021824
AUC of ROC = 0.844458
AUC of PRC = 0.414624
min(+P, Se) = 0.426752

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08896899968385696
difference in average predicted and observed risk = 0.00879999968385696
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.90198
AUC of PRC = 0.442008
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[385   0]
 [ 44   3]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.0829479992389679
difference in average predicted and observed risk = -0.02584800076103211
number samples = 432
accuracy = 0.898148
precision class 0 = 0.897436
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.06383
false negative rate = 0.93617
false positive rate = 0.0
positive prediction rate = 0.006944
AUC of ROC = 0.850898
AUC of PRC = 0.496573
min(+P, Se) = 0.479167

-------------------------------

confusion matrix:
[[105   0]
 [  9   4]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.11713899672031403
difference in average predicted and observed risk = 0.006969996720314023
number samples = 118
accuracy = 0.923729
precision class 0 = 0.921053
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.0
positive prediction rate = 0.033898
AUC of ROC = 0.860073
AUC of PRC = 0.672808
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.1287969946861267
difference in average predicted and observed risk = -0.004536005313873298
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[299   1]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.0994110032916069
difference in average predicted and observed risk = -0.01563299670839309
number samples = 339
accuracy = 0.890855
precision class 0 = 0.892537
precision class 1 = 0.75
recall class 0 = 0.996667
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.003333
positive prediction rate = 0.011799
AUC of ROC = 0.837607
AUC of PRC = 0.424483
min(+P, Se) = 0.425

-------------------------------

confusion matrix:
[[432   2]
 [ 34  10]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08557599782943726
difference in average predicted and observed risk = -0.006474002170562751
number samples = 478
accuracy = 0.924686
precision class 0 = 0.927039
precision class 1 = 0.833333
recall class 0 = 0.995392
recall class 1 = 0.227273
false negative rate = 0.772727
false positive rate = 0.004608
positive prediction rate = 0.025105
AUC of ROC = 0.886207
AUC of PRC = 0.590346
min(+P, Se) = 0.577778

-------------------------------

confusion matrix:
[[387   1]
 [ 34   4]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.08075699955224991
difference in average predicted and observed risk = -0.008445000447750095
number samples = 426
accuracy = 0.91784
precision class 0 = 0.91924
precision class 1 = 0.8
recall class 0 = 0.997423
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.002577
positive prediction rate = 0.011737
AUC of ROC = 0.888633
AUC of PRC = 0.502437
min(+P, Se) = 0.478261

-------------------------------

confusion matrix:
[[90  0]
 [ 9  3]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.1057479977607727
difference in average predicted and observed risk = -0.011899002239227296
number samples = 102
accuracy = 0.911765
precision class 0 = 0.909091
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.029412
AUC of ROC = 0.839815
AUC of PRC = 0.647999
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[112   1]
 [ 10   1]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.08615999668836594
difference in average predicted and observed risk = -0.002550003311634061
number samples = 124
accuracy = 0.91129
precision class 0 = 0.918033
precision class 1 = 0.5
recall class 0 = 0.99115
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.00885
positive prediction rate = 0.016129
AUC of ROC = 0.868866
AUC of PRC = 0.304391
min(+P, Se) = 0.352941

-------------------------------

confusion matrix:
[[107   1]
 [ 15   4]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.11036399751901627
difference in average predicted and observed risk = -0.03924200248098372
number samples = 127
accuracy = 0.874016
precision class 0 = 0.877049
precision class 1 = 0.8
recall class 0 = 0.990741
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.009259
positive prediction rate = 0.03937
AUC of ROC = 0.836745
AUC of PRC = 0.607993
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.12412499636411667
difference in average predicted and observed risk = 0.045177996364116665
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.952381
AUC of PRC = 0.622222
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[731   3]
 [ 70  13]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.09131699800491333
difference in average predicted and observed risk = -0.01027400199508667
number samples = 817
accuracy = 0.910649
precision class 0 = 0.912609
precision class 1 = 0.8125
recall class 0 = 0.995913
recall class 1 = 0.156627
false negative rate = 0.843373
false positive rate = 0.004087
positive prediction rate = 0.019584
AUC of ROC = 0.866895
AUC of PRC = 0.519153
min(+P, Se) = 0.493976

-------------------------------

Epoch 00008: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch8.state
Epoch 9/100
 - 254s - loss: 0.2745 - val_loss: 0.2423

==>predicting on train



confusion matrix:
[[2150    5]
 [ 235   20]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.07527700066566467
difference in average predicted and observed risk = -0.030531999334335327
number samples = 2410
accuracy = 0.900415
precision class 0 = 0.901468
precision class 1 = 0.8
recall class 0 = 0.99768
recall class 1 = 0.078431
false negative rate = 0.921569
false positive rate = 0.00232
positive prediction rate = 0.010373
AUC of ROC = 0.849828
AUC of PRC = 0.460302
min(+P, Se) = 0.447059

-------------------------------

confusion matrix:
[[1171    8]
 [ 110    8]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.07983899861574173
difference in average predicted and observed risk = -0.011140001384258275
number samples = 1297
accuracy = 0.909021
precision class 0 = 0.91413
precision class 1 = 0.5
recall class 0 = 0.993215
recall class 1 = 0.067797
false negative rate = 0.932203
false positive rate = 0.006785
positive prediction rate = 0.012336
AUC of ROC = 0.8553
AUC of PRC = 0.356037
min(+P, Se) = 0.423729

-------------------------------

confusion matrix:
[[653   3]
 [ 67   7]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09246700257062912
difference in average predicted and observed risk = -0.008902997429370882
number samples = 730
accuracy = 0.90411
precision class 0 = 0.906944
precision class 1 = 0.7
recall class 0 = 0.995427
recall class 1 = 0.094595
false negative rate = 0.905405
false positive rate = 0.004573
positive prediction rate = 0.013699
AUC of ROC = 0.806876
AUC of PRC = 0.399321
min(+P, Se) = 0.418919

-------------------------------

confusion matrix:
[[167   0]
 [ 20   4]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.08365000039339066
difference in average predicted and observed risk = -0.04200399960660933
number samples = 191
accuracy = 0.895288
precision class 0 = 0.893048
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.020942
AUC of ROC = 0.918164
AUC of PRC = 0.720023
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2467    7]
 [ 239   16]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07587999850511551
difference in average predicted and observed risk = -0.017561001494884487
number samples = 2729
accuracy = 0.909857
precision class 0 = 0.911678
precision class 1 = 0.695652
recall class 0 = 0.997171
recall class 1 = 0.062745
false negative rate = 0.937255
false positive rate = 0.002829
positive prediction rate = 0.008428
AUC of ROC = 0.845459
AUC of PRC = 0.391301
min(+P, Se) = 0.423529

-------------------------------

confusion matrix:
[[1674    9]
 [ 193   23]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.08497700095176697
difference in average predicted and observed risk = -0.02876699904823303
number samples = 1899
accuracy = 0.893628
precision class 0 = 0.896626
precision class 1 = 0.71875
recall class 0 = 0.994652
recall class 1 = 0.106481
false negative rate = 0.893519
false positive rate = 0.005348
positive prediction rate = 0.016851
AUC of ROC = 0.849373
AUC of PRC = 0.459363
min(+P, Se) = 0.46789

-------------------------------

confusion matrix:
[[547   2]
 [ 71   6]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.08430299907922745
difference in average predicted and observed risk = -0.038700000920772554
number samples = 626
accuracy = 0.883387
precision class 0 = 0.885113
precision class 1 = 0.75
recall class 0 = 0.996357
recall class 1 = 0.077922
false negative rate = 0.922078
false positive rate = 0.003643
positive prediction rate = 0.01278
AUC of ROC = 0.856291
AUC of PRC = 0.460716
min(+P, Se) = 0.480519

-------------------------------

confusion matrix:
[[2245    4]
 [ 195   13]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07123900204896927
difference in average predicted and observed risk = -0.013416997951030726
number samples = 2457
accuracy = 0.919007
precision class 0 = 0.920082
precision class 1 = 0.764706
recall class 0 = 0.998221
recall class 1 = 0.0625
false negative rate = 0.9375
false positive rate = 0.001779
positive prediction rate = 0.006919
AUC of ROC = 0.853174
AUC of PRC = 0.37464
min(+P, Se) = 0.38756

-------------------------------

confusion matrix:
[[220   3]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.07924900203943253
difference in average predicted and observed risk = -0.02155699796056748
number samples = 248
accuracy = 0.887097
precision class 0 = 0.897959
precision class 1 = 0.0
recall class 0 = 0.986547
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.013453
positive prediction rate = 0.012097
AUC of ROC = 0.690404
AUC of PRC = 0.216657
min(+P, Se) = 0.32

-------------------------------

confusion matrix:
[[478   3]
 [ 72  10]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.09813199937343597
difference in average predicted and observed risk = -0.047516000626564026
number samples = 563
accuracy = 0.866785
precision class 0 = 0.869091
precision class 1 = 0.769231
recall class 0 = 0.993763
recall class 1 = 0.121951
false negative rate = 0.878049
false positive rate = 0.006237
positive prediction rate = 0.023091
AUC of ROC = 0.857309
AUC of PRC = 0.569787
min(+P, Se) = 0.554217

-------------------------------

confusion matrix:
[[651   4]
 [ 69  10]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.08956199884414673
difference in average predicted and observed risk = -0.018067001155853274
number samples = 734
accuracy = 0.900545
precision class 0 = 0.904167
precision class 1 = 0.714286
recall class 0 = 0.993893
recall class 1 = 0.126582
false negative rate = 0.873418
false positive rate = 0.006107
positive prediction rate = 0.019074
AUC of ROC = 0.853454
AUC of PRC = 0.442071
min(+P, Se) = 0.4875

-------------------------------

confusion matrix:
[[4141   16]
 [ 432   39]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.07961300015449524
difference in average predicted and observed risk = -0.022158999845504762
number samples = 4628
accuracy = 0.903198
precision class 0 = 0.905532
precision class 1 = 0.709091
recall class 0 = 0.996151
recall class 1 = 0.082803
false negative rate = 0.917197
false positive rate = 0.003849
positive prediction rate = 0.011884
AUC of ROC = 0.847564
AUC of PRC = 0.421845
min(+P, Se) = 0.440928

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 16   3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.07756000012159348
difference in average predicted and observed risk = -0.002608999878406529
number samples = 237
accuracy = 0.924051
precision class 0 = 0.931035
precision class 1 = 0.6
recall class 0 = 0.990826
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009174
positive prediction rate = 0.021097
AUC of ROC = 0.899565
AUC of PRC = 0.436526
min(+P, Se) = 0.478261

-------------------------------

confusion matrix:
[[385   0]
 [ 46   1]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.07177799940109253
difference in average predicted and observed risk = -0.037018000598907475
number samples = 432
accuracy = 0.893519
precision class 0 = 0.893271
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.021277
false negative rate = 0.978723
false positive rate = 0.0
positive prediction rate = 0.002315
AUC of ROC = 0.854877
AUC of PRC = 0.503052
min(+P, Se) = 0.471698

-------------------------------

confusion matrix:
[[105   0]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10244499891996384
difference in average predicted and observed risk = -0.007724001080036166
number samples = 118
accuracy = 0.915254
precision class 0 = 0.913043
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.0
positive prediction rate = 0.025424
AUC of ROC = 0.85348
AUC of PRC = 0.694071
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.10854099690914154
difference in average predicted and observed risk = -0.024792003090858467
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[299   1]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.0831570029258728
difference in average predicted and observed risk = -0.03188699707412719
number samples = 339
accuracy = 0.890855
precision class 0 = 0.892537
precision class 1 = 0.75
recall class 0 = 0.996667
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.003333
positive prediction rate = 0.011799
AUC of ROC = 0.857778
AUC of PRC = 0.462545
min(+P, Se) = 0.439024

-------------------------------

confusion matrix:
[[433   1]
 [ 38   6]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.07645200192928314
difference in average predicted and observed risk = -0.015597998070716865
number samples = 478
accuracy = 0.91841
precision class 0 = 0.919321
precision class 1 = 0.857143
recall class 0 = 0.997696
recall class 1 = 0.136364
false negative rate = 0.863636
false positive rate = 0.002304
positive prediction rate = 0.014644
AUC of ROC = 0.875995
AUC of PRC = 0.576786
min(+P, Se) = 0.590909

-------------------------------

confusion matrix:
[[388   0]
 [ 36   2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.0695130005478859
difference in average predicted and observed risk = -0.01968899945211411
number samples = 426
accuracy = 0.915493
precision class 0 = 0.915094
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004695
AUC of ROC = 0.887005
AUC of PRC = 0.50219
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[90  0]
 [10  2]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.09241499751806259
difference in average predicted and observed risk = -0.02523200248193741
number samples = 102
accuracy = 0.901961
precision class 0 = 0.9
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.019608
AUC of ROC = 0.827778
AUC of PRC = 0.670171
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 10   1]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.0737299993634224
difference in average predicted and observed risk = -0.014980000636577603
number samples = 124
accuracy = 0.91129
precision class 0 = 0.918033
precision class 1 = 0.5
recall class 0 = 0.99115
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.00885
positive prediction rate = 0.016129
AUC of ROC = 0.884151
AUC of PRC = 0.325405
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[107   1]
 [ 15   4]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09842299669981003
difference in average predicted and observed risk = -0.05118300330018996
number samples = 127
accuracy = 0.874016
precision class 0 = 0.877049
precision class 1 = 0.8
recall class 0 = 0.990741
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.009259
positive prediction rate = 0.03937
AUC of ROC = 0.847953
AUC of PRC = 0.638657
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.10666699707508087
difference in average predicted and observed risk = 0.02771999707508087
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.914286
AUC of PRC = 0.364815
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[732   2]
 [ 74   9]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.07923399657011032
difference in average predicted and observed risk = -0.02235700342988968
number samples = 817
accuracy = 0.906977
precision class 0 = 0.908189
precision class 1 = 0.818182
recall class 0 = 0.997275
recall class 1 = 0.108434
false negative rate = 0.891566
false positive rate = 0.002725
positive prediction rate = 0.013464
AUC of ROC = 0.869358
AUC of PRC = 0.524495
min(+P, Se) = 0.518072

-------------------------------

Epoch 00009: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch9.state
Epoch 10/100
 - 252s - loss: 0.2808 - val_loss: 0.2494

==>predicting on train



confusion matrix:
[[2150    5]
 [ 234   21]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.06403599679470062
difference in average predicted and observed risk = -0.04177300320529938
number samples = 2410
accuracy = 0.90083
precision class 0 = 0.901846
precision class 1 = 0.807692
recall class 0 = 0.99768
recall class 1 = 0.082353
false negative rate = 0.917647
false positive rate = 0.00232
positive prediction rate = 0.010788
AUC of ROC = 0.842837
AUC of PRC = 0.440128
min(+P, Se) = 0.431373

-------------------------------

confusion matrix:
[[1169   10]
 [ 111    7]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.07047899812459946
difference in average predicted and observed risk = -0.020500001875400548
number samples = 1297
accuracy = 0.906708
precision class 0 = 0.913281
precision class 1 = 0.411765
recall class 0 = 0.991518
recall class 1 = 0.059322
false negative rate = 0.940678
false positive rate = 0.008482
positive prediction rate = 0.013107
AUC of ROC = 0.845812
AUC of PRC = 0.341533
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[654   2]
 [ 63  11]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.0814569965004921
difference in average predicted and observed risk = -0.019913003499507906
number samples = 730
accuracy = 0.910959
precision class 0 = 0.912134
precision class 1 = 0.846154
recall class 0 = 0.996951
recall class 1 = 0.148649
false negative rate = 0.851351
false positive rate = 0.003049
positive prediction rate = 0.017808
AUC of ROC = 0.825519
AUC of PRC = 0.394188
min(+P, Se) = 0.418919

-------------------------------

confusion matrix:
[[167   0]
 [ 19   5]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.07366500049829483
difference in average predicted and observed risk = -0.05198899950170516
number samples = 191
accuracy = 0.900524
precision class 0 = 0.897849
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.208333
false negative rate = 0.791667
false positive rate = 0.0
positive prediction rate = 0.026178
AUC of ROC = 0.913423
AUC of PRC = 0.710524
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2466    8]
 [ 238   17]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.06633000075817108
difference in average predicted and observed risk = -0.027110999241828915
number samples = 2729
accuracy = 0.909857
precision class 0 = 0.911982
precision class 1 = 0.68
recall class 0 = 0.996766
recall class 1 = 0.066667
false negative rate = 0.933333
false positive rate = 0.003234
positive prediction rate = 0.009161
AUC of ROC = 0.841601
AUC of PRC = 0.376525
min(+P, Se) = 0.411765

-------------------------------

confusion matrix:
[[1674    9]
 [ 189   27]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.07280600070953369
difference in average predicted and observed risk = -0.040937999290466306
number samples = 1899
accuracy = 0.895735
precision class 0 = 0.898551
precision class 1 = 0.75
recall class 0 = 0.994652
recall class 1 = 0.125
false negative rate = 0.875
false positive rate = 0.005348
positive prediction rate = 0.018957
AUC of ROC = 0.845365
AUC of PRC = 0.438698
min(+P, Se) = 0.436364

-------------------------------

confusion matrix:
[[547   2]
 [ 72   5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.07267200201749802
difference in average predicted and observed risk = -0.050330997982501985
number samples = 626
accuracy = 0.881789
precision class 0 = 0.883683
precision class 1 = 0.714286
recall class 0 = 0.996357
recall class 1 = 0.064935
false negative rate = 0.935065
false positive rate = 0.003643
positive prediction rate = 0.011182
AUC of ROC = 0.845457
AUC of PRC = 0.429613
min(+P, Se) = 0.457831

-------------------------------

confusion matrix:
[[2245    4]
 [ 193   15]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.060029998421669006
difference in average predicted and observed risk = -0.02462600157833099
number samples = 2457
accuracy = 0.919821
precision class 0 = 0.920837
precision class 1 = 0.789474
recall class 0 = 0.998221
recall class 1 = 0.072115
false negative rate = 0.927885
false positive rate = 0.001779
positive prediction rate = 0.007733
AUC of ROC = 0.842956
AUC of PRC = 0.363553
min(+P, Se) = 0.361905

-------------------------------

confusion matrix:
[[220   3]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.06668700277805328
difference in average predicted and observed risk = -0.03411899722194672
number samples = 248
accuracy = 0.887097
precision class 0 = 0.897959
precision class 1 = 0.0
recall class 0 = 0.986547
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.013453
positive prediction rate = 0.012097
AUC of ROC = 0.714081
AUC of PRC = 0.216416
min(+P, Se) = 0.346154

-------------------------------

confusion matrix:
[[478   3]
 [ 71  11]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.09123799949884415
difference in average predicted and observed risk = -0.05441000050115585
number samples = 563
accuracy = 0.868561
precision class 0 = 0.870674
precision class 1 = 0.785714
recall class 0 = 0.993763
recall class 1 = 0.134146
false negative rate = 0.865854
false positive rate = 0.006237
positive prediction rate = 0.024867
AUC of ROC = 0.868161
AUC of PRC = 0.575013
min(+P, Se) = 0.54878

-------------------------------

confusion matrix:
[[650   5]
 [ 66  13]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.0795380026102066
difference in average predicted and observed risk = -0.0280909973897934
number samples = 734
accuracy = 0.90327
precision class 0 = 0.907821
precision class 1 = 0.722222
recall class 0 = 0.992366
recall class 1 = 0.164557
false negative rate = 0.835443
false positive rate = 0.007634
positive prediction rate = 0.024523
AUC of ROC = 0.847058
AUC of PRC = 0.427311
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[4140   17]
 [ 427   44]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.06898699700832367
difference in average predicted and observed risk = -0.03278500299167633
number samples = 4628
accuracy = 0.904062
precision class 0 = 0.906503
precision class 1 = 0.721311
recall class 0 = 0.995911
recall class 1 = 0.093418
false negative rate = 0.906582
false positive rate = 0.004089
positive prediction rate = 0.013181
AUC of ROC = 0.843667
AUC of PRC = 0.405899
min(+P, Se) = 0.425847

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 16   3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.0683870017528534
difference in average predicted and observed risk = -0.01178199824714661
number samples = 237
accuracy = 0.924051
precision class 0 = 0.931035
precision class 1 = 0.6
recall class 0 = 0.990826
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009174
positive prediction rate = 0.021097
AUC of ROC = 0.894013
AUC of PRC = 0.385762
min(+P, Se) = 0.458333

-------------------------------

confusion matrix:
[[385   0]
 [ 45   2]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.06223300099372864
difference in average predicted and observed risk = -0.046562999006271366
number samples = 432
accuracy = 0.895833
precision class 0 = 0.895349
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.042553
false negative rate = 0.957447
false positive rate = 0.0
positive prediction rate = 0.00463
AUC of ROC = 0.852059
AUC of PRC = 0.470347
min(+P, Se) = 0.45283

-------------------------------

confusion matrix:
[[105   0]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.09426899999380112
difference in average predicted and observed risk = -0.015900000006198886
number samples = 118
accuracy = 0.915254
precision class 0 = 0.913043
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.0
positive prediction rate = 0.025424
AUC of ROC = 0.846886
AUC of PRC = 0.648071
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.09395900368690491
difference in average predicted and observed risk = -0.0393739963130951
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[299   1]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.07484500110149384
difference in average predicted and observed risk = -0.04019899889850616
number samples = 339
accuracy = 0.890855
precision class 0 = 0.892537
precision class 1 = 0.75
recall class 0 = 0.996667
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.003333
positive prediction rate = 0.011799
AUC of ROC = 0.833248
AUC of PRC = 0.403073
min(+P, Se) = 0.410256

-------------------------------

confusion matrix:
[[433   1]
 [ 37   7]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.06623899936676025
difference in average predicted and observed risk = -0.025811000633239753
number samples = 478
accuracy = 0.920502
precision class 0 = 0.921277
precision class 1 = 0.875
recall class 0 = 0.997696
recall class 1 = 0.159091
false negative rate = 0.840909
false positive rate = 0.002304
positive prediction rate = 0.016736
AUC of ROC = 0.885526
AUC of PRC = 0.545295
min(+P, Se) = 0.590909

-------------------------------

confusion matrix:
[[388   0]
 [ 35   3]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.060357000678777695
difference in average predicted and observed risk = -0.02884499932122231
number samples = 426
accuracy = 0.91784
precision class 0 = 0.917258
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.078947
false negative rate = 0.921053
false positive rate = 0.0
positive prediction rate = 0.007042
AUC of ROC = 0.887547
AUC of PRC = 0.480365
min(+P, Se) = 0.447368

-------------------------------

confusion matrix:
[[90  0]
 [10  2]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.08386299759149551
difference in average predicted and observed risk = -0.03378400240850449
number samples = 102
accuracy = 0.901961
precision class 0 = 0.9
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.019608
AUC of ROC = 0.837037
AUC of PRC = 0.612966
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[112   1]
 [ 10   1]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.06412900239229202
difference in average predicted and observed risk = -0.024580997607707974
number samples = 124
accuracy = 0.91129
precision class 0 = 0.918033
precision class 1 = 0.5
recall class 0 = 0.99115
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.00885
positive prediction rate = 0.016129
AUC of ROC = 0.876106
AUC of PRC = 0.293095
min(+P, Se) = 0.384615

-------------------------------

confusion matrix:
[[107   1]
 [ 15   4]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.08603700250387192
difference in average predicted and observed risk = -0.06356899749612807
number samples = 127
accuracy = 0.874016
precision class 0 = 0.877049
precision class 1 = 0.8
recall class 0 = 0.990741
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.009259
positive prediction rate = 0.03937
AUC of ROC = 0.828947
AUC of PRC = 0.618021
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.10237099975347519
difference in average predicted and observed risk = 0.023423999753475186
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.942857
AUC of PRC = 0.591667
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[732   2]
 [ 73  10]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.06981000304222107
difference in average predicted and observed risk = -0.03178099695777893
number samples = 817
accuracy = 0.908201
precision class 0 = 0.909317
precision class 1 = 0.833333
recall class 0 = 0.997275
recall class 1 = 0.120482
false negative rate = 0.879518
false positive rate = 0.002725
positive prediction rate = 0.014688
AUC of ROC = 0.864138
AUC of PRC = 0.489885
min(+P, Se) = 0.494118

-------------------------------

Epoch 00010: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch10.state
Epoch 11/100
 - 252s - loss: 0.2734 - val_loss: 0.2417

==>predicting on train



confusion matrix:
[[2151    4]
 [ 235   20]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.09628099948167801
difference in average predicted and observed risk = -0.009528000518321991
number samples = 2410
accuracy = 0.90083
precision class 0 = 0.901509
precision class 1 = 0.833333
recall class 0 = 0.998144
recall class 1 = 0.078431
false negative rate = 0.921569
false positive rate = 0.001856
positive prediction rate = 0.009959
AUC of ROC = 0.838531
AUC of PRC = 0.459125
min(+P, Se) = 0.44358

-------------------------------

confusion matrix:
[[1169   10]
 [ 112    6]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.10008600354194641
difference in average predicted and observed risk = 0.009107003541946407
number samples = 1297
accuracy = 0.905937
precision class 0 = 0.912568
precision class 1 = 0.375
recall class 0 = 0.991518
recall class 1 = 0.050847
false negative rate = 0.949153
false positive rate = 0.008482
positive prediction rate = 0.012336
AUC of ROC = 0.843274
AUC of PRC = 0.352737
min(+P, Se) = 0.408333

-------------------------------

confusion matrix:
[[653   3]
 [ 62  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.11498799920082092
difference in average predicted and observed risk = 0.013617999200820921
number samples = 730
accuracy = 0.910959
precision class 0 = 0.913287
precision class 1 = 0.8
recall class 0 = 0.995427
recall class 1 = 0.162162
false negative rate = 0.837838
false positive rate = 0.004573
positive prediction rate = 0.020548
AUC of ROC = 0.818103
AUC of PRC = 0.432835
min(+P, Se) = 0.434211

-------------------------------

confusion matrix:
[[167   0]
 [ 20   4]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.10548199713230133
difference in average predicted and observed risk = -0.020172002867698657
number samples = 191
accuracy = 0.895288
precision class 0 = 0.893048
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.020942
AUC of ROC = 0.903443
AUC of PRC = 0.710283
min(+P, Se) = 0.64

-------------------------------

confusion matrix:
[[2465    9]
 [ 239   16]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.09545999765396118
difference in average predicted and observed risk = 0.0020189976539611854
number samples = 2729
accuracy = 0.909124
precision class 0 = 0.911612
precision class 1 = 0.64
recall class 0 = 0.996362
recall class 1 = 0.062745
false negative rate = 0.937255
false positive rate = 0.003638
positive prediction rate = 0.009161
AUC of ROC = 0.835743
AUC of PRC = 0.382078
min(+P, Se) = 0.431907

-------------------------------

confusion matrix:
[[1675    8]
 [ 190   26]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.10817699879407883
difference in average predicted and observed risk = -0.005567001205921171
number samples = 1899
accuracy = 0.895735
precision class 0 = 0.898123
precision class 1 = 0.764706
recall class 0 = 0.995247
recall class 1 = 0.12037
false negative rate = 0.87963
false positive rate = 0.004753
positive prediction rate = 0.017904
AUC of ROC = 0.842653
AUC of PRC = 0.472022
min(+P, Se) = 0.449074

-------------------------------

confusion matrix:
[[547   2]
 [ 73   4]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.1039780005812645
difference in average predicted and observed risk = -0.019024999418735505
number samples = 626
accuracy = 0.880192
precision class 0 = 0.882258
precision class 1 = 0.666667
recall class 0 = 0.996357
recall class 1 = 0.051948
false negative rate = 0.948052
false positive rate = 0.003643
positive prediction rate = 0.009585
AUC of ROC = 0.848934
AUC of PRC = 0.446107
min(+P, Se) = 0.476744

-------------------------------

confusion matrix:
[[2245    4]
 [ 195   13]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.09188400208950043
difference in average predicted and observed risk = 0.007228002089500432
number samples = 2457
accuracy = 0.919007
precision class 0 = 0.920082
precision class 1 = 0.764706
recall class 0 = 0.998221
recall class 1 = 0.0625
false negative rate = 0.9375
false positive rate = 0.001779
positive prediction rate = 0.006919
AUC of ROC = 0.835748
AUC of PRC = 0.370791
min(+P, Se) = 0.370192

-------------------------------

confusion matrix:
[[221   2]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.0978740006685257
difference in average predicted and observed risk = -0.002931999331474311
number samples = 248
accuracy = 0.891129
precision class 0 = 0.898374
precision class 1 = 0.0
recall class 0 = 0.991031
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.008969
positive prediction rate = 0.008065
AUC of ROC = 0.712466
AUC of PRC = 0.232476
min(+P, Se) = 0.346154

-------------------------------

confusion matrix:
[[477   4]
 [ 67  15]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.12214899808168411
difference in average predicted and observed risk = -0.023499001918315887
number samples = 563
accuracy = 0.87389
precision class 0 = 0.876838
precision class 1 = 0.789474
recall class 0 = 0.991684
recall class 1 = 0.182927
false negative rate = 0.817073
false positive rate = 0.008316
positive prediction rate = 0.033748
AUC of ROC = 0.868034
AUC of PRC = 0.600375
min(+P, Se) = 0.573171

-------------------------------

confusion matrix:
[[650   5]
 [ 69  10]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.11177899688482285
difference in average predicted and observed risk = 0.004149996884822843
number samples = 734
accuracy = 0.899183
precision class 0 = 0.904033
precision class 1 = 0.666667
recall class 0 = 0.992366
recall class 1 = 0.126582
false negative rate = 0.873418
false positive rate = 0.007634
positive prediction rate = 0.020436
AUC of ROC = 0.844236
AUC of PRC = 0.455094
min(+P, Se) = 0.481481

-------------------------------

confusion matrix:
[[4140   17]
 [ 429   42]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.10067799687385559
difference in average predicted and observed risk = -0.0010940031261444105
number samples = 4628
accuracy = 0.90363
precision class 0 = 0.906106
precision class 1 = 0.711864
recall class 0 = 0.995911
recall class 1 = 0.089172
false negative rate = 0.910828
false positive rate = 0.004089
positive prediction rate = 0.012748
AUC of ROC = 0.839551
AUC of PRC = 0.426856
min(+P, Se) = 0.43949

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 16   3]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.0966079980134964
difference in average predicted and observed risk = 0.016438998013496395
number samples = 237
accuracy = 0.924051
precision class 0 = 0.931035
precision class 1 = 0.6
recall class 0 = 0.990826
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009174
positive prediction rate = 0.021097
AUC of ROC = 0.886045
AUC of PRC = 0.449014
min(+P, Se) = 0.478261

-------------------------------

confusion matrix:
[[385   0]
 [ 45   2]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.09509599953889847
difference in average predicted and observed risk = -0.013700000461101536
number samples = 432
accuracy = 0.895833
precision class 0 = 0.895349
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.042553
false negative rate = 0.957447
false positive rate = 0.0
positive prediction rate = 0.00463
AUC of ROC = 0.86604
AUC of PRC = 0.542622
min(+P, Se) = 0.490196

-------------------------------

confusion matrix:
[[105   0]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.1253339946269989
difference in average predicted and observed risk = 0.015164994626998898
number samples = 118
accuracy = 0.915254
precision class 0 = 0.913043
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.0
positive prediction rate = 0.025424
AUC of ROC = 0.875458
AUC of PRC = 0.716144
min(+P, Se) = 0.714286

-------------------------------

confusion matrix:
[[26  0]
 [ 3  1]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.1256980001926422
difference in average predicted and observed risk = -0.007634999807357795
number samples = 30
accuracy = 0.9
precision class 0 = 0.896552
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.033333
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[299   1]
 [ 35   4]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.10869099944829941
difference in average predicted and observed risk = -0.0063530005517005855
number samples = 339
accuracy = 0.893805
precision class 0 = 0.89521
precision class 1 = 0.8
recall class 0 = 0.996667
recall class 1 = 0.102564
false negative rate = 0.897436
false positive rate = 0.003333
positive prediction rate = 0.014749
AUC of ROC = 0.841197
AUC of PRC = 0.466747
min(+P, Se) = 0.422222

-------------------------------

confusion matrix:
[[433   1]
 [ 39   5]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.09558899700641632
difference in average predicted and observed risk = 0.003538997006416314
number samples = 478
accuracy = 0.916318
precision class 0 = 0.917373
precision class 1 = 0.833333
recall class 0 = 0.997696
recall class 1 = 0.113636
false negative rate = 0.886364
false positive rate = 0.002304
positive prediction rate = 0.012552
AUC of ROC = 0.898356
AUC of PRC = 0.613895
min(+P, Se) = 0.595745

-------------------------------

confusion matrix:
[[388   0]
 [ 36   2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.09129499644041061
difference in average predicted and observed risk = 0.0020929964404106105
number samples = 426
accuracy = 0.915493
precision class 0 = 0.915094
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004695
AUC of ROC = 0.879273
AUC of PRC = 0.526179
min(+P, Se) = 0.538462

-------------------------------

confusion matrix:
[[90  0]
 [10  2]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.11489000171422958
difference in average predicted and observed risk = -0.002756998285770418
number samples = 102
accuracy = 0.901961
precision class 0 = 0.9
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.019608
AUC of ROC = 0.885185
AUC of PRC = 0.720141
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 10   1]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.0964059978723526
difference in average predicted and observed risk = 0.007695997872352603
number samples = 124
accuracy = 0.91129
precision class 0 = 0.918033
precision class 1 = 0.5
recall class 0 = 0.99115
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.00885
positive prediction rate = 0.016129
AUC of ROC = 0.864843
AUC of PRC = 0.328993
min(+P, Se) = 0.384615

-------------------------------

confusion matrix:
[[107   1]
 [ 15   4]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.11980800330638885
difference in average predicted and observed risk = -0.029797996693611134
number samples = 127
accuracy = 0.874016
precision class 0 = 0.877049
precision class 1 = 0.8
recall class 0 = 0.990741
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.009259
positive prediction rate = 0.03937
AUC of ROC = 0.862086
AUC of PRC = 0.607905
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.12519900500774384
difference in average predicted and observed risk = 0.04625200500774383
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.942857
AUC of PRC = 0.599206
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[732   2]
 [ 74   9]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.10102599859237671
difference in average predicted and observed risk = -0.0005650014076232918
number samples = 817
accuracy = 0.906977
precision class 0 = 0.908189
precision class 1 = 0.818182
recall class 0 = 0.997275
recall class 1 = 0.108434
false negative rate = 0.891566
false positive rate = 0.002725
positive prediction rate = 0.013464
AUC of ROC = 0.874873
AUC of PRC = 0.542811
min(+P, Se) = 0.53012

-------------------------------

Epoch 00011: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch11.state
Epoch 12/100
 - 256s - loss: 0.2700 - val_loss: 0.2418

==>predicting on train



confusion matrix:
[[2152    3]
 [ 237   18]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.07487200200557709
difference in average predicted and observed risk = -0.030936997994422913
number samples = 2410
accuracy = 0.900415
precision class 0 = 0.900795
precision class 1 = 0.857143
recall class 0 = 0.998608
recall class 1 = 0.070588
false negative rate = 0.929412
false positive rate = 0.001392
positive prediction rate = 0.008714
AUC of ROC = 0.840604
AUC of PRC = 0.455724
min(+P, Se) = 0.419608

-------------------------------

confusion matrix:
[[1170    9]
 [ 110    8]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.07974299788475037
difference in average predicted and observed risk = -0.011236002115249638
number samples = 1297
accuracy = 0.90825
precision class 0 = 0.914062
precision class 1 = 0.470588
recall class 0 = 0.992366
recall class 1 = 0.067797
false negative rate = 0.932203
false positive rate = 0.007634
positive prediction rate = 0.013107
AUC of ROC = 0.843001
AUC of PRC = 0.363725
min(+P, Se) = 0.425

-------------------------------

confusion matrix:
[[653   3]
 [ 63  11]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09430799633264542
difference in average predicted and observed risk = -0.0070620036673545855
number samples = 730
accuracy = 0.909589
precision class 0 = 0.912011
precision class 1 = 0.785714
recall class 0 = 0.995427
recall class 1 = 0.148649
false negative rate = 0.851351
false positive rate = 0.004573
positive prediction rate = 0.019178
AUC of ROC = 0.827538
AUC of PRC = 0.440647
min(+P, Se) = 0.432432

-------------------------------

confusion matrix:
[[167   0]
 [ 21   3]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.08616899698972702
difference in average predicted and observed risk = -0.03948500301027297
number samples = 191
accuracy = 0.890052
precision class 0 = 0.888298
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.125
false negative rate = 0.875
false positive rate = 0.0
positive prediction rate = 0.015707
AUC of ROC = 0.904441
AUC of PRC = 0.713039
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2467    7]
 [ 239   16]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07479199767112732
difference in average predicted and observed risk = -0.018649002328872677
number samples = 2729
accuracy = 0.909857
precision class 0 = 0.911678
precision class 1 = 0.695652
recall class 0 = 0.997171
recall class 1 = 0.062745
false negative rate = 0.937255
false positive rate = 0.002829
positive prediction rate = 0.008428
AUC of ROC = 0.83987
AUC of PRC = 0.389479
min(+P, Se) = 0.431373

-------------------------------

confusion matrix:
[[1675    8]
 [ 192   24]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.08692099899053574
difference in average predicted and observed risk = -0.026823001009464262
number samples = 1899
accuracy = 0.894681
precision class 0 = 0.897161
precision class 1 = 0.75
recall class 0 = 0.995247
recall class 1 = 0.111111
false negative rate = 0.888889
false positive rate = 0.004753
positive prediction rate = 0.016851
AUC of ROC = 0.842862
AUC of PRC = 0.466252
min(+P, Se) = 0.435185

-------------------------------

confusion matrix:
[[548   1]
 [ 72   5]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.08376699686050415
difference in average predicted and observed risk = -0.03923600313949585
number samples = 626
accuracy = 0.883387
precision class 0 = 0.883871
precision class 1 = 0.833333
recall class 0 = 0.998178
recall class 1 = 0.064935
false negative rate = 0.935065
false positive rate = 0.001821
positive prediction rate = 0.009585
AUC of ROC = 0.849857
AUC of PRC = 0.442313
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[2246    3]
 [ 196   12]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07022199779748917
difference in average predicted and observed risk = -0.014434002202510829
number samples = 2457
accuracy = 0.919007
precision class 0 = 0.919738
precision class 1 = 0.8
recall class 0 = 0.998666
recall class 1 = 0.057692
false negative rate = 0.942308
false positive rate = 0.001334
positive prediction rate = 0.006105
AUC of ROC = 0.836605
AUC of PRC = 0.367907
min(+P, Se) = 0.365385

-------------------------------

confusion matrix:
[[220   3]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.07388000190258026
difference in average predicted and observed risk = -0.026925998097419745
number samples = 248
accuracy = 0.887097
precision class 0 = 0.897959
precision class 1 = 0.0
recall class 0 = 0.986547
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.013453
positive prediction rate = 0.012097
AUC of ROC = 0.715157
AUC of PRC = 0.227067
min(+P, Se) = 0.36

-------------------------------

confusion matrix:
[[477   4]
 [ 69  13]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.10256700217723846
difference in average predicted and observed risk = -0.043080997822761535
number samples = 563
accuracy = 0.870337
precision class 0 = 0.873626
precision class 1 = 0.764706
recall class 0 = 0.991684
recall class 1 = 0.158537
false negative rate = 0.841463
false positive rate = 0.008316
positive prediction rate = 0.030195
AUC of ROC = 0.869631
AUC of PRC = 0.601109
min(+P, Se) = 0.573171

-------------------------------

confusion matrix:
[[651   4]
 [ 69  10]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09282000362873077
difference in average predicted and observed risk = -0.014808996371269229
number samples = 734
accuracy = 0.900545
precision class 0 = 0.904167
precision class 1 = 0.714286
recall class 0 = 0.993893
recall class 1 = 0.126582
false negative rate = 0.873418
false positive rate = 0.006107
positive prediction rate = 0.019074
AUC of ROC = 0.85243
AUC of PRC = 0.469023
min(+P, Se) = 0.464286

-------------------------------

confusion matrix:
[[4142   15]
 [ 431   40]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.07976900041103363
difference in average predicted and observed risk = -0.02200299958896637
number samples = 4628
accuracy = 0.90363
precision class 0 = 0.905751
precision class 1 = 0.727273
recall class 0 = 0.996392
recall class 1 = 0.084926
false negative rate = 0.915074
false positive rate = 0.003608
positive prediction rate = 0.011884
AUC of ROC = 0.841849
AUC of PRC = 0.427739
min(+P, Se) = 0.433121

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 17   2]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.07565700262784958
difference in average predicted and observed risk = -0.004511997372150425
number samples = 237
accuracy = 0.919831
precision class 0 = 0.927039
precision class 1 = 0.5
recall class 0 = 0.990826
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.009174
positive prediction rate = 0.016878
AUC of ROC = 0.896185
AUC of PRC = 0.422422
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[385   0]
 [ 46   1]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.07338599860668182
difference in average predicted and observed risk = -0.03541000139331818
number samples = 432
accuracy = 0.893519
precision class 0 = 0.893271
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.021277
false negative rate = 0.978723
false positive rate = 0.0
positive prediction rate = 0.002315
AUC of ROC = 0.853938
AUC of PRC = 0.518996
min(+P, Se) = 0.510638

-------------------------------

confusion matrix:
[[105   0]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10634499788284302
difference in average predicted and observed risk = -0.0038240021171569855
number samples = 118
accuracy = 0.915254
precision class 0 = 0.913043
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.0
positive prediction rate = 0.025424
AUC of ROC = 0.843223
AUC of PRC = 0.635679
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 3  1]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.10719099640846252
difference in average predicted and observed risk = -0.026142003591537483
number samples = 30
accuracy = 0.9
precision class 0 = 0.896552
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.033333
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[299   1]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.08827800303697586
difference in average predicted and observed risk = -0.026765996963024133
number samples = 339
accuracy = 0.890855
precision class 0 = 0.892537
precision class 1 = 0.75
recall class 0 = 0.996667
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.003333
positive prediction rate = 0.011799
AUC of ROC = 0.823504
AUC of PRC = 0.433854
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[433   1]
 [ 40   4]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.07420899718999863
difference in average predicted and observed risk = -0.01784100281000138
number samples = 478
accuracy = 0.914226
precision class 0 = 0.915433
precision class 1 = 0.8
recall class 0 = 0.997696
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.002304
positive prediction rate = 0.01046
AUC of ROC = 0.893538
AUC of PRC = 0.600745
min(+P, Se) = 0.604167

-------------------------------

confusion matrix:
[[388   0]
 [ 36   2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.07021500170230865
difference in average predicted and observed risk = -0.01898699829769135
number samples = 426
accuracy = 0.915493
precision class 0 = 0.915094
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004695
AUC of ROC = 0.884088
AUC of PRC = 0.509105
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[90  0]
 [11  1]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.09182699769735336
difference in average predicted and observed risk = -0.02582000230264664
number samples = 102
accuracy = 0.892157
precision class 0 = 0.891089
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.009804
AUC of ROC = 0.866667
AUC of PRC = 0.651204
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 10   1]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.07529299706220627
difference in average predicted and observed risk = -0.013417002937793729
number samples = 124
accuracy = 0.91129
precision class 0 = 0.918033
precision class 1 = 0.5
recall class 0 = 0.99115
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.00885
positive prediction rate = 0.016129
AUC of ROC = 0.864843
AUC of PRC = 0.342047
min(+P, Se) = 0.428571

-------------------------------

confusion matrix:
[[107   1]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09999100118875504
difference in average predicted and observed risk = -0.049614998811244954
number samples = 127
accuracy = 0.866142
precision class 0 = 0.869919
precision class 1 = 0.75
recall class 0 = 0.990741
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009259
positive prediction rate = 0.031496
AUC of ROC = 0.818713
AUC of PRC = 0.571627
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.10749399662017822
difference in average predicted and observed risk = 0.02854699662017822
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.961905
AUC of PRC = 0.655556
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[732   2]
 [ 76   7]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.08004599809646606
difference in average predicted and observed risk = -0.021545001903533936
number samples = 817
accuracy = 0.904529
precision class 0 = 0.905941
precision class 1 = 0.777778
recall class 0 = 0.997275
recall class 1 = 0.084337
false negative rate = 0.915663
false positive rate = 0.002725
positive prediction rate = 0.011016
AUC of ROC = 0.864433
AUC of PRC = 0.51517
min(+P, Se) = 0.511905

-------------------------------

Epoch 00012: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch12.state
Epoch 13/100
 - 255s - loss: 0.2714 - val_loss: 0.2487

==>predicting on train



confusion matrix:
[[2153    2]
 [ 242   13]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.05992500111460686
difference in average predicted and observed risk = -0.04588399888539314
number samples = 2410
accuracy = 0.898755
precision class 0 = 0.898956
precision class 1 = 0.866667
recall class 0 = 0.999072
recall class 1 = 0.05098
false negative rate = 0.94902
false positive rate = 0.000928
positive prediction rate = 0.006224
AUC of ROC = 0.836845
AUC of PRC = 0.450024
min(+P, Se) = 0.4375

-------------------------------

confusion matrix:
[[1171    8]
 [ 111    7]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.06437499821186066
difference in average predicted and observed risk = -0.026604001788139348
number samples = 1297
accuracy = 0.90825
precision class 0 = 0.913417
precision class 1 = 0.466667
recall class 0 = 0.993215
recall class 1 = 0.059322
false negative rate = 0.940678
false positive rate = 0.006785
positive prediction rate = 0.011565
AUC of ROC = 0.856198
AUC of PRC = 0.361855
min(+P, Se) = 0.415254

-------------------------------

confusion matrix:
[[655   1]
 [ 70   4]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.07507599890232086
difference in average predicted and observed risk = -0.02629400109767914
number samples = 730
accuracy = 0.90274
precision class 0 = 0.903448
precision class 1 = 0.8
recall class 0 = 0.998476
recall class 1 = 0.054054
false negative rate = 0.945946
false positive rate = 0.001524
positive prediction rate = 0.006849
AUC of ROC = 0.806876
AUC of PRC = 0.408432
min(+P, Se) = 0.426667

-------------------------------

confusion matrix:
[[167   0]
 [ 21   3]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.06953799724578857
difference in average predicted and observed risk = -0.056116002754211414
number samples = 191
accuracy = 0.890052
precision class 0 = 0.888298
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.125
false negative rate = 0.875
false positive rate = 0.0
positive prediction rate = 0.015707
AUC of ROC = 0.908932
AUC of PRC = 0.702011
min(+P, Se) = 0.68

-------------------------------

confusion matrix:
[[2469    5]
 [ 244   11]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.058524999767541885
difference in average predicted and observed risk = -0.03491600023245811
number samples = 2729
accuracy = 0.908758
precision class 0 = 0.910063
precision class 1 = 0.6875
recall class 0 = 0.997979
recall class 1 = 0.043137
false negative rate = 0.956863
false positive rate = 0.002021
positive prediction rate = 0.005863
AUC of ROC = 0.840489
AUC of PRC = 0.390614
min(+P, Se) = 0.435294

-------------------------------

confusion matrix:
[[1677    6]
 [ 200   16]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.07176700234413147
difference in average predicted and observed risk = -0.04197699765586853
number samples = 1899
accuracy = 0.891522
precision class 0 = 0.893447
precision class 1 = 0.727273
recall class 0 = 0.996435
recall class 1 = 0.074074
false negative rate = 0.925926
false positive rate = 0.003565
positive prediction rate = 0.011585
AUC of ROC = 0.840254
AUC of PRC = 0.452296
min(+P, Se) = 0.449074

-------------------------------

confusion matrix:
[[548   1]
 [ 74   3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.0683550015091896
difference in average predicted and observed risk = -0.054647998490810396
number samples = 626
accuracy = 0.880192
precision class 0 = 0.881029
precision class 1 = 0.75
recall class 0 = 0.998178
recall class 1 = 0.038961
false negative rate = 0.961039
false positive rate = 0.001821
positive prediction rate = 0.00639
AUC of ROC = 0.843635
AUC of PRC = 0.437216
min(+P, Se) = 0.487179

-------------------------------

confusion matrix:
[[2246    3]
 [ 197   11]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.05589799955487251
difference in average predicted and observed risk = -0.028758000445127482
number samples = 2457
accuracy = 0.9186
precision class 0 = 0.919361
precision class 1 = 0.785714
recall class 0 = 0.998666
recall class 1 = 0.052885
false negative rate = 0.947115
false positive rate = 0.001334
positive prediction rate = 0.005698
AUC of ROC = 0.838052
AUC of PRC = 0.367084
min(+P, Se) = 0.379808

-------------------------------

confusion matrix:
[[221   2]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.05929499864578247
difference in average predicted and observed risk = -0.041511001354217536
number samples = 248
accuracy = 0.891129
precision class 0 = 0.898374
precision class 1 = 0.0
recall class 0 = 0.991031
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.008969
positive prediction rate = 0.008065
AUC of ROC = 0.719103
AUC of PRC = 0.221021
min(+P, Se) = 0.36

-------------------------------

confusion matrix:
[[479   2]
 [ 77   5]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.08115600049495697
difference in average predicted and observed risk = -0.06449199950504303
number samples = 563
accuracy = 0.85968
precision class 0 = 0.861511
precision class 1 = 0.714286
recall class 0 = 0.995842
recall class 1 = 0.060976
false negative rate = 0.939024
false positive rate = 0.004158
positive prediction rate = 0.012433
AUC of ROC = 0.860276
AUC of PRC = 0.552006
min(+P, Se) = 0.52439

-------------------------------

confusion matrix:
[[652   3]
 [ 71   8]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.07557500153779984
difference in average predicted and observed risk = -0.03205399846220017
number samples = 734
accuracy = 0.899183
precision class 0 = 0.901798
precision class 1 = 0.727273
recall class 0 = 0.99542
recall class 1 = 0.101266
false negative rate = 0.898734
false positive rate = 0.00458
positive prediction rate = 0.014986
AUC of ROC = 0.853628
AUC of PRC = 0.486717
min(+P, Se) = 0.47191

-------------------------------

confusion matrix:
[[4146   11]
 [ 444   27]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.06395900249481201
difference in average predicted and observed risk = -0.03781299750518799
number samples = 4628
accuracy = 0.901685
precision class 0 = 0.903268
precision class 1 = 0.710526
recall class 0 = 0.997354
recall class 1 = 0.057325
false negative rate = 0.942675
false positive rate = 0.002646
positive prediction rate = 0.008211
AUC of ROC = 0.840603
AUC of PRC = 0.417683
min(+P, Se) = 0.435518

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 17   2]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.06086299940943718
difference in average predicted and observed risk = -0.019306000590562825
number samples = 237
accuracy = 0.919831
precision class 0 = 0.927039
precision class 1 = 0.5
recall class 0 = 0.990826
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.009174
positive prediction rate = 0.016878
AUC of ROC = 0.903428
AUC of PRC = 0.451476
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[385   0]
 [ 46   1]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.056818000972270966
difference in average predicted and observed risk = -0.05197799902772904
number samples = 432
accuracy = 0.893519
precision class 0 = 0.893271
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.021277
false negative rate = 0.978723
false positive rate = 0.0
positive prediction rate = 0.002315
AUC of ROC = 0.841061
AUC of PRC = 0.521599
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[105   0]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.08779600262641907
difference in average predicted and observed risk = -0.022372997373580936
number samples = 118
accuracy = 0.915254
precision class 0 = 0.913043
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.0
positive prediction rate = 0.025424
AUC of ROC = 0.847619
AUC of PRC = 0.6746
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 3  1]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.09355899691581726
difference in average predicted and observed risk = -0.039774003084182746
number samples = 30
accuracy = 0.9
precision class 0 = 0.896552
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.033333
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[299   1]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.0708409994840622
difference in average predicted and observed risk = -0.0442030005159378
number samples = 339
accuracy = 0.890855
precision class 0 = 0.892537
precision class 1 = 0.75
recall class 0 = 0.996667
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.003333
positive prediction rate = 0.011799
AUC of ROC = 0.82812
AUC of PRC = 0.44944
min(+P, Se) = 0.403846

-------------------------------

confusion matrix:
[[433   1]
 [ 40   4]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.058830998837947845
difference in average predicted and observed risk = -0.03321900116205216
number samples = 478
accuracy = 0.914226
precision class 0 = 0.915433
precision class 1 = 0.8
recall class 0 = 0.997696
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.002304
positive prediction rate = 0.01046
AUC of ROC = 0.880184
AUC of PRC = 0.600319
min(+P, Se) = 0.590909

-------------------------------

confusion matrix:
[[388   0]
 [ 36   2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.05503999814391136
difference in average predicted and observed risk = -0.03416200185608864
number samples = 426
accuracy = 0.915493
precision class 0 = 0.915094
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004695
AUC of ROC = 0.875136
AUC of PRC = 0.496882
min(+P, Se) = 0.447368

-------------------------------

confusion matrix:
[[90  0]
 [11  1]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.07138700038194656
difference in average predicted and observed risk = -0.04625999961805344
number samples = 102
accuracy = 0.892157
precision class 0 = 0.891089
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.009804
AUC of ROC = 0.827778
AUC of PRC = 0.656545
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[112   1]
 [ 10   1]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.06057099997997284
difference in average predicted and observed risk = -0.028139000020027158
number samples = 124
accuracy = 0.91129
precision class 0 = 0.918033
precision class 1 = 0.5
recall class 0 = 0.99115
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.00885
positive prediction rate = 0.016129
AUC of ROC = 0.857603
AUC of PRC = 0.320591
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[107   1]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.0845479965209961
difference in average predicted and observed risk = -0.0650580034790039
number samples = 127
accuracy = 0.866142
precision class 0 = 0.869919
precision class 1 = 0.75
recall class 0 = 0.990741
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009259
positive prediction rate = 0.031496
AUC of ROC = 0.830897
AUC of PRC = 0.577906
min(+P, Se) = 0.631579

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.08314000070095062
difference in average predicted and observed risk = 0.004193000700950619
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.971429
AUC of PRC = 0.711111
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[732   2]
 [ 76   7]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.06381399929523468
difference in average predicted and observed risk = -0.03777700070476532
number samples = 817
accuracy = 0.904529
precision class 0 = 0.905941
precision class 1 = 0.777778
recall class 0 = 0.997275
recall class 1 = 0.084337
false negative rate = 0.915663
false positive rate = 0.002725
positive prediction rate = 0.011016
AUC of ROC = 0.859706
AUC of PRC = 0.524634
min(+P, Se) = 0.506024

-------------------------------

Epoch 00013: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch13.state
Epoch 14/100
 - 256s - loss: 0.2692 - val_loss: 0.2561

==>predicting on train



confusion matrix:
[[2154    1]
 [ 244   11]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.06659500300884247
difference in average predicted and observed risk = -0.03921399699115753
number samples = 2410
accuracy = 0.89834
precision class 0 = 0.898249
precision class 1 = 0.916667
recall class 0 = 0.999536
recall class 1 = 0.043137
false negative rate = 0.956863
false positive rate = 0.000464
positive prediction rate = 0.004979
AUC of ROC = 0.802189
AUC of PRC = 0.4329
min(+P, Se) = 0.424125

-------------------------------

confusion matrix:
[[1173    6]
 [ 109    9]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.07288900017738342
difference in average predicted and observed risk = -0.01808999982261658
number samples = 1297
accuracy = 0.911334
precision class 0 = 0.914977
precision class 1 = 0.6
recall class 0 = 0.994911
recall class 1 = 0.076271
false negative rate = 0.923729
false positive rate = 0.005089
positive prediction rate = 0.011565
AUC of ROC = 0.824327
AUC of PRC = 0.355434
min(+P, Se) = 0.411765

-------------------------------

confusion matrix:
[[655   1]
 [ 67   7]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.08120299875736237
difference in average predicted and observed risk = -0.020167001242637636
number samples = 730
accuracy = 0.906849
precision class 0 = 0.907202
precision class 1 = 0.875
recall class 0 = 0.998476
recall class 1 = 0.094595
false negative rate = 0.905405
false positive rate = 0.001524
positive prediction rate = 0.010959
AUC of ROC = 0.801088
AUC of PRC = 0.419422
min(+P, Se) = 0.418919

-------------------------------

confusion matrix:
[[167   0]
 [ 22   2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.07560300081968307
difference in average predicted and observed risk = -0.05005099918031691
number samples = 191
accuracy = 0.884817
precision class 0 = 0.883598
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.010471
AUC of ROC = 0.875499
AUC of PRC = 0.676913
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2471    3]
 [ 242   13]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.0677110031247139
difference in average predicted and observed risk = -0.0257299968752861
number samples = 2729
accuracy = 0.910224
precision class 0 = 0.9108
precision class 1 = 0.8125
recall class 0 = 0.998787
recall class 1 = 0.05098
false negative rate = 0.94902
false positive rate = 0.001213
positive prediction rate = 0.005863
AUC of ROC = 0.807737
AUC of PRC = 0.384368
min(+P, Se) = 0.416342

-------------------------------

confusion matrix:
[[1678    5]
 [ 200   16]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.0758109986782074
difference in average predicted and observed risk = -0.0379330013217926
number samples = 1899
accuracy = 0.892048
precision class 0 = 0.893504
precision class 1 = 0.761905
recall class 0 = 0.997029
recall class 1 = 0.074074
false negative rate = 0.925926
false positive rate = 0.002971
positive prediction rate = 0.011058
AUC of ROC = 0.814265
AUC of PRC = 0.438078
min(+P, Se) = 0.430556

-------------------------------

confusion matrix:
[[548   1]
 [ 74   3]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.07366500049829483
difference in average predicted and observed risk = -0.04933799950170517
number samples = 626
accuracy = 0.880192
precision class 0 = 0.881029
precision class 1 = 0.75
recall class 0 = 0.998178
recall class 1 = 0.038961
false negative rate = 0.961039
false positive rate = 0.001821
positive prediction rate = 0.00639
AUC of ROC = 0.812457
AUC of PRC = 0.407143
min(+P, Se) = 0.45679

-------------------------------

confusion matrix:
[[2246    3]
 [ 200    8]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.06288400292396545
difference in average predicted and observed risk = -0.02177199707603454
number samples = 2457
accuracy = 0.917379
precision class 0 = 0.918234
precision class 1 = 0.727273
recall class 0 = 0.998666
recall class 1 = 0.038462
false negative rate = 0.961538
false positive rate = 0.001334
positive prediction rate = 0.004477
AUC of ROC = 0.793179
AUC of PRC = 0.350118
min(+P, Se) = 0.357143

-------------------------------

confusion matrix:
[[221   2]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.06736999750137329
difference in average predicted and observed risk = -0.033436002498626716
number samples = 248
accuracy = 0.891129
precision class 0 = 0.898374
precision class 1 = 0.0
recall class 0 = 0.991031
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.008969
positive prediction rate = 0.008065
AUC of ROC = 0.744574
AUC of PRC = 0.228734
min(+P, Se) = 0.4

-------------------------------

confusion matrix:
[[480   1]
 [ 71  11]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.09107699990272522
difference in average predicted and observed risk = -0.05457100009727478
number samples = 563
accuracy = 0.872114
precision class 0 = 0.871143
precision class 1 = 0.916667
recall class 0 = 0.997921
recall class 1 = 0.134146
false negative rate = 0.865854
false positive rate = 0.002079
positive prediction rate = 0.021314
AUC of ROC = 0.857867
AUC of PRC = 0.586501
min(+P, Se) = 0.585366

-------------------------------

confusion matrix:
[[654   1]
 [ 72   7]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.08194299787282944
difference in average predicted and observed risk = -0.025686002127170565
number samples = 734
accuracy = 0.900545
precision class 0 = 0.900826
precision class 1 = 0.875
recall class 0 = 0.998473
recall class 1 = 0.088608
false negative rate = 0.911392
false positive rate = 0.001527
positive prediction rate = 0.010899
AUC of ROC = 0.826263
AUC of PRC = 0.449904
min(+P, Se) = 0.455696

-------------------------------

confusion matrix:
[[4149    8]
 [ 442   29]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.0710349977016449
difference in average predicted and observed risk = -0.030737002298355104
number samples = 4628
accuracy = 0.902766
precision class 0 = 0.903725
precision class 1 = 0.783784
recall class 0 = 0.998076
recall class 1 = 0.061571
false negative rate = 0.938429
false positive rate = 0.001924
positive prediction rate = 0.007995
AUC of ROC = 0.811568
AUC of PRC = 0.408717
min(+P, Se) = 0.422594

-------------------------------

==>predicting on validation



confusion matrix:
[[216   2]
 [ 17   2]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.06947699934244156
difference in average predicted and observed risk = -0.010692000657558445
number samples = 237
accuracy = 0.919831
precision class 0 = 0.927039
precision class 1 = 0.5
recall class 0 = 0.990826
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.009174
positive prediction rate = 0.016878
AUC of ROC = 0.854177
AUC of PRC = 0.379541
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.0651250034570694
difference in average predicted and observed risk = -0.04367099654293061
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.807682
AUC of PRC = 0.482547
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[105   0]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.09085799753665924
difference in average predicted and observed risk = -0.019311002463340762
number samples = 118
accuracy = 0.915254
precision class 0 = 0.913043
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.0
positive prediction rate = 0.025424
AUC of ROC = 0.882784
AUC of PRC = 0.704668
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[26  0]
 [ 3  1]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.0957769975066185
difference in average predicted and observed risk = -0.03755600249338151
number samples = 30
accuracy = 0.9
precision class 0 = 0.896552
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.033333
AUC of ROC = 1.0
AUC of PRC = 1.0
min(+P, Se) = 1.0

-------------------------------

confusion matrix:
[[299   1]
 [ 37   2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.07444900274276733
difference in average predicted and observed risk = -0.04059499725723266
number samples = 339
accuracy = 0.887906
precision class 0 = 0.889881
precision class 1 = 0.666667
recall class 0 = 0.996667
recall class 1 = 0.051282
false negative rate = 0.948718
false positive rate = 0.003333
positive prediction rate = 0.00885
AUC of ROC = 0.794701
AUC of PRC = 0.409266
min(+P, Se) = 0.410256

-------------------------------

confusion matrix:
[[433   1]
 [ 40   4]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.0689459964632988
difference in average predicted and observed risk = -0.02310400353670121
number samples = 478
accuracy = 0.914226
precision class 0 = 0.915433
precision class 1 = 0.8
recall class 0 = 0.997696
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.002304
positive prediction rate = 0.01046
AUC of ROC = 0.865836
AUC of PRC = 0.583539
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[388   0]
 [ 36   2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.06221900135278702
difference in average predicted and observed risk = -0.026982998647212986
number samples = 426
accuracy = 0.915493
precision class 0 = 0.915094
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.0
positive prediction rate = 0.004695
AUC of ROC = 0.827591
AUC of PRC = 0.475281
min(+P, Se) = 0.447368

-------------------------------

confusion matrix:
[[90  0]
 [11  1]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.08117199689149857
difference in average predicted and observed risk = -0.036475003108501436
number samples = 102
accuracy = 0.892157
precision class 0 = 0.891089
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.083333
false negative rate = 0.916667
false positive rate = 0.0
positive prediction rate = 0.009804
AUC of ROC = 0.901852
AUC of PRC = 0.685751
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.06782300025224686
difference in average predicted and observed risk = -0.02088699974775314
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.795656
AUC of PRC = 0.264526
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[107   1]
 [ 16   3]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09085399657487869
difference in average predicted and observed risk = -0.058752003425121296
number samples = 127
accuracy = 0.866142
precision class 0 = 0.869919
precision class 1 = 0.75
recall class 0 = 0.990741
recall class 1 = 0.157895
false negative rate = 0.842105
false positive rate = 0.009259
positive prediction rate = 0.031496
AUC of ROC = 0.810916
AUC of PRC = 0.588672
min(+P, Se) = 0.631579

-------------------------------

confusion matrix:
[[35  0]
 [ 3  0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.09109199792146683
difference in average predicted and observed risk = 0.012144997921466824
number samples = 38
accuracy = 0.921053
precision class 0 = 0.921053
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.933333
AUC of PRC = 0.582341
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[732   2]
 [ 77   6]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.07123000174760818
difference in average predicted and observed risk = -0.030360998252391816
number samples = 817
accuracy = 0.903305
precision class 0 = 0.904821
precision class 1 = 0.75
recall class 0 = 0.997275
recall class 1 = 0.072289
false negative rate = 0.927711
false positive rate = 0.002725
positive prediction rate = 0.009792
AUC of ROC = 0.835101
AUC of PRC = 0.497583
min(+P, Se) = 0.488095

-------------------------------

Epoch 00014: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch14.state
Epoch 15/100
 - 256s - loss: 0.2619 - val_loss: 0.2470

==>predicting on train



confusion matrix:
[[2145   10]
 [ 226   29]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.07066299766302109
difference in average predicted and observed risk = -0.03514600233697891
number samples = 2410
accuracy = 0.902075
precision class 0 = 0.904682
precision class 1 = 0.74359
recall class 0 = 0.99536
recall class 1 = 0.113725
false negative rate = 0.886275
false positive rate = 0.00464
positive prediction rate = 0.016183
AUC of ROC = 0.837398
AUC of PRC = 0.435047
min(+P, Se) = 0.431373

-------------------------------

confusion matrix:
[[1161   18]
 [  97   21]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.07601200044155121
difference in average predicted and observed risk = -0.014966999558448796
number samples = 1297
accuracy = 0.911334
precision class 0 = 0.922893
precision class 1 = 0.538462
recall class 0 = 0.984733
recall class 1 = 0.177966
false negative rate = 0.822034
false positive rate = 0.015267
positive prediction rate = 0.030069
AUC of ROC = 0.846998
AUC of PRC = 0.368607
min(+P, Se) = 0.420168

-------------------------------

confusion matrix:
[[648   8]
 [ 59  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.09052599966526031
difference in average predicted and observed risk = -0.010844000334739687
number samples = 730
accuracy = 0.908219
precision class 0 = 0.916549
precision class 1 = 0.652174
recall class 0 = 0.987805
recall class 1 = 0.202703
false negative rate = 0.797297
false positive rate = 0.012195
positive prediction rate = 0.031507
AUC of ROC = 0.828424
AUC of PRC = 0.435681
min(+P, Se) = 0.445946

-------------------------------

confusion matrix:
[[166   1]
 [ 19   5]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.08145900070667267
difference in average predicted and observed risk = -0.04419499929332732
number samples = 191
accuracy = 0.895288
precision class 0 = 0.897297
precision class 1 = 0.833333
recall class 0 = 0.994012
recall class 1 = 0.208333
false negative rate = 0.791667
false positive rate = 0.005988
positive prediction rate = 0.031414
AUC of ROC = 0.903194
AUC of PRC = 0.673254
min(+P, Se) = 0.625

-------------------------------

confusion matrix:
[[2452   22]
 [ 216   39]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.0713379979133606
difference in average predicted and observed risk = -0.0221030020866394
number samples = 2729
accuracy = 0.912789
precision class 0 = 0.919041
precision class 1 = 0.639344
recall class 0 = 0.991108
recall class 1 = 0.152941
false negative rate = 0.847059
false positive rate = 0.008892
positive prediction rate = 0.022353
AUC of ROC = 0.840791
AUC of PRC = 0.390546
min(+P, Se) = 0.419608

-------------------------------

confusion matrix:
[[1668   15]
 [ 185   31]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.08206699788570404
difference in average predicted and observed risk = -0.03167700211429596
number samples = 1899
accuracy = 0.894681
precision class 0 = 0.900162
precision class 1 = 0.673913
recall class 0 = 0.991087
recall class 1 = 0.143519
false negative rate = 0.856481
false positive rate = 0.008913
positive prediction rate = 0.024223
AUC of ROC = 0.841085
AUC of PRC = 0.457702
min(+P, Se) = 0.439815

-------------------------------

confusion matrix:
[[542   7]
 [ 68   9]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.07950399816036224
difference in average predicted and observed risk = -0.04349900183963776
number samples = 626
accuracy = 0.880192
precision class 0 = 0.888525
precision class 1 = 0.5625
recall class 0 = 0.98725
recall class 1 = 0.116883
false negative rate = 0.883117
false positive rate = 0.01275
positive prediction rate = 0.025559
AUC of ROC = 0.84153
AUC of PRC = 0.439116
min(+P, Se) = 0.506494

-------------------------------

confusion matrix:
[[2239   10]
 [ 184   24]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.06540799885988235
difference in average predicted and observed risk = -0.01924800114011764
number samples = 2457
accuracy = 0.921042
precision class 0 = 0.924061
precision class 1 = 0.705882
recall class 0 = 0.995554
recall class 1 = 0.115385
false negative rate = 0.884615
false positive rate = 0.004446
positive prediction rate = 0.013838
AUC of ROC = 0.836615
AUC of PRC = 0.364622
min(+P, Se) = 0.350962

-------------------------------

confusion matrix:
[[219   4]
 [ 25   0]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.06908299773931503
difference in average predicted and observed risk = -0.031723002260684974
number samples = 248
accuracy = 0.883065
precision class 0 = 0.897541
precision class 1 = 0.0
recall class 0 = 0.982063
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.017937
positive prediction rate = 0.016129
AUC of ROC = 0.728251
AUC of PRC = 0.23277
min(+P, Se) = 0.36

-------------------------------

confusion matrix:
[[474   7]
 [ 62  20]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.10069800168275833
difference in average predicted and observed risk = -0.04494999831724167
number samples = 563
accuracy = 0.877442
precision class 0 = 0.884328
precision class 1 = 0.740741
recall class 0 = 0.985447
recall class 1 = 0.243902
false negative rate = 0.756098
false positive rate = 0.014553
positive prediction rate = 0.047957
AUC of ROC = 0.866995
AUC of PRC = 0.580962
min(+P, Se) = 0.560976

-------------------------------

confusion matrix:
[[646   9]
 [ 62  17]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.0902239978313446
difference in average predicted and observed risk = -0.017405002168655398
number samples = 734
accuracy = 0.90327
precision class 0 = 0.912429
precision class 1 = 0.653846
recall class 0 = 0.98626
recall class 1 = 0.21519
false negative rate = 0.78481
false positive rate = 0.01374
positive prediction rate = 0.035422
AUC of ROC = 0.856508
AUC of PRC = 0.436883
min(+P, Se) = 0.455696

-------------------------------

confusion matrix:
[[4120   37]
 [ 401   70]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.07574000209569931
difference in average predicted and observed risk = -0.02603199790430069
number samples = 4628
accuracy = 0.905359
precision class 0 = 0.911303
precision class 1 = 0.654206
recall class 0 = 0.991099
recall class 1 = 0.14862
false negative rate = 0.85138
false positive rate = 0.008901
positive prediction rate = 0.02312
AUC of ROC = 0.84152
AUC of PRC = 0.419007
min(+P, Se) = 0.425

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.0728679969906807
difference in average predicted and observed risk = -0.00730100300931931
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.884597
AUC of PRC = 0.356053
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[384   1]
 [ 44   3]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.06615199893712997
difference in average predicted and observed risk = -0.04264400106287003
number samples = 432
accuracy = 0.895833
precision class 0 = 0.897196
precision class 1 = 0.75
recall class 0 = 0.997403
recall class 1 = 0.06383
false negative rate = 0.93617
false positive rate = 0.002597
positive prediction rate = 0.009259
AUC of ROC = 0.835977
AUC of PRC = 0.459114
min(+P, Se) = 0.446809

-------------------------------

confusion matrix:
[[104   1]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10360399633646011
difference in average predicted and observed risk = -0.0065650036635398895
number samples = 118
accuracy = 0.923729
precision class 0 = 0.928571
precision class 1 = 0.833333
recall class 0 = 0.990476
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.009524
positive prediction rate = 0.050847
AUC of ROC = 0.837363
AUC of PRC = 0.650849
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11274400353431702
difference in average predicted and observed risk = -0.02058899646568299
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[297   3]
 [ 36   3]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.08162400126457214
difference in average predicted and observed risk = -0.03341999873542785
number samples = 339
accuracy = 0.884956
precision class 0 = 0.891892
precision class 1 = 0.5
recall class 0 = 0.99
recall class 1 = 0.076923
false negative rate = 0.923077
false positive rate = 0.01
positive prediction rate = 0.017699
AUC of ROC = 0.815299
AUC of PRC = 0.40278
min(+P, Se) = 0.410256

-------------------------------

confusion matrix:
[[432   2]
 [ 33  11]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.07067800313234329
difference in average predicted and observed risk = -0.021371996867656715
number samples = 478
accuracy = 0.926778
precision class 0 = 0.929032
precision class 1 = 0.846154
recall class 0 = 0.995392
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.004608
positive prediction rate = 0.027197
AUC of ROC = 0.875105
AUC of PRC = 0.555322
min(+P, Se) = 0.577778

-------------------------------

confusion matrix:
[[387   1]
 [ 34   4]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.06317000091075897
difference in average predicted and observed risk = -0.02603199908924103
number samples = 426
accuracy = 0.91784
precision class 0 = 0.91924
precision class 1 = 0.8
recall class 0 = 0.997423
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.002577
positive prediction rate = 0.011737
AUC of ROC = 0.869506
AUC of PRC = 0.439442
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[90  0]
 [ 9  3]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.0867919996380806
difference in average predicted and observed risk = -0.030855000361919405
number samples = 102
accuracy = 0.911765
precision class 0 = 0.909091
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.029412
AUC of ROC = 0.833333
AUC of PRC = 0.62466
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[112   1]
 [ 10   1]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.07050000131130219
difference in average predicted and observed risk = -0.018209998688697812
number samples = 124
accuracy = 0.91129
precision class 0 = 0.918033
precision class 1 = 0.5
recall class 0 = 0.99115
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.00885
positive prediction rate = 0.016129
AUC of ROC = 0.84473
AUC of PRC = 0.304013
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[106   2]
 [ 14   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.09998299926519394
difference in average predicted and observed risk = -0.04962300073480605
number samples = 127
accuracy = 0.874016
precision class 0 = 0.883333
precision class 1 = 0.714286
recall class 0 = 0.981481
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.018519
positive prediction rate = 0.055118
AUC of ROC = 0.817251
AUC of PRC = 0.602243
min(+P, Se) = 0.631579

-------------------------------

confusion matrix:
[[34  1]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.11189000308513641
difference in average predicted and observed risk = 0.03294300308513641
number samples = 38
accuracy = 0.921053
precision class 0 = 0.944444
precision class 1 = 0.5
recall class 0 = 0.971429
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.028571
positive prediction rate = 0.052632
AUC of ROC = 0.961905
AUC of PRC = 0.655556
min(+P, Se) = 0.6

-------------------------------

confusion matrix:
[[729   5]
 [ 69  14]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.0752200037240982
difference in average predicted and observed risk = -0.026370996275901795
number samples = 817
accuracy = 0.909425
precision class 0 = 0.913534
precision class 1 = 0.736842
recall class 0 = 0.993188
recall class 1 = 0.168675
false negative rate = 0.831325
false positive rate = 0.006812
positive prediction rate = 0.023256
AUC of ROC = 0.850087
AUC of PRC = 0.479838
min(+P, Se) = 0.493976

-------------------------------

Epoch 00015: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch15.state
Epoch 16/100
 - 259s - loss: 0.2701 - val_loss: 0.2389

==>predicting on train



confusion matrix:
[[2144   11]
 [ 222   33]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.07721199840307236
difference in average predicted and observed risk = -0.028597001596927643
number samples = 2410
accuracy = 0.903319
precision class 0 = 0.906171
precision class 1 = 0.75
recall class 0 = 0.994896
recall class 1 = 0.129412
false negative rate = 0.870588
false positive rate = 0.005104
positive prediction rate = 0.018257
AUC of ROC = 0.842027
AUC of PRC = 0.448489
min(+P, Se) = 0.447059

-------------------------------

confusion matrix:
[[1161   18]
 [  95   23]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08249799907207489
difference in average predicted and observed risk = -0.008481000927925114
number samples = 1297
accuracy = 0.912876
precision class 0 = 0.924363
precision class 1 = 0.560976
recall class 0 = 0.984733
recall class 1 = 0.194915
false negative rate = 0.805085
false positive rate = 0.015267
positive prediction rate = 0.031611
AUC of ROC = 0.852274
AUC of PRC = 0.392442
min(+P, Se) = 0.404959

-------------------------------

confusion matrix:
[[644  12]
 [ 58  16]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.0966159999370575
difference in average predicted and observed risk = -0.004754000062942507
number samples = 730
accuracy = 0.90411
precision class 0 = 0.917379
precision class 1 = 0.571429
recall class 0 = 0.981707
recall class 1 = 0.216216
false negative rate = 0.783784
false positive rate = 0.018293
positive prediction rate = 0.038356
AUC of ROC = 0.83687
AUC of PRC = 0.432294
min(+P, Se) = 0.445946

-------------------------------

confusion matrix:
[[166   1]
 [ 17   7]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.08858499675989151
difference in average predicted and observed risk = -0.03706900324010848
number samples = 191
accuracy = 0.905759
precision class 0 = 0.907104
precision class 1 = 0.875
recall class 0 = 0.994012
recall class 1 = 0.291667
false negative rate = 0.708333
false positive rate = 0.005988
positive prediction rate = 0.041885
AUC of ROC = 0.901447
AUC of PRC = 0.694842
min(+P, Se) = 0.68

-------------------------------

confusion matrix:
[[2452   22]
 [ 212   43]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07664600014686584
difference in average predicted and observed risk = -0.01679499985313415
number samples = 2729
accuracy = 0.914254
precision class 0 = 0.92042
precision class 1 = 0.661538
recall class 0 = 0.991108
recall class 1 = 0.168627
false negative rate = 0.831373
false positive rate = 0.008892
positive prediction rate = 0.023818
AUC of ROC = 0.850338
AUC of PRC = 0.413291
min(+P, Se) = 0.430233

-------------------------------

confusion matrix:
[[1663   20]
 [ 180   36]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.09023900330066681
difference in average predicted and observed risk = -0.02350499669933319
number samples = 1899
accuracy = 0.894681
precision class 0 = 0.902333
precision class 1 = 0.642857
recall class 0 = 0.988116
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.011884
positive prediction rate = 0.029489
AUC of ROC = 0.840356
AUC of PRC = 0.45725
min(+P, Se) = 0.446429

-------------------------------

confusion matrix:
[[543   6]
 [ 68   9]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.08856800198554993
difference in average predicted and observed risk = -0.034434998014450074
number samples = 626
accuracy = 0.881789
precision class 0 = 0.888707
precision class 1 = 0.6
recall class 0 = 0.989071
recall class 1 = 0.116883
false negative rate = 0.883117
false positive rate = 0.010929
positive prediction rate = 0.023962
AUC of ROC = 0.853524
AUC of PRC = 0.459612
min(+P, Se) = 0.487805

-------------------------------

confusion matrix:
[[2238   11]
 [ 180   28]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07161299884319305
difference in average predicted and observed risk = -0.013043001156806941
number samples = 2457
accuracy = 0.922263
precision class 0 = 0.925558
precision class 1 = 0.717949
recall class 0 = 0.995109
recall class 1 = 0.134615
false negative rate = 0.865385
false positive rate = 0.004891
positive prediction rate = 0.015873
AUC of ROC = 0.845012
AUC of PRC = 0.380219
min(+P, Se) = 0.373206

-------------------------------

confusion matrix:
[[218   5]
 [ 23   2]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.07363899797201157
difference in average predicted and observed risk = -0.02716700202798844
number samples = 248
accuracy = 0.887097
precision class 0 = 0.904564
precision class 1 = 0.285714
recall class 0 = 0.977578
recall class 1 = 0.08
false negative rate = 0.92
false positive rate = 0.022422
positive prediction rate = 0.028226
AUC of ROC = 0.723049
AUC of PRC = 0.236862
min(+P, Se) = 0.36

-------------------------------

confusion matrix:
[[472   9]
 [ 61  21]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.1065479964017868
difference in average predicted and observed risk = -0.039100003598213195
number samples = 563
accuracy = 0.875666
precision class 0 = 0.885553
precision class 1 = 0.7
recall class 0 = 0.981289
recall class 1 = 0.256098
false negative rate = 0.743902
false positive rate = 0.018711
positive prediction rate = 0.053286
AUC of ROC = 0.86522
AUC of PRC = 0.583376
min(+P, Se) = 0.54878

-------------------------------

confusion matrix:
[[644  11]
 [ 60  19]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09657099843025208
difference in average predicted and observed risk = -0.011058001569747927
number samples = 734
accuracy = 0.90327
precision class 0 = 0.914773
precision class 1 = 0.633333
recall class 0 = 0.983206
recall class 1 = 0.240506
false negative rate = 0.759494
false positive rate = 0.016794
positive prediction rate = 0.040872
AUC of ROC = 0.855426
AUC of PRC = 0.439341
min(+P, Se) = 0.469136

-------------------------------

confusion matrix:
[[4115   42]
 [ 392   79]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08222299814224243
difference in average predicted and observed risk = -0.01954900185775757
number samples = 4628
accuracy = 0.906223
precision class 0 = 0.913024
precision class 1 = 0.652893
recall class 0 = 0.989897
recall class 1 = 0.167728
false negative rate = 0.832272
false positive rate = 0.010103
positive prediction rate = 0.026145
AUC of ROC = 0.846481
AUC of PRC = 0.432367
min(+P, Se) = 0.436975

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.07927300035953522
difference in average predicted and observed risk = -0.0008959996404647869
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.896427
AUC of PRC = 0.428854
min(+P, Se) = 0.434783

-------------------------------

confusion matrix:
[[384   1]
 [ 46   1]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.07226400077342987
difference in average predicted and observed risk = -0.03653199922657013
number samples = 432
accuracy = 0.891204
precision class 0 = 0.893023
precision class 1 = 0.5
recall class 0 = 0.997403
recall class 1 = 0.021277
false negative rate = 0.978723
false positive rate = 0.002597
positive prediction rate = 0.00463
AUC of ROC = 0.850014
AUC of PRC = 0.477019
min(+P, Se) = 0.510638

-------------------------------

confusion matrix:
[[104   1]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.11047600209712982
difference in average predicted and observed risk = 0.00030700209712981874
number samples = 118
accuracy = 0.923729
precision class 0 = 0.928571
precision class 1 = 0.833333
recall class 0 = 0.990476
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.009524
positive prediction rate = 0.050847
AUC of ROC = 0.831502
AUC of PRC = 0.568491
min(+P, Se) = 0.615385

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11600500345230103
difference in average predicted and observed risk = -0.01732799654769898
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[297   3]
 [ 37   2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.08904000371694565
difference in average predicted and observed risk = -0.026003996283054345
number samples = 339
accuracy = 0.882006
precision class 0 = 0.889222
precision class 1 = 0.4
recall class 0 = 0.99
recall class 1 = 0.051282
false negative rate = 0.948718
false positive rate = 0.01
positive prediction rate = 0.014749
AUC of ROC = 0.826239
AUC of PRC = 0.375864
min(+P, Se) = 0.439024

-------------------------------

confusion matrix:
[[432   2]
 [ 34  10]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.0760200023651123
difference in average predicted and observed risk = -0.016029997634887702
number samples = 478
accuracy = 0.924686
precision class 0 = 0.927039
precision class 1 = 0.833333
recall class 0 = 0.995392
recall class 1 = 0.227273
false negative rate = 0.772727
false positive rate = 0.004608
positive prediction rate = 0.025105
AUC of ROC = 0.884793
AUC of PRC = 0.584665
min(+P, Se) = 0.613636

-------------------------------

confusion matrix:
[[387   1]
 [ 35   3]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.06983699649572372
difference in average predicted and observed risk = -0.01936500350427628
number samples = 426
accuracy = 0.915493
precision class 0 = 0.917062
precision class 1 = 0.75
recall class 0 = 0.997423
recall class 1 = 0.078947
false negative rate = 0.921053
false positive rate = 0.002577
positive prediction rate = 0.00939
AUC of ROC = 0.876017
AUC of PRC = 0.436174
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[90  0]
 [ 9  3]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.09475400298833847
difference in average predicted and observed risk = -0.02289299701166153
number samples = 102
accuracy = 0.911765
precision class 0 = 0.909091
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.0
positive prediction rate = 0.029412
AUC of ROC = 0.822222
AUC of PRC = 0.63102
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.07637900114059448
difference in average predicted and observed risk = -0.012330998859405515
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.863234
AUC of PRC = 0.333611
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[106   2]
 [ 14   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10450900346040726
difference in average predicted and observed risk = -0.04509699653959273
number samples = 127
accuracy = 0.874016
precision class 0 = 0.883333
precision class 1 = 0.714286
recall class 0 = 0.981481
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.018519
positive prediction rate = 0.055118
AUC of ROC = 0.839181
AUC of PRC = 0.593932
min(+P, Se) = 0.631579

-------------------------------

confusion matrix:
[[34  1]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.11481299996376038
difference in average predicted and observed risk = 0.03586599996376037
number samples = 38
accuracy = 0.921053
precision class 0 = 0.944444
precision class 1 = 0.5
recall class 0 = 0.971429
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.028571
positive prediction rate = 0.052632
AUC of ROC = 0.971429
AUC of PRC = 0.711111
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[729   5]
 [ 71  12]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.08142200112342834
difference in average predicted and observed risk = -0.020168998876571656
number samples = 817
accuracy = 0.906977
precision class 0 = 0.91125
precision class 1 = 0.705882
recall class 0 = 0.993188
recall class 1 = 0.144578
false negative rate = 0.855422
false positive rate = 0.006812
positive prediction rate = 0.020808
AUC of ROC = 0.861249
AUC of PRC = 0.489456
min(+P, Se) = 0.542169

-------------------------------

Epoch 00016: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch16.state
Epoch 17/100
 - 256s - loss: 0.2665 - val_loss: 0.2357

==>predicting on train



confusion matrix:
[[2147    8]
 [ 221   34]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.08023799955844879
difference in average predicted and observed risk = -0.02557100044155121
number samples = 2410
accuracy = 0.904979
precision class 0 = 0.906672
precision class 1 = 0.809524
recall class 0 = 0.996288
recall class 1 = 0.133333
false negative rate = 0.866667
false positive rate = 0.003712
positive prediction rate = 0.017427
AUC of ROC = 0.847315
AUC of PRC = 0.470475
min(+P, Se) = 0.455253

-------------------------------

confusion matrix:
[[1163   16]
 [  98   20]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08604200184345245
difference in average predicted and observed risk = -0.004936998156547551
number samples = 1297
accuracy = 0.912105
precision class 0 = 0.922284
precision class 1 = 0.555556
recall class 0 = 0.986429
recall class 1 = 0.169492
false negative rate = 0.830508
false positive rate = 0.013571
positive prediction rate = 0.027756
AUC of ROC = 0.857097
AUC of PRC = 0.380645
min(+P, Se) = 0.409836

-------------------------------

confusion matrix:
[[649   7]
 [ 60  14]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.0977960005402565
difference in average predicted and observed risk = -0.0035739994597435015
number samples = 730
accuracy = 0.908219
precision class 0 = 0.915374
precision class 1 = 0.666667
recall class 0 = 0.989329
recall class 1 = 0.189189
false negative rate = 0.810811
false positive rate = 0.010671
positive prediction rate = 0.028767
AUC of ROC = 0.813139
AUC of PRC = 0.420856
min(+P, Se) = 0.445946

-------------------------------

confusion matrix:
[[166   1]
 [ 18   6]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.0904259979724884
difference in average predicted and observed risk = -0.035228002027511585
number samples = 191
accuracy = 0.900524
precision class 0 = 0.902174
precision class 1 = 0.857143
recall class 0 = 0.994012
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.005988
positive prediction rate = 0.036649
AUC of ROC = 0.89521
AUC of PRC = 0.696566
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[2455   19]
 [ 215   40]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.08043699711561203
difference in average predicted and observed risk = -0.013004002884387966
number samples = 2729
accuracy = 0.914254
precision class 0 = 0.919476
precision class 1 = 0.677966
recall class 0 = 0.99232
recall class 1 = 0.156863
false negative rate = 0.843137
false positive rate = 0.00768
positive prediction rate = 0.02162
AUC of ROC = 0.851989
AUC of PRC = 0.423328
min(+P, Se) = 0.443137

-------------------------------

confusion matrix:
[[1670   13]
 [ 182   34]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.09168999642133713
difference in average predicted and observed risk = -0.02205400357866287
number samples = 1899
accuracy = 0.897314
precision class 0 = 0.901728
precision class 1 = 0.723404
recall class 0 = 0.992276
recall class 1 = 0.157407
false negative rate = 0.842593
false positive rate = 0.007724
positive prediction rate = 0.02475
AUC of ROC = 0.838681
AUC of PRC = 0.461292
min(+P, Se) = 0.459459

-------------------------------

confusion matrix:
[[544   5]
 [ 67  10]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.09076099842786789
difference in average predicted and observed risk = -0.03224200157213211
number samples = 626
accuracy = 0.884984
precision class 0 = 0.890344
precision class 1 = 0.666667
recall class 0 = 0.990893
recall class 1 = 0.12987
false negative rate = 0.87013
false positive rate = 0.009107
positive prediction rate = 0.023962
AUC of ROC = 0.837721
AUC of PRC = 0.451862
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[2241    8]
 [ 187   21]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.07555200159549713
difference in average predicted and observed risk = -0.009103998404502864
number samples = 2457
accuracy = 0.920635
precision class 0 = 0.922982
precision class 1 = 0.724138
recall class 0 = 0.996443
recall class 1 = 0.100962
false negative rate = 0.899038
false positive rate = 0.003557
positive prediction rate = 0.011803
AUC of ROC = 0.851376
AUC of PRC = 0.385939
min(+P, Se) = 0.385714

-------------------------------

confusion matrix:
[[219   4]
 [ 23   2]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.07873799651861191
difference in average predicted and observed risk = -0.0220680034813881
number samples = 248
accuracy = 0.891129
precision class 0 = 0.904959
precision class 1 = 0.333333
recall class 0 = 0.982063
recall class 1 = 0.08
false negative rate = 0.92
false positive rate = 0.017937
positive prediction rate = 0.024194
AUC of ROC = 0.756592
AUC of PRC = 0.265843
min(+P, Se) = 0.36

-------------------------------

confusion matrix:
[[474   7]
 [ 58  24]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.10741999745368958
difference in average predicted and observed risk = -0.038228002546310424
number samples = 563
accuracy = 0.884547
precision class 0 = 0.890977
precision class 1 = 0.774194
recall class 0 = 0.985447
recall class 1 = 0.292683
false negative rate = 0.707317
false positive rate = 0.014553
positive prediction rate = 0.055062
AUC of ROC = 0.861898
AUC of PRC = 0.610826
min(+P, Se) = 0.551724

-------------------------------

confusion matrix:
[[647   8]
 [ 62  17]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09697499871253967
difference in average predicted and observed risk = -0.01065400128746033
number samples = 734
accuracy = 0.904632
precision class 0 = 0.912553
precision class 1 = 0.68
recall class 0 = 0.987786
recall class 1 = 0.21519
false negative rate = 0.78481
false positive rate = 0.012214
positive prediction rate = 0.03406
AUC of ROC = 0.851193
AUC of PRC = 0.465572
min(+P, Se) = 0.481013

-------------------------------

confusion matrix:
[[4125   32]
 [ 397   74]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08505400270223618
difference in average predicted and observed risk = -0.016717997297763826
number samples = 4628
accuracy = 0.907303
precision class 0 = 0.912207
precision class 1 = 0.698113
recall class 0 = 0.992302
recall class 1 = 0.157113
false negative rate = 0.842887
false positive rate = 0.007698
positive prediction rate = 0.022904
AUC of ROC = 0.846764
AUC of PRC = 0.439444
min(+P, Se) = 0.443975

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.0817589983344078
difference in average predicted and observed risk = 0.0015899983344078022
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.904635
AUC of PRC = 0.450209
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[384   1]
 [ 47   0]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.07667099684476852
difference in average predicted and observed risk = -0.03212500315523148
number samples = 432
accuracy = 0.888889
precision class 0 = 0.890951
precision class 1 = 0.0
recall class 0 = 0.997403
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.002597
positive prediction rate = 0.002315
AUC of ROC = 0.855595
AUC of PRC = 0.495921
min(+P, Se) = 0.489362

-------------------------------

confusion matrix:
[[103   2]
 [ 10   3]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.11466600000858307
difference in average predicted and observed risk = 0.004497000008583066
number samples = 118
accuracy = 0.898305
precision class 0 = 0.911504
precision class 1 = 0.6
recall class 0 = 0.980952
recall class 1 = 0.230769
false negative rate = 0.769231
false positive rate = 0.019048
positive prediction rate = 0.042373
AUC of ROC = 0.857875
AUC of PRC = 0.578489
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11066100001335144
difference in average predicted and observed risk = -0.022671999986648567
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[297   3]
 [ 37   2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.09041599929332733
difference in average predicted and observed risk = -0.024628000706672662
number samples = 339
accuracy = 0.882006
precision class 0 = 0.889222
precision class 1 = 0.4
recall class 0 = 0.99
recall class 1 = 0.051282
false negative rate = 0.948718
false positive rate = 0.01
positive prediction rate = 0.014749
AUC of ROC = 0.848205
AUC of PRC = 0.426022
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[431   3]
 [ 37   7]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.08095800131559372
difference in average predicted and observed risk = -0.011091998684406287
number samples = 478
accuracy = 0.916318
precision class 0 = 0.92094
precision class 1 = 0.7
recall class 0 = 0.993088
recall class 1 = 0.159091
false negative rate = 0.840909
false positive rate = 0.006912
positive prediction rate = 0.020921
AUC of ROC = 0.884112
AUC of PRC = 0.576673
min(+P, Se) = 0.636364

-------------------------------

confusion matrix:
[[387   1]
 [ 36   2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.07389000058174133
difference in average predicted and observed risk = -0.01531199941825867
number samples = 426
accuracy = 0.913146
precision class 0 = 0.914894
precision class 1 = 0.666667
recall class 0 = 0.997423
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.002577
positive prediction rate = 0.007042
AUC of ROC = 0.874322
AUC of PRC = 0.462606
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[89  1]
 [10  2]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.0980449989438057
difference in average predicted and observed risk = -0.019602001056194307
number samples = 102
accuracy = 0.892157
precision class 0 = 0.89899
precision class 1 = 0.666667
recall class 0 = 0.988889
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.011111
positive prediction rate = 0.029412
AUC of ROC = 0.839815
AUC of PRC = 0.566156
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.07889200001955032
difference in average predicted and observed risk = -0.009817999980449674
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.87852
AUC of PRC = 0.342833
min(+P, Se) = 0.454545

-------------------------------

confusion matrix:
[[106   2]
 [ 15   4]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10796999931335449
difference in average predicted and observed risk = -0.0416360006866455
number samples = 127
accuracy = 0.866142
precision class 0 = 0.876033
precision class 1 = 0.666667
recall class 0 = 0.981481
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.018519
positive prediction rate = 0.047244
AUC of ROC = 0.862086
AUC of PRC = 0.612762
min(+P, Se) = 0.631579

-------------------------------

confusion matrix:
[[34  1]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.11517699807882309
difference in average predicted and observed risk = 0.036229998078823086
number samples = 38
accuracy = 0.921053
precision class 0 = 0.944444
precision class 1 = 0.5
recall class 0 = 0.971429
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.028571
positive prediction rate = 0.052632
AUC of ROC = 0.980952
AUC of PRC = 0.763889
min(+P, Se) = 0.75

-------------------------------

confusion matrix:
[[728   6]
 [ 74   9]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.08488299697637558
difference in average predicted and observed risk = -0.01670800302362442
number samples = 817
accuracy = 0.902081
precision class 0 = 0.907731
precision class 1 = 0.6
recall class 0 = 0.991826
recall class 1 = 0.108434
false negative rate = 0.891566
false positive rate = 0.008174
positive prediction rate = 0.01836
AUC of ROC = 0.870326
AUC of PRC = 0.509338
min(+P, Se) = 0.554217

-------------------------------

Epoch 00017: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch17.state
Epoch 18/100
 - 256s - loss: 0.2688 - val_loss: 0.2423

==>predicting on train



confusion matrix:
[[2150    5]
 [ 226   29]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.06361500173807144
difference in average predicted and observed risk = -0.04219399826192856
number samples = 2410
accuracy = 0.904149
precision class 0 = 0.904882
precision class 1 = 0.852941
recall class 0 = 0.99768
recall class 1 = 0.113725
false negative rate = 0.886275
false positive rate = 0.00232
positive prediction rate = 0.014108
AUC of ROC = 0.843681
AUC of PRC = 0.469546
min(+P, Se) = 0.453125

-------------------------------

confusion matrix:
[[1165   14]
 [ 100   18]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.07061000168323517
difference in average predicted and observed risk = -0.020368998316764836
number samples = 1297
accuracy = 0.912105
precision class 0 = 0.920949
precision class 1 = 0.5625
recall class 0 = 0.988126
recall class 1 = 0.152542
false negative rate = 0.847458
false positive rate = 0.011874
positive prediction rate = 0.024672
AUC of ROC = 0.838803
AUC of PRC = 0.387268
min(+P, Se) = 0.415254

-------------------------------

confusion matrix:
[[651   5]
 [ 62  12]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.08204899728298187
difference in average predicted and observed risk = -0.01932100271701813
number samples = 730
accuracy = 0.908219
precision class 0 = 0.913043
precision class 1 = 0.705882
recall class 0 = 0.992378
recall class 1 = 0.162162
false negative rate = 0.837838
false positive rate = 0.007622
positive prediction rate = 0.023288
AUC of ROC = 0.796267
AUC of PRC = 0.412304
min(+P, Se) = 0.459459

-------------------------------

confusion matrix:
[[167   0]
 [ 19   5]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.07709699869155884
difference in average predicted and observed risk = -0.04855700130844115
number samples = 191
accuracy = 0.900524
precision class 0 = 0.897849
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.208333
false negative rate = 0.791667
false positive rate = 0.0
positive prediction rate = 0.026178
AUC of ROC = 0.888224
AUC of PRC = 0.711973
min(+P, Se) = 0.68

-------------------------------

confusion matrix:
[[2461   13]
 [ 218   37]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.06407299637794495
difference in average predicted and observed risk = -0.02936800362205505
number samples = 2729
accuracy = 0.915354
precision class 0 = 0.918626
precision class 1 = 0.74
recall class 0 = 0.994745
recall class 1 = 0.145098
false negative rate = 0.854902
false positive rate = 0.005255
positive prediction rate = 0.018322
AUC of ROC = 0.835973
AUC of PRC = 0.415633
min(+P, Se) = 0.429688

-------------------------------

confusion matrix:
[[1672   11]
 [ 189   27]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.07617700099945068
difference in average predicted and observed risk = -0.037566999000549314
number samples = 1899
accuracy = 0.894681
precision class 0 = 0.898442
precision class 1 = 0.710526
recall class 0 = 0.993464
recall class 1 = 0.125
false negative rate = 0.875
false positive rate = 0.006536
positive prediction rate = 0.020011
AUC of ROC = 0.836907
AUC of PRC = 0.471223
min(+P, Se) = 0.463303

-------------------------------

confusion matrix:
[[545   4]
 [ 70   7]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.07429400086402893
difference in average predicted and observed risk = -0.04870899913597107
number samples = 626
accuracy = 0.881789
precision class 0 = 0.886179
precision class 1 = 0.636364
recall class 0 = 0.992714
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.007286
positive prediction rate = 0.017572
AUC of ROC = 0.842098
AUC of PRC = 0.463988
min(+P, Se) = 0.5

-------------------------------

confusion matrix:
[[2242    7]
 [ 189   19]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.05950000137090683
difference in average predicted and observed risk = -0.025155998629093165
number samples = 2457
accuracy = 0.920228
precision class 0 = 0.922254
precision class 1 = 0.730769
recall class 0 = 0.996888
recall class 1 = 0.091346
false negative rate = 0.908654
false positive rate = 0.003112
positive prediction rate = 0.010582
AUC of ROC = 0.841299
AUC of PRC = 0.377864
min(+P, Se) = 0.377358

-------------------------------

confusion matrix:
[[221   2]
 [ 22   3]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.06350500136613846
difference in average predicted and observed risk = -0.03730099863386155
number samples = 248
accuracy = 0.903226
precision class 0 = 0.909465
precision class 1 = 0.6
recall class 0 = 0.991031
recall class 1 = 0.12
false negative rate = 0.88
false positive rate = 0.008969
positive prediction rate = 0.020161
AUC of ROC = 0.764305
AUC of PRC = 0.274732
min(+P, Se) = 0.36

-------------------------------

confusion matrix:
[[476   5]
 [ 61  21]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.09226900339126587
difference in average predicted and observed risk = -0.05337899660873413
number samples = 563
accuracy = 0.882771
precision class 0 = 0.886406
precision class 1 = 0.807692
recall class 0 = 0.989605
recall class 1 = 0.256098
false negative rate = 0.743902
false positive rate = 0.010395
positive prediction rate = 0.046181
AUC of ROC = 0.849247
AUC of PRC = 0.617871
min(+P, Se) = 0.560976

-------------------------------

confusion matrix:
[[649   6]
 [ 65  14]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.08054099977016449
difference in average predicted and observed risk = -0.027088000229835513
number samples = 734
accuracy = 0.90327
precision class 0 = 0.908964
precision class 1 = 0.7
recall class 0 = 0.99084
recall class 1 = 0.177215
false negative rate = 0.822785
false positive rate = 0.00916
positive prediction rate = 0.027248
AUC of ROC = 0.826843
AUC of PRC = 0.464098
min(+P, Se) = 0.481013

-------------------------------

confusion matrix:
[[4133   24]
 [ 407   64]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.0690390020608902
difference in average predicted and observed risk = -0.032732997939109804
number samples = 4628
accuracy = 0.906871
precision class 0 = 0.910352
precision class 1 = 0.727273
recall class 0 = 0.994227
recall class 1 = 0.135881
false negative rate = 0.864119
false positive rate = 0.005773
positive prediction rate = 0.019015
AUC of ROC = 0.836978
AUC of PRC = 0.439763
min(+P, Se) = 0.443737

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.06718199700117111
difference in average predicted and observed risk = -0.012987002998828892
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.883148
AUC of PRC = 0.439334
min(+P, Se) = 0.45

-------------------------------

confusion matrix:
[[385   0]
 [ 47   0]]
/share/pi/boussard/eroosli_work/benchmarking/models/evaluation/metrics.py:34: RuntimeWarning: invalid value encountered in float_scalars
  prec1 = np.round(float(cf[1][1] / (cf[1][1] + cf[0][1])),6)

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.06128799915313721
difference in average predicted and observed risk = -0.0475080008468628
number samples = 432
accuracy = 0.891204
precision class 0 = 0.891204
precision class 1 = nan
recall class 0 = 1.0
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.0
positive prediction rate = 0.0
AUC of ROC = 0.841835
AUC of PRC = 0.511315
min(+P, Se) = 0.468085

-------------------------------

confusion matrix:
[[105   0]
 [  9   4]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.09698399901390076
difference in average predicted and observed risk = -0.013185000986099246
number samples = 118
accuracy = 0.923729
precision class 0 = 0.921053
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.307692
false negative rate = 0.692308
false positive rate = 0.0
positive prediction rate = 0.033898
AUC of ROC = 0.875458
AUC of PRC = 0.701646
min(+P, Se) = 0.692308

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.09421499818563461
difference in average predicted and observed risk = -0.039118001814365394
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[299   1]
 [ 37   2]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.07542700320482254
difference in average predicted and observed risk = -0.03961699679517745
number samples = 339
accuracy = 0.887906
precision class 0 = 0.889881
precision class 1 = 0.666667
recall class 0 = 0.996667
recall class 1 = 0.051282
false negative rate = 0.948718
false positive rate = 0.003333
positive prediction rate = 0.00885
AUC of ROC = 0.840513
AUC of PRC = 0.456518
min(+P, Se) = 0.461538

-------------------------------

confusion matrix:
[[432   2]
 [ 36   8]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.06506200134754181
difference in average predicted and observed risk = -0.026987998652458198
number samples = 478
accuracy = 0.920502
precision class 0 = 0.923077
precision class 1 = 0.8
recall class 0 = 0.995392
recall class 1 = 0.181818
false negative rate = 0.818182
false positive rate = 0.004608
positive prediction rate = 0.020921
AUC of ROC = 0.870549
AUC of PRC = 0.583643
min(+P, Se) = 0.613636

-------------------------------

confusion matrix:
[[387   1]
 [ 36   2]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.05835200101137161
difference in average predicted and observed risk = -0.03084999898862839
number samples = 426
accuracy = 0.913146
precision class 0 = 0.914894
precision class 1 = 0.666667
recall class 0 = 0.997423
recall class 1 = 0.052632
false negative rate = 0.947368
false positive rate = 0.002577
positive prediction rate = 0.007042
AUC of ROC = 0.854314
AUC of PRC = 0.447489
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[90  0]
 [10  2]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.0846330001950264
difference in average predicted and observed risk = -0.033013999804973604
number samples = 102
accuracy = 0.901961
precision class 0 = 0.9
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.166667
false negative rate = 0.833333
false positive rate = 0.0
positive prediction rate = 0.019608
AUC of ROC = 0.871296
AUC of PRC = 0.652872
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[112   1]
 [ 11   0]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.06362099945545197
difference in average predicted and observed risk = -0.025089000544548032
number samples = 124
accuracy = 0.903226
precision class 0 = 0.910569
precision class 1 = 0.0
recall class 0 = 0.99115
recall class 1 = 0.0
false negative rate = 1.0
false positive rate = 0.00885
positive prediction rate = 0.008065
AUC of ROC = 0.835076
AUC of PRC = 0.328454
min(+P, Se) = 0.384615

-------------------------------

confusion matrix:
[[107   1]
 [ 14   5]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.0916379988193512
difference in average predicted and observed risk = -0.05796800118064879
number samples = 127
accuracy = 0.88189
precision class 0 = 0.884298
precision class 1 = 0.833333
recall class 0 = 0.990741
recall class 1 = 0.263158
false negative rate = 0.736842
false positive rate = 0.009259
positive prediction rate = 0.047244
AUC of ROC = 0.861598
AUC of PRC = 0.619137
min(+P, Se) = 0.631579

-------------------------------

confusion matrix:
[[35  0]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.09610100090503693
difference in average predicted and observed risk = 0.017154000905036923
number samples = 38
accuracy = 0.947368
precision class 0 = 0.945946
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.026316
AUC of ROC = 0.971429
AUC of PRC = 0.711111
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[731   3]
 [ 73  10]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.06936299800872803
difference in average predicted and observed risk = -0.03222800199127197
number samples = 817
accuracy = 0.906977
precision class 0 = 0.909204
precision class 1 = 0.769231
recall class 0 = 0.995913
recall class 1 = 0.120482
false negative rate = 0.879518
false positive rate = 0.004087
positive prediction rate = 0.015912
AUC of ROC = 0.859509
AUC of PRC = 0.522746
min(+P, Se) = 0.542169

-------------------------------

Epoch 00018: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch18.state
Epoch 19/100
 - 258s - loss: 0.2628 - val_loss: 0.2522

==>predicting on train



confusion matrix:
[[2144   11]
 [ 216   39]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.105809
average predicted risk of IHM = 0.07809600234031677
difference in average predicted and observed risk = -0.027712997659683228
number samples = 2410
accuracy = 0.905809
precision class 0 = 0.908475
precision class 1 = 0.78
recall class 0 = 0.994896
recall class 1 = 0.152941
false negative rate = 0.847059
false positive rate = 0.005104
positive prediction rate = 0.020747
AUC of ROC = 0.811426
AUC of PRC = 0.432729
min(+P, Se) = 0.423529

-------------------------------

confusion matrix:
[[1163   16]
 [  95   23]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.090979
average predicted risk of IHM = 0.08539199829101562
difference in average predicted and observed risk = -0.005587001708984379
number samples = 1297
accuracy = 0.914418
precision class 0 = 0.924483
precision class 1 = 0.589744
recall class 0 = 0.986429
recall class 1 = 0.194915
false negative rate = 0.805085
false positive rate = 0.013571
positive prediction rate = 0.030069
AUC of ROC = 0.812467
AUC of PRC = 0.355539
min(+P, Se) = 0.376

-------------------------------

confusion matrix:
[[646  10]
 [ 59  15]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.10137
average predicted risk of IHM = 0.0948529988527298
difference in average predicted and observed risk = -0.006517001147270204
number samples = 730
accuracy = 0.905479
precision class 0 = 0.916312
precision class 1 = 0.6
recall class 0 = 0.984756
recall class 1 = 0.202703
false negative rate = 0.797297
false positive rate = 0.015244
positive prediction rate = 0.034247
AUC of ROC = 0.792271
AUC of PRC = 0.403388
min(+P, Se) = 0.447368

-------------------------------

confusion matrix:
[[166   1]
 [ 16   8]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.125654
average predicted risk of IHM = 0.0921429991722107
difference in average predicted and observed risk = -0.033511000827789295
number samples = 191
accuracy = 0.910995
precision class 0 = 0.912088
precision class 1 = 0.888889
recall class 0 = 0.994012
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.005988
positive prediction rate = 0.04712
AUC of ROC = 0.864271
AUC of PRC = 0.68313
min(+P, Se) = 0.64

-------------------------------

confusion matrix:
[[2452   22]
 [ 208   47]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.093441
average predicted risk of IHM = 0.07886199653148651
difference in average predicted and observed risk = -0.014579003468513485
number samples = 2729
accuracy = 0.91572
precision class 0 = 0.921804
precision class 1 = 0.681159
recall class 0 = 0.991108
recall class 1 = 0.184314
false negative rate = 0.815686
false positive rate = 0.008892
positive prediction rate = 0.025284
AUC of ROC = 0.809053
AUC of PRC = 0.382215
min(+P, Se) = 0.400763

-------------------------------

confusion matrix:
[[1667   16]
 [ 178   38]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.113744
average predicted risk of IHM = 0.08983299881219864
difference in average predicted and observed risk = -0.02391100118780136
number samples = 1899
accuracy = 0.897841
precision class 0 = 0.903523
precision class 1 = 0.703704
recall class 0 = 0.990493
recall class 1 = 0.175926
false negative rate = 0.824074
false positive rate = 0.009507
positive prediction rate = 0.028436
AUC of ROC = 0.811616
AUC of PRC = 0.443676
min(+P, Se) = 0.456221

-------------------------------

confusion matrix:
[[543   6]
 [ 67  10]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.123003
average predicted risk of IHM = 0.0870010033249855
difference in average predicted and observed risk = -0.0360019966750145
number samples = 626
accuracy = 0.883387
precision class 0 = 0.890164
precision class 1 = 0.625
recall class 0 = 0.989071
recall class 1 = 0.12987
false negative rate = 0.87013
false positive rate = 0.010929
positive prediction rate = 0.025559
AUC of ROC = 0.805999
AUC of PRC = 0.409165
min(+P, Se) = 0.432099

-------------------------------

confusion matrix:
[[2235   14]
 [ 179   29]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.084656
average predicted risk of IHM = 0.074242003262043
difference in average predicted and observed risk = -0.010413996737956996
number samples = 2457
accuracy = 0.921449
precision class 0 = 0.925849
precision class 1 = 0.674419
recall class 0 = 0.993775
recall class 1 = 0.139423
false negative rate = 0.860577
false positive rate = 0.006225
positive prediction rate = 0.017501
AUC of ROC = 0.800809
AUC of PRC = 0.345302
min(+P, Se) = 0.370192

-------------------------------

confusion matrix:
[[218   5]
 [ 21   4]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.100806
average predicted risk of IHM = 0.07642699778079987
difference in average predicted and observed risk = -0.02437900221920014
number samples = 248
accuracy = 0.895161
precision class 0 = 0.912134
precision class 1 = 0.444444
recall class 0 = 0.977578
recall class 1 = 0.16
false negative rate = 0.84
false positive rate = 0.022422
positive prediction rate = 0.03629
AUC of ROC = 0.764305
AUC of PRC = 0.257392
min(+P, Se) = 0.36

-------------------------------

confusion matrix:
[[476   5]
 [ 56  26]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.145648
average predicted risk of IHM = 0.10809899866580963
difference in average predicted and observed risk = -0.03754900133419037
number samples = 563
accuracy = 0.891652
precision class 0 = 0.894737
precision class 1 = 0.83871
recall class 0 = 0.989605
recall class 1 = 0.317073
false negative rate = 0.682927
false positive rate = 0.010395
positive prediction rate = 0.055062
AUC of ROC = 0.844531
AUC of PRC = 0.59858
min(+P, Se) = 0.573171

-------------------------------

confusion matrix:
[[647   8]
 [ 63  16]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.107629
average predicted risk of IHM = 0.09416700154542923
difference in average predicted and observed risk = -0.013461998454570773
number samples = 734
accuracy = 0.90327
precision class 0 = 0.911268
precision class 1 = 0.666667
recall class 0 = 0.987786
recall class 1 = 0.202532
false negative rate = 0.797468
false positive rate = 0.012214
positive prediction rate = 0.032698
AUC of ROC = 0.822456
AUC of PRC = 0.44974
min(+P, Se) = 0.468354

-------------------------------

confusion matrix:
[[4119   38]
 [ 386   85]]
prevalence of IHM = 0.101772
average predicted risk of IHM = 0.08336400240659714
difference in average predicted and observed risk = -0.018407997593402864
number samples = 4628
accuracy = 0.908384
precision class 0 = 0.914317
precision class 1 = 0.691057
recall class 0 = 0.990859
recall class 1 = 0.180467
false negative rate = 0.819533
false positive rate = 0.009141
positive prediction rate = 0.026577
AUC of ROC = 0.810968
AUC of PRC = 0.411158
min(+P, Se) = 0.424628

-------------------------------

==>predicting on validation



confusion matrix:
[[215   3]
 [ 15   4]]

stratified metric for:
demographic variable: Insurance
value: Private

overall metrics:
prevalence of IHM = 0.080169
average predicted risk of IHM = 0.08247499912977219
difference in average predicted and observed risk = 0.002305999129772182
number samples = 237
accuracy = 0.924051
precision class 0 = 0.934783
precision class 1 = 0.571429
recall class 0 = 0.986239
recall class 1 = 0.210526
false negative rate = 0.789474
false positive rate = 0.013761
positive prediction rate = 0.029536
AUC of ROC = 0.848141
AUC of PRC = 0.39941
min(+P, Se) = 0.473684

-------------------------------

confusion matrix:
[[384   1]
 [ 42   5]]

stratified metric for:
demographic variable: Insurance
value: Medicare

overall metrics:
prevalence of IHM = 0.108796
average predicted risk of IHM = 0.07680600136518478
difference in average predicted and observed risk = -0.03198999863481522
number samples = 432
accuracy = 0.900463
precision class 0 = 0.901408
precision class 1 = 0.833333
recall class 0 = 0.997403
recall class 1 = 0.106383
false negative rate = 0.893617
false positive rate = 0.002597
positive prediction rate = 0.013889
AUC of ROC = 0.794142
AUC of PRC = 0.433705
min(+P, Se) = 0.404255

-------------------------------

confusion matrix:
[[104   1]
 [  8   5]]

stratified metric for:
demographic variable: Insurance
value: Medicaid

overall metrics:
prevalence of IHM = 0.110169
average predicted risk of IHM = 0.10856399685144424
difference in average predicted and observed risk = -0.0016050031485557587
number samples = 118
accuracy = 0.923729
precision class 0 = 0.928571
precision class 1 = 0.833333
recall class 0 = 0.990476
recall class 1 = 0.384615
false negative rate = 0.615385
false positive rate = 0.009524
positive prediction rate = 0.050847
AUC of ROC = 0.862271
AUC of PRC = 0.716553
min(+P, Se) = 0.642857

-------------------------------

confusion matrix:
[[26  0]
 [ 2  2]]

stratified metric for:
demographic variable: Insurance
value: Other

overall metrics:
prevalence of IHM = 0.133333
average predicted risk of IHM = 0.11051200330257416
difference in average predicted and observed risk = -0.02282099669742585
number samples = 30
accuracy = 0.933333
precision class 0 = 0.928571
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.5
false negative rate = 0.5
false positive rate = 0.0
positive prediction rate = 0.066667
AUC of ROC = 0.990385
AUC of PRC = 0.94375
min(+P, Se) = 0.8

-------------------------------

confusion matrix:
[[297   3]
 [ 34   5]]

stratified metric for:
demographic variable: Gender
value: F

overall metrics:
prevalence of IHM = 0.115044
average predicted risk of IHM = 0.09044700115919113
difference in average predicted and observed risk = -0.024596998840808862
number samples = 339
accuracy = 0.890855
precision class 0 = 0.897281
precision class 1 = 0.625
recall class 0 = 0.99
recall class 1 = 0.128205
false negative rate = 0.871795
false positive rate = 0.01
positive prediction rate = 0.023599
AUC of ROC = 0.79094
AUC of PRC = 0.371131
min(+P, Se) = 0.410256

-------------------------------

confusion matrix:
[[432   2]
 [ 33  11]]

stratified metric for:
demographic variable: Gender
value: M

overall metrics:
prevalence of IHM = 0.09205
average predicted risk of IHM = 0.07989799976348877
difference in average predicted and observed risk = -0.012152000236511237
number samples = 478
accuracy = 0.926778
precision class 0 = 0.929032
precision class 1 = 0.846154
recall class 0 = 0.995392
recall class 1 = 0.25
false negative rate = 0.75
false positive rate = 0.004608
positive prediction rate = 0.027197
AUC of ROC = 0.840071
AUC of PRC = 0.517431
min(+P, Se) = 0.590909

-------------------------------

confusion matrix:
[[387   1]
 [ 34   4]]

stratified metric for:
demographic variable: Ethnicity
value: WHITE

overall metrics:
prevalence of IHM = 0.089202
average predicted risk of IHM = 0.07368800044059753
difference in average predicted and observed risk = -0.01551399955940247
number samples = 426
accuracy = 0.91784
precision class 0 = 0.91924
precision class 1 = 0.8
recall class 0 = 0.997423
recall class 1 = 0.105263
false negative rate = 0.894737
false positive rate = 0.002577
positive prediction rate = 0.011737
AUC of ROC = 0.798901
AUC of PRC = 0.416353
min(+P, Se) = 0.421053

-------------------------------

confusion matrix:
[[90  0]
 [ 8  4]]

stratified metric for:
demographic variable: Ethnicity
value: OTHER

overall metrics:
prevalence of IHM = 0.117647
average predicted risk of IHM = 0.10174799710512161
difference in average predicted and observed risk = -0.01589900289487839
number samples = 102
accuracy = 0.921569
precision class 0 = 0.918367
precision class 1 = 1.0
recall class 0 = 1.0
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.0
positive prediction rate = 0.039216
AUC of ROC = 0.876852
AUC of PRC = 0.659859
min(+P, Se) = 0.583333

-------------------------------

confusion matrix:
[[112   1]
 [ 10   1]]

stratified metric for:
demographic variable: Ethnicity
value: ASIAN

overall metrics:
prevalence of IHM = 0.08871
average predicted risk of IHM = 0.07704699784517288
difference in average predicted and observed risk = -0.011663002154827115
number samples = 124
accuracy = 0.91129
precision class 0 = 0.918033
precision class 1 = 0.5
recall class 0 = 0.99115
recall class 1 = 0.090909
false negative rate = 0.909091
false positive rate = 0.00885
positive prediction rate = 0.016129
AUC of ROC = 0.829445
AUC of PRC = 0.258166
min(+P, Se) = 0.363636

-------------------------------

confusion matrix:
[[106   2]
 [ 13   6]]

stratified metric for:
demographic variable: Ethnicity
value: HISPANIC

overall metrics:
prevalence of IHM = 0.149606
average predicted risk of IHM = 0.10371299833059311
difference in average predicted and observed risk = -0.04589300166940688
number samples = 127
accuracy = 0.88189
precision class 0 = 0.890756
precision class 1 = 0.75
recall class 0 = 0.981481
recall class 1 = 0.315789
false negative rate = 0.684211
false positive rate = 0.018519
positive prediction rate = 0.062992
AUC of ROC = 0.811404
AUC of PRC = 0.527744
min(+P, Se) = 0.578947

-------------------------------

confusion matrix:
[[34  1]
 [ 2  1]]

stratified metric for:
demographic variable: Ethnicity
value: BLACK

overall metrics:
prevalence of IHM = 0.078947
average predicted risk of IHM = 0.11467699706554413
difference in average predicted and observed risk = 0.035729997065544125
number samples = 38
accuracy = 0.921053
precision class 0 = 0.944444
precision class 1 = 0.5
recall class 0 = 0.971429
recall class 1 = 0.333333
false negative rate = 0.666667
false positive rate = 0.028571
positive prediction rate = 0.052632
AUC of ROC = 0.961905
AUC of PRC = 0.677778
min(+P, Se) = 0.666667

-------------------------------

confusion matrix:
[[729   5]
 [ 67  16]]
prevalence of IHM = 0.101591
average predicted risk of IHM = 0.08427499979734421
difference in average predicted and observed risk = -0.017316000202655793
number samples = 817
accuracy = 0.911873
precision class 0 = 0.915829
precision class 1 = 0.761905
recall class 0 = 0.993188
recall class 1 = 0.192771
false negative rate = 0.807229
false positive rate = 0.006812
positive prediction rate = 0.025704
AUC of ROC = 0.822068
AUC of PRC = 0.456369
min(+P, Se) = 0.5

-------------------------------

Epoch 00019: saving model to models/outputs/starr/keras_states/2020-06-01_10-11/k_clstms.none.epoch19.state
